const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditComplaintPage-DhMYwAZL.js","assets/EditComplaintPage-B-q2gbHC.css","assets/AddPatientPage-DDCX6wUa.js","assets/AddPatientPage-CvaX_3Vg.css"])))=>i.map(i=>d[i]);
var KG=Object.defineProperty;var RM=t=>{throw TypeError(t)};var YG=(t,e,n)=>e in t?KG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var br=(t,e,n)=>YG(t,typeof e!="symbol"?e+"":e,n),H_=(t,e,n)=>e.has(t)||RM("Cannot "+n);var Re=(t,e,n)=>(H_(t,e,"read from private field"),n?n.call(t):e.get(t)),Ut=(t,e,n)=>e.has(t)?RM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Pt=(t,e,n,a)=>(H_(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n),wn=(t,e,n)=>(H_(t,e,"access private method"),n);var uj=(t,e,n,a)=>({set _(i){Pt(t,e,i,n)},get _(){return Re(t,e,a)}});function QG(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(a,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G_={exports:{}},Bx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LM;function XG(){if(LM)return Bx;LM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:a,key:o,ref:i!==void 0?i:null,props:s}}return Bx.Fragment=e,Bx.jsx=n,Bx.jsxs=n,Bx}var FM;function JG(){return FM||(FM=1,G_.exports=XG()),G_.exports}var r=JG(),W_={exports:{}},xn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $M;function ZG(){if($M)return xn;$M=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function S(B,ce,je){this.props=B,this.context=ce,this.refs=j,this.updater=je||x}S.prototype.isReactComponent={},S.prototype.setState=function(B,ce){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ce,"setState")},S.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function _(){}_.prototype=S.prototype;function T(B,ce,je){this.props=B,this.context=ce,this.refs=j,this.updater=je||x}var C=T.prototype=new _;C.constructor=T,b(C,S.prototype),C.isPureReactComponent=!0;var P=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function I(B,ce,je,K,Ie,Ue){return je=Ue.ref,{$$typeof:t,type:B,key:ce,ref:je!==void 0?je:null,props:Ue}}function L(B,ce){return I(B.type,ce,void 0,void 0,void 0,B.props)}function $(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function q(B){var ce={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(je){return ce[je]})}var F=/\/+/g;function H(B,ce){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):ce.toString(36)}function V(){}function X(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(V,V):(B.status="pending",B.then(function(ce){B.status==="pending"&&(B.status="fulfilled",B.value=ce)},function(ce){B.status==="pending"&&(B.status="rejected",B.reason=ce)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Y(B,ce,je,K,Ie){var Ue=typeof B;(Ue==="undefined"||Ue==="boolean")&&(B=null);var ze=!1;if(B===null)ze=!0;else switch(Ue){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(B.$$typeof){case t:case e:ze=!0;break;case f:return ze=B._init,Y(ze(B._payload),ce,je,K,Ie)}}if(ze)return Ie=Ie(B),ze=K===""?"."+H(B,0):K,P(Ie)?(je="",ze!=null&&(je=ze.replace(F,"$&/")+"/"),Y(Ie,ce,je,"",function(Ce){return Ce})):Ie!=null&&($(Ie)&&(Ie=L(Ie,je+(Ie.key==null||B&&B.key===Ie.key?"":(""+Ie.key).replace(F,"$&/")+"/")+ze)),ce.push(Ie)),1;ze=0;var Le=K===""?".":K+":";if(P(B))for(var be=0;be<B.length;be++)K=B[be],Ue=Le+H(K,be),ze+=Y(K,ce,je,Ue,Ie);else if(be=g(B),typeof be=="function")for(B=be.call(B),be=0;!(K=B.next()).done;)K=K.value,Ue=Le+H(K,be++),ze+=Y(K,ce,je,Ue,Ie);else if(Ue==="object"){if(typeof B.then=="function")return Y(X(B),ce,je,K,Ie);throw ce=String(B),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return ze}function z(B,ce,je){if(B==null)return B;var K=[],Ie=0;return Y(B,K,"","",function(Ue){return ce.call(je,Ue,Ie++)}),K}function G(B){if(B._status===-1){var ce=B._result;ce=ce(),ce.then(function(je){(B._status===0||B._status===-1)&&(B._status=1,B._result=je)},function(je){(B._status===0||B._status===-1)&&(B._status=2,B._result=je)}),B._status===-1&&(B._status=0,B._result=ce)}if(B._status===1)return B._result.default;throw B._result}var ie=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function W(){}return xn.Children={map:z,forEach:function(B,ce,je){z(B,function(){ce.apply(this,arguments)},je)},count:function(B){var ce=0;return z(B,function(){ce++}),ce},toArray:function(B){return z(B,function(ce){return ce})||[]},only:function(B){if(!$(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},xn.Component=S,xn.Fragment=n,xn.Profiler=i,xn.PureComponent=T,xn.StrictMode=a,xn.Suspense=c,xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,xn.__COMPILER_RUNTIME={__proto__:null,c:function(B){return k.H.useMemoCache(B)}},xn.cache=function(B){return function(){return B.apply(null,arguments)}},xn.cloneElement=function(B,ce,je){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var K=b({},B.props),Ie=B.key,Ue=void 0;if(ce!=null)for(ze in ce.ref!==void 0&&(Ue=void 0),ce.key!==void 0&&(Ie=""+ce.key),ce)!E.call(ce,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&ce.ref===void 0||(K[ze]=ce[ze]);var ze=arguments.length-2;if(ze===1)K.children=je;else if(1<ze){for(var Le=Array(ze),be=0;be<ze;be++)Le[be]=arguments[be+2];K.children=Le}return I(B.type,Ie,void 0,void 0,Ue,K)},xn.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:s,_context:B},B},xn.createElement=function(B,ce,je){var K,Ie={},Ue=null;if(ce!=null)for(K in ce.key!==void 0&&(Ue=""+ce.key),ce)E.call(ce,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(Ie[K]=ce[K]);var ze=arguments.length-2;if(ze===1)Ie.children=je;else if(1<ze){for(var Le=Array(ze),be=0;be<ze;be++)Le[be]=arguments[be+2];Ie.children=Le}if(B&&B.defaultProps)for(K in ze=B.defaultProps,ze)Ie[K]===void 0&&(Ie[K]=ze[K]);return I(B,Ue,void 0,void 0,null,Ie)},xn.createRef=function(){return{current:null}},xn.forwardRef=function(B){return{$$typeof:l,render:B}},xn.isValidElement=$,xn.lazy=function(B){return{$$typeof:f,_payload:{_status:-1,_result:B},_init:G}},xn.memo=function(B,ce){return{$$typeof:d,type:B,compare:ce===void 0?null:ce}},xn.startTransition=function(B){var ce=k.T,je={};k.T=je;try{var K=B(),Ie=k.S;Ie!==null&&Ie(je,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(W,ie)}catch(Ue){ie(Ue)}finally{k.T=ce}},xn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},xn.use=function(B){return k.H.use(B)},xn.useActionState=function(B,ce,je){return k.H.useActionState(B,ce,je)},xn.useCallback=function(B,ce){return k.H.useCallback(B,ce)},xn.useContext=function(B){return k.H.useContext(B)},xn.useDebugValue=function(){},xn.useDeferredValue=function(B,ce){return k.H.useDeferredValue(B,ce)},xn.useEffect=function(B,ce,je){var K=k.H;if(typeof je=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(B,ce)},xn.useId=function(){return k.H.useId()},xn.useImperativeHandle=function(B,ce,je){return k.H.useImperativeHandle(B,ce,je)},xn.useInsertionEffect=function(B,ce){return k.H.useInsertionEffect(B,ce)},xn.useLayoutEffect=function(B,ce){return k.H.useLayoutEffect(B,ce)},xn.useMemo=function(B,ce){return k.H.useMemo(B,ce)},xn.useOptimistic=function(B,ce){return k.H.useOptimistic(B,ce)},xn.useReducer=function(B,ce,je){return k.H.useReducer(B,ce,je)},xn.useRef=function(B){return k.H.useRef(B)},xn.useState=function(B){return k.H.useState(B)},xn.useSyncExternalStore=function(B,ce,je){return k.H.useSyncExternalStore(B,ce,je)},xn.useTransition=function(){return k.H.useTransition()},xn.version="19.1.0",xn}var BM;function kD(){return BM||(BM=1,W_.exports=ZG()),W_.exports}var v=kD();const Se=Wn(v),zM=QG({__proto__:null,default:Se},[v]);var K_={exports:{}},zx={},Y_={exports:{}},Q_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM;function eW(){return qM||(qM=1,function(t){function e(z,G){var ie=z.length;z.push(G);e:for(;0<ie;){var W=ie-1>>>1,B=z[W];if(0<i(B,G))z[W]=G,z[ie]=B,ie=W;else break e}}function n(z){return z.length===0?null:z[0]}function a(z){if(z.length===0)return null;var G=z[0],ie=z.pop();if(ie!==G){z[0]=ie;e:for(var W=0,B=z.length,ce=B>>>1;W<ce;){var je=2*(W+1)-1,K=z[je],Ie=je+1,Ue=z[Ie];if(0>i(K,ie))Ie<B&&0>i(Ue,K)?(z[W]=Ue,z[Ie]=ie,W=Ie):(z[W]=K,z[je]=ie,W=je);else if(Ie<B&&0>i(Ue,ie))z[W]=Ue,z[Ie]=ie,W=Ie;else break e}}return G}function i(z,G){var ie=z.sortIndex-G.sortIndex;return ie!==0?ie:z.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,p=null,g=3,x=!1,b=!1,j=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function P(z){for(var G=n(d);G!==null;){if(G.callback===null)a(d);else if(G.startTime<=z)a(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(d)}}function k(z){if(j=!1,P(z),!b)if(n(c)!==null)b=!0,E||(E=!0,H());else{var G=n(d);G!==null&&Y(k,G.startTime-z)}}var E=!1,I=-1,L=5,$=-1;function q(){return S?!0:!(t.unstable_now()-$<L)}function F(){if(S=!1,E){var z=t.unstable_now();$=z;var G=!0;try{e:{b=!1,j&&(j=!1,T(I),I=-1),x=!0;var ie=g;try{t:{for(P(z),p=n(c);p!==null&&!(p.expirationTime>z&&q());){var W=p.callback;if(typeof W=="function"){p.callback=null,g=p.priorityLevel;var B=W(p.expirationTime<=z);if(z=t.unstable_now(),typeof B=="function"){p.callback=B,P(z),G=!0;break t}p===n(c)&&a(c),P(z)}else a(c);p=n(c)}if(p!==null)G=!0;else{var ce=n(d);ce!==null&&Y(k,ce.startTime-z),G=!1}}break e}finally{p=null,g=ie,x=!1}G=void 0}}finally{G?H():E=!1}}}var H;if(typeof C=="function")H=function(){C(F)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,X=V.port2;V.port1.onmessage=F,H=function(){X.postMessage(null)}}else H=function(){_(F,0)};function Y(z,G){I=_(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var ie=g;g=G;try{return z()}finally{g=ie}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ie=g;g=z;try{return G()}finally{g=ie}},t.unstable_scheduleCallback=function(z,G,ie){var W=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?W+ie:W):ie=W,z){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ie+B,z={id:f++,callback:G,priorityLevel:z,startTime:ie,expirationTime:B,sortIndex:-1},ie>W?(z.sortIndex=ie,e(d,z),n(c)===null&&z===n(d)&&(j?(T(I),I=-1):j=!0,Y(k,ie-W))):(z.sortIndex=B,e(c,z),b||x||(b=!0,E||(E=!0,H()))),z},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(z){var G=g;return function(){var ie=g;g=G;try{return z.apply(this,arguments)}finally{g=ie}}}}(Q_)),Q_}var UM;function tW(){return UM||(UM=1,Y_.exports=eW()),Y_.exports}var X_={exports:{}},ci={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VM;function nW(){if(VM)return ci;VM=1;var t=kD();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:d,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,ci.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(c,d,null,f)},ci.flushSync=function(c){var d=o.T,f=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=d,a.p=f,a.d.f()}},ci.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,a.d.C(c,d))},ci.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},ci.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?a.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:x}):f==="script"&&a.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ci.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);a.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&a.d.M(c)},ci.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);a.d.L(c,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ci.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=l(d.as,d.crossOrigin);a.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else a.d.m(c)},ci.requestFormReset=function(c){a.d.r(c)},ci.unstable_batchedUpdates=function(c,d){return c(d)},ci.useFormState=function(c,d,f){return o.H.useFormState(c,d,f)},ci.useFormStatus=function(){return o.H.useHostTransitionStatus()},ci.version="19.1.0",ci}var HM;function XB(){if(HM)return X_.exports;HM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),X_.exports=nW(),X_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM;function rW(){if(GM)return zx;GM=1;var t=tW(),e=kD(),n=XB();function a(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var h=u,m=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(m=h.return),u=h.return;while(u)}return h.tag===3?m:null}function o(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function l(u){if(s(u)!==u)throw Error(a(188))}function c(u){var h=u.alternate;if(!h){if(h=s(u),h===null)throw Error(a(188));return h!==u?null:u}for(var m=u,N=h;;){var A=m.return;if(A===null)break;var R=A.alternate;if(R===null){if(N=A.return,N!==null){m=N;continue}break}if(A.child===R.child){for(R=A.child;R;){if(R===m)return l(A),u;if(R===N)return l(A),h;R=R.sibling}throw Error(a(188))}if(m.return!==N.return)m=A,N=R;else{for(var Z=!1,pe=A.child;pe;){if(pe===m){Z=!0,m=A,N=R;break}if(pe===N){Z=!0,N=A,m=R;break}pe=pe.sibling}if(!Z){for(pe=R.child;pe;){if(pe===m){Z=!0,m=R,N=A;break}if(pe===N){Z=!0,N=R,m=A;break}pe=pe.sibling}if(!Z)throw Error(a(189))}}if(m.alternate!==N)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?u:h}function d(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=d(u),h!==null)return h;u=u.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function H(u){return u===null||typeof u!="object"?null:(u=F&&u[F]||u["@@iterator"],typeof u=="function"?u:null)}var V=Symbol.for("react.client.reference");function X(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===V?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case S:return"Profiler";case j:return"StrictMode";case k:return"Suspense";case E:return"SuspenseList";case $:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case x:return"Portal";case C:return(u.displayName||"Context")+".Provider";case T:return(u._context.displayName||"Context")+".Consumer";case P:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case I:return h=u.displayName||null,h!==null?h:X(u.type)||"Memo";case L:h=u._payload,u=u._init;try{return X(u(h))}catch{}}return null}var Y=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},W=[],B=-1;function ce(u){return{current:u}}function je(u){0>B||(u.current=W[B],W[B]=null,B--)}function K(u,h){B++,W[B]=u.current,u.current=h}var Ie=ce(null),Ue=ce(null),ze=ce(null),Le=ce(null);function be(u,h){switch(K(ze,h),K(Ue,u),K(Ie,null),h.nodeType){case 9:case 11:u=(u=h.documentElement)&&(u=u.namespaceURI)?Dr(u):0;break;default:if(u=h.tagName,h=h.namespaceURI)h=Dr(h),u=Lr(h,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}je(Ie),K(Ie,u)}function Ce(){je(Ie),je(Ue),je(ze)}function Ae(u){u.memoizedState!==null&&K(Le,u);var h=Ie.current,m=Lr(h,u.type);h!==m&&(K(Ue,u),K(Ie,m))}function me(u){Ue.current===u&&(je(Ie),je(Ue)),Le.current===u&&(je(Le),Bu._currentValue=ie)}var ye=Object.prototype.hasOwnProperty,le=t.unstable_scheduleCallback,J=t.unstable_cancelCallback,ae=t.unstable_shouldYield,ue=t.unstable_requestPaint,ee=t.unstable_now,Ne=t.unstable_getCurrentPriorityLevel,Te=t.unstable_ImmediatePriority,Fe=t.unstable_UserBlockingPriority,xe=t.unstable_NormalPriority,ne=t.unstable_LowPriority,oe=t.unstable_IdlePriority,_e=t.log,De=t.unstable_setDisableYieldValue,Q=null,ge=null;function de(u){if(typeof _e=="function"&&De(u),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(Q,u)}catch{}}var fe=Math.clz32?Math.clz32:$e,Ee=Math.log,Ye=Math.LN2;function $e(u){return u>>>=0,u===0?32:31-(Ee(u)/Ye|0)|0}var We=256,it=4194304;function wt(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function we(u,h,m){var N=u.pendingLanes;if(N===0)return 0;var A=0,R=u.suspendedLanes,Z=u.pingedLanes;u=u.warmLanes;var pe=N&134217727;return pe!==0?(N=pe&~R,N!==0?A=wt(N):(Z&=pe,Z!==0?A=wt(Z):m||(m=pe&~u,m!==0&&(A=wt(m))))):(pe=N&~R,pe!==0?A=wt(pe):Z!==0?A=wt(Z):m||(m=N&~u,m!==0&&(A=wt(m)))),A===0?0:h!==0&&h!==A&&(h&R)===0&&(R=A&-A,m=h&-h,R>=m||R===32&&(m&4194048)!==0)?h:A}function Xe(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function Je(u,h){switch(u){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ct(){var u=We;return We<<=1,(We&4194048)===0&&(We=256),u}function Ct(){var u=it;return it<<=1,(it&62914560)===0&&(it=4194304),u}function bt(u){for(var h=[],m=0;31>m;m++)h.push(u);return h}function ke(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ot(u,h,m,N,A,R){var Z=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var pe=u.entanglements,Oe=u.expirationTimes,Ze=u.hiddenUpdates;for(m=Z&~m;0<m;){var ut=31-fe(m),pt=1<<ut;pe[ut]=0,Oe[ut]=-1;var nt=Ze[ut];if(nt!==null)for(Ze[ut]=null,ut=0;ut<nt.length;ut++){var et=nt[ut];et!==null&&(et.lane&=-536870913)}m&=~pt}N!==0&&Tt(u,N,0),R!==0&&A===0&&u.tag!==0&&(u.suspendedLanes|=R&~(Z&~h))}function Tt(u,h,m){u.pendingLanes|=h,u.suspendedLanes&=~h;var N=31-fe(h);u.entangledLanes|=h,u.entanglements[N]=u.entanglements[N]|1073741824|m&4194090}function Ve(u,h){var m=u.entangledLanes|=h;for(u=u.entanglements;m;){var N=31-fe(m),A=1<<N;A&h|u[N]&h&&(u[N]|=h),m&=~A}}function jt(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function kt(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Kn(){var u=G.p;return u!==0?u:(u=window.event,u===void 0?32:aj(u.type))}function vt(u,h){var m=G.p;try{return G.p=u,h()}finally{G.p=m}}var Dt=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Dt,ln="__reactProps$"+Dt,er="__reactContainer$"+Dt,Tn="__reactEvents$"+Dt,va="__reactListeners$"+Dt,Ya="__reactHandles$"+Dt,Br="__reactResources$"+Dt,Aa="__reactMarker$"+Dt;function zi(u){delete u[Vt],delete u[ln],delete u[Tn],delete u[va],delete u[Ya]}function Rn(u){var h=u[Vt];if(h)return h;for(var m=u.parentNode;m;){if(h=m[er]||m[Vt]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(u=G1(u);u!==null;){if(m=u[Vt])return m;u=G1(u)}return h}u=m,m=u.parentNode}return null}function tt(u){if(u=u[Vt]||u[er]){var h=u.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return u}return null}function gt(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u.stateNode;throw Error(a(33))}function St(u){var h=u[Br];return h||(h=u[Br]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Ot(u){u[Aa]=!0}var Nn=new Set,Ln={};function ba(u,h){yi(u,h),yi(u+"Capture",h)}function yi(u,h){for(Ln[u]=h,u=0;u<h.length;u++)Nn.add(h[u])}var uo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Td={},kd={};function BS(u){return ye.call(kd,u)?!0:ye.call(Td,u)?!1:uo.test(u)?kd[u]=!0:(Td[u]=!0,!1)}function $f(u,h,m){if(BS(h))if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(h);return;case"boolean":var N=h.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){u.removeAttribute(h);return}}u.setAttribute(h,""+m)}}function Bf(u,h,m){if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttribute(h,""+m)}}function Ls(u,h,m,N){if(N===null)u.removeAttribute(m);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(h,m,""+N)}}var zf,Yg;function Qc(u){if(zf===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);zf=h&&h[1]||"",Yg=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zf+u+Yg}var Qg=!1;function Xg(u,h){if(!u||Qg)return"";Qg=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(h){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(et){var nt=et}Reflect.construct(u,[],pt)}else{try{pt.call()}catch(et){nt=et}u.call(pt.prototype)}}else{try{throw Error()}catch(et){nt=et}(pt=u())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(et){if(et&&nt&&typeof et.stack=="string")return[et.stack,nt.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=N.DetermineComponentFrameRoot(),Z=R[0],pe=R[1];if(Z&&pe){var Oe=Z.split(`
`),Ze=pe.split(`
`);for(A=N=0;N<Oe.length&&!Oe[N].includes("DetermineComponentFrameRoot");)N++;for(;A<Ze.length&&!Ze[A].includes("DetermineComponentFrameRoot");)A++;if(N===Oe.length||A===Ze.length)for(N=Oe.length-1,A=Ze.length-1;1<=N&&0<=A&&Oe[N]!==Ze[A];)A--;for(;1<=N&&0<=A;N--,A--)if(Oe[N]!==Ze[A]){if(N!==1||A!==1)do if(N--,A--,0>A||Oe[N]!==Ze[A]){var ut=`
`+Oe[N].replace(" at new "," at ");return u.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",u.displayName)),ut}while(1<=N&&0<=A);break}}}finally{Qg=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?Qc(m):""}function zS(u){switch(u.tag){case 26:case 27:case 5:return Qc(u.type);case 16:return Qc("Lazy");case 13:return Qc("Suspense");case 19:return Qc("SuspenseList");case 0:case 15:return Xg(u.type,!1);case 11:return Xg(u.type.render,!1);case 1:return Xg(u.type,!0);case 31:return Qc("Activity");default:return""}}function Jg(u){try{var h="";do h+=zS(u),u=u.return;while(u);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function xi(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Zg(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function ey(u){var h=Zg(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),N=""+u[h];if(!u.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,R=m.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return A.call(this)},set:function(Z){N=""+Z,R.call(this,Z)}}),Object.defineProperty(u,h,{enumerable:m.enumerable}),{getValue:function(){return N},setValue:function(Z){N=""+Z},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function qf(u){u._valueTracker||(u._valueTracker=ey(u))}function ty(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var m=h.getValue(),N="";return u&&(N=Zg(u)?u.checked?"true":"false":u.value),u=N,u!==m?(h.setValue(u),!0):!1}function Ul(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Wb=/[\n"\\]/g;function qi(u){return u.replace(Wb,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Uf(u,h,m,N,A,R,Z,pe){u.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?u.type=Z:u.removeAttribute("type"),h!=null?Z==="number"?(h===0&&u.value===""||u.value!=h)&&(u.value=""+xi(h)):u.value!==""+xi(h)&&(u.value=""+xi(h)):Z!=="submit"&&Z!=="reset"||u.removeAttribute("value"),h!=null?Ad(u,Z,xi(h)):m!=null?Ad(u,Z,xi(m)):N!=null&&u.removeAttribute("value"),A==null&&R!=null&&(u.defaultChecked=!!R),A!=null&&(u.checked=A&&typeof A!="function"&&typeof A!="symbol"),pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?u.name=""+xi(pe):u.removeAttribute("name")}function ny(u,h,m,N,A,R,Z,pe){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(u.type=R),h!=null||m!=null){if(!(R!=="submit"&&R!=="reset"||h!=null))return;m=m!=null?""+xi(m):"",h=h!=null?""+xi(h):m,pe||h===u.value||(u.value=h),u.defaultValue=h}N=N??A,N=typeof N!="function"&&typeof N!="symbol"&&!!N,u.checked=pe?u.checked:!!N,u.defaultChecked=!!N,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(u.name=Z)}function Ad(u,h,m){h==="number"&&Ul(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function Xc(u,h,m,N){if(u=u.options,h){h={};for(var A=0;A<m.length;A++)h["$"+m[A]]=!0;for(m=0;m<u.length;m++)A=h.hasOwnProperty("$"+u[m].value),u[m].selected!==A&&(u[m].selected=A),A&&N&&(u[m].defaultSelected=!0)}else{for(m=""+xi(m),h=null,A=0;A<u.length;A++){if(u[A].value===m){u[A].selected=!0,N&&(u[A].defaultSelected=!0);return}h!==null||u[A].disabled||(h=u[A])}h!==null&&(h.selected=!0)}}function ry(u,h,m){if(h!=null&&(h=""+xi(h),h!==u.value&&(u.value=h),m==null)){u.defaultValue!==h&&(u.defaultValue=h);return}u.defaultValue=m!=null?""+xi(m):""}function Vf(u,h,m,N){if(h==null){if(N!=null){if(m!=null)throw Error(a(92));if(Y(N)){if(1<N.length)throw Error(a(93));N=N[0]}m=N}m==null&&(m=""),h=m}m=xi(h),u.defaultValue=m,N=u.textContent,N===m&&N!==""&&N!==null&&(u.value=N)}function Ko(u,h){if(h){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=h;return}}u.textContent=h}var Jc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ay(u,h,m){var N=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?N?u.setProperty(h,""):h==="float"?u.cssFloat="":u[h]="":N?u.setProperty(h,m):typeof m!="number"||m===0||Jc.has(h)?h==="float"?u.cssFloat=m:u[h]=(""+m).trim():u[h]=m+"px"}function iy(u,h,m){if(h!=null&&typeof h!="object")throw Error(a(62));if(u=u.style,m!=null){for(var N in m)!m.hasOwnProperty(N)||h!=null&&h.hasOwnProperty(N)||(N.indexOf("--")===0?u.setProperty(N,""):N==="float"?u.cssFloat="":u[N]="");for(var A in h)N=h[A],h.hasOwnProperty(A)&&m[A]!==N&&ay(u,A,N)}else for(var R in h)h.hasOwnProperty(R)&&ay(u,R,h[R])}function sy(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ed(u){return Yb.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Hf=null;function oy(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Zc=null,eu=null;function ly(u){var h=tt(u);if(h&&(u=h.stateNode)){var m=u[ln]||null;e:switch(u=h.stateNode,h.type){case"input":if(Uf(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+qi(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var N=m[h];if(N!==u&&N.form===u.form){var A=N[ln]||null;if(!A)throw Error(a(90));Uf(N,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(h=0;h<m.length;h++)N=m[h],N.form===u.form&&ty(N)}break e;case"textarea":ry(u,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Xc(u,!!m.multiple,h,!1)}}}var cy=!1;function Qb(u,h,m){if(cy)return u(h,m);cy=!0;try{var N=u(h);return N}finally{if(cy=!1,(Zc!==null||eu!==null)&&(Hp(),Zc&&(h=Zc,u=eu,eu=Zc=null,ly(h),u)))for(h=0;h<u.length;h++)ly(u[h])}}function Pd(u,h){var m=u.stateNode;if(m===null)return null;var N=m[ln]||null;if(N===null)return null;m=N[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(u=u.type,N=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!N;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(a(231,h,typeof m));return m}var ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dd=!1;if(ho)try{var Od={};Object.defineProperty(Od,"passive",{get:function(){Dd=!0}}),window.addEventListener("test",Od,Od),window.removeEventListener("test",Od,Od)}catch{Dd=!1}var Yo=null,uy=null,Gf=null;function Xb(){if(Gf)return Gf;var u,h=uy,m=h.length,N,A="value"in Yo?Yo.value:Yo.textContent,R=A.length;for(u=0;u<m&&h[u]===A[u];u++);var Z=m-u;for(N=1;N<=Z&&h[m-N]===A[R-N];N++);return Gf=A.slice(u,1<N?1-N:void 0)}function or(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function tr(){return!0}function Jb(){return!1}function Qa(u){function h(m,N,A,R,Z){this._reactName=m,this._targetInst=A,this.type=N,this.nativeEvent=R,this.target=Z,this.currentTarget=null;for(var pe in u)u.hasOwnProperty(pe)&&(m=u[pe],this[pe]=m?m(R):R[pe]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?tr:Jb,this.isPropagationStopped=Jb,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),h}var Vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wf=Qa(Vl),Md=f({},Vl,{view:0,detail:0}),qS=Qa(Md),Kf,dy,Yr,tu=f({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Yr&&(Yr&&u.type==="mousemove"?(Kf=u.screenX-Yr.screenX,dy=u.screenY-Yr.screenY):dy=Kf=0,Yr=u),Kf)},movementY:function(u){return"movementY"in u?u.movementY:dy}}),Qo=Qa(tu),Zb=f({},tu,{dataTransfer:0}),hy=Qa(Zb),Ui=f({},Md,{relatedTarget:0}),Yf=Qa(Ui),e0=f({},Vl,{animationName:0,elapsedTime:0,pseudoElement:0}),t0=Qa(e0),n0=f({},Vl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),r0=Qa(n0),a0=f({},Vl,{data:0}),Xa=Qa(a0),US={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i0(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=VS[u])?!!h[u]:!1}function Fs(){return i0}var Qf=f({},Md,{key:function(u){if(u.key){var h=US[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=or(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Vi[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(u){return u.type==="keypress"?or(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?or(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),fy=Qa(Qf),kr=f({},tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fo=Qa(kr),py=f({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),HS=Qa(py),my=f({},Vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),GS=Qa(my),WS=f({},tu,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),KS=Qa(WS),s0=f({},Vl,{newState:0,oldState:0}),Xf=Qa(s0),nu=[9,13,27,32],gy=ho&&"CompositionEvent"in window,ru=null;ho&&"documentMode"in document&&(ru=document.documentMode);var o0=ho&&"TextEvent"in window&&!ru,Jf=ho&&(!gy||ru&&8<ru&&11>=ru),Zf=" ",yy=!1;function l0(u,h){switch(u){case"keyup":return nu.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ep(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Xo=!1;function YS(u,h){switch(u){case"compositionend":return ep(h);case"keypress":return h.which!==32?null:(yy=!0,Zf);case"textInput":return u=h.data,u===Zf&&yy?null:u;default:return null}}function c0(u,h){if(Xo)return u==="compositionend"||!gy&&l0(u,h)?(u=Xb(),Gf=uy=Yo=null,Xo=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Jf&&h.locale!=="ko"?null:h.data;default:return null}}var vi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tp(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!vi[u.type]:h==="textarea"}function au(u,h,m,N){Zc?eu?eu.push(N):eu=[N]:Zc=N,h=Jp(h,"onChange"),0<h.length&&(m=new Wf("onChange","change",null,m,N),u.push({event:m,listeners:h}))}var iu=null,su=null;function QS(u){F1(u,0)}function np(u){var h=gt(u);if(ty(h))return u}function u0(u,h){if(u==="change")return h}var d0=!1;if(ho){var xy;if(ho){var Jo="oninput"in document;if(!Jo){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),Jo=typeof h0.oninput=="function"}xy=Jo}else xy=!1;d0=xy&&(!document.documentMode||9<document.documentMode)}function f0(){iu&&(iu.detachEvent("onpropertychange",rp),su=iu=null)}function rp(u){if(u.propertyName==="value"&&np(su)){var h=[];au(h,su,u,oy(u)),Qb(QS,h)}}function p0(u,h,m){u==="focusin"?(f0(),iu=h,su=m,iu.attachEvent("onpropertychange",rp)):u==="focusout"&&f0()}function Zo(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return np(su)}function ap(u,h){if(u==="click")return np(h)}function XS(u,h){if(u==="input"||u==="change")return np(h)}function JS(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var bi=typeof Object.is=="function"?Object.is:JS;function $s(u,h){if(bi(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var m=Object.keys(u),N=Object.keys(h);if(m.length!==N.length)return!1;for(N=0;N<m.length;N++){var A=m[N];if(!ye.call(h,A)||!bi(u[A],h[A]))return!1}return!0}function Hi(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function vy(u,h){var m=Hi(u);u=0;for(var N;m;){if(m.nodeType===3){if(N=u+m.textContent.length,u<=h&&N>=h)return{node:m,offset:h-u};u=N}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Hi(m)}}function m0(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?m0(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function g0(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var h=Ul(u.document);h instanceof u.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)u=h.contentWindow;else break;h=Ul(u.document)}return h}function by(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}var ZS=ho&&"documentMode"in document&&11>=document.documentMode,ou=null,el=null,He=null,st=!1;function rt(u,h,m){var N=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;st||ou==null||ou!==Ul(N)||(N=ou,"selectionStart"in N&&by(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),He&&$s(He,N)||(He=N,N=Jp(el,"onSelect"),0<N.length&&(h=new Wf("onSelect","select",null,h,m),u.push({event:h,listeners:N}),h.target=ou)))}function At(u,h){var m={};return m[u.toLowerCase()]=h.toLowerCase(),m["Webkit"+u]="webkit"+h,m["Moz"+u]="moz"+h,m}var Jt={animationend:At("Animation","AnimationEnd"),animationiteration:At("Animation","AnimationIteration"),animationstart:At("Animation","AnimationStart"),transitionrun:At("Transition","TransitionRun"),transitionstart:At("Transition","TransitionStart"),transitioncancel:At("Transition","TransitionCancel"),transitionend:At("Transition","TransitionEnd")},$n={},Qr={};ho&&(Qr=document.createElement("div").style,"AnimationEvent"in window||(delete Jt.animationend.animation,delete Jt.animationiteration.animation,delete Jt.animationstart.animation),"TransitionEvent"in window||delete Jt.transitionend.transition);function Bn(u){if($n[u])return $n[u];if(!Jt[u])return u;var h=Jt[u],m;for(m in h)if(h.hasOwnProperty(m)&&m in Qr)return $n[u]=h[m];return u}var ip=Bn("animationend"),y0=Bn("animationiteration"),ji=Bn("animationstart"),sp=Bn("transitionrun"),e_=Bn("transitionstart"),lu=Bn("transitioncancel"),Id=Bn("transitionend"),Rd=new Map,Yn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yn.push("scrollEnd");function ps(u,h){Rd.set(u,h),ba(h,[u])}var jy=new WeakMap;function Ba(u,h){if(typeof u=="object"&&u!==null){var m=jy.get(u);return m!==void 0?m:(h={value:u,source:h,stack:Jg(h)},jy.set(u,h),h)}return{value:u,source:h,stack:Jg(h)}}var Gi=[],cu=0,wy=0;function Hl(){for(var u=cu,h=wy=cu=0;h<u;){var m=Gi[h];Gi[h++]=null;var N=Gi[h];Gi[h++]=null;var A=Gi[h];Gi[h++]=null;var R=Gi[h];if(Gi[h++]=null,N!==null&&A!==null){var Z=N.pending;Z===null?A.next=A:(A.next=Z.next,Z.next=A),N.pending=A}R!==0&&Ld(m,A,R)}}function ms(u,h,m,N){Gi[cu++]=u,Gi[cu++]=h,Gi[cu++]=m,Gi[cu++]=N,wy|=N,u.lanes|=N,u=u.alternate,u!==null&&(u.lanes|=N)}function uu(u,h,m,N){return ms(u,h,m,N),Fd(u)}function Gl(u,h){return ms(u,null,null,h),Fd(u)}function Ld(u,h,m){u.lanes|=m;var N=u.alternate;N!==null&&(N.lanes|=m);for(var A=!1,R=u.return;R!==null;)R.childLanes|=m,N=R.alternate,N!==null&&(N.childLanes|=m),R.tag===22&&(u=R.stateNode,u===null||u._visibility&1||(A=!0)),u=R,R=R.return;return u.tag===3?(R=u.stateNode,A&&h!==null&&(A=31-fe(m),u=R.hiddenUpdates,N=u[A],N===null?u[A]=[h]:N.push(h),h.lane=m|536870912),R):null}function Fd(u){if(50<Du)throw Du=0,gx=null,Error(a(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}var Wl={};function op(u,h,m,N){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(u,h,m,N){return new op(u,h,m,N)}function Kl(u){return u=u.prototype,!(!u||!u.isReactComponent)}function za(u,h){var m=u.alternate;return m===null?(m=Ja(u.tag,h,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=h,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,h=u.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function $d(u,h){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,h=m.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function lp(u,h,m,N,A,R){var Z=0;if(N=u,typeof u=="function")Kl(u)&&(Z=1);else if(typeof u=="string")Z=P_(u,m,Ie.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case $:return u=Ja(31,m,h,A),u.elementType=$,u.lanes=R,u;case b:return Yl(m.children,A,R,h);case j:Z=8,A|=24;break;case S:return u=Ja(12,m,h,A|2),u.elementType=S,u.lanes=R,u;case k:return u=Ja(13,m,h,A),u.elementType=k,u.lanes=R,u;case E:return u=Ja(19,m,h,A),u.elementType=E,u.lanes=R,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case _:case C:Z=10;break e;case T:Z=9;break e;case P:Z=11;break e;case I:Z=14;break e;case L:Z=16,N=null;break e}Z=29,m=Error(a(130,u===null?"null":typeof u,"")),N=null}return h=Ja(Z,m,h,A),h.elementType=u,h.type=N,h.lanes=R,h}function Yl(u,h,m,N){return u=Ja(7,u,N,h),u.lanes=m,u}function Ny(u,h,m){return u=Ja(6,u,null,h),u.lanes=m,u}function du(u,h,m){return h=Ja(4,u.children!==null?u.children:[],u.key,h),h.lanes=m,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}var po=[],tl=0,cp=null,Bd=0,Wi=[],Ki=0,Nr=null,Ar=1,mo="";function Ql(u,h){po[tl++]=Bd,po[tl++]=cp,cp=u,Bd=h}function Sy(u,h,m){Wi[Ki++]=Ar,Wi[Ki++]=mo,Wi[Ki++]=Nr,Nr=u;var N=Ar;u=mo;var A=32-fe(N)-1;N&=~(1<<A),m+=1;var R=32-fe(h)+A;if(30<R){var Z=A-A%5;R=(N&(1<<Z)-1).toString(32),N>>=Z,A-=Z,Ar=1<<32-fe(h)+A|m<<A|N,mo=R+u}else Ar=1<<R|m<<A|N,mo=u}function _y(u){u.return!==null&&(Ql(u,1),Sy(u,1,0))}function zd(u){for(;u===cp;)cp=po[--tl],po[tl]=null,Bd=po[--tl],po[tl]=null;for(;u===Nr;)Nr=Wi[--Ki],Wi[Ki]=null,mo=Wi[--Ki],Wi[Ki]=null,Ar=Wi[--Ki],Wi[Ki]=null}var na=null,Er=null,kn=!1,gs=null,Za=!1,hu=Error(a(519));function Yi(u){var h=Error(a(418,""));throw nl(Ba(h,u)),hu}function x0(u){var h=u.stateNode,m=u.type,N=u.memoizedProps;switch(h[Vt]=u,h[ln]=N,m){case"dialog":_n("cancel",h),_n("close",h);break;case"iframe":case"object":case"embed":_n("load",h);break;case"video":case"audio":for(m=0;m<Ah.length;m++)_n(Ah[m],h);break;case"source":_n("error",h);break;case"img":case"image":case"link":_n("error",h),_n("load",h);break;case"details":_n("toggle",h);break;case"input":_n("invalid",h),ny(h,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0),qf(h);break;case"select":_n("invalid",h);break;case"textarea":_n("invalid",h),Vf(h,N.value,N.defaultValue,N.children),qf(h)}m=N.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||N.suppressHydrationWarning===!0||z1(h.textContent,m)?(N.popover!=null&&(_n("beforetoggle",h),_n("toggle",h)),N.onScroll!=null&&_n("scroll",h),N.onScrollEnd!=null&&_n("scrollend",h),N.onClick!=null&&(h.onclick=Zp),h=!0):h=!1,h||Yi(u)}function v0(u){for(na=u.return;na;)switch(na.tag){case 5:case 13:Za=!1;return;case 27:case 3:Za=!0;return;default:na=na.return}}function qd(u){if(u!==na)return!1;if(!kn)return v0(u),kn=!0,!1;var h=u.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||tm(u.type,u.memoizedProps)),m=!m),m&&Er&&Yi(u),v0(u),h===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(h===0){Er=ws(u.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;u=u.nextSibling}Er=null}}else h===27?(h=Er,ts(u.type)?(u=Ex,Ex=null,Er=u):Er=h):Er=na?ws(u.stateNode.nextSibling):null;return!0}function Ud(){Er=na=null,kn=!1}function b0(){var u=gs;return u!==null&&(oi===null?oi=u:oi.push.apply(oi,u),gs=null),u}function nl(u){gs===null?gs=[u]:gs.push(u)}var Xl=ce(null),rl=null,he=null;function wi(u,h,m){K(Xl,h._currentValue),h._currentValue=m}function Qi(u){u._currentValue=Xl.current,je(Xl)}function ei(u,h,m){for(;u!==null;){var N=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,N!==null&&(N.childLanes|=h)):N!==null&&(N.childLanes&h)!==h&&(N.childLanes|=h),u===m)break;u=u.return}}function vn(u,h,m,N){var A=u.child;for(A!==null&&(A.return=u);A!==null;){var R=A.dependencies;if(R!==null){var Z=A.child;R=R.firstContext;e:for(;R!==null;){var pe=R;R=A;for(var Oe=0;Oe<h.length;Oe++)if(pe.context===h[Oe]){R.lanes|=m,pe=R.alternate,pe!==null&&(pe.lanes|=m),ei(R.return,m,u),N||(Z=null);break e}R=pe.next}}else if(A.tag===18){if(Z=A.return,Z===null)throw Error(a(341));Z.lanes|=m,R=Z.alternate,R!==null&&(R.lanes|=m),ei(Z,m,u),Z=null}else Z=A.child;if(Z!==null)Z.return=A;else for(Z=A;Z!==null;){if(Z===u){Z=null;break}if(A=Z.sibling,A!==null){A.return=Z.return,Z=A;break}Z=Z.return}A=Z}}function Vd(u,h,m,N){u=null;for(var A=h,R=!1;A!==null;){if(!R){if((A.flags&524288)!==0)R=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var Z=A.alternate;if(Z===null)throw Error(a(387));if(Z=Z.memoizedProps,Z!==null){var pe=A.type;bi(A.pendingProps.value,Z.value)||(u!==null?u.push(pe):u=[pe])}}else if(A===Le.current){if(Z=A.alternate,Z===null)throw Error(a(387));Z.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(u!==null?u.push(Bu):u=[Bu])}A=A.return}u!==null&&vn(h,u,m,N),h.flags|=262144}function up(u){for(u=u.firstContext;u!==null;){if(!bi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Jl(u){rl=u,he=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function zr(u){return j0(rl,u)}function dp(u,h){return rl===null&&Jl(u),j0(u,h)}function j0(u,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},he===null){if(u===null)throw Error(a(308));he=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else he=he.next=h;return m}var t_=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(m,N){u.push(N)}};this.abort=function(){h.aborted=!0,u.forEach(function(m){return m()})}},n_=t.unstable_scheduleCallback,r_=t.unstable_NormalPriority,mr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cy(){return{controller:new t_,data:new Map,refCount:0}}function Hd(u){u.refCount--,u.refCount===0&&n_(r_,function(){u.controller.abort()})}var Gd=null,Ty=0,fu=0,ti=null;function a_(u,h){if(Gd===null){var m=Gd=[];Ty=0,fu=Xp(),ti={status:"pending",value:void 0,then:function(N){m.push(N)}}}return Ty++,h.then(w0,w0),h}function w0(){if(--Ty===0&&Gd!==null){ti!==null&&(ti.status="fulfilled");var u=Gd;Gd=null,fu=0,ti=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function i_(u,h){var m=[],N={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return u.then(function(){N.status="fulfilled",N.value=h;for(var A=0;A<m.length;A++)(0,m[A])(h)},function(A){for(N.status="rejected",N.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),N}var N0=z.S;z.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&a_(u,h),N0!==null&&N0(u,h)};var Zl=ce(null);function go(){var u=Zl.current;return u!==null?u:vr.pooledCache}function hp(u,h){h===null?K(Zl,Zl.current):K(Zl,h.pool)}function S0(){var u=go();return u===null?null:{parent:mr._currentValue,pool:u}}var qa=Error(a(460)),_0=Error(a(474)),fp=Error(a(542)),ky={then:function(){}};function C0(u){return u=u.status,u==="fulfilled"||u==="rejected"}function pp(){}function Ay(u,h,m){switch(m=u[m],m===void 0?u.push(h):m!==h&&(h.then(pp,pp),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,k0(u),u;default:if(typeof h.status=="string")h.then(pp,pp);else{if(u=vr,u!==null&&100<u.shellSuspendCounter)throw Error(a(482));u=h,u.status="pending",u.then(function(N){if(h.status==="pending"){var A=h;A.status="fulfilled",A.value=N}},function(N){if(h.status==="pending"){var A=h;A.status="rejected",A.reason=N}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,k0(u),u}throw pu=h,qa}}var pu=null;function T0(){if(pu===null)throw Error(a(459));var u=pu;return pu=null,u}function k0(u){if(u===qa||u===fp)throw Error(a(483))}var Bs=!1;function ec(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mu(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function al(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function yo(u,h,m){var N=u.updateQueue;if(N===null)return null;if(N=N.shared,(rr&2)!==0){var A=N.pending;return A===null?h.next=h:(h.next=A.next,A.next=h),N.pending=h,h=Fd(u),Ld(u,null,m),h}return ms(u,N,h,m),Fd(u)}function Wd(u,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var N=h.lanes;N&=u.pendingLanes,m|=N,h.lanes=m,Ve(u,m)}}function ys(u,h){var m=u.updateQueue,N=u.alternate;if(N!==null&&(N=N.updateQueue,m===N)){var A=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var Z={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};R===null?A=R=Z:R=R.next=Z,m=m.next}while(m!==null);R===null?A=R=h:R=R.next=h}else A=R=h;m={baseState:N.baseState,firstBaseUpdate:A,lastBaseUpdate:R,shared:N.shared,callbacks:N.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=h}var Kd=!1;function xs(){if(Kd){var u=ti;if(u!==null)throw u}}function Ea(u,h,m,N){Kd=!1;var A=u.updateQueue;Bs=!1;var R=A.firstBaseUpdate,Z=A.lastBaseUpdate,pe=A.shared.pending;if(pe!==null){A.shared.pending=null;var Oe=pe,Ze=Oe.next;Oe.next=null,Z===null?R=Ze:Z.next=Ze,Z=Oe;var ut=u.alternate;ut!==null&&(ut=ut.updateQueue,pe=ut.lastBaseUpdate,pe!==Z&&(pe===null?ut.firstBaseUpdate=Ze:pe.next=Ze,ut.lastBaseUpdate=Oe))}if(R!==null){var pt=A.baseState;Z=0,ut=Ze=Oe=null,pe=R;do{var nt=pe.lane&-536870913,et=nt!==pe.lane;if(et?(Fn&nt)===nt:(N&nt)===nt){nt!==0&&nt===fu&&(Kd=!0),ut!==null&&(ut=ut.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Kt=u,Wt=pe;nt=h;var cr=m;switch(Wt.tag){case 1:if(Kt=Wt.payload,typeof Kt=="function"){pt=Kt.call(cr,pt,nt);break e}pt=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=Wt.payload,nt=typeof Kt=="function"?Kt.call(cr,pt,nt):Kt,nt==null)break e;pt=f({},pt,nt);break e;case 2:Bs=!0}}nt=pe.callback,nt!==null&&(u.flags|=64,et&&(u.flags|=8192),et=A.callbacks,et===null?A.callbacks=[nt]:et.push(nt))}else et={lane:nt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},ut===null?(Ze=ut=et,Oe=pt):ut=ut.next=et,Z|=nt;if(pe=pe.next,pe===null){if(pe=A.shared.pending,pe===null)break;et=pe,pe=et.next,et.next=null,A.lastBaseUpdate=et,A.shared.pending=null}}while(!0);ut===null&&(Oe=pt),A.baseState=Oe,A.firstBaseUpdate=Ze,A.lastBaseUpdate=ut,R===null&&(A.shared.lanes=0),fl|=Z,u.lanes=Z,u.memoizedState=pt}}function A0(u,h){if(typeof u!="function")throw Error(a(191,u));u.call(h)}function Ey(u,h){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)A0(m[u],h)}var tc=ce(null),il=ce(0);function xo(u,h){u=To,K(il,u),K(tc,h),To=u|h.baseLanes}function mp(){K(il,To),K(tc,tc.current)}function Py(){To=il.current,je(tc),je(il)}var vs=0,yn=null,nr=null,An=null,gu=!1,nc=!1,Pa=!1,yu=0,sl=0,Xi=null,E0=0;function En(){throw Error(a(321))}function Yd(u,h){if(h===null)return!1;for(var m=0;m<h.length&&m<u.length;m++)if(!bi(u[m],h[m]))return!1;return!0}function Dy(u,h,m,N,A,R){return vs=R,yn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,z.H=u===null||u.memoizedState===null?U0:Qy,Pa=!1,R=m(N,A),Pa=!1,nc&&(R=D0(h,m,N,A)),P0(u),R}function P0(u){z.H=sh;var h=nr!==null&&nr.next!==null;if(vs=0,An=nr=yn=null,gu=!1,sl=0,Xi=null,h)throw Error(a(300));u===null||da||(u=u.dependencies,u!==null&&up(u)&&(da=!0))}function D0(u,h,m,N){yn=u;var A=0;do{if(nc&&(Xi=null),sl=0,nc=!1,25<=A)throw Error(a(301));if(A+=1,An=nr=null,u.updateQueue!=null){var R=u.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}z.H=V0,R=h(m,N)}while(nc);return R}function Oy(){var u=z.H,h=u.useState()[0];return h=typeof h.then=="function"?Qd(h):h,u=u.useState()[0],(nr!==null?nr.memoizedState:null)!==u&&(yn.flags|=1024),h}function My(){var u=yu!==0;return yu=0,u}function rc(u,h,m){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~m}function gp(u){if(gu){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}gu=!1}vs=0,An=nr=yn=null,nc=!1,sl=yu=0,Xi=null}function ni(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?yn.memoizedState=An=u:An=An.next=u,An}function Xr(){if(nr===null){var u=yn.alternate;u=u!==null?u.memoizedState:null}else u=nr.next;var h=An===null?yn.memoizedState:An.next;if(h!==null)An=h,nr=u;else{if(u===null)throw yn.alternate===null?Error(a(467)):Error(a(310));nr=u,u={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},An===null?yn.memoizedState=An=u:An=An.next=u}return An}function ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qd(u){var h=sl;return sl+=1,Xi===null&&(Xi=[]),u=Ay(Xi,u,h),h=yn,(An===null?h.memoizedState:An.next)===null&&(h=h.alternate,z.H=h===null||h.memoizedState===null?U0:Qy),u}function yp(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Qd(u);if(u.$$typeof===C)return zr(u)}throw Error(a(438,String(u)))}function Xd(u){var h=null,m=yn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var N=yn.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(h={data:N.data.map(function(A){return A.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=ac(),yn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(u),N=0;N<u;N++)m[N]=q;return h.index++,m}function zs(u,h){return typeof h=="function"?h(u):h}function xp(u){var h=Xr();return Iy(h,nr,u)}function Iy(u,h,m){var N=u.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=m;var A=u.baseQueue,R=N.pending;if(R!==null){if(A!==null){var Z=A.next;A.next=R.next,R.next=Z}h.baseQueue=A=R,N.pending=null}if(R=u.baseState,A===null)u.memoizedState=R;else{h=A.next;var pe=Z=null,Oe=null,Ze=h,ut=!1;do{var pt=Ze.lane&-536870913;if(pt!==Ze.lane?(Fn&pt)===pt:(vs&pt)===pt){var nt=Ze.revertLane;if(nt===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),pt===fu&&(ut=!0);else if((vs&nt)===nt){Ze=Ze.next,nt===fu&&(ut=!0);continue}else pt={lane:0,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Oe===null?(pe=Oe=pt,Z=R):Oe=Oe.next=pt,yn.lanes|=nt,fl|=nt;pt=Ze.action,Pa&&m(R,pt),R=Ze.hasEagerState?Ze.eagerState:m(R,pt)}else nt={lane:pt,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Oe===null?(pe=Oe=nt,Z=R):Oe=Oe.next=nt,yn.lanes|=pt,fl|=pt;Ze=Ze.next}while(Ze!==null&&Ze!==h);if(Oe===null?Z=R:Oe.next=pe,!bi(R,u.memoizedState)&&(da=!0,ut&&(m=ti,m!==null)))throw m;u.memoizedState=R,u.baseState=Z,u.baseQueue=Oe,N.lastRenderedState=R}return A===null&&(N.lanes=0),[u.memoizedState,N.dispatch]}function Ry(u){var h=Xr(),m=h.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=u;var N=m.dispatch,A=m.pending,R=h.memoizedState;if(A!==null){m.pending=null;var Z=A=A.next;do R=u(R,Z.action),Z=Z.next;while(Z!==A);bi(R,h.memoizedState)||(da=!0),h.memoizedState=R,h.baseQueue===null&&(h.baseState=R),m.lastRenderedState=R}return[R,N]}function Ly(u,h,m){var N=yn,A=Xr(),R=kn;if(R){if(m===void 0)throw Error(a(407));m=m()}else m=h();var Z=!bi((nr||A).memoizedState,m);Z&&(A.memoizedState=m,da=!0),A=A.queue;var pe=bp.bind(null,N,A,u);if(eh(2048,8,pe,[u]),A.getSnapshot!==h||Z||An!==null&&An.memoizedState.tag&1){if(N.flags|=2048,xu(9,_p(),O0.bind(null,N,A,m,h),null),vr===null)throw Error(a(349));R||(vs&124)!==0||vp(N,h,m)}return m}function vp(u,h,m){u.flags|=16384,u={getSnapshot:h,value:m},h=yn.updateQueue,h===null?(h=ac(),yn.updateQueue=h,h.stores=[u]):(m=h.stores,m===null?h.stores=[u]:m.push(u))}function O0(u,h,m,N){h.value=m,h.getSnapshot=N,Fy(h)&&$y(u)}function bp(u,h,m){return m(function(){Fy(h)&&$y(u)})}function Fy(u){var h=u.getSnapshot;u=u.value;try{var m=h();return!bi(u,m)}catch{return!0}}function $y(u){var h=Gl(u,2);h!==null&&Ti(h,u,2)}function jp(u){var h=ni();if(typeof u=="function"){var m=u;if(u=m(),Pa){de(!0);try{m()}finally{de(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:u},h}function Jd(u,h,m,N){return u.baseState=m,Iy(u,nr,typeof N=="function"?N:zs)}function s_(u,h,m,N,A){if(Ap(u))throw Error(a(485));if(u=h.action,u!==null){var R={payload:A,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){R.listeners.push(Z)}};z.T!==null?m(!0):R.isTransition=!1,N(R),m=h.pending,m===null?(R.next=h.pending=R,By(h,R)):(R.next=m.next,h.pending=m.next=R)}}function By(u,h){var m=h.action,N=h.payload,A=u.state;if(h.isTransition){var R=z.T,Z={};z.T=Z;try{var pe=m(A,N),Oe=z.S;Oe!==null&&Oe(Z,pe),zy(u,h,pe)}catch(Ze){wp(u,h,Ze)}finally{z.T=R}}else try{R=m(A,N),zy(u,h,R)}catch(Ze){wp(u,h,Ze)}}function zy(u,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(N){M0(u,h,N)},function(N){return wp(u,h,N)}):M0(u,h,m)}function M0(u,h,m){h.status="fulfilled",h.value=m,I0(h),u.state=m,h=u.pending,h!==null&&(m=h.next,m===h?u.pending=null:(m=m.next,h.next=m,By(u,m)))}function wp(u,h,m){var N=u.pending;if(u.pending=null,N!==null){N=N.next;do h.status="rejected",h.reason=m,I0(h),h=h.next;while(h!==N)}u.action=null}function I0(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function Np(u,h){return h}function qy(u,h){if(kn){var m=vr.formState;if(m!==null){e:{var N=yn;if(kn){if(Er){t:{for(var A=Er,R=Za;A.nodeType!==8;){if(!R){A=null;break t}if(A=ws(A.nextSibling),A===null){A=null;break t}}R=A.data,A=R==="F!"||R==="F"?A:null}if(A){Er=ws(A.nextSibling),N=A.data==="F!";break e}}Yi(N)}N=!1}N&&(h=m[0])}}return m=ni(),m.memoizedState=m.baseState=h,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Np,lastRenderedState:h},m.queue=N,m=Wy.bind(null,yn,N),N.dispatch=m,N=jp(!1),R=Ky.bind(null,yn,!1,N.queue),N=ni(),A={state:h,dispatch:null,action:u,pending:null},N.queue=A,m=s_.bind(null,yn,A,R,m),A.dispatch=m,N.memoizedState=u,[h,m,!1]}function Sp(u){var h=Xr();return R0(h,nr,u)}function R0(u,h,m){if(h=Iy(u,h,Np)[0],u=xp(zs)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var N=Qd(h)}catch(Z){throw Z===qa?fp:Z}else N=h;h=Xr();var A=h.queue,R=A.dispatch;return m!==h.memoizedState&&(yn.flags|=2048,xu(9,_p(),Uy.bind(null,A,m),null)),[N,R,u]}function Uy(u,h){u.action=h}function mn(u){var h=Xr(),m=nr;if(m!==null)return R0(h,m,u);Xr(),h=h.memoizedState,m=Xr();var N=m.queue.dispatch;return m.memoizedState=u,[h,N,!1]}function xu(u,h,m,N){return u={tag:u,create:m,deps:N,inst:h,next:null},h=yn.updateQueue,h===null&&(h=ac(),yn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=u.next=u:(N=m.next,m.next=u,u.next=N,h.lastEffect=u),u}function _p(){return{destroy:void 0,resource:void 0}}function vu(){return Xr().memoizedState}function Zd(u,h,m,N){var A=ni();N=N===void 0?null:N,yn.flags|=u,A.memoizedState=xu(1|h,_p(),m,N)}function eh(u,h,m,N){var A=Xr();N=N===void 0?null:N;var R=A.memoizedState.inst;nr!==null&&N!==null&&Yd(N,nr.memoizedState.deps)?A.memoizedState=xu(h,R,m,N):(yn.flags|=u,A.memoizedState=xu(1|h,R,m,N))}function L0(u,h){Zd(8390656,8,u,h)}function Ni(u,h){eh(2048,8,u,h)}function F0(u,h){return eh(4,2,u,h)}function th(u,h){return eh(4,4,u,h)}function Cp(u,h){if(typeof h=="function"){u=u();var m=h(u);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function Vy(u,h,m){m=m!=null?m.concat([u]):null,eh(4,4,Cp.bind(null,h,u),m)}function Tp(){}function ri(u,h){var m=Xr();h=h===void 0?null:h;var N=m.memoizedState;return h!==null&&Yd(h,N[1])?N[0]:(m.memoizedState=[u,h],u)}function vo(u,h){var m=Xr();h=h===void 0?null:h;var N=m.memoizedState;if(h!==null&&Yd(h,N[1]))return N[0];if(N=u(),Pa){de(!0);try{u()}finally{de(!1)}}return m.memoizedState=[N,h],N}function nh(u,h,m){return m===void 0||(vs&1073741824)!==0?u.memoizedState=h:(u.memoizedState=m,u=y1(),yn.lanes|=u,fl|=u,m)}function Hy(u,h,m,N){return bi(m,h)?m:tc.current!==null?(u=nh(u,m,N),bi(u,h)||(da=!0),u):(vs&42)===0?(da=!0,u.memoizedState=m):(u=y1(),yn.lanes|=u,fl|=u,h)}function rh(u,h,m,N,A){var R=G.p;G.p=R!==0&&8>R?R:8;var Z=z.T,pe={};z.T=pe,Ky(u,!1,h,m);try{var Oe=A(),Ze=z.S;if(Ze!==null&&Ze(pe,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var ut=i_(Oe,N);ic(u,h,ut,Oa(u))}else ic(u,h,N,Oa(u))}catch(pt){ic(u,h,{then:function(){},status:"rejected",reason:pt},Oa())}finally{G.p=R,z.T=Z}}function $0(){}function ah(u,h,m,N){if(u.tag!==5)throw Error(a(476));var A=Gy(u).queue;rh(u,A,h,ie,m===null?$0:function(){return kp(u),m(N)})}function Gy(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:ie},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:m},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function kp(u){var h=Gy(u).next.queue;ic(u,h,{},Oa())}function ih(){return zr(Bu)}function bo(){return Xr().memoizedState}function B0(){return Xr().memoizedState}function ol(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var m=Oa();u=al(m);var N=yo(h,u,m);N!==null&&(Ti(N,h,m),Wd(N,h,m)),h={cache:Cy()},u.payload=h;return}h=h.return}}function z0(u,h,m){var N=Oa();m={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Ap(u)?q0(h,m):(m=uu(u,h,m,N),m!==null&&(Ti(m,u,N),Yy(m,h,N)))}function Wy(u,h,m){var N=Oa();ic(u,h,m,N)}function ic(u,h,m,N){var A={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Ap(u))q0(h,A);else{var R=u.alternate;if(u.lanes===0&&(R===null||R.lanes===0)&&(R=h.lastRenderedReducer,R!==null))try{var Z=h.lastRenderedState,pe=R(Z,m);if(A.hasEagerState=!0,A.eagerState=pe,bi(pe,Z))return ms(u,h,A,0),vr===null&&Hl(),!1}catch{}finally{}if(m=uu(u,h,A,N),m!==null)return Ti(m,u,N),Yy(m,h,N),!0}return!1}function Ky(u,h,m,N){if(N={lane:2,revertLane:Xp(),action:N,hasEagerState:!1,eagerState:null,next:null},Ap(u)){if(h)throw Error(a(479))}else h=uu(u,m,N,2),h!==null&&Ti(h,u,2)}function Ap(u){var h=u.alternate;return u===yn||h!==null&&h===yn}function q0(u,h){nc=gu=!0;var m=u.pending;m===null?h.next=h:(h.next=m.next,m.next=h),u.pending=h}function Yy(u,h,m){if((m&4194048)!==0){var N=h.lanes;N&=u.pendingLanes,m|=N,h.lanes=m,Ve(u,m)}}var sh={readContext:zr,use:yp,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En},U0={readContext:zr,use:yp,useCallback:function(u,h){return ni().memoizedState=[u,h===void 0?null:h],u},useContext:zr,useEffect:L0,useImperativeHandle:function(u,h,m){m=m!=null?m.concat([u]):null,Zd(4194308,4,Cp.bind(null,h,u),m)},useLayoutEffect:function(u,h){return Zd(4194308,4,u,h)},useInsertionEffect:function(u,h){Zd(4,2,u,h)},useMemo:function(u,h){var m=ni();h=h===void 0?null:h;var N=u();if(Pa){de(!0);try{u()}finally{de(!1)}}return m.memoizedState=[N,h],N},useReducer:function(u,h,m){var N=ni();if(m!==void 0){var A=m(h);if(Pa){de(!0);try{m(h)}finally{de(!1)}}}else A=h;return N.memoizedState=N.baseState=A,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:A},N.queue=u,u=u.dispatch=z0.bind(null,yn,u),[N.memoizedState,u]},useRef:function(u){var h=ni();return u={current:u},h.memoizedState=u},useState:function(u){u=jp(u);var h=u.queue,m=Wy.bind(null,yn,h);return h.dispatch=m,[u.memoizedState,m]},useDebugValue:Tp,useDeferredValue:function(u,h){var m=ni();return nh(m,u,h)},useTransition:function(){var u=jp(!1);return u=rh.bind(null,yn,u.queue,!0,!1),ni().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,m){var N=yn,A=ni();if(kn){if(m===void 0)throw Error(a(407));m=m()}else{if(m=h(),vr===null)throw Error(a(349));(Fn&124)!==0||vp(N,h,m)}A.memoizedState=m;var R={value:m,getSnapshot:h};return A.queue=R,L0(bp.bind(null,N,R,u),[u]),N.flags|=2048,xu(9,_p(),O0.bind(null,N,R,m,h),null),m},useId:function(){var u=ni(),h=vr.identifierPrefix;if(kn){var m=mo,N=Ar;m=(N&~(1<<32-fe(N)-1)).toString(32)+m,h=""+h+"R"+m,m=yu++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=E0++,h=""+h+"r"+m.toString(32)+"";return u.memoizedState=h},useHostTransitionStatus:ih,useFormState:qy,useActionState:qy,useOptimistic:function(u){var h=ni();h.memoizedState=h.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=Ky.bind(null,yn,!0,m),m.dispatch=h,[u,h]},useMemoCache:Xd,useCacheRefresh:function(){return ni().memoizedState=ol.bind(null,yn)}},Qy={readContext:zr,use:yp,useCallback:ri,useContext:zr,useEffect:Ni,useImperativeHandle:Vy,useInsertionEffect:F0,useLayoutEffect:th,useMemo:vo,useReducer:xp,useRef:vu,useState:function(){return xp(zs)},useDebugValue:Tp,useDeferredValue:function(u,h){var m=Xr();return Hy(m,nr.memoizedState,u,h)},useTransition:function(){var u=xp(zs)[0],h=Xr().memoizedState;return[typeof u=="boolean"?u:Qd(u),h]},useSyncExternalStore:Ly,useId:bo,useHostTransitionStatus:ih,useFormState:Sp,useActionState:Sp,useOptimistic:function(u,h){var m=Xr();return Jd(m,nr,u,h)},useMemoCache:Xd,useCacheRefresh:B0},V0={readContext:zr,use:yp,useCallback:ri,useContext:zr,useEffect:Ni,useImperativeHandle:Vy,useInsertionEffect:F0,useLayoutEffect:th,useMemo:vo,useReducer:Ry,useRef:vu,useState:function(){return Ry(zs)},useDebugValue:Tp,useDeferredValue:function(u,h){var m=Xr();return nr===null?nh(m,u,h):Hy(m,nr.memoizedState,u,h)},useTransition:function(){var u=Ry(zs)[0],h=Xr().memoizedState;return[typeof u=="boolean"?u:Qd(u),h]},useSyncExternalStore:Ly,useId:bo,useHostTransitionStatus:ih,useFormState:mn,useActionState:mn,useOptimistic:function(u,h){var m=Xr();return nr!==null?Jd(m,nr,u,h):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:B0},ra=null,ai=0;function Ep(u){var h=ai;return ai+=1,ra===null&&(ra=[]),Ay(ra,u,h)}function oh(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function sc(u,h){throw h.$$typeof===p?Error(a(525)):(u=Object.prototype.toString.call(h),Error(a(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function oc(u){var h=u._init;return h(u._payload)}function Xy(u){function h(Ge,qe){if(u){var Qe=Ge.deletions;Qe===null?(Ge.deletions=[qe],Ge.flags|=16):Qe.push(qe)}}function m(Ge,qe){if(!u)return null;for(;qe!==null;)h(Ge,qe),qe=qe.sibling;return null}function N(Ge){for(var qe=new Map;Ge!==null;)Ge.key!==null?qe.set(Ge.key,Ge):qe.set(Ge.index,Ge),Ge=Ge.sibling;return qe}function A(Ge,qe){return Ge=za(Ge,qe),Ge.index=0,Ge.sibling=null,Ge}function R(Ge,qe,Qe){return Ge.index=Qe,u?(Qe=Ge.alternate,Qe!==null?(Qe=Qe.index,Qe<qe?(Ge.flags|=67108866,qe):Qe):(Ge.flags|=67108866,qe)):(Ge.flags|=1048576,qe)}function Z(Ge){return u&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function pe(Ge,qe,Qe,ht){return qe===null||qe.tag!==6?(qe=Ny(Qe,Ge.mode,ht),qe.return=Ge,qe):(qe=A(qe,Qe),qe.return=Ge,qe)}function Oe(Ge,qe,Qe,ht){var Mt=Qe.type;return Mt===b?ut(Ge,qe,Qe.props.children,ht,Qe.key):qe!==null&&(qe.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===L&&oc(Mt)===qe.type)?(qe=A(qe,Qe.props),oh(qe,Qe),qe.return=Ge,qe):(qe=lp(Qe.type,Qe.key,Qe.props,null,Ge.mode,ht),oh(qe,Qe),qe.return=Ge,qe)}function Ze(Ge,qe,Qe,ht){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==Qe.containerInfo||qe.stateNode.implementation!==Qe.implementation?(qe=du(Qe,Ge.mode,ht),qe.return=Ge,qe):(qe=A(qe,Qe.children||[]),qe.return=Ge,qe)}function ut(Ge,qe,Qe,ht,Mt){return qe===null||qe.tag!==7?(qe=Yl(Qe,Ge.mode,ht,Mt),qe.return=Ge,qe):(qe=A(qe,Qe),qe.return=Ge,qe)}function pt(Ge,qe,Qe){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return qe=Ny(""+qe,Ge.mode,Qe),qe.return=Ge,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case g:return Qe=lp(qe.type,qe.key,qe.props,null,Ge.mode,Qe),oh(Qe,qe),Qe.return=Ge,Qe;case x:return qe=du(qe,Ge.mode,Qe),qe.return=Ge,qe;case L:var ht=qe._init;return qe=ht(qe._payload),pt(Ge,qe,Qe)}if(Y(qe)||H(qe))return qe=Yl(qe,Ge.mode,Qe,null),qe.return=Ge,qe;if(typeof qe.then=="function")return pt(Ge,Ep(qe),Qe);if(qe.$$typeof===C)return pt(Ge,dp(Ge,qe),Qe);sc(Ge,qe)}return null}function nt(Ge,qe,Qe,ht){var Mt=qe!==null?qe.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Mt!==null?null:pe(Ge,qe,""+Qe,ht);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:return Qe.key===Mt?Oe(Ge,qe,Qe,ht):null;case x:return Qe.key===Mt?Ze(Ge,qe,Qe,ht):null;case L:return Mt=Qe._init,Qe=Mt(Qe._payload),nt(Ge,qe,Qe,ht)}if(Y(Qe)||H(Qe))return Mt!==null?null:ut(Ge,qe,Qe,ht,null);if(typeof Qe.then=="function")return nt(Ge,qe,Ep(Qe),ht);if(Qe.$$typeof===C)return nt(Ge,qe,dp(Ge,Qe),ht);sc(Ge,Qe)}return null}function et(Ge,qe,Qe,ht,Mt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Ge=Ge.get(Qe)||null,pe(qe,Ge,""+ht,Mt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case g:return Ge=Ge.get(ht.key===null?Qe:ht.key)||null,Oe(qe,Ge,ht,Mt);case x:return Ge=Ge.get(ht.key===null?Qe:ht.key)||null,Ze(qe,Ge,ht,Mt);case L:var bn=ht._init;return ht=bn(ht._payload),et(Ge,qe,Qe,ht,Mt)}if(Y(ht)||H(ht))return Ge=Ge.get(Qe)||null,ut(qe,Ge,ht,Mt,null);if(typeof ht.then=="function")return et(Ge,qe,Qe,Ep(ht),Mt);if(ht.$$typeof===C)return et(Ge,qe,Qe,dp(qe,ht),Mt);sc(qe,ht)}return null}function Kt(Ge,qe,Qe,ht){for(var Mt=null,bn=null,Bt=qe,Yt=qe=0,pa=null;Bt!==null&&Yt<Qe.length;Yt++){Bt.index>Yt?(pa=Bt,Bt=null):pa=Bt.sibling;var zn=nt(Ge,Bt,Qe[Yt],ht);if(zn===null){Bt===null&&(Bt=pa);break}u&&Bt&&zn.alternate===null&&h(Ge,Bt),qe=R(zn,qe,Yt),bn===null?Mt=zn:bn.sibling=zn,bn=zn,Bt=pa}if(Yt===Qe.length)return m(Ge,Bt),kn&&Ql(Ge,Yt),Mt;if(Bt===null){for(;Yt<Qe.length;Yt++)Bt=pt(Ge,Qe[Yt],ht),Bt!==null&&(qe=R(Bt,qe,Yt),bn===null?Mt=Bt:bn.sibling=Bt,bn=Bt);return kn&&Ql(Ge,Yt),Mt}for(Bt=N(Bt);Yt<Qe.length;Yt++)pa=et(Bt,Ge,Yt,Qe[Yt],ht),pa!==null&&(u&&pa.alternate!==null&&Bt.delete(pa.key===null?Yt:pa.key),qe=R(pa,qe,Yt),bn===null?Mt=pa:bn.sibling=pa,bn=pa);return u&&Bt.forEach(function(Nl){return h(Ge,Nl)}),kn&&Ql(Ge,Yt),Mt}function Wt(Ge,qe,Qe,ht){if(Qe==null)throw Error(a(151));for(var Mt=null,bn=null,Bt=qe,Yt=qe=0,pa=null,zn=Qe.next();Bt!==null&&!zn.done;Yt++,zn=Qe.next()){Bt.index>Yt?(pa=Bt,Bt=null):pa=Bt.sibling;var Nl=nt(Ge,Bt,zn.value,ht);if(Nl===null){Bt===null&&(Bt=pa);break}u&&Bt&&Nl.alternate===null&&h(Ge,Bt),qe=R(Nl,qe,Yt),bn===null?Mt=Nl:bn.sibling=Nl,bn=Nl,Bt=pa}if(zn.done)return m(Ge,Bt),kn&&Ql(Ge,Yt),Mt;if(Bt===null){for(;!zn.done;Yt++,zn=Qe.next())zn=pt(Ge,zn.value,ht),zn!==null&&(qe=R(zn,qe,Yt),bn===null?Mt=zn:bn.sibling=zn,bn=zn);return kn&&Ql(Ge,Yt),Mt}for(Bt=N(Bt);!zn.done;Yt++,zn=Qe.next())zn=et(Bt,Ge,Yt,zn.value,ht),zn!==null&&(u&&zn.alternate!==null&&Bt.delete(zn.key===null?Yt:zn.key),qe=R(zn,qe,Yt),bn===null?Mt=zn:bn.sibling=zn,bn=zn);return u&&Bt.forEach(function(q_){return h(Ge,q_)}),kn&&Ql(Ge,Yt),Mt}function cr(Ge,qe,Qe,ht){if(typeof Qe=="object"&&Qe!==null&&Qe.type===b&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:e:{for(var Mt=Qe.key;qe!==null;){if(qe.key===Mt){if(Mt=Qe.type,Mt===b){if(qe.tag===7){m(Ge,qe.sibling),ht=A(qe,Qe.props.children),ht.return=Ge,Ge=ht;break e}}else if(qe.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===L&&oc(Mt)===qe.type){m(Ge,qe.sibling),ht=A(qe,Qe.props),oh(ht,Qe),ht.return=Ge,Ge=ht;break e}m(Ge,qe);break}else h(Ge,qe);qe=qe.sibling}Qe.type===b?(ht=Yl(Qe.props.children,Ge.mode,ht,Qe.key),ht.return=Ge,Ge=ht):(ht=lp(Qe.type,Qe.key,Qe.props,null,Ge.mode,ht),oh(ht,Qe),ht.return=Ge,Ge=ht)}return Z(Ge);case x:e:{for(Mt=Qe.key;qe!==null;){if(qe.key===Mt)if(qe.tag===4&&qe.stateNode.containerInfo===Qe.containerInfo&&qe.stateNode.implementation===Qe.implementation){m(Ge,qe.sibling),ht=A(qe,Qe.children||[]),ht.return=Ge,Ge=ht;break e}else{m(Ge,qe);break}else h(Ge,qe);qe=qe.sibling}ht=du(Qe,Ge.mode,ht),ht.return=Ge,Ge=ht}return Z(Ge);case L:return Mt=Qe._init,Qe=Mt(Qe._payload),cr(Ge,qe,Qe,ht)}if(Y(Qe))return Kt(Ge,qe,Qe,ht);if(H(Qe)){if(Mt=H(Qe),typeof Mt!="function")throw Error(a(150));return Qe=Mt.call(Qe),Wt(Ge,qe,Qe,ht)}if(typeof Qe.then=="function")return cr(Ge,qe,Ep(Qe),ht);if(Qe.$$typeof===C)return cr(Ge,qe,dp(Ge,Qe),ht);sc(Ge,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint"?(Qe=""+Qe,qe!==null&&qe.tag===6?(m(Ge,qe.sibling),ht=A(qe,Qe),ht.return=Ge,Ge=ht):(m(Ge,qe),ht=Ny(Qe,Ge.mode,ht),ht.return=Ge,Ge=ht),Z(Ge)):m(Ge,qe)}return function(Ge,qe,Qe,ht){try{ai=0;var Mt=cr(Ge,qe,Qe,ht);return ra=null,Mt}catch(Bt){if(Bt===qa||Bt===fp)throw Bt;var bn=Ja(29,Bt,null,Ge.mode);return bn.lanes=ht,bn.return=Ge,bn}finally{}}}var lc=Xy(!0),H0=Xy(!1),Si=ce(null),Ua=null;function Ji(u){var h=u.alternate;K(qr,qr.current&1),K(Si,u),Ua===null&&(h===null||tc.current!==null||h.memoizedState!==null)&&(Ua=u)}function G0(u){if(u.tag===22){if(K(qr,qr.current),K(Si,u),Ua===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(Ua=u)}}else jo()}function jo(){K(qr,qr.current),K(Si,Si.current)}function qs(u){je(Si),Ua===u&&(Ua=null),je(qr)}var qr=ce(0);function lh(u){for(var h=u;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||Ha(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function bu(u,h,m,N){h=u.memoizedState,m=m(N,h),m=m==null?h:f({},h,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var ch={enqueueSetState:function(u,h,m){u=u._reactInternals;var N=Oa(),A=al(N);A.payload=h,m!=null&&(A.callback=m),h=yo(u,A,N),h!==null&&(Ti(h,u,N),Wd(h,u,N))},enqueueReplaceState:function(u,h,m){u=u._reactInternals;var N=Oa(),A=al(N);A.tag=1,A.payload=h,m!=null&&(A.callback=m),h=yo(u,A,N),h!==null&&(Ti(h,u,N),Wd(h,u,N))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var m=Oa(),N=al(m);N.tag=2,h!=null&&(N.callback=h),h=yo(u,N,m),h!==null&&(Ti(h,u,m),Wd(h,u,m))}};function uh(u,h,m,N,A,R,Z){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(N,R,Z):h.prototype&&h.prototype.isPureReactComponent?!$s(m,N)||!$s(A,R):!0}function W0(u,h,m,N){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,N),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,N),h.state!==u&&ch.enqueueReplaceState(h,h.state,null)}function ll(u,h){var m=h;if("ref"in h){m={};for(var N in h)N!=="ref"&&(m[N]=h[N])}if(u=u.defaultProps){m===h&&(m=f({},m));for(var A in u)m[A]===void 0&&(m[A]=u[A])}return m}var cc=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function Jy(u){cc(u)}function Pp(u){console.error(u)}function K0(u){cc(u)}function dh(u,h){try{var m=u.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(N){setTimeout(function(){throw N})}}function Us(u,h,m){try{var N=u.onCaughtError;N(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Dp(u,h,m){return m=al(m),m.tag=3,m.payload={element:null},m.callback=function(){dh(u,h)},m}function Zy(u){return u=al(u),u.tag=3,u}function Y0(u,h,m,N){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var R=N.value;u.payload=function(){return A(R)},u.callback=function(){Us(h,m,N)}}var Z=m.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(u.callback=function(){Us(h,m,N),typeof A!="function"&&(pl===null?pl=new Set([this]):pl.add(this));var pe=N.stack;this.componentDidCatch(N.value,{componentStack:pe!==null?pe:""})})}function Q0(u,h,m,N,A){if(m.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(h=m.alternate,h!==null&&Vd(h,m,A,!0),m=Si.current,m!==null){switch(m.tag){case 13:return Ua===null?xx():m.alternate===null&&Ur===0&&(Ur=3),m.flags&=-257,m.flags|=65536,m.lanes=A,N===ky?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([N]):h.add(N),jx(u,N,A)),!1;case 22:return m.flags|=65536,N===ky?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([N])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([N]):m.add(N)),jx(u,N,A)),!1}throw Error(a(435,m.tag))}return jx(u,N,A),xx(),!1}if(kn)return h=Si.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=A,N!==hu&&(u=Error(a(422),{cause:N}),nl(Ba(u,m)))):(N!==hu&&(h=Error(a(423),{cause:N}),nl(Ba(h,m))),u=u.current.alternate,u.flags|=65536,A&=-A,u.lanes|=A,N=Ba(N,m),A=Dp(u.stateNode,N,A),ys(u,A),Ur!==4&&(Ur=2)),!1;var R=Error(a(520),{cause:N});if(R=Ba(R,m),jh===null?jh=[R]:jh.push(R),Ur!==4&&(Ur=2),h===null)return!0;N=Ba(N,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,u=A&-A,m.lanes|=u,u=Dp(m.stateNode,N,u),ys(m,u),!1;case 1:if(h=m.type,R=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(pl===null||!pl.has(R))))return m.flags|=65536,A&=-A,m.lanes|=A,A=Zy(A),Y0(A,u,m,N),ys(m,A),!1}m=m.return}while(m!==null);return!1}var X0=Error(a(461)),da=!1;function Sr(u,h,m,N){h.child=u===null?H0(h,null,m,N):lc(h,u.child,m,N)}function Op(u,h,m,N,A){m=m.render;var R=h.ref;if("ref"in N){var Z={};for(var pe in N)pe!=="ref"&&(Z[pe]=N[pe])}else Z=N;return Jl(h),N=Dy(u,h,m,Z,R,A),pe=My(),u!==null&&!da?(rc(u,h,A),wo(u,h,A)):(kn&&pe&&_y(h),h.flags|=1,Sr(u,h,N,A),h.child)}function Mp(u,h,m,N,A){if(u===null){var R=m.type;return typeof R=="function"&&!Kl(R)&&R.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=R,Ip(u,h,R,N,A)):(u=lp(m.type,null,N,h,h.mode,A),u.ref=h.ref,u.return=h,h.child=u)}if(R=u.child,!bs(u,A)){var Z=R.memoizedProps;if(m=m.compare,m=m!==null?m:$s,m(Z,N)&&u.ref===h.ref)return wo(u,h,A)}return h.flags|=1,u=za(R,N),u.ref=h.ref,u.return=h,h.child=u}function Ip(u,h,m,N,A){if(u!==null){var R=u.memoizedProps;if($s(R,N)&&u.ref===h.ref)if(da=!1,h.pendingProps=N=R,bs(u,A))(u.flags&131072)!==0&&(da=!0);else return h.lanes=u.lanes,wo(u,h,A)}return ju(u,h,m,N,A)}function hh(u,h,m){var N=h.pendingProps,A=N.children,R=u!==null?u.memoizedState:null;if(N.mode==="hidden"){if((h.flags&128)!==0){if(N=R!==null?R.baseLanes|m:m,u!==null){for(A=h.child=u.child,R=0;A!==null;)R=R|A.lanes|A.childLanes,A=A.sibling;h.childLanes=R&~N}else h.childLanes=0,h.child=null;return uc(u,h,N,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&hp(h,R!==null?R.cachePool:null),R!==null?xo(h,R):mp(),G0(h);else return h.lanes=h.childLanes=536870912,uc(u,h,R!==null?R.baseLanes|m:m,m)}else R!==null?(hp(h,R.cachePool),xo(h,R),jo(),h.memoizedState=null):(u!==null&&hp(h,null),mp(),jo());return Sr(u,h,A,m),h.child}function uc(u,h,m,N){var A=go();return A=A===null?null:{parent:mr._currentValue,pool:A},h.memoizedState={baseLanes:m,cachePool:A},u!==null&&hp(h,null),mp(),G0(h),u!==null&&Vd(u,h,N,!0),null}function qt(u,h){var m=h.ref;if(m===null)u!==null&&u.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(a(284));(u===null||u.ref!==m)&&(h.flags|=4194816)}}function ju(u,h,m,N,A){return Jl(h),m=Dy(u,h,m,N,void 0,A),N=My(),u!==null&&!da?(rc(u,h,A),wo(u,h,A)):(kn&&N&&_y(h),h.flags|=1,Sr(u,h,m,A),h.child)}function Rp(u,h,m,N,A,R){return Jl(h),h.updateQueue=null,m=D0(h,N,m,A),P0(u),N=My(),u!==null&&!da?(rc(u,h,R),wo(u,h,R)):(kn&&N&&_y(h),h.flags|=1,Sr(u,h,m,R),h.child)}function cl(u,h,m,N,A){if(Jl(h),h.stateNode===null){var R=Wl,Z=m.contextType;typeof Z=="object"&&Z!==null&&(R=zr(Z)),R=new m(N,R),h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=ch,h.stateNode=R,R._reactInternals=h,R=h.stateNode,R.props=N,R.state=h.memoizedState,R.refs={},ec(h),Z=m.contextType,R.context=typeof Z=="object"&&Z!==null?zr(Z):Wl,R.state=h.memoizedState,Z=m.getDerivedStateFromProps,typeof Z=="function"&&(bu(h,m,Z,N),R.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(Z=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),Z!==R.state&&ch.enqueueReplaceState(R,R.state,null),Ea(h,N,R,A),xs(),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308),N=!0}else if(u===null){R=h.stateNode;var pe=h.memoizedProps,Oe=ll(m,pe);R.props=Oe;var Ze=R.context,ut=m.contextType;Z=Wl,typeof ut=="object"&&ut!==null&&(Z=zr(ut));var pt=m.getDerivedStateFromProps;ut=typeof pt=="function"||typeof R.getSnapshotBeforeUpdate=="function",pe=h.pendingProps!==pe,ut||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(pe||Ze!==Z)&&W0(h,R,N,Z),Bs=!1;var nt=h.memoizedState;R.state=nt,Ea(h,N,R,A),xs(),Ze=h.memoizedState,pe||nt!==Ze||Bs?(typeof pt=="function"&&(bu(h,m,pt,N),Ze=h.memoizedState),(Oe=Bs||uh(h,m,Oe,N,nt,Ze,Z))?(ut||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(h.flags|=4194308)):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=N,h.memoizedState=Ze),R.props=N,R.state=Ze,R.context=Z,N=Oe):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),N=!1)}else{R=h.stateNode,mu(u,h),Z=h.memoizedProps,ut=ll(m,Z),R.props=ut,pt=h.pendingProps,nt=R.context,Ze=m.contextType,Oe=Wl,typeof Ze=="object"&&Ze!==null&&(Oe=zr(Ze)),pe=m.getDerivedStateFromProps,(Ze=typeof pe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(Z!==pt||nt!==Oe)&&W0(h,R,N,Oe),Bs=!1,nt=h.memoizedState,R.state=nt,Ea(h,N,R,A),xs();var et=h.memoizedState;Z!==pt||nt!==et||Bs||u!==null&&u.dependencies!==null&&up(u.dependencies)?(typeof pe=="function"&&(bu(h,m,pe,N),et=h.memoizedState),(ut=Bs||uh(h,m,ut,N,nt,et,Oe)||u!==null&&u.dependencies!==null&&up(u.dependencies))?(Ze||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(N,et,Oe),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(N,et,Oe)),typeof R.componentDidUpdate=="function"&&(h.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof R.componentDidUpdate!="function"||Z===u.memoizedProps&&nt===u.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&nt===u.memoizedState||(h.flags|=1024),h.memoizedProps=N,h.memoizedState=et),R.props=N,R.state=et,R.context=Oe,N=ut):(typeof R.componentDidUpdate!="function"||Z===u.memoizedProps&&nt===u.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&nt===u.memoizedState||(h.flags|=1024),N=!1)}return R=N,qt(u,h),N=(h.flags&128)!==0,R||N?(R=h.stateNode,m=N&&typeof m.getDerivedStateFromError!="function"?null:R.render(),h.flags|=1,u!==null&&N?(h.child=lc(h,u.child,null,A),h.child=lc(h,null,m,A)):Sr(u,h,m,A),h.memoizedState=R.state,u=h.child):u=wo(u,h,A),u}function J0(u,h,m,N){return Ud(),h.flags|=256,Sr(u,h,m,N),h.child}var fh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lp(u){return{baseLanes:u,cachePool:S0()}}function ha(u,h,m){return u=u!==null?u.childLanes&~m:0,h&&(u|=es),u}function Z0(u,h,m){var N=h.pendingProps,A=!1,R=(h.flags&128)!==0,Z;if((Z=R)||(Z=u!==null&&u.memoizedState===null?!1:(qr.current&2)!==0),Z&&(A=!0,h.flags&=-129),Z=(h.flags&32)!==0,h.flags&=-33,u===null){if(kn){if(A?Ji(h):jo(),kn){var pe=Er,Oe;if(Oe=pe){e:{for(Oe=pe,pe=Za;Oe.nodeType!==8;){if(!pe){pe=null;break e}if(Oe=ws(Oe.nextSibling),Oe===null){pe=null;break e}}pe=Oe}pe!==null?(h.memoizedState={dehydrated:pe,treeContext:Nr!==null?{id:Ar,overflow:mo}:null,retryLane:536870912,hydrationErrors:null},Oe=Ja(18,null,null,0),Oe.stateNode=pe,Oe.return=h,h.child=Oe,na=h,Er=null,Oe=!0):Oe=!1}Oe||Yi(h)}if(pe=h.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null))return Ha(pe)?h.lanes=32:h.lanes=536870912,null;qs(h)}return pe=N.children,N=N.fallback,A?(jo(),A=h.mode,pe=ph({mode:"hidden",children:pe},A),N=Yl(N,A,m,null),pe.return=h,N.return=h,pe.sibling=N,h.child=pe,A=h.child,A.memoizedState=Lp(m),A.childLanes=ha(u,Z,m),h.memoizedState=fh,N):(Ji(h),ex(h,pe))}if(Oe=u.memoizedState,Oe!==null&&(pe=Oe.dehydrated,pe!==null)){if(R)h.flags&256?(Ji(h),h.flags&=-257,h=tx(u,h,m)):h.memoizedState!==null?(jo(),h.child=u.child,h.flags|=128,h=null):(jo(),A=N.fallback,pe=h.mode,N=ph({mode:"visible",children:N.children},pe),A=Yl(A,pe,m,null),A.flags|=2,N.return=h,A.return=h,N.sibling=A,h.child=N,lc(h,u.child,null,m),N=h.child,N.memoizedState=Lp(m),N.childLanes=ha(u,Z,m),h.memoizedState=fh,h=A);else if(Ji(h),Ha(pe)){if(Z=pe.nextSibling&&pe.nextSibling.dataset,Z)var Ze=Z.dgst;Z=Ze,N=Error(a(419)),N.stack="",N.digest=Z,nl({value:N,source:null,stack:null}),h=tx(u,h,m)}else if(da||Vd(u,h,m,!1),Z=(m&u.childLanes)!==0,da||Z){if(Z=vr,Z!==null&&(N=m&-m,N=(N&42)!==0?1:jt(N),N=(N&(Z.suspendedLanes|m))!==0?0:N,N!==0&&N!==Oe.retryLane))throw Oe.retryLane=N,Gl(u,N),Ti(Z,u,N),X0;pe.data==="$?"||xx(),h=tx(u,h,m)}else pe.data==="$?"?(h.flags|=192,h.child=u.child,h=null):(u=Oe.treeContext,Er=ws(pe.nextSibling),na=h,kn=!0,gs=null,Za=!1,u!==null&&(Wi[Ki++]=Ar,Wi[Ki++]=mo,Wi[Ki++]=Nr,Ar=u.id,mo=u.overflow,Nr=h),h=ex(h,N.children),h.flags|=4096);return h}return A?(jo(),A=N.fallback,pe=h.mode,Oe=u.child,Ze=Oe.sibling,N=za(Oe,{mode:"hidden",children:N.children}),N.subtreeFlags=Oe.subtreeFlags&65011712,Ze!==null?A=za(Ze,A):(A=Yl(A,pe,m,null),A.flags|=2),A.return=h,N.return=h,N.sibling=A,h.child=N,N=A,A=h.child,pe=u.child.memoizedState,pe===null?pe=Lp(m):(Oe=pe.cachePool,Oe!==null?(Ze=mr._currentValue,Oe=Oe.parent!==Ze?{parent:Ze,pool:Ze}:Oe):Oe=S0(),pe={baseLanes:pe.baseLanes|m,cachePool:Oe}),A.memoizedState=pe,A.childLanes=ha(u,Z,m),h.memoizedState=fh,N):(Ji(h),m=u.child,u=m.sibling,m=za(m,{mode:"visible",children:N.children}),m.return=h,m.sibling=null,u!==null&&(Z=h.deletions,Z===null?(h.deletions=[u],h.flags|=16):Z.push(u)),h.child=m,h.memoizedState=null,m)}function ex(u,h){return h=ph({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function ph(u,h){return u=Ja(22,u,null,h),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function tx(u,h,m){return lc(h,u.child,null,m),u=ex(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function nx(u,h,m){u.lanes|=h;var N=u.alternate;N!==null&&(N.lanes|=h),ei(u.return,h,m)}function rx(u,h,m,N,A){var R=u.memoizedState;R===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:N,tail:m,tailMode:A}:(R.isBackwards=h,R.rendering=null,R.renderingStartTime=0,R.last=N,R.tail=m,R.tailMode=A)}function e1(u,h,m){var N=h.pendingProps,A=N.revealOrder,R=N.tail;if(Sr(u,h,N.children,m),N=qr.current,(N&2)!==0)N=N&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&nx(u,m,h);else if(u.tag===19)nx(u,m,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}N&=1}switch(K(qr,N),A){case"forwards":for(m=h.child,A=null;m!==null;)u=m.alternate,u!==null&&lh(u)===null&&(A=m),m=m.sibling;m=A,m===null?(A=h.child,h.child=null):(A=m.sibling,m.sibling=null),rx(h,!1,A,m,R);break;case"backwards":for(m=null,A=h.child,h.child=null;A!==null;){if(u=A.alternate,u!==null&&lh(u)===null){h.child=A;break}u=A.sibling,A.sibling=m,m=A,A=u}rx(h,!0,m,null,R);break;case"together":rx(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function wo(u,h,m){if(u!==null&&(h.dependencies=u.dependencies),fl|=h.lanes,(m&h.childLanes)===0)if(u!==null){if(Vd(u,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(a(153));if(h.child!==null){for(u=h.child,m=za(u,u.pendingProps),h.child=m,m.return=h;u.sibling!==null;)u=u.sibling,m=m.sibling=za(u,u.pendingProps),m.return=h;m.sibling=null}return h.child}function bs(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&up(u)))}function Va(u,h,m){switch(h.tag){case 3:be(h,h.stateNode.containerInfo),wi(h,mr,u.memoizedState.cache),Ud();break;case 27:case 5:Ae(h);break;case 4:be(h,h.stateNode.containerInfo);break;case 10:wi(h,h.type,h.memoizedProps.value);break;case 13:var N=h.memoizedState;if(N!==null)return N.dehydrated!==null?(Ji(h),h.flags|=128,null):(m&h.child.childLanes)!==0?Z0(u,h,m):(Ji(h),u=wo(u,h,m),u!==null?u.sibling:null);Ji(h);break;case 19:var A=(u.flags&128)!==0;if(N=(m&h.childLanes)!==0,N||(Vd(u,h,m,!1),N=(m&h.childLanes)!==0),A){if(N)return e1(u,h,m);h.flags|=128}if(A=h.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),K(qr,qr.current),N)break;return null;case 22:case 23:return h.lanes=0,hh(u,h,m);case 24:wi(h,mr,u.memoizedState.cache)}return wo(u,h,m)}function Fp(u,h,m){if(u!==null)if(u.memoizedProps!==h.pendingProps)da=!0;else{if(!bs(u,m)&&(h.flags&128)===0)return da=!1,Va(u,h,m);da=(u.flags&131072)!==0}else da=!1,kn&&(h.flags&1048576)!==0&&Sy(h,Bd,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var N=h.elementType,A=N._init;if(N=A(N._payload),h.type=N,typeof N=="function")Kl(N)?(u=ll(N,u),h.tag=1,h=cl(null,h,N,u,m)):(h.tag=0,h=ju(null,h,N,u,m));else{if(N!=null){if(A=N.$$typeof,A===P){h.tag=11,h=Op(null,h,N,u,m);break e}else if(A===I){h.tag=14,h=Mp(null,h,N,u,m);break e}}throw h=X(N)||N,Error(a(306,h,""))}}return h;case 0:return ju(u,h,h.type,h.pendingProps,m);case 1:return N=h.type,A=ll(N,h.pendingProps),cl(u,h,N,A,m);case 3:e:{if(be(h,h.stateNode.containerInfo),u===null)throw Error(a(387));N=h.pendingProps;var R=h.memoizedState;A=R.element,mu(u,h),Ea(h,N,null,m);var Z=h.memoizedState;if(N=Z.cache,wi(h,mr,N),N!==R.cache&&vn(h,[mr],m,!0),xs(),N=Z.element,R.isDehydrated)if(R={element:N,isDehydrated:!1,cache:Z.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=J0(u,h,N,m);break e}else if(N!==A){A=Ba(Error(a(424)),h),nl(A),h=J0(u,h,N,m);break e}else{switch(u=h.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Er=ws(u.firstChild),na=h,kn=!0,gs=null,Za=!0,m=H0(h,null,N,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Ud(),N===A){h=wo(u,h,m);break e}Sr(u,h,N,m)}h=h.child}return h;case 26:return qt(u,h),u===null?(m=Q1(h.type,null,h.pendingProps,null))?h.memoizedState=m:kn||(m=h.type,u=h.pendingProps,N=fc(ze.current).createElement(m),N[Vt]=h,N[ln]=u,sa(N,m,u),Ot(N),h.stateNode=N):h.memoizedState=Q1(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:return Ae(h),u===null&&kn&&(N=h.stateNode=W1(h.type,h.pendingProps,ze.current),na=h,Za=!0,A=Er,ts(h.type)?(Ex=A,Er=ws(N.firstChild)):Er=A),Sr(u,h,h.pendingProps.children,m),qt(u,h),u===null&&(h.flags|=4194304),h.child;case 5:return u===null&&kn&&((A=N=Er)&&(N=H1(N,h.type,h.pendingProps,Za),N!==null?(h.stateNode=N,na=h,Er=ws(N.firstChild),Za=!1,A=!0):A=!1),A||Yi(h)),Ae(h),A=h.type,R=h.pendingProps,Z=u!==null?u.memoizedProps:null,N=R.children,tm(A,R)?N=null:Z!==null&&tm(A,Z)&&(h.flags|=32),h.memoizedState!==null&&(A=Dy(u,h,Oy,null,null,m),Bu._currentValue=A),qt(u,h),Sr(u,h,N,m),h.child;case 6:return u===null&&kn&&((u=m=Er)&&(m=rm(m,h.pendingProps,Za),m!==null?(h.stateNode=m,na=h,Er=null,u=!0):u=!1),u||Yi(h)),null;case 13:return Z0(u,h,m);case 4:return be(h,h.stateNode.containerInfo),N=h.pendingProps,u===null?h.child=lc(h,null,N,m):Sr(u,h,N,m),h.child;case 11:return Op(u,h,h.type,h.pendingProps,m);case 7:return Sr(u,h,h.pendingProps,m),h.child;case 8:return Sr(u,h,h.pendingProps.children,m),h.child;case 12:return Sr(u,h,h.pendingProps.children,m),h.child;case 10:return N=h.pendingProps,wi(h,h.type,N.value),Sr(u,h,N.children,m),h.child;case 9:return A=h.type._context,N=h.pendingProps.children,Jl(h),A=zr(A),N=N(A),h.flags|=1,Sr(u,h,N,m),h.child;case 14:return Mp(u,h,h.type,h.pendingProps,m);case 15:return Ip(u,h,h.type,h.pendingProps,m);case 19:return e1(u,h,m);case 31:return N=h.pendingProps,m=h.mode,N={mode:N.mode,children:N.children},u===null?(m=ph(N,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=za(u.child,N),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return hh(u,h,m);case 24:return Jl(h),N=zr(mr),u===null?(A=go(),A===null&&(A=vr,R=Cy(),A.pooledCache=R,R.refCount++,R!==null&&(A.pooledCacheLanes|=m),A=R),h.memoizedState={parent:N,cache:A},ec(h),wi(h,mr,A)):((u.lanes&m)!==0&&(mu(u,h),Ea(h,null,null,m),xs()),A=u.memoizedState,R=h.memoizedState,A.parent!==N?(A={parent:N,cache:N},h.memoizedState=A,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=A),wi(h,mr,N)):(N=R.cache,wi(h,mr,N),N!==A.cache&&vn(h,[mr],m,!0))),Sr(u,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function No(u){u.flags|=4}function $p(u,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!oa(h)){if(h=Si.current,h!==null&&((Fn&4194048)===Fn?Ua!==null:(Fn&62914560)!==Fn&&(Fn&536870912)===0||h!==Ua))throw pu=ky,_0;u.flags|=8192}}function Bp(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?Ct():536870912,u.lanes|=h,ku|=h)}function mh(u,h){if(!kn)switch(u.tailMode){case"hidden":h=u.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var N=null;m!==null;)m.alternate!==null&&(N=m),m=m.sibling;N===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:N.sibling=null}}function gr(u){var h=u.alternate!==null&&u.alternate.child===u.child,m=0,N=0;if(h)for(var A=u.child;A!==null;)m|=A.lanes|A.childLanes,N|=A.subtreeFlags&65011712,N|=A.flags&65011712,A.return=u,A=A.sibling;else for(A=u.child;A!==null;)m|=A.lanes|A.childLanes,N|=A.subtreeFlags,N|=A.flags,A.return=u,A=A.sibling;return u.subtreeFlags|=N,u.childLanes=m,h}function t1(u,h,m){var N=h.pendingProps;switch(zd(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(h),null;case 1:return gr(h),null;case 3:return m=h.stateNode,N=null,u!==null&&(N=u.memoizedState.cache),h.memoizedState.cache!==N&&(h.flags|=2048),Qi(mr),Ce(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(qd(h)?No(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,b0())),gr(h),null;case 26:return m=h.memoizedState,u===null?(No(h),m!==null?(gr(h),$p(h,m)):(gr(h),h.flags&=-16777217)):m?m!==u.memoizedState?(No(h),gr(h),$p(h,m)):(gr(h),h.flags&=-16777217):(u.memoizedProps!==N&&No(h),gr(h),h.flags&=-16777217),null;case 27:me(h),m=ze.current;var A=h.type;if(u!==null&&h.stateNode!=null)u.memoizedProps!==N&&No(h);else{if(!N){if(h.stateNode===null)throw Error(a(166));return gr(h),null}u=Ie.current,qd(h)?x0(h):(u=W1(A,N,m),h.stateNode=u,No(h))}return gr(h),null;case 5:if(me(h),m=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==N&&No(h);else{if(!N){if(h.stateNode===null)throw Error(a(166));return gr(h),null}if(u=Ie.current,qd(h))x0(h);else{switch(A=fc(ze.current),u){case 1:u=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=A.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof N.is=="string"?A.createElement("select",{is:N.is}):A.createElement("select"),N.multiple?u.multiple=!0:N.size&&(u.size=N.size);break;default:u=typeof N.is=="string"?A.createElement(m,{is:N.is}):A.createElement(m)}}u[Vt]=h,u[ln]=N;e:for(A=h.child;A!==null;){if(A.tag===5||A.tag===6)u.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}h.stateNode=u;e:switch(sa(u,m,N),m){case"button":case"input":case"select":case"textarea":u=!!N.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&No(h)}}return gr(h),h.flags&=-16777217,null;case 6:if(u&&h.stateNode!=null)u.memoizedProps!==N&&No(h);else{if(typeof N!="string"&&h.stateNode===null)throw Error(a(166));if(u=ze.current,qd(h)){if(u=h.stateNode,m=h.memoizedProps,N=null,A=na,A!==null)switch(A.tag){case 27:case 5:N=A.memoizedProps}u[Vt]=h,u=!!(u.nodeValue===m||N!==null&&N.suppressHydrationWarning===!0||z1(u.nodeValue,m)),u||Yi(h)}else u=fc(u).createTextNode(N),u[Vt]=h,h.stateNode=u}return gr(h),null;case 13:if(N=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(A=qd(h),N!==null&&N.dehydrated!==null){if(u===null){if(!A)throw Error(a(318));if(A=h.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));A[Vt]=h}else Ud(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;gr(h),A=!1}else A=b0(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=A),A=!0;if(!A)return h.flags&256?(qs(h),h):(qs(h),null)}if(qs(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=N!==null,u=u!==null&&u.memoizedState!==null,m){N=h.child,A=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(A=N.alternate.memoizedState.cachePool.pool);var R=null;N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(R=N.memoizedState.cachePool.pool),R!==A&&(N.flags|=2048)}return m!==u&&m&&(h.child.flags|=8192),Bp(h,h.updateQueue),gr(h),null;case 4:return Ce(),u===null&&Cx(h.stateNode.containerInfo),gr(h),null;case 10:return Qi(h.type),gr(h),null;case 19:if(je(qr),A=h.memoizedState,A===null)return gr(h),null;if(N=(h.flags&128)!==0,R=A.rendering,R===null)if(N)mh(A,!1);else{if(Ur!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(R=lh(u),R!==null){for(h.flags|=128,mh(A,!1),u=R.updateQueue,h.updateQueue=u,Bp(h,u),h.subtreeFlags=0,u=m,m=h.child;m!==null;)$d(m,u),m=m.sibling;return K(qr,qr.current&1|2),h.child}u=u.sibling}A.tail!==null&&ee()>Au&&(h.flags|=128,N=!0,mh(A,!1),h.lanes=4194304)}else{if(!N)if(u=lh(R),u!==null){if(h.flags|=128,N=!0,u=u.updateQueue,h.updateQueue=u,Bp(h,u),mh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!R.alternate&&!kn)return gr(h),null}else 2*ee()-A.renderingStartTime>Au&&m!==536870912&&(h.flags|=128,N=!0,mh(A,!1),h.lanes=4194304);A.isBackwards?(R.sibling=h.child,h.child=R):(u=A.last,u!==null?u.sibling=R:h.child=R,A.last=R)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=ee(),h.sibling=null,u=qr.current,K(qr,N?u&1|2:u&1),h):(gr(h),null);case 22:case 23:return qs(h),Py(),N=h.memoizedState!==null,u!==null?u.memoizedState!==null!==N&&(h.flags|=8192):N&&(h.flags|=8192),N?(m&536870912)!==0&&(h.flags&128)===0&&(gr(h),h.subtreeFlags&6&&(h.flags|=8192)):gr(h),m=h.updateQueue,m!==null&&Bp(h,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),N=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(N=h.memoizedState.cachePool.pool),N!==m&&(h.flags|=2048),u!==null&&je(Zl),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Qi(mr),gr(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function n1(u,h){switch(zd(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Qi(mr),Ce(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return me(h),null;case 13:if(qs(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Ud()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return je(qr),null;case 4:return Ce(),null;case 10:return Qi(h.type),null;case 22:case 23:return qs(h),Py(),u!==null&&je(Zl),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return Qi(mr),null;case 25:return null;default:return null}}function r1(u,h){switch(zd(h),h.tag){case 3:Qi(mr),Ce();break;case 26:case 27:case 5:me(h);break;case 4:Ce();break;case 13:qs(h);break;case 19:je(qr);break;case 10:Qi(h.type);break;case 22:case 23:qs(h),Py(),u!==null&&je(Zl);break;case 24:Qi(mr)}}function gh(u,h){try{var m=h.updateQueue,N=m!==null?m.lastEffect:null;if(N!==null){var A=N.next;m=A;do{if((m.tag&u)===u){N=void 0;var R=m.create,Z=m.inst;N=R(),Z.destroy=N}m=m.next}while(m!==A)}}catch(pe){yr(h,h.return,pe)}}function ul(u,h,m){try{var N=h.updateQueue,A=N!==null?N.lastEffect:null;if(A!==null){var R=A.next;N=R;do{if((N.tag&u)===u){var Z=N.inst,pe=Z.destroy;if(pe!==void 0){Z.destroy=void 0,A=h;var Oe=m,Ze=pe;try{Ze()}catch(ut){yr(A,Oe,ut)}}}N=N.next}while(N!==R)}}catch(ut){yr(h,h.return,ut)}}function a1(u){var h=u.updateQueue;if(h!==null){var m=u.stateNode;try{Ey(h,m)}catch(N){yr(u,u.return,N)}}}function ax(u,h,m){m.props=ll(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(N){yr(u,h,N)}}function wu(u,h){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var N=u.stateNode;break;case 30:N=u.stateNode;break;default:N=u.stateNode}typeof m=="function"?u.refCleanup=m(N):m.current=N}}catch(A){yr(u,h,A)}}function Vs(u,h){var m=u.ref,N=u.refCleanup;if(m!==null)if(typeof N=="function")try{N()}catch(A){yr(u,h,A)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){yr(u,h,A)}else m.current=null}function zp(u){var h=u.type,m=u.memoizedProps,N=u.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&N.focus();break e;case"img":m.src?N.src=m.src:m.srcSet&&(N.srcset=m.srcSet)}}catch(A){yr(u,u.return,A)}}function qp(u,h,m){try{var N=u.stateNode;j_(N,u.type,m,h),N[ln]=h}catch(A){yr(u,u.return,A)}}function Nu(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&ts(u.type)||u.tag===4}function yh(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Nu(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&ts(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Up(u,h,m){var N=u.tag;if(N===5||N===6)u=u.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(u),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=Zp));else if(N!==4&&(N===27&&ts(u.type)&&(m=u.stateNode,h=null),u=u.child,u!==null))for(Up(u,h,m),u=u.sibling;u!==null;)Up(u,h,m),u=u.sibling}function xh(u,h,m){var N=u.tag;if(N===5||N===6)u=u.stateNode,h?m.insertBefore(u,h):m.appendChild(u);else if(N!==4&&(N===27&&ts(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(xh(u,h,m),u=u.sibling;u!==null;)xh(u,h,m),u=u.sibling}function vh(u){var h=u.stateNode,m=u.memoizedProps;try{for(var N=u.type,A=h.attributes;A.length;)h.removeAttributeNode(A[0]);sa(h,N,m),h[Vt]=u,h[ln]=m}catch(R){yr(u,u.return,R)}}var Hs=!1,Xn=!1,So=!1,i1=typeof WeakSet=="function"?WeakSet:Set,aa=null;function o_(u,h){if(u=u.containerInfo,js=om,u=g0(u),by(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var N=m.getSelection&&m.getSelection();if(N&&N.rangeCount!==0){m=N.anchorNode;var A=N.anchorOffset,R=N.focusNode;N=N.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var Z=0,pe=-1,Oe=-1,Ze=0,ut=0,pt=u,nt=null;t:for(;;){for(var et;pt!==m||A!==0&&pt.nodeType!==3||(pe=Z+A),pt!==R||N!==0&&pt.nodeType!==3||(Oe=Z+N),pt.nodeType===3&&(Z+=pt.nodeValue.length),(et=pt.firstChild)!==null;)nt=pt,pt=et;for(;;){if(pt===u)break t;if(nt===m&&++Ze===A&&(pe=Z),nt===R&&++ut===N&&(Oe=Z),(et=pt.nextSibling)!==null)break;pt=nt,nt=pt.parentNode}pt=et}m=pe===-1||Oe===-1?null:{start:pe,end:Oe}}else m=null}m=m||{start:0,end:0}}else m=null;for(em={focusedElem:u,selectionRange:m},om=!1,aa=h;aa!==null;)if(h=aa,u=h.child,(h.subtreeFlags&1024)!==0&&u!==null)u.return=h,aa=u;else for(;aa!==null;){switch(h=aa,R=h.alternate,u=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&R!==null){u=void 0,m=h,A=R.memoizedProps,R=R.memoizedState,N=m.stateNode;try{var Kt=ll(m.type,A,m.elementType===m.type);u=N.getSnapshotBeforeUpdate(Kt,R),N.__reactInternalSnapshotBeforeUpdate=u}catch(Wt){yr(m,m.return,Wt)}}break;case 3:if((u&1024)!==0){if(u=h.stateNode.containerInfo,m=u.nodeType,m===9)Ax(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Ax(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(a(163))}if(u=h.sibling,u!==null){u.return=h.return,aa=u;break}aa=h.return}}function s1(u,h,m){var N=m.flags;switch(m.tag){case 0:case 11:case 15:dl(u,m),N&4&&gh(5,m);break;case 1:if(dl(u,m),N&4)if(u=m.stateNode,h===null)try{u.componentDidMount()}catch(Z){yr(m,m.return,Z)}else{var A=ll(m.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(A,h,u.__reactInternalSnapshotBeforeUpdate)}catch(Z){yr(m,m.return,Z)}}N&64&&a1(m),N&512&&wu(m,m.return);break;case 3:if(dl(u,m),N&64&&(u=m.updateQueue,u!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{Ey(u,h)}catch(Z){yr(m,m.return,Z)}}break;case 27:h===null&&N&4&&vh(m);case 26:case 5:dl(u,m),h===null&&N&4&&zp(m),N&512&&wu(m,m.return);break;case 12:dl(u,m);break;case 13:dl(u,m),N&4&&c1(u,m),N&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=Kp.bind(null,m),Iu(u,m))));break;case 22:if(N=m.memoizedState!==null||Hs,!N){h=h!==null&&h.memoizedState!==null||Xn,A=Hs;var R=Xn;Hs=N,(Xn=h)&&!R?Co(u,m,(m.subtreeFlags&8772)!==0):dl(u,m),Hs=A,Xn=R}break;case 30:break;default:dl(u,m)}}function o1(u){var h=u.alternate;h!==null&&(u.alternate=null,o1(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&zi(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Pr=null,ii=!1;function _o(u,h,m){for(m=m.child;m!==null;)l1(u,h,m),m=m.sibling}function l1(u,h,m){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(Q,m)}catch{}switch(m.tag){case 26:Xn||Vs(m,h),_o(u,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Xn||Vs(m,h);var N=Pr,A=ii;ts(m.type)&&(Pr=m.stateNode,ii=!1),_o(u,h,m),Eh(m.stateNode),Pr=N,ii=A;break;case 5:Xn||Vs(m,h);case 6:if(N=Pr,A=ii,Pr=null,_o(u,h,m),Pr=N,ii=A,Pr!==null)if(ii)try{(Pr.nodeType===9?Pr.body:Pr.nodeName==="HTML"?Pr.ownerDocument.body:Pr).removeChild(m.stateNode)}catch(R){yr(m,h,R)}else try{Pr.removeChild(m.stateNode)}catch(R){yr(m,h,R)}break;case 18:Pr!==null&&(ii?(u=Pr,nm(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),Fh(u)):nm(Pr,m.stateNode));break;case 4:N=Pr,A=ii,Pr=m.stateNode.containerInfo,ii=!0,_o(u,h,m),Pr=N,ii=A;break;case 0:case 11:case 14:case 15:Xn||ul(2,m,h),Xn||ul(4,m,h),_o(u,h,m);break;case 1:Xn||(Vs(m,h),N=m.stateNode,typeof N.componentWillUnmount=="function"&&ax(m,h,N)),_o(u,h,m);break;case 21:_o(u,h,m);break;case 22:Xn=(N=Xn)||m.memoizedState!==null,_o(u,h,m),Xn=N;break;default:_o(u,h,m)}}function c1(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Fh(u)}catch(m){yr(h,h.return,m)}}function l_(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new i1),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new i1),h;default:throw Error(a(435,u.tag))}}function ix(u,h){var m=l_(u);h.forEach(function(N){var A=p_.bind(null,u,N);m.has(N)||(m.add(N),N.then(A,A))})}function _i(u,h){var m=h.deletions;if(m!==null)for(var N=0;N<m.length;N++){var A=m[N],R=u,Z=h,pe=Z;e:for(;pe!==null;){switch(pe.tag){case 27:if(ts(pe.type)){Pr=pe.stateNode,ii=!1;break e}break;case 5:Pr=pe.stateNode,ii=!1;break e;case 3:case 4:Pr=pe.stateNode.containerInfo,ii=!0;break e}pe=pe.return}if(Pr===null)throw Error(a(160));l1(R,Z,A),Pr=null,ii=!1,R=A.alternate,R!==null&&(R.return=null),A.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)sx(h,u),h=h.sibling}var Zi=null;function sx(u,h){var m=u.alternate,N=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:_i(h,u),si(u),N&4&&(ul(3,u,u.return),gh(3,u),ul(5,u,u.return));break;case 1:_i(h,u),si(u),N&512&&(Xn||m===null||Vs(m,m.return)),N&64&&Hs&&(u=u.updateQueue,u!==null&&(N=u.callbacks,N!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?N:m.concat(N))));break;case 26:var A=Zi;if(_i(h,u),si(u),N&512&&(Xn||m===null||Vs(m,m.return)),N&4){var R=m!==null?m.memoizedState:null;if(N=u.memoizedState,m===null)if(N===null)if(u.stateNode===null){e:{N=u.type,m=u.memoizedProps,A=A.ownerDocument||A;t:switch(N){case"title":R=A.getElementsByTagName("title")[0],(!R||R[Aa]||R[Vt]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=A.createElement(N),A.head.insertBefore(R,A.querySelector("head > title"))),sa(R,N,m),R[Vt]=u,Ot(R),N=R;break e;case"link":var Z=Z1("link","href",A).get(N+(m.href||""));if(Z){for(var pe=0;pe<Z.length;pe++)if(R=Z[pe],R.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&R.getAttribute("rel")===(m.rel==null?null:m.rel)&&R.getAttribute("title")===(m.title==null?null:m.title)&&R.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){Z.splice(pe,1);break t}}R=A.createElement(N),sa(R,N,m),A.head.appendChild(R);break;case"meta":if(Z=Z1("meta","content",A).get(N+(m.content||""))){for(pe=0;pe<Z.length;pe++)if(R=Z[pe],R.getAttribute("content")===(m.content==null?null:""+m.content)&&R.getAttribute("name")===(m.name==null?null:m.name)&&R.getAttribute("property")===(m.property==null?null:m.property)&&R.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&R.getAttribute("charset")===(m.charSet==null?null:m.charSet)){Z.splice(pe,1);break t}}R=A.createElement(N),sa(R,N,m),A.head.appendChild(R);break;default:throw Error(a(468,N))}R[Vt]=u,Ot(R),N=R}u.stateNode=N}else ej(A,u.type,u.stateNode);else u.stateNode=J1(A,N,u.memoizedProps);else R!==N?(R===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):R.count--,N===null?ej(A,u.type,u.stateNode):J1(A,N,u.memoizedProps)):N===null&&u.stateNode!==null&&qp(u,u.memoizedProps,m.memoizedProps)}break;case 27:_i(h,u),si(u),N&512&&(Xn||m===null||Vs(m,m.return)),m!==null&&N&4&&qp(u,u.memoizedProps,m.memoizedProps);break;case 5:if(_i(h,u),si(u),N&512&&(Xn||m===null||Vs(m,m.return)),u.flags&32){A=u.stateNode;try{Ko(A,"")}catch(et){yr(u,u.return,et)}}N&4&&u.stateNode!=null&&(A=u.memoizedProps,qp(u,A,m!==null?m.memoizedProps:A)),N&1024&&(So=!0);break;case 6:if(_i(h,u),si(u),N&4){if(u.stateNode===null)throw Error(a(162));N=u.memoizedProps,m=u.stateNode;try{m.nodeValue=N}catch(et){yr(u,u.return,et)}}break;case 3:if($u=null,A=Zi,Zi=dn(h.containerInfo),_i(h,u),Zi=A,si(u),N&4&&m!==null&&m.memoizedState.isDehydrated)try{Fh(h.containerInfo)}catch(et){yr(u,u.return,et)}So&&(So=!1,u1(u));break;case 4:N=Zi,Zi=dn(u.stateNode.containerInfo),_i(h,u),si(u),Zi=N;break;case 12:_i(h,u),si(u);break;case 13:_i(h,u),si(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(fx=ee()),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,ix(u,N)));break;case 22:A=u.memoizedState!==null;var Oe=m!==null&&m.memoizedState!==null,Ze=Hs,ut=Xn;if(Hs=Ze||A,Xn=ut||Oe,_i(h,u),Xn=ut,Hs=Ze,si(u),N&8192)e:for(h=u.stateNode,h._visibility=A?h._visibility&-2:h._visibility|1,A&&(m===null||Oe||Hs||Xn||dc(u)),m=null,h=u;;){if(h.tag===5||h.tag===26){if(m===null){Oe=m=h;try{if(R=Oe.stateNode,A)Z=R.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{pe=Oe.stateNode;var pt=Oe.memoizedProps.style,nt=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;pe.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(et){yr(Oe,Oe.return,et)}}}else if(h.tag===6){if(m===null){Oe=h;try{Oe.stateNode.nodeValue=A?"":Oe.memoizedProps}catch(et){yr(Oe,Oe.return,et)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}N&4&&(N=u.updateQueue,N!==null&&(m=N.retryQueue,m!==null&&(N.retryQueue=null,ix(u,m))));break;case 19:_i(h,u),si(u),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,ix(u,N)));break;case 30:break;case 21:break;default:_i(h,u),si(u)}}function si(u){var h=u.flags;if(h&2){try{for(var m,N=u.return;N!==null;){if(Nu(N)){m=N;break}N=N.return}if(m==null)throw Error(a(160));switch(m.tag){case 27:var A=m.stateNode,R=yh(u);xh(u,R,A);break;case 5:var Z=m.stateNode;m.flags&32&&(Ko(Z,""),m.flags&=-33);var pe=yh(u);xh(u,pe,Z);break;case 3:case 4:var Oe=m.stateNode.containerInfo,Ze=yh(u);Up(u,Ze,Oe);break;default:throw Error(a(161))}}catch(ut){yr(u,u.return,ut)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function u1(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;u1(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),u=u.sibling}}function dl(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)s1(u,h.alternate,h),h=h.sibling}function dc(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:ul(4,h,h.return),dc(h);break;case 1:Vs(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&ax(h,h.return,m),dc(h);break;case 27:Eh(h.stateNode);case 26:case 5:Vs(h,h.return),dc(h);break;case 22:h.memoizedState===null&&dc(h);break;case 30:dc(h);break;default:dc(h)}u=u.sibling}}function Co(u,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var N=h.alternate,A=u,R=h,Z=R.flags;switch(R.tag){case 0:case 11:case 15:Co(A,R,m),gh(4,R);break;case 1:if(Co(A,R,m),N=R,A=N.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ze){yr(N,N.return,Ze)}if(N=R,A=N.updateQueue,A!==null){var pe=N.stateNode;try{var Oe=A.shared.hiddenCallbacks;if(Oe!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Oe.length;A++)A0(Oe[A],pe)}catch(Ze){yr(N,N.return,Ze)}}m&&Z&64&&a1(R),wu(R,R.return);break;case 27:vh(R);case 26:case 5:Co(A,R,m),m&&N===null&&Z&4&&zp(R),wu(R,R.return);break;case 12:Co(A,R,m);break;case 13:Co(A,R,m),m&&Z&4&&c1(A,R);break;case 22:R.memoizedState===null&&Co(A,R,m),wu(R,R.return);break;case 30:break;default:Co(A,R,m)}h=h.sibling}}function ox(u,h){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&Hd(m))}function lx(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Hd(u))}function Gs(u,h,m,N){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)d1(u,h,m,N),h=h.sibling}function d1(u,h,m,N){var A=h.flags;switch(h.tag){case 0:case 11:case 15:Gs(u,h,m,N),A&2048&&gh(9,h);break;case 1:Gs(u,h,m,N);break;case 3:Gs(u,h,m,N),A&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Hd(u)));break;case 12:if(A&2048){Gs(u,h,m,N),u=h.stateNode;try{var R=h.memoizedProps,Z=R.id,pe=R.onPostCommit;typeof pe=="function"&&pe(Z,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Oe){yr(h,h.return,Oe)}}else Gs(u,h,m,N);break;case 13:Gs(u,h,m,N);break;case 23:break;case 22:R=h.stateNode,Z=h.alternate,h.memoizedState!==null?R._visibility&2?Gs(u,h,m,N):bh(u,h):R._visibility&2?Gs(u,h,m,N):(R._visibility|=2,Su(u,h,m,N,(h.subtreeFlags&10256)!==0)),A&2048&&ox(Z,h);break;case 24:Gs(u,h,m,N),A&2048&&lx(h.alternate,h);break;default:Gs(u,h,m,N)}}function Su(u,h,m,N,A){for(A=A&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var R=u,Z=h,pe=m,Oe=N,Ze=Z.flags;switch(Z.tag){case 0:case 11:case 15:Su(R,Z,pe,Oe,A),gh(8,Z);break;case 23:break;case 22:var ut=Z.stateNode;Z.memoizedState!==null?ut._visibility&2?Su(R,Z,pe,Oe,A):bh(R,Z):(ut._visibility|=2,Su(R,Z,pe,Oe,A)),A&&Ze&2048&&ox(Z.alternate,Z);break;case 24:Su(R,Z,pe,Oe,A),A&&Ze&2048&&lx(Z.alternate,Z);break;default:Su(R,Z,pe,Oe,A)}h=h.sibling}}function bh(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=u,N=h,A=N.flags;switch(N.tag){case 22:bh(m,N),A&2048&&ox(N.alternate,N);break;case 24:bh(m,N),A&2048&&lx(N.alternate,N);break;default:bh(m,N)}h=h.sibling}}var Da=8192;function _u(u){if(u.subtreeFlags&Da)for(u=u.child;u!==null;)h1(u),u=u.sibling}function h1(u){switch(u.tag){case 26:_u(u),u.flags&Da&&u.memoizedState!==null&&O_(Zi,u.memoizedState,u.memoizedProps);break;case 5:_u(u);break;case 3:case 4:var h=Zi;Zi=dn(u.stateNode.containerInfo),_u(u),Zi=h;break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=Da,Da=16777216,_u(u),Da=h):_u(u));break;default:_u(u)}}function f1(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Cu(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];aa=N,m1(N,u)}f1(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)p1(u),u=u.sibling}function p1(u){switch(u.tag){case 0:case 11:case 15:Cu(u),u.flags&2048&&ul(9,u,u.return);break;case 3:Cu(u);break;case 12:Cu(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&2&&(u.return===null||u.return.tag!==13)?(h._visibility&=-3,Vp(u)):Cu(u);break;default:Cu(u)}}function Vp(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];aa=N,m1(N,u)}f1(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:ul(8,h,h.return),Vp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,Vp(h));break;default:Vp(h)}u=u.sibling}}function m1(u,h){for(;aa!==null;){var m=aa;switch(m.tag){case 0:case 11:case 15:ul(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var N=m.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:Hd(m.memoizedState.cache)}if(N=m.child,N!==null)N.return=m,aa=N;else e:for(m=u;aa!==null;){N=aa;var A=N.sibling,R=N.return;if(o1(N),N===m){aa=null;break e}if(A!==null){A.return=R,aa=A;break e}aa=R}}}var c_={getCacheForType:function(u){var h=zr(mr),m=h.data.get(u);return m===void 0&&(m=u(),h.data.set(u,m)),m}},cx=typeof WeakMap=="function"?WeakMap:Map,rr=0,vr=null,Sn=null,Fn=0,ar=0,Ci=null,hl=!1,Tu=!1,ux=!1,To=0,Ur=0,fl=0,hc=0,dx=0,es=0,ku=0,jh=null,oi=null,hx=!1,fx=0,Au=1/0,wh=null,pl=null,ja=0,ml=null,Eu=null,Pu=0,px=0,mx=null,g1=null,Du=0,gx=null;function Oa(){if((rr&2)!==0&&Fn!==0)return Fn&-Fn;if(z.T!==null){var u=fu;return u!==0?u:Xp()}return Kn()}function y1(){es===0&&(es=(Fn&536870912)===0||kn?ct():536870912);var u=Si.current;return u!==null&&(u.flags|=32),es}function Ti(u,h,m){(u===vr&&(ar===2||ar===9)||u.cancelPendingCommit!==null)&&(Ou(u,0),gl(u,Fn,es,!1)),ke(u,m),((rr&2)===0||u!==vr)&&(u===vr&&((rr&2)===0&&(hc|=m),Ur===4&&gl(u,Fn,es,!1)),Ws(u))}function x1(u,h,m){if((rr&6)!==0)throw Error(a(327));var N=!m&&(h&124)===0&&(h&u.expiredLanes)===0||Xe(u,h),A=N?h_(u,h):vx(u,h,!0),R=N;do{if(A===0){Tu&&!N&&gl(u,h,0,!1);break}else{if(m=u.current.alternate,R&&!u_(m)){A=vx(u,h,!1),R=!1;continue}if(A===2){if(R=h,u.errorRecoveryDisabledLanes&R)var Z=0;else Z=u.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){h=Z;e:{var pe=u;A=jh;var Oe=pe.current.memoizedState.isDehydrated;if(Oe&&(Ou(pe,Z).flags|=256),Z=vx(pe,Z,!1),Z!==2){if(ux&&!Oe){pe.errorRecoveryDisabledLanes|=R,hc|=R,A=4;break e}R=oi,oi=A,R!==null&&(oi===null?oi=R:oi.push.apply(oi,R))}A=Z}if(R=!1,A!==2)continue}}if(A===1){Ou(u,0),gl(u,h,0,!0);break}e:{switch(N=u,R=A,R){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:gl(N,h,es,!hl);break e;case 2:oi=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(A=fx+300-ee(),10<A)){if(gl(N,h,es,!hl),we(N,0,!0)!==0)break e;N.timeoutHandle=q1(v1.bind(null,N,m,oi,wh,hx,h,es,hc,ku,hl,R,2,-0,0),A);break e}v1(N,m,oi,wh,hx,h,es,hc,ku,hl,R,0,-0,0)}}break}while(!0);Ws(u)}function v1(u,h,m,N,A,R,Z,pe,Oe,Ze,ut,pt,nt,et){if(u.timeoutHandle=-1,pt=h.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(fa={stylesheets:null,count:0,unsuspend:D_},h1(h),pt=M_(),pt!==null)){u.cancelPendingCommit=pt(Nh.bind(null,u,h,R,m,N,A,Z,pe,Oe,ut,1,nt,et)),gl(u,R,Z,!Ze);return}Nh(u,h,R,m,N,A,Z,pe,Oe)}function u_(u){for(var h=u;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var N=0;N<m.length;N++){var A=m[N],R=A.getSnapshot;A=A.value;try{if(!bi(R(),A))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function gl(u,h,m,N){h&=~dx,h&=~hc,u.suspendedLanes|=h,u.pingedLanes&=~h,N&&(u.warmLanes|=h),N=u.expirationTimes;for(var A=h;0<A;){var R=31-fe(A),Z=1<<R;N[R]=-1,A&=~Z}m!==0&&Tt(u,m,h)}function Hp(){return(rr&6)===0?(Ch(0),!1):!0}function yx(){if(Sn!==null){if(ar===0)var u=Sn.return;else u=Sn,he=rl=null,gp(u),ra=null,ai=0,u=Sn;for(;u!==null;)r1(u.alternate,u),u=u.return;Sn=null}}function Ou(u,h){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,N_(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),yx(),vr=u,Sn=m=za(u.current,null),Fn=h,ar=0,Ci=null,hl=!1,Tu=Xe(u,h),ux=!1,ku=es=dx=hc=fl=Ur=0,oi=jh=null,hx=!1,(h&8)!==0&&(h|=h&32);var N=u.entangledLanes;if(N!==0)for(u=u.entanglements,N&=h;0<N;){var A=31-fe(N),R=1<<A;h|=u[A],N&=~R}return To=h,Hl(),m}function b1(u,h){yn=null,z.H=sh,h===qa||h===fp?(h=T0(),ar=3):h===_0?(h=T0(),ar=4):ar=h===X0?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Ci=h,Sn===null&&(Ur=1,dh(u,Ba(h,u.current)))}function j1(){var u=z.H;return z.H=sh,u===null?sh:u}function w1(){var u=z.A;return z.A=c_,u}function xx(){Ur=4,hl||(Fn&4194048)!==Fn&&Si.current!==null||(Tu=!0),(fl&134217727)===0&&(hc&134217727)===0||vr===null||gl(vr,Fn,es,!1)}function vx(u,h,m){var N=rr;rr|=2;var A=j1(),R=w1();(vr!==u||Fn!==h)&&(wh=null,Ou(u,h)),h=!1;var Z=Ur;e:do try{if(ar!==0&&Sn!==null){var pe=Sn,Oe=Ci;switch(ar){case 8:yx(),Z=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(h=!0);var Ze=ar;if(ar=0,Ci=null,Mu(u,pe,Oe,Ze),m&&Tu){Z=0;break e}break;default:Ze=ar,ar=0,Ci=null,Mu(u,pe,Oe,Ze)}}d_(),Z=Ur;break}catch(ut){b1(u,ut)}while(!0);return h&&u.shellSuspendCounter++,he=rl=null,rr=N,z.H=A,z.A=R,Sn===null&&(vr=null,Fn=0,Hl()),Z}function d_(){for(;Sn!==null;)bx(Sn)}function h_(u,h){var m=rr;rr|=2;var N=j1(),A=w1();vr!==u||Fn!==h?(wh=null,Au=ee()+500,Ou(u,h)):Tu=Xe(u,h);e:do try{if(ar!==0&&Sn!==null){h=Sn;var R=Ci;t:switch(ar){case 1:ar=0,Ci=null,Mu(u,h,R,1);break;case 2:case 9:if(C0(R)){ar=0,Ci=null,S1(h);break}h=function(){ar!==2&&ar!==9||vr!==u||(ar=7),Ws(u)},R.then(h,h);break e;case 3:ar=7;break e;case 4:ar=5;break e;case 7:C0(R)?(ar=0,Ci=null,S1(h)):(ar=0,Ci=null,Mu(u,h,R,7));break;case 5:var Z=null;switch(Sn.tag){case 26:Z=Sn.memoizedState;case 5:case 27:var pe=Sn;if(!Z||oa(Z)){ar=0,Ci=null;var Oe=pe.sibling;if(Oe!==null)Sn=Oe;else{var Ze=pe.return;Ze!==null?(Sn=Ze,Gp(Ze)):Sn=null}break t}}ar=0,Ci=null,Mu(u,h,R,5);break;case 6:ar=0,Ci=null,Mu(u,h,R,6);break;case 8:yx(),Ur=6;break e;default:throw Error(a(462))}}N1();break}catch(ut){b1(u,ut)}while(!0);return he=rl=null,z.H=N,z.A=A,rr=m,Sn!==null?0:(vr=null,Fn=0,Hl(),Ur)}function N1(){for(;Sn!==null&&!ae();)bx(Sn)}function bx(u){var h=Fp(u.alternate,u,To);u.memoizedProps=u.pendingProps,h===null?Gp(u):Sn=h}function S1(u){var h=u,m=h.alternate;switch(h.tag){case 15:case 0:h=Rp(m,h,h.pendingProps,h.type,void 0,Fn);break;case 11:h=Rp(m,h,h.pendingProps,h.type.render,h.ref,Fn);break;case 5:gp(h);default:r1(m,h),h=Sn=$d(h,To),h=Fp(m,h,To)}u.memoizedProps=u.pendingProps,h===null?Gp(u):Sn=h}function Mu(u,h,m,N){he=rl=null,gp(h),ra=null,ai=0;var A=h.return;try{if(Q0(u,A,h,m,Fn)){Ur=1,dh(u,Ba(m,u.current)),Sn=null;return}}catch(R){if(A!==null)throw Sn=A,R;Ur=1,dh(u,Ba(m,u.current)),Sn=null;return}h.flags&32768?(kn||N===1?u=!0:Tu||(Fn&536870912)!==0?u=!1:(hl=u=!0,(N===2||N===9||N===3||N===6)&&(N=Si.current,N!==null&&N.tag===13&&(N.flags|=16384))),_1(h,u)):Gp(h)}function Gp(u){var h=u;do{if((h.flags&32768)!==0){_1(h,hl);return}u=h.return;var m=t1(h.alternate,h,To);if(m!==null){Sn=m;return}if(h=h.sibling,h!==null){Sn=h;return}Sn=h=u}while(h!==null);Ur===0&&(Ur=5)}function _1(u,h){do{var m=n1(u.alternate,u);if(m!==null){m.flags&=32767,Sn=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(u=u.sibling,u!==null)){Sn=u;return}Sn=u=m}while(u!==null);Ur=6,Sn=null}function Nh(u,h,m,N,A,R,Z,pe,Oe){u.cancelPendingCommit=null;do Wp();while(ja!==0);if((rr&6)!==0)throw Error(a(327));if(h!==null){if(h===u.current)throw Error(a(177));if(R=h.lanes|h.childLanes,R|=wy,ot(u,m,R,Z,pe,Oe),u===vr&&(Sn=vr=null,Fn=0),Eu=h,ml=u,Pu=m,px=R,mx=A,g1=N,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,O1(xe,function(){return E1(),null})):(u.callbackNode=null,u.callbackPriority=0),N=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||N){N=z.T,z.T=null,A=G.p,G.p=2,Z=rr,rr|=4;try{o_(u,h,m)}finally{rr=Z,G.p=A,z.T=N}}ja=1,C1(),T1(),k1()}}function C1(){if(ja===1){ja=0;var u=ml,h=Eu,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=z.T,z.T=null;var N=G.p;G.p=2;var A=rr;rr|=4;try{sx(h,u);var R=em,Z=g0(u.containerInfo),pe=R.focusedElem,Oe=R.selectionRange;if(Z!==pe&&pe&&pe.ownerDocument&&m0(pe.ownerDocument.documentElement,pe)){if(Oe!==null&&by(pe)){var Ze=Oe.start,ut=Oe.end;if(ut===void 0&&(ut=Ze),"selectionStart"in pe)pe.selectionStart=Ze,pe.selectionEnd=Math.min(ut,pe.value.length);else{var pt=pe.ownerDocument||document,nt=pt&&pt.defaultView||window;if(nt.getSelection){var et=nt.getSelection(),Kt=pe.textContent.length,Wt=Math.min(Oe.start,Kt),cr=Oe.end===void 0?Wt:Math.min(Oe.end,Kt);!et.extend&&Wt>cr&&(Z=cr,cr=Wt,Wt=Z);var Ge=vy(pe,Wt),qe=vy(pe,cr);if(Ge&&qe&&(et.rangeCount!==1||et.anchorNode!==Ge.node||et.anchorOffset!==Ge.offset||et.focusNode!==qe.node||et.focusOffset!==qe.offset)){var Qe=pt.createRange();Qe.setStart(Ge.node,Ge.offset),et.removeAllRanges(),Wt>cr?(et.addRange(Qe),et.extend(qe.node,qe.offset)):(Qe.setEnd(qe.node,qe.offset),et.addRange(Qe))}}}}for(pt=[],et=pe;et=et.parentNode;)et.nodeType===1&&pt.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof pe.focus=="function"&&pe.focus(),pe=0;pe<pt.length;pe++){var ht=pt[pe];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}om=!!js,em=js=null}finally{rr=A,G.p=N,z.T=m}}u.current=h,ja=2}}function T1(){if(ja===2){ja=0;var u=ml,h=Eu,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=z.T,z.T=null;var N=G.p;G.p=2;var A=rr;rr|=4;try{s1(u,h.alternate,h)}finally{rr=A,G.p=N,z.T=m}}ja=3}}function k1(){if(ja===4||ja===3){ja=0,ue();var u=ml,h=Eu,m=Pu,N=g1;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?ja=5:(ja=0,Eu=ml=null,A1(u,u.pendingLanes));var A=u.pendingLanes;if(A===0&&(pl=null),kt(m),h=h.stateNode,ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(Q,h,void 0,(h.current.flags&128)===128)}catch{}if(N!==null){h=z.T,A=G.p,G.p=2,z.T=null;try{for(var R=u.onRecoverableError,Z=0;Z<N.length;Z++){var pe=N[Z];R(pe.value,{componentStack:pe.stack})}}finally{z.T=h,G.p=A}}(Pu&3)!==0&&Wp(),Ws(u),A=u.pendingLanes,(m&4194090)!==0&&(A&42)!==0?u===gx?Du++:(Du=0,gx=u):Du=0,Ch(0)}}function A1(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,Hd(h)))}function Wp(u){return C1(),T1(),k1(),E1()}function E1(){if(ja!==5)return!1;var u=ml,h=px;px=0;var m=kt(Pu),N=z.T,A=G.p;try{G.p=32>m?32:m,z.T=null,m=mx,mx=null;var R=ml,Z=Pu;if(ja=0,Eu=ml=null,Pu=0,(rr&6)!==0)throw Error(a(331));var pe=rr;if(rr|=4,p1(R.current),d1(R,R.current,Z,m),rr=pe,Ch(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(Q,R)}catch{}return!0}finally{G.p=A,z.T=N,A1(u,h)}}function P1(u,h,m){h=Ba(m,h),h=Dp(u.stateNode,h,2),u=yo(u,h,2),u!==null&&(ke(u,2),Ws(u))}function yr(u,h,m){if(u.tag===3)P1(u,u,m);else for(;h!==null;){if(h.tag===3){P1(h,u,m);break}else if(h.tag===1){var N=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(pl===null||!pl.has(N))){u=Ba(m,u),m=Zy(2),N=yo(h,m,2),N!==null&&(Y0(m,N,h,u),ke(N,2),Ws(N));break}}h=h.return}}function jx(u,h,m){var N=u.pingCache;if(N===null){N=u.pingCache=new cx;var A=new Set;N.set(h,A)}else A=N.get(h),A===void 0&&(A=new Set,N.set(h,A));A.has(m)||(ux=!0,A.add(m),u=f_.bind(null,u,h,m),h.then(u,u))}function f_(u,h,m){var N=u.pingCache;N!==null&&N.delete(h),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,vr===u&&(Fn&m)===m&&(Ur===4||Ur===3&&(Fn&62914560)===Fn&&300>ee()-fx?(rr&2)===0&&Ou(u,0):dx|=m,ku===Fn&&(ku=0)),Ws(u)}function D1(u,h){h===0&&(h=Ct()),u=Gl(u,h),u!==null&&(ke(u,h),Ws(u))}function Kp(u){var h=u.memoizedState,m=0;h!==null&&(m=h.retryLane),D1(u,m)}function p_(u,h){var m=0;switch(u.tag){case 13:var N=u.stateNode,A=u.memoizedState;A!==null&&(m=A.retryLane);break;case 19:N=u.stateNode;break;case 22:N=u.stateNode._retryCache;break;default:throw Error(a(314))}N!==null&&N.delete(h),D1(u,m)}function O1(u,h){return le(u,h)}var Sh=null,yl=null,Yp=!1,_h=!1,Qp=!1,xl=0;function Ws(u){u!==yl&&u.next===null&&(yl===null?Sh=yl=u:yl=yl.next=u),_h=!0,Yp||(Yp=!0,wx())}function Ch(u,h){if(!Qp&&_h){Qp=!0;do for(var m=!1,N=Sh;N!==null;){if(u!==0){var A=N.pendingLanes;if(A===0)var R=0;else{var Z=N.suspendedLanes,pe=N.pingedLanes;R=(1<<31-fe(42|u)+1)-1,R&=A&~(Z&~pe),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(m=!0,I1(N,R))}else R=Fn,R=we(N,N===vr?R:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(R&3)===0||Xe(N,R)||(m=!0,I1(N,R));N=N.next}while(m);Qp=!1}}function m_(){Th()}function Th(){_h=Yp=!1;var u=0;xl!==0&&(w_()&&(u=xl),xl=0);for(var h=ee(),m=null,N=Sh;N!==null;){var A=N.next,R=kh(N,h);R===0?(N.next=null,m===null?Sh=A:m.next=A,A===null&&(yl=m)):(m=N,(u!==0||(R&3)!==0)&&(_h=!0)),N=A}Ch(u)}function kh(u,h){for(var m=u.suspendedLanes,N=u.pingedLanes,A=u.expirationTimes,R=u.pendingLanes&-62914561;0<R;){var Z=31-fe(R),pe=1<<Z,Oe=A[Z];Oe===-1?((pe&m)===0||(pe&N)!==0)&&(A[Z]=Je(pe,h)):Oe<=h&&(u.expiredLanes|=pe),R&=~pe}if(h=vr,m=Fn,m=we(u,u===h?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N=u.callbackNode,m===0||u===h&&(ar===2||ar===9)||u.cancelPendingCommit!==null)return N!==null&&N!==null&&J(N),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||Xe(u,m)){if(h=m&-m,h===u.callbackPriority)return h;switch(N!==null&&J(N),kt(m)){case 2:case 8:m=Fe;break;case 32:m=xe;break;case 268435456:m=oe;break;default:m=xe}return N=M1.bind(null,u),m=le(m,N),u.callbackPriority=h,u.callbackNode=m,h}return N!==null&&N!==null&&J(N),u.callbackPriority=2,u.callbackNode=null,2}function M1(u,h){if(ja!==0&&ja!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(Wp()&&u.callbackNode!==m)return null;var N=Fn;return N=we(u,u===vr?N:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N===0?null:(x1(u,N,h),kh(u,ee()),u.callbackNode!=null&&u.callbackNode===m?M1.bind(null,u):null)}function I1(u,h){if(Wp())return null;x1(u,h,!0)}function wx(){S_(function(){(rr&6)!==0?le(Te,m_):Th()})}function Xp(){return xl===0&&(xl=ct()),xl}function R1(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Ed(""+u)}function L1(u,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,u.id&&m.setAttribute("form",u.id),h.parentNode.insertBefore(m,h),u=new FormData(u),m.parentNode.removeChild(m),u}function g_(u,h,m,N,A){if(h==="submit"&&m&&m.stateNode===A){var R=R1((A[ln]||null).action),Z=N.submitter;Z&&(h=(h=Z[ln]||null)?R1(h.formAction):Z.getAttribute("formAction"),h!==null&&(R=h,Z=null));var pe=new Wf("action","action",null,N,A);u.push({event:pe,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(xl!==0){var Oe=Z?L1(A,Z):new FormData(A);ah(m,{pending:!0,data:Oe,method:A.method,action:R},null,Oe)}}else typeof R=="function"&&(pe.preventDefault(),Oe=Z?L1(A,Z):new FormData(A),ah(m,{pending:!0,data:Oe,method:A.method,action:R},R,Oe))},currentTarget:A}]})}}for(var Nx=0;Nx<Yn.length;Nx++){var Sx=Yn[Nx],y_=Sx.toLowerCase(),x_=Sx[0].toUpperCase()+Sx.slice(1);ps(y_,"on"+x_)}ps(ip,"onAnimationEnd"),ps(y0,"onAnimationIteration"),ps(ji,"onAnimationStart"),ps("dblclick","onDoubleClick"),ps("focusin","onFocus"),ps("focusout","onBlur"),ps(sp,"onTransitionRun"),ps(e_,"onTransitionStart"),ps(lu,"onTransitionCancel"),ps(Id,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ah="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ah));function F1(u,h){h=(h&4)!==0;for(var m=0;m<u.length;m++){var N=u[m],A=N.event;N=N.listeners;e:{var R=void 0;if(h)for(var Z=N.length-1;0<=Z;Z--){var pe=N[Z],Oe=pe.instance,Ze=pe.currentTarget;if(pe=pe.listener,Oe!==R&&A.isPropagationStopped())break e;R=pe,A.currentTarget=Ze;try{R(A)}catch(ut){cc(ut)}A.currentTarget=null,R=Oe}else for(Z=0;Z<N.length;Z++){if(pe=N[Z],Oe=pe.instance,Ze=pe.currentTarget,pe=pe.listener,Oe!==R&&A.isPropagationStopped())break e;R=pe,A.currentTarget=Ze;try{R(A)}catch(ut){cc(ut)}A.currentTarget=null,R=Oe}}}}function _n(u,h){var m=h[Tn];m===void 0&&(m=h[Tn]=new Set);var N=u+"__bubble";m.has(N)||($1(h,u,2,!1),m.add(N))}function _x(u,h,m){var N=0;h&&(N|=4),$1(m,u,N,h)}var li="_reactListening"+Math.random().toString(36).slice(2);function Cx(u){if(!u[li]){u[li]=!0,Nn.forEach(function(m){m!=="selectionchange"&&(v_.has(m)||_x(m,!1,u),_x(m,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[li]||(h[li]=!0,_x("selectionchange",!1,h))}}function $1(u,h,m,N){switch(aj(h)){case 2:var A=L_;break;case 8:A=zu;break;default:A=Rx}m=A.bind(null,h,m,u),A=void 0,!Dd||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(A=!0),N?A!==void 0?u.addEventListener(h,m,{capture:!0,passive:A}):u.addEventListener(h,m,!0):A!==void 0?u.addEventListener(h,m,{passive:A}):u.addEventListener(h,m,!1)}function ko(u,h,m,N,A){var R=N;if((h&1)===0&&(h&2)===0&&N!==null)e:for(;;){if(N===null)return;var Z=N.tag;if(Z===3||Z===4){var pe=N.stateNode.containerInfo;if(pe===A)break;if(Z===4)for(Z=N.return;Z!==null;){var Oe=Z.tag;if((Oe===3||Oe===4)&&Z.stateNode.containerInfo===A)return;Z=Z.return}for(;pe!==null;){if(Z=Rn(pe),Z===null)return;if(Oe=Z.tag,Oe===5||Oe===6||Oe===26||Oe===27){N=R=Z;continue e}pe=pe.parentNode}}N=N.return}Qb(function(){var Ze=R,ut=oy(m),pt=[];e:{var nt=Rd.get(u);if(nt!==void 0){var et=Wf,Kt=u;switch(u){case"keypress":if(or(m)===0)break e;case"keydown":case"keyup":et=fy;break;case"focusin":Kt="focus",et=Yf;break;case"focusout":Kt="blur",et=Yf;break;case"beforeblur":case"afterblur":et=Yf;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=hy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=HS;break;case ip:case y0:case ji:et=t0;break;case Id:et=GS;break;case"scroll":case"scrollend":et=qS;break;case"wheel":et=KS;break;case"copy":case"cut":case"paste":et=r0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=fo;break;case"toggle":case"beforetoggle":et=Xf}var Wt=(h&4)!==0,cr=!Wt&&(u==="scroll"||u==="scrollend"),Ge=Wt?nt!==null?nt+"Capture":null:nt;Wt=[];for(var qe=Ze,Qe;qe!==null;){var ht=qe;if(Qe=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Qe===null||Ge===null||(ht=Pd(qe,Ge),ht!=null&&Wt.push(sn(qe,ht,Qe))),cr)break;qe=qe.return}0<Wt.length&&(nt=new et(nt,Kt,null,m,ut),pt.push({event:nt,listeners:Wt}))}}if((h&7)===0){e:{if(nt=u==="mouseover"||u==="pointerover",et=u==="mouseout"||u==="pointerout",nt&&m!==Hf&&(Kt=m.relatedTarget||m.fromElement)&&(Rn(Kt)||Kt[er]))break e;if((et||nt)&&(nt=ut.window===ut?ut:(nt=ut.ownerDocument)?nt.defaultView||nt.parentWindow:window,et?(Kt=m.relatedTarget||m.toElement,et=Ze,Kt=Kt?Rn(Kt):null,Kt!==null&&(cr=s(Kt),Wt=Kt.tag,Kt!==cr||Wt!==5&&Wt!==27&&Wt!==6)&&(Kt=null)):(et=null,Kt=Ze),et!==Kt)){if(Wt=Qo,ht="onMouseLeave",Ge="onMouseEnter",qe="mouse",(u==="pointerout"||u==="pointerover")&&(Wt=fo,ht="onPointerLeave",Ge="onPointerEnter",qe="pointer"),cr=et==null?nt:gt(et),Qe=Kt==null?nt:gt(Kt),nt=new Wt(ht,qe+"leave",et,m,ut),nt.target=cr,nt.relatedTarget=Qe,ht=null,Rn(ut)===Ze&&(Wt=new Wt(Ge,qe+"enter",Kt,m,ut),Wt.target=Qe,Wt.relatedTarget=cr,ht=Wt),cr=ht,et&&Kt)t:{for(Wt=et,Ge=Kt,qe=0,Qe=Wt;Qe;Qe=ia(Qe))qe++;for(Qe=0,ht=Ge;ht;ht=ia(ht))Qe++;for(;0<qe-Qe;)Wt=ia(Wt),qe--;for(;0<Qe-qe;)Ge=ia(Ge),Qe--;for(;qe--;){if(Wt===Ge||Ge!==null&&Wt===Ge.alternate)break t;Wt=ia(Wt),Ge=ia(Ge)}Wt=null}else Wt=null;et!==null&&Vr(pt,nt,et,Wt,!1),Kt!==null&&cr!==null&&Vr(pt,cr,Kt,Wt,!0)}}e:{if(nt=Ze?gt(Ze):window,et=nt.nodeName&&nt.nodeName.toLowerCase(),et==="select"||et==="input"&&nt.type==="file")var Mt=u0;else if(tp(nt))if(d0)Mt=XS;else{Mt=Zo;var bn=p0}else et=nt.nodeName,!et||et.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?Ze&&sy(Ze.elementType)&&(Mt=u0):Mt=ap;if(Mt&&(Mt=Mt(u,Ze))){au(pt,Mt,m,ut);break e}bn&&bn(u,nt,Ze),u==="focusout"&&Ze&&nt.type==="number"&&Ze.memoizedProps.value!=null&&Ad(nt,"number",nt.value)}switch(bn=Ze?gt(Ze):window,u){case"focusin":(tp(bn)||bn.contentEditable==="true")&&(ou=bn,el=Ze,He=null);break;case"focusout":He=el=ou=null;break;case"mousedown":st=!0;break;case"contextmenu":case"mouseup":case"dragend":st=!1,rt(pt,m,ut);break;case"selectionchange":if(ZS)break;case"keydown":case"keyup":rt(pt,m,ut)}var Bt;if(gy)e:{switch(u){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Xo?l0(u,m)&&(Yt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Yt="onCompositionStart");Yt&&(Jf&&m.locale!=="ko"&&(Xo||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Xo&&(Bt=Xb()):(Yo=ut,uy="value"in Yo?Yo.value:Yo.textContent,Xo=!0)),bn=Jp(Ze,Yt),0<bn.length&&(Yt=new Xa(Yt,u,null,m,ut),pt.push({event:Yt,listeners:bn}),Bt?Yt.data=Bt:(Bt=ep(m),Bt!==null&&(Yt.data=Bt)))),(Bt=o0?YS(u,m):c0(u,m))&&(Yt=Jp(Ze,"onBeforeInput"),0<Yt.length&&(bn=new Xa("onBeforeInput","beforeinput",null,m,ut),pt.push({event:bn,listeners:Yt}),bn.data=Bt)),g_(pt,u,Ze,m,ut)}F1(pt,h)})}function sn(u,h,m){return{instance:u,listener:h,currentTarget:m}}function Jp(u,h){for(var m=h+"Capture",N=[];u!==null;){var A=u,R=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||R===null||(A=Pd(u,m),A!=null&&N.unshift(sn(u,A,R)),A=Pd(u,h),A!=null&&N.push(sn(u,A,R))),u.tag===3)return N;u=u.return}return[]}function ia(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function Vr(u,h,m,N,A){for(var R=h._reactName,Z=[];m!==null&&m!==N;){var pe=m,Oe=pe.alternate,Ze=pe.stateNode;if(pe=pe.tag,Oe!==null&&Oe===N)break;pe!==5&&pe!==26&&pe!==27||Ze===null||(Oe=Ze,A?(Ze=Pd(m,R),Ze!=null&&Z.unshift(sn(m,Ze,Oe))):A||(Ze=Pd(m,R),Ze!=null&&Z.push(sn(m,Ze,Oe)))),m=m.return}Z.length!==0&&u.push({event:h,listeners:Z})}var b_=/\r\n?/g,vl=/\u0000|\uFFFD/g;function B1(u){return(typeof u=="string"?u:""+u).replace(b_,`
`).replace(vl,"")}function z1(u,h){return h=B1(h),B1(u)===h}function Zp(){}function lr(u,h,m,N,A,R){switch(m){case"children":typeof N=="string"?h==="body"||h==="textarea"&&N===""||Ko(u,N):(typeof N=="number"||typeof N=="bigint")&&h!=="body"&&Ko(u,""+N);break;case"className":Bf(u,"class",N);break;case"tabIndex":Bf(u,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":Bf(u,m,N);break;case"style":iy(u,N,R);break;case"data":if(h!=="object"){Bf(u,"data",N);break}case"src":case"href":if(N===""&&(h!=="a"||m!=="href")){u.removeAttribute(m);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(m);break}N=Ed(""+N),u.setAttribute(m,N);break;case"action":case"formAction":if(typeof N=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(m==="formAction"?(h!=="input"&&lr(u,h,"name",A.name,A,null),lr(u,h,"formEncType",A.formEncType,A,null),lr(u,h,"formMethod",A.formMethod,A,null),lr(u,h,"formTarget",A.formTarget,A,null)):(lr(u,h,"encType",A.encType,A,null),lr(u,h,"method",A.method,A,null),lr(u,h,"target",A.target,A,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(m);break}N=Ed(""+N),u.setAttribute(m,N);break;case"onClick":N!=null&&(u.onclick=Zp);break;case"onScroll":N!=null&&_n("scroll",u);break;case"onScrollEnd":N!=null&&_n("scrollend",u);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(a(61));if(m=N.__html,m!=null){if(A.children!=null)throw Error(a(60));u.innerHTML=m}}break;case"multiple":u.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":u.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){u.removeAttribute("xlink:href");break}m=Ed(""+N),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,""+N):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":N===!0?u.setAttribute(m,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,N):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?u.setAttribute(m,N):u.removeAttribute(m);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?u.removeAttribute(m):u.setAttribute(m,N);break;case"popover":_n("beforetoggle",u),_n("toggle",u),$f(u,"popover",N);break;case"xlinkActuate":Ls(u,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":Ls(u,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":Ls(u,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":Ls(u,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":Ls(u,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":Ls(u,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":Ls(u,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":Ls(u,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":Ls(u,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":$f(u,"is",N);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Kb.get(m)||m,$f(u,m,N))}}function Tx(u,h,m,N,A,R){switch(m){case"style":iy(u,N,R);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(a(61));if(m=N.__html,m!=null){if(A.children!=null)throw Error(a(60));u.innerHTML=m}}break;case"children":typeof N=="string"?Ko(u,N):(typeof N=="number"||typeof N=="bigint")&&Ko(u,""+N);break;case"onScroll":N!=null&&_n("scroll",u);break;case"onScrollEnd":N!=null&&_n("scrollend",u);break;case"onClick":N!=null&&(u.onclick=Zp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ln.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),h=m.slice(2,A?m.length-7:void 0),R=u[ln]||null,R=R!=null?R[m]:null,typeof R=="function"&&u.removeEventListener(h,R,A),typeof N=="function")){typeof R!="function"&&R!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(h,N,A);break e}m in u?u[m]=N:N===!0?u.setAttribute(m,""):$f(u,m,N)}}}function sa(u,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",u),_n("load",u);var N=!1,A=!1,R;for(R in m)if(m.hasOwnProperty(R)){var Z=m[R];if(Z!=null)switch(R){case"src":N=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:lr(u,h,R,Z,m,null)}}A&&lr(u,h,"srcSet",m.srcSet,m,null),N&&lr(u,h,"src",m.src,m,null);return;case"input":_n("invalid",u);var pe=R=Z=A=null,Oe=null,Ze=null;for(N in m)if(m.hasOwnProperty(N)){var ut=m[N];if(ut!=null)switch(N){case"name":A=ut;break;case"type":Z=ut;break;case"checked":Oe=ut;break;case"defaultChecked":Ze=ut;break;case"value":R=ut;break;case"defaultValue":pe=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(a(137,h));break;default:lr(u,h,N,ut,m,null)}}ny(u,R,pe,Oe,Ze,Z,A,!1),qf(u);return;case"select":_n("invalid",u),N=Z=R=null;for(A in m)if(m.hasOwnProperty(A)&&(pe=m[A],pe!=null))switch(A){case"value":R=pe;break;case"defaultValue":Z=pe;break;case"multiple":N=pe;default:lr(u,h,A,pe,m,null)}h=R,m=Z,u.multiple=!!N,h!=null?Xc(u,!!N,h,!1):m!=null&&Xc(u,!!N,m,!0);return;case"textarea":_n("invalid",u),R=A=N=null;for(Z in m)if(m.hasOwnProperty(Z)&&(pe=m[Z],pe!=null))switch(Z){case"value":N=pe;break;case"defaultValue":A=pe;break;case"children":R=pe;break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(91));break;default:lr(u,h,Z,pe,m,null)}Vf(u,N,A,R),qf(u);return;case"option":for(Oe in m)if(m.hasOwnProperty(Oe)&&(N=m[Oe],N!=null))switch(Oe){case"selected":u.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:lr(u,h,Oe,N,m,null)}return;case"dialog":_n("beforetoggle",u),_n("toggle",u),_n("cancel",u),_n("close",u);break;case"iframe":case"object":_n("load",u);break;case"video":case"audio":for(N=0;N<Ah.length;N++)_n(Ah[N],u);break;case"image":_n("error",u),_n("load",u);break;case"details":_n("toggle",u);break;case"embed":case"source":case"link":_n("error",u),_n("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ze in m)if(m.hasOwnProperty(Ze)&&(N=m[Ze],N!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:lr(u,h,Ze,N,m,null)}return;default:if(sy(h)){for(ut in m)m.hasOwnProperty(ut)&&(N=m[ut],N!==void 0&&Tx(u,h,ut,N,m,void 0));return}}for(pe in m)m.hasOwnProperty(pe)&&(N=m[pe],N!=null&&lr(u,h,pe,N,m,null))}function j_(u,h,m,N){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,R=null,Z=null,pe=null,Oe=null,Ze=null,ut=null;for(et in m){var pt=m[et];if(m.hasOwnProperty(et)&&pt!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":Oe=pt;default:N.hasOwnProperty(et)||lr(u,h,et,null,N,pt)}}for(var nt in N){var et=N[nt];if(pt=m[nt],N.hasOwnProperty(nt)&&(et!=null||pt!=null))switch(nt){case"type":R=et;break;case"name":A=et;break;case"checked":Ze=et;break;case"defaultChecked":ut=et;break;case"value":Z=et;break;case"defaultValue":pe=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(a(137,h));break;default:et!==pt&&lr(u,h,nt,et,N,pt)}}Uf(u,Z,pe,Oe,Ze,ut,R,A);return;case"select":et=Z=pe=nt=null;for(R in m)if(Oe=m[R],m.hasOwnProperty(R)&&Oe!=null)switch(R){case"value":break;case"multiple":et=Oe;default:N.hasOwnProperty(R)||lr(u,h,R,null,N,Oe)}for(A in N)if(R=N[A],Oe=m[A],N.hasOwnProperty(A)&&(R!=null||Oe!=null))switch(A){case"value":nt=R;break;case"defaultValue":pe=R;break;case"multiple":Z=R;default:R!==Oe&&lr(u,h,A,R,N,Oe)}h=pe,m=Z,N=et,nt!=null?Xc(u,!!m,nt,!1):!!N!=!!m&&(h!=null?Xc(u,!!m,h,!0):Xc(u,!!m,m?[]:"",!1));return;case"textarea":et=nt=null;for(pe in m)if(A=m[pe],m.hasOwnProperty(pe)&&A!=null&&!N.hasOwnProperty(pe))switch(pe){case"value":break;case"children":break;default:lr(u,h,pe,null,N,A)}for(Z in N)if(A=N[Z],R=m[Z],N.hasOwnProperty(Z)&&(A!=null||R!=null))switch(Z){case"value":nt=A;break;case"defaultValue":et=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:A!==R&&lr(u,h,Z,A,N,R)}ry(u,nt,et);return;case"option":for(var Kt in m)if(nt=m[Kt],m.hasOwnProperty(Kt)&&nt!=null&&!N.hasOwnProperty(Kt))switch(Kt){case"selected":u.selected=!1;break;default:lr(u,h,Kt,null,N,nt)}for(Oe in N)if(nt=N[Oe],et=m[Oe],N.hasOwnProperty(Oe)&&nt!==et&&(nt!=null||et!=null))switch(Oe){case"selected":u.selected=nt&&typeof nt!="function"&&typeof nt!="symbol";break;default:lr(u,h,Oe,nt,N,et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in m)nt=m[Wt],m.hasOwnProperty(Wt)&&nt!=null&&!N.hasOwnProperty(Wt)&&lr(u,h,Wt,null,N,nt);for(Ze in N)if(nt=N[Ze],et=m[Ze],N.hasOwnProperty(Ze)&&nt!==et&&(nt!=null||et!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(a(137,h));break;default:lr(u,h,Ze,nt,N,et)}return;default:if(sy(h)){for(var cr in m)nt=m[cr],m.hasOwnProperty(cr)&&nt!==void 0&&!N.hasOwnProperty(cr)&&Tx(u,h,cr,void 0,N,nt);for(ut in N)nt=N[ut],et=m[ut],!N.hasOwnProperty(ut)||nt===et||nt===void 0&&et===void 0||Tx(u,h,ut,nt,N,et);return}}for(var Ge in m)nt=m[Ge],m.hasOwnProperty(Ge)&&nt!=null&&!N.hasOwnProperty(Ge)&&lr(u,h,Ge,null,N,nt);for(pt in N)nt=N[pt],et=m[pt],!N.hasOwnProperty(pt)||nt===et||nt==null&&et==null||lr(u,h,pt,nt,N,et)}var js=null,em=null;function fc(u){return u.nodeType===9?u:u.ownerDocument}function Dr(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lr(u,h){if(u===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&h==="foreignObject"?0:u}function tm(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var kx=null;function w_(){var u=window.event;return u&&u.type==="popstate"?u===kx?!1:(kx=u,!0):(kx=null,!1)}var q1=typeof setTimeout=="function"?setTimeout:void 0,N_=typeof clearTimeout=="function"?clearTimeout:void 0,U1=typeof Promise=="function"?Promise:void 0,S_=typeof queueMicrotask=="function"?queueMicrotask:typeof U1<"u"?function(u){return U1.resolve(null).then(u).catch(V1)}:q1;function V1(u){setTimeout(function(){throw u})}function ts(u){return u==="head"}function nm(u,h){var m=h,N=0,A=0;do{var R=m.nextSibling;if(u.removeChild(m),R&&R.nodeType===8)if(m=R.data,m==="/$"){if(0<N&&8>N){m=N;var Z=u.ownerDocument;if(m&1&&Eh(Z.documentElement),m&2&&Eh(Z.body),m&4)for(m=Z.head,Eh(m),Z=m.firstChild;Z;){var pe=Z.nextSibling,Oe=Z.nodeName;Z[Aa]||Oe==="SCRIPT"||Oe==="STYLE"||Oe==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||m.removeChild(Z),Z=pe}}if(A===0){u.removeChild(R),Fh(h);return}A--}else m==="$"||m==="$?"||m==="$!"?A++:N=m.charCodeAt(0)-48;else N=0;m=R}while(m);Fh(h)}function Ax(u){var h=u.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Ax(m),zi(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function H1(u,h,m,N){for(;u.nodeType===1;){var A=m;if(u.nodeName.toLowerCase()!==h.toLowerCase()){if(!N&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(N){if(!u[Aa])switch(h){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(R=u.getAttribute("rel"),R==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(R!==A.rel||u.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||u.getAttribute("title")!==(A.title==null?null:A.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(R=u.getAttribute("src"),(R!==(A.src==null?null:A.src)||u.getAttribute("type")!==(A.type==null?null:A.type)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&R&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(h==="input"&&u.type==="hidden"){var R=A.name==null?null:""+A.name;if(A.type==="hidden"&&u.getAttribute("name")===R)return u}else return u;if(u=ws(u.nextSibling),u===null)break}return null}function rm(u,h,m){if(h==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=ws(u.nextSibling),u===null))return null;return u}function Ha(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function Iu(u,h){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")h();else{var N=function(){h(),m.removeEventListener("DOMContentLoaded",N)};m.addEventListener("DOMContentLoaded",N),u._reactRetry=N}}function ws(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return u}var Ex=null;function G1(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return u;h--}else m==="/$"&&h++}u=u.previousSibling}return null}function W1(u,h,m){switch(h=fc(m),u){case"html":if(u=h.documentElement,!u)throw Error(a(452));return u;case"head":if(u=h.head,!u)throw Error(a(453));return u;case"body":if(u=h.body,!u)throw Error(a(454));return u;default:throw Error(a(451))}}function Eh(u){for(var h=u.attributes;h.length;)u.removeAttributeNode(h[0]);zi(u)}var ki=new Map,Ks=new Set;function dn(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Ys=G.d;G.d={f:ns,r:K1,D:__,C:Y1,L:am,m:C_,X:k_,S:T_,M:A_};function ns(){var u=Ys.f(),h=Hp();return u||h}function K1(u){var h=tt(u);h!==null&&h.tag===5&&h.type==="form"?kp(h):Ys.r(u)}var Ru=typeof document>"u"?null:document;function Qn(u,h,m){var N=Ru;if(N&&typeof h=="string"&&h){var A=qi(h);A='link[rel="'+u+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),Ks.has(A)||(Ks.add(A),u={rel:u,crossOrigin:m,href:h},N.querySelector(A)===null&&(h=N.createElement("link"),sa(h,"link",u),Ot(h),N.head.appendChild(h)))}}function __(u){Ys.D(u),Qn("dns-prefetch",u,null)}function Y1(u,h){Ys.C(u,h),Qn("preconnect",u,h)}function am(u,h,m){Ys.L(u,h,m);var N=Ru;if(N&&u&&h){var A='link[rel="preload"][as="'+qi(h)+'"]';h==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+qi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+qi(m.imageSizes)+'"]')):A+='[href="'+qi(u)+'"]';var R=A;switch(h){case"style":R=Lu(u);break;case"script":R=Fu(u)}ki.has(R)||(u=f({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:u,as:h},m),ki.set(R,u),N.querySelector(A)!==null||h==="style"&&N.querySelector(Ph(R))||h==="script"&&N.querySelector(Dh(R))||(h=N.createElement("link"),sa(h,"link",u),Ot(h),N.head.appendChild(h)))}}function C_(u,h){Ys.m(u,h);var m=Ru;if(m&&u){var N=h&&typeof h.as=="string"?h.as:"script",A='link[rel="modulepreload"][as="'+qi(N)+'"][href="'+qi(u)+'"]',R=A;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=Fu(u)}if(!ki.has(R)&&(u=f({rel:"modulepreload",href:u},h),ki.set(R,u),m.querySelector(A)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Dh(R)))return}N=m.createElement("link"),sa(N,"link",u),Ot(N),m.head.appendChild(N)}}}function T_(u,h,m){Ys.S(u,h,m);var N=Ru;if(N&&u){var A=St(N).hoistableStyles,R=Lu(u);h=h||"default";var Z=A.get(R);if(!Z){var pe={loading:0,preload:null};if(Z=N.querySelector(Ph(R)))pe.loading=5;else{u=f({rel:"stylesheet",href:u,"data-precedence":h},m),(m=ki.get(R))&&Oh(u,m);var Oe=Z=N.createElement("link");Ot(Oe),sa(Oe,"link",u),Oe._p=new Promise(function(Ze,ut){Oe.onload=Ze,Oe.onerror=ut}),Oe.addEventListener("load",function(){pe.loading|=1}),Oe.addEventListener("error",function(){pe.loading|=2}),pe.loading|=4,im(Z,h,N)}Z={type:"stylesheet",instance:Z,count:1,state:pe},A.set(R,Z)}}}function k_(u,h){Ys.X(u,h);var m=Ru;if(m&&u){var N=St(m).hoistableScripts,A=Fu(u),R=N.get(A);R||(R=m.querySelector(Dh(A)),R||(u=f({src:u,async:!0},h),(h=ki.get(A))&&Px(u,h),R=m.createElement("script"),Ot(R),sa(R,"link",u),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},N.set(A,R))}}function A_(u,h){Ys.M(u,h);var m=Ru;if(m&&u){var N=St(m).hoistableScripts,A=Fu(u),R=N.get(A);R||(R=m.querySelector(Dh(A)),R||(u=f({src:u,async:!0,type:"module"},h),(h=ki.get(A))&&Px(u,h),R=m.createElement("script"),Ot(R),sa(R,"link",u),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},N.set(A,R))}}function Q1(u,h,m,N){var A=(A=ze.current)?dn(A):null;if(!A)throw Error(a(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Lu(m.href),m=St(A).hoistableStyles,N=m.get(h),N||(N={type:"style",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Lu(m.href);var R=St(A).hoistableStyles,Z=R.get(u);if(Z||(A=A.ownerDocument||A,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(u,Z),(R=A.querySelector(Ph(u)))&&!R._p&&(Z.instance=R,Z.state.loading=5),ki.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},ki.set(u,m),R||E_(A,u,m,Z.state))),h&&N===null)throw Error(a(528,""));return Z}if(h&&N!==null)throw Error(a(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Fu(m),m=St(A).hoistableScripts,N=m.get(h),N||(N={type:"script",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,u))}}function Lu(u){return'href="'+qi(u)+'"'}function Ph(u){return'link[rel="stylesheet"]['+u+"]"}function X1(u){return f({},u,{"data-precedence":u.precedence,precedence:null})}function E_(u,h,m,N){u.querySelector('link[rel="preload"][as="style"]['+h+"]")?N.loading=1:(h=u.createElement("link"),N.preload=h,h.addEventListener("load",function(){return N.loading|=1}),h.addEventListener("error",function(){return N.loading|=2}),sa(h,"link",m),Ot(h),u.head.appendChild(h))}function Fu(u){return'[src="'+qi(u)+'"]'}function Dh(u){return"script[async]"+u}function J1(u,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var N=u.querySelector('style[data-href~="'+qi(m.href)+'"]');if(N)return h.instance=N,Ot(N),N;var A=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return N=(u.ownerDocument||u).createElement("style"),Ot(N),sa(N,"style",A),im(N,m.precedence,u),h.instance=N;case"stylesheet":A=Lu(m.href);var R=u.querySelector(Ph(A));if(R)return h.state.loading|=4,h.instance=R,Ot(R),R;N=X1(m),(A=ki.get(A))&&Oh(N,A),R=(u.ownerDocument||u).createElement("link"),Ot(R);var Z=R;return Z._p=new Promise(function(pe,Oe){Z.onload=pe,Z.onerror=Oe}),sa(R,"link",N),h.state.loading|=4,im(R,m.precedence,u),h.instance=R;case"script":return R=Fu(m.src),(A=u.querySelector(Dh(R)))?(h.instance=A,Ot(A),A):(N=m,(A=ki.get(R))&&(N=f({},m),Px(N,A)),u=u.ownerDocument||u,A=u.createElement("script"),Ot(A),sa(A,"link",N),u.head.appendChild(A),h.instance=A);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(N=h.instance,h.state.loading|=4,im(N,m.precedence,u));return h.instance}function im(u,h,m){for(var N=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=N.length?N[N.length-1]:null,R=A,Z=0;Z<N.length;Z++){var pe=N[Z];if(pe.dataset.precedence===h)R=pe;else if(R!==A)break}R?R.parentNode.insertBefore(u,R.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(u,h.firstChild))}function Oh(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.title==null&&(u.title=h.title)}function Px(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.integrity==null&&(u.integrity=h.integrity)}var $u=null;function Z1(u,h,m){if($u===null){var N=new Map,A=$u=new Map;A.set(m,N)}else A=$u,N=A.get(m),N||(N=new Map,A.set(m,N));if(N.has(u))return N;for(N.set(u,null),m=m.getElementsByTagName(u),A=0;A<m.length;A++){var R=m[A];if(!(R[Aa]||R[Vt]||u==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=R.getAttribute(h)||"";Z=u+Z;var pe=N.get(Z);pe?pe.push(R):N.set(Z,[R])}}return N}function ej(u,h,m){u=u.ownerDocument||u,u.head.insertBefore(m,h==="title"?u.querySelector("head > title"):null)}function P_(u,h,m){if(m===1||h.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return u=h.disabled,typeof h.precedence=="string"&&u==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function oa(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var fa=null;function D_(){}function O_(u,h,m){if(fa===null)throw Error(a(475));var N=fa;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=Lu(m.href),R=u.querySelector(Ph(A));if(R){u=R._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(N.count++,N=Mh.bind(N),u.then(N,N)),h.state.loading|=4,h.instance=R,Ot(R);return}R=u.ownerDocument||u,m=X1(m),(A=ki.get(A))&&Oh(m,A),R=R.createElement("link"),Ot(R);var Z=R;Z._p=new Promise(function(pe,Oe){Z.onload=pe,Z.onerror=Oe}),sa(R,"link",m),h.instance=R}N.stylesheets===null&&(N.stylesheets=new Map),N.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(N.count++,h=Mh.bind(N),u.addEventListener("load",h),u.addEventListener("error",h))}}function M_(){if(fa===null)throw Error(a(475));var u=fa;return u.stylesheets&&u.count===0&&Dx(u,u.stylesheets),0<u.count?function(h){var m=setTimeout(function(){if(u.stylesheets&&Dx(u,u.stylesheets),u.unsuspend){var N=u.unsuspend;u.unsuspend=null,N()}},6e4);return u.unsuspend=h,function(){u.unsuspend=null,clearTimeout(m)}}:null}function Mh(){if(this.count--,this.count===0){if(this.stylesheets)Dx(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var sm=null;function Dx(u,h){u.stylesheets=null,u.unsuspend!==null&&(u.count++,sm=new Map,h.forEach(I_,u),sm=null,Mh.call(u))}function I_(u,h){if(!(h.state.loading&4)){var m=sm.get(u);if(m)var N=m.get(null);else{m=new Map,sm.set(u,m);for(var A=u.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<A.length;R++){var Z=A[R];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(m.set(Z.dataset.precedence,Z),N=Z)}N&&m.set(null,N)}A=h.instance,Z=A.getAttribute("data-precedence"),R=m.get(Z)||N,R===N&&m.set(null,A),m.set(Z,A),this.count++,N=Mh.bind(this),A.addEventListener("load",N),A.addEventListener("error",N),R?R.parentNode.insertBefore(A,R.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(A,u.firstChild)),h.state.loading|=4}}var Bu={$$typeof:C,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function R_(u,h,m,N,A,R,Z,pe){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=N,this.onUncaughtError=A,this.onCaughtError=R,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function tj(u,h,m,N,A,R,Z,pe,Oe,Ze,ut,pt){return u=new R_(u,h,m,Z,pe,Oe,Ze,pt),h=1,R===!0&&(h|=24),R=Ja(3,null,null,h),u.current=R,R.stateNode=u,h=Cy(),h.refCount++,u.pooledCache=h,h.refCount++,R.memoizedState={element:N,isDehydrated:m,cache:h},ec(R),u}function nj(u){return u?(u=Wl,u):Wl}function Ox(u,h,m,N,A,R){A=nj(A),N.context===null?N.context=A:N.pendingContext=A,N=al(h),N.payload={element:m},R=R===void 0?null:R,R!==null&&(N.callback=R),m=yo(u,N,h),m!==null&&(Ti(m,u,h),Wd(m,u,h))}function Mx(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<h?m:h}}function Ix(u,h){Mx(u,h),(u=u.alternate)&&Mx(u,h)}function rj(u){if(u.tag===13){var h=Gl(u,67108864);h!==null&&Ti(h,u,67108864),Ix(u,67108864)}}var om=!0;function L_(u,h,m,N){var A=z.T;z.T=null;var R=G.p;try{G.p=2,Rx(u,h,m,N)}finally{G.p=R,z.T=A}}function zu(u,h,m,N){var A=z.T;z.T=null;var R=G.p;try{G.p=8,Rx(u,h,m,N)}finally{G.p=R,z.T=A}}function Rx(u,h,m,N){if(om){var A=Lx(N);if(A===null)ko(u,h,N,lm,m),ij(u,N);else if($_(A,u,h,m,N))N.stopPropagation();else if(ij(u,N),h&4&&-1<F_.indexOf(u)){for(;A!==null;){var R=tt(A);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var Z=wt(R.pendingLanes);if(Z!==0){var pe=R;for(pe.pendingLanes|=2,pe.entangledLanes|=2;Z;){var Oe=1<<31-fe(Z);pe.entanglements[1]|=Oe,Z&=~Oe}Ws(R),(rr&6)===0&&(Au=ee()+500,Ch(0))}}break;case 13:pe=Gl(R,2),pe!==null&&Ti(pe,R,2),Hp(),Ix(R,2)}if(R=Lx(N),R===null&&ko(u,h,N,lm,m),R===A)break;A=R}A!==null&&N.stopPropagation()}else ko(u,h,N,null,m)}}function Lx(u){return u=oy(u),Fx(u)}var lm=null;function Fx(u){if(lm=null,u=Rn(u),u!==null){var h=s(u);if(h===null)u=null;else{var m=h.tag;if(m===13){if(u=o(h),u!==null)return u;u=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null)}}return lm=u,null}function aj(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ne()){case Te:return 2;case Fe:return 8;case xe:case ne:return 32;case oe:return 268435456;default:return 32}default:return 32}}var cm=!1,Ao=null,bl=null,jl=null,Ih=new Map,Rh=new Map,wl=[],F_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ij(u,h){switch(u){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":bl=null;break;case"mouseover":case"mouseout":jl=null;break;case"pointerover":case"pointerout":Ih.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(h.pointerId)}}function Lh(u,h,m,N,A,R){return u===null||u.nativeEvent!==R?(u={blockedOn:h,domEventName:m,eventSystemFlags:N,nativeEvent:R,targetContainers:[A]},h!==null&&(h=tt(h),h!==null&&rj(h)),u):(u.eventSystemFlags|=N,h=u.targetContainers,A!==null&&h.indexOf(A)===-1&&h.push(A),u)}function $_(u,h,m,N,A){switch(h){case"focusin":return Ao=Lh(Ao,u,h,m,N,A),!0;case"dragenter":return bl=Lh(bl,u,h,m,N,A),!0;case"mouseover":return jl=Lh(jl,u,h,m,N,A),!0;case"pointerover":var R=A.pointerId;return Ih.set(R,Lh(Ih.get(R)||null,u,h,m,N,A)),!0;case"gotpointercapture":return R=A.pointerId,Rh.set(R,Lh(Rh.get(R)||null,u,h,m,N,A)),!0}return!1}function sj(u){var h=Rn(u.target);if(h!==null){var m=s(h);if(m!==null){if(h=m.tag,h===13){if(h=o(m),h!==null){u.blockedOn=h,vt(u.priority,function(){if(m.tag===13){var N=Oa();N=jt(N);var A=Gl(m,N);A!==null&&Ti(A,m,N),Ix(m,N)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function um(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var m=Lx(u.nativeEvent);if(m===null){m=u.nativeEvent;var N=new m.constructor(m.type,m);Hf=N,m.target.dispatchEvent(N),Hf=null}else return h=tt(m),h!==null&&rj(h),u.blockedOn=m,!1;h.shift()}return!0}function oj(u,h,m){um(u)&&m.delete(h)}function B_(){cm=!1,Ao!==null&&um(Ao)&&(Ao=null),bl!==null&&um(bl)&&(bl=null),jl!==null&&um(jl)&&(jl=null),Ih.forEach(oj),Rh.forEach(oj)}function dm(u,h){u.blockedOn===h&&(u.blockedOn=null,cm||(cm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,B_)))}var hm=null;function lj(u){hm!==u&&(hm=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hm===u&&(hm=null);for(var h=0;h<u.length;h+=3){var m=u[h],N=u[h+1],A=u[h+2];if(typeof N!="function"){if(Fx(N||m)===null)continue;break}var R=tt(m);R!==null&&(u.splice(h,3),h-=3,ah(R,{pending:!0,data:A,method:m.method,action:N},N,A))}}))}function Fh(u){function h(Oe){return dm(Oe,u)}Ao!==null&&dm(Ao,u),bl!==null&&dm(bl,u),jl!==null&&dm(jl,u),Ih.forEach(h),Rh.forEach(h);for(var m=0;m<wl.length;m++){var N=wl[m];N.blockedOn===u&&(N.blockedOn=null)}for(;0<wl.length&&(m=wl[0],m.blockedOn===null);)sj(m),m.blockedOn===null&&wl.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(N=0;N<m.length;N+=3){var A=m[N],R=m[N+1],Z=A[ln]||null;if(typeof R=="function")Z||lj(m);else if(Z){var pe=null;if(R&&R.hasAttribute("formAction")){if(A=R,Z=R[ln]||null)pe=Z.formAction;else if(Fx(A)!==null)continue}else pe=Z.action;typeof pe=="function"?m[N+1]=pe:(m.splice(N,3),N-=3),lj(m)}}}function $x(u){this._internalRoot=u}fm.prototype.render=$x.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(a(409));var m=h.current,N=Oa();Ox(m,N,u,h,null,null)},fm.prototype.unmount=$x.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;Ox(u.current,2,null,u,null,null),Hp(),h[er]=null}};function fm(u){this._internalRoot=u}fm.prototype.unstable_scheduleHydration=function(u){if(u){var h=Kn();u={blockedOn:null,target:u,priority:h};for(var m=0;m<wl.length&&h!==0&&h<wl[m].priority;m++);wl.splice(m,0,u),m===0&&sj(u)}};var cj=e.version;if(cj!=="19.1.0")throw Error(a(527,cj,"19.1.0"));G.findDOMNode=function(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(a(188)):(u=Object.keys(u).join(","),Error(a(268,u)));return u=c(h),u=u!==null?d(u):null,u=u===null?null:u.stateNode,u};var z_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{Q=pm.inject(z_),ge=pm}catch{}}return zx.createRoot=function(u,h){if(!i(u))throw Error(a(299));var m=!1,N="",A=Jy,R=Pp,Z=K0,pe=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(R=h.onCaughtError),h.onRecoverableError!==void 0&&(Z=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(pe=h.unstable_transitionCallbacks)),h=tj(u,1,!1,null,null,m,N,A,R,Z,pe,null),u[er]=h.current,Cx(u),new $x(h)},zx.hydrateRoot=function(u,h,m){if(!i(u))throw Error(a(299));var N=!1,A="",R=Jy,Z=Pp,pe=K0,Oe=null,Ze=null;return m!=null&&(m.unstable_strictMode===!0&&(N=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(Z=m.onCaughtError),m.onRecoverableError!==void 0&&(pe=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Oe=m.unstable_transitionCallbacks),m.formState!==void 0&&(Ze=m.formState)),h=tj(u,1,!0,h,m??null,N,A,R,Z,pe,Oe,Ze),h.context=nj(null),m=h.current,N=Oa(),N=jt(N),A=al(N),A.callback=null,yo(m,A,N),m=N,h.current.lanes=m,ke(h,m),Ws(h),u[er]=h.current,Cx(u),new fm(h)},zx.version="19.1.0",zx}var WM;function aW(){if(WM)return K_.exports;WM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),K_.exports=rW(),K_.exports}var iW=aW(),Og=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sW={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Yu,TD,BB,oW=(BB=class{constructor(){Ut(this,Yu,sW);Ut(this,TD,!1)}setTimeoutProvider(t){Pt(this,Yu,t)}setTimeout(t,e){return Re(this,Yu).setTimeout(t,e)}clearTimeout(t){Re(this,Yu).clearTimeout(t)}setInterval(t,e){return Re(this,Yu).setInterval(t,e)}clearInterval(t){Re(this,Yu).clearInterval(t)}},Yu=new WeakMap,TD=new WeakMap,BB),Qh=new oW;function lW(t){setTimeout(t,0)}var gf=typeof window>"u"||"Deno"in globalThis;function Oi(){}function cW(t,e){return typeof t=="function"?t(e):t}function YA(t){return typeof t=="number"&&t>=0&&t!==1/0}function JB(t,e){return Math.max(t+(e||0)-Date.now(),0)}function od(t,e){return typeof t=="function"?t(e):t}function Zs(t,e){return typeof t=="function"?t(e):t}function KM(t,e){const{type:n="all",exact:a,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(a){if(e.queryHash!==AD(o,e.options))return!1}else if(!kv(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function YM(t,e){const{exact:n,status:a,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(yf(e.options.mutationKey)!==yf(s))return!1}else if(!kv(e.options.mutationKey,s))return!1}return!(a&&e.state.status!==a||i&&!i(e))}function AD(t,e){return((e==null?void 0:e.queryKeyHashFn)||yf)(t)}function yf(t){return JSON.stringify(t,(e,n)=>QA(n)?Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{}):n)}function kv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>kv(t[n],e[n])):!1}var uW=Object.prototype.hasOwnProperty;function ZB(t,e,n=0){if(t===e)return t;if(n>500)return e;const a=QM(t)&&QM(e);if(!a&&!(QA(t)&&QA(e)))return e;const s=(a?t:Object.keys(t)).length,o=a?e:Object.keys(e),l=o.length,c=a?new Array(l):{};let d=0;for(let f=0;f<l;f++){const p=a?f:o[f],g=t[p],x=e[p];if(g===x){c[p]=g,(a?f<s:uW.call(t,p))&&d++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){c[p]=x;continue}const b=ZB(g,x,n+1);c[p]=b,b===g&&d++}return s===l&&d===s?t:c}function ow(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function QM(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function QA(t){if(!XM(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!XM(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function XM(t){return Object.prototype.toString.call(t)==="[object Object]"}function dW(t){return new Promise(e=>{Qh.setTimeout(e,t)})}function XA(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ZB(t,e):e}function hW(t,e,n=0){const a=[...t,e];return n&&a.length>n?a.slice(1):a}function fW(t,e,n=0){const a=[e,...t];return n&&a.length>n?a.slice(0,-1):a}var ED=Symbol();function ez(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ED?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function PD(t,e){return typeof t=="function"?t(...e):!!t}function pW(t,e,n){let a=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),a||(a=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var nf,Qu,zm,zB,mW=(zB=class extends Og{constructor(){super();Ut(this,nf);Ut(this,Qu);Ut(this,zm);Pt(this,zm,e=>{if(!gf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Re(this,Qu)||this.setEventListener(Re(this,zm))}onUnsubscribe(){var e;this.hasListeners()||((e=Re(this,Qu))==null||e.call(this),Pt(this,Qu,void 0))}setEventListener(e){var n;Pt(this,zm,e),(n=Re(this,Qu))==null||n.call(this),Pt(this,Qu,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){Re(this,nf)!==e&&(Pt(this,nf,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Re(this,nf)=="boolean"?Re(this,nf):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},nf=new WeakMap,Qu=new WeakMap,zm=new WeakMap,zB),DD=new mW;function JA(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function a(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{a({status:"fulfilled",value:i}),t(i)},n.reject=i=>{a({status:"rejected",reason:i}),e(i)},n}var gW=lW;function yW(){let t=[],e=0,n=l=>{l()},a=l=>{l()},i=gW;const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{a(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{i=l}}}var Sa=yW(),qm,Xu,Um,qB,xW=(qB=class extends Og{constructor(){super();Ut(this,qm,!0);Ut(this,Xu);Ut(this,Um);Pt(this,Um,e=>{if(!gf&&window.addEventListener){const n=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}})}onSubscribe(){Re(this,Xu)||this.setEventListener(Re(this,Um))}onUnsubscribe(){var e;this.hasListeners()||((e=Re(this,Xu))==null||e.call(this),Pt(this,Xu,void 0))}setEventListener(e){var n;Pt(this,Um,e),(n=Re(this,Xu))==null||n.call(this),Pt(this,Xu,e(this.setOnline.bind(this)))}setOnline(e){Re(this,qm)!==e&&(Pt(this,qm,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return Re(this,qm)}},qm=new WeakMap,Xu=new WeakMap,Um=new WeakMap,qB),lw=new xW;function vW(t){return Math.min(1e3*2**t,3e4)}function tz(t){return(t??"online")==="online"?lw.isOnline():!0}var ZA=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function nz(t){let e=!1,n=0,a;const i=JA(),s=()=>i.status!=="pending",o=j=>{var S;if(!s()){const _=new ZA(j);g(_),(S=t.onCancel)==null||S.call(t,_)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>DD.isFocused()&&(t.networkMode==="always"||lw.isOnline())&&t.canRun(),f=()=>tz(t.networkMode)&&t.canRun(),p=j=>{s()||(a==null||a(),i.resolve(j))},g=j=>{s()||(a==null||a(),i.reject(j))},x=()=>new Promise(j=>{var S;a=_=>{(s()||d())&&j(_)},(S=t.onPause)==null||S.call(t)}).then(()=>{var j;a=void 0,s()||(j=t.onContinue)==null||j.call(t)}),b=()=>{if(s())return;let j;const S=n===0?t.initialPromise:void 0;try{j=S??t.fn()}catch(_){j=Promise.reject(_)}Promise.resolve(j).then(p).catch(_=>{var E;if(s())return;const T=t.retry??(gf?0:3),C=t.retryDelay??vW,P=typeof C=="function"?C(n,_):C,k=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,_);if(e||!k){g(_);return}n++,(E=t.onFail)==null||E.call(t,n,_),dW(P).then(()=>d()?void 0:x()).then(()=>{e?g(_):b()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?b():x().then(b),i)}}var rf,UB,rz=(UB=class{constructor(){Ut(this,rf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),YA(this.gcTime)&&Pt(this,rf,Qh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(gf?1/0:5*60*1e3))}clearGcTimeout(){Re(this,rf)&&(Qh.clearTimeout(Re(this,rf)),Pt(this,rf,void 0))}},rf=new WeakMap,UB),af,Vm,Js,sf,Ma,bb,of,Oo,yc,VB,bW=(VB=class extends rz{constructor(e){super();Ut(this,Oo);Ut(this,af);Ut(this,Vm);Ut(this,Js);Ut(this,sf);Ut(this,Ma);Ut(this,bb);Ut(this,of);Pt(this,of,!1),Pt(this,bb,e.defaultOptions),this.setOptions(e.options),this.observers=[],Pt(this,sf,e.client),Pt(this,Js,Re(this,sf).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Pt(this,af,ZM(this.options)),this.state=e.state??Re(this,af),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Re(this,Ma))==null?void 0:e.promise}setOptions(e){if(this.options={...Re(this,bb),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=ZM(this.options);n.data!==void 0&&(this.setState(JM(n.data,n.dataUpdatedAt)),Pt(this,af,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Re(this,Js).remove(this)}setData(e,n){const a=XA(this.state.data,e,this.options);return wn(this,Oo,yc).call(this,{data:a,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),a}setState(e,n){wn(this,Oo,yc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var a,i;const n=(a=Re(this,Ma))==null?void 0:a.promise;return(i=Re(this,Ma))==null||i.cancel(e),n?n.then(Oi).catch(Oi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Re(this,af))}isActive(){return this.observers.some(e=>Zs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ED||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>od(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!JB(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Re(this,Ma))==null||n.continue()}onOnline(){var n;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Re(this,Ma))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Re(this,Js).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Re(this,Ma)&&(Re(this,of)?Re(this,Ma).cancel({revert:!0}):Re(this,Ma).cancelRetry()),this.scheduleGc()),Re(this,Js).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wn(this,Oo,yc).call(this,{type:"invalidate"})}async fetch(e,n){var c,d,f,p,g,x,b,j,S,_,T,C;if(this.state.fetchStatus!=="idle"&&((c=Re(this,Ma))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Re(this,Ma))return Re(this,Ma).continueRetry(),Re(this,Ma).promise}if(e&&this.setOptions(e),!this.options.queryFn){const P=this.observers.find(k=>k.options.queryFn);P&&this.setOptions(P.options)}const a=new AbortController,i=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(Pt(this,of,!0),a.signal)})},s=()=>{const P=ez(this.options,n),E=(()=>{const I={client:Re(this,sf),queryKey:this.queryKey,meta:this.meta};return i(I),I})();return Pt(this,of,!1),this.options.persister?this.options.persister(P,E,this):P(E)},l=(()=>{const P={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Re(this,sf),state:this.state,fetchFn:s};return i(P),P})();(d=this.options.behavior)==null||d.onFetch(l,this),Pt(this,Vm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&wn(this,Oo,yc).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Pt(this,Ma,nz({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:P=>{P instanceof ZA&&P.revert&&this.setState({...Re(this,Vm),fetchStatus:"idle"}),a.abort()},onFail:(P,k)=>{wn(this,Oo,yc).call(this,{type:"failed",failureCount:P,error:k})},onPause:()=>{wn(this,Oo,yc).call(this,{type:"pause"})},onContinue:()=>{wn(this,Oo,yc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const P=await Re(this,Ma).start();if(P===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(P),(x=(g=Re(this,Js).config).onSuccess)==null||x.call(g,P,this),(j=(b=Re(this,Js).config).onSettled)==null||j.call(b,P,this.state.error,this),P}catch(P){if(P instanceof ZA){if(P.silent)return Re(this,Ma).promise;if(P.revert){if(this.state.data===void 0)throw P;return this.state.data}}throw wn(this,Oo,yc).call(this,{type:"error",error:P}),(_=(S=Re(this,Js).config).onError)==null||_.call(S,P,this),(C=(T=Re(this,Js).config).onSettled)==null||C.call(T,this.state.data,P,this),P}finally{this.scheduleGc()}}},af=new WeakMap,Vm=new WeakMap,Js=new WeakMap,sf=new WeakMap,Ma=new WeakMap,bb=new WeakMap,of=new WeakMap,Oo=new WeakSet,yc=function(e){const n=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...az(a.data,this.options),fetchMeta:e.meta??null};case"success":const i={...a,...JM(e.data,e.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Pt(this,Vm,e.manual?i:void 0),i;case"error":const s=e.error;return{...a,error:s,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=n(this.state),Sa.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),Re(this,Js).notify({query:this,type:"updated",action:e})})},VB);function az(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tz(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function JM(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ZM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,a=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var as,Un,jb,Pi,lf,Hm,vc,Ju,wb,Gm,Wm,cf,uf,Zu,Km,pr,uv,eE,tE,nE,rE,aE,iE,sE,iz,HB,jW=(HB=class extends Og{constructor(e,n){super();Ut(this,pr);Ut(this,as);Ut(this,Un);Ut(this,jb);Ut(this,Pi);Ut(this,lf);Ut(this,Hm);Ut(this,vc);Ut(this,Ju);Ut(this,wb);Ut(this,Gm);Ut(this,Wm);Ut(this,cf);Ut(this,uf);Ut(this,Zu);Ut(this,Km,new Set);this.options=n,Pt(this,as,e),Pt(this,Ju,null),Pt(this,vc,JA()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Re(this,Un).addObserver(this),eI(Re(this,Un),this.options)?wn(this,pr,uv).call(this):this.updateResult(),wn(this,pr,rE).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return oE(Re(this,Un),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return oE(Re(this,Un),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,wn(this,pr,aE).call(this),wn(this,pr,iE).call(this),Re(this,Un).removeObserver(this)}setOptions(e){const n=this.options,a=Re(this,Un);if(this.options=Re(this,as).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Zs(this.options.enabled,Re(this,Un))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");wn(this,pr,sE).call(this),Re(this,Un).setOptions(this.options),n._defaulted&&!ow(this.options,n)&&Re(this,as).getQueryCache().notify({type:"observerOptionsUpdated",query:Re(this,Un),observer:this});const i=this.hasListeners();i&&tI(Re(this,Un),a,this.options,n)&&wn(this,pr,uv).call(this),this.updateResult(),i&&(Re(this,Un)!==a||Zs(this.options.enabled,Re(this,Un))!==Zs(n.enabled,Re(this,Un))||od(this.options.staleTime,Re(this,Un))!==od(n.staleTime,Re(this,Un)))&&wn(this,pr,eE).call(this);const s=wn(this,pr,tE).call(this);i&&(Re(this,Un)!==a||Zs(this.options.enabled,Re(this,Un))!==Zs(n.enabled,Re(this,Un))||s!==Re(this,Zu))&&wn(this,pr,nE).call(this,s)}getOptimisticResult(e){const n=Re(this,as).getQueryCache().build(Re(this,as),e),a=this.createResult(n,e);return NW(this,a)&&(Pt(this,Pi,a),Pt(this,Hm,this.options),Pt(this,lf,Re(this,Un).state)),a}getCurrentResult(){return Re(this,Pi)}trackResult(e,n){return new Proxy(e,{get:(a,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Re(this,vc).status==="pending"&&Re(this,vc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,i))})}trackProp(e){Re(this,Km).add(e)}getCurrentQuery(){return Re(this,Un)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Re(this,as).defaultQueryOptions(e),a=Re(this,as).getQueryCache().build(Re(this,as),n);return a.fetch().then(()=>this.createResult(a,n))}fetch(e){return wn(this,pr,uv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Re(this,Pi)))}createResult(e,n){var $;const a=Re(this,Un),i=this.options,s=Re(this,Pi),o=Re(this,lf),l=Re(this,Hm),d=e!==a?e.state:Re(this,jb),{state:f}=e;let p={...f},g=!1,x;if(n._optimisticResults){const q=this.hasListeners(),F=!q&&eI(e,n),H=q&&tI(e,a,n,i);(F||H)&&(p={...p,...az(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:b,errorUpdatedAt:j,status:S}=p;x=p.data;let _=!1;if(n.placeholderData!==void 0&&x===void 0&&S==="pending"){let q;s!=null&&s.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(q=s.data,_=!0):q=typeof n.placeholderData=="function"?n.placeholderData(($=Re(this,Wm))==null?void 0:$.state.data,Re(this,Wm)):n.placeholderData,q!==void 0&&(S="success",x=XA(s==null?void 0:s.data,q,n),g=!0)}if(n.select&&x!==void 0&&!_)if(s&&x===(o==null?void 0:o.data)&&n.select===Re(this,wb))x=Re(this,Gm);else try{Pt(this,wb,n.select),x=n.select(x),x=XA(s==null?void 0:s.data,x,n),Pt(this,Gm,x),Pt(this,Ju,null)}catch(q){Pt(this,Ju,q)}Re(this,Ju)&&(b=Re(this,Ju),x=Re(this,Gm),j=Date.now(),S="error");const T=p.fetchStatus==="fetching",C=S==="pending",P=S==="error",k=C&&T,E=x!==void 0,L={status:S,fetchStatus:p.fetchStatus,isPending:C,isSuccess:S==="success",isError:P,isInitialLoading:k,isLoading:k,data:x,dataUpdatedAt:p.dataUpdatedAt,error:b,errorUpdatedAt:j,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:P&&!E,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:P&&E,isStale:OD(e,n),refetch:this.refetch,promise:Re(this,vc),isEnabled:Zs(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const q=L.data!==void 0,F=L.status==="error"&&!q,H=Y=>{F?Y.reject(L.error):q&&Y.resolve(L.data)},V=()=>{const Y=Pt(this,vc,L.promise=JA());H(Y)},X=Re(this,vc);switch(X.status){case"pending":e.queryHash===a.queryHash&&H(X);break;case"fulfilled":(F||L.data!==X.value)&&V();break;case"rejected":(!F||L.error!==X.reason)&&V();break}}return L}updateResult(){const e=Re(this,Pi),n=this.createResult(Re(this,Un),this.options);if(Pt(this,lf,Re(this,Un).state),Pt(this,Hm,this.options),Re(this,lf).data!==void 0&&Pt(this,Wm,Re(this,Un)),ow(n,e))return;Pt(this,Pi,n);const a=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!Re(this,Km).size)return!0;const o=new Set(s??Re(this,Km));return this.options.throwOnError&&o.add("error"),Object.keys(Re(this,Pi)).some(l=>{const c=l;return Re(this,Pi)[c]!==e[c]&&o.has(c)})};wn(this,pr,iz).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&wn(this,pr,rE).call(this)}},as=new WeakMap,Un=new WeakMap,jb=new WeakMap,Pi=new WeakMap,lf=new WeakMap,Hm=new WeakMap,vc=new WeakMap,Ju=new WeakMap,wb=new WeakMap,Gm=new WeakMap,Wm=new WeakMap,cf=new WeakMap,uf=new WeakMap,Zu=new WeakMap,Km=new WeakMap,pr=new WeakSet,uv=function(e){wn(this,pr,sE).call(this);let n=Re(this,Un).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Oi)),n},eE=function(){wn(this,pr,aE).call(this);const e=od(this.options.staleTime,Re(this,Un));if(gf||Re(this,Pi).isStale||!YA(e))return;const a=JB(Re(this,Pi).dataUpdatedAt,e)+1;Pt(this,cf,Qh.setTimeout(()=>{Re(this,Pi).isStale||this.updateResult()},a))},tE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Re(this,Un)):this.options.refetchInterval)??!1},nE=function(e){wn(this,pr,iE).call(this),Pt(this,Zu,e),!(gf||Zs(this.options.enabled,Re(this,Un))===!1||!YA(Re(this,Zu))||Re(this,Zu)===0)&&Pt(this,uf,Qh.setInterval(()=>{(this.options.refetchIntervalInBackground||DD.isFocused())&&wn(this,pr,uv).call(this)},Re(this,Zu)))},rE=function(){wn(this,pr,eE).call(this),wn(this,pr,nE).call(this,wn(this,pr,tE).call(this))},aE=function(){Re(this,cf)&&(Qh.clearTimeout(Re(this,cf)),Pt(this,cf,void 0))},iE=function(){Re(this,uf)&&(Qh.clearInterval(Re(this,uf)),Pt(this,uf,void 0))},sE=function(){const e=Re(this,as).getQueryCache().build(Re(this,as),this.options);if(e===Re(this,Un))return;const n=Re(this,Un);Pt(this,Un,e),Pt(this,jb,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},iz=function(e){Sa.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Re(this,Pi))}),Re(this,as).getQueryCache().notify({query:Re(this,Un),type:"observerResultsUpdated"})})},HB);function wW(t,e){return Zs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function eI(t,e){return wW(t,e)||t.state.data!==void 0&&oE(t,e,e.refetchOnMount)}function oE(t,e,n){if(Zs(e.enabled,t)!==!1&&od(e.staleTime,t)!=="static"){const a=typeof n=="function"?n(t):n;return a==="always"||a!==!1&&OD(t,e)}return!1}function tI(t,e,n,a){return(t!==e||Zs(a.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&OD(t,n)}function OD(t,e){return Zs(e.enabled,t)!==!1&&t.isStaleByTime(od(e.staleTime,t))}function NW(t,e){return!ow(t.getCurrentResult(),e)}function nI(t){return{onFetch:(e,n)=>{var f,p,g,x,b;const a=e.options,i=(g=(p=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,s=((x=e.state.data)==null?void 0:x.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let j=!1;const S=C=>{pW(C,()=>e.signal,()=>j=!0)},_=ez(e.options,e.fetchOptions),T=async(C,P,k)=>{if(j)return Promise.reject();if(P==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:P,direction:k?"backward":"forward",meta:e.options.meta};return S(F),F})(),L=await _(I),{maxPages:$}=e.options,q=k?fW:hW;return{pages:q(C.pages,L,$),pageParams:q(C.pageParams,P,$)}};if(i&&s.length){const C=i==="backward",P=C?SW:rI,k={pages:s,pageParams:o},E=P(a,k);l=await T(k,E,C)}else{const C=t??s.length;do{const P=c===0?o[0]??a.initialPageParam:rI(a,l);if(c>0&&P==null)break;l=await T(l,P),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var j,S;return(S=(j=e.options).persister)==null?void 0:S.call(j,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function rI(t,{pages:e,pageParams:n}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,n[a],n):void 0}function SW(t,{pages:e,pageParams:n}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,n[0],n):void 0}var Nb,_l,Di,df,Cl,Hu,GB,_W=(GB=class extends rz{constructor(e){super();Ut(this,Cl);Ut(this,Nb);Ut(this,_l);Ut(this,Di);Ut(this,df);Pt(this,Nb,e.client),this.mutationId=e.mutationId,Pt(this,Di,e.mutationCache),Pt(this,_l,[]),this.state=e.state||sz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Re(this,_l).includes(e)||(Re(this,_l).push(e),this.clearGcTimeout(),Re(this,Di).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Pt(this,_l,Re(this,_l).filter(n=>n!==e)),this.scheduleGc(),Re(this,Di).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Re(this,_l).length||(this.state.status==="pending"?this.scheduleGc():Re(this,Di).remove(this))}continue(){var e;return((e=Re(this,df))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,d,f,p,g,x,b,j,S,_,T,C,P,k,E,I,L,$;const n=()=>{wn(this,Cl,Hu).call(this,{type:"continue"})},a={client:Re(this,Nb),meta:this.options.meta,mutationKey:this.options.mutationKey};Pt(this,df,nz({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:(q,F)=>{wn(this,Cl,Hu).call(this,{type:"failed",failureCount:q,error:F})},onPause:()=>{wn(this,Cl,Hu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Re(this,Di).canRun(this)}));const i=this.state.status==="pending",s=!Re(this,df).canStart();try{if(i)n();else{wn(this,Cl,Hu).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(o=Re(this,Di).config).onMutate)==null?void 0:l.call(o,e,this,a));const F=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,a));F!==this.state.context&&wn(this,Cl,Hu).call(this,{type:"pending",context:F,variables:e,isPaused:s})}const q=await Re(this,df).start();return await((p=(f=Re(this,Di).config).onSuccess)==null?void 0:p.call(f,q,e,this.state.context,this,a)),await((x=(g=this.options).onSuccess)==null?void 0:x.call(g,q,e,this.state.context,a)),await((j=(b=Re(this,Di).config).onSettled)==null?void 0:j.call(b,q,null,this.state.variables,this.state.context,this,a)),await((_=(S=this.options).onSettled)==null?void 0:_.call(S,q,null,e,this.state.context,a)),wn(this,Cl,Hu).call(this,{type:"success",data:q}),q}catch(q){try{await((C=(T=Re(this,Di).config).onError)==null?void 0:C.call(T,q,e,this.state.context,this,a))}catch(F){Promise.reject(F)}try{await((k=(P=this.options).onError)==null?void 0:k.call(P,q,e,this.state.context,a))}catch(F){Promise.reject(F)}try{await((I=(E=Re(this,Di).config).onSettled)==null?void 0:I.call(E,void 0,q,this.state.variables,this.state.context,this,a))}catch(F){Promise.reject(F)}try{await(($=(L=this.options).onSettled)==null?void 0:$.call(L,void 0,q,e,this.state.context,a))}catch(F){Promise.reject(F)}throw wn(this,Cl,Hu).call(this,{type:"error",error:q}),q}finally{Re(this,Di).runNext(this)}}},Nb=new WeakMap,_l=new WeakMap,Di=new WeakMap,df=new WeakMap,Cl=new WeakSet,Hu=function(e){const n=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Sa.batch(()=>{Re(this,_l).forEach(a=>{a.onMutationUpdate(e)}),Re(this,Di).notify({mutation:this,type:"updated",action:e})})},GB);function sz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var bc,Mo,Sb,WB,CW=(WB=class extends Og{constructor(e={}){super();Ut(this,bc);Ut(this,Mo);Ut(this,Sb);this.config=e,Pt(this,bc,new Set),Pt(this,Mo,new Map),Pt(this,Sb,0)}build(e,n,a){const i=new _W({client:e,mutationCache:this,mutationId:++uj(this,Sb)._,options:e.defaultMutationOptions(n),state:a});return this.add(i),i}add(e){Re(this,bc).add(e);const n=dj(e);if(typeof n=="string"){const a=Re(this,Mo).get(n);a?a.push(e):Re(this,Mo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Re(this,bc).delete(e)){const n=dj(e);if(typeof n=="string"){const a=Re(this,Mo).get(n);if(a)if(a.length>1){const i=a.indexOf(e);i!==-1&&a.splice(i,1)}else a[0]===e&&Re(this,Mo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=dj(e);if(typeof n=="string"){const a=Re(this,Mo).get(n),i=a==null?void 0:a.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var a;const n=dj(e);if(typeof n=="string"){const i=(a=Re(this,Mo).get(n))==null?void 0:a.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Sa.batch(()=>{Re(this,bc).forEach(e=>{this.notify({type:"removed",mutation:e})}),Re(this,bc).clear(),Re(this,Mo).clear()})}getAll(){return Array.from(Re(this,bc))}find(e){const n={exact:!0,...e};return this.getAll().find(a=>YM(n,a))}findAll(e={}){return this.getAll().filter(n=>YM(e,n))}notify(e){Sa.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Sa.batch(()=>Promise.all(e.map(n=>n.continue().catch(Oi))))}},bc=new WeakMap,Mo=new WeakMap,Sb=new WeakMap,WB);function dj(t){var e;return(e=t.options.scope)==null?void 0:e.id}var jc,ed,is,wc,Oc,Kj,lE,KB,TW=(KB=class extends Og{constructor(n,a){super();Ut(this,Oc);Ut(this,jc);Ut(this,ed);Ut(this,is);Ut(this,wc);Pt(this,jc,n),this.setOptions(a),this.bindMethods(),wn(this,Oc,Kj).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const a=this.options;this.options=Re(this,jc).defaultMutationOptions(n),ow(this.options,a)||Re(this,jc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Re(this,is),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&yf(a.mutationKey)!==yf(this.options.mutationKey)?this.reset():((i=Re(this,is))==null?void 0:i.state.status)==="pending"&&Re(this,is).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Re(this,is))==null||n.removeObserver(this)}onMutationUpdate(n){wn(this,Oc,Kj).call(this),wn(this,Oc,lE).call(this,n)}getCurrentResult(){return Re(this,ed)}reset(){var n;(n=Re(this,is))==null||n.removeObserver(this),Pt(this,is,void 0),wn(this,Oc,Kj).call(this),wn(this,Oc,lE).call(this)}mutate(n,a){var i;return Pt(this,wc,a),(i=Re(this,is))==null||i.removeObserver(this),Pt(this,is,Re(this,jc).getMutationCache().build(Re(this,jc),this.options)),Re(this,is).addObserver(this),Re(this,is).execute(n)}},jc=new WeakMap,ed=new WeakMap,is=new WeakMap,wc=new WeakMap,Oc=new WeakSet,Kj=function(){var a;const n=((a=Re(this,is))==null?void 0:a.state)??sz();Pt(this,ed,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},lE=function(n){Sa.batch(()=>{var a,i,s,o,l,c,d,f;if(Re(this,wc)&&this.hasListeners()){const p=Re(this,ed).variables,g=Re(this,ed).context,x={client:Re(this,jc),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(i=(a=Re(this,wc)).onSuccess)==null||i.call(a,n.data,p,g,x)}catch(b){Promise.reject(b)}try{(o=(s=Re(this,wc)).onSettled)==null||o.call(s,n.data,null,p,g,x)}catch(b){Promise.reject(b)}}else if((n==null?void 0:n.type)==="error"){try{(c=(l=Re(this,wc)).onError)==null||c.call(l,n.error,p,g,x)}catch(b){Promise.reject(b)}try{(f=(d=Re(this,wc)).onSettled)==null||f.call(d,void 0,n.error,p,g,x)}catch(b){Promise.reject(b)}}}this.listeners.forEach(p=>{p(Re(this,ed))})})},KB),Tl,YB,kW=(YB=class extends Og{constructor(e={}){super();Ut(this,Tl);this.config=e,Pt(this,Tl,new Map)}build(e,n,a){const i=n.queryKey,s=n.queryHash??AD(i,n);let o=this.get(s);return o||(o=new bW({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:a,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Re(this,Tl).has(e.queryHash)||(Re(this,Tl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Re(this,Tl).get(e.queryHash);n&&(e.destroy(),n===e&&Re(this,Tl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Sa.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Re(this,Tl).get(e)}getAll(){return[...Re(this,Tl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(a=>KM(n,a))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(a=>KM(e,a)):n}notify(e){Sa.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Sa.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Sa.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Tl=new WeakMap,YB),Zr,td,nd,Ym,Qm,rd,Xm,Jm,QB,AW=(QB=class{constructor(t={}){Ut(this,Zr);Ut(this,td);Ut(this,nd);Ut(this,Ym);Ut(this,Qm);Ut(this,rd);Ut(this,Xm);Ut(this,Jm);Pt(this,Zr,t.queryCache||new kW),Pt(this,td,t.mutationCache||new CW),Pt(this,nd,t.defaultOptions||{}),Pt(this,Ym,new Map),Pt(this,Qm,new Map),Pt(this,rd,0)}mount(){uj(this,rd)._++,Re(this,rd)===1&&(Pt(this,Xm,DD.subscribe(async t=>{t&&(await this.resumePausedMutations(),Re(this,Zr).onFocus())})),Pt(this,Jm,lw.subscribe(async t=>{t&&(await this.resumePausedMutations(),Re(this,Zr).onOnline())})))}unmount(){var t,e;uj(this,rd)._--,Re(this,rd)===0&&((t=Re(this,Xm))==null||t.call(this),Pt(this,Xm,void 0),(e=Re(this,Jm))==null||e.call(this),Pt(this,Jm,void 0))}isFetching(t){return Re(this,Zr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Re(this,td).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Re(this,Zr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Re(this,Zr).build(this,e),a=n.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(od(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return Re(this,Zr).findAll(t).map(({queryKey:e,state:n})=>{const a=n.data;return[e,a]})}setQueryData(t,e,n){const a=this.defaultQueryOptions({queryKey:t}),i=Re(this,Zr).get(a.queryHash),s=i==null?void 0:i.state.data,o=cW(e,s);if(o!==void 0)return Re(this,Zr).build(this,a).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Sa.batch(()=>Re(this,Zr).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Re(this,Zr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Re(this,Zr);Sa.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Re(this,Zr);return Sa.batch(()=>(n.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},a=Sa.batch(()=>Re(this,Zr).findAll(t).map(i=>i.cancel(n)));return Promise.all(a).then(Oi).catch(Oi)}invalidateQueries(t,e={}){return Sa.batch(()=>(Re(this,Zr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},a=Sa.batch(()=>Re(this,Zr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Oi)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(a).then(Oi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Re(this,Zr).build(this,e);return n.isStaleByTime(od(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Oi).catch(Oi)}fetchInfiniteQuery(t){return t.behavior=nI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Oi).catch(Oi)}ensureInfiniteQueryData(t){return t.behavior=nI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return lw.isOnline()?Re(this,td).resumePausedMutations():Promise.resolve()}getQueryCache(){return Re(this,Zr)}getMutationCache(){return Re(this,td)}getDefaultOptions(){return Re(this,nd)}setDefaultOptions(t){Pt(this,nd,t)}setQueryDefaults(t,e){Re(this,Ym).set(yf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Re(this,Ym).values()],n={};return e.forEach(a=>{kv(t,a.queryKey)&&Object.assign(n,a.defaultOptions)}),n}setMutationDefaults(t,e){Re(this,Qm).set(yf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Re(this,Qm).values()],n={};return e.forEach(a=>{kv(t,a.mutationKey)&&Object.assign(n,a.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Re(this,nd).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=AD(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ED&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Re(this,nd).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Re(this,Zr).clear(),Re(this,td).clear()}},Zr=new WeakMap,td=new WeakMap,nd=new WeakMap,Ym=new WeakMap,Qm=new WeakMap,rd=new WeakMap,Xm=new WeakMap,Jm=new WeakMap,QB),oz=v.createContext(void 0),ds=t=>{const e=v.useContext(oz);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},EW=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(oz.Provider,{value:t,children:e})),lz=v.createContext(!1),PW=()=>v.useContext(lz);lz.Provider;function DW(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var OW=v.createContext(DW()),MW=()=>v.useContext(OW),IW=(t,e,n)=>{const a=n!=null&&n.state.error&&typeof t.throwOnError=="function"?PD(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||a)&&(e.isReset()||(t.retryOnMount=!1))},RW=t=>{v.useEffect(()=>{t.clearReset()},[t])},LW=({result:t,errorResetBoundary:e,throwOnError:n,query:a,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&a&&(i&&t.data===void 0||PD(n,[t.error,a])),FW=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...i)=>n(a(...i)):n(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},$W=(t,e)=>t.isLoading&&t.isFetching&&!e,BW=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,aI=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function zW(t,e,n){var g,x,b,j;const a=PW(),i=MW(),s=ds(),o=s.defaultQueryOptions(t);(x=(g=s.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||x.call(g,o);const l=s.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",FW(o),IW(o,i,l),RW(i);const c=!s.getQueryCache().get(o.queryHash),[d]=v.useState(()=>new e(s,o)),f=d.getOptimisticResult(o),p=!a&&t.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(S=>{const _=p?d.subscribe(Sa.batchCalls(S)):Oi;return d.updateResult(),_},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),v.useEffect(()=>{d.setOptions(o)},[o,d]),BW(o,f))throw aI(o,d,i);if(LW({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;if((j=(b=s.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||j.call(b,o,f),o.experimental_prefetchInRender&&!gf&&$W(f,a)){const S=c?aI(o,d,i):l==null?void 0:l.promise;S==null||S.catch(Oi).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?f:d.trackResult(f)}function ON(t,e){return zW(t,jW)}function qW(t,e){const n=ds(),[a]=v.useState(()=>new TW(n,t));v.useEffect(()=>{a.setOptions(t)},[a,t]);const i=v.useSyncExternalStore(v.useCallback(o=>a.subscribe(Sa.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),s=v.useCallback((o,l)=>{a.mutate(o,l).catch(Oi)},[a]);if(i.error&&PD(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const UW=new AW({defaultOptions:{queries:{staleTime:0,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!1}}}),Gt={clinicSettings:["clinicSettings"],clinicSubscription:["clinicSubscription"],patients:{all:["patients"],list:t=>["patients","list",t],detail:t=>["patients","detail",t],context:t=>["patients","context",t]},queue:{all:["queue"],today:["queue","today"],entry:t=>["queue","entry",t],latest:t=>["queue","patient",t,"latest"]},staff:{all:["staff"],list:["staff","list"],detail:t=>["staff","detail",t]},pharmacyOrders:{all:["pharmacyOrders"],detail:t=>["pharmacyOrders","detail",t],byPatient:t=>["pharmacyOrders","patient",t]},labOrders:{all:["labOrders"],detail:t=>["labOrders","detail",t],byPatient:t=>["labOrders","patient",t]},drugs:{all:["drugs"],list:["drugs","list"],detail:t=>["drugs","detail",t]},labTests:{all:["labTests"],list:["labTests","list"]},patientDebts:{balance:t=>["patientDebts","balance",t]},dental:{records:t=>["dental","records",t]}},VW="modulepreload",HW=function(t){return"/"+t},iI={},MN=function(e,n,a){let i=Promise.resolve();if(n&&n.length>0){let o=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(n.map(d=>{if(d=HW(d),d in iI)return;iI[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":VW,f||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((x,b)=>{g.addEventListener("load",x),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},km=({message:t="Newtons Ai HMS",fullScreen:e=!1})=>r.jsx("div",{className:`loading-container ${e?"fullscreen":""}`,children:r.jsxs("div",{className:"loading-content",children:[r.jsxs("div",{className:"spinner-ring",children:[r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{})]}),r.jsx("div",{className:"loading-title",children:t}),e&&r.jsx("div",{className:"loading-subtitle",children:"Optimizing your experience..."})]})});function GW(t={}){const{nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i}=t,[s,o]=v.useState(!1),l=v.useRef(a);l.current=a;const c=v.useRef(i);return c.current=i,v.useEffect(()=>{const d=document.createElement("script");return d.src="https://accounts.google.com/gsi/client",n&&(d.src+=`?hl=${n}`),d.async=!0,d.defer=!0,d.nonce=e,d.onload=()=>{var f;o(!0),(f=l.current)===null||f===void 0||f.call(l)},d.onerror=()=>{var f;o(!1),(f=c.current)===null||f===void 0||f.call(c)},document.body.appendChild(d),()=>{document.body.removeChild(d)}},[e]),s}const cz=v.createContext(null);function WW({clientId:t,nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i,children:s}){const o=GW({nonce:e,onScriptLoadSuccess:a,onScriptLoadError:i,locale:n}),l=v.useMemo(()=>({locale:n,clientId:t,scriptLoadedSuccessfully:o}),[t,o]);return Se.createElement(cz.Provider,{value:l},s)}function KW(){const t=v.useContext(cz);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function YW(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const QW={large:40,medium:32,small:20};function XW({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:a,type:i="standard",theme:s="outline",size:o="large",text:l,shape:c,logo_alignment:d,width:f,click_listener:p,state:g,containerProps:x,...b}){const j=v.useRef(null),{clientId:S,locale:_,scriptLoadedSuccessfully:T}=KW(),C=v.useRef(t);C.current=t;const P=v.useRef(e);P.current=e;const k=v.useRef(a);return k.current=a,v.useEffect(()=>{var E,I,L,$,q,F,H,V,X;if(T)return(L=(I=(E=window==null?void 0:window.google)===null||E===void 0?void 0:E.accounts)===null||I===void 0?void 0:I.id)===null||L===void 0||L.initialize({client_id:S,callback:Y=>{var z;if(!(Y!=null&&Y.credential))return(z=P.current)===null||z===void 0?void 0:z.call(P);const{credential:G,select_by:ie}=Y;C.current({credential:G,clientId:YW(Y),select_by:ie})},...b}),(F=(q=($=window==null?void 0:window.google)===null||$===void 0?void 0:$.accounts)===null||q===void 0?void 0:q.id)===null||F===void 0||F.renderButton(j.current,{type:i,theme:s,size:o,text:l,shape:c,logo_alignment:d,width:f,locale:_,click_listener:p,state:g}),n&&((X=(V=(H=window==null?void 0:window.google)===null||H===void 0?void 0:H.accounts)===null||V===void 0?void 0:V.id)===null||X===void 0||X.prompt(k.current)),()=>{var Y,z,G;n&&((G=(z=(Y=window==null?void 0:window.google)===null||Y===void 0?void 0:Y.accounts)===null||z===void 0?void 0:z.id)===null||G===void 0||G.cancel())}},[S,T,n,i,s,o,l,c,d,f,_]),Se.createElement("div",{...x,ref:j,style:{height:QW[o],...x==null?void 0:x.style}})}var qx={},sI;function JW(){if(sI)return qx;sI=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.parse=o,qx.serialize=d;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,x){const b=new s,j=g.length;if(j<2)return b;const S=(x==null?void 0:x.decode)||f;let _=0;do{const T=g.indexOf("=",_);if(T===-1)break;const C=g.indexOf(";",_),P=C===-1?j:C;if(T>P){_=g.lastIndexOf(";",T-1)+1;continue}const k=l(g,_,T),E=c(g,T,k),I=g.slice(k,E);if(b[I]===void 0){let L=l(g,T+1,P),$=c(g,P,L);const q=S(g.slice(L,$));b[I]=q}_=P+1}while(_<j);return b}function l(g,x,b){do{const j=g.charCodeAt(x);if(j!==32&&j!==9)return x}while(++x<b);return b}function c(g,x,b){for(;x>b;){const j=g.charCodeAt(--x);if(j!==32&&j!==9)return x+1}return b}function d(g,x,b){const j=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(g))throw new TypeError(`argument name is invalid: ${g}`);const S=j(x);if(!e.test(S))throw new TypeError(`argument val is invalid: ${x}`);let _=g+"="+S;if(!b)return _;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);_+="; Max-Age="+b.maxAge}if(b.domain){if(!n.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);_+="; Domain="+b.domain}if(b.path){if(!a.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);_+="; Path="+b.path}if(b.expires){if(!p(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);_+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(_+="; HttpOnly"),b.secure&&(_+="; Secure"),b.partitioned&&(_+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return _}function f(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return qx}JW();var oI="popstate";function ZW(t={}){function e(a,i){let{pathname:s,search:o,hash:l}=a.location;return cE("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){return typeof i=="string"?i:Av(i)}return tK(e,n,null,t)}function Gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function io(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eK(){return Math.random().toString(36).substring(2,10)}function lI(t,e){return{usr:t.state,key:t.key,idx:e}}function cE(t,e,n=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Mg(e):e,state:n,key:e&&e.key||a||eK()}}function Av({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Mg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function tK(t,e,n,a={}){let{window:i=document.defaultView,v5Compat:s=!1}=a,o=i.history,l="POP",c=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let S=f(),_=S==null?null:S-d;d=S,c&&c({action:l,location:j.location,delta:_})}function g(S,_){l="PUSH";let T=cE(j.location,S,_);d=f()+1;let C=lI(T,d),P=j.createHref(T);try{o.pushState(C,"",P)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(P)}s&&c&&c({action:l,location:j.location,delta:1})}function x(S,_){l="REPLACE";let T=cE(j.location,S,_);d=f();let C=lI(T,d),P=j.createHref(T);o.replaceState(C,"",P),s&&c&&c({action:l,location:j.location,delta:0})}function b(S){return nK(S)}let j={get action(){return l},get location(){return t(i,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(oI,p),c=S,()=>{i.removeEventListener(oI,p),c=null}},createHref(S){return e(i,S)},createURL:b,encodeLocation(S){let _=b(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:x,go(S){return o.go(S)}};return j}function nK(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Gr(n,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Av(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function uz(t,e,n="/"){return rK(t,e,n,!1)}function rK(t,e,n,a){let i=typeof e=="string"?Mg(e):e,s=Mc(i.pathname||"/",n);if(s==null)return null;let o=dz(t);aK(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=mK(s);l=fK(o[c],d,a)}return l}function dz(t,e=[],n=[],a=""){let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Gr(c.relativePath.startsWith(a),`Absolute route path "${c.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(a.length));let d=Tc([a,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(Gr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),dz(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:dK(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of hz(s.path))i(s,o,c)}),e}function hz(t){let e=t.split("/");if(e.length===0)return[];let[n,...a]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(a.length===0)return i?[s,""]:[s];let o=hz(a.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function aK(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hK(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var iK=/^:[\w-]+$/,sK=3,oK=2,lK=1,cK=10,uK=-2,cI=t=>t==="*";function dK(t,e){let n=t.split("/"),a=n.length;return n.some(cI)&&(a+=uK),e&&(a+=oK),n.filter(i=>!cI(i)).reduce((i,s)=>i+(iK.test(s)?sK:s===""?lK:cK),a)}function hK(t,e){return t.length===e.length&&t.slice(0,-1).every((a,i)=>a===e[i])?t[t.length-1]-e[e.length-1]:0}function fK(t,e,n=!1){let{routesMeta:a}=t,i={},s="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=cw({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!p&&d&&n&&!a[a.length-1].route.index&&(p=cw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Tc([s,p.pathname]),pathnameBase:vK(Tc([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Tc([s,p.pathnameBase]))}return o}function cw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=pK(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:a.reduce((d,{paramName:f,isOptional:p},g)=>{if(f==="*"){let b=l[g]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[g];return p&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function pK(t,e=!1,n=!0){io(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function mK(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return io(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Mc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}function gK(t,e="/"){let{pathname:n,search:a="",hash:i=""}=typeof t=="string"?Mg(t):t;return{pathname:n?n.startsWith("/")?n:yK(n,e):e,search:bK(a),hash:jK(i)}}function yK(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function J_(t,e,n,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xK(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function MD(t){let e=xK(t);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function ID(t,e,n,a=!1){let i;typeof t=="string"?i=Mg(t):(i={...t},Gr(!i.pathname||!i.pathname.includes("?"),J_("?","pathname","search",i)),Gr(!i.pathname||!i.pathname.includes("#"),J_("#","pathname","hash",i)),Gr(!i.search||!i.search.includes("#"),J_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!a&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=gK(i,l),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}var Tc=t=>t.join("/").replace(/\/\/+/g,"/"),vK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wK(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var fz=["POST","PUT","PATCH","DELETE"];new Set(fz);var NK=["GET",...fz];new Set(NK);var Ig=v.createContext(null);Ig.displayName="DataRouter";var IN=v.createContext(null);IN.displayName="DataRouterState";var pz=v.createContext({isTransitioning:!1});pz.displayName="ViewTransition";var SK=v.createContext(new Map);SK.displayName="Fetchers";var _K=v.createContext(null);_K.displayName="Await";var Vo=v.createContext(null);Vo.displayName="Navigation";var _b=v.createContext(null);_b.displayName="Location";var Ho=v.createContext({outlet:null,matches:[],isDataRoute:!1});Ho.displayName="Route";var RD=v.createContext(null);RD.displayName="RouteError";function CK(t,{relative:e}={}){Gr(Rg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=v.useContext(Vo),{hash:i,pathname:s,search:o}=Cb(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Tc([n,s])),a.createHref({pathname:l,search:o,hash:i})}function Rg(){return v.useContext(_b)!=null}function $r(){return Gr(Rg(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(_b).location}var mz="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gz(t){v.useContext(Vo).static||v.useLayoutEffect(t)}function Lt(){let{isDataRoute:t}=v.useContext(Ho);return t?$K():TK()}function TK(){Gr(Rg(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Ig),{basename:e,navigator:n}=v.useContext(Vo),{matches:a}=v.useContext(Ho),{pathname:i}=$r(),s=JSON.stringify(MD(a)),o=v.useRef(!1);return gz(()=>{o.current=!0}),v.useCallback((c,d={})=>{if(io(o.current,mz),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=ID(c,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Tc([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,s,i,t])}v.createContext(null);function Fa(){let{matches:t}=v.useContext(Ho),e=t[t.length-1];return e?e.params:{}}function Cb(t,{relative:e}={}){let{matches:n}=v.useContext(Ho),{pathname:a}=$r(),i=JSON.stringify(MD(n));return v.useMemo(()=>ID(t,JSON.parse(i),a,e==="path"),[t,i,a,e])}function kK(t,e){return yz(t,e)}function yz(t,e,n,a){var T;Gr(Rg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=v.useContext(Vo),{matches:o}=v.useContext(Ho),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";xz(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=$r(),x;if(e){let C=typeof e=="string"?Mg(e):e;Gr(f==="/"||((T=C.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=g;let b=x.pathname||"/",j=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=!s&&n&&n.matches&&n.matches.length>0?n.matches:uz(t,{pathname:j});io(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),io(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=OK(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Tc([f,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Tc([f,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,a);return e&&_?v.createElement(_b.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function AK(){let t=FK(),e=wK(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,o)}var EK=v.createElement(AK,null),PK=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(Ho.Provider,{value:this.props.routeContext},v.createElement(RD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DK({routeContext:t,match:e,children:n}){let a=v.useContext(Ig);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Ho.Provider,{value:t},n)}function OK(t,e=[],n=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let c=i.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);Gr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=n,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,d,f)=>{let p,g=!1,x=null,b=null;n&&(p=s&&d.route.id?s[d.route.id]:void 0,x=d.route.errorElement||EK,o&&(l<0&&f===0?(xz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):l===f&&(g=!0,b=d.route.hydrateFallbackElement||null)));let j=e.concat(i.slice(0,f+1)),S=()=>{let _;return p?_=x:g?_=b:d.route.Component?_=v.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=c,v.createElement(DK,{match:d,routeContext:{outlet:c,matches:j,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?v.createElement(PK,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:S(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):S()},null)}function LD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MK(t){let e=v.useContext(Ig);return Gr(e,LD(t)),e}function IK(t){let e=v.useContext(IN);return Gr(e,LD(t)),e}function RK(t){let e=v.useContext(Ho);return Gr(e,LD(t)),e}function FD(t){let e=RK(t),n=e.matches[e.matches.length-1];return Gr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function LK(){return FD("useRouteId")}function FK(){var a;let t=v.useContext(RD),e=IK("useRouteError"),n=FD("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[n]}function $K(){let{router:t}=MK("useNavigate"),e=FD("useNavigate"),n=v.useRef(!1);return gz(()=>{n.current=!0}),v.useCallback(async(i,s={})=>{io(n.current,mz),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var uI={};function xz(t,e,n){!e&&!uI[t]&&(uI[t]=!0,io(!1,n))}v.memo(BK);function BK({routes:t,future:e,state:n}){return yz(t,void 0,n,e)}function tn({to:t,replace:e,state:n,relative:a}){Gr(Rg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=v.useContext(Vo);io(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(Ho),{pathname:o}=$r(),l=Lt(),c=ID(t,MD(s),o,a==="path"),d=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:a})},[l,d,a,e,n]),null}function xt(t){Gr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zK({basename:t="/",children:e=null,location:n,navigationType:a="POP",navigator:i,static:s=!1}){Gr(!Rg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Mg(n));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:g="default"}=n,x=v.useMemo(()=>{let b=Mc(c,o);return b==null?null:{location:{pathname:b,search:d,hash:f,state:p,key:g},navigationType:a}},[o,c,d,f,p,g,a]);return io(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(Vo.Provider,{value:l},v.createElement(_b.Provider,{children:e,value:x}))}function _m({children:t,location:e}){return kK(uE(t),e)}function uE(t,e=[]){let n=[];return v.Children.forEach(t,(a,i)=>{if(!v.isValidElement(a))return;let s=[...e,i];if(a.type===v.Fragment){n.push.apply(n,uE(a.props.children,s));return}Gr(a.type===xt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gr(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||s.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=uE(a.props.children,s)),n.push(o)}),n}var Yj="get",Qj="application/x-www-form-urlencoded";function RN(t){return t!=null&&typeof t.tagName=="string"}function qK(t){return RN(t)&&t.tagName.toLowerCase()==="button"}function UK(t){return RN(t)&&t.tagName.toLowerCase()==="form"}function VK(t){return RN(t)&&t.tagName.toLowerCase()==="input"}function HK(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GK(t,e){return t.button===0&&(!e||e==="_self")&&!HK(t)}function dE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let a=t[n];return e.concat(Array.isArray(a)?a.map(i=>[n,i]):[[n,a]])},[]))}function WK(t,e){let n=dE(t);return e&&e.forEach((a,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var hj=null;function KK(){if(hj===null)try{new FormData(document.createElement("form"),0),hj=!1}catch{hj=!0}return hj}var YK=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Z_(t){return t!=null&&!YK.has(t)?(io(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qj}"`),null):t}function QK(t,e){let n,a,i,s,o;if(UK(t)){let l=t.getAttribute("action");a=l?Mc(l,e):null,n=t.getAttribute("method")||Yj,i=Z_(t.getAttribute("enctype"))||Qj,s=new FormData(t)}else if(qK(t)||VK(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(a=c?Mc(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Yj,i=Z_(t.getAttribute("formenctype"))||Z_(l.getAttribute("enctype"))||Qj,s=new FormData(l,t),!KK()){let{name:d,type:f,value:p}=t;if(f==="image"){let g=d?`${d}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else d&&s.append(d,p)}}else{if(RN(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yj,a=null,i=Qj,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:a,method:n.toLowerCase(),encType:i,formData:s,body:o}}function $D(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function XK(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function JK(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ZK(t,e,n){let a=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await XK(s,n);return o.links?o.links():[]}return[]}));return rY(a.flat(1).filter(JK).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function dI(t,e,n,a,i,s){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>{var f;return n[d].pathname!==c.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):s==="data"?e.filter((c,d)=>{var p;let f=a.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function eY(t,e,{includeHydrateFallback:n}={}){return tY(t.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function tY(t){return[...new Set(t)]}function nY(t){let e={},n=Object.keys(t).sort();for(let a of n)e[a]=t[a];return e}function rY(t,e){let n=new Set;return new Set(e),t.reduce((a,i)=>{let s=JSON.stringify(nY(i));return n.has(s)||(n.add(s),a.push({key:s,link:i})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var aY=new Set([100,101,204,205]);function iY(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Mc(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function vz(){let t=v.useContext(Ig);return $D(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function sY(){let t=v.useContext(IN);return $D(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var BD=v.createContext(void 0);BD.displayName="FrameworkContext";function bz(){let t=v.useContext(BD);return $D(t,"You must render this element inside a <HydratedRouter> element"),t}function oY(t,e){let n=v.useContext(BD),[a,i]=v.useState(!1),[s,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,g=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let j=_=>{_.forEach(T=>{o(T.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return g.current&&S.observe(g.current),()=>{S.disconnect()}}},[t]),v.useEffect(()=>{if(a){let j=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(j)}}},[a]);let x=()=>{i(!0)},b=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,g,{}]:[s,g,{onFocus:Ux(l,x),onBlur:Ux(c,b),onMouseEnter:Ux(d,x),onMouseLeave:Ux(f,b),onTouchStart:Ux(p,x)}]:[!1,g,{}]}function Ux(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function lY({page:t,...e}){let{router:n}=vz(),a=v.useMemo(()=>uz(n.routes,t,n.basename),[n.routes,t,n.basename]);return a?v.createElement(uY,{page:t,matches:a,...e}):null}function cY(t){let{manifest:e,routeModules:n}=bz(),[a,i]=v.useState([]);return v.useEffect(()=>{let s=!1;return ZK(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),a}function uY({page:t,matches:e,...n}){let a=$r(),{manifest:i,routeModules:s}=bz(),{basename:o}=vz(),{loaderData:l,matches:c}=sY(),d=v.useMemo(()=>dI(t,e,c,i,a,"data"),[t,e,c,i,a]),f=v.useMemo(()=>dI(t,e,c,i,a,"assets"),[t,e,c,i,a]),p=v.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let b=new Set,j=!1;if(e.forEach(_=>{var C;let T=i.routes[_.route.id];!T||!T.hasLoader||(!d.some(P=>P.route.id===_.route.id)&&_.route.id in l&&((C=s[_.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?j=!0:b.add(_.route.id))}),b.size===0)return[];let S=iY(t,o);return j&&b.size>0&&S.searchParams.set("_routes",e.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[o,l,a,i,d,e,t,s]),g=v.useMemo(()=>eY(f,i),[f,i]),x=cY(f);return v.createElement(v.Fragment,null,p.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),g.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:j})=>v.createElement("link",{key:b,...j})))}function dY(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var jz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jz&&(window.__reactRouterVersion="7.6.0")}catch{}function hY({basename:t,children:e,window:n}){let a=v.useRef();a.current==null&&(a.current=ZW({window:n,v5Compat:!0}));let i=a.current,[s,o]=v.useState({action:i.action,location:i.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>i.listen(l),[i,l]),v.createElement(zK,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var wz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_r=v.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:i,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:p,...g},x){let{basename:b}=v.useContext(Vo),j=typeof d=="string"&&wz.test(d),S,_=!1;if(typeof d=="string"&&j&&(S=d,jz))try{let $=new URL(window.location.href),q=d.startsWith("//")?new URL($.protocol+d):new URL(d),F=Mc(q.pathname,b);q.origin===$.origin&&F!=null?d=F+q.search+q.hash:_=!0}catch{io(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=CK(d,{relative:i}),[C,P,k]=oY(a,g),E=gY(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:i,viewTransition:p});function I($){e&&e($),$.defaultPrevented||E($)}let L=v.createElement("a",{...g,...k,href:S||T,onClick:_||s?e:I,ref:dY(x,P),target:c,"data-discover":!j&&n==="render"?"true":void 0});return C&&!j?v.createElement(v.Fragment,null,L,v.createElement(lY,{page:T})):L});_r.displayName="Link";var fY=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:i=!1,style:s,to:o,viewTransition:l,children:c,...d},f){let p=Cb(o,{relative:d.relative}),g=$r(),x=v.useContext(IN),{navigator:b,basename:j}=v.useContext(Vo),S=x!=null&&jY(p)&&l===!0,_=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,T=g.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&j&&(C=Mc(C,j)||C);const P=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let k=T===_||!i&&T.startsWith(_)&&T.charAt(P)==="/",E=C!=null&&(C===_||!i&&C.startsWith(_)&&C.charAt(_.length)==="/"),I={isActive:k,isPending:E,isTransitioning:S},L=k?e:void 0,$;typeof a=="function"?$=a(I):$=[a,k?"active":null,E?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let q=typeof s=="function"?s(I):s;return v.createElement(_r,{...d,"aria-current":L,className:$,ref:f,style:q,to:o,viewTransition:l},typeof c=="function"?c(I):c)});fY.displayName="NavLink";var pY=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:i,state:s,method:o=Yj,action:l,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:p,...g},x)=>{let b=vY(),j=bY(l,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&wz.test(l),T=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let P=C.nativeEvent.submitter,k=(P==null?void 0:P.getAttribute("formmethod"))||o;b(P||C.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:s,relative:d,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:j,onSubmit:a?c:T,...g,"data-discover":!_&&t==="render"?"true":void 0})});pY.displayName="Form";function mY(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nz(t){let e=v.useContext(Ig);return Gr(e,mY(t)),e}function gY(t,{target:e,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}={}){let l=Lt(),c=$r(),d=Cb(t,{relative:s});return v.useCallback(f=>{if(GK(f,e)){f.preventDefault();let p=n!==void 0?n:Av(c)===Av(d);l(t,{replace:p,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[c,l,d,n,a,e,t,i,s,o])}function Sz(t){io(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=v.useRef(dE(t)),n=v.useRef(!1),a=$r(),i=v.useMemo(()=>WK(a.search,n.current?null:e.current),[a.search]),s=Lt(),o=v.useCallback((l,c)=>{const d=dE(typeof l=="function"?l(i):l);n.current=!0,s("?"+d,c)},[s,i]);return[i,o]}var yY=0,xY=()=>`__${String(++yY)}__`;function vY(){let{router:t}=Nz("useSubmit"),{basename:e}=v.useContext(Vo),n=LK();return v.useCallback(async(a,i={})=>{let{action:s,method:o,encType:l,formData:c,body:d}=QK(a,e);if(i.navigate===!1){let f=i.fetcherKey||xY();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function bY(t,{relative:e}={}){let{basename:n}=v.useContext(Vo),a=v.useContext(Ho);Gr(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),s={...Cb(t||".",{relative:e})},o=$r();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(f=>f==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Tc([n,s.pathname])),Av(s)}function jY(t,e={}){let n=v.useContext(pz);Gr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Nz("useViewTransitionState"),i=Cb(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Mc(n.currentLocation.pathname,a)||n.currentLocation.pathname,o=Mc(n.nextLocation.pathname,a)||n.nextLocation.pathname;return cw(i.pathname,o)!=null||cw(i.pathname,s)!=null}[...aY];var zD=XB();class wY extends v.Component{constructor(){super(...arguments);br(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){console.error("Uncaught error:",n,a)}render(){return this.state.hasError?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"5px"},children:[r.jsx("h1",{children:"Something went wrong."}),r.jsx("p",{children:"We are sorry for the inconvenience. Please try again later."})]}):this.props.children}}const _z=v.createContext(void 0),NY=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState({startDate:null,endDate:null}),[s,o]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState(null),p=v.useCallback(()=>n(!0),[]),g=v.useCallback(()=>n(!1),[]),x=v.useCallback(()=>n(P=>!P),[]),b=v.useCallback(P=>{f(()=>P)},[]),j=v.useCallback(P=>{d?d(P):console.warn("Analysis navigator not registered")},[d]),[S,_]=v.useState(null),T=v.useCallback(P=>{_(()=>P)},[]),C=v.useCallback(async()=>S?await S():(console.warn("Analysis refresher not registered"),null),[S]);return r.jsx(_z.Provider,{value:{isOpen:e,openAssistant:p,closeAssistant:g,toggleAssistant:x,analysisDateRange:a,setAnalysisDateRange:i,analysisData:s,setAnalysisData:o,analysisNavigate:j,registerAnalysisNavigator:b,refreshAnalysis:C,registerAnalysisRefresher:T,pageContext:l,setPageContext:c},children:t})},LN=()=>{const t=v.useContext(_z);if(t===void 0)throw new Error("useClinicAssistantContext must be used within a ClinicAssistantProvider");return t},Cz=v.createContext(void 0),SY=({children:t})=>{const[e,n]=v.useState([]),[a,i]=v.useState(null),[s,o]=v.useState(""),[l,c]=v.useState(0),[d,f]=v.useState([]),p=v.useCallback(j=>{n(S=>[...S,j])},[]),g=v.useCallback((j,S)=>{n(_=>_.map(T=>T.id===j?{...T,...S}:T))},[]),x=v.useCallback(j=>{n(S=>S.filter(_=>_.id!==j))},[]),b=v.useCallback(()=>{n([]),i(null),o(""),c(0),f([])},[]);return r.jsx(Cz.Provider,{value:{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:d,setDistributors:f,addPurchaseRow:p,updatePurchaseRow:g,removePurchaseRow:x,resetPurchase:b},children:t})},Tz=()=>{const t=v.useContext(Cz);if(!t)throw new Error("usePurchaseContext must be used within a PurchaseProvider");return t},kz=v.createContext(void 0),_Y=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(""),s=v.useCallback(()=>n(!0),[]),o=v.useCallback(()=>n(!1),[]),l=v.useCallback(()=>n(c=>!c),[]);return v.useEffect(()=>{const c=d=>{(d.ctrlKey||d.metaKey)&&d.key==="k"&&(d.preventDefault(),l()),d.key==="Escape"&&e&&o()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,l,o]),r.jsx(kz.Provider,{value:{isOpen:e,openCommandBar:s,closeCommandBar:o,toggleCommandBar:l,preFilledQuery:a,setPreFilledQuery:i},children:t})},Ic=()=>{const t=v.useContext(kz);if(t===void 0)throw new Error("useCommandBar must be used within a CommandBarProvider");return t};function Rc(t){return Array.isArray?Array.isArray(t):Pz(t)==="[object Array]"}function CY(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function TY(t){return t==null?"":CY(t)}function El(t){return typeof t=="string"}function Az(t){return typeof t=="number"}function kY(t){return t===!0||t===!1||AY(t)&&Pz(t)=="[object Boolean]"}function Ez(t){return typeof t=="object"}function AY(t){return Ez(t)&&t!==null}function As(t){return t!=null}function eC(t){return!t.trim().length}function Pz(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const EY="Incorrect 'index' type",PY=t=>`Invalid value for key ${t}`,DY=t=>`Pattern length exceeds max of ${t}.`,OY=t=>`Missing ${t} property in key`,MY=t=>`Property 'weight' in key '${t}' must be a positive integer`,hI=Object.prototype.hasOwnProperty;class IY{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(a=>{let i=Dz(a);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(a=>{a.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Dz(t){let e=null,n=null,a=null,i=1,s=null;if(El(t)||Rc(t))a=t,e=fI(t),n=hE(t);else{if(!hI.call(t,"name"))throw new Error(OY("name"));const o=t.name;if(a=o,hI.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(MY(o));e=fI(o),n=hE(o),s=t.getFn}return{path:e,id:n,weight:i,src:a,getFn:s}}function fI(t){return Rc(t)?t:t.split(".")}function hE(t){return Rc(t)?t.join("."):t}function RY(t,e){let n=[],a=!1;const i=(s,o,l)=>{if(As(s))if(!o[l])n.push(s);else{let c=o[l];const d=s[c];if(!As(d))return;if(l===o.length-1&&(El(d)||Az(d)||kY(d)))n.push(TY(d));else if(Rc(d)){a=!0;for(let f=0,p=d.length;f<p;f+=1)i(d[f],o,l+1)}else o.length&&i(d,o,l+1)}};return i(t,El(e)?e.split("."):e,0),a?n:n[0]}const LY={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},FY={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},$Y={location:0,threshold:.6,distance:100},BY={useExtendedSearch:!1,getFn:RY,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var cn={...FY,...LY,...$Y,...BY};const zY=/[^ ]+/g;function qY(t=1,e=3){const n=new Map,a=Math.pow(10,e);return{get(i){const s=i.match(zY).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),l=parseFloat(Math.round(o*a)/a);return n.set(s,l),l},clear(){n.clear()}}}class qD{constructor({getFn:e=cn.getFn,fieldNormWeight:n=cn.fieldNormWeight}={}){this.norm=qY(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,a)=>{this._keysMap[n.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,El(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();El(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,a=this.size();n<a;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!As(e)||eC(e))return;let a={v:e,i:n,n:this.norm.get(e)};this.records.push(a)}_addObject(e,n){let a={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(As(o)){if(Rc(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:d,value:f}=c.pop();if(As(f))if(El(f)&&!eC(f)){let p={v:f,i:d,n:this.norm.get(f)};l.push(p)}else Rc(f)&&f.forEach((p,g)=>{c.push({nestedArrIndex:g,value:p})})}a.$[s]=l}else if(El(o)&&!eC(o)){let l={v:o,n:this.norm.get(o)};a.$[s]=l}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function Oz(t,e,{getFn:n=cn.getFn,fieldNormWeight:a=cn.fieldNormWeight}={}){const i=new qD({getFn:n,fieldNormWeight:a});return i.setKeys(t.map(Dz)),i.setSources(e),i.create(),i}function UY(t,{getFn:e=cn.getFn,fieldNormWeight:n=cn.fieldNormWeight}={}){const{keys:a,records:i}=t,s=new qD({getFn:e,fieldNormWeight:n});return s.setKeys(a),s.setIndexRecords(i),s}function fj(t,{errors:e=0,currentLocation:n=0,expectedLocation:a=0,distance:i=cn.distance,ignoreLocation:s=cn.ignoreLocation}={}){const o=e/t.length;if(s)return o;const l=Math.abs(a-n);return i?o+l/i:l?1:o}function VY(t=[],e=cn.minMatchCharLength){let n=[],a=-1,i=-1,s=0;for(let o=t.length;s<o;s+=1){let l=t[s];l&&a===-1?a=s:!l&&a!==-1&&(i=s-1,i-a+1>=e&&n.push([a,i]),a=-1)}return t[s-1]&&s-a>=e&&n.push([a,s-1]),n}const Kh=32;function HY(t,e,n,{location:a=cn.location,distance:i=cn.distance,threshold:s=cn.threshold,findAllMatches:o=cn.findAllMatches,minMatchCharLength:l=cn.minMatchCharLength,includeMatches:c=cn.includeMatches,ignoreLocation:d=cn.ignoreLocation}={}){if(e.length>Kh)throw new Error(DY(Kh));const f=e.length,p=t.length,g=Math.max(0,Math.min(a,p));let x=s,b=g;const j=l>1||c,S=j?Array(p):[];let _;for(;(_=t.indexOf(e,b))>-1;){let I=fj(e,{currentLocation:_,expectedLocation:g,distance:i,ignoreLocation:d});if(x=Math.min(I,x),b=_+f,j){let L=0;for(;L<f;)S[_+L]=1,L+=1}}b=-1;let T=[],C=1,P=f+p;const k=1<<f-1;for(let I=0;I<f;I+=1){let L=0,$=P;for(;L<$;)fj(e,{errors:I,currentLocation:g+$,expectedLocation:g,distance:i,ignoreLocation:d})<=x?L=$:P=$,$=Math.floor((P-L)/2+L);P=$;let q=Math.max(1,g-$+1),F=o?p:Math.min(g+$,p)+f,H=Array(F+2);H[F+1]=(1<<I)-1;for(let X=F;X>=q;X-=1){let Y=X-1,z=n[t.charAt(Y)];if(j&&(S[Y]=+!!z),H[X]=(H[X+1]<<1|1)&z,I&&(H[X]|=(T[X+1]|T[X])<<1|1|T[X+1]),H[X]&k&&(C=fj(e,{errors:I,currentLocation:Y,expectedLocation:g,distance:i,ignoreLocation:d}),C<=x)){if(x=C,b=Y,b<=g)break;q=Math.max(1,2*g-b)}}if(fj(e,{errors:I+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>x)break;T=H}const E={isMatch:b>=0,score:Math.max(.001,C)};if(j){const I=VY(S,l);I.length?c&&(E.indices=I):E.isMatch=!1}return E}function GY(t){let e={};for(let n=0,a=t.length;n<a;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<a-n-1}return e}const uw=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Mz{constructor(e,{location:n=cn.location,threshold:a=cn.threshold,distance:i=cn.distance,includeMatches:s=cn.includeMatches,findAllMatches:o=cn.findAllMatches,minMatchCharLength:l=cn.minMatchCharLength,isCaseSensitive:c=cn.isCaseSensitive,ignoreDiacritics:d=cn.ignoreDiacritics,ignoreLocation:f=cn.ignoreLocation}={}){if(this.options={location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:f},e=c?e:e.toLowerCase(),e=d?uw(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const p=(x,b)=>{this.chunks.push({pattern:x,alphabet:GY(x),startIndex:b})},g=this.pattern.length;if(g>Kh){let x=0;const b=g%Kh,j=g-b;for(;x<j;)p(this.pattern.substr(x,Kh),x),x+=Kh;if(b){const S=g-Kh;p(this.pattern.substr(S),S)}}else p(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=a?uw(e):e,this.pattern===e){let j={isMatch:!0,score:0};return i&&(j.indices=[[0,e.length-1]]),j}const{location:s,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,ignoreLocation:f}=this.options;let p=[],g=0,x=!1;this.chunks.forEach(({pattern:j,alphabet:S,startIndex:_})=>{const{isMatch:T,score:C,indices:P}=HY(e,j,S,{location:s+_,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,includeMatches:i,ignoreLocation:f});T&&(x=!0),g+=C,T&&P&&(p=[...p,...P])});let b={isMatch:x,score:x?g/this.chunks.length:1};return x&&i&&(b.indices=p),b}}class fd{constructor(e){this.pattern=e}static isMultiMatch(e){return pI(e,this.multiRegex)}static isSingleMatch(e){return pI(e,this.singleRegex)}search(){}}function pI(t,e){const n=t.match(e);return n?n[1]:null}class WY extends fd{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class KY extends fd{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const a=e.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class YY extends fd{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class QY extends fd{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class XY extends fd{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class JY extends fd{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Iz extends fd{constructor(e,{location:n=cn.location,threshold:a=cn.threshold,distance:i=cn.distance,includeMatches:s=cn.includeMatches,findAllMatches:o=cn.findAllMatches,minMatchCharLength:l=cn.minMatchCharLength,isCaseSensitive:c=cn.isCaseSensitive,ignoreDiacritics:d=cn.ignoreDiacritics,ignoreLocation:f=cn.ignoreLocation}={}){super(e),this._bitapSearch=new Mz(e,{location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Rz extends fd{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,a;const i=[],s=this.pattern.length;for(;(a=e.indexOf(this.pattern,n))>-1;)n=a+s,i.push([a,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const fE=[WY,Rz,YY,QY,JY,XY,KY,Iz],mI=fE.length,ZY=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,eQ="|";function tQ(t,e={}){return t.split(eQ).map(n=>{let a=n.trim().split(ZY).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=a.length;s<o;s+=1){const l=a[s];let c=!1,d=-1;for(;!c&&++d<mI;){const f=fE[d];let p=f.isMultiMatch(l);p&&(i.push(new f(p,e)),c=!0)}if(!c)for(d=-1;++d<mI;){const f=fE[d];let p=f.isSingleMatch(l);if(p){i.push(new f(p,e));break}}}return i})}const nQ=new Set([Iz.type,Rz.type]);class rQ{constructor(e,{isCaseSensitive:n=cn.isCaseSensitive,ignoreDiacritics:a=cn.ignoreDiacritics,includeMatches:i=cn.includeMatches,minMatchCharLength:s=cn.minMatchCharLength,ignoreLocation:o=cn.ignoreLocation,findAllMatches:l=cn.findAllMatches,location:c=cn.location,threshold:d=cn.threshold,distance:f=cn.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:c,threshold:d,distance:f},e=n?e:e.toLowerCase(),e=a?uw(e):e,this.pattern=e,this.query=tQ(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:i,ignoreDiacritics:s}=this.options;e=i?e:e.toLowerCase(),e=s?uw(e):e;let o=0,l=[],c=0;for(let d=0,f=n.length;d<f;d+=1){const p=n[d];l.length=0,o=0;for(let g=0,x=p.length;g<x;g+=1){const b=p[g],{isMatch:j,indices:S,score:_}=b.search(e);if(j){if(o+=1,c+=_,a){const T=b.constructor.type;nQ.has(T)?l=[...l,...S]:l.push(S)}}else{c=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:c/o};return a&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const pE=[];function aQ(...t){pE.push(...t)}function mE(t,e){for(let n=0,a=pE.length;n<a;n+=1){let i=pE[n];if(i.condition(t,e))return new i(t,e)}return new Mz(t,e)}const dw={AND:"$and",OR:"$or"},gE={PATH:"$path",PATTERN:"$val"},yE=t=>!!(t[dw.AND]||t[dw.OR]),iQ=t=>!!t[gE.PATH],sQ=t=>!Rc(t)&&Ez(t)&&!yE(t),gI=t=>({[dw.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Lz(t,e,{auto:n=!0}={}){const a=i=>{let s=Object.keys(i);const o=iQ(i);if(!o&&s.length>1&&!yE(i))return a(gI(i));if(sQ(i)){const c=o?i[gE.PATH]:s[0],d=o?i[gE.PATTERN]:i[c];if(!El(d))throw new Error(PY(c));const f={keyId:hE(c),pattern:d};return n&&(f.searcher=mE(d,e)),f}let l={children:[],operator:s[0]};return s.forEach(c=>{const d=i[c];Rc(d)&&d.forEach(f=>{l.children.push(a(f))})}),l};return yE(t)||(t=gI(t)),a(t)}function oQ(t,{ignoreFieldNorm:e=cn.ignoreFieldNorm}){t.forEach(n=>{let a=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;a*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:s))}),n.score=a})}function lQ(t,e){const n=t.matches;e.matches=[],As(n)&&n.forEach(a=>{if(!As(a.indices)||!a.indices.length)return;const{indices:i,value:s}=a;let o={indices:i,value:s};a.key&&(o.key=a.key.src),a.idx>-1&&(o.refIndex=a.idx),e.matches.push(o)})}function cQ(t,e){e.score=t.score}function uQ(t,e,{includeMatches:n=cn.includeMatches,includeScore:a=cn.includeScore}={}){const i=[];return n&&i.push(lQ),a&&i.push(cQ),t.map(s=>{const{idx:o}=s,l={item:e[o],refIndex:o};return i.length&&i.forEach(c=>{c(s,l)}),l})}class lo{constructor(e,n={},a){this.options={...cn,...n},this.options.useExtendedSearch,this._keyStore=new IY(this.options.keys),this.setCollection(e,a)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof qD))throw new Error(EY);this._myIndex=n||Oz(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){As(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let a=0,i=this._docs.length;a<i;a+=1){const s=this._docs[a];e(s,a)&&(this.removeAt(a),a-=1,i-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:a,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let c=El(e)?El(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return oQ(c,{ignoreFieldNorm:l}),s&&c.sort(o),Az(n)&&n>-1&&(c=c.slice(0,n)),uQ(c,this._docs,{includeMatches:a,includeScore:i})}_searchStringList(e){const n=mE(e,this.options),{records:a}=this._myIndex,i=[];return a.forEach(({v:s,i:o,n:l})=>{if(!As(s))return;const{isMatch:c,score:d,indices:f}=n.searchIn(s);c&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:f}]})}),i}_searchLogical(e){const n=Lz(e,this.options),a=(l,c,d)=>{if(!l.children){const{keyId:p,searcher:g}=l,x=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:g});return x&&x.length?[{idx:d,item:c,matches:x}]:[]}const f=[];for(let p=0,g=l.children.length;p<g;p+=1){const x=l.children[p],b=a(x,c,d);if(b.length)f.push(...b);else if(l.operator===dw.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:c})=>{if(As(l)){let d=a(n,l,c);d.length&&(s[c]||(s[c]={idx:c,item:l,matches:[]},o.push(s[c])),d.forEach(({matches:f})=>{s[c].matches.push(...f)}))}}),o}_searchObjectList(e){const n=mE(e,this.options),{keys:a,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!As(o))return;let c=[];a.forEach((d,f)=>{c.push(...this._findMatches({key:d,value:o[f],searcher:n}))}),c.length&&s.push({idx:l,item:o,matches:c})}),s}_findMatches({key:e,value:n,searcher:a}){if(!As(n))return[];let i=[];if(Rc(n))n.forEach(({v:s,i:o,n:l})=>{if(!As(s))return;const{isMatch:c,score:d,indices:f}=a.searchIn(s);c&&i.push({score:d,key:e,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:c,indices:d}=a.searchIn(s);l&&i.push({score:c,key:e,value:s,norm:o,indices:d})}return i}}lo.version="7.1.0";lo.createIndex=Oz;lo.parseIndex=UY;lo.config=cn;lo.parseQuery=Lz;aQ(rQ);var tC,yI;function dQ(){if(yI)return tC;yI=1;var t="Expected a function",e=NaN,n="[object Symbol]",a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof no=="object"&&no&&no.Object===Object&&no,d=typeof self=="object"&&self&&self.Object===Object&&self,f=c||d||Function("return this")(),p=Object.prototype,g=p.toString,x=Math.max,b=Math.min,j=function(){return f.Date.now()};function S(k,E,I){var L,$,q,F,H,V,X=0,Y=!1,z=!1,G=!0;if(typeof k!="function")throw new TypeError(t);E=P(E)||0,_(I)&&(Y=!!I.leading,z="maxWait"in I,q=z?x(P(I.maxWait)||0,E):q,G="trailing"in I?!!I.trailing:G);function ie(Le){var be=L,Ce=$;return L=$=void 0,X=Le,F=k.apply(Ce,be),F}function W(Le){return X=Le,H=setTimeout(je,E),Y?ie(Le):F}function B(Le){var be=Le-V,Ce=Le-X,Ae=E-be;return z?b(Ae,q-Ce):Ae}function ce(Le){var be=Le-V,Ce=Le-X;return V===void 0||be>=E||be<0||z&&Ce>=q}function je(){var Le=j();if(ce(Le))return K(Le);H=setTimeout(je,B(Le))}function K(Le){return H=void 0,G&&L?ie(Le):(L=$=void 0,F)}function Ie(){H!==void 0&&clearTimeout(H),X=0,L=V=$=H=void 0}function Ue(){return H===void 0?F:K(j())}function ze(){var Le=j(),be=ce(Le);if(L=arguments,$=this,V=Le,be){if(H===void 0)return W(V);if(z)return H=setTimeout(je,E),ie(V)}return H===void 0&&(H=setTimeout(je,E)),F}return ze.cancel=Ie,ze.flush=Ue,ze}function _(k){var E=typeof k;return!!k&&(E=="object"||E=="function")}function T(k){return!!k&&typeof k=="object"}function C(k){return typeof k=="symbol"||T(k)&&g.call(k)==n}function P(k){if(typeof k=="number")return k;if(C(k))return e;if(_(k)){var E=typeof k.valueOf=="function"?k.valueOf():k;k=_(E)?E+"":E}if(typeof k!="string")return k===0?k:+k;k=k.replace(a,"");var I=s.test(k);return I||o.test(k)?l(k.slice(2),I?2:8):i.test(k)?e:+k}return tC=S,tC}var hQ=dQ();const Uc=Wn(hQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pQ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),xI=t=>{const e=pQ(t);return e.charAt(0).toUpperCase()+e.slice(1)},Fz=(...t)=>t.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:i="",children:s,iconNode:o,...l},c)=>v.createElement("svg",{ref:c,...mQ,width:e,height:e,stroke:t,strokeWidth:a?Number(n)*24/Number(e):n,className:Fz("lucide",i),...l},[...o.map(([d,f])=>v.createElement(d,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(t,e)=>{const n=v.forwardRef(({className:a,...i},s)=>v.createElement(gQ,{ref:s,iconNode:e,className:Fz(`lucide-${fQ(xI(t))}`,`lucide-${t}`,a),...i}));return n.displayName=xI(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Nc=dt("activity",yQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],$z=dt("align-justify",xQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],vI=dt("arrow-down",vQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],on=dt("arrow-left",bQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],bI=dt("arrow-up",jQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],NQ=dt("beaker",wQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],_Q=dt("bed-double",SQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],TQ=dt("bed",CQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],AQ=dt("bell",kQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],jI=dt("book-open",EQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Ev=dt("bot",PQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],OQ=dt("brain-circuit",DQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],UD=dt("brain",MQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["path",{d:"M12 11v4",key:"a6ujw6"}],["path",{d:"M14 13h-4",key:"1pl8zg"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M18 6v14",key:"1mu4gy"}],["path",{d:"M6 6v14",key:"1s15cj"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],RQ=dt("briefcase-medical",IQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],FQ=dt("building",LQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],wI=dt("calendar-check-2",$Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],VD=dt("calendar-days",BQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ua=dt("calendar",zQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],xE=dt("camera",qQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],vE=dt("chart-pie",UQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Fo=dt("check",VQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bz=dt("chevron-down",HQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Tb=dt("chevron-left",GQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pd=dt("chevron-right",WQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],YQ=dt("chevron-up",KQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Wr=dt("circle-alert",QQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Go=dt("circle-check-big",XQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],dv=dt("circle-check",JQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pj=dt("circle-help",ZQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],NI=dt("circle-minus",eX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ps=dt("circle-plus",tX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],rX=dt("circle-user",nX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Zm=dt("clipboard-list",aX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Xj=dt("clipboard",iX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],kb=dt("clock",sX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],lX=dt("command",oX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],SI=dt("copy",cX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],hw=dt("credit-card",uX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],cd=dt("dollar-sign",dX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],zz=dt("download",hX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Im=dt("eye",fX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],mX=dt("file-check",pX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ta=dt("file-text",gX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],nC=dt("file",yX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],vX=dt("film",xX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],ls=dt("flask-conical",bX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wX=dt("funnel",jX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],bE=dt("globe",NX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],xf=dt("grid-3x3",SX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Ka=dt("hash",_X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],TX=dt("heart-pulse",CX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],AX=dt("heart",kX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],jE=dt("house",EX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_I=dt("image",PX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Pl=dt("info",DX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],qz=dt("key",OX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],eg=dt("layout-dashboard",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Uz=dt("layout-grid",IX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],CI=dt("lightbulb",RX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Vz=dt("link",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Ab=dt("list",FX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],so=dt("loader-circle",$X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],zX=dt("loader",BX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],UX=dt("lock",qX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],HX=dt("log-out",VX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],TI=dt("mail",GX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Hz=dt("map-pin",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Gz=dt("maximize-2",KX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],rC=dt("message-circle",YX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],XX=dt("mic-off",QX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],FN=dt("mic",JX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],eJ=dt("minimize-2",ZX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],nJ=dt("monitor",tJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],aJ=dt("music",rJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],kI=dt("package-open",iJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sJ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ud=dt("package",sJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],lJ=dt("palette",oJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],AI=dt("panels-top-left",cJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uJ=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],HD=dt("paperclip",uJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],hJ=dt("pause",dJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ro=dt("pen",fJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],mJ=dt("pencil",pJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],yJ=dt("percent",gJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],tg=dt("phone",xJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],kc=dt("pill",vJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Wz=dt("play",bJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hn=dt("plus",jJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],vf=dt("printer",wJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],wE=dt("refresh-cw",NJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],EI=dt("rocket",SJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],CJ=dt("rotate-ccw",_J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Kz=dt("rotate-cw",TJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cs=dt("save",kJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],In=dt("search",AJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$N=dt("send",EJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],PI=dt("server-crash",PJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dd=dt("settings",DJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Yz=dt("share-2",OJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],IJ=dt("shield-check",MJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ng=dt("shield",RJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],NE=dt("shopping-cart",LJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],$J=dt("smile",FJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],fw=dt("sparkles",BJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],zo=dt("split",zJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],$i=dt("square-pen",qJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],VJ=dt("square",UJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],DI=dt("star",HJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],bf=dt("stethoscope",GJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Eb=dt("table",WJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],YJ=dt("tag",KJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],XJ=dt("target",QJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Vn=dt("trash-2",JJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],eZ=dt("trending-up",ZJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nZ=dt("triangle-alert",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],GD=dt("truck",rZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],SE=dt("upload",aZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Qz=dt("user-check",iZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],BN=dt("user-plus",sZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jn=dt("user",oZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ds=dt("users",lZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],uZ=dt("video",cZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],pw=dt("wallet",dZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ft=dt("x",hZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],OI=dt("zap",fZ);function pZ(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const mZ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gZ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yZ={};function MI(t,e){return(yZ.jsx?gZ:mZ).test(t)}const xZ=/[ \t\n\f\r]/g;function vZ(t){return typeof t=="object"?t.type==="text"?II(t.value):!1:II(t)}function II(t){return t.replace(xZ,"")===""}class Pb{constructor(e,n,a){this.normal=n,this.property=e,a&&(this.space=a)}}Pb.prototype.normal={};Pb.prototype.property={};Pb.prototype.space=void 0;function Xz(t,e){const n={},a={};for(const i of t)Object.assign(n,i.property),Object.assign(a,i.normal);return new Pb(n,a,e)}function _E(t){return t.toLowerCase()}class hs{constructor(e,n){this.attribute=n,this.property=e}}hs.prototype.attribute="";hs.prototype.booleanish=!1;hs.prototype.boolean=!1;hs.prototype.commaOrSpaceSeparated=!1;hs.prototype.commaSeparated=!1;hs.prototype.defined=!1;hs.prototype.mustUseProperty=!1;hs.prototype.number=!1;hs.prototype.overloadedBoolean=!1;hs.prototype.property="";hs.prototype.spaceSeparated=!1;hs.prototype.space=void 0;let bZ=0;const gn=Of(),ma=Of(),Jz=Of(),_t=Of(),Or=Of(),Rm=Of(),_s=Of();function Of(){return 2**++bZ}const CE=Object.freeze(Object.defineProperty({__proto__:null,boolean:gn,booleanish:ma,commaOrSpaceSeparated:_s,commaSeparated:Rm,number:_t,overloadedBoolean:Jz,spaceSeparated:Or},Symbol.toStringTag,{value:"Module"})),aC=Object.keys(CE);class WD extends hs{constructor(e,n,a,i){let s=-1;if(super(e,n),RI(this,"space",i),typeof a=="number")for(;++s<aC.length;){const o=aC[s];RI(this,aC[s],(a&CE[o])===CE[o])}}}WD.prototype.defined=!0;function RI(t,e,n){n&&(t[e]=n)}function Lg(t){const e={},n={};for(const[a,i]of Object.entries(t.properties)){const s=new WD(a,t.transform(t.attributes||{},a),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(a)&&(s.mustUseProperty=!0),e[a]=s,n[_E(a)]=a,n[_E(s.attribute)]=a}return new Pb(e,n,t.space)}const Zz=Lg({properties:{ariaActiveDescendant:null,ariaAtomic:ma,ariaAutoComplete:null,ariaBusy:ma,ariaChecked:ma,ariaColCount:_t,ariaColIndex:_t,ariaColSpan:_t,ariaControls:Or,ariaCurrent:null,ariaDescribedBy:Or,ariaDetails:null,ariaDisabled:ma,ariaDropEffect:Or,ariaErrorMessage:null,ariaExpanded:ma,ariaFlowTo:Or,ariaGrabbed:ma,ariaHasPopup:null,ariaHidden:ma,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Or,ariaLevel:_t,ariaLive:null,ariaModal:ma,ariaMultiLine:ma,ariaMultiSelectable:ma,ariaOrientation:null,ariaOwns:Or,ariaPlaceholder:null,ariaPosInSet:_t,ariaPressed:ma,ariaReadOnly:ma,ariaRelevant:null,ariaRequired:ma,ariaRoleDescription:Or,ariaRowCount:_t,ariaRowIndex:_t,ariaRowSpan:_t,ariaSelected:ma,ariaSetSize:_t,ariaSort:null,ariaValueMax:_t,ariaValueMin:_t,ariaValueNow:_t,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function eq(t,e){return e in t?t[e]:e}function tq(t,e){return eq(t,e.toLowerCase())}const jZ=Lg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Rm,acceptCharset:Or,accessKey:Or,action:null,allow:null,allowFullScreen:gn,allowPaymentRequest:gn,allowUserMedia:gn,alt:null,as:null,async:gn,autoCapitalize:null,autoComplete:Or,autoFocus:gn,autoPlay:gn,blocking:Or,capture:null,charSet:null,checked:gn,cite:null,className:Or,cols:_t,colSpan:null,content:null,contentEditable:ma,controls:gn,controlsList:Or,coords:_t|Rm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:gn,defer:gn,dir:null,dirName:null,disabled:gn,download:Jz,draggable:ma,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:gn,formTarget:null,headers:Or,height:_t,hidden:gn,high:_t,href:null,hrefLang:null,htmlFor:Or,httpEquiv:Or,id:null,imageSizes:null,imageSrcSet:null,inert:gn,inputMode:null,integrity:null,is:null,isMap:gn,itemId:null,itemProp:Or,itemRef:Or,itemScope:gn,itemType:Or,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:gn,low:_t,manifest:null,max:null,maxLength:_t,media:null,method:null,min:null,minLength:_t,multiple:gn,muted:gn,name:null,nonce:null,noModule:gn,noValidate:gn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:gn,optimum:_t,pattern:null,ping:Or,placeholder:null,playsInline:gn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:gn,referrerPolicy:null,rel:Or,required:gn,reversed:gn,rows:_t,rowSpan:_t,sandbox:Or,scope:null,scoped:gn,seamless:gn,selected:gn,shadowRootClonable:gn,shadowRootDelegatesFocus:gn,shadowRootMode:null,shape:null,size:_t,sizes:null,slot:null,span:_t,spellCheck:ma,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_t,step:null,style:null,tabIndex:_t,target:null,title:null,translate:null,type:null,typeMustMatch:gn,useMap:null,value:ma,width:_t,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Or,axis:null,background:null,bgColor:null,border:_t,borderColor:null,bottomMargin:_t,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:gn,declare:gn,event:null,face:null,frame:null,frameBorder:null,hSpace:_t,leftMargin:_t,link:null,longDesc:null,lowSrc:null,marginHeight:_t,marginWidth:_t,noResize:gn,noHref:gn,noShade:gn,noWrap:gn,object:null,profile:null,prompt:null,rev:null,rightMargin:_t,rules:null,scheme:null,scrolling:ma,standby:null,summary:null,text:null,topMargin:_t,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_t,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:gn,disableRemotePlayback:gn,prefix:null,property:null,results:_t,security:null,unselectable:null},space:"html",transform:tq}),wZ=Lg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:_s,accentHeight:_t,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_t,amplitude:_t,arabicForm:null,ascent:_t,attributeName:null,attributeType:null,azimuth:_t,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_t,by:null,calcMode:null,capHeight:_t,className:Or,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_t,diffuseConstant:_t,direction:null,display:null,dur:null,divisor:_t,dominantBaseline:null,download:gn,dx:null,dy:null,edgeMode:null,editable:null,elevation:_t,enableBackground:null,end:null,event:null,exponent:_t,externalResourcesRequired:null,fill:null,fillOpacity:_t,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Rm,g2:Rm,glyphName:Rm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_t,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_t,horizOriginX:_t,horizOriginY:_t,id:null,ideographic:_t,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_t,k:_t,k1:_t,k2:_t,k3:_t,k4:_t,kernelMatrix:_s,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_t,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_t,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_t,overlineThickness:_t,paintOrder:null,panose1:null,path:null,pathLength:_t,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Or,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_t,pointsAtY:_t,pointsAtZ:_t,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:_s,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:_s,rev:_s,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:_s,requiredFeatures:_s,requiredFonts:_s,requiredFormats:_s,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_t,specularExponent:_t,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_t,strikethroughThickness:_t,string:null,stroke:null,strokeDashArray:_s,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_t,strokeOpacity:_t,strokeWidth:null,style:null,surfaceScale:_t,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:_s,tabIndex:_t,tableValues:null,target:null,targetX:_t,targetY:_t,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:_s,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:_t,underlineThickness:_t,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_t,values:null,vAlphabetic:_t,vMathematical:_t,vectorEffect:null,vHanging:_t,vIdeographic:_t,version:null,vertAdvY:_t,vertOriginX:_t,vertOriginY:_t,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_t,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:eq}),nq=Lg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),rq=Lg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:tq}),aq=Lg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),NZ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},SZ=/[A-Z]/g,LI=/-[a-z]/g,_Z=/^data[-\w.:]+$/i;function CZ(t,e){const n=_E(e);let a=e,i=hs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&_Z.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(LI,kZ);a="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!LI.test(s)){let o=s.replace(SZ,TZ);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=WD}return new i(a,e)}function TZ(t){return"-"+t.toLowerCase()}function kZ(t){return t.charAt(1).toUpperCase()}const AZ=Xz([Zz,jZ,nq,rq,aq],"html"),KD=Xz([Zz,wZ,nq,rq,aq],"svg");function EZ(t){return t.join(" ").trim()}var mm={},iC,FI;function PZ(){if(FI)return iC;FI=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,d="/",f="*",p="",g="comment",x="declaration";iC=function(j,S){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];S=S||{};var _=1,T=1;function C(V){var X=V.match(e);X&&(_+=X.length);var Y=V.lastIndexOf(c);T=~Y?V.length-Y:T+V.length}function P(){var V={line:_,column:T};return function(X){return X.position=new k(V),L(),X}}function k(V){this.start=V,this.end={line:_,column:T},this.source=S.source}k.prototype.content=j;function E(V){var X=new Error(S.source+":"+_+":"+T+": "+V);if(X.reason=V,X.filename=S.source,X.line=_,X.column=T,X.source=j,!S.silent)throw X}function I(V){var X=V.exec(j);if(X){var Y=X[0];return C(Y),j=j.slice(Y.length),X}}function L(){I(n)}function $(V){var X;for(V=V||[];X=q();)X!==!1&&V.push(X);return V}function q(){var V=P();if(!(d!=j.charAt(0)||f!=j.charAt(1))){for(var X=2;p!=j.charAt(X)&&(f!=j.charAt(X)||d!=j.charAt(X+1));)++X;if(X+=2,p===j.charAt(X-1))return E("End of comment missing");var Y=j.slice(2,X-2);return T+=2,C(Y),j=j.slice(X),T+=2,V({type:g,comment:Y})}}function F(){var V=P(),X=I(a);if(X){if(q(),!I(i))return E("property missing ':'");var Y=I(s),z=V({type:x,property:b(X[0].replace(t,p)),value:Y?b(Y[0].replace(t,p)):p});return I(o),z}}function H(){var V=[];$(V);for(var X;X=F();)X!==!1&&(V.push(X),$(V));return V}return L(),H()};function b(j){return j?j.replace(l,p):p}return iC}var $I;function DZ(){if($I)return mm;$I=1;var t=mm&&mm.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(mm,"__esModule",{value:!0}),mm.default=n;var e=t(PZ());function n(a,i){var s=null;if(!a||typeof a!="string")return s;var o=(0,e.default)(a),l=typeof i=="function";return o.forEach(function(c){if(c.type==="declaration"){var d=c.property,f=c.value;l?i(d,f,c):f&&(s=s||{},s[d]=f)}}),s}return mm}var Vx={},BI;function OZ(){if(BI)return Vx;BI=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,a=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(d){return!d||n.test(d)||t.test(d)},o=function(d,f){return f.toUpperCase()},l=function(d,f){return"".concat(f,"-")},c=function(d,f){return f===void 0&&(f={}),s(d)?d:(d=d.toLowerCase(),f.reactCompat?d=d.replace(i,l):d=d.replace(a,l),d.replace(e,o))};return Vx.camelCase=c,Vx}var Hx,zI;function MZ(){if(zI)return Hx;zI=1;var t=Hx&&Hx.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(DZ()),n=OZ();function a(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return a.default=a,Hx=a,Hx}var IZ=MZ();const RZ=Wn(IZ),iq=sq("end"),YD=sq("start");function sq(t){return e;function e(n){const a=n&&n.position&&n.position[t]||{};if(typeof a.line=="number"&&a.line>0&&typeof a.column=="number"&&a.column>0)return{line:a.line,column:a.column,offset:typeof a.offset=="number"&&a.offset>-1?a.offset:void 0}}}function LZ(t){const e=YD(t),n=iq(t);if(e&&n)return{start:e,end:n}}function xv(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?qI(t.position):"start"in t||"end"in t?qI(t):"line"in t||"column"in t?TE(t):""}function TE(t){return UI(t&&t.line)+":"+UI(t&&t.column)}function qI(t){return TE(t&&t.start)+"-"+TE(t&&t.end)}function UI(t){return t&&typeof t=="number"?t:1}class gi extends Error{constructor(e,n,a){super(),typeof n=="string"&&(a=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof a=="string"){const c=a.indexOf(":");c===-1?s.ruleId=a:(s.source=a.slice(0,c),s.ruleId=a.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=xv(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}gi.prototype.file="";gi.prototype.name="";gi.prototype.reason="";gi.prototype.message="";gi.prototype.stack="";gi.prototype.column=void 0;gi.prototype.line=void 0;gi.prototype.ancestors=void 0;gi.prototype.cause=void 0;gi.prototype.fatal=void 0;gi.prototype.place=void 0;gi.prototype.ruleId=void 0;gi.prototype.source=void 0;const QD={}.hasOwnProperty,FZ=new Map,$Z=/[A-Z]/g,BZ=new Set(["table","tbody","thead","tfoot","tr"]),zZ=new Set(["td","th"]),oq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function qZ(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let a;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");a=QZ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");a=YZ(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:a,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?KD:AZ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=lq(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function lq(t,e,n){if(e.type==="element")return UZ(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return VZ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return GZ(t,e,n);if(e.type==="mdxjsEsm")return HZ(t,e);if(e.type==="root")return WZ(t,e,n);if(e.type==="text")return KZ(t,e)}function UZ(t,e,n){const a=t.schema;let i=a;e.tagName.toLowerCase()==="svg"&&a.space==="html"&&(i=KD,t.schema=i),t.ancestors.push(e);const s=uq(t,e.tagName,!1),o=XZ(t,e);let l=JD(t,e);return BZ.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!vZ(c):!0})),cq(t,o,s,e),XD(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function VZ(t,e){if(e.data&&e.data.estree&&t.evaluater){const a=e.data.estree.body[0];return a.type,t.evaluater.evaluateExpression(a.expression)}Pv(t,e.position)}function HZ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Pv(t,e.position)}function GZ(t,e,n){const a=t.schema;let i=a;e.name==="svg"&&a.space==="html"&&(i=KD,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:uq(t,e.name,!0),o=JZ(t,e),l=JD(t,e);return cq(t,o,s,e),XD(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function WZ(t,e,n){const a={};return XD(a,JD(t,e)),t.create(e,t.Fragment,a,n)}function KZ(t,e){return e.value}function cq(t,e,n,a){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=a)}function XD(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function YZ(t,e,n){return a;function a(i,s,o,l){const d=Array.isArray(o.children)?n:e;return l?d(s,o,l):d(s,o)}}function QZ(t,e){return n;function n(a,i,s,o){const l=Array.isArray(s.children),c=YD(a);return e(i,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function XZ(t,e){const n={};let a,i;for(i in e.properties)if(i!=="children"&&QD.call(e.properties,i)){const s=ZZ(t,i,e.properties[i]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&zZ.has(e.tagName)?a=l:n[o]=l}}if(a){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=a}return n}function JZ(t,e){const n={};for(const a of e.attributes)if(a.type==="mdxJsxExpressionAttribute")if(a.data&&a.data.estree&&t.evaluater){const s=a.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Pv(t,e.position);else{const i=a.name;let s;if(a.value&&typeof a.value=="object")if(a.value.data&&a.value.data.estree&&t.evaluater){const l=a.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else Pv(t,e.position);else s=a.value===null?!0:a.value;n[i]=s}return n}function JD(t,e){const n=[];let a=-1;const i=t.passKeys?new Map:FZ;for(;++a<e.children.length;){const s=e.children[a];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const d=i.get(c)||0;o=c+"-"+d,i.set(c,d+1)}}const l=lq(t,s,o);l!==void 0&&n.push(l)}return n}function ZZ(t,e,n){const a=CZ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=a.commaSeparated?pZ(n):EZ(n)),a.property==="style"){let i=typeof n=="object"?n:eee(t,String(n));return t.stylePropertyNameCase==="css"&&(i=tee(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&a.space?NZ[a.property]||a.property:a.attribute,n]}}function eee(t,e){try{return RZ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const a=n,i=new gi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:a,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=oq+"#cannot-parse-style-attribute",i}}function uq(t,e,n){let a;if(!n)a={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const l=MI(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}a=o}else a=MI(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(a.type==="Literal"){const i=a.value;return QD.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(a);Pv(t)}function Pv(t,e){const n=new gi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=oq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function tee(t){const e={};let n;for(n in t)QD.call(t,n)&&(e[nee(n)]=t[n]);return e}function nee(t){let e=t.replace($Z,ree);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function ree(t){return"-"+t.toLowerCase()}const sC={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},aee={};function ZD(t,e){const n=aee,a=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return dq(t,a,i)}function dq(t,e,n){if(iee(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return VI(t.children,e,n)}return Array.isArray(t)?VI(t,e,n):""}function VI(t,e,n){const a=[];let i=-1;for(;++i<t.length;)a[i]=dq(t[i],e,n);return a.join("")}function iee(t){return!!(t&&typeof t=="object")}const HI=document.createElement("i");function eO(t){const e="&"+t+";";HI.innerHTML=e;const n=HI.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Os(t,e,n,a){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,a.length<1e4)o=Array.from(a),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<a.length;)o=a.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function eo(t,e){return t.length>0?(Os(t,t.length,0,e),t):e}const GI={}.hasOwnProperty;function hq(t){const e={};let n=-1;for(;++n<t.length;)see(e,t[n]);return e}function see(t,e){let n;for(n in e){const i=(GI.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){GI.call(i,o)||(i[o]=[]);const l=s[o];oee(i[o],Array.isArray(l)?l:l?[l]:[])}}}function oee(t,e){let n=-1;const a=[];for(;++n<e.length;)(e[n].add==="after"?t:a).push(e[n]);Os(t,0,0,a)}function fq(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function $o(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ii=md(/[A-Za-z]/),pi=md(/[\dA-Za-z]/),lee=md(/[#-'*+\--9=?A-Z^-~]/);function mw(t){return t!==null&&(t<32||t===127)}const kE=md(/\d/),cee=md(/[\dA-Fa-f]/),uee=md(/[!-/:-@[-`{-~]/);function Qt(t){return t!==null&&t<-2}function Tr(t){return t!==null&&(t<0||t===32)}function On(t){return t===-2||t===-1||t===32}const zN=md(new RegExp("\\p{P}|\\p{S}","u")),jf=md(/\s/);function md(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Fg(t){const e=[];let n=-1,a=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&pi(t.charCodeAt(n+1))&&pi(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(a,n),encodeURIComponent(o)),a=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(a)}function Gn(t,e,n,a){const i=a?a-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return On(c)?(t.enter(n),l(c)):e(c)}function l(c){return On(c)&&s++<i?(t.consume(c),l):(t.exit(n),e(c))}}const dee={tokenize:hee};function hee(t){const e=t.attempt(this.parser.constructs.contentInitial,a,i);let n;return e;function a(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Gn(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Qt(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const fee={tokenize:pee},WI={tokenize:mee};function pee(t){const e=this,n=[];let a=0,i,s,o;return l;function l(C){if(a<n.length){const P=n[a];return e.containerState=P[1],t.attempt(P[0].continuation,c,d)(C)}return d(C)}function c(C){if(a++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&T();const P=e.events.length;let k=P,E;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){E=e.events[k][1].end;break}_(a);let I=P;for(;I<e.events.length;)e.events[I][1].end={...E},I++;return Os(e.events,k+1,0,e.events.slice(P)),e.events.length=I,d(C)}return l(C)}function d(C){if(a===n.length){if(!i)return g(C);if(i.currentConstruct&&i.currentConstruct.concrete)return b(C);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(WI,f,p)(C)}function f(C){return i&&T(),_(a),g(C)}function p(C){return e.parser.lazy[e.now().line]=a!==n.length,o=e.now().offset,b(C)}function g(C){return e.containerState={},t.attempt(WI,x,b)(C)}function x(C){return a++,n.push([e.currentConstruct,e.containerState]),g(C)}function b(C){if(C===null){i&&T(),_(0),t.consume(C);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),j(C)}function j(C){if(C===null){S(t.exit("chunkFlow"),!0),_(0),t.consume(C);return}return Qt(C)?(t.consume(C),S(t.exit("chunkFlow")),a=0,e.interrupt=void 0,l):(t.consume(C),j)}function S(C,P){const k=e.sliceStream(C);if(P&&k.push(null),C.previous=s,s&&(s.next=C),s=C,i.defineSkip(C.start),i.write(k),e.parser.lazy[C.start.line]){let E=i.events.length;for(;E--;)if(i.events[E][1].start.offset<o&&(!i.events[E][1].end||i.events[E][1].end.offset>o))return;const I=e.events.length;let L=I,$,q;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){if($){q=e.events[L][1].end;break}$=!0}for(_(a),E=I;E<e.events.length;)e.events[E][1].end={...q},E++;Os(e.events,L+1,0,e.events.slice(I)),e.events.length=E}}function _(C){let P=n.length;for(;P-- >C;){const k=n[P];e.containerState=k[1],k[0].exit.call(e,t)}n.length=C}function T(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function mee(t,e,n){return Gn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function rg(t){if(t===null||Tr(t)||jf(t))return 1;if(zN(t))return 2}function qN(t,e,n){const a=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!a.includes(s)&&(e=s(e,n),a.push(s))}return e}const AE={name:"attention",resolveAll:gee,tokenize:yee};function gee(t,e){let n=-1,a,i,s,o,l,c,d,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(a=n;a--;)if(t[a][0]==="exit"&&t[a][1].type==="attentionSequence"&&t[a][1]._open&&e.sliceSerialize(t[a][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[a][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[a][1].end.offset-t[a][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[a][1].end.offset-t[a][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[a][1].end},g={...t[n][1].start};KI(p,-c),KI(g,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...t[a][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},s={type:c>1?"strongText":"emphasisText",start:{...t[a][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[a][1].end={...o.start},t[n][1].start={...l.end},d=[],t[a][1].end.offset-t[a][1].start.offset&&(d=eo(d,[["enter",t[a][1],e],["exit",t[a][1],e]])),d=eo(d,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),d=eo(d,qN(e.parser.constructs.insideSpan.null,t.slice(a+1,n),e)),d=eo(d,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,d=eo(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,Os(t,a-1,n-a+3,d),n=a+d.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function yee(t,e){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,i=rg(a);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;const d=t.exit("attentionSequence"),f=rg(c),p=!f||f===2&&i||n.includes(c),g=!i||i===2&&f||n.includes(a);return d._open=!!(s===42?p:p&&(i||!g)),d._close=!!(s===42?g:g&&(f||!p)),e(c)}}function KI(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const xee={name:"autolink",tokenize:vee};function vee(t,e,n){let a=0;return i;function i(x){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(x){return Ii(x)?(t.consume(x),o):x===64?n(x):d(x)}function o(x){return x===43||x===45||x===46||pi(x)?(a=1,l(x)):d(x)}function l(x){return x===58?(t.consume(x),a=0,c):(x===43||x===45||x===46||pi(x))&&a++<32?(t.consume(x),l):(a=0,d(x))}function c(x){return x===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):x===null||x===32||x===60||mw(x)?n(x):(t.consume(x),c)}function d(x){return x===64?(t.consume(x),f):lee(x)?(t.consume(x),d):n(x)}function f(x){return pi(x)?p(x):n(x)}function p(x){return x===46?(t.consume(x),a=0,f):x===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):g(x)}function g(x){if((x===45||pi(x))&&a++<63){const b=x===45?g:p;return t.consume(x),b}return n(x)}}const Db={partial:!0,tokenize:bee};function bee(t,e,n){return a;function a(s){return On(s)?Gn(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Qt(s)?e(s):n(s)}}const pq={continuation:{tokenize:wee},exit:Nee,name:"blockQuote",tokenize:jee};function jee(t,e,n){const a=this;return i;function i(o){if(o===62){const l=a.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return On(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function wee(t,e,n){const a=this;return i;function i(o){return On(o)?Gn(t,s,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(pq,e,n)(o)}}function Nee(t){t.exit("blockQuote")}const mq={name:"characterEscape",tokenize:See};function See(t,e,n){return a;function a(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return uee(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const gq={name:"characterReference",tokenize:_ee};function _ee(t,e,n){const a=this;let i=0,s,o;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),c}function c(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),s=31,o=pi,f(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=cee,f):(t.enter("characterReferenceValue"),s=7,o=kE,f(p))}function f(p){if(p===59&&i){const g=t.exit("characterReferenceValue");return o===pi&&!eO(a.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(p)&&i++<s?(t.consume(p),f):n(p)}}const YI={partial:!0,tokenize:Tee},QI={concrete:!0,name:"codeFenced",tokenize:Cee};function Cee(t,e,n){const a=this,i={partial:!0,tokenize:k};let s=0,o=0,l;return c;function c(E){return d(E)}function d(E){const I=a.events[a.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(E)}function f(E){return E===l?(o++,t.consume(E),f):o<3?n(E):(t.exit("codeFencedFenceSequence"),On(E)?Gn(t,p,"whitespace")(E):p(E))}function p(E){return E===null||Qt(E)?(t.exit("codeFencedFence"),a.interrupt?e(E):t.check(YI,j,P)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(E))}function g(E){return E===null||Qt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(E)):On(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Gn(t,x,"whitespace")(E)):E===96&&E===l?n(E):(t.consume(E),g)}function x(E){return E===null||Qt(E)?p(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===null||Qt(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(E)):E===96&&E===l?n(E):(t.consume(E),b)}function j(E){return t.attempt(i,P,S)(E)}function S(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),_}function _(E){return s>0&&On(E)?Gn(t,T,"linePrefix",s+1)(E):T(E)}function T(E){return E===null||Qt(E)?t.check(YI,j,P)(E):(t.enter("codeFlowValue"),C(E))}function C(E){return E===null||Qt(E)?(t.exit("codeFlowValue"),T(E)):(t.consume(E),C)}function P(E){return t.exit("codeFenced"),e(E)}function k(E,I,L){let $=0;return q;function q(Y){return E.enter("lineEnding"),E.consume(Y),E.exit("lineEnding"),F}function F(Y){return E.enter("codeFencedFence"),On(Y)?Gn(E,H,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):H(Y)}function H(Y){return Y===l?(E.enter("codeFencedFenceSequence"),V(Y)):L(Y)}function V(Y){return Y===l?($++,E.consume(Y),V):$>=o?(E.exit("codeFencedFenceSequence"),On(Y)?Gn(E,X,"whitespace")(Y):X(Y)):L(Y)}function X(Y){return Y===null||Qt(Y)?(E.exit("codeFencedFence"),I(Y)):L(Y)}}}function Tee(t,e,n){const a=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}const oC={name:"codeIndented",tokenize:Aee},kee={partial:!0,tokenize:Eee};function Aee(t,e,n){const a=this;return i;function i(d){return t.enter("codeIndented"),Gn(t,s,"linePrefix",5)(d)}function s(d){const f=a.events[a.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):Qt(d)?t.attempt(kee,o,c)(d):(t.enter("codeFlowValue"),l(d))}function l(d){return d===null||Qt(d)?(t.exit("codeFlowValue"),o(d)):(t.consume(d),l)}function c(d){return t.exit("codeIndented"),e(d)}}function Eee(t,e,n){const a=this;return i;function i(o){return a.parser.lazy[a.now().line]?n(o):Qt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Gn(t,s,"linePrefix",5)(o)}function s(o){const l=a.events[a.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Qt(o)?i(o):n(o)}}const Pee={name:"codeText",previous:Oee,resolve:Dee,tokenize:Mee};function Dee(t){let e=t.length-4,n=3,a,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(a=n;++a<e;)if(t[a][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(a=n-1,e++;++a<=e;)i===void 0?a!==e&&t[a][1].type!=="lineEnding"&&(i=a):(a===e||t[a][1].type==="lineEnding")&&(t[i][1].type="codeTextData",a!==i+2&&(t[i][1].end=t[a-1][1].end,t.splice(i+2,a-i-2),e-=a-i-2,a=i+2),i=void 0);return t}function Oee(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Mee(t,e,n){let a=0,i,s;return o;function o(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),a++,l):(t.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),c):p===96?(s=t.enter("codeTextSequence"),i=0,f(p)):Qt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||Qt(p)?(t.exit("codeTextData"),c(p)):(t.consume(p),d)}function f(p){return p===96?(t.consume(p),i++,f):i===a?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(s.type="codeTextData",d(p))}}class Iee{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const a=n??Number.POSITIVE_INFINITY;return a<this.left.length?this.left.slice(e,a):e>this.left.length?this.right.slice(this.right.length-a+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-a+this.left.length).reverse())}splice(e,n,a){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return a&&Gx(this.left,a),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Gx(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Gx(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Gx(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Gx(this.left,n.reverse())}}}function Gx(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function yq(t){const e={};let n=-1,a,i,s,o,l,c,d;const f=new Iee(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(a=f.get(n),n&&a[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=a[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(a[0]==="enter")a[1].contentType&&(Object.assign(e,Ree(f,n)),n=e[n],d=!0);else if(a[1]._container){for(s=n,i=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(a[1].end={...f.get(i)[1].start},l=f.slice(i,n),l.unshift(a),f.splice(i,n-i+1,l))}}return Os(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!d}function Ree(t,e){const n=t.get(e)[1],a=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=a.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let f,p,g=-1,x=n,b=0,j=0;const S=[j];for(;x;){for(;t.get(++i)[1]!==x;);s.push(i),x._tokenizer||(f=a.sliceStream(x),x.next||f.push(null),p&&o.defineSkip(x.start),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=x,x=x.next}for(x=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(j=g+1,S.push(j),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(o.events=[],x?(x._tokenizer=void 0,x.previous=void 0):S.pop(),g=S.length;g--;){const _=l.slice(S[g],S[g+1]),T=s.pop();c.push([T,T+_.length-1]),t.splice(T,2,_)}for(c.reverse(),g=-1;++g<c.length;)d[b+c[g][0]]=b+c[g][1],b+=c[g][1]-c[g][0]-1;return d}const Lee={resolve:$ee,tokenize:Bee},Fee={partial:!0,tokenize:zee};function $ee(t){return yq(t),t}function Bee(t,e){let n;return a;function a(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):Qt(l)?t.check(Fee,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function zee(t,e,n){const a=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Gn(t,s,"linePrefix")}function s(o){if(o===null||Qt(o))return n(o);const l=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(a.parser.constructs.flow,n,e)(o)}}function xq(t,e,n,a,i,s,o,l,c){const d=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(_){return _===60?(t.enter(a),t.enter(i),t.enter(s),t.consume(_),t.exit(s),g):_===null||_===32||_===41||mw(_)?n(_):(t.enter(a),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),j(_))}function g(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(i),t.exit(a),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),x(_))}function x(_){return _===62?(t.exit("chunkString"),t.exit(l),g(_)):_===null||_===60||Qt(_)?n(_):(t.consume(_),_===92?b:x)}function b(_){return _===60||_===62||_===92?(t.consume(_),x):x(_)}function j(_){return!f&&(_===null||_===41||Tr(_))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(a),e(_)):f<d&&_===40?(t.consume(_),f++,j):_===41?(t.consume(_),f--,j):_===null||_===32||_===40||mw(_)?n(_):(t.consume(_),_===92?S:j)}function S(_){return _===40||_===41||_===92?(t.consume(_),j):j(_)}}function vq(t,e,n,a,i,s){const o=this;let l=0,c;return d;function d(x){return t.enter(a),t.enter(i),t.consume(x),t.exit(i),t.enter(s),f}function f(x){return l>999||x===null||x===91||x===93&&!c||x===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(x):x===93?(t.exit(s),t.enter(i),t.consume(x),t.exit(i),t.exit(a),e):Qt(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||x===91||x===93||Qt(x)||l++>999?(t.exit("chunkString"),f(x)):(t.consume(x),c||(c=!On(x)),x===92?g:p)}function g(x){return x===91||x===92||x===93?(t.consume(x),l++,p):p(x)}}function bq(t,e,n,a,i,s){let o;return l;function l(g){return g===34||g===39||g===40?(t.enter(a),t.enter(i),t.consume(g),t.exit(i),o=g===40?41:g,c):n(g)}function c(g){return g===o?(t.enter(i),t.consume(g),t.exit(i),t.exit(a),e):(t.enter(s),d(g))}function d(g){return g===o?(t.exit(s),c(o)):g===null?n(g):Qt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),Gn(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===o||g===null||Qt(g)?(t.exit("chunkString"),d(g)):(t.consume(g),g===92?p:f)}function p(g){return g===o||g===92?(t.consume(g),f):f(g)}}function vv(t,e){let n;return a;function a(i){return Qt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,a):On(i)?Gn(t,a,n?"linePrefix":"lineSuffix")(i):e(i)}}const qee={name:"definition",tokenize:Vee},Uee={partial:!0,tokenize:Hee};function Vee(t,e,n){const a=this;let i;return s;function s(x){return t.enter("definition"),o(x)}function o(x){return vq.call(a,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return i=$o(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),c):n(x)}function c(x){return Tr(x)?vv(t,d)(x):d(x)}function d(x){return xq(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function f(x){return t.attempt(Uee,p,p)(x)}function p(x){return On(x)?Gn(t,g,"whitespace")(x):g(x)}function g(x){return x===null||Qt(x)?(t.exit("definition"),a.parser.defined.push(i),e(x)):n(x)}}function Hee(t,e,n){return a;function a(l){return Tr(l)?vv(t,i)(l):n(l)}function i(l){return bq(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return On(l)?Gn(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Qt(l)?e(l):n(l)}}const Gee={name:"hardBreakEscape",tokenize:Wee};function Wee(t,e,n){return a;function a(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Qt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const Kee={name:"headingAtx",resolve:Yee,tokenize:Qee};function Yee(t,e){let n=t.length-2,a=3,i,s;return t[a][1].type==="whitespace"&&(a+=2),n-2>a&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(a===n-1||n-4>a&&t[n-2][1].type==="whitespace")&&(n-=a+1===n?2:4),n>a&&(i={type:"atxHeadingText",start:t[a][1].start,end:t[n][1].end},s={type:"chunkText",start:t[a][1].start,end:t[n][1].end,contentType:"text"},Os(t,a,n-a+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function Qee(t,e,n){let a=0;return i;function i(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&a++<6?(t.consume(f),o):f===null||Tr(f)?(t.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||Qt(f)?(t.exit("atxHeading"),e(f)):On(f)?Gn(t,l,"whitespace")(f):(t.enter("atxHeadingText"),d(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),l(f))}function d(f){return f===null||f===35||Tr(f)?(t.exit("atxHeadingText"),l(f)):(t.consume(f),d)}}const Xee=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],XI=["pre","script","style","textarea"],Jee={concrete:!0,name:"htmlFlow",resolveTo:tte,tokenize:nte},Zee={partial:!0,tokenize:ate},ete={partial:!0,tokenize:rte};function tte(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function nte(t,e,n){const a=this;let i,s,o,l,c;return d;function d(K){return f(K)}function f(K){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(K),p}function p(K){return K===33?(t.consume(K),g):K===47?(t.consume(K),s=!0,j):K===63?(t.consume(K),i=3,a.interrupt?e:B):Ii(K)?(t.consume(K),o=String.fromCharCode(K),S):n(K)}function g(K){return K===45?(t.consume(K),i=2,x):K===91?(t.consume(K),i=5,l=0,b):Ii(K)?(t.consume(K),i=4,a.interrupt?e:B):n(K)}function x(K){return K===45?(t.consume(K),a.interrupt?e:B):n(K)}function b(K){const Ie="CDATA[";return K===Ie.charCodeAt(l++)?(t.consume(K),l===Ie.length?a.interrupt?e:H:b):n(K)}function j(K){return Ii(K)?(t.consume(K),o=String.fromCharCode(K),S):n(K)}function S(K){if(K===null||K===47||K===62||Tr(K)){const Ie=K===47,Ue=o.toLowerCase();return!Ie&&!s&&XI.includes(Ue)?(i=1,a.interrupt?e(K):H(K)):Xee.includes(o.toLowerCase())?(i=6,Ie?(t.consume(K),_):a.interrupt?e(K):H(K)):(i=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(K):s?T(K):C(K))}return K===45||pi(K)?(t.consume(K),o+=String.fromCharCode(K),S):n(K)}function _(K){return K===62?(t.consume(K),a.interrupt?e:H):n(K)}function T(K){return On(K)?(t.consume(K),T):q(K)}function C(K){return K===47?(t.consume(K),q):K===58||K===95||Ii(K)?(t.consume(K),P):On(K)?(t.consume(K),C):q(K)}function P(K){return K===45||K===46||K===58||K===95||pi(K)?(t.consume(K),P):k(K)}function k(K){return K===61?(t.consume(K),E):On(K)?(t.consume(K),k):C(K)}function E(K){return K===null||K===60||K===61||K===62||K===96?n(K):K===34||K===39?(t.consume(K),c=K,I):On(K)?(t.consume(K),E):L(K)}function I(K){return K===c?(t.consume(K),c=null,$):K===null||Qt(K)?n(K):(t.consume(K),I)}function L(K){return K===null||K===34||K===39||K===47||K===60||K===61||K===62||K===96||Tr(K)?k(K):(t.consume(K),L)}function $(K){return K===47||K===62||On(K)?C(K):n(K)}function q(K){return K===62?(t.consume(K),F):n(K)}function F(K){return K===null||Qt(K)?H(K):On(K)?(t.consume(K),F):n(K)}function H(K){return K===45&&i===2?(t.consume(K),z):K===60&&i===1?(t.consume(K),G):K===62&&i===4?(t.consume(K),ce):K===63&&i===3?(t.consume(K),B):K===93&&i===5?(t.consume(K),W):Qt(K)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Zee,je,V)(K)):K===null||Qt(K)?(t.exit("htmlFlowData"),V(K)):(t.consume(K),H)}function V(K){return t.check(ete,X,je)(K)}function X(K){return t.enter("lineEnding"),t.consume(K),t.exit("lineEnding"),Y}function Y(K){return K===null||Qt(K)?V(K):(t.enter("htmlFlowData"),H(K))}function z(K){return K===45?(t.consume(K),B):H(K)}function G(K){return K===47?(t.consume(K),o="",ie):H(K)}function ie(K){if(K===62){const Ie=o.toLowerCase();return XI.includes(Ie)?(t.consume(K),ce):H(K)}return Ii(K)&&o.length<8?(t.consume(K),o+=String.fromCharCode(K),ie):H(K)}function W(K){return K===93?(t.consume(K),B):H(K)}function B(K){return K===62?(t.consume(K),ce):K===45&&i===2?(t.consume(K),B):H(K)}function ce(K){return K===null||Qt(K)?(t.exit("htmlFlowData"),je(K)):(t.consume(K),ce)}function je(K){return t.exit("htmlFlow"),e(K)}}function rte(t,e,n){const a=this;return i;function i(o){return Qt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}function ate(t,e,n){return a;function a(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Db,e,n)}}const ite={name:"htmlText",tokenize:ste};function ste(t,e,n){const a=this;let i,s,o;return l;function l(B){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(B),c}function c(B){return B===33?(t.consume(B),d):B===47?(t.consume(B),k):B===63?(t.consume(B),C):Ii(B)?(t.consume(B),L):n(B)}function d(B){return B===45?(t.consume(B),f):B===91?(t.consume(B),s=0,b):Ii(B)?(t.consume(B),T):n(B)}function f(B){return B===45?(t.consume(B),x):n(B)}function p(B){return B===null?n(B):B===45?(t.consume(B),g):Qt(B)?(o=p,G(B)):(t.consume(B),p)}function g(B){return B===45?(t.consume(B),x):p(B)}function x(B){return B===62?z(B):B===45?g(B):p(B)}function b(B){const ce="CDATA[";return B===ce.charCodeAt(s++)?(t.consume(B),s===ce.length?j:b):n(B)}function j(B){return B===null?n(B):B===93?(t.consume(B),S):Qt(B)?(o=j,G(B)):(t.consume(B),j)}function S(B){return B===93?(t.consume(B),_):j(B)}function _(B){return B===62?z(B):B===93?(t.consume(B),_):j(B)}function T(B){return B===null||B===62?z(B):Qt(B)?(o=T,G(B)):(t.consume(B),T)}function C(B){return B===null?n(B):B===63?(t.consume(B),P):Qt(B)?(o=C,G(B)):(t.consume(B),C)}function P(B){return B===62?z(B):C(B)}function k(B){return Ii(B)?(t.consume(B),E):n(B)}function E(B){return B===45||pi(B)?(t.consume(B),E):I(B)}function I(B){return Qt(B)?(o=I,G(B)):On(B)?(t.consume(B),I):z(B)}function L(B){return B===45||pi(B)?(t.consume(B),L):B===47||B===62||Tr(B)?$(B):n(B)}function $(B){return B===47?(t.consume(B),z):B===58||B===95||Ii(B)?(t.consume(B),q):Qt(B)?(o=$,G(B)):On(B)?(t.consume(B),$):z(B)}function q(B){return B===45||B===46||B===58||B===95||pi(B)?(t.consume(B),q):F(B)}function F(B){return B===61?(t.consume(B),H):Qt(B)?(o=F,G(B)):On(B)?(t.consume(B),F):$(B)}function H(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(t.consume(B),i=B,V):Qt(B)?(o=H,G(B)):On(B)?(t.consume(B),H):(t.consume(B),X)}function V(B){return B===i?(t.consume(B),i=void 0,Y):B===null?n(B):Qt(B)?(o=V,G(B)):(t.consume(B),V)}function X(B){return B===null||B===34||B===39||B===60||B===61||B===96?n(B):B===47||B===62||Tr(B)?$(B):(t.consume(B),X)}function Y(B){return B===47||B===62||Tr(B)?$(B):n(B)}function z(B){return B===62?(t.consume(B),t.exit("htmlTextData"),t.exit("htmlText"),e):n(B)}function G(B){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),ie}function ie(B){return On(B)?Gn(t,W,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):W(B)}function W(B){return t.enter("htmlTextData"),o(B)}}const tO={name:"labelEnd",resolveAll:ute,resolveTo:dte,tokenize:hte},ote={tokenize:fte},lte={tokenize:pte},cte={tokenize:mte};function ute(t){let e=-1;const n=[];for(;++e<t.length;){const a=t[e][1];if(n.push(t[e]),a.type==="labelImage"||a.type==="labelLink"||a.type==="labelEnd"){const i=a.type==="labelImage"?4:2;a.type="data",e+=i}}return t.length!==n.length&&Os(t,0,t.length,n),t}function dte(t,e){let n=t.length,a=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){a=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},f={type:"labelText",start:{...t[s+a+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",c,e],["enter",d,e]],l=eo(l,t.slice(s+1,s+a+3)),l=eo(l,[["enter",f,e]]),l=eo(l,qN(e.parser.constructs.insideSpan.null,t.slice(s+a+4,o-3),e)),l=eo(l,[["exit",f,e],t[o-2],t[o-1],["exit",d,e]]),l=eo(l,t.slice(o+1)),l=eo(l,[["exit",c,e]]),Os(t,s,t.length,l),t}function hte(t,e,n){const a=this;let i=a.events.length,s,o;for(;i--;)if((a.events[i][1].type==="labelImage"||a.events[i][1].type==="labelLink")&&!a.events[i][1]._balanced){s=a.events[i][1];break}return l;function l(g){return s?s._inactive?p(g):(o=a.parser.defined.includes($o(a.sliceSerialize({start:s.end,end:a.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),c):n(g)}function c(g){return g===40?t.attempt(ote,f,o?f:p)(g):g===91?t.attempt(lte,f,o?d:p)(g):o?f(g):p(g)}function d(g){return t.attempt(cte,f,p)(g)}function f(g){return e(g)}function p(g){return s._balanced=!0,n(g)}}function fte(t,e,n){return a;function a(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),i}function i(p){return Tr(p)?vv(t,s)(p):s(p)}function s(p){return p===41?f(p):xq(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return Tr(p)?vv(t,c)(p):f(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?bq(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function d(p){return Tr(p)?vv(t,f)(p):f(p)}function f(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function pte(t,e,n){const a=this;return i;function i(l){return vq.call(a,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return a.parser.defined.includes($o(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function mte(t,e,n){return a;function a(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const gte={name:"labelStartImage",resolveAll:tO.resolveAll,tokenize:yte};function yte(t,e,n){const a=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(l):e(l)}}const xte={name:"labelStartLink",resolveAll:tO.resolveAll,tokenize:vte};function vte(t,e,n){const a=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(o):e(o)}}const lC={name:"lineEnding",tokenize:bte};function bte(t,e){return n;function n(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Gn(t,e,"linePrefix")}}const Jj={name:"thematicBreak",tokenize:jte};function jte(t,e,n){let a=0,i;return s;function s(d){return t.enter("thematicBreak"),o(d)}function o(d){return i=d,l(d)}function l(d){return d===i?(t.enter("thematicBreakSequence"),c(d)):a>=3&&(d===null||Qt(d))?(t.exit("thematicBreak"),e(d)):n(d)}function c(d){return d===i?(t.consume(d),a++,c):(t.exit("thematicBreakSequence"),On(d)?Gn(t,l,"whitespace")(d):l(d))}}const rs={continuation:{tokenize:_te},exit:Tte,name:"list",tokenize:Ste},wte={partial:!0,tokenize:kte},Nte={partial:!0,tokenize:Cte};function Ste(t,e,n){const a=this,i=a.events[a.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(x){const b=a.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!a.containerState.marker||x===a.containerState.marker:kE(x)){if(a.containerState.type||(a.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),x===42||x===45?t.check(Jj,n,d)(x):d(x);if(!a.interrupt||x===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(x)}return n(x)}function c(x){return kE(x)&&++o<10?(t.consume(x),c):(!a.interrupt||o<2)&&(a.containerState.marker?x===a.containerState.marker:x===41||x===46)?(t.exit("listItemValue"),d(x)):n(x)}function d(x){return t.enter("listItemMarker"),t.consume(x),t.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||x,t.check(Db,a.interrupt?n:f,t.attempt(wte,g,p))}function f(x){return a.containerState.initialBlankLine=!0,s++,g(x)}function p(x){return On(x)?(t.enter("listItemPrefixWhitespace"),t.consume(x),t.exit("listItemPrefixWhitespace"),g):n(x)}function g(x){return a.containerState.size=s+a.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(x)}}function _te(t,e,n){const a=this;return a.containerState._closeFlow=void 0,t.check(Db,i,s);function i(l){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,Gn(t,e,"listItemIndent",a.containerState.size+1)(l)}function s(l){return a.containerState.furtherBlankLines||!On(l)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,o(l)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,t.attempt(Nte,e,o)(l))}function o(l){return a.containerState._closeFlow=!0,a.interrupt=void 0,Gn(t,t.attempt(rs,e,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Cte(t,e,n){const a=this;return Gn(t,i,"listItemIndent",a.containerState.size+1);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===a.containerState.size?e(s):n(s)}}function Tte(t){t.exit(this.containerState.type)}function kte(t,e,n){const a=this;return Gn(t,i,"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=a.events[a.events.length-1];return!On(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const JI={name:"setextUnderline",resolveTo:Ate,tokenize:Ete};function Ate(t,e){let n=t.length,a,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){a=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[a][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[a][1],e]),t[a][1].end={...t[s][1].end}):t[a][1]=o,t.push(["exit",o,e]),t}function Ete(t,e,n){const a=this;let i;return s;function s(d){let f=a.events.length,p;for(;f--;)if(a.events[f][1].type!=="lineEnding"&&a.events[f][1].type!=="linePrefix"&&a.events[f][1].type!=="content"){p=a.events[f][1].type==="paragraph";break}return!a.parser.lazy[a.now().line]&&(a.interrupt||p)?(t.enter("setextHeadingLine"),i=d,o(d)):n(d)}function o(d){return t.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(t.consume(d),l):(t.exit("setextHeadingLineSequence"),On(d)?Gn(t,c,"lineSuffix")(d):c(d))}function c(d){return d===null||Qt(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const Pte={tokenize:Dte};function Dte(t){const e=this,n=t.attempt(Db,a,t.attempt(this.parser.constructs.flowInitial,i,Gn(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Lee,i)),"linePrefix")));return n;function a(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Ote={resolveAll:wq()},Mte=jq("string"),Ite=jq("text");function jq(t){return{resolveAll:wq(t==="text"?Rte:void 0),tokenize:e};function e(n){const a=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(f){return d(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return d(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function d(f){if(f===null)return!0;const p=i[f];let g=-1;if(p)for(;++g<p.length;){const x=p[g];if(!x.previous||x.previous.call(a,a.previous))return!0}return!1}}}function wq(t){return e;function e(n,a){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,a):n}}function Rte(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const a=t[n-1][1],i=e.sliceStream(a);let s=i.length,o=-1,l=0,c;for(;s--;){const d=i[s];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const d={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:a.start._bufferIndex+o,_index:a.start._index+s,line:a.end.line,column:a.end.column-l,offset:a.end.offset-l},end:{...a.end}};a.end={...d.start},a.start.offset===a.end.offset?Object.assign(a,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const Lte={42:rs,43:rs,45:rs,48:rs,49:rs,50:rs,51:rs,52:rs,53:rs,54:rs,55:rs,56:rs,57:rs,62:pq},Fte={91:qee},$te={[-2]:oC,[-1]:oC,32:oC},Bte={35:Kee,42:Jj,45:[JI,Jj],60:Jee,61:JI,95:Jj,96:QI,126:QI},zte={38:gq,92:mq},qte={[-5]:lC,[-4]:lC,[-3]:lC,33:gte,38:gq,42:AE,60:[xee,ite],91:xte,92:[Gee,mq],93:tO,95:AE,96:Pee},Ute={null:[AE,Ote]},Vte={null:[42,95]},Hte={null:[]},Gte=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Vte,contentInitial:Fte,disable:Hte,document:Lte,flow:Bte,flowInitial:$te,insideSpan:Ute,string:zte,text:qte},Symbol.toStringTag,{value:"Module"}));function Wte(t,e,n){let a={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const c={attempt:I(k),check:I(E),consume:T,enter:C,exit:P,interrupt:I(E,{interrupt:!0})},d={code:null,containerState:{},defineSkip:j,events:[],now:b,parser:t,previous:null,sliceSerialize:g,sliceStream:x,write:p};let f=e.tokenize.call(d,c);return e.resolveAll&&s.push(e),d;function p(F){return o=eo(o,F),S(),o[o.length-1]!==null?[]:(L(e,0),d.events=qN(s,d.events,d),d.events)}function g(F,H){return Yte(x(F),H)}function x(F){return Kte(o,F)}function b(){const{_bufferIndex:F,_index:H,line:V,column:X,offset:Y}=a;return{_bufferIndex:F,_index:H,line:V,column:X,offset:Y}}function j(F){i[F.line]=F.column,q()}function S(){let F;for(;a._index<o.length;){const H=o[a._index];if(typeof H=="string")for(F=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===F&&a._bufferIndex<H.length;)_(H.charCodeAt(a._bufferIndex));else _(H)}}function _(F){f=f(F)}function T(F){Qt(F)?(a.line++,a.column=1,a.offset+=F===-3?2:1,q()):F!==-1&&(a.column++,a.offset++),a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===o[a._index].length&&(a._bufferIndex=-1,a._index++)),d.previous=F}function C(F,H){const V=H||{};return V.type=F,V.start=b(),d.events.push(["enter",V,d]),l.push(V),V}function P(F){const H=l.pop();return H.end=b(),d.events.push(["exit",H,d]),H}function k(F,H){L(F,H.from)}function E(F,H){H.restore()}function I(F,H){return V;function V(X,Y,z){let G,ie,W,B;return Array.isArray(X)?je(X):"tokenize"in X?je([X]):ce(X);function ce(ze){return Le;function Le(be){const Ce=be!==null&&ze[be],Ae=be!==null&&ze.null,me=[...Array.isArray(Ce)?Ce:Ce?[Ce]:[],...Array.isArray(Ae)?Ae:Ae?[Ae]:[]];return je(me)(be)}}function je(ze){return G=ze,ie=0,ze.length===0?z:K(ze[ie])}function K(ze){return Le;function Le(be){return B=$(),W=ze,ze.partial||(d.currentConstruct=ze),ze.name&&d.parser.constructs.disable.null.includes(ze.name)?Ue():ze.tokenize.call(H?Object.assign(Object.create(d),H):d,c,Ie,Ue)(be)}}function Ie(ze){return F(W,B),Y}function Ue(ze){return B.restore(),++ie<G.length?K(G[ie]):z}}}function L(F,H){F.resolveAll&&!s.includes(F)&&s.push(F),F.resolve&&Os(d.events,H,d.events.length-H,F.resolve(d.events.slice(H),d)),F.resolveTo&&(d.events=F.resolveTo(d.events,d))}function $(){const F=b(),H=d.previous,V=d.currentConstruct,X=d.events.length,Y=Array.from(l);return{from:X,restore:z};function z(){a=F,d.previous=H,d.currentConstruct=V,d.events.length=X,l=Y,q()}}function q(){a.line in i&&a.column<2&&(a.column=i[a.line],a.offset+=i[a.line]-1)}}function Kte(t,e){const n=e.start._index,a=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(a,s)];else{if(o=t.slice(n,i),a>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(a):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function Yte(t,e){let n=-1;const a=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,a.push(o)}return a.join("")}function Qte(t){const a={constructs:hq([Gte,...(t||{}).extensions||[]]),content:i(dee),defined:[],document:i(fee),flow:i(Pte),lazy:{},string:i(Mte),text:i(Ite)};return a;function i(s){return o;function o(l){return Wte(a,s,l)}}}function Xte(t){for(;!yq(t););return t}const ZI=/[\0\t\n\r]/g;function Jte(){let t=1,e="",n=!0,a;return i;function i(s,o,l){const c=[];let d,f,p,g,x;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),p=0,e="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(ZI.lastIndex=p,d=ZI.exec(s),g=d&&d.index!==void 0?d.index:s.length,x=s.charCodeAt(g),!d){e=s.slice(p);break}if(x===10&&p===g&&a)c.push(-3),a=void 0;else switch(a&&(c.push(-5),a=void 0),p<g&&(c.push(s.slice(p,g)),t+=g-p),x){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:a=!0,t=1}p=g+1}return l&&(a&&c.push(-5),e&&c.push(e),c.push(null)),c}}const Zte=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ene(t){return t.replace(Zte,tne)}function tne(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return fq(n.slice(s?2:1),s?16:10)}return eO(n)||t}const Nq={}.hasOwnProperty;function nne(t,e,n){return typeof e!="string"&&(n=e,e=void 0),rne(n)(Xte(Qte(n).document().write(Jte()(t,e,!0))))}function rne(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Te),autolinkProtocol:$,autolinkEmail:$,atxHeading:s(ae),blockQuote:s(Ae),characterEscape:$,characterReference:$,codeFenced:s(me),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(me,o),codeText:s(ye,o),codeTextData:$,data:$,codeFlowValue:$,definition:s(le),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(J),hardBreakEscape:s(ue),hardBreakTrailing:s(ue),htmlFlow:s(ee,o),htmlFlowData:$,htmlText:s(ee,o),htmlTextData:$,image:s(Ne),label:o,link:s(Te),listItem:s(xe),listItemValue:g,listOrdered:s(Fe,p),listUnordered:s(Fe),paragraph:s(ne),reference:K,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ae),strong:s(oe),thematicBreak:s(De)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:Ce,autolinkProtocol:be,blockQuote:c(),characterEscapeValue:q,characterReferenceMarkerHexadecimal:Ue,characterReferenceMarkerNumeric:Ue,characterReferenceValue:ze,characterReference:Le,codeFenced:c(S),codeFencedFence:j,codeFencedFenceInfo:x,codeFencedFenceMeta:b,codeFlowValue:q,codeIndented:c(_),codeText:c(Y),codeTextData:q,data:q,definition:c(),definitionDestinationString:P,definitionLabelString:T,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(H),hardBreakTrailing:c(H),htmlFlow:c(V),htmlFlowData:q,htmlText:c(X),htmlTextData:q,image:c(G),label:W,labelText:ie,lineEnding:F,link:c(z),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Ie,resourceDestinationString:B,resourceTitleString:ce,resource:je,setextHeading:c(L),setextHeadingLineSequence:I,setextHeadingText:E,strong:c(),thematicBreak:c()}};Sq(e,(t||{}).mdastExtensions||[]);const n={};return a;function a(Q){let ge={type:"root",children:[]};const de={stack:[ge],tokenStack:[],config:e,enter:l,exit:d,buffer:o,resume:f,data:n},fe=[];let Ee=-1;for(;++Ee<Q.length;)if(Q[Ee][1].type==="listOrdered"||Q[Ee][1].type==="listUnordered")if(Q[Ee][0]==="enter")fe.push(Ee);else{const Ye=fe.pop();Ee=i(Q,Ye,Ee)}for(Ee=-1;++Ee<Q.length;){const Ye=e[Q[Ee][0]];Nq.call(Ye,Q[Ee][1].type)&&Ye[Q[Ee][1].type].call(Object.assign({sliceSerialize:Q[Ee][2].sliceSerialize},de),Q[Ee][1])}if(de.tokenStack.length>0){const Ye=de.tokenStack[de.tokenStack.length-1];(Ye[1]||eR).call(de,void 0,Ye[0])}for(ge.position={start:qu(Q.length>0?Q[0][1].start:{line:1,column:1,offset:0}),end:qu(Q.length>0?Q[Q.length-2][1].end:{line:1,column:1,offset:0})},Ee=-1;++Ee<e.transforms.length;)ge=e.transforms[Ee](ge)||ge;return ge}function i(Q,ge,de){let fe=ge-1,Ee=-1,Ye=!1,$e,We,it,wt;for(;++fe<=de;){const we=Q[fe];switch(we[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{we[0]==="enter"?Ee++:Ee--,wt=void 0;break}case"lineEndingBlank":{we[0]==="enter"&&($e&&!wt&&!Ee&&!it&&(it=fe),wt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:wt=void 0}if(!Ee&&we[0]==="enter"&&we[1].type==="listItemPrefix"||Ee===-1&&we[0]==="exit"&&(we[1].type==="listUnordered"||we[1].type==="listOrdered")){if($e){let Xe=fe;for(We=void 0;Xe--;){const Je=Q[Xe];if(Je[1].type==="lineEnding"||Je[1].type==="lineEndingBlank"){if(Je[0]==="exit")continue;We&&(Q[We][1].type="lineEndingBlank",Ye=!0),Je[1].type="lineEnding",We=Xe}else if(!(Je[1].type==="linePrefix"||Je[1].type==="blockQuotePrefix"||Je[1].type==="blockQuotePrefixWhitespace"||Je[1].type==="blockQuoteMarker"||Je[1].type==="listItemIndent"))break}it&&(!We||it<We)&&($e._spread=!0),$e.end=Object.assign({},We?Q[We][1].start:we[1].end),Q.splice(We||fe,0,["exit",$e,we[2]]),fe++,de++}if(we[1].type==="listItemPrefix"){const Xe={type:"listItem",_spread:!1,start:Object.assign({},we[1].start),end:void 0};$e=Xe,Q.splice(fe,0,["enter",Xe,we[2]]),fe++,de++,it=void 0,wt=!0}}}return Q[ge][1]._spread=Ye,de}function s(Q,ge){return de;function de(fe){l.call(this,Q(fe),fe),ge&&ge.call(this,fe)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(Q,ge,de){this.stack[this.stack.length-1].children.push(Q),this.stack.push(Q),this.tokenStack.push([ge,de||void 0]),Q.position={start:qu(ge.start),end:void 0}}function c(Q){return ge;function ge(de){Q&&Q.call(this,de),d.call(this,de)}}function d(Q,ge){const de=this.stack.pop(),fe=this.tokenStack.pop();if(fe)fe[0].type!==Q.type&&(ge?ge.call(this,Q,fe[0]):(fe[1]||eR).call(this,Q,fe[0]));else throw new Error("Cannot close `"+Q.type+"` ("+xv({start:Q.start,end:Q.end})+"): its not open");de.position.end=qu(Q.end)}function f(){return ZD(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(Q){if(this.data.expectingFirstListItemValue){const ge=this.stack[this.stack.length-2];ge.start=Number.parseInt(this.sliceSerialize(Q),10),this.data.expectingFirstListItemValue=void 0}}function x(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.lang=Q}function b(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.meta=Q}function j(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.value=Q.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.value=Q.replace(/(\r?\n|\r)$/g,"")}function T(Q){const ge=this.resume(),de=this.stack[this.stack.length-1];de.label=ge,de.identifier=$o(this.sliceSerialize(Q)).toLowerCase()}function C(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.title=Q}function P(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.url=Q}function k(Q){const ge=this.stack[this.stack.length-1];if(!ge.depth){const de=this.sliceSerialize(Q).length;ge.depth=de}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function I(Q){const ge=this.stack[this.stack.length-1];ge.depth=this.sliceSerialize(Q).codePointAt(0)===61?1:2}function L(){this.data.setextHeadingSlurpLineEnding=void 0}function $(Q){const de=this.stack[this.stack.length-1].children;let fe=de[de.length-1];(!fe||fe.type!=="text")&&(fe=_e(),fe.position={start:qu(Q.start),end:void 0},de.push(fe)),this.stack.push(fe)}function q(Q){const ge=this.stack.pop();ge.value+=this.sliceSerialize(Q),ge.position.end=qu(Q.end)}function F(Q){const ge=this.stack[this.stack.length-1];if(this.data.atHardBreak){const de=ge.children[ge.children.length-1];de.position.end=qu(Q.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ge.type)&&($.call(this,Q),q.call(this,Q))}function H(){this.data.atHardBreak=!0}function V(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.value=Q}function X(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.value=Q}function Y(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.value=Q}function z(){const Q=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";Q.type+="Reference",Q.referenceType=ge,delete Q.url,delete Q.title}else delete Q.identifier,delete Q.label;this.data.referenceType=void 0}function G(){const Q=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";Q.type+="Reference",Q.referenceType=ge,delete Q.url,delete Q.title}else delete Q.identifier,delete Q.label;this.data.referenceType=void 0}function ie(Q){const ge=this.sliceSerialize(Q),de=this.stack[this.stack.length-2];de.label=ene(ge),de.identifier=$o(ge).toLowerCase()}function W(){const Q=this.stack[this.stack.length-1],ge=this.resume(),de=this.stack[this.stack.length-1];if(this.data.inReference=!0,de.type==="link"){const fe=Q.children;de.children=fe}else de.alt=ge}function B(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.url=Q}function ce(){const Q=this.resume(),ge=this.stack[this.stack.length-1];ge.title=Q}function je(){this.data.inReference=void 0}function K(){this.data.referenceType="collapsed"}function Ie(Q){const ge=this.resume(),de=this.stack[this.stack.length-1];de.label=ge,de.identifier=$o(this.sliceSerialize(Q)).toLowerCase(),this.data.referenceType="full"}function Ue(Q){this.data.characterReferenceType=Q.type}function ze(Q){const ge=this.sliceSerialize(Q),de=this.data.characterReferenceType;let fe;de?(fe=fq(ge,de==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):fe=eO(ge);const Ee=this.stack[this.stack.length-1];Ee.value+=fe}function Le(Q){const ge=this.stack.pop();ge.position.end=qu(Q.end)}function be(Q){q.call(this,Q);const ge=this.stack[this.stack.length-1];ge.url=this.sliceSerialize(Q)}function Ce(Q){q.call(this,Q);const ge=this.stack[this.stack.length-1];ge.url="mailto:"+this.sliceSerialize(Q)}function Ae(){return{type:"blockquote",children:[]}}function me(){return{type:"code",lang:null,meta:null,value:""}}function ye(){return{type:"inlineCode",value:""}}function le(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function J(){return{type:"emphasis",children:[]}}function ae(){return{type:"heading",depth:0,children:[]}}function ue(){return{type:"break"}}function ee(){return{type:"html",value:""}}function Ne(){return{type:"image",title:null,url:"",alt:null}}function Te(){return{type:"link",title:null,url:"",children:[]}}function Fe(Q){return{type:"list",ordered:Q.type==="listOrdered",start:null,spread:Q._spread,children:[]}}function xe(Q){return{type:"listItem",spread:Q._spread,checked:null,children:[]}}function ne(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function _e(){return{type:"text",value:""}}function De(){return{type:"thematicBreak"}}}function qu(t){return{line:t.line,column:t.column,offset:t.offset}}function Sq(t,e){let n=-1;for(;++n<e.length;){const a=e[n];Array.isArray(a)?Sq(t,a):ane(t,a)}}function ane(t,e){let n;for(n in e)if(Nq.call(e,n))switch(n){case"canContainEols":{const a=e[n];a&&t[n].push(...a);break}case"transforms":{const a=e[n];a&&t[n].push(...a);break}case"enter":case"exit":{const a=e[n];a&&Object.assign(t[n],a);break}}}function eR(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+xv({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+xv({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+xv({start:e.start,end:e.end})+") is still open")}function ine(t){const e=this;e.parser=n;function n(a){return nne(a,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function sne(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function one(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function lne(t,e){const n=e.value?e.value+`
`:"",a={};e.lang&&(a.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:a,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function cne(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function une(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dne(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",a=String(e.identifier).toUpperCase(),i=Fg(a.toLowerCase()),s=t.footnoteOrder.indexOf(a);let o,l=t.footnoteCounts.get(a);l===void 0?(l=0,t.footnoteOrder.push(a),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(a,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,d),t.applyData(e,d)}function hne(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function fne(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function _q(t,e){const n=e.referenceType;let a="]";if(n==="collapsed"?a+="[]":n==="full"&&(a+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+a}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=a:i.push({type:"text",value:a}),i}function pne(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return _q(t,e);const i={src:Fg(a.url||""),alt:e.alt};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function mne(t,e){const n={src:Fg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,a),t.applyData(e,a)}function gne(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const a={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,a),t.applyData(e,a)}function yne(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return _q(t,e);const i={href:Fg(a.url||"")};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function xne(t,e){const n={href:Fg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function vne(t,e,n){const a=t.all(e),i=n?bne(n):Cq(e),s={},o=[];if(typeof e.checked=="boolean"){const f=a[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},a.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<a.length;){const f=a[l];(i||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?o.push(...f.children):o.push(f)}const c=a[a.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,d),t.applyData(e,d)}function bne(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let a=-1;for(;!e&&++a<n.length;)e=Cq(n[a])}return e}function Cq(t){const e=t.spread;return e??t.children.length>1}function jne(t,e){const n={},a=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<a.length;){const o=a[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(a,!0)};return t.patch(e,s),t.applyData(e,s)}function wne(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Nne(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Sne(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function _ne(t,e){const n=t.all(e),a=n.shift(),i=[];if(a){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([a],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=YD(e.children[1]),c=iq(e.children[e.children.length-1]);l&&c&&(o.position={start:l,end:c}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function Cne(t,e,n){const a=n?n.children:void 0,s=(a?a.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let c=-1;const d=[];for(;++c<l;){const p=e.children[c],g={},x=o?o[c]:void 0;x&&(g.align=x);let b={type:"element",tagName:s,properties:g,children:[]};p&&(b.children=t.all(p),t.patch(p,b),b=t.applyData(p,b)),d.push(b)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,f),t.applyData(e,f)}function Tne(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const tR=9,nR=32;function kne(t){const e=String(t),n=/\r?\n|\r/g;let a=n.exec(e),i=0;const s=[];for(;a;)s.push(rR(e.slice(i,a.index),i>0,!0),a[0]),i=a.index+a[0].length,a=n.exec(e);return s.push(rR(e.slice(i),i>0,!1)),s.join("")}function rR(t,e,n){let a=0,i=t.length;if(e){let s=t.codePointAt(a);for(;s===tR||s===nR;)a++,s=t.codePointAt(a)}if(n){let s=t.codePointAt(i-1);for(;s===tR||s===nR;)i--,s=t.codePointAt(i-1)}return i>a?t.slice(a,i):""}function Ane(t,e){const n={type:"text",value:kne(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Ene(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Pne={blockquote:sne,break:one,code:lne,delete:cne,emphasis:une,footnoteReference:dne,heading:hne,html:fne,imageReference:pne,image:mne,inlineCode:gne,linkReference:yne,link:xne,listItem:vne,list:jne,paragraph:wne,root:Nne,strong:Sne,table:_ne,tableCell:Tne,tableRow:Cne,text:Ane,thematicBreak:Ene,toml:mj,yaml:mj,definition:mj,footnoteDefinition:mj};function mj(){}const Tq=-1,UN=0,bv=1,gw=2,nO=3,rO=4,aO=5,iO=6,kq=7,Aq=8,aR=typeof self=="object"?self:globalThis,Dne=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),a=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case UN:case Tq:return n(o,i);case bv:{const l=n([],i);for(const c of o)l.push(a(c));return l}case gw:{const l=n({},i);for(const[c,d]of o)l[a(c)]=a(d);return l}case nO:return n(new Date(o),i);case rO:{const{source:l,flags:c}=o;return n(new RegExp(l,c),i)}case aO:{const l=n(new Map,i);for(const[c,d]of o)l.set(a(c),a(d));return l}case iO:{const l=n(new Set,i);for(const c of o)l.add(a(c));return l}case kq:{const{name:l,message:c}=o;return n(new aR[l](c),i)}case Aq:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new aR[s](o),i)};return a},iR=t=>Dne(new Map,t)(0),gm="",{toString:One}={},{keys:Mne}=Object,Wx=t=>{const e=typeof t;if(e!=="object"||!t)return[UN,e];const n=One.call(t).slice(8,-1);switch(n){case"Array":return[bv,gm];case"Object":return[gw,gm];case"Date":return[nO,gm];case"RegExp":return[rO,gm];case"Map":return[aO,gm];case"Set":return[iO,gm];case"DataView":return[bv,n]}return n.includes("Array")?[bv,n]:n.includes("Error")?[kq,n]:[gw,n]},gj=([t,e])=>t===UN&&(e==="function"||e==="symbol"),Ine=(t,e,n,a)=>{const i=(o,l)=>{const c=a.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=Wx(o);switch(l){case UN:{let f=o;switch(c){case"bigint":l=Aq,f=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return i([Tq],o)}return i([l,f],o)}case bv:{if(c){let g=o;return c==="DataView"?g=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(g=new Uint8Array(o)),i([c,[...g]],o)}const f=[],p=i([l,f],o);for(const g of o)f.push(s(g));return p}case gw:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],p=i([l,f],o);for(const g of Mne(o))(t||!gj(Wx(o[g])))&&f.push([s(g),s(o[g])]);return p}case nO:return i([l,o.toISOString()],o);case rO:{const{source:f,flags:p}=o;return i([l,{source:f,flags:p}],o)}case aO:{const f=[],p=i([l,f],o);for(const[g,x]of o)(t||!(gj(Wx(g))||gj(Wx(x))))&&f.push([s(g),s(x)]);return p}case iO:{const f=[],p=i([l,f],o);for(const g of o)(t||!gj(Wx(g)))&&f.push(s(g));return p}}const{message:d}=o;return i([l,{name:c,message:d}],o)};return s},sR=(t,{json:e,lossy:n}={})=>{const a=[];return Ine(!(e||n),!!e,new Map,a)(t),a},yw=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?iR(sR(t,e)):structuredClone(t):(t,e)=>iR(sR(t,e));function Rne(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Lne(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Fne(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Rne,a=t.options.footnoteBackLabel||Lne,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[c]);if(!d)continue;const f=t.all(d),p=String(d.identifier).toUpperCase(),g=Fg(p.toLowerCase());let x=0;const b=[],j=t.footnoteCounts.get(p);for(;j!==void 0&&++x<=j;){b.length>0&&b.push({type:"text",value:" "});let T=typeof n=="string"?n:n(c,x);typeof T=="string"&&(T={type:"text",value:T}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof a=="string"?a:a(c,x),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const S=f[f.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const T=S.children[S.children.length-1];T&&T.type==="text"?T.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...b)}else f.push(...b);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(f,!0)};t.patch(d,_),l.push(_)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...yw(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const VN=function(t){if(t==null)return qne;if(typeof t=="function")return HN(t);if(typeof t=="object")return Array.isArray(t)?$ne(t):Bne(t);if(typeof t=="string")return zne(t);throw new Error("Expected function, string, or object as test")};function $ne(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=VN(t[n]);return HN(a);function a(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Bne(t){const e=t;return HN(n);function n(a){const i=a;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function zne(t){return HN(e);function e(n){return n&&n.type===t}}function HN(t){return e;function e(n,a,i){return!!(Une(n)&&t.call(this,n,typeof a=="number"?a:void 0,i||void 0))}}function qne(){return!0}function Une(t){return t!==null&&typeof t=="object"&&"type"in t}const Eq=[],Vne=!0,EE=!1,Hne="skip";function Pq(t,e,n,a){let i;typeof e=="function"&&typeof n!="function"?(a=n,n=e):i=e;const s=VN(i),o=a?-1:1;l(t,void 0,[])();function l(c,d,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const x=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return g;function g(){let x=Eq,b,j,S;if((!e||s(c,d,f[f.length-1]||void 0))&&(x=Gne(n(c,f)),x[0]===EE))return x;if("children"in c&&c.children){const _=c;if(_.children&&x[0]!==Hne)for(j=(a?_.children.length:-1)+o,S=f.concat(_);j>-1&&j<_.children.length;){const T=_.children[j];if(b=l(T,j,S)(),b[0]===EE)return b;j=typeof b[1]=="number"?b[1]:j+o}}return x}}}function Gne(t){return Array.isArray(t)?t:typeof t=="number"?[Vne,t]:t==null?Eq:[t]}function sO(t,e,n,a){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=a),Pq(t,s,l,i);function l(c,d){const f=d[d.length-1],p=f?f.children.indexOf(c):void 0;return o(c,p,f)}}const PE={}.hasOwnProperty,Wne={};function Kne(t,e){const n=e||Wne,a=new Map,i=new Map,s=new Map,o={...Pne,...n.handlers},l={all:d,applyData:Qne,definitionById:a,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:Yne,wrap:Jne};return sO(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?a:i,g=String(f.identifier).toUpperCase();p.has(g)||p.set(g,f)}}),l;function c(f,p){const g=f.type,x=l.handlers[g];if(PE.call(l.handlers,g)&&x)return x(l,f,p);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in f){const{children:j,...S}=f,_=yw(S);return _.children=l.all(f),_}return yw(f)}return(l.options.unknownHandler||Xne)(l,f,p)}function d(f){const p=[];if("children"in f){const g=f.children;let x=-1;for(;++x<g.length;){const b=l.one(g[x],f);if(b){if(x&&g[x-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=oR(b.value)),!Array.isArray(b)&&b.type==="element")){const j=b.children[0];j&&j.type==="text"&&(j.value=oR(j.value))}Array.isArray(b)?p.push(...b):p.push(b)}}}return p}}function Yne(t,e){t.position&&(e.position=LZ(t))}function Qne(t,e){let n=e;if(t&&t.data){const a=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof a=="string")if(n.type==="element")n.tagName=a;else{const o="children"in n?n.children:[n];n={type:"element",tagName:a,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,yw(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Xne(t,e){const n=e.data||{},a="value"in e&&!(PE.call(n,"hProperties")||PE.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function Jne(t,e){const n=[];let a=-1;for(e&&n.push({type:"text",value:`
`});++a<t.length;)a&&n.push({type:"text",value:`
`}),n.push(t[a]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function oR(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function lR(t,e){const n=Kne(t,e),a=n.one(t,void 0),i=Fne(n),s=Array.isArray(a)?{type:"root",children:a}:a||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Zne(t,e){return t&&"run"in t?async function(n,a){const i=lR(n,{file:a,...e});await t.run(i,a)}:function(n,a){return lR(n,{file:a,...t||e})}}function cR(t){if(t)throw t}var cC,uR;function ere(){if(uR)return cC;uR=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var f=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!f&&!p)return!1;var g;for(g in d);return typeof g>"u"||t.call(d,g)},o=function(d,f){n&&f.name==="__proto__"?n(d,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):d[f.name]=f.newValue},l=function(d,f){if(f==="__proto__")if(t.call(d,f)){if(a)return a(d,f).value}else return;return d[f]};return cC=function c(){var d,f,p,g,x,b,j=arguments[0],S=1,_=arguments.length,T=!1;for(typeof j=="boolean"&&(T=j,j=arguments[1]||{},S=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});S<_;++S)if(d=arguments[S],d!=null)for(f in d)p=l(j,f),g=l(d,f),j!==g&&(T&&g&&(s(g)||(x=i(g)))?(x?(x=!1,b=p&&i(p)?p:[]):b=p&&s(p)?p:{},o(j,{name:f,newValue:c(T,b,g)})):typeof g<"u"&&o(j,{name:f,newValue:g}));return j},cC}var tre=ere();const uC=Wn(tre);function DE(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function nre(){const t=[],e={run:n,use:a};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(c,...d){const f=t[++s];let p=-1;if(c){o(c);return}for(;++p<i.length;)(d[p]===null||d[p]===void 0)&&(d[p]=i[p]);i=d,f?rre(f,l)(...d):o(null,...d)}}function a(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function rre(t,e){let n;return a;function a(...o){const l=t.length>o.length;let c;l&&o.push(i);try{c=t.apply(this,o)}catch(d){const f=d;if(l&&n)throw f;return i(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(o,...l){n||(n=!0,e(o,...l))}function s(o){i(null,o)}}const Sl={basename:are,dirname:ire,extname:sre,join:ore,sep:"/"};function are(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ob(t);let n=0,a=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1);return a<0?"":t.slice(n,a)}if(e===t)return"";let o=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(a=i):(l=-1,a=o));return n===a?a=o:a<0&&(a=t.length),t.slice(n,a)}function ire(t){if(Ob(t),t.length===0)return".";let e=-1,n=t.length,a;for(;--n;)if(t.codePointAt(n)===47){if(a){e=n;break}}else a||(a=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function sre(t){Ob(t);let e=t.length,n=-1,a=0,i=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){a=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===a+1?"":t.slice(i,n)}function ore(...t){let e=-1,n;for(;++e<t.length;)Ob(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":lre(n)}function lre(t){Ob(t);const e=t.codePointAt(0)===47;let n=cre(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function cre(t,e){let n="",a=0,i=-1,s=0,o=-1,l,c;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||a!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",a=0):(n=n.slice(0,c),a=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",a=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",a=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),a=o-i-1;i=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Ob(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const ure={cwd:dre};function dre(){return"/"}function OE(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function hre(t){if(typeof t=="string")t=new URL(t);else if(!OE(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return fre(t)}function fre(t){if(t.hostname!==""){const a=new TypeError('File URL host must be "localhost" or empty on darwin');throw a.code="ERR_INVALID_FILE_URL_HOST",a}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const a=e.codePointAt(n+2);if(a===70||a===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const dC=["history","path","basename","stem","extname","dirname"];class Dq{constructor(e){let n;e?OE(e)?n={path:e}:typeof e=="string"||pre(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":ure.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let a=-1;for(;++a<dC.length;){const s=dC[a];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)dC.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Sl.basename(this.path):void 0}set basename(e){fC(e,"basename"),hC(e,"basename"),this.path=Sl.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Sl.dirname(this.path):void 0}set dirname(e){dR(this.basename,"dirname"),this.path=Sl.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Sl.extname(this.path):void 0}set extname(e){if(hC(e,"extname"),dR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Sl.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){OE(e)&&(e=hre(e)),fC(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Sl.basename(this.path,this.extname):void 0}set stem(e){fC(e,"stem"),hC(e,"stem"),this.path=Sl.join(this.dirname||"",e+(this.extname||""))}fail(e,n,a){const i=this.message(e,n,a);throw i.fatal=!0,i}info(e,n,a){const i=this.message(e,n,a);return i.fatal=void 0,i}message(e,n,a){const i=new gi(e,n,a);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function hC(t,e){if(t&&t.includes(Sl.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Sl.sep+"`")}function fC(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function dR(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function pre(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const mre=function(t){const a=this.constructor.prototype,i=a[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,a),s},gre={}.hasOwnProperty;class oO extends mre{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=nre()}copy(){const e=new oO;let n=-1;for(;++n<this.attachers.length;){const a=this.attachers[n];e.use(...a)}return e.data(uC(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(gC("data",this.frozen),this.namespace[e]=n,this):gre.call(this.namespace,e)&&this.namespace[e]||void 0:e?(gC("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...a]=this.attachers[this.freezeIndex];if(a[0]===!1)continue;a[0]===!0&&(a[0]=void 0);const i=n.call(e,...a);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=yj(e),a=this.parser||this.Parser;return pC("parse",a),a(String(n),n)}process(e,n){const a=this;return this.freeze(),pC("process",this.parser||this.Parser),mC("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const l=yj(e),c=a.parse(l);a.run(c,l,function(f,p,g){if(f||!p||!g)return d(f);const x=p,b=a.stringify(x,g);vre(b)?g.value=b:g.result=b,d(f,g)});function d(f,p){f||!p?o(f):s?s(p):n(void 0,p)}}}processSync(e){let n=!1,a;return this.freeze(),pC("processSync",this.parser||this.Parser),mC("processSync",this.compiler||this.Compiler),this.process(e,i),fR("processSync","process",n),a;function i(s,o){n=!0,cR(s),a=o}}run(e,n,a){hR(e),this.freeze();const i=this.transformers;return!a&&typeof n=="function"&&(a=n,n=void 0),a?s(void 0,a):new Promise(s);function s(o,l){const c=yj(n);i.run(e,c,d);function d(f,p,g){const x=p||e;f?l(f):o?o(x):a(void 0,x,g)}}}runSync(e,n){let a=!1,i;return this.run(e,n,s),fR("runSync","run",a),i;function s(o,l){cR(o),i=l,a=!0}}stringify(e,n){this.freeze();const a=yj(n),i=this.compiler||this.Compiler;return mC("stringify",i),hR(e),i(e,a)}use(e,...n){const a=this.attachers,i=this.namespace;if(gC("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[f,...p]=d;c(f,p)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=uC(!0,i.settings,d.settings))}function l(d){let f=-1;if(d!=null)if(Array.isArray(d))for(;++f<d.length;){const p=d[f];s(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,f){let p=-1,g=-1;for(;++p<a.length;)if(a[p][0]===d){g=p;break}if(g===-1)a.push([d,...f]);else if(f.length>0){let[x,...b]=f;const j=a[g][1];DE(j)&&DE(x)&&(x=uC(!0,j,x)),a[g]=[d,x,...b]}}}}const yre=new oO().freeze();function pC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function mC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function gC(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function hR(t){if(!DE(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function fR(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function yj(t){return xre(t)?t:new Dq(t)}function xre(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function vre(t){return typeof t=="string"||bre(t)}function bre(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const jre="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",pR=[],mR={allowDangerousHtml:!0},wre=/^(https?|ircs?|mailto|xmpp)$/i,Nre=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function wf(t){const e=Sre(t),n=_re(t);return Cre(e.runSync(e.parse(n),n),t)}function Sre(t){const e=t.rehypePlugins||pR,n=t.remarkPlugins||pR,a=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...mR}:mR;return yre().use(ine).use(n).use(Zne,a).use(e)}function _re(t){const e=t.children||"",n=new Dq;return typeof e=="string"&&(n.value=e),n}function Cre(t,e){const n=e.allowedElements,a=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||Tre;for(const f of Nre)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+jre+f.id,void 0);return sO(t,d),qZ(t,{Fragment:r.Fragment,components:i,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function d(f,p,g){if(f.type==="raw"&&g&&typeof p=="number")return o?g.children.splice(p,1):g.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let x;for(x in sC)if(Object.hasOwn(sC,x)&&Object.hasOwn(f.properties,x)){const b=f.properties[x],j=sC[x];(j===null||j.includes(f.tagName))&&(f.properties[x]=c(String(b||""),x,f))}}if(f.type==="element"){let x=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!x&&a&&typeof p=="number"&&(x=!a(f,p,g)),x&&g&&typeof p=="number")return l&&f.children?g.children.splice(p,1,...f.children):g.children.splice(p,1),p}}}function Tre(t){const e=t.indexOf(":"),n=t.indexOf("?"),a=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||a!==-1&&e>a||wre.test(t.slice(0,e))?t:""}function gR(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let a=0,i=n.indexOf(e);for(;i!==-1;)a++,i=n.indexOf(e,i+e.length);return a}function kre(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Are(t,e,n){const i=VN((n||{}).ignore||[]),s=Ere(e);let o=-1;for(;++o<s.length;)Pq(t,"text",l);function l(d,f){let p=-1,g;for(;++p<f.length;){const x=f[p],b=g?g.children:void 0;if(i(x,b?b.indexOf(x):void 0,g))return;g=x}if(g)return c(d,f)}function c(d,f){const p=f[f.length-1],g=s[o][0],x=s[o][1];let b=0;const S=p.children.indexOf(d);let _=!1,T=[];g.lastIndex=0;let C=g.exec(d.value);for(;C;){const P=C.index,k={index:C.index,input:C.input,stack:[...f,d]};let E=x(...C,k);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?g.lastIndex=P+1:(b!==P&&T.push({type:"text",value:d.value.slice(b,P)}),Array.isArray(E)?T.push(...E):E&&T.push(E),b=P+C[0].length,_=!0),!g.global)break;C=g.exec(d.value)}return _?(b<d.value.length&&T.push({type:"text",value:d.value.slice(b)}),p.children.splice(S,1,...T)):T=[d],S+T.length}}function Ere(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let a=-1;for(;++a<n.length;){const i=n[a];e.push([Pre(i[0]),Dre(i[1])])}return e}function Pre(t){return typeof t=="string"?new RegExp(kre(t),"g"):t}function Dre(t){return typeof t=="function"?t:function(){return t}}const yC="phrasing",xC=["autolink","link","image","label"];function Ore(){return{transforms:[Bre],enter:{literalAutolink:Ire,literalAutolinkEmail:vC,literalAutolinkHttp:vC,literalAutolinkWww:vC},exit:{literalAutolink:$re,literalAutolinkEmail:Fre,literalAutolinkHttp:Rre,literalAutolinkWww:Lre}}}function Mre(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:yC,notInConstruct:xC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:yC,notInConstruct:xC},{character:":",before:"[ps]",after:"\\/",inConstruct:yC,notInConstruct:xC}]}}function Ire(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function vC(t){this.config.enter.autolinkProtocol.call(this,t)}function Rre(t){this.config.exit.autolinkProtocol.call(this,t)}function Lre(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Fre(t){this.config.exit.autolinkEmail.call(this,t)}function $re(t){this.exit(t)}function Bre(t){Are(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,zre],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),qre]],{ignore:["link","linkReference"]})}function zre(t,e,n,a,i){let s="";if(!Oq(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!Ure(n)))return!1;const o=Vre(n+a);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function qre(t,e,n,a){return!Oq(a,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Ure(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Vre(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],a=n.indexOf(")");const i=gR(t,"(");let s=gR(t,")");for(;a!==-1&&i>s;)t+=n.slice(0,a+1),n=n.slice(a+1),a=n.indexOf(")"),s++;return[t,n]}function Oq(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||jf(n)||zN(n))&&(!e||n!==47)}Mq.peek=Zre;function Hre(){this.buffer()}function Gre(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Wre(){this.buffer()}function Kre(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Yre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=$o(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Qre(t){this.exit(t)}function Xre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=$o(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Jre(t){this.exit(t)}function Zre(){return"["}function Mq(t,e,n,a){const i=n.createTracker(a);let s=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=i.move("]"),s}function eae(){return{enter:{gfmFootnoteCallString:Hre,gfmFootnoteCall:Gre,gfmFootnoteDefinitionLabelString:Wre,gfmFootnoteDefinition:Kre},exit:{gfmFootnoteCallString:Yre,gfmFootnoteCall:Qre,gfmFootnoteDefinitionLabelString:Xre,gfmFootnoteDefinition:Jre}}}function tae(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Mq},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(a,i,s,o){const l=s.createTracker(o);let c=l.move("[^");const d=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(a),{before:c,after:"]"})),f(),c+=l.move("]:"),a.children&&a.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(a,l.current()),e?Iq:nae))),d(),c}}function nae(t,e,n){return e===0?t:Iq(t,e,n)}function Iq(t,e,n){return(n?"":"    ")+t}const rae=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Rq.peek=lae;function aae(){return{canContainEols:["delete"],enter:{strikethrough:sae},exit:{strikethrough:oae}}}function iae(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:rae}],handlers:{delete:Rq}}}function sae(t){this.enter({type:"delete",children:[]},t)}function oae(t){this.exit(t)}function Rq(t,e,n,a){const i=n.createTracker(a),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function lae(){return"~"}function cae(t){return t.length}function uae(t,e){const n=e||{},a=(n.align||[]).concat(),i=n.stringLength||cae,s=[],o=[],l=[],c=[];let d=0,f=-1;for(;++f<t.length;){const j=[],S=[];let _=-1;for(t[f].length>d&&(d=t[f].length);++_<t[f].length;){const T=dae(t[f][_]);if(n.alignDelimiters!==!1){const C=i(T);S[_]=C,(c[_]===void 0||C>c[_])&&(c[_]=C)}j.push(T)}o[f]=j,l[f]=S}let p=-1;if(typeof a=="object"&&"length"in a)for(;++p<d;)s[p]=yR(a[p]);else{const j=yR(a);for(;++p<d;)s[p]=j}p=-1;const g=[],x=[];for(;++p<d;){const j=s[p];let S="",_="";j===99?(S=":",_=":"):j===108?S=":":j===114&&(_=":");let T=n.alignDelimiters===!1?1:Math.max(1,c[p]-S.length-_.length);const C=S+"-".repeat(T)+_;n.alignDelimiters!==!1&&(T=S.length+T+_.length,T>c[p]&&(c[p]=T),x[p]=T),g[p]=C}o.splice(1,0,g),l.splice(1,0,x),f=-1;const b=[];for(;++f<o.length;){const j=o[f],S=l[f];p=-1;const _=[];for(;++p<d;){const T=j[p]||"";let C="",P="";if(n.alignDelimiters!==!1){const k=c[p]-(S[p]||0),E=s[p];E===114?C=" ".repeat(k):E===99?k%2?(C=" ".repeat(k/2+.5),P=" ".repeat(k/2-.5)):(C=" ".repeat(k/2),P=C):P=" ".repeat(k)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(C),_.push(T),n.alignDelimiters!==!1&&_.push(P),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&_.push("|")}b.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return b.join(`
`)}function dae(t){return t==null?"":String(t)}function yR(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function hae(t,e,n,a){const i=n.enter("blockquote"),s=n.createTracker(a);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),fae);return i(),o}function fae(t,e,n){return">"+(n?"":" ")+t}function pae(t,e){return xR(t,e.inConstruct,!0)&&!xR(t,e.notInConstruct,!1)}function xR(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let a=-1;for(;++a<e.length;)if(t.includes(e[a]))return!0;return!1}function vR(t,e,n,a){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&pae(n.stack,n.unsafe[i]))return/[ \t]/.test(a.before)?"":" ";return`\\
`}function mae(t,e){const n=String(t);let a=n.indexOf(e),i=a,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;a!==-1;)a===i?++s>o&&(o=s):s=1,i=a+e.length,a=n.indexOf(e,i);return o}function gae(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function yae(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function xae(t,e,n,a){const i=yae(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(gae(t,n)){const p=n.enter("codeIndented"),g=n.indentLines(s,vae);return p(),g}const l=n.createTracker(a),c=i.repeat(Math.max(mae(s,i)+1,3)),d=n.enter("codeFenced");let f=l.move(c);if(t.lang){const p=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...l.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...l.current()})),p()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),d(),f}function vae(t,e,n){return(n?"":"    ")+t}function lO(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function bae(t,e,n,a){const i=lO(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(a);let d=c.move("[");return d+=c.move(n.safe(n.associationId(t),{before:d,after:"]",...c.current()})),d+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+i),d+=c.move(n.safe(t.title,{before:d,after:i,...c.current()})),d+=c.move(i),l()),o(),d}function jae(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Dv(t){return"&#x"+t.toString(16).toUpperCase()+";"}function xw(t,e,n){const a=rg(t),i=rg(e);return a===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:a===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Lq.peek=wae;function Lq(t,e,n,a){const i=jae(n),s=n.enter("emphasis"),o=n.createTracker(a),l=o.move(i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const d=c.charCodeAt(0),f=xw(a.before.charCodeAt(a.before.length-1),d,i);f.inside&&(c=Dv(d)+c.slice(1));const p=c.charCodeAt(c.length-1),g=xw(a.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+Dv(p));const x=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function wae(t,e,n){return n.options.emphasis||"*"}function Nae(t,e){let n=!1;return sO(t,function(a){if("value"in a&&/\r?\n|\r/.test(a.value)||a.type==="break")return n=!0,EE}),!!((!t.depth||t.depth<3)&&ZD(t)&&(e.options.setext||n))}function Sae(t,e,n,a){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(a);if(Nae(t,n)){const f=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return p(),f(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(d)&&(d=Dv(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,n.options.closeAtx&&(d+=" "+o),c(),l(),d}Fq.peek=_ae;function Fq(t){return t.value||""}function _ae(){return"<"}$q.peek=Cae;function $q(t,e,n,a){const i=lO(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(a);let d=c.move("![");return d+=c.move(n.safe(t.alt,{before:d,after:"]",...c.current()})),d+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+i),d+=c.move(n.safe(t.title,{before:d,after:i,...c.current()})),d+=c.move(i),l()),d+=c.move(")"),o(),d}function Cae(){return"!"}Bq.peek=Tae;function Bq(t,e,n,a){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("![");const d=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),i==="full"||!d||d!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Tae(){return"!"}zq.peek=kae;function zq(t,e,n){let a=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(a);)i+="`";for(/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^`|`$/.test(a))&&(a=" "+a+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(a);){let d=c.index;a.charCodeAt(d)===10&&a.charCodeAt(d-1)===13&&d--,a=a.slice(0,d)+" "+a.slice(c.index+1)}}return i+a+i}function kae(){return"`"}function qq(t,e){const n=ZD(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Uq.peek=Aae;function Uq(t,e,n,a){const i=lO(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(a);let l,c;if(qq(t,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let p=o.move("<");return p+=o.move(n.containerPhrasing(t,{before:p,after:">",...o.current()})),p+=o.move(">"),l(),n.stack=f,p}l=n.enter("link"),c=n.enter("label");let d=o.move("[");return d+=o.move(n.containerPhrasing(t,{before:d,after:"](",...o.current()})),d+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(n.safe(t.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(c=n.enter("destinationRaw"),d+=o.move(n.safe(t.url,{before:d,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),d+=o.move(" "+i),d+=o.move(n.safe(t.title,{before:d,after:i,...o.current()})),d+=o.move(i),c()),d+=o.move(")"),l(),d}function Aae(t,e,n){return qq(t,n)?"<":"["}Vq.peek=Eae;function Vq(t,e,n,a){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("[");const d=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),i==="full"||!d||d!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Eae(){return"["}function cO(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Pae(t){const e=cO(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Dae(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Hq(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Oae(t,e,n,a){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?Dae(n):cO(n);const l=t.ordered?o==="."?")":".":Pae(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),Hq(n)===o&&f){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const d=n.containerFlow(t,a);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),d}function Mae(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Iae(t,e,n,a){const i=Mae(n);let s=n.bulletCurrent||cO(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(a);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,l.current()),f);return c(),d;function f(p,g,x){return g?(x?"":" ".repeat(o))+p:(x?s:s+" ".repeat(o-s.length))+p}}function Rae(t,e,n,a){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,a);return s(),i(),o}const Lae=VN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Fae(t,e,n,a){return(t.children.some(function(o){return Lae(o)})?n.containerPhrasing:n.containerFlow).call(n,t,a)}function $ae(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Gq.peek=Bae;function Gq(t,e,n,a){const i=$ae(n),s=n.enter("strong"),o=n.createTracker(a),l=o.move(i+i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const d=c.charCodeAt(0),f=xw(a.before.charCodeAt(a.before.length-1),d,i);f.inside&&(c=Dv(d)+c.slice(1));const p=c.charCodeAt(c.length-1),g=xw(a.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+Dv(p));const x=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function Bae(t,e,n){return n.options.strong||"*"}function zae(t,e,n,a){return n.safe(t.value,a)}function qae(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Uae(t,e,n){const a=(Hq(n)+(n.options.ruleSpaces?" ":"")).repeat(qae(n));return n.options.ruleSpaces?a.slice(0,-1):a}const Wq={blockquote:hae,break:vR,code:xae,definition:bae,emphasis:Lq,hardBreak:vR,heading:Sae,html:Fq,image:$q,imageReference:Bq,inlineCode:zq,link:Uq,linkReference:Vq,list:Oae,listItem:Iae,paragraph:Rae,root:Fae,strong:Gq,text:zae,thematicBreak:Uae};function Vae(){return{enter:{table:Hae,tableData:bR,tableHeader:bR,tableRow:Wae},exit:{codeText:Kae,table:Gae,tableData:bC,tableHeader:bC,tableRow:bC}}}function Hae(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Gae(t){this.exit(t),this.data.inTable=void 0}function Wae(t){this.enter({type:"tableRow",children:[]},t)}function bC(t){this.exit(t)}function bR(t){this.enter({type:"tableCell",children:[]},t)}function Kae(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Yae));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Yae(t,e){return e==="|"?e:t}function Qae(t){const e=t||{},n=e.tableCellPadding,a=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:o,tableCell:c,tableRow:l}};function o(x,b,j,S){return d(f(x,j,S),x.align)}function l(x,b,j,S){const _=p(x,j,S),T=d([_]);return T.slice(0,T.indexOf(`
`))}function c(x,b,j,S){const _=j.enter("tableCell"),T=j.enter("phrasing"),C=j.containerPhrasing(x,{...S,before:s,after:s});return T(),_(),C}function d(x,b){return uae(x,{align:b,alignDelimiters:a,padding:n,stringLength:i})}function f(x,b,j){const S=x.children;let _=-1;const T=[],C=b.enter("table");for(;++_<S.length;)T[_]=p(S[_],b,j);return C(),T}function p(x,b,j){const S=x.children;let _=-1;const T=[],C=b.enter("tableRow");for(;++_<S.length;)T[_]=c(S[_],x,b,j);return C(),T}function g(x,b,j){let S=Wq.inlineCode(x,b,j);return j.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function Xae(){return{exit:{taskListCheckValueChecked:jR,taskListCheckValueUnchecked:jR,paragraph:Zae}}}function Jae(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:eie}}}function jR(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Zae(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const a=n.children[0];if(a&&a.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const l=i[s];if(l.type==="paragraph"){o=l;break}}o===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}}this.exit(t)}function eie(t,e,n,a){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(a);s&&l.move(o);let c=Wq.listItem(t,e,n,{...a,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),c;function d(f){return f+o}}function tie(){return[Ore(),eae(),aae(),Vae(),Xae()]}function nie(t){return{extensions:[Mre(),tae(t),iae(),Qae(t),Jae()]}}const rie={tokenize:cie,partial:!0},Kq={tokenize:uie,partial:!0},Yq={tokenize:die,partial:!0},Qq={tokenize:hie,partial:!0},aie={tokenize:fie,partial:!0},Xq={name:"wwwAutolink",tokenize:oie,previous:Zq},Jq={name:"protocolAutolink",tokenize:lie,previous:e9},Vc={name:"emailAutolink",tokenize:sie,previous:t9},$l={};function iie(){return{text:$l}}let $h=48;for(;$h<123;)$l[$h]=Vc,$h++,$h===58?$h=65:$h===91&&($h=97);$l[43]=Vc;$l[45]=Vc;$l[46]=Vc;$l[95]=Vc;$l[72]=[Vc,Jq];$l[104]=[Vc,Jq];$l[87]=[Vc,Xq];$l[119]=[Vc,Xq];function sie(t,e,n){const a=this;let i,s;return o;function o(p){return!ME(p)||!t9.call(a,a.previous)||uO(a.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(p))}function l(p){return ME(p)?(t.consume(p),l):p===64?(t.consume(p),c):n(p)}function c(p){return p===46?t.check(aie,f,d)(p):p===45||p===95||pi(p)?(s=!0,t.consume(p),c):f(p)}function d(p){return t.consume(p),i=!0,c}function f(p){return s&&i&&Ii(a.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function oie(t,e,n){const a=this;return i;function i(o){return o!==87&&o!==119||!Zq.call(a,a.previous)||uO(a.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(rie,t.attempt(Kq,t.attempt(Yq,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function lie(t,e,n){const a=this;let i="",s=!1;return o;function o(p){return(p===72||p===104)&&e9.call(a,a.previous)&&!uO(a.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),t.consume(p),l):n(p)}function l(p){if(Ii(p)&&i.length<5)return i+=String.fromCodePoint(p),t.consume(p),l;if(p===58){const g=i.toLowerCase();if(g==="http"||g==="https")return t.consume(p),c}return n(p)}function c(p){return p===47?(t.consume(p),s?d:(s=!0,c)):n(p)}function d(p){return p===null||mw(p)||Tr(p)||jf(p)||zN(p)?n(p):t.attempt(Kq,t.attempt(Yq,f),n)(p)}function f(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function cie(t,e,n){let a=0;return i;function i(o){return(o===87||o===119)&&a<3?(a++,t.consume(o),i):o===46&&a===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function uie(t,e,n){let a,i,s;return o;function o(d){return d===46||d===95?t.check(Qq,c,l)(d):d===null||Tr(d)||jf(d)||d!==45&&zN(d)?c(d):(s=!0,t.consume(d),o)}function l(d){return d===95?a=!0:(i=a,a=void 0),t.consume(d),o}function c(d){return i||a||!s?n(d):e(d)}}function die(t,e){let n=0,a=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&a<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Qq,e,s)(o):o===null||Tr(o)||jf(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&a++,t.consume(o),i}}function hie(t,e,n){return a;function a(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),a):l===38?(t.consume(l),s):l===93?(t.consume(l),i):l===60||l===null||Tr(l)||jf(l)?e(l):n(l)}function i(l){return l===null||l===40||l===91||Tr(l)||jf(l)?e(l):a(l)}function s(l){return Ii(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),a):Ii(l)?(t.consume(l),o):n(l)}}function fie(t,e,n){return a;function a(s){return t.consume(s),i}function i(s){return pi(s)?n(s):e(s)}}function Zq(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Tr(t)}function e9(t){return!Ii(t)}function t9(t){return!(t===47||ME(t))}function ME(t){return t===43||t===45||t===46||t===95||pi(t)}function uO(t){let e=t.length,n=!1;for(;e--;){const a=t[e][1];if((a.type==="labelLink"||a.type==="labelImage")&&!a._balanced){n=!0;break}if(a._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const pie={tokenize:wie,partial:!0};function mie(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:vie,continuation:{tokenize:bie},exit:jie}},text:{91:{name:"gfmFootnoteCall",tokenize:xie},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:gie,resolveTo:yie}}}}function gie(t,e,n){const a=this;let i=a.events.length;const s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let o;for(;i--;){const c=a.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const d=$o(a.sliceSerialize({start:o.end,end:a.now()}));return d.codePointAt(0)!==94||!s.includes(d.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function yie(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const a={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",a,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",a,e]];return t.splice(n,t.length-n+1,...l),t}function xie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s=0,o;return l;function l(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(s>999||p===93&&!o||p===null||p===91||Tr(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return i.includes($o(a.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return Tr(p)||(o=!0),s++,t.consume(p),p===92?f:d}function f(p){return p===91||p===92||p===93?(t.consume(p),s++,d):d(p)}}function vie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(b){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(b){return b===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(b)}function f(b){if(o>999||b===93&&!l||b===null||b===91||Tr(b))return n(b);if(b===93){t.exit("chunkString");const j=t.exit("gfmFootnoteDefinitionLabelString");return s=$o(a.sliceSerialize(j)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return Tr(b)||(l=!0),o++,t.consume(b),b===92?p:f}function p(b){return b===91||b===92||b===93?(t.consume(b),o++,f):f(b)}function g(b){return b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),i.includes(s)||i.push(s),Gn(t,x,"gfmFootnoteDefinitionWhitespace")):n(b)}function x(b){return e(b)}}function bie(t,e,n){return t.check(Db,e,t.attempt(pie,e,n))}function jie(t){t.exit("gfmFootnoteDefinition")}function wie(t,e,n){const a=this;return Gn(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function Nie(t){let n=(t||{}).singleTilde;const a={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:a},insideSpan:{null:[a]},attentionMarkers:{null:[126]}};function i(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let d=c;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[c][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[c][1].end)},p={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[c][1].start)},g=[["enter",f,l],["enter",o[d][1],l],["exit",o[d][1],l],["enter",p,l]],x=l.parser.constructs.insideSpan.null;x&&Os(g,g.length,0,qN(x,o.slice(d+1,c),l)),Os(g,g.length,0,[["exit",p,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),Os(o,d-1,c-d+3,g),c=d+g.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const d=this.previous,f=this.events;let p=0;return g;function g(b){return d===126&&f[f.length-1][1].type!=="characterEscape"?c(b):(o.enter("strikethroughSequenceTemporary"),x(b))}function x(b){const j=rg(d);if(b===126)return p>1?c(b):(o.consume(b),p++,x);if(p<2&&!n)return c(b);const S=o.exit("strikethroughSequenceTemporary"),_=rg(b);return S._open=!_||_===2&&!!j,S._close=!j||j===2&&!!_,l(b)}}}class Sie{constructor(){this.map=[]}add(e,n,a){_ie(this,e,n,a)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const a=[];for(;n>0;)n-=1,a.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];a.push(e.slice()),e.length=0;let i=a.pop();for(;i;){for(const s of i)e.push(s);i=a.pop()}this.map.length=0}}function _ie(t,e,n,a){let i=0;if(!(n===0&&a.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...a);return}i+=1}t.map.push([e,n,a])}}function Cie(t,e){let n=!1;const a=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&a.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=a.length-1;a[s]=a[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return a}function Tie(){return{flow:{null:{name:"table",tokenize:kie,resolveAll:Aie}}}}function kie(t,e,n){const a=this;let i=0,s=0,o;return l;function l(q){let F=a.events.length-1;for(;F>-1;){const X=a.events[F][1].type;if(X==="lineEnding"||X==="linePrefix")F--;else break}const H=F>-1?a.events[F][1].type:null,V=H==="tableHead"||H==="tableRow"?E:c;return V===E&&a.parser.lazy[a.now().line]?n(q):V(q)}function c(q){return t.enter("tableHead"),t.enter("tableRow"),d(q)}function d(q){return q===124||(o=!0,s+=1),f(q)}function f(q){return q===null?n(q):Qt(q)?s>1?(s=0,a.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(q),t.exit("lineEnding"),x):n(q):On(q)?Gn(t,f,"whitespace")(q):(s+=1,o&&(o=!1,i+=1),q===124?(t.enter("tableCellDivider"),t.consume(q),t.exit("tableCellDivider"),o=!0,f):(t.enter("data"),p(q)))}function p(q){return q===null||q===124||Tr(q)?(t.exit("data"),f(q)):(t.consume(q),q===92?g:p)}function g(q){return q===92||q===124?(t.consume(q),p):p(q)}function x(q){return a.interrupt=!1,a.parser.lazy[a.now().line]?n(q):(t.enter("tableDelimiterRow"),o=!1,On(q)?Gn(t,b,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):b(q))}function b(q){return q===45||q===58?S(q):q===124?(o=!0,t.enter("tableCellDivider"),t.consume(q),t.exit("tableCellDivider"),j):k(q)}function j(q){return On(q)?Gn(t,S,"whitespace")(q):S(q)}function S(q){return q===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(q),t.exit("tableDelimiterMarker"),_):q===45?(s+=1,_(q)):q===null||Qt(q)?P(q):k(q)}function _(q){return q===45?(t.enter("tableDelimiterFiller"),T(q)):k(q)}function T(q){return q===45?(t.consume(q),T):q===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(q),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C(q))}function C(q){return On(q)?Gn(t,P,"whitespace")(q):P(q)}function P(q){return q===124?b(q):q===null||Qt(q)?!o||i!==s?k(q):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(q)):k(q)}function k(q){return n(q)}function E(q){return t.enter("tableRow"),I(q)}function I(q){return q===124?(t.enter("tableCellDivider"),t.consume(q),t.exit("tableCellDivider"),I):q===null||Qt(q)?(t.exit("tableRow"),e(q)):On(q)?Gn(t,I,"whitespace")(q):(t.enter("data"),L(q))}function L(q){return q===null||q===124||Tr(q)?(t.exit("data"),I(q)):(t.consume(q),q===92?$:L)}function $(q){return q===92||q===124?(t.consume(q),L):L(q)}}function Aie(t,e){let n=-1,a=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,d,f,p;const g=new Sie;for(;++n<t.length;){const x=t[n],b=x[1];x[0]==="enter"?b.type==="tableHead"?(l=!1,c!==0&&(wR(g,e,c,d,f),f=void 0,c=0),d={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",d,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(a=!0,p=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",f,e]])),i=b.type==="tableDelimiterRow"?2:f?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(a=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],p=xj(g,e,s,i,void 0,p),s=[0,0,0,0]),o[2]=n)):b.type==="tableCellDivider"&&(a?a=!1:(s[1]!==0&&(o[0]=o[1],p=xj(g,e,s,i,void 0,p)),s=o,o=[s[1],n,0,0])):b.type==="tableHead"?(l=!0,c=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],p=xj(g,e,s,i,n,p)):o[1]!==0&&(p=xj(g,e,o,i,n,p)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&wR(g,e,c,d,f),g.consume(e.events),n=-1;++n<e.events.length;){const x=e.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=Cie(e.events,n))}return t}function xj(t,e,n,a,i,s){const o=a===1?"tableHeader":a===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Cm(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=Cm(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const d=Cm(e.events,n[2]),f=Cm(e.events,n[3]),p={type:l,start:Object.assign({},d),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",p,e]]),a!==2){const g=e.events[n[2]],x=e.events[n[3]];if(g[1].end=Object.assign({},x[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,j=n[3]-n[2]-1;t.add(b,j,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return i!==void 0&&(s.end=Object.assign({},Cm(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function wR(t,e,n,a,i){const s=[],o=Cm(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),a.end=Object.assign({},o),s.push(["exit",a,e]),t.add(n+1,0,s)}function Cm(t,e){const n=t[e],a=n[0]==="enter"?"start":"end";return n[1][a]}const Eie={name:"tasklistCheck",tokenize:Die};function Pie(){return{text:{91:Eie}}}function Die(t,e,n){const a=this;return i;function i(c){return a.previous!==null||!a._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return Tr(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Qt(c)?e(c):On(c)?t.check({tokenize:Oie},e,n)(c):n(c)}}function Oie(t,e,n){return Gn(t,a,"whitespace");function a(i){return i===null?n(i):e(i)}}function Mie(t){return hq([iie(),mie(),Nie(t),Tie(),Pie()])}const Iie={};function Nf(t){const e=this,n=t||Iie,a=e.data(),i=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),o=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);i.push(Mie(n)),s.push(tie()),o.push(nie(n))}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Rie,Lie;function Fie(){return{geminiUrl:Rie,vertexUrl:Lie}}function $ie(t,e,n){var a,i,s;if(!(!((a=t.httpOptions)===null||a===void 0)&&a.baseUrl)){const o=Fie();return t.vertexai?(i=o.vertexUrl)!==null&&i!==void 0?i:e:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mb{}function un(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(a,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function O(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];O(f,e.slice(s+1),n[d])}else for(const d of c)O(d,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];O(c[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const a=e[e.length-1],i=t[a];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else t[a]=n}function D(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const a=e[n];if(a.endsWith("[]")){const i=a.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(o=>D(o,e.slice(n+1))):void 0}else return}else t=t[a]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function n9(t,e){const n=Kr(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function r9(t,e){return Array.isArray(e)?e.map(n=>vw(t,n)):[vw(t,e)]}function vw(t,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Bie(t,e){const n=vw(t,e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function zie(t,e){const n=vw(t,e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function NR(t,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function a9(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>NR(t,n)):[NR(t,e)]}function IE(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function SR(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function _R(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ss(t,e){if(e==null)throw new Error("ContentUnion is required");return IE(e)?e:{role:"user",parts:a9(t,e)}}function i9(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const a=ss(t,n);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(t.isVertexAI()){const n=ss(t,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ss(t,n)):[ss(t,e)]}function gd(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(SR(e)||_R(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ss(t,e)]}const n=[],a=[],i=IE(e[0]);for(const s of e){const o=IE(s);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)n.push(s);else{if(SR(s)||_R(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");a.push(s)}}return i||n.push({role:"user",parts:a9(t,a)}),n}function s9(t,e){return e}function o9(t,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function GN(t,e){return e}function WN(t,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function qie(t,e,n,a=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===a;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function yd(t,e){if(typeof e!="string")throw new Error("name must be a string");return qie(t,e,"cachedContents")}function l9(t,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function xd(t,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Uie(t){return t!=null&&typeof t=="object"&&"name"in t}function Vie(t){return t!=null&&typeof t=="object"&&"video"in t}function Hie(t){return t!=null&&typeof t=="object"&&"uri"in t}function c9(t,e){var n;let a;if(Uie(e)&&(a=e.name),!(Hie(e)&&(a=e.uri,a===void 0))&&!(Vie(e)&&(a=(n=e.video)===null||n===void 0?void 0:n.uri,a===void 0))){if(typeof e=="string"&&(a=e),a===void 0)throw new Error("Could not extract file name from the provided input.");if(a.startsWith("https://")){const s=a.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${a}`);a=s[0]}else a.startsWith("files/")&&(a=a.split("files/")[1]);return a}}function u9(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function d9(t,e){for(const n of["models","tunedModels","publisherModels"])if(Gie(e,n))return e[n];return[]}function Gie(t,e){return t!==null&&typeof t=="object"&&e in t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wie(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function Kie(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Wie(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const d=D(e,["functionResponse"]);d!=null&&O(n,["functionResponse"],d);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function CR(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Kie(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Yie(){return{}}function Qie(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Xie(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],Qie(t,a)),n}function Jie(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Yie());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],Xie(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function Zie(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function ese(t,e){const n={},a=D(e,["functionCallingConfig"]);if(a!=null&&O(n,["functionCallingConfig"],Zie(t,a)),D(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function tse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);n!==void 0&&s!=null&&O(n,["expireTime"],s);const o=D(e,["displayName"]);n!==void 0&&o!=null&&O(n,["displayName"],o);const l=D(e,["contents"]);if(n!==void 0&&l!=null){let p=gd(t,l);Array.isArray(p)&&(p=p.map(g=>CR(t,g))),O(n,["contents"],p)}const c=D(e,["systemInstruction"]);n!==void 0&&c!=null&&O(n,["systemInstruction"],CR(t,ss(t,c)));const d=D(e,["tools"]);if(n!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>Jie(t,g))),O(n,["tools"],p)}const f=D(e,["toolConfig"]);return n!==void 0&&f!=null&&O(n,["toolConfig"],ese(t,f)),a}function nse(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],n9(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],tse(t,i,n)),n}function rse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function ase(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function ise(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);return n!==void 0&&s!=null&&O(n,["expireTime"],s),a}function sse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],ise(t,i,n)),n}function ose(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function lse(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],ose(t,a,n)),n}function cse(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function use(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],cse(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const d=D(e,["functionCall"]);d!=null&&O(n,["functionCall"],d);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function TR(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>use(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function dse(){return{}}function hse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function fse(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],hse(t,a)),n}function pse(){return{}}function mse(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function gse(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],mse(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function yse(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],gse(t,a)),n}function xse(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],dse());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],fse(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],pse());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],yse(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const d=D(e,["functionDeclarations"]);return d!=null&&O(n,["functionDeclarations"],d),n}function vse(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function bse(t,e){const n={},a=D(e,["latitude"]);a!=null&&O(n,["latitude"],a);const i=D(e,["longitude"]);return i!=null&&O(n,["longitude"],i),n}function jse(t,e){const n={},a=D(e,["latLng"]);return a!=null&&O(n,["latLng"],bse(t,a)),n}function wse(t,e){const n={},a=D(e,["functionCallingConfig"]);a!=null&&O(n,["functionCallingConfig"],vse(t,a));const i=D(e,["retrievalConfig"]);return i!=null&&O(n,["retrievalConfig"],jse(t,i)),n}function Nse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);n!==void 0&&s!=null&&O(n,["expireTime"],s);const o=D(e,["displayName"]);n!==void 0&&o!=null&&O(n,["displayName"],o);const l=D(e,["contents"]);if(n!==void 0&&l!=null){let p=gd(t,l);Array.isArray(p)&&(p=p.map(g=>TR(t,g))),O(n,["contents"],p)}const c=D(e,["systemInstruction"]);n!==void 0&&c!=null&&O(n,["systemInstruction"],TR(t,ss(t,c)));const d=D(e,["tools"]);if(n!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>xse(t,g))),O(n,["tools"],p)}const f=D(e,["toolConfig"]);return n!==void 0&&f!=null&&O(n,["toolConfig"],wse(t,f)),a}function Sse(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],n9(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Nse(t,i,n)),n}function _se(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Cse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Tse(t,e,n){const a={},i=D(e,["ttl"]);n!==void 0&&i!=null&&O(n,["ttl"],i);const s=D(e,["expireTime"]);return n!==void 0&&s!=null&&O(n,["expireTime"],s),a}function kse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],yd(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Tse(t,i,n)),n}function Ase(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function Ese(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Ase(t,a,n)),n}function Zj(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["model"]);s!=null&&O(n,["model"],s);const o=D(e,["createTime"]);o!=null&&O(n,["createTime"],o);const l=D(e,["updateTime"]);l!=null&&O(n,["updateTime"],l);const c=D(e,["expireTime"]);c!=null&&O(n,["expireTime"],c);const d=D(e,["usageMetadata"]);return d!=null&&O(n,["usageMetadata"],d),n}function Pse(){return{}}function Dse(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Zj(t,o))),O(n,["cachedContents"],s)}return n}function ew(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["model"]);s!=null&&O(n,["model"],s);const o=D(e,["createTime"]);o!=null&&O(n,["createTime"],o);const l=D(e,["updateTime"]);l!=null&&O(n,["updateTime"],l);const c=D(e,["expireTime"]);c!=null&&O(n,["expireTime"],c);const d=D(e,["usageMetadata"]);return d!=null&&O(n,["usageMetadata"],d),n}function Ose(){return{}}function Mse(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>ew(t,o))),O(n,["cachedContents"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ag;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ag||(ag={}));class KN{constructor(e,n,a,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,a,i)}init(e,n,a){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};a?typeof a=="object"?o=Object.assign({},a):o=a:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(kR||(kR={}));var AR;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(AR||(AR={}));var ER;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(ER||(ER={}));var PR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(PR||(PR={}));var DR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(DR||(DR={}));var OR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(OR||(OR={}));var MR;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(MR||(MR={}));var ig;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT"})(ig||(ig={}));var IR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY"})(IR||(IR={}));var RR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(RR||(RR={}));var LR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(LR||(LR={}));var FR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(FR||(FR={}));var $R;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($R||($R={}));var hd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(hd||(hd={}));var BR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(BR||(BR={}));var RE;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(RE||(RE={}));var zR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(zR||(zR={}));var qR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(qR||(qR={}));var UR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(UR||(UR={}));var VR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(VR||(VR={}));var HR;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(HR||(HR={}));var GR;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(GR||(GR={}));var WR;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(WR||(WR={}));var KR;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(KR||(KR={}));var YR;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(YR||(YR={}));var QR;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(QR||(QR={}));var XR;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(XR||(XR={}));var JR;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(JR||(JR={}));var ZR;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(ZR||(ZR={}));var e4;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(e4||(e4={}));var t4;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(t4||(t4={}));var n4;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(n4||(n4={}));var r4;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(r4||(r4={}));var a4;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(a4||(a4={}));class vj{get text(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const g of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,b]of Object.entries(g))x!=="text"&&x!=="thought"&&(b!==null||b!==void 0)&&p.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(p))g!=="inlineData"&&(x!==null||x!==void 0)&&f.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,a,i,s,o,l,c,d;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,a,i,s,o,l,c,d;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class i4{}class s4{}class Ise{}class Rse{}class o4{}class l4{}class c4{}class Lse{}class u4{}class d4{}class h4{}class Fse{}class LE{constructor(e){const n={};for(const a of e.headers.entries())n[a[0]]=a[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class $se{}class Bse{}class zse{get text(){var e,n,a;let i="",s=!1;const o=[];for(const l of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,i+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,a;let i="";const s=[];for(const o of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&s.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qse extends Mb{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new KN(ag.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(n),n)}async create(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Sse(this.apiClient,e);return l=un("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>ew(this.apiClient,f))}else{const d=nse(this.apiClient,e);return l=un("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=_se(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>ew(this.apiClient,f))}else{const d=rse(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Cse(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Ose(),p=new d4;return Object.assign(p,f),p})}else{const d=ase(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Pse(),p=new d4;return Object.assign(p,f),p})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=kse(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>ew(this.apiClient,f))}else{const d=sse(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Ese(this.apiClient,e);return l=un("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Mse(this.apiClient,f),g=new h4;return Object.assign(g,p),g})}else{const d=lse(this.apiClient,e);return l=un("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Dse(this.apiClient,f),g=new h4;return Object.assign(g,p),g})}}}function f4(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],a=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hi(t){return this instanceof hi?(this.v=t,this):new hi(t)}function bw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(x){return function(b){return Promise.resolve(b).then(x,p)}}function l(x,b){a[x]&&(i[x]=function(j){return new Promise(function(S,_){s.push([x,j,S,_])>1||c(x,j)})},b&&(i[x]=b(i[x])))}function c(x,b){try{d(a[x](b))}catch(j){g(s[0][3],j)}}function d(x){x.value instanceof hi?Promise.resolve(x.value.v).then(f,p):g(s[0][2],x)}function f(x){c("next",x)}function p(x){c("throw",x)}function g(x,b){x(b),s.shift(),s.length&&c(s[0][0],s[0][1])}}function FE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof f4=="function"?f4(t):t[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(s){n[s]=t[s]&&function(o){return new Promise(function(l,c){o=t[s](o),i(l,c,o.done,o.value)})}}function i(s,o,l,c){Promise.resolve(c).then(function(d){s({value:d,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Use(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:h9(n)}function h9(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function Vse(t){if(t.length!==0){if(t[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hse(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let a=0,i=t[0];for(;a<n;)if(t[a].role==="user")i=t[a],a++;else{const s=[];let o=!0;for(;a<n&&t[a].role==="model";)s.push(t[a]),o&&!h9(t[a])&&(o=!1),a++;o&&(e.push(i),e.push(...s))}return e}class Gse{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Wse(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class Wse{constructor(e,n,a,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=a,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),Vse(s)}async sendMessage(e){var n;await this.sendPromise;const a=ss(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o;const c=(o=(s=(await i).candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,d=c?[c]:[];this.recordHistory(a,d)})(),await this.sendPromise,i}async sendMessageStream(e){var n;await this.sendPromise;const a=ss(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,a)}getHistory(e=!1){return e?Hse(this.history):this.history}processStreamResponse(e,n){var a,i;return bw(this,arguments,function*(){var o,l,c,d;const f=[];try{for(var p=!0,g=FE(e),x;x=yield hi(g.next()),o=x.done,!o;p=!0){d=x.value,p=!1;const b=d;if(Use(b)){const j=(i=(a=b.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content;j!==void 0&&f.push(j)}yield yield hi(b)}}catch(b){l={error:b}}finally{try{!p&&!o&&(c=g.return)&&(yield hi(c.call(g)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(e,n){let a=[];n.length>0&&n.every(i=>i.role==="model")?a=n:a.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kse(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);return n!==void 0&&s!=null&&O(n,["_query","pageToken"],s),a}function Yse(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Kse(t,a,n)),n}function Qse(t,e){const n={},a=D(e,["details"]);a!=null&&O(n,["details"],a);const i=D(e,["message"]);i!=null&&O(n,["message"],i);const s=D(e,["code"]);return s!=null&&O(n,["code"],s),n}function Xse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["mimeType"]);s!=null&&O(n,["mimeType"],s);const o=D(e,["sizeBytes"]);o!=null&&O(n,["sizeBytes"],o);const l=D(e,["createTime"]);l!=null&&O(n,["createTime"],l);const c=D(e,["expirationTime"]);c!=null&&O(n,["expirationTime"],c);const d=D(e,["updateTime"]);d!=null&&O(n,["updateTime"],d);const f=D(e,["sha256Hash"]);f!=null&&O(n,["sha256Hash"],f);const p=D(e,["uri"]);p!=null&&O(n,["uri"],p);const g=D(e,["downloadUri"]);g!=null&&O(n,["downloadUri"],g);const x=D(e,["state"]);x!=null&&O(n,["state"],x);const b=D(e,["source"]);b!=null&&O(n,["source"],b);const j=D(e,["videoMetadata"]);j!=null&&O(n,["videoMetadata"],j);const S=D(e,["error"]);return S!=null&&O(n,["error"],Qse(t,S)),n}function Jse(t,e){const n={},a=D(e,["file"]);a!=null&&O(n,["file"],Xse(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Zse(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","file"],c9(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function eoe(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","file"],c9(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function toe(t,e){const n={},a=D(e,["details"]);a!=null&&O(n,["details"],a);const i=D(e,["message"]);i!=null&&O(n,["message"],i);const s=D(e,["code"]);return s!=null&&O(n,["code"],s),n}function $E(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["mimeType"]);s!=null&&O(n,["mimeType"],s);const o=D(e,["sizeBytes"]);o!=null&&O(n,["sizeBytes"],o);const l=D(e,["createTime"]);l!=null&&O(n,["createTime"],l);const c=D(e,["expirationTime"]);c!=null&&O(n,["expirationTime"],c);const d=D(e,["updateTime"]);d!=null&&O(n,["updateTime"],d);const f=D(e,["sha256Hash"]);f!=null&&O(n,["sha256Hash"],f);const p=D(e,["uri"]);p!=null&&O(n,["uri"],p);const g=D(e,["downloadUri"]);g!=null&&O(n,["downloadUri"],g);const x=D(e,["state"]);x!=null&&O(n,["state"],x);const b=D(e,["source"]);b!=null&&O(n,["source"],b);const j=D(e,["videoMetadata"]);j!=null&&O(n,["videoMetadata"],j);const S=D(e,["error"]);return S!=null&&O(n,["error"],toe(t,S)),n}function noe(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>$E(t,o))),O(n,["files"],s)}return n}function roe(){return{}}function aoe(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ioe extends Mb{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new KN(ag.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>$E(this.apiClient,n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Yse(this.apiClient,e);return s=un("files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=noe(this.apiClient,c),f=new Fse;return Object.assign(f,d),f})}}async createInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Jse(this.apiClient,e);return s=un("upload/v1beta/files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=roe(),d=new $se;return Object.assign(d,c),d})}}async get(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Zse(this.apiClient,e);return s=un("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>$E(this.apiClient,c))}}async delete(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=eoe(this.apiClient,e);return s=un("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=aoe(),d=new Bse;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function soe(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function ooe(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function loe(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],soe(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const d=D(e,["functionResponse"]);d!=null&&O(n,["functionResponse"],d);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function coe(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],ooe(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const d=D(e,["functionCall"]);d!=null&&O(n,["functionCall"],d);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function uoe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>loe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function doe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>coe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function hoe(){return{}}function foe(){return{}}function poe(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function moe(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function goe(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],poe(t,a)),n}function yoe(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],moe(t,a)),n}function xoe(){return{}}function voe(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function boe(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],voe(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function joe(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],boe(t,a)),n}function woe(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],hoe());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],goe(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function Noe(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],foe());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],yoe(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],xoe());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],joe(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const d=D(e,["functionDeclarations"]);return d!=null&&O(n,["functionDeclarations"],d),n}function Soe(t,e){const n={},a=D(e,["handle"]);if(a!=null&&O(n,["handle"],a),D(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function _oe(t,e){const n={},a=D(e,["handle"]);a!=null&&O(n,["handle"],a);const i=D(e,["transparent"]);return i!=null&&O(n,["transparent"],i),n}function p4(){return{}}function m4(){return{}}function Coe(t,e){const n={},a=D(e,["disabled"]);a!=null&&O(n,["disabled"],a);const i=D(e,["startOfSpeechSensitivity"]);i!=null&&O(n,["startOfSpeechSensitivity"],i);const s=D(e,["endOfSpeechSensitivity"]);s!=null&&O(n,["endOfSpeechSensitivity"],s);const o=D(e,["prefixPaddingMs"]);o!=null&&O(n,["prefixPaddingMs"],o);const l=D(e,["silenceDurationMs"]);return l!=null&&O(n,["silenceDurationMs"],l),n}function Toe(t,e){const n={},a=D(e,["disabled"]);a!=null&&O(n,["disabled"],a);const i=D(e,["startOfSpeechSensitivity"]);i!=null&&O(n,["startOfSpeechSensitivity"],i);const s=D(e,["endOfSpeechSensitivity"]);s!=null&&O(n,["endOfSpeechSensitivity"],s);const o=D(e,["prefixPaddingMs"]);o!=null&&O(n,["prefixPaddingMs"],o);const l=D(e,["silenceDurationMs"]);return l!=null&&O(n,["silenceDurationMs"],l),n}function koe(t,e){const n={},a=D(e,["automaticActivityDetection"]);a!=null&&O(n,["automaticActivityDetection"],Coe(t,a));const i=D(e,["activityHandling"]);i!=null&&O(n,["activityHandling"],i);const s=D(e,["turnCoverage"]);return s!=null&&O(n,["turnCoverage"],s),n}function Aoe(t,e){const n={},a=D(e,["automaticActivityDetection"]);a!=null&&O(n,["automaticActivityDetection"],Toe(t,a));const i=D(e,["activityHandling"]);i!=null&&O(n,["activityHandling"],i);const s=D(e,["turnCoverage"]);return s!=null&&O(n,["turnCoverage"],s),n}function Eoe(t,e){const n={},a=D(e,["targetTokens"]);return a!=null&&O(n,["targetTokens"],a),n}function Poe(t,e){const n={},a=D(e,["targetTokens"]);return a!=null&&O(n,["targetTokens"],a),n}function Doe(t,e){const n={},a=D(e,["triggerTokens"]);a!=null&&O(n,["triggerTokens"],a);const i=D(e,["slidingWindow"]);return i!=null&&O(n,["slidingWindow"],Eoe(t,i)),n}function Ooe(t,e){const n={},a=D(e,["triggerTokens"]);a!=null&&O(n,["triggerTokens"],a);const i=D(e,["slidingWindow"]);return i!=null&&O(n,["slidingWindow"],Poe(t,i)),n}function Moe(t,e,n){const a={},i=D(e,["generationConfig"]);n!==void 0&&i!=null&&O(n,["setup","generationConfig"],i);const s=D(e,["responseModalities"]);n!==void 0&&s!=null&&O(n,["setup","generationConfig","responseModalities"],s);const o=D(e,["temperature"]);n!==void 0&&o!=null&&O(n,["setup","generationConfig","temperature"],o);const l=D(e,["topP"]);n!==void 0&&l!=null&&O(n,["setup","generationConfig","topP"],l);const c=D(e,["topK"]);n!==void 0&&c!=null&&O(n,["setup","generationConfig","topK"],c);const d=D(e,["maxOutputTokens"]);n!==void 0&&d!=null&&O(n,["setup","generationConfig","maxOutputTokens"],d);const f=D(e,["mediaResolution"]);n!==void 0&&f!=null&&O(n,["setup","generationConfig","mediaResolution"],f);const p=D(e,["seed"]);n!==void 0&&p!=null&&O(n,["setup","generationConfig","seed"],p);const g=D(e,["speechConfig"]);n!==void 0&&g!=null&&O(n,["setup","generationConfig","speechConfig"],g);const x=D(e,["systemInstruction"]);n!==void 0&&x!=null&&O(n,["setup","systemInstruction"],uoe(t,ss(t,x)));const b=D(e,["tools"]);if(n!==void 0&&b!=null){let P=WN(t,b);Array.isArray(P)&&(P=P.map(k=>woe(t,GN(t,k)))),O(n,["setup","tools"],P)}const j=D(e,["sessionResumption"]);n!==void 0&&j!=null&&O(n,["setup","sessionResumption"],Soe(t,j));const S=D(e,["inputAudioTranscription"]);n!==void 0&&S!=null&&O(n,["setup","inputAudioTranscription"],p4());const _=D(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&O(n,["setup","outputAudioTranscription"],p4());const T=D(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&O(n,["setup","realtimeInputConfig"],koe(t,T));const C=D(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&O(n,["setup","contextWindowCompression"],Doe(t,C)),a}function Ioe(t,e,n){const a={},i=D(e,["generationConfig"]);n!==void 0&&i!=null&&O(n,["setup","generationConfig"],i);const s=D(e,["responseModalities"]);n!==void 0&&s!=null&&O(n,["setup","generationConfig","responseModalities"],s);const o=D(e,["temperature"]);n!==void 0&&o!=null&&O(n,["setup","generationConfig","temperature"],o);const l=D(e,["topP"]);n!==void 0&&l!=null&&O(n,["setup","generationConfig","topP"],l);const c=D(e,["topK"]);n!==void 0&&c!=null&&O(n,["setup","generationConfig","topK"],c);const d=D(e,["maxOutputTokens"]);n!==void 0&&d!=null&&O(n,["setup","generationConfig","maxOutputTokens"],d);const f=D(e,["mediaResolution"]);n!==void 0&&f!=null&&O(n,["setup","generationConfig","mediaResolution"],f);const p=D(e,["seed"]);n!==void 0&&p!=null&&O(n,["setup","generationConfig","seed"],p);const g=D(e,["speechConfig"]);n!==void 0&&g!=null&&O(n,["setup","generationConfig","speechConfig"],g);const x=D(e,["systemInstruction"]);n!==void 0&&x!=null&&O(n,["setup","systemInstruction"],doe(t,ss(t,x)));const b=D(e,["tools"]);if(n!==void 0&&b!=null){let P=WN(t,b);Array.isArray(P)&&(P=P.map(k=>Noe(t,GN(t,k)))),O(n,["setup","tools"],P)}const j=D(e,["sessionResumption"]);n!==void 0&&j!=null&&O(n,["setup","sessionResumption"],_oe(t,j));const S=D(e,["inputAudioTranscription"]);n!==void 0&&S!=null&&O(n,["setup","inputAudioTranscription"],m4());const _=D(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&O(n,["setup","outputAudioTranscription"],m4());const T=D(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&O(n,["setup","realtimeInputConfig"],Aoe(t,T));const C=D(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&O(n,["setup","contextWindowCompression"],Ooe(t,C)),a}function Roe(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["setup","model"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Moe(t,i,n)),n}function Loe(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["setup","model"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Ioe(t,i,n)),n}function Foe(){return{}}function $oe(){return{}}function Boe(){return{}}function zoe(){return{}}function qoe(t,e){const n={},a=D(e,["media"]);a!=null&&O(n,["mediaChunks"],r9(t,a));const i=D(e,["audio"]);i!=null&&O(n,["audio"],zie(t,i));const s=D(e,["audioStreamEnd"]);s!=null&&O(n,["audioStreamEnd"],s);const o=D(e,["video"]);o!=null&&O(n,["video"],Bie(t,o));const l=D(e,["text"]);return l!=null&&O(n,["text"],l),D(e,["activityStart"])!=null&&O(n,["activityStart"],Foe()),D(e,["activityEnd"])!=null&&O(n,["activityEnd"],Boe()),n}function Uoe(t,e){const n={},a=D(e,["media"]);if(a!=null&&O(n,["mediaChunks"],r9(t,a)),D(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=D(e,["audioStreamEnd"]);if(i!=null&&O(n,["audioStreamEnd"],i),D(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(D(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return D(e,["activityStart"])!=null&&O(n,["activityStart"],$oe()),D(e,["activityEnd"])!=null&&O(n,["activityEnd"],zoe()),n}function Voe(){return{}}function Hoe(){return{}}function Goe(t,e){const n={},a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function Woe(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Koe(t,e){const n={},a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Goe(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const d=D(e,["functionResponse"]);d!=null&&O(n,["functionResponse"],d);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function Yoe(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],Woe(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const d=D(e,["functionCall"]);d!=null&&O(n,["functionCall"],d);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function Qoe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Koe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Xoe(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Yoe(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function g4(t,e){const n={},a=D(e,["text"]);a!=null&&O(n,["text"],a);const i=D(e,["finished"]);return i!=null&&O(n,["finished"],i),n}function y4(t,e){const n={},a=D(e,["text"]);a!=null&&O(n,["text"],a);const i=D(e,["finished"]);return i!=null&&O(n,["finished"],i),n}function Joe(t,e){const n={},a=D(e,["modelTurn"]);a!=null&&O(n,["modelTurn"],Qoe(t,a));const i=D(e,["turnComplete"]);i!=null&&O(n,["turnComplete"],i);const s=D(e,["interrupted"]);s!=null&&O(n,["interrupted"],s);const o=D(e,["groundingMetadata"]);o!=null&&O(n,["groundingMetadata"],o);const l=D(e,["generationComplete"]);l!=null&&O(n,["generationComplete"],l);const c=D(e,["inputTranscription"]);c!=null&&O(n,["inputTranscription"],g4(t,c));const d=D(e,["outputTranscription"]);return d!=null&&O(n,["outputTranscription"],g4(t,d)),n}function Zoe(t,e){const n={},a=D(e,["modelTurn"]);a!=null&&O(n,["modelTurn"],Xoe(t,a));const i=D(e,["turnComplete"]);i!=null&&O(n,["turnComplete"],i);const s=D(e,["interrupted"]);s!=null&&O(n,["interrupted"],s);const o=D(e,["groundingMetadata"]);o!=null&&O(n,["groundingMetadata"],o);const l=D(e,["generationComplete"]);l!=null&&O(n,["generationComplete"],l);const c=D(e,["inputTranscription"]);c!=null&&O(n,["inputTranscription"],y4(t,c));const d=D(e,["outputTranscription"]);return d!=null&&O(n,["outputTranscription"],y4(t,d)),n}function ele(t,e){const n={},a=D(e,["id"]);a!=null&&O(n,["id"],a);const i=D(e,["args"]);i!=null&&O(n,["args"],i);const s=D(e,["name"]);return s!=null&&O(n,["name"],s),n}function tle(t,e){const n={},a=D(e,["args"]);a!=null&&O(n,["args"],a);const i=D(e,["name"]);return i!=null&&O(n,["name"],i),n}function nle(t,e){const n={},a=D(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>ele(t,s))),O(n,["functionCalls"],i)}return n}function rle(t,e){const n={},a=D(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>tle(t,s))),O(n,["functionCalls"],i)}return n}function ale(t,e){const n={},a=D(e,["ids"]);return a!=null&&O(n,["ids"],a),n}function ile(t,e){const n={},a=D(e,["ids"]);return a!=null&&O(n,["ids"],a),n}function bj(t,e){const n={},a=D(e,["modality"]);a!=null&&O(n,["modality"],a);const i=D(e,["tokenCount"]);return i!=null&&O(n,["tokenCount"],i),n}function jj(t,e){const n={},a=D(e,["modality"]);a!=null&&O(n,["modality"],a);const i=D(e,["tokenCount"]);return i!=null&&O(n,["tokenCount"],i),n}function sle(t,e){const n={},a=D(e,["promptTokenCount"]);a!=null&&O(n,["promptTokenCount"],a);const i=D(e,["cachedContentTokenCount"]);i!=null&&O(n,["cachedContentTokenCount"],i);const s=D(e,["responseTokenCount"]);s!=null&&O(n,["responseTokenCount"],s);const o=D(e,["toolUsePromptTokenCount"]);o!=null&&O(n,["toolUsePromptTokenCount"],o);const l=D(e,["thoughtsTokenCount"]);l!=null&&O(n,["thoughtsTokenCount"],l);const c=D(e,["totalTokenCount"]);c!=null&&O(n,["totalTokenCount"],c);const d=D(e,["promptTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(b=>bj(t,b))),O(n,["promptTokensDetails"],x)}const f=D(e,["cacheTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(b=>bj(t,b))),O(n,["cacheTokensDetails"],x)}const p=D(e,["responseTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>bj(t,b))),O(n,["responseTokensDetails"],x)}const g=D(e,["toolUsePromptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(b=>bj(t,b))),O(n,["toolUsePromptTokensDetails"],x)}return n}function ole(t,e){const n={},a=D(e,["promptTokenCount"]);a!=null&&O(n,["promptTokenCount"],a);const i=D(e,["cachedContentTokenCount"]);i!=null&&O(n,["cachedContentTokenCount"],i);const s=D(e,["candidatesTokenCount"]);s!=null&&O(n,["responseTokenCount"],s);const o=D(e,["toolUsePromptTokenCount"]);o!=null&&O(n,["toolUsePromptTokenCount"],o);const l=D(e,["thoughtsTokenCount"]);l!=null&&O(n,["thoughtsTokenCount"],l);const c=D(e,["totalTokenCount"]);c!=null&&O(n,["totalTokenCount"],c);const d=D(e,["promptTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(j=>jj(t,j))),O(n,["promptTokensDetails"],b)}const f=D(e,["cacheTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(j=>jj(t,j))),O(n,["cacheTokensDetails"],b)}const p=D(e,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(j=>jj(t,j))),O(n,["responseTokensDetails"],b)}const g=D(e,["toolUsePromptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(j=>jj(t,j))),O(n,["toolUsePromptTokensDetails"],b)}const x=D(e,["trafficType"]);return x!=null&&O(n,["trafficType"],x),n}function lle(t,e){const n={},a=D(e,["timeLeft"]);return a!=null&&O(n,["timeLeft"],a),n}function cle(t,e){const n={},a=D(e,["timeLeft"]);return a!=null&&O(n,["timeLeft"],a),n}function ule(t,e){const n={},a=D(e,["newHandle"]);a!=null&&O(n,["newHandle"],a);const i=D(e,["resumable"]);i!=null&&O(n,["resumable"],i);const s=D(e,["lastConsumedClientMessageIndex"]);return s!=null&&O(n,["lastConsumedClientMessageIndex"],s),n}function dle(t,e){const n={},a=D(e,["newHandle"]);a!=null&&O(n,["newHandle"],a);const i=D(e,["resumable"]);i!=null&&O(n,["resumable"],i);const s=D(e,["lastConsumedClientMessageIndex"]);return s!=null&&O(n,["lastConsumedClientMessageIndex"],s),n}function hle(t,e){const n={};D(e,["setupComplete"])!=null&&O(n,["setupComplete"],Voe());const i=D(e,["serverContent"]);i!=null&&O(n,["serverContent"],Joe(t,i));const s=D(e,["toolCall"]);s!=null&&O(n,["toolCall"],nle(t,s));const o=D(e,["toolCallCancellation"]);o!=null&&O(n,["toolCallCancellation"],ale(t,o));const l=D(e,["usageMetadata"]);l!=null&&O(n,["usageMetadata"],sle(t,l));const c=D(e,["goAway"]);c!=null&&O(n,["goAway"],lle(t,c));const d=D(e,["sessionResumptionUpdate"]);return d!=null&&O(n,["sessionResumptionUpdate"],ule(t,d)),n}function fle(t,e){const n={};D(e,["setupComplete"])!=null&&O(n,["setupComplete"],Hoe());const i=D(e,["serverContent"]);i!=null&&O(n,["serverContent"],Zoe(t,i));const s=D(e,["toolCall"]);s!=null&&O(n,["toolCall"],rle(t,s));const o=D(e,["toolCallCancellation"]);o!=null&&O(n,["toolCallCancellation"],ile(t,o));const l=D(e,["usageMetadata"]);l!=null&&O(n,["usageMetadata"],ole(t,l));const c=D(e,["goAway"]);c!=null&&O(n,["goAway"],cle(t,c));const d=D(e,["sessionResumptionUpdate"]);return d!=null&&O(n,["sessionResumptionUpdate"],dle(t,d)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ple(t,e){const n={};if(D(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function mle(t,e){const n={};if(D(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],ple(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const d=D(e,["functionResponse"]);d!=null&&O(n,["functionResponse"],d);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function YN(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>mle(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function gle(t,e){const n={};if(D(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=D(e,["category"]);a!=null&&O(n,["category"],a);const i=D(e,["threshold"]);return i!=null&&O(n,["threshold"],i),n}function yle(){return{}}function xle(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function vle(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],xle(t,a)),n}function ble(t,e){const n={};if(D(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");D(e,["googleSearch"])!=null&&O(n,["googleSearch"],yle());const i=D(e,["googleSearchRetrieval"]);if(i!=null&&O(n,["googleSearchRetrieval"],vle(t,i)),D(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(D(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=D(e,["codeExecution"]);s!=null&&O(n,["codeExecution"],s);const o=D(e,["functionDeclarations"]);return o!=null&&O(n,["functionDeclarations"],o),n}function jle(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function wle(t,e){const n={},a=D(e,["functionCallingConfig"]);if(a!=null&&O(n,["functionCallingConfig"],jle(t,a)),D(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function Nle(t,e){const n={},a=D(e,["voiceName"]);return a!=null&&O(n,["voiceName"],a),n}function Sle(t,e){const n={},a=D(e,["prebuiltVoiceConfig"]);return a!=null&&O(n,["prebuiltVoiceConfig"],Nle(t,a)),n}function _le(t,e){const n={},a=D(e,["voiceConfig"]);a!=null&&O(n,["voiceConfig"],Sle(t,a));const i=D(e,["languageCode"]);return i!=null&&O(n,["languageCode"],i),n}function Cle(t,e){const n={},a=D(e,["includeThoughts"]);a!=null&&O(n,["includeThoughts"],a);const i=D(e,["thinkingBudget"]);return i!=null&&O(n,["thinkingBudget"],i),n}function Tle(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],YN(t,ss(t,i)));const s=D(e,["temperature"]);s!=null&&O(a,["temperature"],s);const o=D(e,["topP"]);o!=null&&O(a,["topP"],o);const l=D(e,["topK"]);l!=null&&O(a,["topK"],l);const c=D(e,["candidateCount"]);c!=null&&O(a,["candidateCount"],c);const d=D(e,["maxOutputTokens"]);d!=null&&O(a,["maxOutputTokens"],d);const f=D(e,["stopSequences"]);f!=null&&O(a,["stopSequences"],f);const p=D(e,["responseLogprobs"]);p!=null&&O(a,["responseLogprobs"],p);const g=D(e,["logprobs"]);g!=null&&O(a,["logprobs"],g);const x=D(e,["presencePenalty"]);x!=null&&O(a,["presencePenalty"],x);const b=D(e,["frequencyPenalty"]);b!=null&&O(a,["frequencyPenalty"],b);const j=D(e,["seed"]);j!=null&&O(a,["seed"],j);const S=D(e,["responseMimeType"]);S!=null&&O(a,["responseMimeType"],S);const _=D(e,["responseSchema"]);if(_!=null&&O(a,["responseSchema"],s9(t,_)),D(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(D(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=D(e,["safetySettings"]);if(n!==void 0&&T!=null){let q=T;Array.isArray(q)&&(q=q.map(F=>gle(t,F))),O(n,["safetySettings"],q)}const C=D(e,["tools"]);if(n!==void 0&&C!=null){let q=WN(t,C);Array.isArray(q)&&(q=q.map(F=>ble(t,GN(t,F)))),O(n,["tools"],q)}const P=D(e,["toolConfig"]);if(n!==void 0&&P!=null&&O(n,["toolConfig"],wle(t,P)),D(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=D(e,["cachedContent"]);n!==void 0&&k!=null&&O(n,["cachedContent"],yd(t,k));const E=D(e,["responseModalities"]);E!=null&&O(a,["responseModalities"],E);const I=D(e,["mediaResolution"]);I!=null&&O(a,["mediaResolution"],I);const L=D(e,["speechConfig"]);if(L!=null&&O(a,["speechConfig"],_le(t,o9(t,L))),D(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=D(e,["thinkingConfig"]);return $!=null&&O(a,["thinkingConfig"],Cle(t,$)),a}function x4(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>YN(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["generationConfig"],Tle(t,s,n)),n}function kle(t,e,n){const a={},i=D(e,["taskType"]);n!==void 0&&i!=null&&O(n,["requests[]","taskType"],i);const s=D(e,["title"]);n!==void 0&&s!=null&&O(n,["requests[]","title"],s);const o=D(e,["outputDimensionality"]);if(n!==void 0&&o!=null&&O(n,["requests[]","outputDimensionality"],o),D(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(D(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function Ale(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);i!=null&&O(n,["requests[]","content"],i9(t,i));const s=D(e,["config"]);s!=null&&O(n,["config"],kle(t,s,n));const o=D(e,["model"]);return o!==void 0&&O(n,["requests[]","model"],Kr(t,o)),n}function Ele(t,e,n){const a={};if(D(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(D(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=D(e,["numberOfImages"]);n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i);const s=D(e,["aspectRatio"]);n!==void 0&&s!=null&&O(n,["parameters","aspectRatio"],s);const o=D(e,["guidanceScale"]);if(n!==void 0&&o!=null&&O(n,["parameters","guidanceScale"],o),D(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=D(e,["safetyFilterLevel"]);n!==void 0&&l!=null&&O(n,["parameters","safetySetting"],l);const c=D(e,["personGeneration"]);n!==void 0&&c!=null&&O(n,["parameters","personGeneration"],c);const d=D(e,["includeSafetyAttributes"]);n!==void 0&&d!=null&&O(n,["parameters","includeSafetyAttributes"],d);const f=D(e,["includeRaiReason"]);n!==void 0&&f!=null&&O(n,["parameters","includeRaiReason"],f);const p=D(e,["language"]);n!==void 0&&p!=null&&O(n,["parameters","language"],p);const g=D(e,["outputMimeType"]);n!==void 0&&g!=null&&O(n,["parameters","outputOptions","mimeType"],g);const x=D(e,["outputCompressionQuality"]);if(n!==void 0&&x!=null&&O(n,["parameters","outputOptions","compressionQuality"],x),D(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(D(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function Ple(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],Ele(t,s,n)),n}function Dle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Ole(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);n!==void 0&&o!=null&&O(n,["_query","filter"],o);const l=D(e,["queryBase"]);return n!==void 0&&l!=null&&O(n,["_url","models_url"],u9(t,l)),a}function Mle(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Ole(t,a,n)),n}function Ile(t,e,n){const a={},i=D(e,["displayName"]);n!==void 0&&i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);n!==void 0&&s!=null&&O(n,["description"],s);const o=D(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&O(n,["defaultCheckpointId"],o),a}function Rle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],Ile(t,i,n)),n}function Lle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Fle(t,e){const n={};if(D(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(D(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(D(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function $le(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>YN(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],Fle(t,s)),n}function Ble(t,e){const n={};if(D(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=D(e,["imageBytes"]);a!=null&&O(n,["bytesBase64Encoded"],xd(t,a));const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function zle(t,e,n){const a={},i=D(e,["numberOfVideos"]);if(n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i),D(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(D(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=D(e,["durationSeconds"]);if(n!==void 0&&s!=null&&O(n,["parameters","durationSeconds"],s),D(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=D(e,["aspectRatio"]);if(n!==void 0&&o!=null&&O(n,["parameters","aspectRatio"],o),D(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=D(e,["personGeneration"]);if(n!==void 0&&l!=null&&O(n,["parameters","personGeneration"],l),D(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=D(e,["negativePrompt"]);if(n!==void 0&&c!=null&&O(n,["parameters","negativePrompt"],c),D(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function qle(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["image"]);s!=null&&O(n,["instances[0]","image"],Ble(t,s));const o=D(e,["config"]);return o!=null&&O(n,["config"],zle(t,o,n)),n}function Ule(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Vle(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],Ule(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const d=D(e,["functionCall"]);d!=null&&O(n,["functionCall"],d);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function $g(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Vle(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Hle(t,e){const n={},a=D(e,["featureSelectionPreference"]);return a!=null&&O(n,["featureSelectionPreference"],a),n}function Gle(t,e){const n={},a=D(e,["method"]);a!=null&&O(n,["method"],a);const i=D(e,["category"]);i!=null&&O(n,["category"],i);const s=D(e,["threshold"]);return s!=null&&O(n,["threshold"],s),n}function Wle(){return{}}function Kle(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["dynamicThreshold"]);return i!=null&&O(n,["dynamicThreshold"],i),n}function Yle(t,e){const n={},a=D(e,["dynamicRetrievalConfig"]);return a!=null&&O(n,["dynamicRetrievalConfig"],Kle(t,a)),n}function Qle(){return{}}function Xle(t,e){const n={},a=D(e,["apiKeyString"]);return a!=null&&O(n,["apiKeyString"],a),n}function Jle(t,e){const n={},a=D(e,["apiKeyConfig"]);a!=null&&O(n,["apiKeyConfig"],Xle(t,a));const i=D(e,["authType"]);i!=null&&O(n,["authType"],i);const s=D(e,["googleServiceAccountConfig"]);s!=null&&O(n,["googleServiceAccountConfig"],s);const o=D(e,["httpBasicAuthConfig"]);o!=null&&O(n,["httpBasicAuthConfig"],o);const l=D(e,["oauthConfig"]);l!=null&&O(n,["oauthConfig"],l);const c=D(e,["oidcConfig"]);return c!=null&&O(n,["oidcConfig"],c),n}function Zle(t,e){const n={},a=D(e,["authConfig"]);return a!=null&&O(n,["authConfig"],Jle(t,a)),n}function f9(t,e){const n={},a=D(e,["retrieval"]);a!=null&&O(n,["retrieval"],a),D(e,["googleSearch"])!=null&&O(n,["googleSearch"],Wle());const s=D(e,["googleSearchRetrieval"]);s!=null&&O(n,["googleSearchRetrieval"],Yle(t,s)),D(e,["enterpriseWebSearch"])!=null&&O(n,["enterpriseWebSearch"],Qle());const l=D(e,["googleMaps"]);l!=null&&O(n,["googleMaps"],Zle(t,l));const c=D(e,["codeExecution"]);c!=null&&O(n,["codeExecution"],c);const d=D(e,["functionDeclarations"]);return d!=null&&O(n,["functionDeclarations"],d),n}function ece(t,e){const n={},a=D(e,["mode"]);a!=null&&O(n,["mode"],a);const i=D(e,["allowedFunctionNames"]);return i!=null&&O(n,["allowedFunctionNames"],i),n}function tce(t,e){const n={},a=D(e,["latitude"]);a!=null&&O(n,["latitude"],a);const i=D(e,["longitude"]);return i!=null&&O(n,["longitude"],i),n}function nce(t,e){const n={},a=D(e,["latLng"]);return a!=null&&O(n,["latLng"],tce(t,a)),n}function rce(t,e){const n={},a=D(e,["functionCallingConfig"]);a!=null&&O(n,["functionCallingConfig"],ece(t,a));const i=D(e,["retrievalConfig"]);return i!=null&&O(n,["retrievalConfig"],nce(t,i)),n}function ace(t,e){const n={},a=D(e,["voiceName"]);return a!=null&&O(n,["voiceName"],a),n}function ice(t,e){const n={},a=D(e,["prebuiltVoiceConfig"]);return a!=null&&O(n,["prebuiltVoiceConfig"],ace(t,a)),n}function sce(t,e){const n={},a=D(e,["voiceConfig"]);a!=null&&O(n,["voiceConfig"],ice(t,a));const i=D(e,["languageCode"]);return i!=null&&O(n,["languageCode"],i),n}function oce(t,e){const n={},a=D(e,["includeThoughts"]);a!=null&&O(n,["includeThoughts"],a);const i=D(e,["thinkingBudget"]);return i!=null&&O(n,["thinkingBudget"],i),n}function lce(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],$g(t,ss(t,i)));const s=D(e,["temperature"]);s!=null&&O(a,["temperature"],s);const o=D(e,["topP"]);o!=null&&O(a,["topP"],o);const l=D(e,["topK"]);l!=null&&O(a,["topK"],l);const c=D(e,["candidateCount"]);c!=null&&O(a,["candidateCount"],c);const d=D(e,["maxOutputTokens"]);d!=null&&O(a,["maxOutputTokens"],d);const f=D(e,["stopSequences"]);f!=null&&O(a,["stopSequences"],f);const p=D(e,["responseLogprobs"]);p!=null&&O(a,["responseLogprobs"],p);const g=D(e,["logprobs"]);g!=null&&O(a,["logprobs"],g);const x=D(e,["presencePenalty"]);x!=null&&O(a,["presencePenalty"],x);const b=D(e,["frequencyPenalty"]);b!=null&&O(a,["frequencyPenalty"],b);const j=D(e,["seed"]);j!=null&&O(a,["seed"],j);const S=D(e,["responseMimeType"]);S!=null&&O(a,["responseMimeType"],S);const _=D(e,["responseSchema"]);_!=null&&O(a,["responseSchema"],s9(t,_));const T=D(e,["routingConfig"]);T!=null&&O(a,["routingConfig"],T);const C=D(e,["modelSelectionConfig"]);C!=null&&O(a,["modelConfig"],Hle(t,C));const P=D(e,["safetySettings"]);if(n!==void 0&&P!=null){let X=P;Array.isArray(X)&&(X=X.map(Y=>Gle(t,Y))),O(n,["safetySettings"],X)}const k=D(e,["tools"]);if(n!==void 0&&k!=null){let X=WN(t,k);Array.isArray(X)&&(X=X.map(Y=>f9(t,GN(t,Y)))),O(n,["tools"],X)}const E=D(e,["toolConfig"]);n!==void 0&&E!=null&&O(n,["toolConfig"],rce(t,E));const I=D(e,["labels"]);n!==void 0&&I!=null&&O(n,["labels"],I);const L=D(e,["cachedContent"]);n!==void 0&&L!=null&&O(n,["cachedContent"],yd(t,L));const $=D(e,["responseModalities"]);$!=null&&O(a,["responseModalities"],$);const q=D(e,["mediaResolution"]);q!=null&&O(a,["mediaResolution"],q);const F=D(e,["speechConfig"]);F!=null&&O(a,["speechConfig"],sce(t,o9(t,F)));const H=D(e,["audioTimestamp"]);H!=null&&O(a,["audioTimestamp"],H);const V=D(e,["thinkingConfig"]);return V!=null&&O(a,["thinkingConfig"],oce(t,V)),a}function v4(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>$g(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["generationConfig"],lce(t,s,n)),n}function cce(t,e,n){const a={},i=D(e,["taskType"]);n!==void 0&&i!=null&&O(n,["instances[]","task_type"],i);const s=D(e,["title"]);n!==void 0&&s!=null&&O(n,["instances[]","title"],s);const o=D(e,["outputDimensionality"]);n!==void 0&&o!=null&&O(n,["parameters","outputDimensionality"],o);const l=D(e,["mimeType"]);n!==void 0&&l!=null&&O(n,["instances[]","mimeType"],l);const c=D(e,["autoTruncate"]);return n!==void 0&&c!=null&&O(n,["parameters","autoTruncate"],c),a}function uce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);i!=null&&O(n,["instances[]","content"],i9(t,i));const s=D(e,["config"]);return s!=null&&O(n,["config"],cce(t,s,n)),n}function dce(t,e,n){const a={},i=D(e,["outputGcsUri"]);n!==void 0&&i!=null&&O(n,["parameters","storageUri"],i);const s=D(e,["negativePrompt"]);n!==void 0&&s!=null&&O(n,["parameters","negativePrompt"],s);const o=D(e,["numberOfImages"]);n!==void 0&&o!=null&&O(n,["parameters","sampleCount"],o);const l=D(e,["aspectRatio"]);n!==void 0&&l!=null&&O(n,["parameters","aspectRatio"],l);const c=D(e,["guidanceScale"]);n!==void 0&&c!=null&&O(n,["parameters","guidanceScale"],c);const d=D(e,["seed"]);n!==void 0&&d!=null&&O(n,["parameters","seed"],d);const f=D(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&O(n,["parameters","safetySetting"],f);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const g=D(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&O(n,["parameters","includeSafetyAttributes"],g);const x=D(e,["includeRaiReason"]);n!==void 0&&x!=null&&O(n,["parameters","includeRaiReason"],x);const b=D(e,["language"]);n!==void 0&&b!=null&&O(n,["parameters","language"],b);const j=D(e,["outputMimeType"]);n!==void 0&&j!=null&&O(n,["parameters","outputOptions","mimeType"],j);const S=D(e,["outputCompressionQuality"]);n!==void 0&&S!=null&&O(n,["parameters","outputOptions","compressionQuality"],S);const _=D(e,["addWatermark"]);n!==void 0&&_!=null&&O(n,["parameters","addWatermark"],_);const T=D(e,["enhancePrompt"]);return n!==void 0&&T!=null&&O(n,["parameters","enhancePrompt"],T),a}function hce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],dce(t,s,n)),n}function dO(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["gcsUri"],a);const i=D(e,["imageBytes"]);i!=null&&O(n,["bytesBase64Encoded"],xd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function fce(t,e){const n={},a=D(e,["maskMode"]);a!=null&&O(n,["maskMode"],a);const i=D(e,["segmentationClasses"]);i!=null&&O(n,["maskClasses"],i);const s=D(e,["maskDilation"]);return s!=null&&O(n,["dilation"],s),n}function pce(t,e){const n={},a=D(e,["controlType"]);a!=null&&O(n,["controlType"],a);const i=D(e,["enableControlImageComputation"]);return i!=null&&O(n,["computeControl"],i),n}function mce(t,e){const n={},a=D(e,["styleDescription"]);return a!=null&&O(n,["styleDescription"],a),n}function gce(t,e){const n={},a=D(e,["subjectType"]);a!=null&&O(n,["subjectType"],a);const i=D(e,["subjectDescription"]);return i!=null&&O(n,["subjectDescription"],i),n}function yce(t,e){const n={},a=D(e,["referenceImage"]);a!=null&&O(n,["referenceImage"],dO(t,a));const i=D(e,["referenceId"]);i!=null&&O(n,["referenceId"],i);const s=D(e,["referenceType"]);s!=null&&O(n,["referenceType"],s);const o=D(e,["maskImageConfig"]);o!=null&&O(n,["maskImageConfig"],fce(t,o));const l=D(e,["controlImageConfig"]);l!=null&&O(n,["controlImageConfig"],pce(t,l));const c=D(e,["styleImageConfig"]);c!=null&&O(n,["styleImageConfig"],mce(t,c));const d=D(e,["subjectImageConfig"]);return d!=null&&O(n,["subjectImageConfig"],gce(t,d)),n}function xce(t,e,n){const a={},i=D(e,["outputGcsUri"]);n!==void 0&&i!=null&&O(n,["parameters","storageUri"],i);const s=D(e,["negativePrompt"]);n!==void 0&&s!=null&&O(n,["parameters","negativePrompt"],s);const o=D(e,["numberOfImages"]);n!==void 0&&o!=null&&O(n,["parameters","sampleCount"],o);const l=D(e,["aspectRatio"]);n!==void 0&&l!=null&&O(n,["parameters","aspectRatio"],l);const c=D(e,["guidanceScale"]);n!==void 0&&c!=null&&O(n,["parameters","guidanceScale"],c);const d=D(e,["seed"]);n!==void 0&&d!=null&&O(n,["parameters","seed"],d);const f=D(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&O(n,["parameters","safetySetting"],f);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const g=D(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&O(n,["parameters","includeSafetyAttributes"],g);const x=D(e,["includeRaiReason"]);n!==void 0&&x!=null&&O(n,["parameters","includeRaiReason"],x);const b=D(e,["language"]);n!==void 0&&b!=null&&O(n,["parameters","language"],b);const j=D(e,["outputMimeType"]);n!==void 0&&j!=null&&O(n,["parameters","outputOptions","mimeType"],j);const S=D(e,["outputCompressionQuality"]);n!==void 0&&S!=null&&O(n,["parameters","outputOptions","compressionQuality"],S);const _=D(e,["editMode"]);n!==void 0&&_!=null&&O(n,["parameters","editMode"],_);const T=D(e,["baseSteps"]);return n!==void 0&&T!=null&&O(n,["parameters","editConfig","baseSteps"],T),a}function vce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>yce(t,c))),O(n,["instances[0]","referenceImages"],l)}const o=D(e,["config"]);return o!=null&&O(n,["config"],xce(t,o,n)),n}function bce(t,e,n){const a={},i=D(e,["includeRaiReason"]);n!==void 0&&i!=null&&O(n,["parameters","includeRaiReason"],i);const s=D(e,["outputMimeType"]);n!==void 0&&s!=null&&O(n,["parameters","outputOptions","mimeType"],s);const o=D(e,["outputCompressionQuality"]);n!==void 0&&o!=null&&O(n,["parameters","outputOptions","compressionQuality"],o);const l=D(e,["numberOfImages"]);n!==void 0&&l!=null&&O(n,["parameters","sampleCount"],l);const c=D(e,["mode"]);return n!==void 0&&c!=null&&O(n,["parameters","mode"],c),a}function jce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["image"]);i!=null&&O(n,["instances[0]","image"],dO(t,i));const s=D(e,["upscaleFactor"]);s!=null&&O(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=D(e,["config"]);return o!=null&&O(n,["config"],bce(t,o,n)),n}function wce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Nce(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);n!==void 0&&o!=null&&O(n,["_query","filter"],o);const l=D(e,["queryBase"]);return n!==void 0&&l!=null&&O(n,["_url","models_url"],u9(t,l)),a}function Sce(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Nce(t,a,n)),n}function _ce(t,e,n){const a={},i=D(e,["displayName"]);n!==void 0&&i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);n!==void 0&&s!=null&&O(n,["description"],s);const o=D(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&O(n,["defaultCheckpointId"],o),a}function Cce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],_ce(t,i,n)),n}function Tce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","name"],Kr(t,a));const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function kce(t,e,n){const a={},i=D(e,["systemInstruction"]);n!==void 0&&i!=null&&O(n,["systemInstruction"],$g(t,ss(t,i)));const s=D(e,["tools"]);if(n!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>f9(t,c))),O(n,["tools"],l)}const o=D(e,["generationConfig"]);return n!==void 0&&o!=null&&O(n,["generationConfig"],o),a}function Ace(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>$g(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],kce(t,s,n)),n}function Ece(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>$g(t,l))),O(n,["contents"],o)}const s=D(e,["config"]);return s!=null&&O(n,["config"],s),n}function Pce(t,e,n){const a={},i=D(e,["numberOfVideos"]);n!==void 0&&i!=null&&O(n,["parameters","sampleCount"],i);const s=D(e,["outputGcsUri"]);n!==void 0&&s!=null&&O(n,["parameters","storageUri"],s);const o=D(e,["fps"]);n!==void 0&&o!=null&&O(n,["parameters","fps"],o);const l=D(e,["durationSeconds"]);n!==void 0&&l!=null&&O(n,["parameters","durationSeconds"],l);const c=D(e,["seed"]);n!==void 0&&c!=null&&O(n,["parameters","seed"],c);const d=D(e,["aspectRatio"]);n!==void 0&&d!=null&&O(n,["parameters","aspectRatio"],d);const f=D(e,["resolution"]);n!==void 0&&f!=null&&O(n,["parameters","resolution"],f);const p=D(e,["personGeneration"]);n!==void 0&&p!=null&&O(n,["parameters","personGeneration"],p);const g=D(e,["pubsubTopic"]);n!==void 0&&g!=null&&O(n,["parameters","pubsubTopic"],g);const x=D(e,["negativePrompt"]);n!==void 0&&x!=null&&O(n,["parameters","negativePrompt"],x);const b=D(e,["enhancePrompt"]);return n!==void 0&&b!=null&&O(n,["parameters","enhancePrompt"],b),a}function Dce(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["_url","model"],Kr(t,a));const i=D(e,["prompt"]);i!=null&&O(n,["instances[0]","prompt"],i);const s=D(e,["image"]);s!=null&&O(n,["instances[0]","image"],dO(t,s));const o=D(e,["config"]);return o!=null&&O(n,["config"],Pce(t,o,n)),n}function Oce(t,e){const n={},a=D(e,["data"]);a!=null&&O(n,["data"],a);const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function Mce(t,e){const n={},a=D(e,["thought"]);a!=null&&O(n,["thought"],a);const i=D(e,["inlineData"]);i!=null&&O(n,["inlineData"],Oce(t,i));const s=D(e,["codeExecutionResult"]);s!=null&&O(n,["codeExecutionResult"],s);const o=D(e,["executableCode"]);o!=null&&O(n,["executableCode"],o);const l=D(e,["fileData"]);l!=null&&O(n,["fileData"],l);const c=D(e,["functionCall"]);c!=null&&O(n,["functionCall"],c);const d=D(e,["functionResponse"]);d!=null&&O(n,["functionResponse"],d);const f=D(e,["text"]);return f!=null&&O(n,["text"],f),n}function Ice(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Mce(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function Rce(t,e){const n={},a=D(e,["citationSources"]);return a!=null&&O(n,["citations"],a),n}function Lce(t,e){const n={},a=D(e,["content"]);a!=null&&O(n,["content"],Ice(t,a));const i=D(e,["citationMetadata"]);i!=null&&O(n,["citationMetadata"],Rce(t,i));const s=D(e,["tokenCount"]);s!=null&&O(n,["tokenCount"],s);const o=D(e,["finishReason"]);o!=null&&O(n,["finishReason"],o);const l=D(e,["avgLogprobs"]);l!=null&&O(n,["avgLogprobs"],l);const c=D(e,["groundingMetadata"]);c!=null&&O(n,["groundingMetadata"],c);const d=D(e,["index"]);d!=null&&O(n,["index"],d);const f=D(e,["logprobsResult"]);f!=null&&O(n,["logprobsResult"],f);const p=D(e,["safetyRatings"]);return p!=null&&O(n,["safetyRatings"],p),n}function b4(t,e){const n={},a=D(e,["candidates"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Lce(t,c))),O(n,["candidates"],l)}const i=D(e,["modelVersion"]);i!=null&&O(n,["modelVersion"],i);const s=D(e,["promptFeedback"]);s!=null&&O(n,["promptFeedback"],s);const o=D(e,["usageMetadata"]);return o!=null&&O(n,["usageMetadata"],o),n}function Fce(t,e){const n={},a=D(e,["values"]);return a!=null&&O(n,["values"],a),n}function $ce(){return{}}function Bce(t,e){const n={},a=D(e,["embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Fce(t,o))),O(n,["embeddings"],s)}return D(e,["metadata"])!=null&&O(n,["metadata"],$ce()),n}function zce(t,e){const n={},a=D(e,["bytesBase64Encoded"]);a!=null&&O(n,["imageBytes"],xd(t,a));const i=D(e,["mimeType"]);return i!=null&&O(n,["mimeType"],i),n}function p9(t,e){const n={},a=D(e,["safetyAttributes","categories"]);a!=null&&O(n,["categories"],a);const i=D(e,["safetyAttributes","scores"]);i!=null&&O(n,["scores"],i);const s=D(e,["contentType"]);return s!=null&&O(n,["contentType"],s),n}function qce(t,e){const n={},a=D(e,["_self"]);a!=null&&O(n,["image"],zce(t,a));const i=D(e,["raiFilteredReason"]);i!=null&&O(n,["raiFilteredReason"],i);const s=D(e,["_self"]);return s!=null&&O(n,["safetyAttributes"],p9(t,s)),n}function Uce(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>qce(t,o))),O(n,["generatedImages"],s)}const i=D(e,["positivePromptSafetyAttributes"]);return i!=null&&O(n,["positivePromptSafetyAttributes"],p9(t,i)),n}function Vce(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["updateTime"]);return s!=null&&O(n,["updateTime"],s),n}function BE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);s!=null&&O(n,["description"],s);const o=D(e,["version"]);o!=null&&O(n,["version"],o);const l=D(e,["_self"]);l!=null&&O(n,["tunedModelInfo"],Vce(t,l));const c=D(e,["inputTokenLimit"]);c!=null&&O(n,["inputTokenLimit"],c);const d=D(e,["outputTokenLimit"]);d!=null&&O(n,["outputTokenLimit"],d);const f=D(e,["supportedGenerationMethods"]);return f!=null&&O(n,["supportedActions"],f),n}function Hce(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["_self"]);if(i!=null){let s=d9(t,i);Array.isArray(s)&&(s=s.map(o=>BE(t,o))),O(n,["models"],s)}return n}function Gce(){return{}}function Wce(t,e){const n={},a=D(e,["totalTokens"]);a!=null&&O(n,["totalTokens"],a);const i=D(e,["cachedContentTokenCount"]);return i!=null&&O(n,["cachedContentTokenCount"],i),n}function Kce(t,e){const n={},a=D(e,["video","uri"]);a!=null&&O(n,["uri"],a);const i=D(e,["video","encodedVideo"]);i!=null&&O(n,["videoBytes"],xd(t,i));const s=D(e,["encoding"]);return s!=null&&O(n,["mimeType"],s),n}function Yce(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],Kce(t,a)),n}function Qce(t,e){const n={},a=D(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Yce(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function Xce(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response","generateVideoResponse"]);return l!=null&&O(n,["response"],Qce(t,l)),n}function Jce(t,e){const n={},a=D(e,["displayName"]);a!=null&&O(n,["displayName"],a);const i=D(e,["data"]);i!=null&&O(n,["data"],i);const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Zce(t,e){const n={},a=D(e,["videoMetadata"]);a!=null&&O(n,["videoMetadata"],a);const i=D(e,["thought"]);i!=null&&O(n,["thought"],i);const s=D(e,["inlineData"]);s!=null&&O(n,["inlineData"],Jce(t,s));const o=D(e,["codeExecutionResult"]);o!=null&&O(n,["codeExecutionResult"],o);const l=D(e,["executableCode"]);l!=null&&O(n,["executableCode"],l);const c=D(e,["fileData"]);c!=null&&O(n,["fileData"],c);const d=D(e,["functionCall"]);d!=null&&O(n,["functionCall"],d);const f=D(e,["functionResponse"]);f!=null&&O(n,["functionResponse"],f);const p=D(e,["text"]);return p!=null&&O(n,["text"],p),n}function eue(t,e){const n={},a=D(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Zce(t,o))),O(n,["parts"],s)}const i=D(e,["role"]);return i!=null&&O(n,["role"],i),n}function tue(t,e){const n={},a=D(e,["citations"]);return a!=null&&O(n,["citations"],a),n}function nue(t,e){const n={},a=D(e,["content"]);a!=null&&O(n,["content"],eue(t,a));const i=D(e,["citationMetadata"]);i!=null&&O(n,["citationMetadata"],tue(t,i));const s=D(e,["finishMessage"]);s!=null&&O(n,["finishMessage"],s);const o=D(e,["finishReason"]);o!=null&&O(n,["finishReason"],o);const l=D(e,["avgLogprobs"]);l!=null&&O(n,["avgLogprobs"],l);const c=D(e,["groundingMetadata"]);c!=null&&O(n,["groundingMetadata"],c);const d=D(e,["index"]);d!=null&&O(n,["index"],d);const f=D(e,["logprobsResult"]);f!=null&&O(n,["logprobsResult"],f);const p=D(e,["safetyRatings"]);return p!=null&&O(n,["safetyRatings"],p),n}function j4(t,e){const n={},a=D(e,["candidates"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>nue(t,f))),O(n,["candidates"],d)}const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["responseId"]);s!=null&&O(n,["responseId"],s);const o=D(e,["modelVersion"]);o!=null&&O(n,["modelVersion"],o);const l=D(e,["promptFeedback"]);l!=null&&O(n,["promptFeedback"],l);const c=D(e,["usageMetadata"]);return c!=null&&O(n,["usageMetadata"],c),n}function rue(t,e){const n={},a=D(e,["truncated"]);a!=null&&O(n,["truncated"],a);const i=D(e,["token_count"]);return i!=null&&O(n,["tokenCount"],i),n}function aue(t,e){const n={},a=D(e,["values"]);a!=null&&O(n,["values"],a);const i=D(e,["statistics"]);return i!=null&&O(n,["statistics"],rue(t,i)),n}function iue(t,e){const n={},a=D(e,["billableCharacterCount"]);return a!=null&&O(n,["billableCharacterCount"],a),n}function sue(t,e){const n={},a=D(e,["predictions[]","embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>aue(t,o))),O(n,["embeddings"],s)}const i=D(e,["metadata"]);return i!=null&&O(n,["metadata"],iue(t,i)),n}function oue(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["gcsUri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["imageBytes"],xd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function m9(t,e){const n={},a=D(e,["safetyAttributes","categories"]);a!=null&&O(n,["categories"],a);const i=D(e,["safetyAttributes","scores"]);i!=null&&O(n,["scores"],i);const s=D(e,["contentType"]);return s!=null&&O(n,["contentType"],s),n}function hO(t,e){const n={},a=D(e,["_self"]);a!=null&&O(n,["image"],oue(t,a));const i=D(e,["raiFilteredReason"]);i!=null&&O(n,["raiFilteredReason"],i);const s=D(e,["_self"]);s!=null&&O(n,["safetyAttributes"],m9(t,s));const o=D(e,["prompt"]);return o!=null&&O(n,["enhancedPrompt"],o),n}function lue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>hO(t,o))),O(n,["generatedImages"],s)}const i=D(e,["positivePromptSafetyAttributes"]);return i!=null&&O(n,["positivePromptSafetyAttributes"],m9(t,i)),n}function cue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>hO(t,s))),O(n,["generatedImages"],i)}return n}function uue(t,e){const n={},a=D(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>hO(t,s))),O(n,["generatedImages"],i)}return n}function due(t,e){const n={},a=D(e,["endpoint"]);a!=null&&O(n,["name"],a);const i=D(e,["deployedModelId"]);return i!=null&&O(n,["deployedModelId"],i),n}function hue(t,e){const n={},a=D(e,["labels","google-vertex-llm-tuning-base-model-id"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["createTime"]);i!=null&&O(n,["createTime"],i);const s=D(e,["updateTime"]);return s!=null&&O(n,["updateTime"],s),n}function fue(t,e){const n={},a=D(e,["checkpointId"]);a!=null&&O(n,["checkpointId"],a);const i=D(e,["epoch"]);i!=null&&O(n,["epoch"],i);const s=D(e,["step"]);return s!=null&&O(n,["step"],s),n}function zE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["displayName"]);i!=null&&O(n,["displayName"],i);const s=D(e,["description"]);s!=null&&O(n,["description"],s);const o=D(e,["versionId"]);o!=null&&O(n,["version"],o);const l=D(e,["deployedModels"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(x=>due(t,x))),O(n,["endpoints"],g)}const c=D(e,["labels"]);c!=null&&O(n,["labels"],c);const d=D(e,["_self"]);d!=null&&O(n,["tunedModelInfo"],hue(t,d));const f=D(e,["defaultCheckpointId"]);f!=null&&O(n,["defaultCheckpointId"],f);const p=D(e,["checkpoints"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>fue(t,x))),O(n,["checkpoints"],g)}return n}function pue(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["_self"]);if(i!=null){let s=d9(t,i);Array.isArray(s)&&(s=s.map(o=>zE(t,o))),O(n,["models"],s)}return n}function mue(){return{}}function gue(t,e){const n={},a=D(e,["totalTokens"]);return a!=null&&O(n,["totalTokens"],a),n}function yue(t,e){const n={},a=D(e,["tokensInfo"]);return a!=null&&O(n,["tokensInfo"],a),n}function xue(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["uri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["videoBytes"],xd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function vue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],xue(t,a)),n}function bue(t,e){const n={},a=D(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>vue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function jue(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response"]);return l!=null&&O(n,["response"],bue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wue="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Nue(t,e,n){const a=new zse;let i;if(n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),t.isVertexAI()){const s=fle(t,i);Object.assign(a,s)}else{const s=hle(t,i);Object.assign(a,s)}e(a)}class Sue{constructor(e,n,a){this.apiClient=e,this.auth=n,this.webSocketFactory=a}async connect(e){var n,a,i,s;const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const d=kue(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d);else{const P=this.apiClient.getApiKey();c=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${P}`}let f=()=>{};const p=new Promise(P=>{f=P}),g=e.callbacks,x=function(){var P;(P=g==null?void 0:g.onopen)===null||P===void 0||P.call(g),f({})},b=this.apiClient,j={onopen:x,onmessage:P=>{Nue(b,g.onmessage,P)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(P){},onclose:(a=g==null?void 0:g.onclose)!==null&&a!==void 0?a:function(P){}},S=this.webSocketFactory.create(c,Tue(d),j);S.connect(),await p;let _=Kr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const P=this.apiClient.getProject(),k=this.apiClient.getLocation();_=`projects/${P}/locations/${k}/`+_}let T={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[hd.AUDIO]}:e.config.responseModalities=[hd.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=Loe(this.apiClient,C):T=Roe(this.apiClient,C),delete T.config,S.send(JSON.stringify(T)),new Cue(S,this.apiClient)}}const _ue={turnComplete:!0};class Cue{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let a=[];try{a=gd(e,n.turns),e.isVertexAI()?a=a.map(i=>$g(e,i)):a=a.map(i=>YN(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:a,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let a=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?a=n.functionResponses:a=[n.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const s of a){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(wue)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},_ue),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Uoe(this.apiClient,e)}:n={realtimeInput:qoe(this.apiClient,e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Tue(t){const e={};return t.forEach((n,a)=>{e[a]=n}),e}function kue(t){const e=new Headers;for(const[n,a]of Object.entries(t))e.append(n,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Aue extends Mb{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(a=>{var i;let s;const o=[];if(a!=null&&a.generatedImages)for(const c of a.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let l;return s?l={generatedImages:o,positivePromptSafetyAttributes:s}:l={generatedImages:o},l}),this.list=async n=>{var a;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((a=o.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new KN(ag.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const a={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(a.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async n=>{let a={numberOfImages:1,mode:"upscale"};n.config&&(a=Object.assign(Object.assign({},a),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:a};return await this.upscaleImageInternal(i)}}async generateContentInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=v4(this.apiClient,e);return l=un("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=j4(this.apiClient,f),g=new vj;return Object.assign(g,p),g})}else{const d=x4(this.apiClient,e);return l=un("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=b4(this.apiClient,f),g=new vj;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=v4(this.apiClient,e);l=un("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(p){return bw(this,arguments,function*(){var g,x,b,j;try{for(var S=!0,_=FE(p),T;T=yield hi(_.next()),g=T.done,!g;S=!0){j=T.value,S=!1;const P=j4(f,yield hi(j.json())),k=new vj;Object.assign(k,P),yield yield hi(k)}}catch(C){x={error:C}}finally{try{!S&&!g&&(b=_.return)&&(yield hi(b.call(_)))}finally{if(x)throw x.error}}})})}else{const d=x4(this.apiClient,e);l=un("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return bw(this,arguments,function*(){var g,x,b,j;try{for(var S=!0,_=FE(p),T;T=yield hi(_.next()),g=T.done,!g;S=!0){j=T.value,S=!1;const P=b4(f,yield hi(j.json())),k=new vj;Object.assign(k,P),yield yield hi(k)}}catch(C){x={error:C}}finally{try{!S&&!g&&(b=_.return)&&(yield hi(b.call(_)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=uce(this.apiClient,e);return l=un("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=sue(this.apiClient,f),g=new i4;return Object.assign(g,p),g})}else{const d=Ale(this.apiClient,e);return l=un("{model}:batchEmbedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Bce(this.apiClient,f),g=new i4;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=hce(this.apiClient,e);return l=un("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=lue(this.apiClient,f),g=new s4;return Object.assign(g,p),g})}else{const d=Ple(this.apiClient,e);return l=un("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Uce(this.apiClient,f),g=new s4;return Object.assign(g,p),g})}}async editImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=vce(this.apiClient,e);return s=un("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=cue(this.apiClient,c),f=new Ise;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=jce(this.apiClient,e);return s=un("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=uue(this.apiClient,c),f=new Rse;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=wce(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>zE(this.apiClient,f))}else{const d=Dle(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>BE(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Sce(this.apiClient,e);return l=un("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=pue(this.apiClient,f),g=new o4;return Object.assign(g,p),g})}else{const d=Mle(this.apiClient,e);return l=un("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Hce(this.apiClient,f),g=new o4;return Object.assign(g,p),g})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Cce(this.apiClient,e);return l=un("{model}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>zE(this.apiClient,f))}else{const d=Rle(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>BE(this.apiClient,f))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Tce(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(()=>{const f=mue(),p=new l4;return Object.assign(p,f),p})}else{const d=Lle(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Gce(),p=new l4;return Object.assign(p,f),p})}}async countTokens(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Ace(this.apiClient,e);return l=un("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=gue(this.apiClient,f),g=new c4;return Object.assign(g,p),g})}else{const d=$le(this.apiClient,e);return l=un("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Wce(this.apiClient,f),g=new c4;return Object.assign(g,p),g})}}async computeTokens(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Ece(this.apiClient,e);return s=un("{model}:computeTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=yue(this.apiClient,c),f=new Lse;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Dce(this.apiClient,e);return l=un("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>jue(this.apiClient,f))}else{const d=qle(this.apiClient,e);return l=un("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Xce(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eue(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["_url","operationName"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Pue(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["_url","operationName"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Due(t,e){const n={},a=D(e,["operationName"]);a!=null&&O(n,["operationName"],a);const i=D(e,["resourceName"]);i!=null&&O(n,["_url","resourceName"],i);const s=D(e,["config"]);return s!=null&&O(n,["config"],s),n}function Oue(t,e){const n={},a=D(e,["video","uri"]);a!=null&&O(n,["uri"],a);const i=D(e,["video","encodedVideo"]);i!=null&&O(n,["videoBytes"],xd(t,i));const s=D(e,["encoding"]);return s!=null&&O(n,["mimeType"],s),n}function Mue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],Oue(t,a)),n}function Iue(t,e){const n={},a=D(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Mue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function Rue(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response","generateVideoResponse"]);return l!=null&&O(n,["response"],Iue(t,l)),n}function Lue(t,e){const n={},a=D(e,["gcsUri"]);a!=null&&O(n,["uri"],a);const i=D(e,["bytesBase64Encoded"]);i!=null&&O(n,["videoBytes"],xd(t,i));const s=D(e,["mimeType"]);return s!=null&&O(n,["mimeType"],s),n}function Fue(t,e){const n={},a=D(e,["_self"]);return a!=null&&O(n,["video"],Lue(t,a)),n}function $ue(t,e){const n={},a=D(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Fue(t,l))),O(n,["generatedVideos"],o)}const i=D(e,["raiMediaFilteredCount"]);i!=null&&O(n,["raiMediaFilteredCount"],i);const s=D(e,["raiMediaFilteredReasons"]);return s!=null&&O(n,["raiMediaFilteredReasons"],s),n}function w4(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);o!=null&&O(n,["error"],o);const l=D(e,["response"]);return l!=null&&O(n,["response"],$ue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bue extends Mb{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,a=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;return a&&"httpOptions"in a&&(s=a.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:a})}async getVideosOperationInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Pue(this.apiClient,e);return l=un("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>w4(this.apiClient,f))}else{const d=Eue(this.apiClient,e);return l=un("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Rue(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Due(this.apiClient,e);return s=un("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>w4(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zue="Content-Type",que="X-Server-Timeout",Uue="User-Agent",Vue="x-goog-api-client",Hue="0.14.1",Gue=`google-genai-sdk/${Hue}`,Wue="v1beta1",Kue="v1beta",N4=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class g9 extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class qE extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class Yue{constructor(e){var n,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Wue,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:Kue,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,a){const i=[this.getRequestUrlInternal(n)];return a&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))i.searchParams.append(o,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const a=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?a[i]=Object.assign(Object.assign({},a[i]),s):s!==void 0&&(a[i]=s);return a}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,a){if(n&&n.timeout||a){const i=new AbortController,s=i.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>i.abort(),n.timeout),a&&a.addEventListener("abort",()=>{i.abort()}),e.signal=s}return e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await S4(i),new LE(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await S4(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return bw(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:c}=yield hi(i.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(c);try{const p=JSON.parse(d);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),x=g.status,b=g.code,j=`got status: ${x}. ${JSON.stringify(p)}`;if(b>=400&&b<500)throw new g9(j);if(b>=500&&b<600)throw new qE(j)}}catch(p){const g=p;if(g.name==="ClientError"||g.name==="ServerError")throw p}o+=d;let f=o.match(N4);for(;f;){const p=f[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield hi(new LE(g)),o=o.slice(f[0].length),f=o.match(N4)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},n=Gue+" "+this.clientOptions.userAgentExtra;return e[Uue]=n,e[Vue]=n,e[zue]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[a,i]of Object.entries(e.headers))n.append(a,i);e.timeout&&e.timeout>0&&n.append(que,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var a;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const l=(a=n==null?void 0:n.mimeType)!==null&&a!==void 0?a:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,n);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var a;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:un("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(a=o==null?void 0:o.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function S4(t){var e;if(t===void 0)throw new qE("response is undefined");if(!t.ok){const n=t.status,a=t.statusText;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=`got status: ${n} ${a}. ${JSON.stringify(i)}`;throw n>=400&&n<500?new g9(s):n>=500&&n<600?new qE(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Que(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function Xue(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);return n!==void 0&&o!=null&&O(n,["_query","filter"],o),a}function Jue(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],Xue(t,a,n)),n}function Zue(t,e){const n={},a=D(e,["textInput"]);a!=null&&O(n,["textInput"],a);const i=D(e,["output"]);return i!=null&&O(n,["output"],i),n}function ede(t,e){const n={};if(D(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=D(e,["examples"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>Zue(t,s))),O(n,["examples","examples"],i)}return n}function tde(t,e,n){const a={};if(D(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=D(e,["tunedModelDisplayName"]);if(n!==void 0&&i!=null&&O(n,["displayName"],i),D(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=D(e,["epochCount"]);n!==void 0&&s!=null&&O(n,["tuningTask","hyperparameters","epochCount"],s);const o=D(e,["learningRateMultiplier"]);if(o!=null&&O(a,["tuningTask","hyperparameters","learningRateMultiplier"],o),D(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(D(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=D(e,["batchSize"]);n!==void 0&&l!=null&&O(n,["tuningTask","hyperparameters","batchSize"],l);const c=D(e,["learningRate"]);return n!==void 0&&c!=null&&O(n,["tuningTask","hyperparameters","learningRate"],c),a}function nde(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["trainingDataset"]);i!=null&&O(n,["tuningTask","trainingData"],ede(t,i));const s=D(e,["config"]);return s!=null&&O(n,["config"],tde(t,s,n)),n}function rde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["_url","name"],a);const i=D(e,["config"]);return i!=null&&O(n,["config"],i),n}function ade(t,e,n){const a={},i=D(e,["pageSize"]);n!==void 0&&i!=null&&O(n,["_query","pageSize"],i);const s=D(e,["pageToken"]);n!==void 0&&s!=null&&O(n,["_query","pageToken"],s);const o=D(e,["filter"]);return n!==void 0&&o!=null&&O(n,["_query","filter"],o),a}function ide(t,e){const n={},a=D(e,["config"]);return a!=null&&O(n,["config"],ade(t,a,n)),n}function sde(t,e,n){const a={},i=D(e,["gcsUri"]);if(n!==void 0&&i!=null&&O(n,["supervisedTuningSpec","trainingDatasetUri"],i),D(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function ode(t,e){const n={},a=D(e,["gcsUri"]);return a!=null&&O(n,["validationDatasetUri"],a),n}function lde(t,e,n){const a={},i=D(e,["validationDataset"]);n!==void 0&&i!=null&&O(n,["supervisedTuningSpec"],ode(t,i));const s=D(e,["tunedModelDisplayName"]);n!==void 0&&s!=null&&O(n,["tunedModelDisplayName"],s);const o=D(e,["description"]);n!==void 0&&o!=null&&O(n,["description"],o);const l=D(e,["epochCount"]);n!==void 0&&l!=null&&O(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=D(e,["learningRateMultiplier"]);n!==void 0&&c!=null&&O(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const d=D(e,["exportLastCheckpointOnly"]);n!==void 0&&d!=null&&O(n,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const f=D(e,["adapterSize"]);if(n!==void 0&&f!=null&&O(n,["supervisedTuningSpec","hyperParameters","adapterSize"],f),D(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(D(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return a}function cde(t,e){const n={},a=D(e,["baseModel"]);a!=null&&O(n,["baseModel"],a);const i=D(e,["trainingDataset"]);i!=null&&O(n,["supervisedTuningSpec","trainingDatasetUri"],sde(t,i,n));const s=D(e,["config"]);return s!=null&&O(n,["config"],lde(t,s,n)),n}function ude(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["model"],a);const i=D(e,["name"]);return i!=null&&O(n,["endpoint"],i),n}function y9(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["state"]);i!=null&&O(n,["state"],l9(t,i));const s=D(e,["createTime"]);s!=null&&O(n,["createTime"],s);const o=D(e,["tuningTask","startTime"]);o!=null&&O(n,["startTime"],o);const l=D(e,["tuningTask","completeTime"]);l!=null&&O(n,["endTime"],l);const c=D(e,["updateTime"]);c!=null&&O(n,["updateTime"],c);const d=D(e,["description"]);d!=null&&O(n,["description"],d);const f=D(e,["baseModel"]);f!=null&&O(n,["baseModel"],f);const p=D(e,["_self"]);p!=null&&O(n,["tunedModel"],ude(t,p));const g=D(e,["distillationSpec"]);g!=null&&O(n,["distillationSpec"],g);const x=D(e,["experiment"]);x!=null&&O(n,["experiment"],x);const b=D(e,["labels"]);b!=null&&O(n,["labels"],b);const j=D(e,["pipelineJob"]);j!=null&&O(n,["pipelineJob"],j);const S=D(e,["tunedModelDisplayName"]);return S!=null&&O(n,["tunedModelDisplayName"],S),n}function dde(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>y9(t,o))),O(n,["tuningJobs"],s)}return n}function hde(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["metadata"]);i!=null&&O(n,["metadata"],i);const s=D(e,["done"]);s!=null&&O(n,["done"],s);const o=D(e,["error"]);return o!=null&&O(n,["error"],o),n}function fde(t,e){const n={},a=D(e,["checkpointId"]);a!=null&&O(n,["checkpointId"],a);const i=D(e,["epoch"]);i!=null&&O(n,["epoch"],i);const s=D(e,["step"]);s!=null&&O(n,["step"],s);const o=D(e,["endpoint"]);return o!=null&&O(n,["endpoint"],o),n}function pde(t,e){const n={},a=D(e,["model"]);a!=null&&O(n,["model"],a);const i=D(e,["endpoint"]);i!=null&&O(n,["endpoint"],i);const s=D(e,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>fde(t,l))),O(n,["checkpoints"],o)}return n}function UE(t,e){const n={},a=D(e,["name"]);a!=null&&O(n,["name"],a);const i=D(e,["state"]);i!=null&&O(n,["state"],l9(t,i));const s=D(e,["createTime"]);s!=null&&O(n,["createTime"],s);const o=D(e,["startTime"]);o!=null&&O(n,["startTime"],o);const l=D(e,["endTime"]);l!=null&&O(n,["endTime"],l);const c=D(e,["updateTime"]);c!=null&&O(n,["updateTime"],c);const d=D(e,["error"]);d!=null&&O(n,["error"],d);const f=D(e,["description"]);f!=null&&O(n,["description"],f);const p=D(e,["baseModel"]);p!=null&&O(n,["baseModel"],p);const g=D(e,["tunedModel"]);g!=null&&O(n,["tunedModel"],pde(t,g));const x=D(e,["supervisedTuningSpec"]);x!=null&&O(n,["supervisedTuningSpec"],x);const b=D(e,["tuningDataStats"]);b!=null&&O(n,["tuningDataStats"],b);const j=D(e,["encryptionSpec"]);j!=null&&O(n,["encryptionSpec"],j);const S=D(e,["partnerModelTuningSpec"]);S!=null&&O(n,["partnerModelTuningSpec"],S);const _=D(e,["distillationSpec"]);_!=null&&O(n,["distillationSpec"],_);const T=D(e,["experiment"]);T!=null&&O(n,["experiment"],T);const C=D(e,["labels"]);C!=null&&O(n,["labels"],C);const P=D(e,["pipelineJob"]);P!=null&&O(n,["pipelineJob"],P);const k=D(e,["tunedModelDisplayName"]);return k!=null&&O(n,["tunedModelDisplayName"],k),n}function mde(t,e){const n={},a=D(e,["nextPageToken"]);a!=null&&O(n,["nextPageToken"],a);const i=D(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>UE(t,o))),O(n,["tuningJobs"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gde extends Mb{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new KN(ag.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const a=await this.tuneMldevInternal(n);let i="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?i=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(i=a.name.split("/operations/")[0]),{name:i,state:RE.JOB_STATE_QUEUED}}}}async getInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=rde(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>UE(this.apiClient,f))}else{const d=Que(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>y9(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=ide(this.apiClient,e);return l=un("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=mde(this.apiClient,f),g=new u4;return Object.assign(g,p),g})}else{const d=Jue(this.apiClient,e);return l=un("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=dde(this.apiClient,f),g=new u4;return Object.assign(g,p),g})}}async tuneInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=cde(this.apiClient,e);return s=un("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>UE(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=nde(this.apiClient,e);return s=un("tunedModels",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>hde(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yde{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xde=1024*1024*8,vde=3,bde=1e3,jde=2,jC="x-goog-upload-status";async function wde(t,e,n){var a,i,s;let o=0,l=0,c=new LE(new Response),d="upload";for(o=t.size;l<o;){const p=Math.min(xde,o-l),g=t.slice(l,l+p);l+p>=o&&(d+=", finalize");let x=0,b=bde;for(;x<vde&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((a=c==null?void 0:c.headers)===null||a===void 0)&&a[jC]));)x++,await Sde(b),b=b*jde;if(l+=p,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[jC])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[jC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Nde(t){return{size:t.size,type:t.type}}function Sde(t){return new Promise(e=>setTimeout(e,t))}class _de{async upload(e,n,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wde(e,n,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Nde(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cde{create(e,n,a){return new Tde(e,n,a)}}class Tde{constructor(e,n,a){this.url=e,this.headers=n,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _4="x-goog-api-key";class kde{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(_4)===null&&e.append(_4,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ade="gl-node/";class x9{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const a=$ie(e,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const i=new kde(this.apiKey);this.apiClient=new Yue({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Ade+"web",uploader:new _de,downloader:new yde}),this.models=new Aue(this.apiClient),this.live=new Sue(this.apiClient,i,new Cde),this.chats=new Gse(this.models,this.apiClient),this.caches=new qse(this.apiClient),this.files=new ioe(this.apiClient),this.operations=new Bue(this.apiClient),this.tunings=new gde(this.apiClient)}}const Ede=()=>{const t=localStorage.getItem("currentClinicId");return t||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},v9=()=>localStorage.getItem("authToken");class Pde{constructor(){br(this,"listeners",[]);br(this,"activeRequests",0)}subscribe(e){return this.listeners.push(e),e(this.activeRequests>0),()=>this.unsubscribe(e)}unsubscribe(e){this.listeners=this.listeners.filter(n=>n!==e)}notify(e){e?this.activeRequests++:this.activeRequests=Math.max(0,this.activeRequests-1);const n=this.activeRequests>0;this.listeners.forEach(a=>a(n))}}const VE=new Pde,Dde="https://backend.newtons.in",Ode=()=>localStorage.getItem("authToken"),se=async(t,e={})=>{const n=Ode(),a={...e.headers};n&&(a.Authorization=`Bearer ${n}`),!(e.body instanceof FormData)&&!a["Content-Type"]&&(a["Content-Type"]="application/json");const i=a;let s=t.startsWith("/")?t:`/${t}`;s.startsWith("/api/")||(s=`/api${s}`);const o=`${Dde}${s}`;VE.notify(!0);try{console.log(`Making API call to: ${o}`);const l=await fetch(o,{...e,headers:i});if(l.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!l.ok){let c=`HTTP error! status: ${l.status}`;try{const d=await l.json();c=(d==null?void 0:d.message)||(d==null?void 0:d.error)||c}catch{}throw console.error(`API Error: ${l.status} ${l.statusText} - ${c}`),new Error(c)}return l}catch(l){throw l instanceof TypeError&&l.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",l):console.error("API Fetch Error:",l),l}finally{VE.notify(!1)}},wC="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Mde="models/gemini-3-flash-preview",Ide=`You are an intelligent Clinic Hub Assistant for a Clinic Management System. Your role is to help the Clinic Administrator or Doctor manage their clinic ecosystem efficiently.

You have access to the current state of the clinic settings and the staff list. You can perform actions to update these settings or manage staff members.

**Capabilities:**
1.  **View Settings & Staff:** User can ask about current charges, clinic details, or staff members. Answer based on the provided context.
2.  **Update Settings:** Change fees, clinic name, address, etc.
3.  **Manage Staff:** Add new staff members or update existing ones.
4.  **Voice AI Settings:** Update the \`voice_ai_language\` for the Live API Assistant. Available codes:
    -   India: \`en-US\` (English), \`hi-IN\` (Hindi), \`te-IN\` (Telugu), \`bn-IN\` (Bengali), \`mr-IN\` (Marathi), \`ta-IN\` (Tamil), \`gu-IN\` (Gujarati), \`kn-IN\` (Kannada), \`ml-IN\` (Malayalam), \`pa-IN\` (Punjabi)
    -   Global: \`es-ES\` (Spanish), \`fr-FR\` (French), \`de-DE\` (German), \`it-IT\` (Italian), \`pt-PT\` (Portuguese), \`ru-RU\` (Russian), \`ja-JP\` (Japanese), \`ko-KR\` (Korean), \`zh-CN\` (Chinese), \`ar-SA\` (Arabic).
5.  **Analyze Financials & Inventory:** Access the Analysis Dashboard to view revenue, expenses, and inventory movement. Set date ranges to filter data.
6.  **Manage Inventory:** Update pharmacy tokens (drugs) and lab tests. You will reference items by their **Serial Number** as provided in the context.
7.  **Purchase Management:** Search for distributors, select one, and build a purchase order by adding items. You can add multiple items at once. Editing items uses Serial Numbers.
8.  **Looping & Reasoning:** You should think step-by-step. If a user request involves multiple steps or if you need to check something after an action, you can continue the loop.
9.  **Follow-up:** If critical information is missing, ask the user.
10.  **Manage Custom Columns:** You can add or remove custom columns/fields for various entities (patients, drugs, lab_tests). Use the \`manage_custom_columns\` action.
11.  **Custom Fields Data:** When searching or updating items (like drugs or patients), pay attention to their \`custom_fields\`. You can update these fields using the \`update_drug\` (or similar) action by passing a \`custom_fields\` object with key-value pairs. Keys must match the \`key\` defined in the Clinic Settings.
12.  **Custom Tables:** You can create entirely new tables to track anything (e.g., "Gym Members", "Diet Plans"). Use \`create_custom_table\`. You can then add rows to these tables using \`add_table_row\` (requires Table ID) and update them with \`update_table_row\`. meaningful descriptions are helpful.
13.  **Dashboards:** You can create persistent custom dashboards using \`create_custom_dashboard\` or show a specialized temporary view using \`render_temporary_dashboard\`.
     - Use \`render_temporary_dashboard\` when the user asks to "show", "view", or "see" data (e.g., "Show me John's meds").
     - Use \`create_custom_dashboard\` when the user explicitly asks to "create a dashboard" or "save a view".
     - **Data Sources:** Use the provided "Dashboard Data Sources" context to know valid keys (e.g., \`api:patients\`, \`table:123\`).
       - **Advanced Features:** You can add **Charts** (bar, line, pie) and **Filters** to widgets.
       - **Filters (SERVER-SIDE):** Use the \`filters\` array in config. Filters are applied on the server for efficiency.
         - **Supported Operators:**
           - \`equals\` or \`eq\`: Exact match
           - \`neq\` or \`not_equals\`: Not equal
           - \`contains\` or \`like\`: Case-insensitive substring match
           - \`starts_with\`: Value starts with
           - \`ends_with\`: Value ends with
           - \`gt\` or \`greater_than\`: Greater than
           - \`gte\`: Greater than or equal
           - \`lt\` or \`less_than\`: Less than
           - \`lte\`: Less than or equal
           - \`in\`: Value in array (value should be array)
           - \`not_in\`: Value not in array
           - \`is_null\`: Field is null
           - \`is_not_null\`: Field is not null
           - \`between\`: Value between two values (value should be [min, max])
         - **Filterable Fields:** The "Dashboard Data Sources" in context includes a \`filterableFields\` list for each source. You **MUST** use these fields.
           - **Mixed Tables:** Sources like \`api:pharmacy-orders\` or \`api:lab-orders\` support filtering by associated **Patient** data using \`patient_name\`, \`patient_phone\`, and \`token\`.
         - **Example 1:** User: "Show pharmacy orders for John" -> Action: \`render_temporary_dashboard\` with widget config: \`filters: [{ field: 'patient_name', operator: 'contains', value: 'John' }]\`
         - **Example 2:** User: "Show orders for Token 123" -> \`filters: [{ field: 'token', operator: 'equals', value: 123 }]\`
         - **Example 3:** \`filters: [{ field: 'expiry_date', operator: 'lt', value: '2024-01-01' }, { field: 'stock', operator: 'gt', value: 0 }]\`
         - Smartly infer dates for "expired" (lt today), "expiring this week" (between today and next week), etc.
       - **Charts:** Set \`type: 'chart'\`. Config requires \`chartType\`, \`xAxisKey\` (category), \`dataKey\` (value).

**Interpretation Rules:**
- **Analysis Dates:** When the user asks for analysis (financial or inventory) for a specific time range (e.g., "last month", "yesterday"), you **MUST** include \`startDate\` and \`endDate\` in the \`navigate_to\` action for \`/dashboard/analysis\`.
- If the user says "add drug", "buy medicine", or "new stock", they **usually mean "Add Item to Purchase Order"** (use \`add_purchase_items\` or navigate to \`/dashboard/purchase\`).
- **Prerequisite:** If you are using ANY purchase tools (\`add_purchase_items\`, \`search_distributor_purchase\`, \`set_distributor_purchase\`, \`edit_purchase_items\`), you **MUST** include a \`navigate_to\` action with \`page: "/dashboard/purchase"\` as the **FIRST** action in your list, unless you are already on that page.
- **ONLY** use \`update_drug\` (create) if the user explicitly says "create new drug definition" or "add to master inventory".
- The correct route for purchasing is \`/dashboard/purchase\`.

- **Drug Name & Brand Handling (CRITICAL):**
  - "Name" refers to the **Composition Name** (or Generic Name).
  - "Brand Name" refers to the **Brand Name**.
  - **Auto-Computation:** If the user provides a *Brand Name* (e.g., "Tab Dolo 650"), you **MUST** automatically:
    1.  Infer the **Composition** (e.g., "Tab Paracetamol 650mg") and use it for the "name" field.
    2.  Use the provided brand for the "brand_name" field (e.g., "Dolo 650").
    3.  Infer the **pack size** if implied (e.g., "1x10") and use it for the "pack" field.
  - If the user provides only a Brand Name and you cannot confidently infer the Composition, you **MUST** use \`ask_followup_question\` to ask the user for the composition.
  - Apply this logic to both \`add_purchase_items\` and \`update_drug\` actions.

- **Inventory Navigation:** If you execute "update_drug" or "search_pharmacy_inventory", you **MUST** include a "navigate_to" action for "/dashboard/inventory". If you searched for or updated a specific term, append it as "?search=Term" (e.g. "/dashboard/inventory?search=Paracetamol").
- **Lab Navigation:** If you execute "update_lab_test", you **MUST** include a "navigate_to" action for "/lab-inventory", unless you are already on that page.

**Action Tools:**
You can perform the following actions. Return a JSON array of actions.

\`\`\`json
[
    {
        "action": "update_clinic_settings",
        "updates": {
            "admissionCharge": "number string",
            "perDayCharge": "number string",
            "otherCharges": "number string",
            "name": "string",
            "address": "string",
            "notes": "string",
            "logoUrl": "string",
            "upi_id": "string",
            "low_stock_threshold": number,
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "gemini_api_key": "string",
            "voice_ai_language": "string (e.g. 'en-US', 'te-IN')"
        }
    },
    {
        "action": "create_staff_member",
        "staff": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null
        }
    },
    {
        "action": "update_staff_member",
        "id": "string | number",
        "updates": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null,
            "active": boolean
        }
    },
    {
        "action": "set_analysis_dates",
        "startDate": "YYYY-MM-DD",
        "endDate": "YYYY-MM-DD"
    },
    {
        "action": "navigate_to",
        "page": "/dashboard/inventory" | "/lab-inventory" | "/dashboard/queue" | "/dashboard/staff" | "/dashboard/purchase" | "/dashboard/analysis" | "/dashboard/clinic-hub" | "/billing" | "/dashboard/patients",
        "section": "financial" | "inventory" | "string (optional)",
        "startDate": "YYYY-MM-DD (optional, for analysis page)",
        "endDate": "YYYY-MM-DD (optional, for analysis page)"
    },
    {
        "action": "highlight_section",
        "elementId": "string"
    },
    {
        "action": "refresh_analysis"
    },
    {
        "action": "ask_followup_question",
        "question": "string"
    },
    {
        "action": "search_pharmacy_inventory",
        "query": "string (name, brand, or composition)"
    },
    {
        "action": "update_drug",
        "id": "number",
        "updates": {
            "name": "string",
            "brand_name": "string",
            "description": "string",
            "mrp": "number (MRP)",
            "stock": "number",
            "pack": "string (e.g. strip, bottle)",
            "supplier": "string",
            "expiry_date": "YYYY-MM-DD",
            "rate": "number",
            "box_number": "string",
            "gst": "number",
            "margin": "number",
            "discount": "number",
            "batch": "string",
            "hsn_code": "string",
            "mfg": "string",
            "mfg": "string",
            "loose": "number",
            "custom_fields": "object { key: value } (Optional: Update custom field values)"
        }
    },
    {
        "action": "update_lab_test",
        "serial_number": 1,
        "updates": {
            "name": "string",
            "price": "number",
            "description": "string",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit }"
        }
    },
    {
        "action": "search_lab_inventory",
        "query": "string (test name or description)"
    },
    {
        "action": "create_lab_test",
        "test": {
            "name": "string",
            "price": "number",
            "description": "string (optional)",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit } (optional)"
        }
    },
    {
        "action": "search_distributor_purchase",
        "query": "string"
    },
    {
        "action": "set_distributor_purchase",
        "distributorId": "string"
    },
    {
        "action": "add_purchase_items",
        "items": [
            {
                "name": "string (Composition Name)",
                "brand_name": "string",
                "stock": "number (quantity)",
                "rate": "number (buying price)",
                "mrp": "number",
                "pack": "string",
                "expiry_date": "YYYY-MM-DD",
                "batch": "string",
                "discount": "number",
                "gst": "number"
            }
        ]
    },
    {
        "action": "edit_purchase_items",
        "updates": [
            {
                "serial_number": "number (The Row # from context)",
                "field": "string (name, stock, rate, etc.)",
                "value": "string | number"
            }
        ]
    },
    {
        "action": "end_task",
        "summary": "string"
    },
    {
        "action": "open_new_case",
        "name": "string (Patient Name)",
        "age": "number (optional)",
        "gender": "M | F | O (optional)",
        "phone": "string (optional)",
        "complaint": "string (The medical complaint/reason)"
    },
    {
        "action": "manage_custom_columns",
        "entity": "patients" | "drugs" | "lab_tests",
        "operation": "add" | "remove",
        "column": {
            "label": "string",
            "type": "text" | "number" | "date" | "boolean",
            "required": boolean
        }
    },
    {
        "action": "create_custom_table",
        "name": "string",
        "description": "string (optional)",
        "columns": [
            {
                "label": "string",
                "type": "text" | "number" | "date" | "boolean",
                "required": boolean
            }
        ]
    },
    {
        "action": "add_table_row",
        "tableId": "string (The ID of the custom table)",
        "data": "object { key: value } (Keys must match column keys derived from labels)"
    },
    {
        "tableId": "string",
        "recordId": "string (The ID of the row/record to update)",
        "data": "object { key: value } (Updates to apply)"
    },
    {
        "action": "create_custom_dashboard",
        "name": "string",
        "description": "string (optional)",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string (one of the keys from Dashboard Data Sources, e.g. api:patients, table:xyz)",
                "config": "object { columns?: string[], label?: string, chartType?: 'bar'|'line'|'pie', xAxisKey?: string, dataKey?: string, filters?: Array<{field, operator, value}> }"
            }
        ]
    },
    {
        "action": "render_temporary_dashboard",
        "title": "string",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string",
                "config": "object { columns?: [], label?, chartType?, xAxisKey?, dataKey?, filters?: [] }"
            }
        ]
    }
]
\`\`\`

**Navigation Reference:**
- **Pharmacy Inventory:** \`/dashboard/inventory\`
- **Lab Inventory:** \`/lab-inventory\`
- **Doctor Queue:** \`/dashboard/queue\`
- **Staff Management:** \`/dashboard/staff\`
- **All Patients:** \`/dashboard/patients\`
- **Billing:** \`/billing\`
- **Purchase Page:** \`/dashboard/purchase\`
- **Analysis:** \`/dashboard/analysis\`
- **Clinic Hub:** \`/dashboard/clinic-hub\`
\`\`\`

**Rules:**
-   **Always** return a JSON array as the last part of your response.
-   If the user's request is satisfied, use the \`end_task\` action with a summary of what was done.
-   If you need more info, use \`ask_followup_question\`.
-   If you perform an action (like updating settings), and there's nothing else to do *immediately* but you want to confirm it's done, you can return the action. The system will execute it and call you back with the result. Then you can \`end_task\`.
-   For \`create_staff_member\`, if password is not provided by user, generate a secure random password and mention it in the summary.
-   Update numeric strings as strings (e.g., "500.00").
-   **CRITICAL DO's and DON'Ts:**
    -   **DO NOT** fill in empty fields (like \`gemini_api_key\`, \`logoUrl\`, \`upi_id\`, etc.) with fake, placeholder, or example data.
    -   **ONLY** update fields that the user *intentionally* asked to change.
    -   **PRESERVE** existing values for any fields not explicitly mentioned in the user's request.
    -   If a field is empty and the user didn't ask to set it, **leave it empty**.
    -   Do not invent values.
`;async function Rde(){var n;if(!v9()&&wC)return wC;let e=null;try{const a=await se("/api/clinics/settings");if(a.ok){const i=await a.json();(n=i.gemini_api_key)!=null&&n.trim()&&(e=i.gemini_api_key.trim())}}catch(a){console.warn("Error fetching updated key",a)}if(e)return e;try{const a=await se("/api/global-settings/app_gemini_api_key");if(a.ok){const s=(await a.json()).value;if(s&&s.trim()!=="")return s.trim()}}catch(a){console.warn("Could not fetch global API key.",a)}return wC}async function Lde(t,e,n=[],a){var f,p,g,x,b,j;let i=(f=e.settings)==null?void 0:f.gemini_api_key;if(!i||!i.trim())try{i=await Rde()}catch(S){console.warn("Using fallback key or failing:",S)}if(!i)throw new Error("No Gemini API Key provided in settings or environment.");const s=new x9({apiKey:i}),o=[];o.push({role:"user",parts:[{text:Ide}]}),o.push({role:"model",parts:[{text:"Understood. I am ready to assist with Clinic Hub management."}]}),n.forEach(S=>{o.push({role:S.role,parts:[{text:S.text}]})});const d=[{text:`
    Context:
    ${`
    --- Current Clinic Context ---
    Settings: ${JSON.stringify(e.settings,null,2)}
    
    Custom Columns Configuration: ${JSON.stringify(e.settings.custom_columns_config||{},null,2)}

    Custom Tables (Available for adding/editing rows): ${JSON.stringify(e.customTables||[],null,2)}
    
    Dashboard Data Sources (Use these keys for widgets): ${JSON.stringify(e.dashboardDataSources||[],null,2)}

    --- DYNAMIC CONTEXT DATA (Configured tables with <200 rows) ---
    ${Object.entries(e.dynamicContextData||{}).map(([S,_])=>{const T=(_.data||[]).slice(0,50).map((C,P)=>({_sn:P+1,...C}));return`${_.label||S} (${_.count||0} records): ${JSON.stringify(T,null,2)}`}).join(`

`)}
    --- END DYNAMIC CONTEXT ---

    Staff List: ${JSON.stringify(e.staffList.map(S=>({id:S.id||S._id,name:S.name,role:S.role,email:S.email,active:S.active,opd_fee:S.opd_fee})),null,2)}
    
    Previous Action Results (if any): ${JSON.stringify(e.actionResults||[],null,2)}

    Analysis Data (if active): ${JSON.stringify(e.analysisData||{},null,2)}

    Pharmacy Inventory: ${e.pharmacyInventory?JSON.stringify(e.pharmacyInventory,null,2):"Not loaded. Use 'search_pharmacy_inventory' to find items."}

    Distributors List: ${JSON.stringify((e.distributors||[]).map(S=>({serial_number:S.serial_number,name:S.name,contact_person:S.contact_person,phone:S.phone,remainingBalance:S.remainingBalance})),null,2)}

    Lab Tests Inventory: ${JSON.stringify((e.labInventory||[]).map(S=>({serial:S.serial_number,name:S.name,price:S.price,description:S.description,default_parameters:S.default_parameters})),null,2)}

    Current Purchase Page Rows: ${JSON.stringify((e.purchaseRows||[]).map((S,_)=>({serial_number:_+1,name:S.name,stock:S.stock,rate:S.rate,mrp:S.mrp,net_value:(S.stock*S.rate).toFixed(2)})),null,2)}

    Current Application Page Context: ${e.pageContext?JSON.stringify(e.pageContext,null,2):"Unknown/General Dashboard"}
    `}

    User Query/Input:
    ${t}
    `}];if(a){const S=a.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"");d.push({inlineData:{data:S,mimeType:"image/jpeg"}})}o.push({role:"user",parts:d});try{const S={model:Mde,contents:o,generationConfig:{temperature:.7,maxOutputTokens:2048,responseMimeType:"text/plain"}},_=await s.models.generateContentStream(S);let T="";for await(const C of _){const P=C;P.text&&typeof P.text=="function"?T+=P.text():(j=(b=(x=(g=(p=P.candidates)==null?void 0:p[0])==null?void 0:g.content)==null?void 0:x.parts)==null?void 0:b[0])!=null&&j.text&&(T+=P.candidates[0].content.parts[0].text)}if(!T)throw new Error("Empty response from AI");return T}catch(S){throw console.error("Gemini Interaction Error:",S),new Error("Failed to communicate with AI Assistant.")}}const fO=({settings:t,staffList:e,onSettingsUpdate:n,onStaffUpdate:a,onHighlight:i,enableDynamicContext:s=!1})=>{const o=Lt(),l=ds(),{setAnalysisDateRange:c,analysisData:d,analysisNavigate:f,refreshAnalysis:p,pageContext:g}=LN(),{setDistributors:x,setSelectedDistributor:b,setSearchTerm:j,addPurchaseRow:S,updatePurchaseRow:_,distributors:T,purchaseRows:C}=Tz(),[P,k]=v.useState(""),E=v.useRef(d),I=v.useRef(C);v.useEffect(()=>{E.current=d},[d]),v.useEffect(()=>{I.current=C},[C]);const[L,$]=v.useState([]),[q,F]=v.useState([]),[H,V]=v.useState([]),[X,Y]=v.useState(!1),[z,G]=v.useState(null),ie=v.useRef(!1),W=v.useRef(0),B=5,ce=()=>{ie.current=!1,Y(!1),V(me=>[...me,{role:"system",text:" Task stopped by user."}])},je=me=>{const ye=new FileReader;ye.onloadend=()=>{G(ye.result)},ye.readAsDataURL(me)},K=()=>{G(null)},[Ie,Ue]=v.useState(null),ze=()=>Ue(null),Le=async(me,ye)=>{if(!Ie)return;const le={name:me,description:ye,widgets:Ie.widgets};if(!(await se("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)})).ok)throw new Error("Failed to save dashboard");Ue(null)},be=async(me,ye,le=[],J)=>{var ae,ue,ee;if(ie.current){if(W.current+=1,W.current>B){V(Ne=>[...Ne,{role:"system",text:" Task limit reached. Stopping automatically."}]),Y(!1),ie.current=!1;return}try{let Ne=t,Te=e,Fe=[],xe=[],ne=[],oe=[],_e=[];try{const[we,Xe]=await Promise.all([se("/api/clinics/settings"),se("/staff")]);if(we.ok&&Xe.ok){const Je=await we.json(),ct=await Xe.json(),[Ct,bt,ke,ot]=await Promise.all([se("/api/drugs"),se("/api/lab-tests"),se("/api/distributors"),se("/api/custom-tables"),se("/api/dashboards/data-sources")]);if(Ct.ok){const Tt=await Ct.json();Fe=Tt.drugs||Tt||[]}if(bt.ok){const Ve=(await bt.json()).map((jt,kt)=>({...jt,serial_number:kt+1}));xe=Ve,$(Ve)}if(ke.ok&&(ne=(await ke.json()||[]).map((Ve,jt)=>({...Ve,serial_number:jt+1}))),ot.ok){const Tt=await ot.json();oe=Tt,F(Tt)}try{const Tt=await se("/api/dashboards/data-sources");Tt.ok&&(_e=await Tt.json())}catch(Tt){console.warn("Failed to fetch dashboard sources",Tt)}Ne={...Je,admissionCharge:parseFloat(Je.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(Je.perDayCharge||0).toFixed(2),otherCharges:parseFloat(Je.otherCharges||0).toFixed(2),aiMemory:Je.aiMemory||"",clinicWideSystemPrompt:Je.clinicWideSystemPrompt||"",gemini_api_key:Je.gemini_api_key||"",low_stock_threshold:Je.low_stock_threshold!==void 0&&Je.low_stock_threshold!==null?String(Je.low_stock_threshold):"10",name:Je.name||"",logoUrl:Je.logoUrl||"",upi_id:Je.upi_id||"",address:Je.address||"",notes:Je.notes||"",clinic_id:Je.clinic_id},Te=ct.map(Tt=>({...Tt,id:Tt._id||Tt.id}))}}catch(we){console.warn("Failed to fetch fresh context for AI loop, falling back to props",we)}let De={};if(s)try{const we=await se("/api/ai-context/data");we.ok&&(De=await we.json())}catch(we){console.warn("Failed to fetch dynamic AI context",we)}const Q={settings:Ne,staffList:Te,analysisData:E.current,pharmacyInventory:Fe.length>50?void 0:Fe,labInventory:xe,distributors:ne,purchaseRows:I.current,actionResults:le,pageContext:g||void 0,customTables:oe,dashboardDataSources:_e,dynamicContextData:De},ge=ye.filter(we=>we.role!=="system"),de=await Lde(me,Q,ge,J);if(!ie.current)return;let fe=[];try{const we=de.match(/\[[\s\S]*\]/);if(we)fe=JSON.parse(we[0]);else{V(Xe=>[...Xe,{role:"model",text:de}]),Y(!1),ie.current=!1;return}}catch(we){console.error("Failed to parse AI response",we),V(Xe=>[...Xe,{role:"model",text:"I'm having trouble processing that. Please try again."}]),Y(!1),ie.current=!1;return}const Ee=[];let Ye=[],$e=[];for(const we of fe){if(!ie.current)break;if(we.action==="end_task"){V(Xe=>[...Xe,{role:"model",text:we.summary}]),Y(!1),ie.current=!1;return}if(we.action==="ask_followup_question"){V(Xe=>[...Xe,{role:"model",text:we.question}]),Y(!1),ie.current=!1;return}try{if(we.action==="update_clinic_settings"){const Xe=we.updates;Object.keys(Xe).forEach(Ct=>Ye.push(`setting-${Ct}`));const Je={...Ne,...Xe},ct={...Je,admissionCharge:parseFloat(Je.admissionCharge),perDayCharge:parseFloat(Je.perDayCharge),otherCharges:parseFloat(Je.otherCharges),low_stock_threshold:parseInt(Je.low_stock_threshold)};await se("/api/clinics/settings",{method:"PUT",body:JSON.stringify(ct)}),n&&n(),Ee.push({action:"update_clinic_settings",status:"success"}),$e.push({role:"system",text:" Updated clinic settings"})}if(we.action==="create_staff_member"&&(await se("/api/staff",{method:"POST",body:JSON.stringify({...we.staff,clinic_id:Ne.clinic_id})}),a&&a(),Ee.push({action:"create_staff_member",status:"success",name:we.staff.name}),$e.push({role:"system",text:` Created staff member: ${we.staff.name}`})),we.action==="update_staff_member"){const Xe=we.id;await se(`/api/staff/${Xe}`,{method:"PUT",body:JSON.stringify(we.updates)}),a&&a(),Ye.push(`staff-member-${Xe}`),Ee.push({action:"update_staff_member",status:"success",id:Xe}),$e.push({role:"system",text:" Updated staff member details"})}if(we.action==="set_analysis_dates"){const{startDate:Xe,endDate:Je}=we;c({startDate:new Date(Xe),endDate:new Date(Je)}),Ee.push({action:"set_analysis_dates",status:"success",startDate:Xe,endDate:Je}),$e.push({role:"system",text:` Set analysis dates: ${Xe} to ${Je}`})}if(we.action==="navigate_to"){let Xe=we.page;if(we.page&&we.page.includes("analysis")&&we.startDate&&we.endDate){const Je=Xe.includes("?")?"&":"?";Xe=`${Xe}${Je}startDate=${we.startDate}&endDate=${we.endDate}`}else we.page&&we.page.includes("analysis")&&((ae=E.current)!=null&&ae.startDate)&&((ue=E.current)!=null&&ue.endDate);o(Xe),we.section&&setTimeout(()=>f(we.section),500),Ee.push({action:"navigate_to",status:"success",page:Xe}),$e.push({role:"system",text:` Navigated to ${Xe}`})}if(we.action==="highlight_section"&&(Ye.push(we.elementId),Ee.push({action:"highlight_section",status:"success",id:we.elementId})),we.action==="refresh_analysis"){$e.push({role:"system",text:" Refreshing analysis data..."});const Xe=await p();Xe?(E.current=Xe,Ee.push({action:"refresh_analysis",status:"success",summary:"Data refreshed successfully"}),$e.push({role:"system",text:" Analysis data refreshed"})):(Ee.push({action:"refresh_analysis",status:"error",error:"No data returned"}),$e.push({role:"system",text:" Failed to refresh analysis data"}))}if(we.action==="search_pharmacy_inventory"){const Xe=we.query.toLowerCase(),Je=Fe.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Xe)||Ct.brand_name&&Ct.brand_name.toLowerCase().includes(Xe)||Ct.description&&Ct.description.toLowerCase().includes(Xe)),ct=Je.slice(0,10);Ee.push({action:"search_pharmacy_inventory",status:"success",count:Je.length,results:ct}),Je.length>0?$e.push({role:"system",text:` Found ${Je.length} matches for "${we.query}". Showing top ${ct.length}.`}):$e.push({role:"system",text:` No matches found for "${we.query}"`})}if(we.action==="update_drug"){const Xe=we.id;try{const Je=Fe.find(bt=>bt.id===Xe);if(!Je)throw new Error(`Drug with ID ${Xe} not found.`);const ct={...we.updates};ct.custom_fields&&(ct.custom_fields={...Je.custom_fields||{},...ct.custom_fields});const Ct={...Je,...ct};await se(`/api/drugs/${Xe}`,{method:"PUT",body:JSON.stringify(Ct)}),Ee.push({action:"update_drug",status:"success",id:Xe,updates:we.updates}),$e.push({role:"system",text:` Updated drug: ${Je.name}`}),Ue({title:`Updated: ${Je.name}`,widgets:[{id:"edited-drug",type:"table",title:`Drug Updated: ${Je.name}`,dataSource:"api:drugs",config:{filters:[{field:"id",operator:"equals",value:Xe}],columns:["name","brand_name","stock","mrp","expiry_date","pack"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Je){Ee.push({action:"update_drug",status:"error",error:Je.message}),$e.push({role:"system",text:` Failed to update drug: ${Je.message}`})}}if(we.action==="update_lab_test"){const Xe=xe.find(Je=>Je.serial_number===we.serial_number);if(Xe){const Je={...Xe,...we.updates};await se(`/api/lab-tests/${Xe.id}`,{method:"PUT",body:JSON.stringify(Je)}),Ee.push({action:"update_lab_test",status:"success",item:Xe.name}),$e.push({role:"system",text:` Updated lab test: ${Xe.name}`}),Ue({title:`Updated: ${Xe.name}`,widgets:[{id:"edited-lab-test",type:"table",title:`Lab Test Updated: ${Xe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Xe.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}else Ee.push({action:"update_lab_test",status:"error",error:`Test with serial ${we.serial_number} not found`}),$e.push({role:"system",text:` Lab test with serial ${we.serial_number} not found`})}if(we.action==="search_lab_inventory"){const Xe=we.query.toLowerCase(),Je=xe.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Xe)||Ct.description&&Ct.description.toLowerCase().includes(Xe)),ct=Je.slice(0,10);Ee.push({action:"search_lab_inventory",status:"success",count:Je.length,results:ct.map(Ct=>({serial_number:Ct.serial_number,id:Ct.id,name:Ct.name,price:Ct.price,description:Ct.description}))}),Je.length>0?$e.push({role:"system",text:` Found ${Je.length} lab tests for "${we.query}". Showing top ${ct.length}.`}):$e.push({role:"system",text:` No lab tests found for "${we.query}"`})}if(we.action==="create_lab_test")try{const Xe=we.test,Je={name:Xe.name,price:parseFloat(Xe.price)||0,description:Xe.description||"",default_parameters:Xe.default_parameters||[]},ct=await se("/api/lab-tests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Je)});if(!ct.ok){const bt=await ct.json();throw new Error(bt.message||"Failed to create lab test")}const Ct=await ct.json();Ee.push({action:"create_lab_test",status:"success",id:Ct.id,name:Xe.name}),$e.push({role:"system",text:` Created lab test: ${Xe.name}`}),Ue({title:`Created: ${Xe.name}`,widgets:[{id:"created-lab-test",type:"table",title:`New Lab Test: ${Xe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Ct.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Xe){Ee.push({action:"create_lab_test",status:"error",error:Xe.message}),$e.push({role:"system",text:` Failed to create lab test: ${Xe.message}`})}if(we.action==="search_distributor_purchase"){const Xe=we.query,Je=await se(`/api/distributors?search=${encodeURIComponent(Xe)}`);if(Je.ok){const ct=await Je.json();x(ct),j(Xe),Ee.push({action:"search_distributor_purchase",status:"success",count:ct.length,results:ct}),$e.push({role:"system",text:` Found ${ct.length} distributors for "${Xe}"`})}else Ee.push({action:"search_distributor_purchase",status:"error",error:Je.statusText}),$e.push({role:"system",text:" Failed to search distributors"})}if(we.action==="set_distributor_purchase"){const Xe=we.distributorId;let Je=T.find(ct=>ct.id===Xe);Je?(b(Je),j(Je.name),Ee.push({action:"set_distributor_purchase",status:"success",distributor:Je.name}),$e.push({role:"system",text:` Selected distributor: ${Je.name}`})):(Ee.push({action:"set_distributor_purchase",status:"error",error:"Distributor not found in current search results. Please search first."}),$e.push({role:"system",text:" Distributor not found. Please search first."}))}if(we.action==="add_purchase_items"){const Xe=we.items;let Je=0;Xe.forEach(ct=>{const bt={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:ct.name||"",composition:ct.composition||"",description:ct.description||"",mrp:ct.mrp||0,stock:ct.stock||0,pack:ct.pack||"",supplier:"",expiry_date:ct.expiry_date||"",rate:ct.rate||0,box_number:ct.box_number||"",gst:ct.gst||0,margin:ct.margin||0,discount:ct.discount||0,brand_name:ct.brand_name||"",batch:ct.batch||"",hsn_code:ct.hsn_code||"",mfg:ct.mfg||"",loose:ct.loose||0,last_updated:"",created_at:""};S(bt),Je++}),Ee.push({action:"add_purchase_items",status:"success",count:Je}),$e.push({role:"system",text:` Added ${Je} items to purchase list`})}if(we.action==="edit_purchase_items"){const Xe=we.updates;let Je=0;const ct=I.current||[];Xe.forEach(Ct=>{if(Ct.serial_number){const bt=Ct.serial_number-1,ke=ct[bt];ke&&ke.id?(_(ke.id,{[Ct.field]:Ct.value}),Je++):(console.warn(`Row with serial number ${Ct.serial_number} not found.`),$e.push({role:"system",text:` Row #${Ct.serial_number} not found.`}))}}),Ee.push({action:"edit_purchase_items",status:"success",count:Je}),$e.push({role:"system",text:` Updated ${Je} items`})}if(we.action==="open_new_case"){const{name:Xe,age:Je,gender:ct,complaint:Ct,phone:bt}=we;try{const ke=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Xe||"New Patient",age:Je||null,gender:ct||null,phone:bt||null,address:null})});if(!ke.ok){const kt=await ke.json().catch(()=>({}));throw ke.status===403&&((ee=kt.message)!=null&&ee.includes("Patient limit"))?new Error(`Patient limit reached: ${kt.message}`):new Error(kt.message||"Failed to create patient")}const ot=await ke.json();if(!ot||!ot.id)throw new Error("Created patient has no ID");const Tt=await se("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:ot.id,complaint:Ct||"New Case"})});if(!Tt.ok)throw new Error("Failed to create queue entry");const Ve=await Tt.json(),jt=ot.id;jt&&(l.prefetchQuery({queryKey:Gt.patients.context(jt),queryFn:()=>se(`/api/patients/${jt}/context`).then(kt=>kt.json()),staleTime:1e3*60*5}),l.prefetchQuery({queryKey:Gt.patientDebts.balance(jt),queryFn:()=>se(`/api/patient-debts/${jt}/balance`).then(kt=>kt.json()),staleTime:1e3*60}),l.prefetchQuery({queryKey:Gt.queue.latest(jt),queryFn:()=>se(`/api/queue/patient/${jt}/latest`).then(kt=>kt.json()),staleTime:1e3*5})),o(`/dashboard/edit-complaint/${Ve.id}`,{state:{initialComplaint:Ct}}),Ee.push({action:"open_new_case",status:"success",patientId:ot.id,queueId:Ve.id}),$e.push({role:"system",text:` Opened new case for ${Xe}`}),Y(!1),ie.current=!1;return}catch(ke){ke.message.includes("Patient limit")&&(o("/start-clinic-subscription"),$e.push({role:"system",text:" Patient limit reached. Redirecting to subscription."})),Ee.push({action:"open_new_case",status:"error",error:ke.message}),$e.push({role:"system",text:` Failed to open new case: ${ke.message}`})}}if(we.action==="manage_custom_columns"){const{entity:Xe,operation:Je,column:ct}=we,Ct=Ne.custom_columns_config||{drugs:[],patients:[],lab_tests:[]};let ke=[...Ct[Xe]||[]];if(Je==="add"){const Tt=ct.label.toLowerCase().replace(/[^a-z0-9]/g,"_");ke.some(Ve=>Ve.key===Tt)||ke.push({...ct,key:Tt})}else if(Je==="remove"){const Tt=ct.label.toLowerCase().replace(/[^a-z0-9]/g,"_");ke=ke.filter(Ve=>Ve.key!==Tt&&Ve.label!==ct.label)}const ot={...Ct,[Xe]:ke};await se("/api/clinics/settings",{method:"PUT",body:JSON.stringify({...Ne,custom_columns_config:ot})}),n&&n(),Ee.push({action:"manage_custom_columns",status:"success",entity:Xe,operation:Je,column:ct.label}),$e.push({role:"system",text:` ${Je==="add"?"Added":"Removed"} custom column '${ct.label}' for ${Xe}`})}if(we.action==="create_custom_table"){const{name:Xe,description:Je,columns:ct}=we,Ct=ct.map(ot=>({...ot,key:ot.label.toLowerCase().replace(/[^a-z0-9]/g,"_")})),bt=await se("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Xe,description:Je,columns:Ct})});if(!bt.ok)throw new Error("Failed to create table");const ke=await bt.json();F(ot=>[...ot,ke]),Ee.push({action:"create_custom_table",status:"success",tableId:ke.id}),$e.push({role:"system",text:` Created custom table: ${Xe}`})}if(we.action==="add_table_row"){const{tableId:Xe,data:Je}=we;if(!(await se(`/api/custom-tables/${Xe}/records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Je})})).ok)throw new Error("Failed to add row");Ee.push({action:"add_table_row",status:"success"}),$e.push({role:"system",text:" Added row to table"})}if(we.action==="update_table_row"){const{recordId:Xe,data:Je}=we;if(!(await se(`/api/custom-tables/records/${Xe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Je})})).ok)throw new Error("Failed to update row");Ee.push({action:"update_table_row",status:"success"}),$e.push({role:"system",text:" Updated row"})}if(we.action==="create_custom_dashboard"){const{name:Xe,description:Je,widgets:ct}=we,Ct=await se("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Xe,description:Je,widgets:ct})});if(!Ct.ok)throw new Error("Failed to create dashboard");const bt=await Ct.json();Ee.push({action:"create_custom_dashboard",status:"success",id:bt.id}),$e.push({role:"system",text:` Created dashboard: ${Xe}`})}we.action==="render_temporary_dashboard"&&(Ue({title:we.title,widgets:we.widgets}),Ee.push({action:"render_temporary_dashboard",status:"success"}),$e.push({role:"system",text:` Showing temporary dashboard: ${we.title}`}))}catch(Xe){console.error("Action execution failed",we,Xe),Ee.push({action:we.action,status:"error",error:Xe.message}),$e.push({role:"system",text:` Failed to execute action: ${we.action}`})}}Ye.length>0&&i&&setTimeout(()=>i(Ye),500),$e.length>0&&V(we=>[...we,...$e]);const We=[...le,...Ee],it=`Reflecting on previous actions: ${JSON.stringify(Ee)}. What is the next step? If done, call end_task.`,wt=[...ye,...$e,{role:"model",text:de},{role:"user",text:it}];await be(it,wt,We,void 0)}catch(Ne){console.error(Ne),V(Te=>[...Te,{role:"model",text:"Something went wrong."}]),Y(!1),ie.current=!1}}},Ce=v.useCallback(()=>{V([]),k(""),Y(!1),ie.current=!1,W.current=0,G(null)},[]);return{chatQuery:P,setChatQuery:k,chatHistory:H,isProcessing:X,handleSendMessage:me=>{const ye=me!==void 0?me:P;if(!ye.trim()&&!z)return;ie.current=!0,Y(!0),W.current=0;const le={role:"user",text:ye};z&&(le.text+=" [Image Attached]"),V(ae=>[...ae,le]);const J=z||void 0;k(""),G(null),be(ye,H,[],J)},refreshChat:Ce,stopGeneration:ce,selectedImage:z,handleImageSelect:je,clearImage:K,temporaryDashboard:Ie,closeTemporaryDashboard:ze,saveTemporaryDashboard:Le}},te=({className:t="",width:e,height:n,variant:a="rectangular",animate:i=!0,style:s={}})=>{const o={width:e,height:n,...s};return r.jsx("div",{className:`skeleton skeleton-${a} ${i?"skeleton-animate":""} ${t}`,style:o})};var NC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var C4;function Fde(){return C4||(C4=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=i(s,a(l)))}return s}function a(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)e.call(s,l)&&s[l]&&(o=i(o,l));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(NC)),NC.exports}var $de=Fde();const ad=Wn($de);function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function Bde(t,e){if(Sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Sf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b9(t){var e=Bde(t,"string");return Sf(e)=="symbol"?e:e+""}function hv(t,e,n){return(e=b9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T4(Object(n),!0).forEach(function(a){hv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T4(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function zde(t){if(Array.isArray(t))return t}function qde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function HE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function j9(t,e){if(t){if(typeof t=="string")return HE(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HE(t,e):void 0}}function Ude(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ac(t,e){return zde(t)||qde(t,e)||j9(t,e)||Ude()}function Vde(t,e){if(t==null)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;n[a]=t[a]}return n}function Hc(t,e){if(t==null)return{};var n,a,i=Vde(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Hde=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Gde(t){var e=t.defaultInputValue,n=e===void 0?"":e,a=t.defaultMenuIsOpen,i=a===void 0?!1:a,s=t.defaultValue,o=s===void 0?null:s,l=t.inputValue,c=t.menuIsOpen,d=t.onChange,f=t.onInputChange,p=t.onMenuClose,g=t.onMenuOpen,x=t.value,b=Hc(t,Hde),j=v.useState(l!==void 0?l:n),S=Ac(j,2),_=S[0],T=S[1],C=v.useState(c!==void 0?c:i),P=Ac(C,2),k=P[0],E=P[1],I=v.useState(x!==void 0?x:o),L=Ac(I,2),$=L[0],q=L[1],F=v.useCallback(function(ie,W){typeof d=="function"&&d(ie,W),q(ie)},[d]),H=v.useCallback(function(ie,W){var B;typeof f=="function"&&(B=f(ie,W)),T(B!==void 0?B:ie)},[f]),V=v.useCallback(function(){typeof g=="function"&&g(),E(!0)},[g]),X=v.useCallback(function(){typeof p=="function"&&p(),E(!1)},[p]),Y=l!==void 0?l:_,z=c!==void 0?c:k,G=x!==void 0?x:$;return Xt(Xt({},b),{},{inputValue:Y,menuIsOpen:z,onChange:F,onInputChange:H,onMenuClose:X,onMenuOpen:V,value:G})}function rn(){return rn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rn.apply(null,arguments)}function Wde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k4(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,b9(a.key),a)}}function Kde(t,e,n){return e&&k4(t.prototype,e),n&&k4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GE(t,e){return GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GE(t,e)}function Yde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GE(t,e)}function jw(t){return jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jw(t)}function w9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w9=function(){return!!t})()}function Qde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xde(t,e){if(e&&(Sf(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qde(t)}function Jde(t){var e=w9();return function(){var n,a=jw(t);if(e){var i=jw(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Xde(this,n)}}function Zde(t){if(Array.isArray(t))return HE(t)}function ehe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function the(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pO(t){return Zde(t)||ehe(t)||j9(t)||the()}function nhe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function rhe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var ahe=function(){function t(n){var a=this;this._insertTag=function(i){var s;a.tags.length===0?a.insertionPoint?s=a.insertionPoint.nextSibling:a.prepend?s=a.container.firstChild:s=a.before:s=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(i,s),a.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(a){a.forEach(this._insertTag)},e.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(rhe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=nhe(i);try{s.insertRule(a,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(a));this.ctr++},e.flush=function(){this.tags.forEach(function(a){var i;return(i=a.parentNode)==null?void 0:i.removeChild(a)}),this.tags=[],this.ctr=0},t}(),ui="-ms-",ww="-moz-",ir="-webkit-",N9="comm",mO="rule",gO="decl",ihe="@import",S9="@keyframes",she="@layer",ohe=Math.abs,QN=String.fromCharCode,lhe=Object.assign;function che(t,e){return Wa(t,0)^45?(((e<<2^Wa(t,0))<<2^Wa(t,1))<<2^Wa(t,2))<<2^Wa(t,3):0}function _9(t){return t.trim()}function uhe(t,e){return(t=e.exec(t))?t[0]:t}function sr(t,e,n){return t.replace(e,n)}function WE(t,e){return t.indexOf(e)}function Wa(t,e){return t.charCodeAt(e)|0}function Ov(t,e,n){return t.slice(e,n)}function kl(t){return t.length}function yO(t){return t.length}function wj(t,e){return e.push(t),t}function dhe(t,e){return t.map(e).join("")}var XN=1,sg=1,C9=0,us=0,ya=0,Bg="";function JN(t,e,n,a,i,s,o){return{value:t,root:e,parent:n,type:a,props:i,children:s,line:XN,column:sg,length:o,return:""}}function Kx(t,e){return lhe(JN("",null,null,"",null,null,0),t,{length:-t.length},e)}function hhe(){return ya}function fhe(){return ya=us>0?Wa(Bg,--us):0,sg--,ya===10&&(sg=1,XN--),ya}function Ms(){return ya=us<C9?Wa(Bg,us++):0,sg++,ya===10&&(sg=1,XN++),ya}function Ml(){return Wa(Bg,us)}function tw(){return us}function Ib(t,e){return Ov(Bg,t,e)}function Mv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function T9(t){return XN=sg=1,C9=kl(Bg=t),us=0,[]}function k9(t){return Bg="",t}function nw(t){return _9(Ib(us-1,KE(t===91?t+2:t===40?t+1:t)))}function phe(t){for(;(ya=Ml())&&ya<33;)Ms();return Mv(t)>2||Mv(ya)>3?"":" "}function mhe(t,e){for(;--e&&Ms()&&!(ya<48||ya>102||ya>57&&ya<65||ya>70&&ya<97););return Ib(t,tw()+(e<6&&Ml()==32&&Ms()==32))}function KE(t){for(;Ms();)switch(ya){case t:return us;case 34:case 39:t!==34&&t!==39&&KE(ya);break;case 40:t===41&&KE(t);break;case 92:Ms();break}return us}function ghe(t,e){for(;Ms()&&t+ya!==57;)if(t+ya===84&&Ml()===47)break;return"/*"+Ib(e,us-1)+"*"+QN(t===47?t:Ms())}function yhe(t){for(;!Mv(Ml());)Ms();return Ib(t,us)}function xhe(t){return k9(rw("",null,null,null,[""],t=T9(t),0,[0],t))}function rw(t,e,n,a,i,s,o,l,c){for(var d=0,f=0,p=o,g=0,x=0,b=0,j=1,S=1,_=1,T=0,C="",P=i,k=s,E=a,I=C;S;)switch(b=T,T=Ms()){case 40:if(b!=108&&Wa(I,p-1)==58){WE(I+=sr(nw(T),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=nw(T);break;case 9:case 10:case 13:case 32:I+=phe(b);break;case 92:I+=mhe(tw()-1,7);continue;case 47:switch(Ml()){case 42:case 47:wj(vhe(ghe(Ms(),tw()),e,n),c);break;default:I+="/"}break;case 123*j:l[d++]=kl(I)*_;case 125*j:case 59:case 0:switch(T){case 0:case 125:S=0;case 59+f:_==-1&&(I=sr(I,/\f/g,"")),x>0&&kl(I)-p&&wj(x>32?E4(I+";",a,n,p-1):E4(sr(I," ","")+";",a,n,p-2),c);break;case 59:I+=";";default:if(wj(E=A4(I,e,n,d,f,i,l,C,P=[],k=[],p),s),T===123)if(f===0)rw(I,e,E,E,P,s,p,l,k);else switch(g===99&&Wa(I,3)===110?100:g){case 100:case 108:case 109:case 115:rw(t,E,E,a&&wj(A4(t,E,E,0,0,i,l,C,i,P=[],p),k),i,k,p,l,a?P:k);break;default:rw(I,E,E,E,[""],k,0,l,k)}}d=f=x=0,j=_=1,C=I="",p=o;break;case 58:p=1+kl(I),x=b;default:if(j<1){if(T==123)--j;else if(T==125&&j++==0&&fhe()==125)continue}switch(I+=QN(T),T*j){case 38:_=f>0?1:(I+="\f",-1);break;case 44:l[d++]=(kl(I)-1)*_,_=1;break;case 64:Ml()===45&&(I+=nw(Ms())),g=Ml(),f=p=kl(C=I+=yhe(tw())),T++;break;case 45:b===45&&kl(I)==2&&(j=0)}}return s}function A4(t,e,n,a,i,s,o,l,c,d,f){for(var p=i-1,g=i===0?s:[""],x=yO(g),b=0,j=0,S=0;b<a;++b)for(var _=0,T=Ov(t,p+1,p=ohe(j=o[b])),C=t;_<x;++_)(C=_9(j>0?g[_]+" "+T:sr(T,/&\f/g,g[_])))&&(c[S++]=C);return JN(t,e,n,i===0?mO:l,c,d,f)}function vhe(t,e,n){return JN(t,e,n,N9,QN(hhe()),Ov(t,2,-2),0)}function E4(t,e,n,a){return JN(t,e,n,gO,Ov(t,0,a),Ov(t,a+1,-1),a)}function Lm(t,e){for(var n="",a=yO(t),i=0;i<a;i++)n+=e(t[i],i,t,e)||"";return n}function bhe(t,e,n,a){switch(t.type){case she:if(t.children.length)break;case ihe:case gO:return t.return=t.return||t.value;case N9:return"";case S9:return t.return=t.value+"{"+Lm(t.children,a)+"}";case mO:t.value=t.props.join(",")}return kl(n=Lm(t.children,a))?t.return=t.value+"{"+n+"}":""}function jhe(t){var e=yO(t);return function(n,a,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,a,i,s)||"";return o}}function whe(t){return function(e){e.root||(e=e.return)&&t(e)}}function Nhe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var She=function(e,n,a){for(var i=0,s=0;i=s,s=Ml(),i===38&&s===12&&(n[a]=1),!Mv(s);)Ms();return Ib(e,us)},_he=function(e,n){var a=-1,i=44;do switch(Mv(i)){case 0:i===38&&Ml()===12&&(n[a]=1),e[a]+=She(us-1,n,a);break;case 2:e[a]+=nw(i);break;case 4:if(i===44){e[++a]=Ml()===58?"&\f":"",n[a]=e[a].length;break}default:e[a]+=QN(i)}while(i=Ms());return e},Che=function(e,n){return k9(_he(T9(e),n))},P4=new WeakMap,The=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,a=e.parent,i=e.column===a.column&&e.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!P4.get(a))&&!i){P4.set(e,!0);for(var s=[],o=Che(n,s),l=a.props,c=0,d=0;c<o.length;c++)for(var f=0;f<l.length;f++,d++)e.props[d]=s[c]?o[c].replace(/&\f/g,l[f]):l[f]+" "+o[c]}}},khe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function A9(t,e){switch(che(t,e)){case 5103:return ir+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ir+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ir+t+ww+t+ui+t+t;case 6828:case 4268:return ir+t+ui+t+t;case 6165:return ir+t+ui+"flex-"+t+t;case 5187:return ir+t+sr(t,/(\w+).+(:[^]+)/,ir+"box-$1$2"+ui+"flex-$1$2")+t;case 5443:return ir+t+ui+"flex-item-"+sr(t,/flex-|-self/,"")+t;case 4675:return ir+t+ui+"flex-line-pack"+sr(t,/align-content|flex-|-self/,"")+t;case 5548:return ir+t+ui+sr(t,"shrink","negative")+t;case 5292:return ir+t+ui+sr(t,"basis","preferred-size")+t;case 6060:return ir+"box-"+sr(t,"-grow","")+ir+t+ui+sr(t,"grow","positive")+t;case 4554:return ir+sr(t,/([^-])(transform)/g,"$1"+ir+"$2")+t;case 6187:return sr(sr(sr(t,/(zoom-|grab)/,ir+"$1"),/(image-set)/,ir+"$1"),t,"")+t;case 5495:case 3959:return sr(t,/(image-set\([^]*)/,ir+"$1$`$1");case 4968:return sr(sr(t,/(.+:)(flex-)?(.*)/,ir+"box-pack:$3"+ui+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ir+t+t;case 4095:case 3583:case 4068:case 2532:return sr(t,/(.+)-inline(.+)/,ir+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(kl(t)-1-e>6)switch(Wa(t,e+1)){case 109:if(Wa(t,e+4)!==45)break;case 102:return sr(t,/(.+:)(.+)-([^]+)/,"$1"+ir+"$2-$3$1"+ww+(Wa(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~WE(t,"stretch")?A9(sr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Wa(t,e+1)!==115)break;case 6444:switch(Wa(t,kl(t)-3-(~WE(t,"!important")&&10))){case 107:return sr(t,":",":"+ir)+t;case 101:return sr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ir+(Wa(t,14)===45?"inline-":"")+"box$3$1"+ir+"$2$3$1"+ui+"$2box$3")+t}break;case 5936:switch(Wa(t,e+11)){case 114:return ir+t+ui+sr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ir+t+ui+sr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ir+t+ui+sr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ir+t+ui+t+t}return t}var Ahe=function(e,n,a,i){if(e.length>-1&&!e.return)switch(e.type){case gO:e.return=A9(e.value,e.length);break;case S9:return Lm([Kx(e,{value:sr(e.value,"@","@"+ir)})],i);case mO:if(e.length)return dhe(e.props,function(s){switch(uhe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Lm([Kx(e,{props:[sr(s,/:(read-\w+)/,":"+ww+"$1")]})],i);case"::placeholder":return Lm([Kx(e,{props:[sr(s,/:(plac\w+)/,":"+ir+"input-$1")]}),Kx(e,{props:[sr(s,/:(plac\w+)/,":"+ww+"$1")]}),Kx(e,{props:[sr(s,/:(plac\w+)/,ui+"input-$1")]})],i)}return""})}},Ehe=[Ahe],Phe=function(e){var n=e.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(j){var S=j.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var i=e.stylisPlugins||Ehe,s={},o,l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(j){for(var S=j.getAttribute("data-emotion").split(" "),_=1;_<S.length;_++)s[S[_]]=!0;l.push(j)});var c,d=[The,khe];{var f,p=[bhe,whe(function(j){f.insert(j)})],g=jhe(d.concat(i,p)),x=function(S){return Lm(xhe(S),g)};c=function(S,_,T,C){f=T,x(S?S+"{"+_.styles+"}":_.styles),C&&(b.inserted[_.name]=!0)}}var b={key:n,sheet:new ahe({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return b.sheet.hydrate(l),b},SC={exports:{}},ur={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D4;function Dhe(){if(D4)return ur;D4=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,a=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,g=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,j=t?Symbol.for("react.block"):60121,S=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,T=t?Symbol.for("react.scope"):60119;function C(k){if(typeof k=="object"&&k!==null){var E=k.$$typeof;switch(E){case e:switch(k=k.type,k){case c:case d:case a:case s:case i:case p:return k;default:switch(k=k&&k.$$typeof,k){case l:case f:case b:case x:case o:return k;default:return E}}case n:return E}}}function P(k){return C(k)===d}return ur.AsyncMode=c,ur.ConcurrentMode=d,ur.ContextConsumer=l,ur.ContextProvider=o,ur.Element=e,ur.ForwardRef=f,ur.Fragment=a,ur.Lazy=b,ur.Memo=x,ur.Portal=n,ur.Profiler=s,ur.StrictMode=i,ur.Suspense=p,ur.isAsyncMode=function(k){return P(k)||C(k)===c},ur.isConcurrentMode=P,ur.isContextConsumer=function(k){return C(k)===l},ur.isContextProvider=function(k){return C(k)===o},ur.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},ur.isForwardRef=function(k){return C(k)===f},ur.isFragment=function(k){return C(k)===a},ur.isLazy=function(k){return C(k)===b},ur.isMemo=function(k){return C(k)===x},ur.isPortal=function(k){return C(k)===n},ur.isProfiler=function(k){return C(k)===s},ur.isStrictMode=function(k){return C(k)===i},ur.isSuspense=function(k){return C(k)===p},ur.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===a||k===d||k===s||k===i||k===p||k===g||typeof k=="object"&&k!==null&&(k.$$typeof===b||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===f||k.$$typeof===S||k.$$typeof===_||k.$$typeof===T||k.$$typeof===j)},ur.typeOf=C,ur}var O4;function Ohe(){return O4||(O4=1,SC.exports=Dhe()),SC.exports}var _C,M4;function Mhe(){if(M4)return _C;M4=1;var t=Ohe(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=a,s[t.Memo]=i;function o(b){return t.isMemo(b)?i:s[b.$$typeof]||e}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;function x(b,j,S){if(typeof j!="string"){if(g){var _=p(j);_&&_!==g&&x(b,_,S)}var T=c(j);d&&(T=T.concat(d(j)));for(var C=o(b),P=o(j),k=0;k<T.length;++k){var E=T[k];if(!n[E]&&!(S&&S[E])&&!(P&&P[E])&&!(C&&C[E])){var I=f(j,E);try{l(b,E,I)}catch{}}}}return b}return _C=x,_C}Mhe();var Ihe=!0;function Rhe(t,e,n){var a="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(a+=i+" ")}),a}var E9=function(e,n,a){var i=e.key+"-"+n.name;(a===!1||Ihe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Lhe=function(e,n,a){E9(e,n,a);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Fhe(t){for(var e=0,n,a=0,i=t.length;i>=4;++a,i-=4)n=t.charCodeAt(a)&255|(t.charCodeAt(++a)&255)<<8|(t.charCodeAt(++a)&255)<<16|(t.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(a+2)&255)<<16;case 2:e^=(t.charCodeAt(a+1)&255)<<8;case 1:e^=t.charCodeAt(a)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var $he={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Bhe=/[A-Z]|^ms/g,zhe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,P9=function(e){return e.charCodeAt(1)===45},I4=function(e){return e!=null&&typeof e!="boolean"},CC=Nhe(function(t){return P9(t)?t:t.replace(Bhe,"-$&").toLowerCase()}),R4=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(zhe,function(a,i,s){return Al={name:i,styles:s,next:Al},i})}return $he[e]!==1&&!P9(e)&&typeof n=="number"&&n!==0?n+"px":n};function Iv(t,e,n){if(n==null)return"";var a=n;if(a.__emotion_styles!==void 0)return a;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Al={name:i.name,styles:i.styles,next:Al},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Al={name:o.name,styles:o.styles,next:Al},o=o.next;var l=s.styles+";";return l}return qhe(t,e,n)}case"function":{if(t!==void 0){var c=Al,d=n(t);return Al=c,Iv(t,e,d)}break}}var f=n;return f}function qhe(t,e,n){var a="";if(Array.isArray(n))for(var i=0;i<n.length;i++)a+=Iv(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var l=o;I4(l)&&(a+=CC(s)+":"+R4(s,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var c=0;c<o.length;c++)I4(o[c])&&(a+=CC(s)+":"+R4(s,o[c])+";");else{var d=Iv(t,e,o);switch(s){case"animation":case"animationName":{a+=CC(s)+":"+d+";";break}default:a+=s+"{"+d+"}"}}}return a}var L4=/label:\s*([^\s;{]+)\s*(;|$)/g,Al;function D9(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,i="";Al=void 0;var s=t[0];if(s==null||s.raw===void 0)a=!1,i+=Iv(n,e,s);else{var o=s;i+=o[0]}for(var l=1;l<t.length;l++)if(i+=Iv(n,e,t[l]),a){var c=s;i+=c[l]}L4.lastIndex=0;for(var d="",f;(f=L4.exec(i))!==null;)d+="-"+f[1];var p=Fhe(i)+d;return{name:p,styles:i,next:Al}}var Uhe=function(e){return e()},Vhe=zM.useInsertionEffect?zM.useInsertionEffect:!1,Hhe=Vhe||Uhe,O9=v.createContext(typeof HTMLElement<"u"?Phe({key:"css"}):null);O9.Provider;var Ghe=function(e){return v.forwardRef(function(n,a){var i=v.useContext(O9);return e(n,i,a)})},Whe=v.createContext({}),xO={}.hasOwnProperty,YE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Khe=function(e,n){var a={};for(var i in n)xO.call(n,i)&&(a[i]=n[i]);return a[YE]=e,a},Yhe=function(e){var n=e.cache,a=e.serialized,i=e.isStringTag;return E9(n,a,i),Hhe(function(){return Lhe(n,a,i)}),null},Qhe=Ghe(function(t,e,n){var a=t.css;typeof a=="string"&&e.registered[a]!==void 0&&(a=e.registered[a]);var i=t[YE],s=[a],o="";typeof t.className=="string"?o=Rhe(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var l=D9(s,void 0,v.useContext(Whe));o+=e.key+"-"+l.name;var c={};for(var d in t)xO.call(t,d)&&d!=="css"&&d!==YE&&(c[d]=t[d]);return c.className=o,n&&(c.ref=n),v.createElement(v.Fragment,null,v.createElement(Yhe,{cache:e,serialized:l,isStringTag:typeof i=="string"}),v.createElement(i,c))}),Xhe=Qhe,Ht=function(e,n){var a=arguments;if(n==null||!xO.call(n,"css"))return v.createElement.apply(void 0,a);var i=a.length,s=new Array(i);s[0]=Xhe,s[1]=Khe(e,n);for(var o=2;o<i;o++)s[o]=a[o];return v.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(Ht||(Ht={}));function vO(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return D9(e)}function Jhe(){var t=vO.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function Zhe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const efe=Math.min,tfe=Math.max,Nw=Math.round,Nj=Math.floor,Sw=t=>({x:t,y:t});function nfe(t){const{x:e,y:n,width:a,height:i}=t;return{width:a,height:i,top:n,left:e,right:e+a,bottom:n+i,x:e,y:n}}function ZN(){return typeof window<"u"}function M9(t){return R9(t)?(t.nodeName||"").toLowerCase():"#document"}function Lc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function I9(t){var e;return(e=(R9(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function R9(t){return ZN()?t instanceof Node||t instanceof Lc(t).Node:!1}function rfe(t){return ZN()?t instanceof Element||t instanceof Lc(t).Element:!1}function bO(t){return ZN()?t instanceof HTMLElement||t instanceof Lc(t).HTMLElement:!1}function F4(t){return!ZN()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Lc(t).ShadowRoot}const afe=new Set(["inline","contents"]);function L9(t){const{overflow:e,overflowX:n,overflowY:a,display:i}=jO(t);return/auto|scroll|overlay|hidden|clip/.test(e+a+n)&&!afe.has(i)}function ife(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const sfe=new Set(["html","body","#document"]);function ofe(t){return sfe.has(M9(t))}function jO(t){return Lc(t).getComputedStyle(t)}function lfe(t){if(M9(t)==="html")return t;const e=t.assignedSlot||t.parentNode||F4(t)&&t.host||I9(t);return F4(e)?e.host:e}function F9(t){const e=lfe(t);return ofe(e)?t.ownerDocument?t.ownerDocument.body:t.body:bO(e)&&L9(e)?e:F9(e)}function _w(t,e,n){var a;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=F9(t),s=i===((a=t.ownerDocument)==null?void 0:a.body),o=Lc(i);if(s){const l=QE(o);return e.concat(o,o.visualViewport||[],L9(i)?i:[],l&&n?_w(l):[])}return e.concat(i,_w(i,[],n))}function QE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function cfe(t){const e=jO(t);let n=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const i=bO(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:a,l=Nw(n)!==s||Nw(a)!==o;return l&&(n=s,a=o),{width:n,height:a,$:l}}function wO(t){return rfe(t)?t:t.contextElement}function $4(t){const e=wO(t);if(!bO(e))return Sw(1);const n=e.getBoundingClientRect(),{width:a,height:i,$:s}=cfe(e);let o=(s?Nw(n.width):n.width)/a,l=(s?Nw(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const ufe=Sw(0);function dfe(t){const e=Lc(t);return!ife()||!e.visualViewport?ufe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function hfe(t,e,n){return!1}function B4(t,e,n,a){e===void 0&&(e=!1);const i=t.getBoundingClientRect(),s=wO(t);let o=Sw(1);e&&(o=$4(t));const l=hfe()?dfe(s):Sw(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(s){const g=Lc(s),x=a;let b=g,j=QE(b);for(;j&&a&&x!==b;){const S=$4(j),_=j.getBoundingClientRect(),T=jO(j),C=_.left+(j.clientLeft+parseFloat(T.paddingLeft))*S.x,P=_.top+(j.clientTop+parseFloat(T.paddingTop))*S.y;c*=S.x,d*=S.y,f*=S.x,p*=S.y,c+=C,d+=P,b=Lc(j),j=QE(b)}}return nfe({width:f,height:p,x:c,y:d})}function $9(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function ffe(t,e){let n=null,a;const i=I9(t);function s(){var l;clearTimeout(a),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const d=t.getBoundingClientRect(),{left:f,top:p,width:g,height:x}=d;if(l||e(),!g||!x)return;const b=Nj(p),j=Nj(i.clientWidth-(f+g)),S=Nj(i.clientHeight-(p+x)),_=Nj(f),C={rootMargin:-b+"px "+-j+"px "+-S+"px "+-_+"px",threshold:tfe(0,efe(1,c))||1};let P=!0;function k(E){const I=E[0].intersectionRatio;if(I!==c){if(!P)return o();I?o(!1,I):a=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!$9(d,t.getBoundingClientRect())&&o(),P=!1}try{n=new IntersectionObserver(k,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,C)}n.observe(t)}return o(!0),s}function pfe(t,e,n,a){a===void 0&&(a={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=a,d=wO(t),f=i||s?[...d?_w(d):[],..._w(e)]:[];f.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const p=d&&l?ffe(d,n):null;let g=-1,x=null;o&&(x=new ResizeObserver(_=>{let[T]=_;T&&T.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(e)})),n()}),d&&!c&&x.observe(d),x.observe(e));let b,j=c?B4(t):null;c&&S();function S(){const _=B4(t);j&&!$9(j,_)&&n(),j=_,b=requestAnimationFrame(S)}return n(),()=>{var _;f.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),p==null||p(),(_=x)==null||_.disconnect(),x=null,c&&cancelAnimationFrame(b)}}var XE=v.useLayoutEffect,mfe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Cw=function(){};function gfe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function yfe(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var s=[].concat(a);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(gfe(t,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var z4=function(e){return Cfe(e)?e.filter(Boolean):Sf(e)==="object"&&e!==null?[e]:[]},B9=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Hc(e,mfe);return Xt({},n)},ta=function(e,n,a){var i=e.cx,s=e.getStyles,o=e.getClassNames,l=e.className;return{css:s(n,e),className:i(a??{},o(n,e),l)}};function eS(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function xfe(t){return eS(t)?window.innerHeight:t.clientHeight}function z9(t){return eS(t)?window.pageYOffset:t.scrollTop}function Tw(t,e){if(eS(t)){window.scrollTo(0,e);return}t.scrollTop=e}function vfe(t){var e=getComputedStyle(t),n=e.position==="absolute",a=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&a.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function bfe(t,e,n,a){return n*((t=t/a-1)*t*t+1)+e}function Sj(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Cw,i=z9(t),s=e-i,o=10,l=0;function c(){l+=o;var d=bfe(l,i,s,n);Tw(t,d),l<n?window.requestAnimationFrame(c):a(t)}c()}function q4(t,e){var n=t.getBoundingClientRect(),a=e.getBoundingClientRect(),i=e.offsetHeight/3;a.bottom+i>n.bottom?Tw(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):a.top-i<n.top&&Tw(t,Math.max(e.offsetTop-i,0))}function jfe(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function U4(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function wfe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var q9=!1,Nfe={get passive(){return q9=!0}},_j=typeof window<"u"?window:{};_j.addEventListener&&_j.removeEventListener&&(_j.addEventListener("p",Cw,Nfe),_j.removeEventListener("p",Cw,!1));var Sfe=q9;function _fe(t){return t!=null}function Cfe(t){return Array.isArray(t)}function Cj(t,e,n){return t?e:n}var Tfe=function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var l=Ac(o,1),c=l[0];return!a.includes(c)});return s.reduce(function(o,l){var c=Ac(l,2),d=c[0],f=c[1];return o[d]=f,o},{})},kfe=["children","innerProps"],Afe=["children","innerProps"];function Efe(t){var e=t.maxHeight,n=t.menuEl,a=t.minHeight,i=t.placement,s=t.shouldScroll,o=t.isFixedPosition,l=t.controlHeight,c=vfe(n),d={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return d;var f=c.getBoundingClientRect(),p=f.height,g=n.getBoundingClientRect(),x=g.bottom,b=g.height,j=g.top,S=n.offsetParent.getBoundingClientRect(),_=S.top,T=o?window.innerHeight:xfe(c),C=z9(c),P=parseInt(getComputedStyle(n).marginBottom,10),k=parseInt(getComputedStyle(n).marginTop,10),E=_-k,I=T-j,L=E+C,$=p-C-j,q=x-T+C+P,F=C+j-k,H=160;switch(i){case"auto":case"bottom":if(I>=b)return{placement:"bottom",maxHeight:e};if($>=b&&!o)return s&&Sj(c,q,H),{placement:"bottom",maxHeight:e};if(!o&&$>=a||o&&I>=a){s&&Sj(c,q,H);var V=o?I-P:$-P;return{placement:"bottom",maxHeight:V}}if(i==="auto"||o){var X=e,Y=o?E:L;return Y>=a&&(X=Math.min(Y-P-l,e)),{placement:"top",maxHeight:X}}if(i==="bottom")return s&&Tw(c,q),{placement:"bottom",maxHeight:e};break;case"top":if(E>=b)return{placement:"top",maxHeight:e};if(L>=b&&!o)return s&&Sj(c,F,H),{placement:"top",maxHeight:e};if(!o&&L>=a||o&&E>=a){var z=e;return(!o&&L>=a||o&&E>=a)&&(z=o?E-k:L-k),s&&Sj(c,F,H),{placement:"top",maxHeight:z}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return d}function Pfe(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var U9=function(e){return e==="auto"?"bottom":e},Dfe=function(e,n){var a,i=e.placement,s=e.theme,o=s.borderRadius,l=s.spacing,c=s.colors;return Xt((a={label:"menu"},hv(a,Pfe(i),"100%"),hv(a,"position","absolute"),hv(a,"width","100%"),hv(a,"zIndex",1),a),n?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},V9=v.createContext(null),Ofe=function(e){var n=e.children,a=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,l=e.menuShouldScrollIntoView,c=e.theme,d=v.useContext(V9)||{},f=d.setPortalPlacement,p=v.useRef(null),g=v.useState(i),x=Ac(g,2),b=x[0],j=x[1],S=v.useState(null),_=Ac(S,2),T=_[0],C=_[1],P=c.spacing.controlHeight;return XE(function(){var k=p.current;if(k){var E=o==="fixed",I=l&&!E,L=Efe({maxHeight:i,menuEl:k,minHeight:a,placement:s,shouldScroll:I,isFixedPosition:E,controlHeight:P});j(L.maxHeight),C(L.placement),f==null||f(L.placement)}},[i,s,o,l,a,f,P]),n({ref:p,placerProps:Xt(Xt({},e),{},{placement:T||U9(s),maxHeight:b})})},Mfe=function(e){var n=e.children,a=e.innerRef,i=e.innerProps;return Ht("div",rn({},ta(e,"menu",{menu:!0}),{ref:a},i),n)},Ife=Mfe,Rfe=function(e,n){var a=e.maxHeight,i=e.theme.spacing.baseUnit;return Xt({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},Lfe=function(e){var n=e.children,a=e.innerProps,i=e.innerRef,s=e.isMulti;return Ht("div",rn({},ta(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},a),n)},H9=function(e,n){var a=e.theme,i=a.spacing.baseUnit,s=a.colors;return Xt({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Ffe=H9,$fe=H9,Bfe=function(e){var n=e.children,a=n===void 0?"No options":n,i=e.innerProps,s=Hc(e,kfe);return Ht("div",rn({},ta(Xt(Xt({},s),{},{children:a,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),a)},zfe=function(e){var n=e.children,a=n===void 0?"Loading...":n,i=e.innerProps,s=Hc(e,Afe);return Ht("div",rn({},ta(Xt(Xt({},s),{},{children:a,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),a)},qfe=function(e){var n=e.rect,a=e.offset,i=e.position;return{left:n.left,position:i,top:a,width:n.width,zIndex:1}},Ufe=function(e){var n=e.appendTo,a=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,l=e.menuPosition,c=v.useRef(null),d=v.useRef(null),f=v.useState(U9(o)),p=Ac(f,2),g=p[0],x=p[1],b=v.useMemo(function(){return{setPortalPlacement:x}},[]),j=v.useState(null),S=Ac(j,2),_=S[0],T=S[1],C=v.useCallback(function(){if(i){var I=jfe(i),L=l==="fixed"?0:window.pageYOffset,$=I[g]+L;($!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&T({offset:$,rect:I})}},[i,l,g,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);XE(function(){C()},[C]);var P=v.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),i&&c.current&&(d.current=pfe(i,c.current,C,{elementResize:"ResizeObserver"in window}))},[i,C]);XE(function(){P()},[P]);var k=v.useCallback(function(I){c.current=I,P()},[P]);if(!n&&l!=="fixed"||!_)return null;var E=Ht("div",rn({ref:k},ta(Xt(Xt({},e),{},{offset:_.offset,position:l,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),a);return Ht(V9.Provider,{value:b},n?zD.createPortal(E,n):E)},Vfe=function(e){var n=e.isDisabled,a=e.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},Hfe=function(e){var n=e.children,a=e.innerProps,i=e.isDisabled,s=e.isRtl;return Ht("div",rn({},ta(e,"container",{"--is-disabled":i,"--is-rtl":s}),a),n)},Gfe=function(e,n){var a=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Xt({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},Wfe=function(e){var n=e.children,a=e.innerProps,i=e.isMulti,s=e.hasValue;return Ht("div",rn({},ta(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),a),n)},Kfe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Yfe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ta(e,"indicatorsContainer",{indicators:!0}),a),n)},V4,Qfe=["size"],Xfe=["innerProps","isRtl","size"],Jfe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},G9=function(e){var n=e.size,a=Hc(e,Qfe);return Ht("svg",rn({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Jfe},a))},NO=function(e){return Ht(G9,rn({size:20},e),Ht("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},W9=function(e){return Ht(G9,rn({size:20},e),Ht("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},K9=function(e,n){var a=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Xt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:a?o.neutral60:o.neutral20,padding:s*2,":hover":{color:a?o.neutral80:o.neutral40}})},Zfe=K9,epe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ta(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),n||Ht(W9,null))},tpe=K9,npe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ta(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),n||Ht(NO,null))},rpe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Xt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:a?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},ape=function(e){var n=e.innerProps;return Ht("span",rn({},n,ta(e,"indicatorSeparator",{"indicator-separator":!0})))},ipe=Jhe(V4||(V4=Zhe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),spe=function(e,n){var a=e.isFocused,i=e.size,s=e.theme,o=s.colors,l=s.spacing.baseUnit;return Xt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:a?o.neutral60:o.neutral20,padding:l*2})},TC=function(e){var n=e.delay,a=e.offset;return Ht("span",{css:vO({animation:"".concat(ipe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ope=function(e){var n=e.innerProps,a=e.isRtl,i=e.size,s=i===void 0?4:i,o=Hc(e,Xfe);return Ht("div",rn({},ta(Xt(Xt({},o),{},{innerProps:n,isRtl:a,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Ht(TC,{delay:0,offset:a}),Ht(TC,{delay:160,offset:!0}),Ht(TC,{delay:320,offset:!a}))},lpe=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,l=s.borderRadius,c=s.spacing;return Xt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:a?o.neutral5:o.neutral0,borderColor:a?o.neutral10:i?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},cpe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,l=e.menuIsOpen;return Ht("div",rn({ref:s},ta(e,"control",{control:!0,"control--is-disabled":a,"control--is-focused":i,"control--menu-is-open":l}),o,{"aria-disabled":a||void 0}),n)},upe=cpe,dpe=["data"],hpe=function(e,n){var a=e.theme.spacing;return n?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},fpe=function(e){var n=e.children,a=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,l=e.headingProps,c=e.innerProps,d=e.label,f=e.theme,p=e.selectProps;return Ht("div",rn({},ta(e,"group",{group:!0}),c),Ht(o,rn({},l,{selectProps:p,theme:f,getStyles:i,getClassNames:s,cx:a}),d),Ht("div",null,n))},ppe=function(e,n){var a=e.theme,i=a.colors,s=a.spacing;return Xt({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},mpe=function(e){var n=B9(e);n.data;var a=Hc(n,dpe);return Ht("div",rn({},ta(e,"groupHeading",{"group-heading":!0}),a))},gpe=fpe,ype=["innerRef","isDisabled","isHidden","inputClassName"],xpe=function(e,n){var a=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,l=s.colors;return Xt(Xt({visibility:a?"hidden":"visible",transform:i?"translateZ(0)":""},vpe),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},Y9={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},vpe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Xt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Y9)},bpe=function(e){return Xt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Y9)},jpe=function(e){var n=e.cx,a=e.value,i=B9(e),s=i.innerRef,o=i.isDisabled,l=i.isHidden,c=i.inputClassName,d=Hc(i,ype);return Ht("div",rn({},ta(e,"input",{"input-container":!0}),{"data-value":a||""}),Ht("input",rn({className:n({input:!0},c),ref:s,style:bpe(l),disabled:o},d)))},wpe=jpe,Npe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors;return Xt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},Spe=function(e,n){var a=e.theme,i=a.borderRadius,s=a.colors,o=e.cropWithEllipsis;return Xt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},_pe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors,l=e.isFocused;return Xt({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},Q9=function(e){var n=e.children,a=e.innerProps;return Ht("div",a,n)},Cpe=Q9,Tpe=Q9;function kpe(t){var e=t.children,n=t.innerProps;return Ht("div",rn({role:"button"},n),e||Ht(NO,{size:14}))}var Ape=function(e){var n=e.children,a=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,l=e.removeProps,c=e.selectProps,d=a.Container,f=a.Label,p=a.Remove;return Ht(d,{data:i,innerProps:Xt(Xt({},ta(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:c},Ht(f,{data:i,innerProps:Xt({},ta(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),Ht(p,{data:i,innerProps:Xt(Xt({},ta(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:c}))},Epe=Ape,Ppe=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,l=o.spacing,c=o.colors;return Xt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?c.primary:i?c.primary25:"transparent",color:a?c.neutral20:s?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:s?c.primary:c.primary50}})},Dpe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,l=e.innerProps;return Ht("div",rn({},ta(e,"option",{option:!0,"option--is-disabled":a,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":a},l),n)},Ope=Dpe,Mpe=function(e,n){var a=e.theme,i=a.spacing,s=a.colors;return Xt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Ipe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ta(e,"placeholder",{placeholder:!0}),a),n)},Rpe=Ipe,Lpe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return Xt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:a?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Fpe=function(e){var n=e.children,a=e.isDisabled,i=e.innerProps;return Ht("div",rn({},ta(e,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),i),n)},$pe=Fpe,Bpe={ClearIndicator:npe,Control:upe,DropdownIndicator:epe,DownChevron:W9,CrossIcon:NO,Group:gpe,GroupHeading:mpe,IndicatorsContainer:Yfe,IndicatorSeparator:ape,Input:wpe,LoadingIndicator:ope,Menu:Ife,MenuList:Lfe,MenuPortal:Ufe,LoadingMessage:zfe,NoOptionsMessage:Bfe,MultiValue:Epe,MultiValueContainer:Cpe,MultiValueLabel:Tpe,MultiValueRemove:kpe,Option:Ope,Placeholder:Rpe,SelectContainer:Hfe,SingleValue:$pe,ValueContainer:Wfe},zpe=function(e){return Xt(Xt({},Bpe),e.components)},H4=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function qpe(t,e){return!!(t===e||H4(t)&&H4(e))}function Upe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!qpe(t[n],e[n]))return!1;return!0}function Vpe(t,e){e===void 0&&(e=Upe);var n=null;function a(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return a.clear=function(){n=null},a}var Hpe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Gpe=function(e){return Ht("span",rn({css:Hpe},e))},G4=Gpe,Wpe={guidance:function(e){var n=e.isSearchable,a=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,a=e.label,i=a===void 0?"":a,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,a=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,l=e.selectValue,c=e.isDisabled,d=e.isSelected,f=e.isAppleDevice,p=function(j,S){return j&&j.length?"".concat(j.indexOf(S)+1," of ").concat(j.length):""};if(n==="value"&&l)return"value ".concat(o," focused, ").concat(p(l,a),".");if(n==="menu"&&f){var g=c?" disabled":"",x="".concat(d?" selected":"").concat(g);return"".concat(o).concat(x,", ").concat(p(i,a),".")}return""},onFilter:function(e){var n=e.inputValue,a=e.resultsMessage;return"".concat(a).concat(n?" for search term "+n:"",".")}},Kpe=function(e){var n=e.ariaSelection,a=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,l=e.selectValue,c=e.selectProps,d=e.id,f=e.isAppleDevice,p=c.ariaLiveMessages,g=c.getOptionLabel,x=c.inputValue,b=c.isMulti,j=c.isOptionDisabled,S=c.isSearchable,_=c.menuIsOpen,T=c.options,C=c.screenReaderStatus,P=c.tabSelectsValue,k=c.isLoading,E=c["aria-label"],I=c["aria-live"],L=v.useMemo(function(){return Xt(Xt({},Wpe),p||{})},[p]),$=v.useMemo(function(){var Y="";if(n&&L.onChange){var z=n.option,G=n.options,ie=n.removedValue,W=n.removedValues,B=n.value,ce=function(be){return Array.isArray(be)?null:be},je=ie||z||ce(B),K=je?g(je):"",Ie=G||W||void 0,Ue=Ie?Ie.map(g):[],ze=Xt({isDisabled:je&&j(je,l),label:K,labels:Ue},n);Y=L.onChange(ze)}return Y},[n,L,j,l,g]),q=v.useMemo(function(){var Y="",z=a||i,G=!!(a&&l&&l.includes(a));if(z&&L.onFocus){var ie={focused:z,label:g(z),isDisabled:j(z,l),isSelected:G,options:s,context:z===a?"menu":"value",selectValue:l,isAppleDevice:f};Y=L.onFocus(ie)}return Y},[a,i,g,j,L,s,l,f]),F=v.useMemo(function(){var Y="";if(_&&T.length&&!k&&L.onFilter){var z=C({count:s.length});Y=L.onFilter({inputValue:x,resultsMessage:z})}return Y},[s,x,_,L,T,C,k]),H=(n==null?void 0:n.action)==="initial-input-focus",V=v.useMemo(function(){var Y="";if(L.guidance){var z=i?"value":_?"menu":"input";Y=L.guidance({"aria-label":E,context:z,isDisabled:a&&j(a,l),isMulti:b,isSearchable:S,tabSelectsValue:P,isInitialFocus:H})}return Y},[E,a,i,b,j,S,_,L,l,P,H]),X=Ht(v.Fragment,null,Ht("span",{id:"aria-selection"},$),Ht("span",{id:"aria-focused"},q),Ht("span",{id:"aria-results"},F),Ht("span",{id:"aria-guidance"},V));return Ht(v.Fragment,null,Ht(G4,{id:d},H&&X),Ht(G4,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!H&&X))},Ype=Kpe,JE=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Qpe=new RegExp("["+JE.map(function(t){return t.letters}).join("")+"]","g"),X9={};for(var kC=0;kC<JE.length;kC++)for(var AC=JE[kC],EC=0;EC<AC.letters.length;EC++)X9[AC.letters[EC]]=AC.base;var J9=function(e){return e.replace(Qpe,function(n){return X9[n]})},Xpe=Vpe(J9),W4=function(e){return e.replace(/^\s+|\s+$/g,"")},Jpe=function(e){return"".concat(e.label," ").concat(e.value)},Zpe=function(e){return function(n,a){if(n.data.__isNew__)return!0;var i=Xt({ignoreCase:!0,ignoreAccents:!0,stringify:Jpe,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,l=i.stringify,c=i.trim,d=i.matchFrom,f=c?W4(a):a,p=c?W4(l(n)):l(n);return s&&(f=f.toLowerCase(),p=p.toLowerCase()),o&&(f=Xpe(f),p=J9(p)),d==="start"?p.substr(0,f.length)===f:p.indexOf(f)>-1}},eme=["innerRef"];function tme(t){var e=t.innerRef,n=Hc(t,eme),a=Tfe(n,"onExited","in","enter","exit","appear");return Ht("input",rn({ref:e},a,{css:vO({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var nme=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function rme(t){var e=t.isEnabled,n=t.onBottomArrive,a=t.onBottomLeave,i=t.onTopArrive,s=t.onTopLeave,o=v.useRef(!1),l=v.useRef(!1),c=v.useRef(0),d=v.useRef(null),f=v.useCallback(function(S,_){if(d.current!==null){var T=d.current,C=T.scrollTop,P=T.scrollHeight,k=T.clientHeight,E=d.current,I=_>0,L=P-k-C,$=!1;L>_&&o.current&&(a&&a(S),o.current=!1),I&&l.current&&(s&&s(S),l.current=!1),I&&_>L?(n&&!o.current&&n(S),E.scrollTop=P,$=!0,o.current=!0):!I&&-_>C&&(i&&!l.current&&i(S),E.scrollTop=0,$=!0,l.current=!0),$&&nme(S)}},[n,a,i,s]),p=v.useCallback(function(S){f(S,S.deltaY)},[f]),g=v.useCallback(function(S){c.current=S.changedTouches[0].clientY},[]),x=v.useCallback(function(S){var _=c.current-S.changedTouches[0].clientY;f(S,_)},[f]),b=v.useCallback(function(S){if(S){var _=Sfe?{passive:!1}:!1;S.addEventListener("wheel",p,_),S.addEventListener("touchstart",g,_),S.addEventListener("touchmove",x,_)}},[x,g,p]),j=v.useCallback(function(S){S&&(S.removeEventListener("wheel",p,!1),S.removeEventListener("touchstart",g,!1),S.removeEventListener("touchmove",x,!1))},[x,g,p]);return v.useEffect(function(){if(e){var S=d.current;return b(S),function(){j(S)}}},[e,b,j]),function(S){d.current=S}}var K4=["boxSizing","height","overflow","paddingRight","position"],Y4={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Q4(t){t.cancelable&&t.preventDefault()}function X4(t){t.stopPropagation()}function J4(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function Z4(){return"ontouchstart"in window||navigator.maxTouchPoints}var e3=!!(typeof window<"u"&&window.document&&window.document.createElement),Yx=0,ym={capture:!1,passive:!1};function ame(t){var e=t.isEnabled,n=t.accountForScrollbars,a=n===void 0?!0:n,i=v.useRef({}),s=v.useRef(null),o=v.useCallback(function(c){if(e3){var d=document.body,f=d&&d.style;if(a&&K4.forEach(function(b){var j=f&&f[b];i.current[b]=j}),a&&Yx<1){var p=parseInt(i.current.paddingRight,10)||0,g=document.body?document.body.clientWidth:0,x=window.innerWidth-g+p||0;Object.keys(Y4).forEach(function(b){var j=Y4[b];f&&(f[b]=j)}),f&&(f.paddingRight="".concat(x,"px"))}d&&Z4()&&(d.addEventListener("touchmove",Q4,ym),c&&(c.addEventListener("touchstart",J4,ym),c.addEventListener("touchmove",X4,ym))),Yx+=1}},[a]),l=v.useCallback(function(c){if(e3){var d=document.body,f=d&&d.style;Yx=Math.max(Yx-1,0),a&&Yx<1&&K4.forEach(function(p){var g=i.current[p];f&&(f[p]=g)}),d&&Z4()&&(d.removeEventListener("touchmove",Q4,ym),c&&(c.removeEventListener("touchstart",J4,ym),c.removeEventListener("touchmove",X4,ym)))}},[a]);return v.useEffect(function(){if(e){var c=s.current;return o(c),function(){l(c)}}},[e,o,l]),function(c){s.current=c}}var ime=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},sme={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ome(t){var e=t.children,n=t.lockEnabled,a=t.captureEnabled,i=a===void 0?!0:a,s=t.onBottomArrive,o=t.onBottomLeave,l=t.onTopArrive,c=t.onTopLeave,d=rme({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),f=ame({isEnabled:n}),p=function(x){d(x),f(x)};return Ht(v.Fragment,null,n&&Ht("div",{onClick:ime,css:sme}),e(p))}var lme={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},cme=function(e){var n=e.name,a=e.onFocus;return Ht("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:lme,value:"",onChange:function(){}})},ume=cme;function SO(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function dme(){return SO(/^iPhone/i)}function Z9(){return SO(/^Mac/i)}function hme(){return SO(/^iPad/i)||Z9()&&navigator.maxTouchPoints>1}function fme(){return dme()||hme()}function pme(){return Z9()||fme()}var mme=function(e){return e.label},gme=function(e){return e.label},yme=function(e){return e.value},xme=function(e){return!!e.isDisabled},vme={clearIndicator:tpe,container:Vfe,control:lpe,dropdownIndicator:Zfe,group:hpe,groupHeading:ppe,indicatorsContainer:Kfe,indicatorSeparator:rpe,input:xpe,loadingIndicator:spe,loadingMessage:$fe,menu:Dfe,menuList:Rfe,menuPortal:qfe,multiValue:Npe,multiValueLabel:Spe,multiValueRemove:_pe,noOptionsMessage:Ffe,option:Ppe,placeholder:Mpe,singleValue:Lpe,valueContainer:Gfe},bme={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},jme=4,eU=4,wme=38,Nme=eU*2,Sme={baseUnit:eU,controlHeight:wme,menuGutter:Nme},PC={borderRadius:jme,colors:bme,spacing:Sme},_me={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:U4(),captureMenuScroll:!U4(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Zpe(),formatGroupLabel:mme,getOptionLabel:gme,getOptionValue:yme,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:xme,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!wfe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function t3(t,e,n,a){var i=rU(t,e,n),s=aU(t,e,n),o=nU(t,e),l=kw(t,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:l,index:a}}function aw(t,e){return t.options.map(function(n,a){if("options"in n){var i=n.options.map(function(o,l){return t3(t,o,e,l)}).filter(function(o){return r3(t,o)});return i.length>0?{type:"group",data:n,options:i,index:a}:void 0}var s=t3(t,n,e,a);return r3(t,s)?s:void 0}).filter(_fe)}function tU(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,pO(n.options.map(function(a){return a.data}))):e.push(n.data),e},[])}function n3(t,e){return t.reduce(function(n,a){return a.type==="group"?n.push.apply(n,pO(a.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(a.index,"-").concat(i.index)}}))):n.push({data:a.data,id:"".concat(e,"-").concat(a.index)}),n},[])}function Cme(t,e){return tU(aw(t,e))}function r3(t,e){var n=t.inputValue,a=n===void 0?"":n,i=e.data,s=e.isSelected,o=e.label,l=e.value;return(!sU(t)||!s)&&iU(t,{label:o,value:l,data:i},a)}function Tme(t,e){var n=t.focusedValue,a=t.selectValue,i=a.indexOf(n);if(i>-1){var s=e.indexOf(n);if(s>-1)return n;if(i<e.length)return e[i]}return null}function kme(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var DC=function(e,n){var a,i=(a=e.find(function(s){return s.data===n}))===null||a===void 0?void 0:a.id;return i||null},nU=function(e,n){return e.getOptionLabel(n)},kw=function(e,n){return e.getOptionValue(n)};function rU(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function aU(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var a=kw(t,e);return n.some(function(i){return kw(t,i)===a})}function iU(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var sU=function(e){var n=e.hideSelectedOptions,a=e.isMulti;return n===void 0?a:n},Ame=1,oU=function(t){Yde(n,t);var e=Jde(n);function n(a){var i;if(Wde(this,n),i=e.call(this,a),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(c){i.controlRef=c},i.focusedOptionRef=null,i.getFocusedOptionRef=function(c){i.focusedOptionRef=c},i.menuListRef=null,i.getMenuListRef=function(c){i.menuListRef=c},i.inputRef=null,i.getInputRef=function(c){i.inputRef=c},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(c,d){var f=i.props,p=f.onChange,g=f.name;d.name=g,i.ariaOnChange(c,d),p(c,d)},i.setValue=function(c,d,f){var p=i.props,g=p.closeMenuOnSelect,x=p.isMulti,b=p.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:b}),g&&(i.setState({inputIsHiddenAfterUpdate:!x}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(c,{action:d,option:f})},i.selectOption=function(c){var d=i.props,f=d.blurInputOnSelect,p=d.isMulti,g=d.name,x=i.state.selectValue,b=p&&i.isOptionSelected(c,x),j=i.isOptionDisabled(c,x);if(b){var S=i.getOptionValue(c);i.setValue(x.filter(function(_){return i.getOptionValue(_)!==S}),"deselect-option",c)}else if(!j)p?i.setValue([].concat(pO(x),[c]),"select-option",c):i.setValue(c,"select-option");else{i.ariaOnChange(c,{action:"select-option",option:c,name:g});return}f&&i.blurInput()},i.removeValue=function(c){var d=i.props.isMulti,f=i.state.selectValue,p=i.getOptionValue(c),g=f.filter(function(b){return i.getOptionValue(b)!==p}),x=Cj(d,g,g[0]||null);i.onChange(x,{action:"remove-value",removedValue:c}),i.focusInput()},i.clearValue=function(){var c=i.state.selectValue;i.onChange(Cj(i.props.isMulti,[],null),{action:"clear",removedValues:c})},i.popValue=function(){var c=i.props.isMulti,d=i.state.selectValue,f=d[d.length-1],p=d.slice(0,d.length-1),g=Cj(c,p,p[0]||null);f&&i.onChange(g,{action:"pop-value",removedValue:f})},i.getFocusedOptionId=function(c){return DC(i.state.focusableOptionsWithIds,c)},i.getFocusableOptionsWithIds=function(){return n3(aw(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return yfe.apply(void 0,[i.props.classNamePrefix].concat(d))},i.getOptionLabel=function(c){return nU(i.props,c)},i.getOptionValue=function(c){return kw(i.props,c)},i.getStyles=function(c,d){var f=i.props.unstyled,p=vme[c](d,f);p.boxSizing="border-box";var g=i.props.styles[c];return g?g(p,d):p},i.getClassNames=function(c,d){var f,p;return(f=(p=i.props.classNames)[c])===null||f===void 0?void 0:f.call(p,d)},i.getElementId=function(c){return"".concat(i.state.instancePrefix,"-").concat(c)},i.getComponents=function(){return zpe(i.props)},i.buildCategorizedOptions=function(){return aw(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return tU(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(c,d){i.setState({ariaSelection:Xt({value:c},d)})},i.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(c){i.blockOptionHover=!1},i.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&i.onMenuClose():d&&i.openMenu("first"):(d&&(i.openAfterFocus=!0),i.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},i.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!i.props.isDisabled){var d=i.props,f=d.isMulti,p=d.menuIsOpen;i.focusInput(),p?(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()):i.openMenu("first"),c.preventDefault()}},i.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(i.clearValue(),c.preventDefault(),i.openAfterFocus=!1,c.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(c){typeof i.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&eS(c.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(c)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(c){var d=c.touches,f=d&&d.item(0);f&&(i.initialTouchX=f.clientX,i.initialTouchY=f.clientY,i.userIsDragging=!1)},i.onTouchMove=function(c){var d=c.touches,f=d&&d.item(0);if(f){var p=Math.abs(f.clientX-i.initialTouchX),g=Math.abs(f.clientY-i.initialTouchY),x=5;i.userIsDragging=p>x||g>x}},i.onTouchEnd=function(c){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(c.target)&&i.menuListRef&&!i.menuListRef.contains(c.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(c){i.userIsDragging||i.onControlMouseDown(c)},i.onClearIndicatorTouchEnd=function(c){i.userIsDragging||i.onClearIndicatorMouseDown(c)},i.onDropdownIndicatorTouchEnd=function(c){i.userIsDragging||i.onDropdownIndicatorMouseDown(c)},i.handleInputChange=function(c){var d=i.props.inputValue,f=c.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(f,{action:"input-change",prevInputValue:d}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(c){i.props.onFocus&&i.props.onFocus(c),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(c){var d=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(c),i.onInputChange("",{action:"input-blur",prevInputValue:d}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(c){if(!(i.blockOptionHover||i.state.focusedOption===c)){var d=i.getFocusableOptions(),f=d.indexOf(c);i.setState({focusedOption:c,focusedOptionId:f>-1?i.getFocusedOptionId(c):null})}},i.shouldHideSelectedOptions=function(){return sU(i.props)},i.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),i.focus()},i.onKeyDown=function(c){var d=i.props,f=d.isMulti,p=d.backspaceRemovesValue,g=d.escapeClearsValue,x=d.inputValue,b=d.isClearable,j=d.isDisabled,S=d.menuIsOpen,_=d.onKeyDown,T=d.tabSelectsValue,C=d.openMenuOnFocus,P=i.state,k=P.focusedOption,E=P.focusedValue,I=P.selectValue;if(!j&&!(typeof _=="function"&&(_(c),c.defaultPrevented))){switch(i.blockOptionHover=!0,c.key){case"ArrowLeft":if(!f||x)return;i.focusValue("previous");break;case"ArrowRight":if(!f||x)return;i.focusValue("next");break;case"Delete":case"Backspace":if(x)return;if(E)i.removeValue(E);else{if(!p)return;f?i.popValue():b&&i.clearValue()}break;case"Tab":if(i.isComposing||c.shiftKey||!S||!T||!k||C&&i.isOptionSelected(k,I))return;i.selectOption(k);break;case"Enter":if(c.keyCode===229)break;if(S){if(!k||i.isComposing)return;i.selectOption(k);break}return;case"Escape":S?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:x}),i.onMenuClose()):b&&g&&i.clearValue();break;case" ":if(x)return;if(!S){i.openMenu("first");break}if(!k)return;i.selectOption(k);break;case"ArrowUp":S?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":S?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!S)return;i.focusOption("pageup");break;case"PageDown":if(!S)return;i.focusOption("pagedown");break;case"Home":if(!S)return;i.focusOption("first");break;case"End":if(!S)return;i.focusOption("last");break;default:return}c.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++Ame),i.state.selectValue=z4(a.value),a.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),l=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[l],i.state.focusedOptionId=DC(s,o[l])}return i}return Kde(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&q4(this.menuListRef,this.focusedOptionRef),pme()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,c=this.state.isFocused;(c&&!o&&i.isDisabled||c&&l&&!i.menuIsOpen)&&this.focusInput(),c&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(q4(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),f=i==="first"?0:d.length-1;if(!this.props.isMulti){var p=d.indexOf(l[0]);p>-1&&(f=p)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[f],focusedOptionId:this.getFocusedOptionId(d[f])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,f=-1;if(o.length){switch(i){case"previous":c===0?f=0:c===-1?f=d:f=c-1;break;case"next":c>-1&&c<d&&(f=c+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:o[f]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),i==="up"?c=d>0?d-1:l.length-1:i==="down"?c=(d+1)%l.length:i==="pageup"?(c=d-s,c<0&&(c=0)):i==="pagedown"?(c=d+s,c>l.length-1&&(c=l.length-1)):i==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(PC):Xt(Xt({},PC),this.props.theme):PC}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,f=this.setValue,p=this.props,g=p.isMulti,x=p.isRtl,b=p.options,j=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:l,getValue:c,hasValue:j,isMulti:g,isRtl:x,options:b,selectOption:d,selectProps:p,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return rU(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return aU(this.props,i,s)}},{key:"filterOption",value:function(i,s){return iU(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,l=i.inputId,c=i.inputValue,d=i.tabIndex,f=i.form,p=i.menuIsOpen,g=i.required,x=this.getComponents(),b=x.Input,j=this.state,S=j.inputIsHidden,_=j.ariaSelection,T=this.commonProps,C=l||this.getElementId("input"),P=Xt(Xt(Xt({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?v.createElement(b,rn({},T,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:s,isHidden:S,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:f,type:"text",value:c},P)):v.createElement(tme,rn({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Cw,onFocus:this.onInputFocus,disabled:s,tabIndex:d,inputMode:"none",form:f,value:""},P))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,c=s.MultiValueLabel,d=s.MultiValueRemove,f=s.SingleValue,p=s.Placeholder,g=this.commonProps,x=this.props,b=x.controlShouldRenderValue,j=x.isDisabled,S=x.isMulti,_=x.inputValue,T=x.placeholder,C=this.state,P=C.selectValue,k=C.focusedValue,E=C.isFocused;if(!this.hasValue()||!b)return _?null:v.createElement(p,rn({},g,{key:"placeholder",isDisabled:j,isFocused:E,innerProps:{id:this.getElementId("placeholder")}}),T);if(S)return P.map(function(L,$){var q=L===k,F="".concat(i.getOptionLabel(L),"-").concat(i.getOptionValue(L));return v.createElement(o,rn({},g,{components:{Container:l,Label:c,Remove:d},isFocused:q,isDisabled:j,key:F,index:$,removeProps:{onClick:function(){return i.removeValue(L)},onTouchEnd:function(){return i.removeValue(L)},onMouseDown:function(V){V.preventDefault()}},data:L}),i.formatOptionLabel(L,"value"))});if(_)return null;var I=P[0];return v.createElement(f,rn({},g,{data:I,isDisabled:j}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||d)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:p,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!s||!d)return null;var p={"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:p,isDisabled:c,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return v.createElement(o,rn({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,c=s.Menu,d=s.MenuList,f=s.MenuPortal,p=s.LoadingMessage,g=s.NoOptionsMessage,x=s.Option,b=this.commonProps,j=this.state.focusedOption,S=this.props,_=S.captureMenuScroll,T=S.inputValue,C=S.isLoading,P=S.loadingMessage,k=S.minMenuHeight,E=S.maxMenuHeight,I=S.menuIsOpen,L=S.menuPlacement,$=S.menuPosition,q=S.menuPortalTarget,F=S.menuShouldBlockScroll,H=S.menuShouldScrollIntoView,V=S.noOptionsMessage,X=S.onMenuScrollToTop,Y=S.onMenuScrollToBottom;if(!I)return null;var z=function(K,Ie){var Ue=K.type,ze=K.data,Le=K.isDisabled,be=K.isSelected,Ce=K.label,Ae=K.value,me=j===ze,ye=Le?void 0:function(){return i.onOptionHover(ze)},le=Le?void 0:function(){return i.selectOption(ze)},J="".concat(i.getElementId("option"),"-").concat(Ie),ae={id:J,onClick:le,onMouseMove:ye,onMouseOver:ye,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:be};return v.createElement(x,rn({},b,{innerProps:ae,data:ze,isDisabled:Le,isSelected:be,key:J,label:Ce,type:Ue,value:Ae,isFocused:me,innerRef:me?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(K.data,"menu"))},G;if(this.hasOptions())G=this.getCategorizedOptions().map(function(je){if(je.type==="group"){var K=je.data,Ie=je.options,Ue=je.index,ze="".concat(i.getElementId("group"),"-").concat(Ue),Le="".concat(ze,"-heading");return v.createElement(o,rn({},b,{key:ze,data:K,options:Ie,Heading:l,headingProps:{id:Le,data:je.data},label:i.formatGroupLabel(je.data)}),je.options.map(function(be){return z(be,"".concat(Ue,"-").concat(be.index))}))}else if(je.type==="option")return z(je,"".concat(je.index))});else if(C){var ie=P({inputValue:T});if(ie===null)return null;G=v.createElement(p,b,ie)}else{var W=V({inputValue:T});if(W===null)return null;G=v.createElement(g,b,W)}var B={minMenuHeight:k,maxMenuHeight:E,menuPlacement:L,menuPosition:$,menuShouldScrollIntoView:H},ce=v.createElement(Ofe,rn({},b,B),function(je){var K=je.ref,Ie=je.placerProps,Ue=Ie.placement,ze=Ie.maxHeight;return v.createElement(c,rn({},b,B,{innerRef:K,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:C,placement:Ue}),v.createElement(ome,{captureEnabled:_,onTopArrive:X,onBottomArrive:Y,lockEnabled:F},function(Le){return v.createElement(d,rn({},b,{innerRef:function(Ce){i.getMenuListRef(Ce),Le(Ce)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:C,maxHeight:ze,focusedOption:j}),G)}))});return q||$==="fixed"?v.createElement(f,rn({},b,{appendTo:q,controlElement:this.controlRef,menuPlacement:L,menuPosition:$}),ce):ce}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,l=s.isDisabled,c=s.isMulti,d=s.name,f=s.required,p=this.state.selectValue;if(f&&!this.hasValue()&&!l)return v.createElement(ume,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var g=p.map(function(j){return i.getOptionValue(j)}).join(o);return v.createElement("input",{name:d,type:"hidden",value:g})}else{var x=p.length>0?p.map(function(j,S){return v.createElement("input",{key:"i-".concat(S),name:d,type:"hidden",value:i.getOptionValue(j)})}):v.createElement("input",{name:d,type:"hidden",value:""});return v.createElement("div",null,x)}else{var b=p[0]?this.getOptionValue(p[0]):"";return v.createElement("input",{name:d,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,c=s.focusedValue,d=s.isFocused,f=s.selectValue,p=this.getFocusableOptions();return v.createElement(Ype,rn({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:f,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,l=i.SelectContainer,c=i.ValueContainer,d=this.props,f=d.className,p=d.id,g=d.isDisabled,x=d.menuIsOpen,b=this.state.isFocused,j=this.commonProps=this.getCommonProps();return v.createElement(l,rn({},j,{className:f,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),v.createElement(s,rn({},j,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:x}),v.createElement(c,rn({},j,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),v.createElement(o,rn({},j,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,c=s.inputIsHiddenAfterUpdate,d=s.ariaSelection,f=s.isFocused,p=s.prevWasFocused,g=s.instancePrefix,x=i.options,b=i.value,j=i.menuIsOpen,S=i.inputValue,_=i.isMulti,T=z4(b),C={};if(o&&(b!==o.value||x!==o.options||j!==o.menuIsOpen||S!==o.inputValue)){var P=j?Cme(i,T):[],k=j?n3(aw(i,T),"".concat(g,"-option")):[],E=l?Tme(s,T):null,I=kme(s,P),L=DC(k,I);C={selectValue:T,focusedOption:I,focusedOptionId:L,focusableOptionsWithIds:k,focusedValue:E,clearFocusValueOnUpdate:!1}}var $=c!=null&&i!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},q=d,F=f&&p;return f&&!F&&(q={value:Cj(_,T,T[0]||null),options:T,action:"initial-input-focus"},F=!p),(d==null?void 0:d.action)==="initial-input-focus"&&(q=null),Xt(Xt(Xt({},C),$),{},{prevProps:i,ariaSelection:q,prevWasFocused:F})}}]),n}(v.Component);oU.defaultProps=_me;var Eme=v.forwardRef(function(t,e){var n=Gde(t);return v.createElement(oU,rn({ref:e},n))}),lU=Eme;const xm=new Map,cU=(()=>{const t=new Promise(e=>{window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})});return async e=>{try{const n=new Audio;if(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play(),e!=null&&e.id&&xm.has(e.id)){const i=xm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&xm.set(e.id,a),a}catch{if(await t,e!=null&&e.id&&xm.has(e.id)){const i=xm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&xm.set(e.id,a),a}}})();function Pme(t){var e=atob(t),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n.buffer}const Dme=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,uU=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,Tj=new Map,ZE=(t,e)=>{const n=new Blob([`registerProcessor("${t}", ${e})`],{type:"application/javascript"});return URL.createObjectURL(n)};var OC={exports:{}},a3;function Ome(){return a3||(a3=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,p||c,g),b=n?n+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,g,x,b){var j=n?n+d:d;if(!this._events[j])return!1;var S=this._events[j],_=arguments.length,T,C;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,g),!0;case 5:return S.fn.call(S.context,f,p,g,x),!0;case 6:return S.fn.call(S.context,f,p,g,x,b),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];S.fn.apply(S.context,T)}else{var P=S.length,k;for(C=0;C<P;C++)switch(S[C].once&&this.removeListener(d,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];S[C].fn.apply(S[C].context,T)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,g){var x=n?n+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,S=[],_=b.length;j<_;j++)(b[j].fn!==f||g&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(OC)),OC.exports}var Mme=Ome();const dU=Wn(Mme);function Ime(t){for(var e="",n=new Uint8Array(t),a=n.byteLength,i=0;i<a;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}class hU extends dU{constructor(n=16e3){super();br(this,"stream");br(this,"audioContext");br(this,"source");br(this,"recording",!1);br(this,"recordingWorklet");br(this,"vuWorklet");br(this,"starting",null);this.sampleRate=n}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async n=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await cU({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const a="audio-recorder-worklet",i=ZE(a,Dme);await this.audioContext.audioWorklet.addModule(i),this.recordingWorklet=new AudioWorkletNode(this.audioContext,a),this.recordingWorklet.port.onmessage=async o=>{const l=o.data.data.int16arrayBuffer;if(l){const c=Ime(l);this.emit("data",c)}},this.source.connect(this.recordingWorklet);const s="vu-meter";await this.audioContext.audioWorklet.addModule(ZE(s,uU)),this.vuWorklet=new AudioWorkletNode(this.audioContext,s),this.vuWorklet.port.onmessage=o=>{this.emit("volume",o.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,n(),this.starting=null})}stop(){const n=()=>{var a,i;(a=this.source)==null||a.disconnect(),(i=this.stream)==null||i.getTracks().forEach(s=>s.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(n);return}n()}}const Rme=3,Lme=({active:t,volume:e,hover:n})=>{const a=v.useRef([]);return v.useEffect(()=>{let i=null;const s=()=>{a.current.forEach((o,l)=>{o&&(o.style.height=`${Math.min(24,4+e*(l===1?400:60))}px`)}),i=window.setTimeout(s,100)};return s(),()=>clearTimeout(i)},[e]),r.jsx("div",{className:ad("audioPulse",{active:t,hover:n}),children:Array(Rme).fill(null).map((i,s)=>r.jsx("div",{ref:o=>{a.current[s]=o},style:{animationDelay:`${s*133}ms`}},s))})};var fv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Fme=fv.exports,i3;function $me(){return i3||(i3=1,function(t,e){(function(){var n,a="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,f="__lodash_placeholder__",p=1,g=2,x=4,b=1,j=2,S=1,_=2,T=4,C=8,P=16,k=32,E=64,I=128,L=256,$=512,q=30,F="...",H=800,V=16,X=1,Y=2,z=3,G=1/0,ie=9007199254740991,W=17976931348623157e292,B=NaN,ce=4294967295,je=ce-1,K=ce>>>1,Ie=[["ary",I],["bind",S],["bindKey",_],["curry",C],["curryRight",P],["flip",$],["partial",k],["partialRight",E],["rearg",L]],Ue="[object Arguments]",ze="[object Array]",Le="[object AsyncFunction]",be="[object Boolean]",Ce="[object Date]",Ae="[object DOMException]",me="[object Error]",ye="[object Function]",le="[object GeneratorFunction]",J="[object Map]",ae="[object Number]",ue="[object Null]",ee="[object Object]",Ne="[object Promise]",Te="[object Proxy]",Fe="[object RegExp]",xe="[object Set]",ne="[object String]",oe="[object Symbol]",_e="[object Undefined]",De="[object WeakMap]",Q="[object WeakSet]",ge="[object ArrayBuffer]",de="[object DataView]",fe="[object Float32Array]",Ee="[object Float64Array]",Ye="[object Int8Array]",$e="[object Int16Array]",We="[object Int32Array]",it="[object Uint8Array]",wt="[object Uint8ClampedArray]",we="[object Uint16Array]",Xe="[object Uint32Array]",Je=/\b__p \+= '';/g,ct=/\b(__p \+=) '' \+/g,Ct=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,ot=RegExp(bt.source),Tt=RegExp(ke.source),Ve=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,kt=/<%=([\s\S]+?)%>/g,Kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vt=/[\\^$.*+?()[\]{}|]/g,ln=RegExp(Vt.source),er=/^\s+/,Tn=/\s/,va=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ya=/\{\n\/\* \[wrapped with (.+)\] \*/,Br=/,? & /,Aa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zi=/[()=,{}\[\]\/\s]/,Rn=/\\(\\)?/g,tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,St=/^[-+]0x[0-9a-f]+$/i,Ot=/^0b[01]+$/i,Nn=/^\[object .+?Constructor\]$/,Ln=/^0o[0-7]+$/i,ba=/^(?:0|[1-9]\d*)$/,yi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,uo=/($^)/,Td=/['\n\r\u2028\u2029\\]/g,kd="\\ud800-\\udfff",BS="\\u0300-\\u036f",$f="\\ufe20-\\ufe2f",Bf="\\u20d0-\\u20ff",Ls=BS+$f+Bf,zf="\\u2700-\\u27bf",Yg="a-z\\xdf-\\xf6\\xf8-\\xff",Qc="\\xac\\xb1\\xd7\\xf7",Qg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Xg="\\u2000-\\u206f",zS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Jg="A-Z\\xc0-\\xd6\\xd8-\\xde",xi="\\ufe0e\\ufe0f",Zg=Qc+Qg+Xg+zS,ey="[']",qf="["+kd+"]",ty="["+Zg+"]",Ul="["+Ls+"]",Wb="\\d+",qi="["+zf+"]",Uf="["+Yg+"]",ny="[^"+kd+Zg+Wb+zf+Yg+Jg+"]",Ad="\\ud83c[\\udffb-\\udfff]",Xc="(?:"+Ul+"|"+Ad+")",ry="[^"+kd+"]",Vf="(?:\\ud83c[\\udde6-\\uddff]){2}",Ko="[\\ud800-\\udbff][\\udc00-\\udfff]",Jc="["+Jg+"]",ay="\\u200d",iy="(?:"+Uf+"|"+ny+")",sy="(?:"+Jc+"|"+ny+")",Kb="(?:"+ey+"(?:d|ll|m|re|s|t|ve))?",Yb="(?:"+ey+"(?:D|LL|M|RE|S|T|VE))?",Ed=Xc+"?",Hf="["+xi+"]?",oy="(?:"+ay+"(?:"+[ry,Vf,Ko].join("|")+")"+Hf+Ed+")*",Zc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ly=Hf+Ed+oy,cy="(?:"+[qi,Vf,Ko].join("|")+")"+ly,Qb="(?:"+[ry+Ul+"?",Ul,Vf,Ko,qf].join("|")+")",Pd=RegExp(ey,"g"),ho=RegExp(Ul,"g"),Dd=RegExp(Ad+"(?="+Ad+")|"+Qb+ly,"g"),Od=RegExp([Jc+"?"+Uf+"+"+Kb+"(?="+[ty,Jc,"$"].join("|")+")",sy+"+"+Yb+"(?="+[ty,Jc+iy,"$"].join("|")+")",Jc+"?"+iy+"+"+Kb,Jc+"+"+Yb,eu,Zc,Wb,cy].join("|"),"g"),Yo=RegExp("["+ay+kd+Ls+xi+"]"),uy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xb=-1,or={};or[fe]=or[Ee]=or[Ye]=or[$e]=or[We]=or[it]=or[wt]=or[we]=or[Xe]=!0,or[Ue]=or[ze]=or[ge]=or[be]=or[de]=or[Ce]=or[me]=or[ye]=or[J]=or[ae]=or[ee]=or[Fe]=or[xe]=or[ne]=or[De]=!1;var tr={};tr[Ue]=tr[ze]=tr[ge]=tr[de]=tr[be]=tr[Ce]=tr[fe]=tr[Ee]=tr[Ye]=tr[$e]=tr[We]=tr[J]=tr[ae]=tr[ee]=tr[Fe]=tr[xe]=tr[ne]=tr[oe]=tr[it]=tr[wt]=tr[we]=tr[Xe]=!0,tr[me]=tr[ye]=tr[De]=!1;var Jb={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Qa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Md=parseFloat,qS=parseInt,Kf=typeof no=="object"&&no&&no.Object===Object&&no,dy=typeof self=="object"&&self&&self.Object===Object&&self,Yr=Kf||dy||Function("return this")(),tu=e&&!e.nodeType&&e,Qo=tu&&!0&&t&&!t.nodeType&&t,Zb=Qo&&Qo.exports===tu,hy=Zb&&Kf.process,Ui=function(){try{var He=Qo&&Qo.require&&Qo.require("util").types;return He||hy&&hy.binding&&hy.binding("util")}catch{}}(),Yf=Ui&&Ui.isArrayBuffer,e0=Ui&&Ui.isDate,t0=Ui&&Ui.isMap,n0=Ui&&Ui.isRegExp,r0=Ui&&Ui.isSet,a0=Ui&&Ui.isTypedArray;function Xa(He,st,rt){switch(rt.length){case 0:return He.call(st);case 1:return He.call(st,rt[0]);case 2:return He.call(st,rt[0],rt[1]);case 3:return He.call(st,rt[0],rt[1],rt[2])}return He.apply(st,rt)}function US(He,st,rt,At){for(var Jt=-1,$n=He==null?0:He.length;++Jt<$n;){var Qr=He[Jt];st(At,Qr,rt(Qr),He)}return At}function Vi(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At&&st(He[rt],rt,He)!==!1;);return He}function VS(He,st){for(var rt=He==null?0:He.length;rt--&&st(He[rt],rt,He)!==!1;);return He}function i0(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At;)if(!st(He[rt],rt,He))return!1;return!0}function Fs(He,st){for(var rt=-1,At=He==null?0:He.length,Jt=0,$n=[];++rt<At;){var Qr=He[rt];st(Qr,rt,He)&&($n[Jt++]=Qr)}return $n}function Qf(He,st){var rt=He==null?0:He.length;return!!rt&&nu(He,st,0)>-1}function fy(He,st,rt){for(var At=-1,Jt=He==null?0:He.length;++At<Jt;)if(rt(st,He[At]))return!0;return!1}function kr(He,st){for(var rt=-1,At=He==null?0:He.length,Jt=Array(At);++rt<At;)Jt[rt]=st(He[rt],rt,He);return Jt}function fo(He,st){for(var rt=-1,At=st.length,Jt=He.length;++rt<At;)He[Jt+rt]=st[rt];return He}function py(He,st,rt,At){var Jt=-1,$n=He==null?0:He.length;for(At&&$n&&(rt=He[++Jt]);++Jt<$n;)rt=st(rt,He[Jt],Jt,He);return rt}function HS(He,st,rt,At){var Jt=He==null?0:He.length;for(At&&Jt&&(rt=He[--Jt]);Jt--;)rt=st(rt,He[Jt],Jt,He);return rt}function my(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At;)if(st(He[rt],rt,He))return!0;return!1}var GS=Jf("length");function WS(He){return He.split("")}function KS(He){return He.match(Aa)||[]}function s0(He,st,rt){var At;return rt(He,function(Jt,$n,Qr){if(st(Jt,$n,Qr))return At=$n,!1}),At}function Xf(He,st,rt,At){for(var Jt=He.length,$n=rt+(At?1:-1);At?$n--:++$n<Jt;)if(st(He[$n],$n,He))return $n;return-1}function nu(He,st,rt){return st===st?JS(He,st,rt):Xf(He,ru,rt)}function gy(He,st,rt,At){for(var Jt=rt-1,$n=He.length;++Jt<$n;)if(At(He[Jt],st))return Jt;return-1}function ru(He){return He!==He}function o0(He,st){var rt=He==null?0:He.length;return rt?ep(He,st)/rt:B}function Jf(He){return function(st){return st==null?n:st[He]}}function Zf(He){return function(st){return He==null?n:He[st]}}function yy(He,st,rt,At,Jt){return Jt(He,function($n,Qr,Bn){rt=At?(At=!1,$n):st(rt,$n,Qr,Bn)}),rt}function l0(He,st){var rt=He.length;for(He.sort(st);rt--;)He[rt]=He[rt].value;return He}function ep(He,st){for(var rt,At=-1,Jt=He.length;++At<Jt;){var $n=st(He[At]);$n!==n&&(rt=rt===n?$n:rt+$n)}return rt}function Xo(He,st){for(var rt=-1,At=Array(He);++rt<He;)At[rt]=st(rt);return At}function YS(He,st){return kr(st,function(rt){return[rt,He[rt]]})}function c0(He){return He&&He.slice(0,vy(He)+1).replace(er,"")}function vi(He){return function(st){return He(st)}}function tp(He,st){return kr(st,function(rt){return He[rt]})}function au(He,st){return He.has(st)}function iu(He,st){for(var rt=-1,At=He.length;++rt<At&&nu(st,He[rt],0)>-1;);return rt}function su(He,st){for(var rt=He.length;rt--&&nu(st,He[rt],0)>-1;);return rt}function QS(He,st){for(var rt=He.length,At=0;rt--;)He[rt]===st&&++At;return At}var np=Zf(Jb),u0=Zf(Qa);function d0(He){return"\\"+Wf[He]}function xy(He,st){return He==null?n:He[st]}function Jo(He){return Yo.test(He)}function h0(He){return uy.test(He)}function f0(He){for(var st,rt=[];!(st=He.next()).done;)rt.push(st.value);return rt}function rp(He){var st=-1,rt=Array(He.size);return He.forEach(function(At,Jt){rt[++st]=[Jt,At]}),rt}function p0(He,st){return function(rt){return He(st(rt))}}function Zo(He,st){for(var rt=-1,At=He.length,Jt=0,$n=[];++rt<At;){var Qr=He[rt];(Qr===st||Qr===f)&&(He[rt]=f,$n[Jt++]=rt)}return $n}function ap(He){var st=-1,rt=Array(He.size);return He.forEach(function(At){rt[++st]=At}),rt}function XS(He){var st=-1,rt=Array(He.size);return He.forEach(function(At){rt[++st]=[At,At]}),rt}function JS(He,st,rt){for(var At=rt-1,Jt=He.length;++At<Jt;)if(He[At]===st)return At;return-1}function bi(He,st,rt){for(var At=rt+1;At--;)if(He[At]===st)return At;return At}function $s(He){return Jo(He)?g0(He):GS(He)}function Hi(He){return Jo(He)?by(He):WS(He)}function vy(He){for(var st=He.length;st--&&Tn.test(He.charAt(st)););return st}var m0=Zf(Vl);function g0(He){for(var st=Dd.lastIndex=0;Dd.test(He);)++st;return st}function by(He){return He.match(Dd)||[]}function ZS(He){return He.match(Od)||[]}var ou=function He(st){st=st==null?Yr:el.defaults(Yr.Object(),st,el.pick(Yr,Gf));var rt=st.Array,At=st.Date,Jt=st.Error,$n=st.Function,Qr=st.Math,Bn=st.Object,ip=st.RegExp,y0=st.String,ji=st.TypeError,sp=rt.prototype,e_=$n.prototype,lu=Bn.prototype,Id=st["__core-js_shared__"],Rd=e_.toString,Yn=lu.hasOwnProperty,ps=0,jy=function(){var y=/[^.]+$/.exec(Id&&Id.keys&&Id.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Ba=lu.toString,Gi=Rd.call(Bn),cu=Yr._,wy=ip("^"+Rd.call(Yn).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hl=Zb?st.Buffer:n,ms=st.Symbol,uu=st.Uint8Array,Gl=Hl?Hl.allocUnsafe:n,Ld=p0(Bn.getPrototypeOf,Bn),Fd=Bn.create,Wl=lu.propertyIsEnumerable,op=sp.splice,Ja=ms?ms.isConcatSpreadable:n,Kl=ms?ms.iterator:n,za=ms?ms.toStringTag:n,$d=function(){try{var y=cl(Bn,"defineProperty");return y({},"",{}),y}catch{}}(),lp=st.clearTimeout!==Yr.clearTimeout&&st.clearTimeout,Yl=At&&At.now!==Yr.Date.now&&At.now,Ny=st.setTimeout!==Yr.setTimeout&&st.setTimeout,du=Qr.ceil,po=Qr.floor,tl=Bn.getOwnPropertySymbols,cp=Hl?Hl.isBuffer:n,Bd=st.isFinite,Wi=sp.join,Ki=p0(Bn.keys,Bn),Nr=Qr.max,Ar=Qr.min,mo=At.now,Ql=st.parseInt,Sy=Qr.random,_y=sp.reverse,zd=cl(st,"DataView"),na=cl(st,"Map"),Er=cl(st,"Promise"),kn=cl(st,"Set"),gs=cl(st,"WeakMap"),Za=cl(Bn,"create"),hu=gs&&new gs,Yi={},x0=So(zd),v0=So(na),qd=So(Er),Ud=So(kn),b0=So(gs),nl=ms?ms.prototype:n,Xl=nl?nl.valueOf:n,rl=nl?nl.toString:n;function he(y){if(Lr(y)&&!sn(y)&&!(y instanceof vn)){if(y instanceof ei)return y;if(Yn.call(y,"__wrapped__"))return aa(y)}return new ei(y)}var wi=function(){function y(){}return function(w){if(!Dr(w))return{};if(Fd)return Fd(w);y.prototype=w;var M=new y;return y.prototype=n,M}}();function Qi(){}function ei(y,w){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!w,this.__index__=0,this.__values__=n}he.templateSettings={escape:Ve,evaluate:jt,interpolate:kt,variable:"",imports:{_:he}},he.prototype=Qi.prototype,he.prototype.constructor=he,ei.prototype=wi(Qi.prototype),ei.prototype.constructor=ei;function vn(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function Vd(){var y=new vn(this.__wrapped__);return y.__actions__=ra(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=ra(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=ra(this.__views__),y}function up(){if(this.__filtered__){var y=new vn(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function Jl(){var y=this.__wrapped__.value(),w=this.__dir__,M=sn(y),U=w<0,re=M?y.length:0,ve=Z0(0,re,this.__views__),Pe=ve.start,Be=ve.end,Ke=Be-Pe,ft=U?Be:Pe-1,mt=this.__iteratees__,yt=mt.length,Et=0,$t=Ar(Ke,this.__takeCount__);if(!M||!U&&re==Ke&&$t==Ke)return $0(y,this.__actions__);var Zt=[];e:for(;Ke--&&Et<$t;){ft+=w;for(var jn=-1,en=y[ft];++jn<yt;){var Pn=mt[jn],qn=Pn.iteratee,Ns=Pn.type,Ai=qn(en);if(Ns==Y)en=Ai;else if(!Ai){if(Ns==X)continue e;break e}}Zt[Et++]=en}return Zt}vn.prototype=wi(Qi.prototype),vn.prototype.constructor=vn;function zr(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function dp(){this.__data__=Za?Za(null):{},this.size=0}function j0(y){var w=this.has(y)&&delete this.__data__[y];return this.size-=w?1:0,w}function t_(y){var w=this.__data__;if(Za){var M=w[y];return M===c?n:M}return Yn.call(w,y)?w[y]:n}function n_(y){var w=this.__data__;return Za?w[y]!==n:Yn.call(w,y)}function r_(y,w){var M=this.__data__;return this.size+=this.has(y)?0:1,M[y]=Za&&w===n?c:w,this}zr.prototype.clear=dp,zr.prototype.delete=j0,zr.prototype.get=t_,zr.prototype.has=n_,zr.prototype.set=r_;function mr(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function Cy(){this.__data__=[],this.size=0}function Hd(y){var w=this.__data__,M=mu(w,y);if(M<0)return!1;var U=w.length-1;return M==U?w.pop():op.call(w,M,1),--this.size,!0}function Gd(y){var w=this.__data__,M=mu(w,y);return M<0?n:w[M][1]}function Ty(y){return mu(this.__data__,y)>-1}function fu(y,w){var M=this.__data__,U=mu(M,y);return U<0?(++this.size,M.push([y,w])):M[U][1]=w,this}mr.prototype.clear=Cy,mr.prototype.delete=Hd,mr.prototype.get=Gd,mr.prototype.has=Ty,mr.prototype.set=fu;function ti(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function a_(){this.size=0,this.__data__={hash:new zr,map:new(na||mr),string:new zr}}function w0(y){var w=ju(this,y).delete(y);return this.size-=w?1:0,w}function i_(y){return ju(this,y).get(y)}function N0(y){return ju(this,y).has(y)}function Zl(y,w){var M=ju(this,y),U=M.size;return M.set(y,w),this.size+=M.size==U?0:1,this}ti.prototype.clear=a_,ti.prototype.delete=w0,ti.prototype.get=i_,ti.prototype.has=N0,ti.prototype.set=Zl;function go(y){var w=-1,M=y==null?0:y.length;for(this.__data__=new ti;++w<M;)this.add(y[w])}function hp(y){return this.__data__.set(y,c),this}function S0(y){return this.__data__.has(y)}go.prototype.add=go.prototype.push=hp,go.prototype.has=S0;function qa(y){var w=this.__data__=new mr(y);this.size=w.size}function _0(){this.__data__=new mr,this.size=0}function fp(y){var w=this.__data__,M=w.delete(y);return this.size=w.size,M}function ky(y){return this.__data__.get(y)}function C0(y){return this.__data__.has(y)}function pp(y,w){var M=this.__data__;if(M instanceof mr){var U=M.__data__;if(!na||U.length<i-1)return U.push([y,w]),this.size=++M.size,this;M=this.__data__=new ti(U)}return M.set(y,w),this.size=M.size,this}qa.prototype.clear=_0,qa.prototype.delete=fp,qa.prototype.get=ky,qa.prototype.has=C0,qa.prototype.set=pp;function Ay(y,w){var M=sn(y),U=!M&&ko(y),re=!M&&!U&&vl(y),ve=!M&&!U&&!re&&Iu(y),Pe=M||U||re||ve,Be=Pe?Xo(y.length,y0):[],Ke=Be.length;for(var ft in y)(w||Yn.call(y,ft))&&!(Pe&&(ft=="length"||re&&(ft=="offset"||ft=="parent")||ve&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||bs(ft,Ke)))&&Be.push(ft);return Be}function pu(y){var w=y.length;return w?y[Sp(0,w-1)]:n}function T0(y,w){return vh(ra(y),xs(w,0,y.length))}function k0(y){return vh(ra(y))}function Bs(y,w,M){(M!==n&&!li(y[w],M)||M===n&&!(w in y))&&ys(y,w,M)}function ec(y,w,M){var U=y[w];(!(Yn.call(y,w)&&li(U,M))||M===n&&!(w in y))&&ys(y,w,M)}function mu(y,w){for(var M=y.length;M--;)if(li(y[M][0],w))return M;return-1}function al(y,w,M,U){return xo(y,function(re,ve,Pe){w(U,re,M(re),Pe)}),U}function yo(y,w){return y&&ai(w,oa(w),y)}function Wd(y,w){return y&&ai(w,fa(w),y)}function ys(y,w,M){w=="__proto__"&&$d?$d(y,w,{configurable:!0,enumerable:!0,value:M,writable:!0}):y[w]=M}function Kd(y,w){for(var M=-1,U=w.length,re=rt(U),ve=y==null;++M<U;)re[M]=ve?n:Oh(y,w[M]);return re}function xs(y,w,M){return y===y&&(M!==n&&(y=y<=M?y:M),w!==n&&(y=y>=w?y:w)),y}function Ea(y,w,M,U,re,ve){var Pe,Be=w&p,Ke=w&g,ft=w&x;if(M&&(Pe=re?M(y,U,re,ve):M(y)),Pe!==n)return Pe;if(!Dr(y))return y;var mt=sn(y);if(mt){if(Pe=tx(y),!Be)return ra(y,Pe)}else{var yt=ha(y),Et=yt==ye||yt==le;if(vl(y))return Wy(y,Be);if(yt==ee||yt==Ue||Et&&!re){if(Pe=Ke||Et?{}:nx(y),!Be)return Ke?oh(y,Wd(Pe,y)):Ep(y,yo(Pe,y))}else{if(!tr[yt])return re?y:{};Pe=rx(y,yt,Be)}}ve||(ve=new qa);var $t=ve.get(y);if($t)return $t;ve.set(y,Pe),H1(y)?y.forEach(function(en){Pe.add(Ea(en,w,M,en,y,ve))}):tm(y)&&y.forEach(function(en,Pn){Pe.set(Pn,Ea(en,w,M,Pn,y,ve))});var Zt=ft?Ke?Mp:Op:Ke?fa:oa,jn=mt?n:Zt(y);return Vi(jn||y,function(en,Pn){jn&&(Pn=en,en=y[Pn]),ec(Pe,Pn,Ea(en,w,M,Pn,y,ve))}),Pe}function A0(y){var w=oa(y);return function(M){return Ey(M,y,w)}}function Ey(y,w,M){var U=M.length;if(y==null)return!U;for(y=Bn(y);U--;){var re=M[U],ve=w[re],Pe=y[re];if(Pe===n&&!(re in y)||!ve(Pe))return!1}return!0}function tc(y,w,M){if(typeof y!="function")throw new ji(o);return Nu(function(){y.apply(n,M)},w)}function il(y,w,M,U){var re=-1,ve=Qf,Pe=!0,Be=y.length,Ke=[],ft=w.length;if(!Be)return Ke;M&&(w=kr(w,vi(M))),U?(ve=fy,Pe=!1):w.length>=i&&(ve=au,Pe=!1,w=new go(w));e:for(;++re<Be;){var mt=y[re],yt=M==null?mt:M(mt);if(mt=U||mt!==0?mt:0,Pe&&yt===yt){for(var Et=ft;Et--;)if(w[Et]===yt)continue e;Ke.push(mt)}else ve(w,yt,U)||Ke.push(mt)}return Ke}var xo=Xy(Pa),mp=Xy(yu,!0);function Py(y,w){var M=!0;return xo(y,function(U,re,ve){return M=!!w(U,re,ve),M}),M}function vs(y,w,M){for(var U=-1,re=y.length;++U<re;){var ve=y[U],Pe=w(ve);if(Pe!=null&&(Be===n?Pe===Pe&&!Ha(Pe):M(Pe,Be)))var Be=Pe,Ke=ve}return Ke}function yn(y,w,M,U){var re=y.length;for(M=dn(M),M<0&&(M=-M>re?0:re+M),U=U===n||U>re?re:dn(U),U<0&&(U+=re),U=M>U?0:Ys(U);M<U;)y[M++]=w;return y}function nr(y,w){var M=[];return xo(y,function(U,re,ve){w(U,re,ve)&&M.push(U)}),M}function An(y,w,M,U,re){var ve=-1,Pe=y.length;for(M||(M=wo),re||(re=[]);++ve<Pe;){var Be=y[ve];w>0&&M(Be)?w>1?An(Be,w-1,M,U,re):fo(re,Be):U||(re[re.length]=Be)}return re}var gu=lc(),nc=lc(!0);function Pa(y,w){return y&&gu(y,w,oa)}function yu(y,w){return y&&nc(y,w,oa)}function sl(y,w){return Fs(w,function(M){return js(y[M])})}function Xi(y,w){w=bo(w,y);for(var M=0,U=w.length;y!=null&&M<U;)y=y[Xn(w[M++])];return M&&M==U?y:n}function E0(y,w,M){var U=w(y);return sn(y)?U:fo(U,M(y))}function En(y){return y==null?y===n?_e:ue:za&&za in Bn(y)?J0(y):a1(y)}function Yd(y,w){return y>w}function Dy(y,w){return y!=null&&Yn.call(y,w)}function P0(y,w){return y!=null&&w in Bn(y)}function D0(y,w,M){return y>=Ar(w,M)&&y<Nr(w,M)}function Oy(y,w,M){for(var U=M?fy:Qf,re=y[0].length,ve=y.length,Pe=ve,Be=rt(ve),Ke=1/0,ft=[];Pe--;){var mt=y[Pe];Pe&&w&&(mt=kr(mt,vi(w))),Ke=Ar(mt.length,Ke),Be[Pe]=!M&&(w||re>=120&&mt.length>=120)?new go(Pe&&mt):n}mt=y[0];var yt=-1,Et=Be[0];e:for(;++yt<re&&ft.length<Ke;){var $t=mt[yt],Zt=w?w($t):$t;if($t=M||$t!==0?$t:0,!(Et?au(Et,Zt):U(ft,Zt,M))){for(Pe=ve;--Pe;){var jn=Be[Pe];if(!(jn?au(jn,Zt):U(y[Pe],Zt,M)))continue e}Et&&Et.push(Zt),ft.push($t)}}return ft}function My(y,w,M,U){return Pa(y,function(re,ve,Pe){w(U,M(re),ve,Pe)}),U}function rc(y,w,M){w=bo(w,y),y=wu(y,w);var U=y==null?y:y[Xn(Da(w))];return U==null?n:Xa(U,y,M)}function gp(y){return Lr(y)&&En(y)==Ue}function ni(y){return Lr(y)&&En(y)==ge}function Xr(y){return Lr(y)&&En(y)==Ce}function ac(y,w,M,U,re){return y===w?!0:y==null||w==null||!Lr(y)&&!Lr(w)?y!==y&&w!==w:Qd(y,w,M,U,ac,re)}function Qd(y,w,M,U,re,ve){var Pe=sn(y),Be=sn(w),Ke=Pe?ze:ha(y),ft=Be?ze:ha(w);Ke=Ke==Ue?ee:Ke,ft=ft==Ue?ee:ft;var mt=Ke==ee,yt=ft==ee,Et=Ke==ft;if(Et&&vl(y)){if(!vl(w))return!1;Pe=!0,mt=!1}if(Et&&!mt)return ve||(ve=new qa),Pe||Iu(y)?Q0(y,w,M,U,re,ve):X0(y,w,Ke,M,U,re,ve);if(!(M&b)){var $t=mt&&Yn.call(y,"__wrapped__"),Zt=yt&&Yn.call(w,"__wrapped__");if($t||Zt){var jn=$t?y.value():y,en=Zt?w.value():w;return ve||(ve=new qa),re(jn,en,M,U,ve)}}return Et?(ve||(ve=new qa),da(y,w,M,U,re,ve)):!1}function yp(y){return Lr(y)&&ha(y)==J}function Xd(y,w,M,U){var re=M.length,ve=re,Pe=!U;if(y==null)return!ve;for(y=Bn(y);re--;){var Be=M[re];if(Pe&&Be[2]?Be[1]!==y[Be[0]]:!(Be[0]in y))return!1}for(;++re<ve;){Be=M[re];var Ke=Be[0],ft=y[Ke],mt=Be[1];if(Pe&&Be[2]){if(ft===n&&!(Ke in y))return!1}else{var yt=new qa;if(U)var Et=U(ft,mt,Ke,y,w,yt);if(!(Et===n?ac(mt,ft,b|j,U,yt):Et))return!1}}return!0}function zs(y){if(!Dr(y)||Bp(y))return!1;var w=js(y)?wy:Nn;return w.test(So(y))}function xp(y){return Lr(y)&&En(y)==Fe}function Iy(y){return Lr(y)&&ha(y)==xe}function Ry(y){return Lr(y)&&fc(y.length)&&!!or[En(y)]}function Ly(y){return typeof y=="function"?y:y==null?et:typeof y=="object"?sn(y)?jp(y[0],y[1]):$y(y):zn(y)}function vp(y){if(!gr(y))return Ki(y);var w=[];for(var M in Bn(y))Yn.call(y,M)&&M!="constructor"&&w.push(M);return w}function O0(y){if(!Dr(y))return ul(y);var w=gr(y),M=[];for(var U in y)U=="constructor"&&(w||!Yn.call(y,U))||M.push(U);return M}function bp(y,w){return y<w}function Fy(y,w){var M=-1,U=ia(y)?rt(y.length):[];return xo(y,function(re,ve,Pe){U[++M]=w(re,ve,Pe)}),U}function $y(y){var w=Rp(y);return w.length==1&&w[0][2]?n1(w[0][0],w[0][1]):function(M){return M===y||Xd(M,y,w)}}function jp(y,w){return Fp(y)&&t1(w)?n1(Xn(y),w):function(M){var U=Oh(M,y);return U===n&&U===w?$u(M,y):ac(w,U,b|j)}}function Jd(y,w,M,U,re){y!==w&&gu(w,function(ve,Pe){if(re||(re=new qa),Dr(ve))s_(y,w,Pe,M,Jd,U,re);else{var Be=U?U(zp(y,Pe),ve,Pe+"",y,w,re):n;Be===n&&(Be=ve),Bs(y,Pe,Be)}},fa)}function s_(y,w,M,U,re,ve,Pe){var Be=zp(y,M),Ke=zp(w,M),ft=Pe.get(Ke);if(ft){Bs(y,M,ft);return}var mt=ve?ve(Be,Ke,M+"",y,w,Pe):n,yt=mt===n;if(yt){var Et=sn(Ke),$t=!Et&&vl(Ke),Zt=!Et&&!$t&&Iu(Ke);mt=Ke,Et||$t||Zt?sn(Be)?mt=Be:Vr(Be)?mt=ra(Be):$t?(yt=!1,mt=Wy(Ke,!0)):Zt?(yt=!1,mt=Yy(Ke,!0)):mt=[]:ts(Ke)||ko(Ke)?(mt=Be,ko(Be)?mt=K1(Be):(!Dr(Be)||js(Be))&&(mt=nx(Ke))):yt=!1}yt&&(Pe.set(Ke,mt),re(mt,Ke,U,ve,Pe),Pe.delete(Ke)),Bs(y,M,mt)}function By(y,w){var M=y.length;if(M)return w+=w<0?M:0,bs(w,M)?y[w]:n}function zy(y,w,M){w.length?w=kr(w,function(ve){return sn(ve)?function(Pe){return Xi(Pe,ve.length===1?ve[0]:ve)}:ve}):w=[et];var U=-1;w=kr(w,vi(qt()));var re=Fy(y,function(ve,Pe,Be){var Ke=kr(w,function(ft){return ft(ve)});return{criteria:Ke,index:++U,value:ve}});return l0(re,function(ve,Pe){return U0(ve,Pe,M)})}function M0(y,w){return wp(y,w,function(M,U){return $u(y,U)})}function wp(y,w,M){for(var U=-1,re=w.length,ve={};++U<re;){var Pe=w[U],Be=Xi(y,Pe);M(Be,Pe)&&vu(ve,bo(Pe,y),Be)}return ve}function I0(y){return function(w){return Xi(w,y)}}function Np(y,w,M,U){var re=U?gy:nu,ve=-1,Pe=w.length,Be=y;for(y===w&&(w=ra(w)),M&&(Be=kr(y,vi(M)));++ve<Pe;)for(var Ke=0,ft=w[ve],mt=M?M(ft):ft;(Ke=re(Be,mt,Ke,U))>-1;)Be!==y&&op.call(Be,Ke,1),op.call(y,Ke,1);return y}function qy(y,w){for(var M=y?w.length:0,U=M-1;M--;){var re=w[M];if(M==U||re!==ve){var ve=re;bs(re)?op.call(y,re,1):nh(y,re)}}return y}function Sp(y,w){return y+po(Sy()*(w-y+1))}function R0(y,w,M,U){for(var re=-1,ve=Nr(du((w-y)/(M||1)),0),Pe=rt(ve);ve--;)Pe[U?ve:++re]=y,y+=M;return Pe}function Uy(y,w){var M="";if(!y||w<1||w>ie)return M;do w%2&&(M+=y),w=po(w/2),w&&(y+=y);while(w);return M}function mn(y,w){return yh(ax(y,w,et),y+"")}function xu(y){return pu(zu(y))}function _p(y,w){var M=zu(y);return vh(M,xs(w,0,M.length))}function vu(y,w,M,U){if(!Dr(y))return y;w=bo(w,y);for(var re=-1,ve=w.length,Pe=ve-1,Be=y;Be!=null&&++re<ve;){var Ke=Xn(w[re]),ft=M;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return y;if(re!=Pe){var mt=Be[Ke];ft=U?U(mt,Ke,Be):n,ft===n&&(ft=Dr(mt)?mt:bs(w[re+1])?[]:{})}ec(Be,Ke,ft),Be=Be[Ke]}return y}var Zd=hu?function(y,w){return hu.set(y,w),y}:et,eh=$d?function(y,w){return $d(y,"toString",{configurable:!0,enumerable:!1,value:Ze(w),writable:!0})}:et;function L0(y){return vh(zu(y))}function Ni(y,w,M){var U=-1,re=y.length;w<0&&(w=-w>re?0:re+w),M=M>re?re:M,M<0&&(M+=re),re=w>M?0:M-w>>>0,w>>>=0;for(var ve=rt(re);++U<re;)ve[U]=y[U+w];return ve}function F0(y,w){var M;return xo(y,function(U,re,ve){return M=w(U,re,ve),!M}),!!M}function th(y,w,M){var U=0,re=y==null?U:y.length;if(typeof w=="number"&&w===w&&re<=K){for(;U<re;){var ve=U+re>>>1,Pe=y[ve];Pe!==null&&!Ha(Pe)&&(M?Pe<=w:Pe<w)?U=ve+1:re=ve}return re}return Cp(y,w,et,M)}function Cp(y,w,M,U){var re=0,ve=y==null?0:y.length;if(ve===0)return 0;w=M(w);for(var Pe=w!==w,Be=w===null,Ke=Ha(w),ft=w===n;re<ve;){var mt=po((re+ve)/2),yt=M(y[mt]),Et=yt!==n,$t=yt===null,Zt=yt===yt,jn=Ha(yt);if(Pe)var en=U||Zt;else ft?en=Zt&&(U||Et):Be?en=Zt&&Et&&(U||!$t):Ke?en=Zt&&Et&&!$t&&(U||!jn):$t||jn?en=!1:en=U?yt<=w:yt<w;en?re=mt+1:ve=mt}return Ar(ve,je)}function Vy(y,w){for(var M=-1,U=y.length,re=0,ve=[];++M<U;){var Pe=y[M],Be=w?w(Pe):Pe;if(!M||!li(Be,Ke)){var Ke=Be;ve[re++]=Pe===0?0:Pe}}return ve}function Tp(y){return typeof y=="number"?y:Ha(y)?B:+y}function ri(y){if(typeof y=="string")return y;if(sn(y))return kr(y,ri)+"";if(Ha(y))return rl?rl.call(y):"";var w=y+"";return w=="0"&&1/y==-1/0?"-0":w}function vo(y,w,M){var U=-1,re=Qf,ve=y.length,Pe=!0,Be=[],Ke=Be;if(M)Pe=!1,re=fy;else if(ve>=i){var ft=w?null:K0(y);if(ft)return ap(ft);Pe=!1,re=au,Ke=new go}else Ke=w?[]:Be;e:for(;++U<ve;){var mt=y[U],yt=w?w(mt):mt;if(mt=M||mt!==0?mt:0,Pe&&yt===yt){for(var Et=Ke.length;Et--;)if(Ke[Et]===yt)continue e;w&&Ke.push(yt),Be.push(mt)}else re(Ke,yt,M)||(Ke!==Be&&Ke.push(yt),Be.push(mt))}return Be}function nh(y,w){return w=bo(w,y),y=wu(y,w),y==null||delete y[Xn(Da(w))]}function Hy(y,w,M,U){return vu(y,w,M(Xi(y,w)),U)}function rh(y,w,M,U){for(var re=y.length,ve=U?re:-1;(U?ve--:++ve<re)&&w(y[ve],ve,y););return M?Ni(y,U?0:ve,U?ve+1:re):Ni(y,U?ve+1:0,U?re:ve)}function $0(y,w){var M=y;return M instanceof vn&&(M=M.value()),py(w,function(U,re){return re.func.apply(re.thisArg,fo([U],re.args))},M)}function ah(y,w,M){var U=y.length;if(U<2)return U?vo(y[0]):[];for(var re=-1,ve=rt(U);++re<U;)for(var Pe=y[re],Be=-1;++Be<U;)Be!=re&&(ve[re]=il(ve[re]||Pe,y[Be],w,M));return vo(An(ve,1),w,M)}function Gy(y,w,M){for(var U=-1,re=y.length,ve=w.length,Pe={};++U<re;){var Be=U<ve?w[U]:n;M(Pe,y[U],Be)}return Pe}function kp(y){return Vr(y)?y:[]}function ih(y){return typeof y=="function"?y:et}function bo(y,w){return sn(y)?y:Fp(y,w)?[y]:Hs(Qn(y))}var B0=mn;function ol(y,w,M){var U=y.length;return M=M===n?U:M,!w&&M>=U?y:Ni(y,w,M)}var z0=lp||function(y){return Yr.clearTimeout(y)};function Wy(y,w){if(w)return y.slice();var M=y.length,U=Gl?Gl(M):new y.constructor(M);return y.copy(U),U}function ic(y){var w=new y.constructor(y.byteLength);return new uu(w).set(new uu(y)),w}function Ky(y,w){var M=w?ic(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.byteLength)}function Ap(y){var w=new y.constructor(y.source,gt.exec(y));return w.lastIndex=y.lastIndex,w}function q0(y){return Xl?Bn(Xl.call(y)):{}}function Yy(y,w){var M=w?ic(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.length)}function sh(y,w){if(y!==w){var M=y!==n,U=y===null,re=y===y,ve=Ha(y),Pe=w!==n,Be=w===null,Ke=w===w,ft=Ha(w);if(!Be&&!ft&&!ve&&y>w||ve&&Pe&&Ke&&!Be&&!ft||U&&Pe&&Ke||!M&&Ke||!re)return 1;if(!U&&!ve&&!ft&&y<w||ft&&M&&re&&!U&&!ve||Be&&M&&re||!Pe&&re||!Ke)return-1}return 0}function U0(y,w,M){for(var U=-1,re=y.criteria,ve=w.criteria,Pe=re.length,Be=M.length;++U<Pe;){var Ke=sh(re[U],ve[U]);if(Ke){if(U>=Be)return Ke;var ft=M[U];return Ke*(ft=="desc"?-1:1)}}return y.index-w.index}function Qy(y,w,M,U){for(var re=-1,ve=y.length,Pe=M.length,Be=-1,Ke=w.length,ft=Nr(ve-Pe,0),mt=rt(Ke+ft),yt=!U;++Be<Ke;)mt[Be]=w[Be];for(;++re<Pe;)(yt||re<ve)&&(mt[M[re]]=y[re]);for(;ft--;)mt[Be++]=y[re++];return mt}function V0(y,w,M,U){for(var re=-1,ve=y.length,Pe=-1,Be=M.length,Ke=-1,ft=w.length,mt=Nr(ve-Be,0),yt=rt(mt+ft),Et=!U;++re<mt;)yt[re]=y[re];for(var $t=re;++Ke<ft;)yt[$t+Ke]=w[Ke];for(;++Pe<Be;)(Et||re<ve)&&(yt[$t+M[Pe]]=y[re++]);return yt}function ra(y,w){var M=-1,U=y.length;for(w||(w=rt(U));++M<U;)w[M]=y[M];return w}function ai(y,w,M,U){var re=!M;M||(M={});for(var ve=-1,Pe=w.length;++ve<Pe;){var Be=w[ve],Ke=U?U(M[Be],y[Be],Be,M,y):n;Ke===n&&(Ke=y[Be]),re?ys(M,Be,Ke):ec(M,Be,Ke)}return M}function Ep(y,w){return ai(y,fh(y),w)}function oh(y,w){return ai(y,Lp(y),w)}function sc(y,w){return function(M,U){var re=sn(M)?US:al,ve=w?w():{};return re(M,y,qt(U,2),ve)}}function oc(y){return mn(function(w,M){var U=-1,re=M.length,ve=re>1?M[re-1]:n,Pe=re>2?M[2]:n;for(ve=y.length>3&&typeof ve=="function"?(re--,ve):n,Pe&&Va(M[0],M[1],Pe)&&(ve=re<3?n:ve,re=1),w=Bn(w);++U<re;){var Be=M[U];Be&&y(w,Be,U,ve)}return w})}function Xy(y,w){return function(M,U){if(M==null)return M;if(!ia(M))return y(M,U);for(var re=M.length,ve=w?re:-1,Pe=Bn(M);(w?ve--:++ve<re)&&U(Pe[ve],ve,Pe)!==!1;);return M}}function lc(y){return function(w,M,U){for(var re=-1,ve=Bn(w),Pe=U(w),Be=Pe.length;Be--;){var Ke=Pe[y?Be:++re];if(M(ve[Ke],Ke,ve)===!1)break}return w}}function H0(y,w,M){var U=w&S,re=Ji(y);function ve(){var Pe=this&&this!==Yr&&this instanceof ve?re:y;return Pe.apply(U?M:this,arguments)}return ve}function Si(y){return function(w){w=Qn(w);var M=Jo(w)?Hi(w):n,U=M?M[0]:w.charAt(0),re=M?ol(M,1).join(""):w.slice(1);return U[y]()+re}}function Ua(y){return function(w){return py(A(Ao(w).replace(Pd,"")),y,"")}}function Ji(y){return function(){var w=arguments;switch(w.length){case 0:return new y;case 1:return new y(w[0]);case 2:return new y(w[0],w[1]);case 3:return new y(w[0],w[1],w[2]);case 4:return new y(w[0],w[1],w[2],w[3]);case 5:return new y(w[0],w[1],w[2],w[3],w[4]);case 6:return new y(w[0],w[1],w[2],w[3],w[4],w[5]);case 7:return new y(w[0],w[1],w[2],w[3],w[4],w[5],w[6])}var M=wi(y.prototype),U=y.apply(M,w);return Dr(U)?U:M}}function G0(y,w,M){var U=Ji(y);function re(){for(var ve=arguments.length,Pe=rt(ve),Be=ve,Ke=uc(re);Be--;)Pe[Be]=arguments[Be];var ft=ve<3&&Pe[0]!==Ke&&Pe[ve-1]!==Ke?[]:Zo(Pe,Ke);if(ve-=ft.length,ve<M)return Jy(y,w,qr,re.placeholder,n,Pe,ft,n,n,M-ve);var mt=this&&this!==Yr&&this instanceof re?U:y;return Xa(mt,this,Pe)}return re}function jo(y){return function(w,M,U){var re=Bn(w);if(!ia(w)){var ve=qt(M,3);w=oa(w),M=function(Be){return ve(re[Be],Be,re)}}var Pe=y(w,M,U);return Pe>-1?re[ve?w[Pe]:Pe]:n}}function qs(y){return Sr(function(w){var M=w.length,U=M,re=ei.prototype.thru;for(y&&w.reverse();U--;){var ve=w[U];if(typeof ve!="function")throw new ji(o);if(re&&!Pe&&hh(ve)=="wrapper")var Pe=new ei([],!0)}for(U=Pe?U:M;++U<M;){ve=w[U];var Be=hh(ve),Ke=Be=="wrapper"?Ip(ve):n;Ke&&$p(Ke[0])&&Ke[1]==(I|C|k|L)&&!Ke[4].length&&Ke[9]==1?Pe=Pe[hh(Ke[0])].apply(Pe,Ke[3]):Pe=ve.length==1&&$p(ve)?Pe[Be]():Pe.thru(ve)}return function(){var ft=arguments,mt=ft[0];if(Pe&&ft.length==1&&sn(mt))return Pe.plant(mt).value();for(var yt=0,Et=M?w[yt].apply(this,ft):mt;++yt<M;)Et=w[yt].call(this,Et);return Et}})}function qr(y,w,M,U,re,ve,Pe,Be,Ke,ft){var mt=w&I,yt=w&S,Et=w&_,$t=w&(C|P),Zt=w&$,jn=Et?n:Ji(y);function en(){for(var Pn=arguments.length,qn=rt(Pn),Ns=Pn;Ns--;)qn[Ns]=arguments[Ns];if($t)var Ai=uc(en),Ss=QS(qn,Ai);if(U&&(qn=Qy(qn,U,re,$t)),ve&&(qn=V0(qn,ve,Pe,$t)),Pn-=Ss,$t&&Pn<ft){var la=Zo(qn,Ai);return Jy(y,w,qr,en.placeholder,M,qn,la,Be,Ke,ft-Pn)}var Eo=yt?M:this,pc=Et?Eo[y]:y;return Pn=qn.length,Be?qn=Vs(qn,Be):Zt&&Pn>1&&qn.reverse(),mt&&Ke<Pn&&(qn.length=Ke),this&&this!==Yr&&this instanceof en&&(pc=jn||Ji(pc)),pc.apply(Eo,qn)}return en}function lh(y,w){return function(M,U){return My(M,y,w(U),{})}}function bu(y,w){return function(M,U){var re;if(M===n&&U===n)return w;if(M!==n&&(re=M),U!==n){if(re===n)return U;typeof M=="string"||typeof U=="string"?(M=ri(M),U=ri(U)):(M=Tp(M),U=Tp(U)),re=y(M,U)}return re}}function ch(y){return Sr(function(w){return w=kr(w,vi(qt())),mn(function(M){var U=this;return y(w,function(re){return Xa(re,U,M)})})})}function uh(y,w){w=w===n?" ":ri(w);var M=w.length;if(M<2)return M?Uy(w,y):w;var U=Uy(w,du(y/$s(w)));return Jo(w)?ol(Hi(U),0,y).join(""):U.slice(0,y)}function W0(y,w,M,U){var re=w&S,ve=Ji(y);function Pe(){for(var Be=-1,Ke=arguments.length,ft=-1,mt=U.length,yt=rt(mt+Ke),Et=this&&this!==Yr&&this instanceof Pe?ve:y;++ft<mt;)yt[ft]=U[ft];for(;Ke--;)yt[ft++]=arguments[++Be];return Xa(Et,re?M:this,yt)}return Pe}function ll(y){return function(w,M,U){return U&&typeof U!="number"&&Va(w,M,U)&&(M=U=n),w=Ks(w),M===n?(M=w,w=0):M=Ks(M),U=U===n?w<M?1:-1:Ks(U),R0(w,M,U,y)}}function cc(y){return function(w,M){return typeof w=="string"&&typeof M=="string"||(w=ns(w),M=ns(M)),y(w,M)}}function Jy(y,w,M,U,re,ve,Pe,Be,Ke,ft){var mt=w&C,yt=mt?Pe:n,Et=mt?n:Pe,$t=mt?ve:n,Zt=mt?n:ve;w|=mt?k:E,w&=~(mt?E:k),w&T||(w&=-4);var jn=[y,w,re,$t,yt,Zt,Et,Be,Ke,ft],en=M.apply(n,jn);return $p(y)&&qp(en,jn),en.placeholder=U,Up(en,y,w)}function Pp(y){var w=Qr[y];return function(M,U){if(M=ns(M),U=U==null?0:Ar(dn(U),292),U&&Bd(M)){var re=(Qn(M)+"e").split("e"),ve=w(re[0]+"e"+(+re[1]+U));return re=(Qn(ve)+"e").split("e"),+(re[0]+"e"+(+re[1]-U))}return w(M)}}var K0=kn&&1/ap(new kn([,-0]))[1]==G?function(y){return new kn(y)}:Mt;function dh(y){return function(w){var M=ha(w);return M==J?rp(w):M==xe?XS(w):YS(w,y(w))}}function Us(y,w,M,U,re,ve,Pe,Be){var Ke=w&_;if(!Ke&&typeof y!="function")throw new ji(o);var ft=U?U.length:0;if(ft||(w&=-97,U=re=n),Pe=Pe===n?Pe:Nr(dn(Pe),0),Be=Be===n?Be:dn(Be),ft-=re?re.length:0,w&E){var mt=U,yt=re;U=re=n}var Et=Ke?n:Ip(y),$t=[y,w,M,U,re,mt,yt,ve,Pe,Be];if(Et&&gh($t,Et),y=$t[0],w=$t[1],M=$t[2],U=$t[3],re=$t[4],Be=$t[9]=$t[9]===n?Ke?0:y.length:Nr($t[9]-ft,0),!Be&&w&(C|P)&&(w&=-25),!w||w==S)var Zt=H0(y,w,M);else w==C||w==P?Zt=G0(y,w,Be):(w==k||w==(S|k))&&!re.length?Zt=W0(y,w,M,U):Zt=qr.apply(n,$t);var jn=Et?Zd:qp;return Up(jn(Zt,$t),y,w)}function Dp(y,w,M,U){return y===n||li(y,lu[M])&&!Yn.call(U,M)?w:y}function Zy(y,w,M,U,re,ve){return Dr(y)&&Dr(w)&&(ve.set(w,y),Jd(y,w,n,Zy,ve),ve.delete(w)),y}function Y0(y){return ts(y)?n:y}function Q0(y,w,M,U,re,ve){var Pe=M&b,Be=y.length,Ke=w.length;if(Be!=Ke&&!(Pe&&Ke>Be))return!1;var ft=ve.get(y),mt=ve.get(w);if(ft&&mt)return ft==w&&mt==y;var yt=-1,Et=!0,$t=M&j?new go:n;for(ve.set(y,w),ve.set(w,y);++yt<Be;){var Zt=y[yt],jn=w[yt];if(U)var en=Pe?U(jn,Zt,yt,w,y,ve):U(Zt,jn,yt,y,w,ve);if(en!==n){if(en)continue;Et=!1;break}if($t){if(!my(w,function(Pn,qn){if(!au($t,qn)&&(Zt===Pn||re(Zt,Pn,M,U,ve)))return $t.push(qn)})){Et=!1;break}}else if(!(Zt===jn||re(Zt,jn,M,U,ve))){Et=!1;break}}return ve.delete(y),ve.delete(w),Et}function X0(y,w,M,U,re,ve,Pe){switch(M){case de:if(y.byteLength!=w.byteLength||y.byteOffset!=w.byteOffset)return!1;y=y.buffer,w=w.buffer;case ge:return!(y.byteLength!=w.byteLength||!ve(new uu(y),new uu(w)));case be:case Ce:case ae:return li(+y,+w);case me:return y.name==w.name&&y.message==w.message;case Fe:case ne:return y==w+"";case J:var Be=rp;case xe:var Ke=U&b;if(Be||(Be=ap),y.size!=w.size&&!Ke)return!1;var ft=Pe.get(y);if(ft)return ft==w;U|=j,Pe.set(y,w);var mt=Q0(Be(y),Be(w),U,re,ve,Pe);return Pe.delete(y),mt;case oe:if(Xl)return Xl.call(y)==Xl.call(w)}return!1}function da(y,w,M,U,re,ve){var Pe=M&b,Be=Op(y),Ke=Be.length,ft=Op(w),mt=ft.length;if(Ke!=mt&&!Pe)return!1;for(var yt=Ke;yt--;){var Et=Be[yt];if(!(Pe?Et in w:Yn.call(w,Et)))return!1}var $t=ve.get(y),Zt=ve.get(w);if($t&&Zt)return $t==w&&Zt==y;var jn=!0;ve.set(y,w),ve.set(w,y);for(var en=Pe;++yt<Ke;){Et=Be[yt];var Pn=y[Et],qn=w[Et];if(U)var Ns=Pe?U(qn,Pn,Et,w,y,ve):U(Pn,qn,Et,y,w,ve);if(!(Ns===n?Pn===qn||re(Pn,qn,M,U,ve):Ns)){jn=!1;break}en||(en=Et=="constructor")}if(jn&&!en){var Ai=y.constructor,Ss=w.constructor;Ai!=Ss&&"constructor"in y&&"constructor"in w&&!(typeof Ai=="function"&&Ai instanceof Ai&&typeof Ss=="function"&&Ss instanceof Ss)&&(jn=!1)}return ve.delete(y),ve.delete(w),jn}function Sr(y){return yh(ax(y,n,si),y+"")}function Op(y){return E0(y,oa,fh)}function Mp(y){return E0(y,fa,Lp)}var Ip=hu?function(y){return hu.get(y)}:Mt;function hh(y){for(var w=y.name+"",M=Yi[w],U=Yn.call(Yi,w)?M.length:0;U--;){var re=M[U],ve=re.func;if(ve==null||ve==y)return re.name}return w}function uc(y){var w=Yn.call(he,"placeholder")?he:y;return w.placeholder}function qt(){var y=he.iteratee||Kt;return y=y===Kt?Ly:y,arguments.length?y(arguments[0],arguments[1]):y}function ju(y,w){var M=y.__data__;return No(w)?M[typeof w=="string"?"string":"hash"]:M.map}function Rp(y){for(var w=oa(y),M=w.length;M--;){var U=w[M],re=y[U];w[M]=[U,re,t1(re)]}return w}function cl(y,w){var M=xy(y,w);return zs(M)?M:n}function J0(y){var w=Yn.call(y,za),M=y[za];try{y[za]=n;var U=!0}catch{}var re=Ba.call(y);return U&&(w?y[za]=M:delete y[za]),re}var fh=tl?function(y){return y==null?[]:(y=Bn(y),Fs(tl(y),function(w){return Wl.call(y,w)}))}:U_,Lp=tl?function(y){for(var w=[];y;)fo(w,fh(y)),y=Ld(y);return w}:U_,ha=En;(zd&&ha(new zd(new ArrayBuffer(1)))!=de||na&&ha(new na)!=J||Er&&ha(Er.resolve())!=Ne||kn&&ha(new kn)!=xe||gs&&ha(new gs)!=De)&&(ha=function(y){var w=En(y),M=w==ee?y.constructor:n,U=M?So(M):"";if(U)switch(U){case x0:return de;case v0:return J;case qd:return Ne;case Ud:return xe;case b0:return De}return w});function Z0(y,w,M){for(var U=-1,re=M.length;++U<re;){var ve=M[U],Pe=ve.size;switch(ve.type){case"drop":y+=Pe;break;case"dropRight":w-=Pe;break;case"take":w=Ar(w,y+Pe);break;case"takeRight":y=Nr(y,w-Pe);break}}return{start:y,end:w}}function ex(y){var w=y.match(Ya);return w?w[1].split(Br):[]}function ph(y,w,M){w=bo(w,y);for(var U=-1,re=w.length,ve=!1;++U<re;){var Pe=Xn(w[U]);if(!(ve=y!=null&&M(y,Pe)))break;y=y[Pe]}return ve||++U!=re?ve:(re=y==null?0:y.length,!!re&&fc(re)&&bs(Pe,re)&&(sn(y)||ko(y)))}function tx(y){var w=y.length,M=new y.constructor(w);return w&&typeof y[0]=="string"&&Yn.call(y,"index")&&(M.index=y.index,M.input=y.input),M}function nx(y){return typeof y.constructor=="function"&&!gr(y)?wi(Ld(y)):{}}function rx(y,w,M){var U=y.constructor;switch(w){case ge:return ic(y);case be:case Ce:return new U(+y);case de:return Ky(y,M);case fe:case Ee:case Ye:case $e:case We:case it:case wt:case we:case Xe:return Yy(y,M);case J:return new U;case ae:case ne:return new U(y);case Fe:return Ap(y);case xe:return new U;case oe:return q0(y)}}function e1(y,w){var M=w.length;if(!M)return y;var U=M-1;return w[U]=(M>1?"& ":"")+w[U],w=w.join(M>2?", ":" "),y.replace(va,`{
/* [wrapped with `+w+`] */
`)}function wo(y){return sn(y)||ko(y)||!!(Ja&&y&&y[Ja])}function bs(y,w){var M=typeof y;return w=w??ie,!!w&&(M=="number"||M!="symbol"&&ba.test(y))&&y>-1&&y%1==0&&y<w}function Va(y,w,M){if(!Dr(M))return!1;var U=typeof w;return(U=="number"?ia(M)&&bs(w,M.length):U=="string"&&w in M)?li(M[w],y):!1}function Fp(y,w){if(sn(y))return!1;var M=typeof y;return M=="number"||M=="symbol"||M=="boolean"||y==null||Ha(y)?!0:vt.test(y)||!Kn.test(y)||w!=null&&y in Bn(w)}function No(y){var w=typeof y;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?y!=="__proto__":y===null}function $p(y){var w=hh(y),M=he[w];if(typeof M!="function"||!(w in vn.prototype))return!1;if(y===M)return!0;var U=Ip(M);return!!U&&y===U[0]}function Bp(y){return!!jy&&jy in y}var mh=Id?js:V_;function gr(y){var w=y&&y.constructor,M=typeof w=="function"&&w.prototype||lu;return y===M}function t1(y){return y===y&&!Dr(y)}function n1(y,w){return function(M){return M==null?!1:M[y]===w&&(w!==n||y in Bn(M))}}function r1(y){var w=Th(y,function(U){return M.size===d&&M.clear(),U}),M=w.cache;return w}function gh(y,w){var M=y[1],U=w[1],re=M|U,ve=re<(S|_|I),Pe=U==I&&M==C||U==I&&M==L&&y[7].length<=w[8]||U==(I|L)&&w[7].length<=w[8]&&M==C;if(!(ve||Pe))return y;U&S&&(y[2]=w[2],re|=M&S?0:T);var Be=w[3];if(Be){var Ke=y[3];y[3]=Ke?Qy(Ke,Be,w[4]):Be,y[4]=Ke?Zo(y[3],f):w[4]}return Be=w[5],Be&&(Ke=y[5],y[5]=Ke?V0(Ke,Be,w[6]):Be,y[6]=Ke?Zo(y[5],f):w[6]),Be=w[7],Be&&(y[7]=Be),U&I&&(y[8]=y[8]==null?w[8]:Ar(y[8],w[8])),y[9]==null&&(y[9]=w[9]),y[0]=w[0],y[1]=re,y}function ul(y){var w=[];if(y!=null)for(var M in Bn(y))w.push(M);return w}function a1(y){return Ba.call(y)}function ax(y,w,M){return w=Nr(w===n?y.length-1:w,0),function(){for(var U=arguments,re=-1,ve=Nr(U.length-w,0),Pe=rt(ve);++re<ve;)Pe[re]=U[w+re];re=-1;for(var Be=rt(w+1);++re<w;)Be[re]=U[re];return Be[w]=M(Pe),Xa(y,this,Be)}}function wu(y,w){return w.length<2?y:Xi(y,Ni(w,0,-1))}function Vs(y,w){for(var M=y.length,U=Ar(w.length,M),re=ra(y);U--;){var ve=w[U];y[U]=bs(ve,M)?re[ve]:n}return y}function zp(y,w){if(!(w==="constructor"&&typeof y[w]=="function")&&w!="__proto__")return y[w]}var qp=xh(Zd),Nu=Ny||function(y,w){return Yr.setTimeout(y,w)},yh=xh(eh);function Up(y,w,M){var U=w+"";return yh(y,e1(U,i1(ex(U),M)))}function xh(y){var w=0,M=0;return function(){var U=mo(),re=V-(U-M);if(M=U,re>0){if(++w>=H)return arguments[0]}else w=0;return y.apply(n,arguments)}}function vh(y,w){var M=-1,U=y.length,re=U-1;for(w=w===n?U:w;++M<w;){var ve=Sp(M,re),Pe=y[ve];y[ve]=y[M],y[M]=Pe}return y.length=w,y}var Hs=r1(function(y){var w=[];return y.charCodeAt(0)===46&&w.push(""),y.replace(Dt,function(M,U,re,ve){w.push(re?ve.replace(Rn,"$1"):U||M)}),w});function Xn(y){if(typeof y=="string"||Ha(y))return y;var w=y+"";return w=="0"&&1/y==-1/0?"-0":w}function So(y){if(y!=null){try{return Rd.call(y)}catch{}try{return y+""}catch{}}return""}function i1(y,w){return Vi(Ie,function(M){var U="_."+M[0];w&M[1]&&!Qf(y,U)&&y.push(U)}),y.sort()}function aa(y){if(y instanceof vn)return y.clone();var w=new ei(y.__wrapped__,y.__chain__);return w.__actions__=ra(y.__actions__),w.__index__=y.__index__,w.__values__=y.__values__,w}function o_(y,w,M){(M?Va(y,w,M):w===n)?w=1:w=Nr(dn(w),0);var U=y==null?0:y.length;if(!U||w<1)return[];for(var re=0,ve=0,Pe=rt(du(U/w));re<U;)Pe[ve++]=Ni(y,re,re+=w);return Pe}function s1(y){for(var w=-1,M=y==null?0:y.length,U=0,re=[];++w<M;){var ve=y[w];ve&&(re[U++]=ve)}return re}function o1(){var y=arguments.length;if(!y)return[];for(var w=rt(y-1),M=arguments[0],U=y;U--;)w[U-1]=arguments[U];return fo(sn(M)?ra(M):[M],An(w,1))}var Pr=mn(function(y,w){return Vr(y)?il(y,An(w,1,Vr,!0)):[]}),ii=mn(function(y,w){var M=Da(w);return Vr(M)&&(M=n),Vr(y)?il(y,An(w,1,Vr,!0),qt(M,2)):[]}),_o=mn(function(y,w){var M=Da(w);return Vr(M)&&(M=n),Vr(y)?il(y,An(w,1,Vr,!0),n,M):[]});function l1(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:dn(w),Ni(y,w<0?0:w,U)):[]}function c1(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:dn(w),w=U-w,Ni(y,0,w<0?0:w)):[]}function l_(y,w){return y&&y.length?rh(y,qt(w,3),!0,!0):[]}function ix(y,w){return y&&y.length?rh(y,qt(w,3),!0):[]}function _i(y,w,M,U){var re=y==null?0:y.length;return re?(M&&typeof M!="number"&&Va(y,w,M)&&(M=0,U=re),yn(y,w,M,U)):[]}function Zi(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=M==null?0:dn(M);return re<0&&(re=Nr(U+re,0)),Xf(y,qt(w,3),re)}function sx(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=U-1;return M!==n&&(re=dn(M),re=M<0?Nr(U+re,0):Ar(re,U-1)),Xf(y,qt(w,3),re,!0)}function si(y){var w=y==null?0:y.length;return w?An(y,1):[]}function u1(y){var w=y==null?0:y.length;return w?An(y,G):[]}function dl(y,w){var M=y==null?0:y.length;return M?(w=w===n?1:dn(w),An(y,w)):[]}function dc(y){for(var w=-1,M=y==null?0:y.length,U={};++w<M;){var re=y[w];U[re[0]]=re[1]}return U}function Co(y){return y&&y.length?y[0]:n}function ox(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=M==null?0:dn(M);return re<0&&(re=Nr(U+re,0)),nu(y,w,re)}function lx(y){var w=y==null?0:y.length;return w?Ni(y,0,-1):[]}var Gs=mn(function(y){var w=kr(y,kp);return w.length&&w[0]===y[0]?Oy(w):[]}),d1=mn(function(y){var w=Da(y),M=kr(y,kp);return w===Da(M)?w=n:M.pop(),M.length&&M[0]===y[0]?Oy(M,qt(w,2)):[]}),Su=mn(function(y){var w=Da(y),M=kr(y,kp);return w=typeof w=="function"?w:n,w&&M.pop(),M.length&&M[0]===y[0]?Oy(M,n,w):[]});function bh(y,w){return y==null?"":Wi.call(y,w)}function Da(y){var w=y==null?0:y.length;return w?y[w-1]:n}function _u(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=U;return M!==n&&(re=dn(M),re=re<0?Nr(U+re,0):Ar(re,U-1)),w===w?bi(y,w,re):Xf(y,ru,re,!0)}function h1(y,w){return y&&y.length?By(y,dn(w)):n}var f1=mn(Cu);function Cu(y,w){return y&&y.length&&w&&w.length?Np(y,w):y}function p1(y,w,M){return y&&y.length&&w&&w.length?Np(y,w,qt(M,2)):y}function Vp(y,w,M){return y&&y.length&&w&&w.length?Np(y,w,n,M):y}var m1=Sr(function(y,w){var M=y==null?0:y.length,U=Kd(y,w);return qy(y,kr(w,function(re){return bs(re,M)?+re:re}).sort(sh)),U});function c_(y,w){var M=[];if(!(y&&y.length))return M;var U=-1,re=[],ve=y.length;for(w=qt(w,3);++U<ve;){var Pe=y[U];w(Pe,U,y)&&(M.push(Pe),re.push(U))}return qy(y,re),M}function cx(y){return y==null?y:_y.call(y)}function rr(y,w,M){var U=y==null?0:y.length;return U?(M&&typeof M!="number"&&Va(y,w,M)?(w=0,M=U):(w=w==null?0:dn(w),M=M===n?U:dn(M)),Ni(y,w,M)):[]}function vr(y,w){return th(y,w)}function Sn(y,w,M){return Cp(y,w,qt(M,2))}function Fn(y,w){var M=y==null?0:y.length;if(M){var U=th(y,w);if(U<M&&li(y[U],w))return U}return-1}function ar(y,w){return th(y,w,!0)}function Ci(y,w,M){return Cp(y,w,qt(M,2),!0)}function hl(y,w){var M=y==null?0:y.length;if(M){var U=th(y,w,!0)-1;if(li(y[U],w))return U}return-1}function Tu(y){return y&&y.length?Vy(y):[]}function ux(y,w){return y&&y.length?Vy(y,qt(w,2)):[]}function To(y){var w=y==null?0:y.length;return w?Ni(y,1,w):[]}function Ur(y,w,M){return y&&y.length?(w=M||w===n?1:dn(w),Ni(y,0,w<0?0:w)):[]}function fl(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:dn(w),w=U-w,Ni(y,w<0?0:w,U)):[]}function hc(y,w){return y&&y.length?rh(y,qt(w,3),!1,!0):[]}function dx(y,w){return y&&y.length?rh(y,qt(w,3)):[]}var es=mn(function(y){return vo(An(y,1,Vr,!0))}),ku=mn(function(y){var w=Da(y);return Vr(w)&&(w=n),vo(An(y,1,Vr,!0),qt(w,2))}),jh=mn(function(y){var w=Da(y);return w=typeof w=="function"?w:n,vo(An(y,1,Vr,!0),n,w)});function oi(y){return y&&y.length?vo(y):[]}function hx(y,w){return y&&y.length?vo(y,qt(w,2)):[]}function fx(y,w){return w=typeof w=="function"?w:n,y&&y.length?vo(y,n,w):[]}function Au(y){if(!(y&&y.length))return[];var w=0;return y=Fs(y,function(M){if(Vr(M))return w=Nr(M.length,w),!0}),Xo(w,function(M){return kr(y,Jf(M))})}function wh(y,w){if(!(y&&y.length))return[];var M=Au(y);return w==null?M:kr(M,function(U){return Xa(w,n,U)})}var pl=mn(function(y,w){return Vr(y)?il(y,w):[]}),ja=mn(function(y){return ah(Fs(y,Vr))}),ml=mn(function(y){var w=Da(y);return Vr(w)&&(w=n),ah(Fs(y,Vr),qt(w,2))}),Eu=mn(function(y){var w=Da(y);return w=typeof w=="function"?w:n,ah(Fs(y,Vr),n,w)}),Pu=mn(Au);function px(y,w){return Gy(y||[],w||[],ec)}function mx(y,w){return Gy(y||[],w||[],vu)}var g1=mn(function(y){var w=y.length,M=w>1?y[w-1]:n;return M=typeof M=="function"?(y.pop(),M):n,wh(y,M)});function Du(y){var w=he(y);return w.__chain__=!0,w}function gx(y,w){return w(y),y}function Oa(y,w){return w(y)}var y1=Sr(function(y){var w=y.length,M=w?y[0]:0,U=this.__wrapped__,re=function(ve){return Kd(ve,y)};return w>1||this.__actions__.length||!(U instanceof vn)||!bs(M)?this.thru(re):(U=U.slice(M,+M+(w?1:0)),U.__actions__.push({func:Oa,args:[re],thisArg:n}),new ei(U,this.__chain__).thru(function(ve){return w&&!ve.length&&ve.push(n),ve}))});function Ti(){return Du(this)}function x1(){return new ei(this.value(),this.__chain__)}function v1(){this.__values__===n&&(this.__values__=ki(this.value()));var y=this.__index__>=this.__values__.length,w=y?n:this.__values__[this.__index__++];return{done:y,value:w}}function u_(){return this}function gl(y){for(var w,M=this;M instanceof Qi;){var U=aa(M);U.__index__=0,U.__values__=n,w?re.__wrapped__=U:w=U;var re=U;M=M.__wrapped__}return re.__wrapped__=y,w}function Hp(){var y=this.__wrapped__;if(y instanceof vn){var w=y;return this.__actions__.length&&(w=new vn(this)),w=w.reverse(),w.__actions__.push({func:Oa,args:[cx],thisArg:n}),new ei(w,this.__chain__)}return this.thru(cx)}function yx(){return $0(this.__wrapped__,this.__actions__)}var Ou=sc(function(y,w,M){Yn.call(y,M)?++y[M]:ys(y,M,1)});function b1(y,w,M){var U=sn(y)?i0:Py;return M&&Va(y,w,M)&&(w=n),U(y,qt(w,3))}function j1(y,w){var M=sn(y)?Fs:nr;return M(y,qt(w,3))}var w1=jo(Zi),xx=jo(sx);function vx(y,w){return An(Nh(y,w),1)}function d_(y,w){return An(Nh(y,w),G)}function h_(y,w,M){return M=M===n?1:dn(M),An(Nh(y,w),M)}function N1(y,w){var M=sn(y)?Vi:xo;return M(y,qt(w,3))}function bx(y,w){var M=sn(y)?VS:mp;return M(y,qt(w,3))}var S1=sc(function(y,w,M){Yn.call(y,M)?y[M].push(w):ys(y,M,[w])});function Mu(y,w,M,U){y=ia(y)?y:zu(y),M=M&&!U?dn(M):0;var re=y.length;return M<0&&(M=Nr(re+M,0)),rm(y)?M<=re&&y.indexOf(w,M)>-1:!!re&&nu(y,w,M)>-1}var Gp=mn(function(y,w,M){var U=-1,re=typeof w=="function",ve=ia(y)?rt(y.length):[];return xo(y,function(Pe){ve[++U]=re?Xa(w,Pe,M):rc(Pe,w,M)}),ve}),_1=sc(function(y,w,M){ys(y,M,w)});function Nh(y,w){var M=sn(y)?kr:Fy;return M(y,qt(w,3))}function C1(y,w,M,U){return y==null?[]:(sn(w)||(w=w==null?[]:[w]),M=U?n:M,sn(M)||(M=M==null?[]:[M]),zy(y,w,M))}var T1=sc(function(y,w,M){y[M?0:1].push(w)},function(){return[[],[]]});function k1(y,w,M){var U=sn(y)?py:yy,re=arguments.length<3;return U(y,qt(w,4),M,re,xo)}function A1(y,w,M){var U=sn(y)?HS:yy,re=arguments.length<3;return U(y,qt(w,4),M,re,mp)}function Wp(y,w){var M=sn(y)?Fs:nr;return M(y,kh(qt(w,3)))}function E1(y){var w=sn(y)?pu:xu;return w(y)}function P1(y,w,M){(M?Va(y,w,M):w===n)?w=1:w=dn(w);var U=sn(y)?T0:_p;return U(y,w)}function yr(y){var w=sn(y)?k0:L0;return w(y)}function jx(y){if(y==null)return 0;if(ia(y))return rm(y)?$s(y):y.length;var w=ha(y);return w==J||w==xe?y.size:vp(y).length}function f_(y,w,M){var U=sn(y)?my:F0;return M&&Va(y,w,M)&&(w=n),U(y,qt(w,3))}var D1=mn(function(y,w){if(y==null)return[];var M=w.length;return M>1&&Va(y,w[0],w[1])?w=[]:M>2&&Va(w[0],w[1],w[2])&&(w=[w[0]]),zy(y,An(w,1),[])}),Kp=Yl||function(){return Yr.Date.now()};function p_(y,w){if(typeof w!="function")throw new ji(o);return y=dn(y),function(){if(--y<1)return w.apply(this,arguments)}}function O1(y,w,M){return w=M?n:w,w=y&&w==null?y.length:w,Us(y,I,n,n,n,n,w)}function Sh(y,w){var M;if(typeof w!="function")throw new ji(o);return y=dn(y),function(){return--y>0&&(M=w.apply(this,arguments)),y<=1&&(w=n),M}}var yl=mn(function(y,w,M){var U=S;if(M.length){var re=Zo(M,uc(yl));U|=k}return Us(y,U,w,M,re)}),Yp=mn(function(y,w,M){var U=S|_;if(M.length){var re=Zo(M,uc(Yp));U|=k}return Us(w,U,y,M,re)});function _h(y,w,M){w=M?n:w;var U=Us(y,C,n,n,n,n,n,w);return U.placeholder=_h.placeholder,U}function Qp(y,w,M){w=M?n:w;var U=Us(y,P,n,n,n,n,n,w);return U.placeholder=Qp.placeholder,U}function xl(y,w,M){var U,re,ve,Pe,Be,Ke,ft=0,mt=!1,yt=!1,Et=!0;if(typeof y!="function")throw new ji(o);w=ns(w)||0,Dr(M)&&(mt=!!M.leading,yt="maxWait"in M,ve=yt?Nr(ns(M.maxWait)||0,w):ve,Et="trailing"in M?!!M.trailing:Et);function $t(la){var Eo=U,pc=re;return U=re=n,ft=la,Pe=y.apply(pc,Eo),Pe}function Zt(la){return ft=la,Be=Nu(Pn,w),mt?$t(la):Pe}function jn(la){var Eo=la-Ke,pc=la-ft,IM=w-Eo;return yt?Ar(IM,ve-pc):IM}function en(la){var Eo=la-Ke,pc=la-ft;return Ke===n||Eo>=w||Eo<0||yt&&pc>=ve}function Pn(){var la=Kp();if(en(la))return qn(la);Be=Nu(Pn,jn(la))}function qn(la){return Be=n,Et&&U?$t(la):(U=re=n,Pe)}function Ns(){Be!==n&&z0(Be),ft=0,U=Ke=re=Be=n}function Ai(){return Be===n?Pe:qn(Kp())}function Ss(){var la=Kp(),Eo=en(la);if(U=arguments,re=this,Ke=la,Eo){if(Be===n)return Zt(Ke);if(yt)return z0(Be),Be=Nu(Pn,w),$t(Ke)}return Be===n&&(Be=Nu(Pn,w)),Pe}return Ss.cancel=Ns,Ss.flush=Ai,Ss}var Ws=mn(function(y,w){return tc(y,1,w)}),Ch=mn(function(y,w,M){return tc(y,ns(w)||0,M)});function m_(y){return Us(y,$)}function Th(y,w){if(typeof y!="function"||w!=null&&typeof w!="function")throw new ji(o);var M=function(){var U=arguments,re=w?w.apply(this,U):U[0],ve=M.cache;if(ve.has(re))return ve.get(re);var Pe=y.apply(this,U);return M.cache=ve.set(re,Pe)||ve,Pe};return M.cache=new(Th.Cache||ti),M}Th.Cache=ti;function kh(y){if(typeof y!="function")throw new ji(o);return function(){var w=arguments;switch(w.length){case 0:return!y.call(this);case 1:return!y.call(this,w[0]);case 2:return!y.call(this,w[0],w[1]);case 3:return!y.call(this,w[0],w[1],w[2])}return!y.apply(this,w)}}function M1(y){return Sh(2,y)}var I1=B0(function(y,w){w=w.length==1&&sn(w[0])?kr(w[0],vi(qt())):kr(An(w,1),vi(qt()));var M=w.length;return mn(function(U){for(var re=-1,ve=Ar(U.length,M);++re<ve;)U[re]=w[re].call(this,U[re]);return Xa(y,this,U)})}),wx=mn(function(y,w){var M=Zo(w,uc(wx));return Us(y,k,n,w,M)}),Xp=mn(function(y,w){var M=Zo(w,uc(Xp));return Us(y,E,n,w,M)}),R1=Sr(function(y,w){return Us(y,L,n,n,n,w)});function L1(y,w){if(typeof y!="function")throw new ji(o);return w=w===n?w:dn(w),mn(y,w)}function g_(y,w){if(typeof y!="function")throw new ji(o);return w=w==null?0:Nr(dn(w),0),mn(function(M){var U=M[w],re=ol(M,0,w);return U&&fo(re,U),Xa(y,this,re)})}function Nx(y,w,M){var U=!0,re=!0;if(typeof y!="function")throw new ji(o);return Dr(M)&&(U="leading"in M?!!M.leading:U,re="trailing"in M?!!M.trailing:re),xl(y,w,{leading:U,maxWait:w,trailing:re})}function Sx(y){return O1(y,1)}function y_(y,w){return wx(ih(w),y)}function x_(){if(!arguments.length)return[];var y=arguments[0];return sn(y)?y:[y]}function Ah(y){return Ea(y,x)}function v_(y,w){return w=typeof w=="function"?w:n,Ea(y,x,w)}function F1(y){return Ea(y,p|x)}function _n(y,w){return w=typeof w=="function"?w:n,Ea(y,p|x,w)}function _x(y,w){return w==null||Ey(y,w,oa(w))}function li(y,w){return y===w||y!==y&&w!==w}var Cx=cc(Yd),$1=cc(function(y,w){return y>=w}),ko=gp(function(){return arguments}())?gp:function(y){return Lr(y)&&Yn.call(y,"callee")&&!Wl.call(y,"callee")},sn=rt.isArray,Jp=Yf?vi(Yf):ni;function ia(y){return y!=null&&fc(y.length)&&!js(y)}function Vr(y){return Lr(y)&&ia(y)}function b_(y){return y===!0||y===!1||Lr(y)&&En(y)==be}var vl=cp||V_,B1=e0?vi(e0):Xr;function z1(y){return Lr(y)&&y.nodeType===1&&!ts(y)}function Zp(y){if(y==null)return!0;if(ia(y)&&(sn(y)||typeof y=="string"||typeof y.splice=="function"||vl(y)||Iu(y)||ko(y)))return!y.length;var w=ha(y);if(w==J||w==xe)return!y.size;if(gr(y))return!vp(y).length;for(var M in y)if(Yn.call(y,M))return!1;return!0}function lr(y,w){return ac(y,w)}function Tx(y,w,M){M=typeof M=="function"?M:n;var U=M?M(y,w):n;return U===n?ac(y,w,n,M):!!U}function sa(y){if(!Lr(y))return!1;var w=En(y);return w==me||w==Ae||typeof y.message=="string"&&typeof y.name=="string"&&!ts(y)}function j_(y){return typeof y=="number"&&Bd(y)}function js(y){if(!Dr(y))return!1;var w=En(y);return w==ye||w==le||w==Le||w==Te}function em(y){return typeof y=="number"&&y==dn(y)}function fc(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=ie}function Dr(y){var w=typeof y;return y!=null&&(w=="object"||w=="function")}function Lr(y){return y!=null&&typeof y=="object"}var tm=t0?vi(t0):yp;function kx(y,w){return y===w||Xd(y,w,Rp(w))}function w_(y,w,M){return M=typeof M=="function"?M:n,Xd(y,w,Rp(w),M)}function q1(y){return V1(y)&&y!=+y}function N_(y){if(mh(y))throw new Jt(s);return zs(y)}function U1(y){return y===null}function S_(y){return y==null}function V1(y){return typeof y=="number"||Lr(y)&&En(y)==ae}function ts(y){if(!Lr(y)||En(y)!=ee)return!1;var w=Ld(y);if(w===null)return!0;var M=Yn.call(w,"constructor")&&w.constructor;return typeof M=="function"&&M instanceof M&&Rd.call(M)==Gi}var nm=n0?vi(n0):xp;function Ax(y){return em(y)&&y>=-9007199254740991&&y<=ie}var H1=r0?vi(r0):Iy;function rm(y){return typeof y=="string"||!sn(y)&&Lr(y)&&En(y)==ne}function Ha(y){return typeof y=="symbol"||Lr(y)&&En(y)==oe}var Iu=a0?vi(a0):Ry;function ws(y){return y===n}function Ex(y){return Lr(y)&&ha(y)==De}function G1(y){return Lr(y)&&En(y)==Q}var W1=cc(bp),Eh=cc(function(y,w){return y<=w});function ki(y){if(!y)return[];if(ia(y))return rm(y)?Hi(y):ra(y);if(Kl&&y[Kl])return f0(y[Kl]());var w=ha(y),M=w==J?rp:w==xe?ap:zu;return M(y)}function Ks(y){if(!y)return y===0?y:0;if(y=ns(y),y===G||y===-1/0){var w=y<0?-1:1;return w*W}return y===y?y:0}function dn(y){var w=Ks(y),M=w%1;return w===w?M?w-M:w:0}function Ys(y){return y?xs(dn(y),0,ce):0}function ns(y){if(typeof y=="number")return y;if(Ha(y))return B;if(Dr(y)){var w=typeof y.valueOf=="function"?y.valueOf():y;y=Dr(w)?w+"":w}if(typeof y!="string")return y===0?y:+y;y=c0(y);var M=Ot.test(y);return M||Ln.test(y)?qS(y.slice(2),M?2:8):St.test(y)?B:+y}function K1(y){return ai(y,fa(y))}function Ru(y){return y?xs(dn(y),-9007199254740991,ie):y===0?y:0}function Qn(y){return y==null?"":ri(y)}var __=oc(function(y,w){if(gr(w)||ia(w)){ai(w,oa(w),y);return}for(var M in w)Yn.call(w,M)&&ec(y,M,w[M])}),Y1=oc(function(y,w){ai(w,fa(w),y)}),am=oc(function(y,w,M,U){ai(w,fa(w),y,U)}),C_=oc(function(y,w,M,U){ai(w,oa(w),y,U)}),T_=Sr(Kd);function k_(y,w){var M=wi(y);return w==null?M:yo(M,w)}var A_=mn(function(y,w){y=Bn(y);var M=-1,U=w.length,re=U>2?w[2]:n;for(re&&Va(w[0],w[1],re)&&(U=1);++M<U;)for(var ve=w[M],Pe=fa(ve),Be=-1,Ke=Pe.length;++Be<Ke;){var ft=Pe[Be],mt=y[ft];(mt===n||li(mt,lu[ft])&&!Yn.call(y,ft))&&(y[ft]=ve[ft])}return y}),Q1=mn(function(y){return y.push(n,Zy),Xa(Mh,n,y)});function Lu(y,w){return s0(y,qt(w,3),Pa)}function Ph(y,w){return s0(y,qt(w,3),yu)}function X1(y,w){return y==null?y:gu(y,qt(w,3),fa)}function E_(y,w){return y==null?y:nc(y,qt(w,3),fa)}function Fu(y,w){return y&&Pa(y,qt(w,3))}function Dh(y,w){return y&&yu(y,qt(w,3))}function J1(y){return y==null?[]:sl(y,oa(y))}function im(y){return y==null?[]:sl(y,fa(y))}function Oh(y,w,M){var U=y==null?n:Xi(y,w);return U===n?M:U}function Px(y,w){return y!=null&&ph(y,w,Dy)}function $u(y,w){return y!=null&&ph(y,w,P0)}var Z1=lh(function(y,w,M){w!=null&&typeof w.toString!="function"&&(w=Ba.call(w)),y[w]=M},Ze(et)),ej=lh(function(y,w,M){w!=null&&typeof w.toString!="function"&&(w=Ba.call(w)),Yn.call(y,w)?y[w].push(M):y[w]=[M]},qt),P_=mn(rc);function oa(y){return ia(y)?Ay(y):vp(y)}function fa(y){return ia(y)?Ay(y,!0):O0(y)}function D_(y,w){var M={};return w=qt(w,3),Pa(y,function(U,re,ve){ys(M,w(U,re,ve),U)}),M}function O_(y,w){var M={};return w=qt(w,3),Pa(y,function(U,re,ve){ys(M,re,w(U,re,ve))}),M}var M_=oc(function(y,w,M){Jd(y,w,M)}),Mh=oc(function(y,w,M,U){Jd(y,w,M,U)}),sm=Sr(function(y,w){var M={};if(y==null)return M;var U=!1;w=kr(w,function(ve){return ve=bo(ve,y),U||(U=ve.length>1),ve}),ai(y,Mp(y),M),U&&(M=Ea(M,p|g|x,Y0));for(var re=w.length;re--;)nh(M,w[re]);return M});function Dx(y,w){return Bu(y,kh(qt(w)))}var I_=Sr(function(y,w){return y==null?{}:M0(y,w)});function Bu(y,w){if(y==null)return{};var M=kr(Mp(y),function(U){return[U]});return w=qt(w),wp(y,M,function(U,re){return w(U,re[0])})}function R_(y,w,M){w=bo(w,y);var U=-1,re=w.length;for(re||(re=1,y=n);++U<re;){var ve=y==null?n:y[Xn(w[U])];ve===n&&(U=re,ve=M),y=js(ve)?ve.call(y):ve}return y}function tj(y,w,M){return y==null?y:vu(y,w,M)}function nj(y,w,M,U){return U=typeof U=="function"?U:n,y==null?y:vu(y,w,M,U)}var Ox=dh(oa),Mx=dh(fa);function Ix(y,w,M){var U=sn(y),re=U||vl(y)||Iu(y);if(w=qt(w,4),M==null){var ve=y&&y.constructor;re?M=U?new ve:[]:Dr(y)?M=js(ve)?wi(Ld(y)):{}:M={}}return(re?Vi:Pa)(y,function(Pe,Be,Ke){return w(M,Pe,Be,Ke)}),M}function rj(y,w){return y==null?!0:nh(y,w)}function om(y,w,M){return y==null?y:Hy(y,w,ih(M))}function L_(y,w,M,U){return U=typeof U=="function"?U:n,y==null?y:Hy(y,w,ih(M),U)}function zu(y){return y==null?[]:tp(y,oa(y))}function Rx(y){return y==null?[]:tp(y,fa(y))}function Lx(y,w,M){return M===n&&(M=w,w=n),M!==n&&(M=ns(M),M=M===M?M:0),w!==n&&(w=ns(w),w=w===w?w:0),xs(ns(y),w,M)}function lm(y,w,M){return w=Ks(w),M===n?(M=w,w=0):M=Ks(M),y=ns(y),D0(y,w,M)}function Fx(y,w,M){if(M&&typeof M!="boolean"&&Va(y,w,M)&&(w=M=n),M===n&&(typeof w=="boolean"?(M=w,w=n):typeof y=="boolean"&&(M=y,y=n)),y===n&&w===n?(y=0,w=1):(y=Ks(y),w===n?(w=y,y=0):w=Ks(w)),y>w){var U=y;y=w,w=U}if(M||y%1||w%1){var re=Sy();return Ar(y+re*(w-y+Md("1e-"+((re+"").length-1))),w)}return Sp(y,w)}var aj=Ua(function(y,w,M){return w=w.toLowerCase(),y+(M?cm(w):w)});function cm(y){return N(Qn(y).toLowerCase())}function Ao(y){return y=Qn(y),y&&y.replace(yi,np).replace(ho,"")}function bl(y,w,M){y=Qn(y),w=ri(w);var U=y.length;M=M===n?U:xs(dn(M),0,U);var re=M;return M-=w.length,M>=0&&y.slice(M,re)==w}function jl(y){return y=Qn(y),y&&Tt.test(y)?y.replace(ke,u0):y}function Ih(y){return y=Qn(y),y&&ln.test(y)?y.replace(Vt,"\\$&"):y}var Rh=Ua(function(y,w,M){return y+(M?"-":"")+w.toLowerCase()}),wl=Ua(function(y,w,M){return y+(M?" ":"")+w.toLowerCase()}),F_=Si("toLowerCase");function ij(y,w,M){y=Qn(y),w=dn(w);var U=w?$s(y):0;if(!w||U>=w)return y;var re=(w-U)/2;return uh(po(re),M)+y+uh(du(re),M)}function Lh(y,w,M){y=Qn(y),w=dn(w);var U=w?$s(y):0;return w&&U<w?y+uh(w-U,M):y}function $_(y,w,M){y=Qn(y),w=dn(w);var U=w?$s(y):0;return w&&U<w?uh(w-U,M)+y:y}function sj(y,w,M){return M||w==null?w=0:w&&(w=+w),Ql(Qn(y).replace(er,""),w||0)}function um(y,w,M){return(M?Va(y,w,M):w===n)?w=1:w=dn(w),Uy(Qn(y),w)}function oj(){var y=arguments,w=Qn(y[0]);return y.length<3?w:w.replace(y[1],y[2])}var B_=Ua(function(y,w,M){return y+(M?"_":"")+w.toLowerCase()});function dm(y,w,M){return M&&typeof M!="number"&&Va(y,w,M)&&(w=M=n),M=M===n?ce:M>>>0,M?(y=Qn(y),y&&(typeof w=="string"||w!=null&&!nm(w))&&(w=ri(w),!w&&Jo(y))?ol(Hi(y),0,M):y.split(w,M)):[]}var hm=Ua(function(y,w,M){return y+(M?" ":"")+N(w)});function lj(y,w,M){return y=Qn(y),M=M==null?0:xs(dn(M),0,y.length),w=ri(w),y.slice(M,M+w.length)==w}function Fh(y,w,M){var U=he.templateSettings;M&&Va(y,w,M)&&(w=n),y=Qn(y),w=am({},w,U,Dp);var re=am({},w.imports,U.imports,Dp),ve=oa(re),Pe=tp(re,ve),Be,Ke,ft=0,mt=w.interpolate||uo,yt="__p += '",Et=ip((w.escape||uo).source+"|"+mt.source+"|"+(mt===kt?tt:uo).source+"|"+(w.evaluate||uo).source+"|$","g"),$t="//# sourceURL="+(Yn.call(w,"sourceURL")?(w.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xb+"]")+`
`;y.replace(Et,function(en,Pn,qn,Ns,Ai,Ss){return qn||(qn=Ns),yt+=y.slice(ft,Ss).replace(Td,d0),Pn&&(Be=!0,yt+=`' +
__e(`+Pn+`) +
'`),Ai&&(Ke=!0,yt+=`';
`+Ai+`;
__p += '`),qn&&(yt+=`' +
((__t = (`+qn+`)) == null ? '' : __t) +
'`),ft=Ss+en.length,en}),yt+=`';
`;var Zt=Yn.call(w,"variable")&&w.variable;if(!Zt)yt=`with (obj) {
`+yt+`
}
`;else if(zi.test(Zt))throw new Jt(l);yt=(Ke?yt.replace(Je,""):yt).replace(ct,"$1").replace(Ct,"$1;"),yt="function("+(Zt||"obj")+`) {
`+(Zt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Be?", __e = _.escape":"")+(Ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+yt+`return __p
}`;var jn=R(function(){return $n(ve,$t+"return "+yt).apply(n,Pe)});if(jn.source=yt,sa(jn))throw jn;return jn}function $x(y){return Qn(y).toLowerCase()}function fm(y){return Qn(y).toUpperCase()}function cj(y,w,M){if(y=Qn(y),y&&(M||w===n))return c0(y);if(!y||!(w=ri(w)))return y;var U=Hi(y),re=Hi(w),ve=iu(U,re),Pe=su(U,re)+1;return ol(U,ve,Pe).join("")}function z_(y,w,M){if(y=Qn(y),y&&(M||w===n))return y.slice(0,vy(y)+1);if(!y||!(w=ri(w)))return y;var U=Hi(y),re=su(U,Hi(w))+1;return ol(U,0,re).join("")}function pm(y,w,M){if(y=Qn(y),y&&(M||w===n))return y.replace(er,"");if(!y||!(w=ri(w)))return y;var U=Hi(y),re=iu(U,Hi(w));return ol(U,re).join("")}function u(y,w){var M=q,U=F;if(Dr(w)){var re="separator"in w?w.separator:re;M="length"in w?dn(w.length):M,U="omission"in w?ri(w.omission):U}y=Qn(y);var ve=y.length;if(Jo(y)){var Pe=Hi(y);ve=Pe.length}if(M>=ve)return y;var Be=M-$s(U);if(Be<1)return U;var Ke=Pe?ol(Pe,0,Be).join(""):y.slice(0,Be);if(re===n)return Ke+U;if(Pe&&(Be+=Ke.length-Be),nm(re)){if(y.slice(Be).search(re)){var ft,mt=Ke;for(re.global||(re=ip(re.source,Qn(gt.exec(re))+"g")),re.lastIndex=0;ft=re.exec(mt);)var yt=ft.index;Ke=Ke.slice(0,yt===n?Be:yt)}}else if(y.indexOf(ri(re),Be)!=Be){var Et=Ke.lastIndexOf(re);Et>-1&&(Ke=Ke.slice(0,Et))}return Ke+U}function h(y){return y=Qn(y),y&&ot.test(y)?y.replace(bt,m0):y}var m=Ua(function(y,w,M){return y+(M?" ":"")+w.toUpperCase()}),N=Si("toUpperCase");function A(y,w,M){return y=Qn(y),w=M?n:w,w===n?h0(y)?ZS(y):KS(y):y.match(w)||[]}var R=mn(function(y,w){try{return Xa(y,n,w)}catch(M){return sa(M)?M:new Jt(M)}}),Z=Sr(function(y,w){return Vi(w,function(M){M=Xn(M),ys(y,M,yl(y[M],y))}),y});function pe(y){var w=y==null?0:y.length,M=qt();return y=w?kr(y,function(U){if(typeof U[1]!="function")throw new ji(o);return[M(U[0]),U[1]]}):[],mn(function(U){for(var re=-1;++re<w;){var ve=y[re];if(Xa(ve[0],this,U))return Xa(ve[1],this,U)}})}function Oe(y){return A0(Ea(y,p))}function Ze(y){return function(){return y}}function ut(y,w){return y==null||y!==y?w:y}var pt=qs(),nt=qs(!0);function et(y){return y}function Kt(y){return Ly(typeof y=="function"?y:Ea(y,p))}function Wt(y){return $y(Ea(y,p))}function cr(y,w){return jp(y,Ea(w,p))}var Ge=mn(function(y,w){return function(M){return rc(M,y,w)}}),qe=mn(function(y,w){return function(M){return rc(y,M,w)}});function Qe(y,w,M){var U=oa(w),re=sl(w,U);M==null&&!(Dr(w)&&(re.length||!U.length))&&(M=w,w=y,y=this,re=sl(w,oa(w)));var ve=!(Dr(M)&&"chain"in M)||!!M.chain,Pe=js(y);return Vi(re,function(Be){var Ke=w[Be];y[Be]=Ke,Pe&&(y.prototype[Be]=function(){var ft=this.__chain__;if(ve||ft){var mt=y(this.__wrapped__),yt=mt.__actions__=ra(this.__actions__);return yt.push({func:Ke,args:arguments,thisArg:y}),mt.__chain__=ft,mt}return Ke.apply(y,fo([this.value()],arguments))})}),y}function ht(){return Yr._===this&&(Yr._=cu),this}function Mt(){}function bn(y){return y=dn(y),mn(function(w){return By(w,y)})}var Bt=ch(kr),Yt=ch(i0),pa=ch(my);function zn(y){return Fp(y)?Jf(Xn(y)):I0(y)}function Nl(y){return function(w){return y==null?n:Xi(y,w)}}var q_=ll(),CG=ll(!0);function U_(){return[]}function V_(){return!1}function TG(){return{}}function kG(){return""}function AG(){return!0}function EG(y,w){if(y=dn(y),y<1||y>ie)return[];var M=ce,U=Ar(y,ce);w=qt(w),y-=ce;for(var re=Xo(U,w);++M<y;)w(M);return re}function PG(y){return sn(y)?kr(y,Xn):Ha(y)?[y]:ra(Hs(Qn(y)))}function DG(y){var w=++ps;return Qn(y)+w}var OG=bu(function(y,w){return y+w},0),MG=Pp("ceil"),IG=bu(function(y,w){return y/w},1),RG=Pp("floor");function LG(y){return y&&y.length?vs(y,et,Yd):n}function FG(y,w){return y&&y.length?vs(y,qt(w,2),Yd):n}function $G(y){return o0(y,et)}function BG(y,w){return o0(y,qt(w,2))}function zG(y){return y&&y.length?vs(y,et,bp):n}function qG(y,w){return y&&y.length?vs(y,qt(w,2),bp):n}var UG=bu(function(y,w){return y*w},1),VG=Pp("round"),HG=bu(function(y,w){return y-w},0);function GG(y){return y&&y.length?ep(y,et):0}function WG(y,w){return y&&y.length?ep(y,qt(w,2)):0}return he.after=p_,he.ary=O1,he.assign=__,he.assignIn=Y1,he.assignInWith=am,he.assignWith=C_,he.at=T_,he.before=Sh,he.bind=yl,he.bindAll=Z,he.bindKey=Yp,he.castArray=x_,he.chain=Du,he.chunk=o_,he.compact=s1,he.concat=o1,he.cond=pe,he.conforms=Oe,he.constant=Ze,he.countBy=Ou,he.create=k_,he.curry=_h,he.curryRight=Qp,he.debounce=xl,he.defaults=A_,he.defaultsDeep=Q1,he.defer=Ws,he.delay=Ch,he.difference=Pr,he.differenceBy=ii,he.differenceWith=_o,he.drop=l1,he.dropRight=c1,he.dropRightWhile=l_,he.dropWhile=ix,he.fill=_i,he.filter=j1,he.flatMap=vx,he.flatMapDeep=d_,he.flatMapDepth=h_,he.flatten=si,he.flattenDeep=u1,he.flattenDepth=dl,he.flip=m_,he.flow=pt,he.flowRight=nt,he.fromPairs=dc,he.functions=J1,he.functionsIn=im,he.groupBy=S1,he.initial=lx,he.intersection=Gs,he.intersectionBy=d1,he.intersectionWith=Su,he.invert=Z1,he.invertBy=ej,he.invokeMap=Gp,he.iteratee=Kt,he.keyBy=_1,he.keys=oa,he.keysIn=fa,he.map=Nh,he.mapKeys=D_,he.mapValues=O_,he.matches=Wt,he.matchesProperty=cr,he.memoize=Th,he.merge=M_,he.mergeWith=Mh,he.method=Ge,he.methodOf=qe,he.mixin=Qe,he.negate=kh,he.nthArg=bn,he.omit=sm,he.omitBy=Dx,he.once=M1,he.orderBy=C1,he.over=Bt,he.overArgs=I1,he.overEvery=Yt,he.overSome=pa,he.partial=wx,he.partialRight=Xp,he.partition=T1,he.pick=I_,he.pickBy=Bu,he.property=zn,he.propertyOf=Nl,he.pull=f1,he.pullAll=Cu,he.pullAllBy=p1,he.pullAllWith=Vp,he.pullAt=m1,he.range=q_,he.rangeRight=CG,he.rearg=R1,he.reject=Wp,he.remove=c_,he.rest=L1,he.reverse=cx,he.sampleSize=P1,he.set=tj,he.setWith=nj,he.shuffle=yr,he.slice=rr,he.sortBy=D1,he.sortedUniq=Tu,he.sortedUniqBy=ux,he.split=dm,he.spread=g_,he.tail=To,he.take=Ur,he.takeRight=fl,he.takeRightWhile=hc,he.takeWhile=dx,he.tap=gx,he.throttle=Nx,he.thru=Oa,he.toArray=ki,he.toPairs=Ox,he.toPairsIn=Mx,he.toPath=PG,he.toPlainObject=K1,he.transform=Ix,he.unary=Sx,he.union=es,he.unionBy=ku,he.unionWith=jh,he.uniq=oi,he.uniqBy=hx,he.uniqWith=fx,he.unset=rj,he.unzip=Au,he.unzipWith=wh,he.update=om,he.updateWith=L_,he.values=zu,he.valuesIn=Rx,he.without=pl,he.words=A,he.wrap=y_,he.xor=ja,he.xorBy=ml,he.xorWith=Eu,he.zip=Pu,he.zipObject=px,he.zipObjectDeep=mx,he.zipWith=g1,he.entries=Ox,he.entriesIn=Mx,he.extend=Y1,he.extendWith=am,Qe(he,he),he.add=OG,he.attempt=R,he.camelCase=aj,he.capitalize=cm,he.ceil=MG,he.clamp=Lx,he.clone=Ah,he.cloneDeep=F1,he.cloneDeepWith=_n,he.cloneWith=v_,he.conformsTo=_x,he.deburr=Ao,he.defaultTo=ut,he.divide=IG,he.endsWith=bl,he.eq=li,he.escape=jl,he.escapeRegExp=Ih,he.every=b1,he.find=w1,he.findIndex=Zi,he.findKey=Lu,he.findLast=xx,he.findLastIndex=sx,he.findLastKey=Ph,he.floor=RG,he.forEach=N1,he.forEachRight=bx,he.forIn=X1,he.forInRight=E_,he.forOwn=Fu,he.forOwnRight=Dh,he.get=Oh,he.gt=Cx,he.gte=$1,he.has=Px,he.hasIn=$u,he.head=Co,he.identity=et,he.includes=Mu,he.indexOf=ox,he.inRange=lm,he.invoke=P_,he.isArguments=ko,he.isArray=sn,he.isArrayBuffer=Jp,he.isArrayLike=ia,he.isArrayLikeObject=Vr,he.isBoolean=b_,he.isBuffer=vl,he.isDate=B1,he.isElement=z1,he.isEmpty=Zp,he.isEqual=lr,he.isEqualWith=Tx,he.isError=sa,he.isFinite=j_,he.isFunction=js,he.isInteger=em,he.isLength=fc,he.isMap=tm,he.isMatch=kx,he.isMatchWith=w_,he.isNaN=q1,he.isNative=N_,he.isNil=S_,he.isNull=U1,he.isNumber=V1,he.isObject=Dr,he.isObjectLike=Lr,he.isPlainObject=ts,he.isRegExp=nm,he.isSafeInteger=Ax,he.isSet=H1,he.isString=rm,he.isSymbol=Ha,he.isTypedArray=Iu,he.isUndefined=ws,he.isWeakMap=Ex,he.isWeakSet=G1,he.join=bh,he.kebabCase=Rh,he.last=Da,he.lastIndexOf=_u,he.lowerCase=wl,he.lowerFirst=F_,he.lt=W1,he.lte=Eh,he.max=LG,he.maxBy=FG,he.mean=$G,he.meanBy=BG,he.min=zG,he.minBy=qG,he.stubArray=U_,he.stubFalse=V_,he.stubObject=TG,he.stubString=kG,he.stubTrue=AG,he.multiply=UG,he.nth=h1,he.noConflict=ht,he.noop=Mt,he.now=Kp,he.pad=ij,he.padEnd=Lh,he.padStart=$_,he.parseInt=sj,he.random=Fx,he.reduce=k1,he.reduceRight=A1,he.repeat=um,he.replace=oj,he.result=R_,he.round=VG,he.runInContext=He,he.sample=E1,he.size=jx,he.snakeCase=B_,he.some=f_,he.sortedIndex=vr,he.sortedIndexBy=Sn,he.sortedIndexOf=Fn,he.sortedLastIndex=ar,he.sortedLastIndexBy=Ci,he.sortedLastIndexOf=hl,he.startCase=hm,he.startsWith=lj,he.subtract=HG,he.sum=GG,he.sumBy=WG,he.template=Fh,he.times=EG,he.toFinite=Ks,he.toInteger=dn,he.toLength=Ys,he.toLower=$x,he.toNumber=ns,he.toSafeInteger=Ru,he.toString=Qn,he.toUpper=fm,he.trim=cj,he.trimEnd=z_,he.trimStart=pm,he.truncate=u,he.unescape=h,he.uniqueId=DG,he.upperCase=m,he.upperFirst=N,he.each=N1,he.eachRight=bx,he.first=Co,Qe(he,function(){var y={};return Pa(he,function(w,M){Yn.call(he.prototype,M)||(y[M]=w)}),y}(),{chain:!1}),he.VERSION=a,Vi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){he[y].placeholder=he}),Vi(["drop","take"],function(y,w){vn.prototype[y]=function(M){M=M===n?1:Nr(dn(M),0);var U=this.__filtered__&&!w?new vn(this):this.clone();return U.__filtered__?U.__takeCount__=Ar(M,U.__takeCount__):U.__views__.push({size:Ar(M,ce),type:y+(U.__dir__<0?"Right":"")}),U},vn.prototype[y+"Right"]=function(M){return this.reverse()[y](M).reverse()}}),Vi(["filter","map","takeWhile"],function(y,w){var M=w+1,U=M==X||M==z;vn.prototype[y]=function(re){var ve=this.clone();return ve.__iteratees__.push({iteratee:qt(re,3),type:M}),ve.__filtered__=ve.__filtered__||U,ve}}),Vi(["head","last"],function(y,w){var M="take"+(w?"Right":"");vn.prototype[y]=function(){return this[M](1).value()[0]}}),Vi(["initial","tail"],function(y,w){var M="drop"+(w?"":"Right");vn.prototype[y]=function(){return this.__filtered__?new vn(this):this[M](1)}}),vn.prototype.compact=function(){return this.filter(et)},vn.prototype.find=function(y){return this.filter(y).head()},vn.prototype.findLast=function(y){return this.reverse().find(y)},vn.prototype.invokeMap=mn(function(y,w){return typeof y=="function"?new vn(this):this.map(function(M){return rc(M,y,w)})}),vn.prototype.reject=function(y){return this.filter(kh(qt(y)))},vn.prototype.slice=function(y,w){y=dn(y);var M=this;return M.__filtered__&&(y>0||w<0)?new vn(M):(y<0?M=M.takeRight(-y):y&&(M=M.drop(y)),w!==n&&(w=dn(w),M=w<0?M.dropRight(-w):M.take(w-y)),M)},vn.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},vn.prototype.toArray=function(){return this.take(ce)},Pa(vn.prototype,function(y,w){var M=/^(?:filter|find|map|reject)|While$/.test(w),U=/^(?:head|last)$/.test(w),re=he[U?"take"+(w=="last"?"Right":""):w],ve=U||/^find/.test(w);re&&(he.prototype[w]=function(){var Pe=this.__wrapped__,Be=U?[1]:arguments,Ke=Pe instanceof vn,ft=Be[0],mt=Ke||sn(Pe),yt=function(Pn){var qn=re.apply(he,fo([Pn],Be));return U&&Et?qn[0]:qn};mt&&M&&typeof ft=="function"&&ft.length!=1&&(Ke=mt=!1);var Et=this.__chain__,$t=!!this.__actions__.length,Zt=ve&&!Et,jn=Ke&&!$t;if(!ve&&mt){Pe=jn?Pe:new vn(this);var en=y.apply(Pe,Be);return en.__actions__.push({func:Oa,args:[yt],thisArg:n}),new ei(en,Et)}return Zt&&jn?y.apply(this,Be):(en=this.thru(yt),Zt?U?en.value()[0]:en.value():en)})}),Vi(["pop","push","shift","sort","splice","unshift"],function(y){var w=sp[y],M=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",U=/^(?:pop|shift)$/.test(y);he.prototype[y]=function(){var re=arguments;if(U&&!this.__chain__){var ve=this.value();return w.apply(sn(ve)?ve:[],re)}return this[M](function(Pe){return w.apply(sn(Pe)?Pe:[],re)})}}),Pa(vn.prototype,function(y,w){var M=he[w];if(M){var U=M.name+"";Yn.call(Yi,U)||(Yi[U]=[]),Yi[U].push({name:w,func:M})}}),Yi[qr(n,_).name]=[{name:"wrapper",func:n}],vn.prototype.clone=Vd,vn.prototype.reverse=up,vn.prototype.value=Jl,he.prototype.at=y1,he.prototype.chain=Ti,he.prototype.commit=x1,he.prototype.next=v1,he.prototype.plant=gl,he.prototype.reverse=Hp,he.prototype.toJSON=he.prototype.valueOf=he.prototype.value=yx,he.prototype.first=he.prototype.head,Kl&&(he.prototype[Kl]=u_),he},el=ou();Qo?((Qo.exports=el)._=el,tu._=el):Yr._=el}).call(Fme)}(fv,fv.exports)),fv.exports}var fU=$me();class Bme{constructor(e){br(this,"sampleRate",24e3);br(this,"bufferSize",7680);br(this,"audioQueue",[]);br(this,"isPlaying",!1);br(this,"isStreamComplete",!1);br(this,"checkInterval",null);br(this,"scheduledTime",0);br(this,"initialBufferTime",.1);br(this,"gainNode");br(this,"source");br(this,"endOfQueueAudioSource",null);br(this,"onComplete",()=>{});this.context=e,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(e,n,a){let i=Tj.get(this.context);if(i&&i[e])return i[e].handlers.push(a),Promise.resolve(this);i||(Tj.set(this.context,{}),i=Tj.get(this.context)),i[e]={handlers:[a]};const s=ZE(e,n);await this.context.audioWorklet.addModule(s);const o=new AudioWorkletNode(this.context,e);return i[e].node=o,this}_processPCM16Chunk(e){const n=new Float32Array(e.length/2),a=new DataView(e.buffer);for(let i=0;i<e.length/2;i++)try{const s=a.getInt16(i*2,!0);n[i]=s/32768}catch(s){console.error(s)}return n}addPCM16(e){this.isStreamComplete=!1;let n=this._processPCM16Chunk(e);for(;n.length>=this.bufferSize;){const a=n.slice(0,this.bufferSize);this.audioQueue.push(a),n=n.slice(this.bufferSize)}n.length>0&&this.audioQueue.push(n),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){const n=this.context.createBuffer(1,e.length,this.sampleRate);return n.getChannelData(0).set(e),n}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const n=this.audioQueue.shift(),a=this.createAudioBuffer(n),i=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=i,i.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===i&&(this.endOfQueueAudioSource=null,this.onComplete())}),i.buffer=a,i.connect(this.gainNode);const s=Tj.get(this.context);s&&Object.entries(s).forEach(([,l])=>{const{node:c,handlers:d}=l;c&&(i.connect(c),c.port.onmessage=function(f){d.forEach(p=>{p.call(c.port,f)})},c.connect(this.context.destination))});const o=Math.max(this.scheduledTime,this.context.currentTime);i.start(o),this.scheduledTime=o+a.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const n=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,n-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function zme(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"screen",start:async()=>{const l=await navigator.mediaDevices.getDisplayMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}function qme(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"webcam",start:async()=>{const l=await navigator.mediaDevices.getUserMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}class Ume extends dU{constructor(n){super();br(this,"client");br(this,"_status","disconnected");br(this,"_session",null);br(this,"_model",null);br(this,"config",null);this.client=new x9(n),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(n,a){const i={date:new Date,type:n,message:a};this.emit("log",i)}async connect(n,a){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=a,this._model=n;const i={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:n,config:a,callbacks:i})}catch(s){return console.error("Error connecting to GenAI Live:",s),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var n;return this.session?((n=this.session)==null||n.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(n){this.log("server.error",n.message),this.emit("error",n)}onclose(n){this.log("server.close",`disconnected ${n.reason?`with reason: ${n.reason}`:""}`),this.emit("close",n)}async onmessage(n){var a;if(n.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(n.toolCall){this.log("server.toolCall",n),this.emit("toolcall",n.toolCall);return}if(n.toolCallCancellation){this.log("server.toolCallCancellation",n),this.emit("toolcallcancellation",n.toolCallCancellation);return}if(n.serverContent){const{serverContent:i}=n;if("interrupted"in i){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in i&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in i){let s=((a=i.modelTurn)==null?void 0:a.parts)||[];const o=s.filter(f=>{var p;return f.inlineData&&((p=f.inlineData.mimeType)==null?void 0:p.startsWith("audio/pcm"))}),l=o.map(f=>{var p;return(p=f.inlineData)==null?void 0:p.data}),c=fU.difference(s,o);if(l.forEach(f=>{if(f){const p=Pme(f);this.emit("audio",p),this.log("server.audio",`buffer (${p.byteLength})`)}}),!c.length)return;s=c;const d={modelTurn:{parts:s}};this.emit("content",d),this.log("server.content",n)}}else console.log("received unmatched message",n)}sendRealtimeInput(n){var o;let a=!1,i=!1;for(const l of n)if((o=this.session)==null||o.sendRealtimeInput({media:l}),l.mimeType.includes("audio")&&(a=!0),l.mimeType.includes("image")&&(i=!0),a&&i)break;const s=a&&i?"audio + video":a?"audio":i?"video":"unknown";this.log("client.realtimeInput",s)}sendToolResponse(n){var a;n.functionResponses&&n.functionResponses.length&&((a=this.session)==null||a.sendToolResponse({functionResponses:n.functionResponses}),this.log("client.toolResponse",n))}send(n,a=!0){var i;(i=this.session)==null||i.sendClientContent({turns:n,turnComplete:a}),this.log("client.send",{turns:Array.isArray(n)?n:[n],turnComplete:a})}}function Vme(t){const e=v.useMemo(()=>new Ume(t),[t]),n=v.useRef(null),[a,i]=v.useState("models/gemini-2.5-flash-live-preview"),[s,o]=v.useState({}),[l,c]=v.useState(!1),[d,f]=v.useState(0),p=null;v.useEffect(()=>{n.current||cU({id:"audio-out"}).then(b=>{n.current=new Bme(b),n.current.addWorklet("vumeter-out",uU,j=>{f(j.data.volume)}).then(()=>{})})},[n]),v.useEffect(()=>{const b=()=>{c(!0)},j=()=>{c(!1)},S=P=>{console.error("error",P)},_=()=>{var P;return(P=n.current)==null?void 0:P.stop()},T=P=>{var k;return(k=n.current)==null?void 0:k.addPCM16(new Uint8Array(P))},C=()=>{};return e.on("error",S).on("open",b).on("close",j).on("interrupted",_).on("audio",T).on("content",C),()=>{e.off("error",S).off("open",b).off("close",j).off("interrupted",_).off("audio",T).off("content",C).disconnect()}},[e]);const g=v.useCallback(async()=>{if(!s)throw new Error("config has not been set");e.disconnect(),await e.connect(a,s)},[e,s,a]),x=v.useCallback(async()=>{e.disconnect(),c(!1)},[c,e]);return{client:e,config:s,setConfig:o,model:a,setModel:i,connected:l,connect:g,disconnect:x,volume:d,aiSummary:p}}const pU=v.createContext(void 0),tS=({options:t,children:e})=>{const n=Vme(t);return r.jsx(pU.Provider,{value:n,children:e})},vd=()=>{const t=v.useContext(pU);if(!t)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return t};function Hme(){const{config:t,setConfig:e}=vd(),[n,a]=v.useState({value:"audio",label:"audio"}),i=v.useCallback(s=>{e({...t,responseModalities:[s==="audio"?hd.AUDIO:hd.TEXT]})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),r.jsx(lU,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:n,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:s=>{a(s),s&&(s.value==="audio"||s.value==="text")&&i(s.value)}})]})}const s3=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function Gme(){const{config:t,setConfig:e}=vd();v.useEffect(()=>{var l,c,d;const s=((d=(c=(l=t.speechConfig)==null?void 0:l.voiceConfig)==null?void 0:c.prebuiltVoiceConfig)==null?void 0:d.voiceName)||"Atari02";a({value:s,label:s})},[t]);const[n,a]=v.useState(s3[5]),i=v.useCallback(s=>{e({...t,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}}})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),r.jsx(lU,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:n,defaultValue:n,options:s3,onChange:s=>{a(s),s&&i(s.value)}})]})}function Wme(){const[t,e]=v.useState(!1),{config:n,setConfig:a,connected:i}=vd(),s=v.useMemo(()=>Array.isArray(n.tools)?n.tools.filter(d=>Array.isArray(d.functionDeclarations)).map(d=>d.functionDeclarations).filter(d=>!!d).flat():[],[n]),o=v.useMemo(()=>{var d;return n.systemInstruction?typeof n.systemInstruction=="string"?n.systemInstruction:Array.isArray(n.systemInstruction)?n.systemInstruction.map(f=>typeof f=="string"?f:f.text).join(`
`):typeof n.systemInstruction=="object"&&"parts"in n.systemInstruction&&((d=n.systemInstruction.parts)==null?void 0:d.map(f=>f.text).join(`
`))||"":""},[n]),l=v.useCallback(d=>{const f={...n,systemInstruction:d.target.value};a(f)},[n,a]),c=v.useCallback((d,f)=>{var g;const p={...n,tools:((g=n.tools)==null?void 0:g.map(x=>{const b=x;return Array.isArray(b.functionDeclarations)?{...x,functionDeclarations:b.functionDeclarations.map(j=>j.name===d?{...j,description:f}:j)}:x}))||[]};a(p)},[n,a]);return r.jsxs("div",{className:"settings-dialog",children:[r.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>e(!t),children:"settings"}),r.jsx("dialog",{className:"dialog",style:{display:t?"block":"none"},children:r.jsxs("div",{className:`dialog-container ${i?"disabled":""}`,children:[i&&r.jsx("div",{className:"connected-indicator",children:r.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),r.jsxs("div",{className:"mode-selectors",children:[r.jsx(Hme,{}),r.jsx(Gme,{})]}),r.jsx("h3",{children:"System Instructions"}),r.jsx("textarea",{className:"system",onChange:l,value:o}),r.jsx("h4",{children:"Function declarations"}),r.jsx("div",{className:"function-declarations",children:r.jsx("div",{className:"fd-rows",children:s.map((d,f)=>{var p;return r.jsxs("div",{className:"fd-row",children:[r.jsx("span",{className:"fd-row-name",children:d.name}),r.jsx("span",{className:"fd-row-args",children:Object.keys(((p=d.parameters)==null?void 0:p.properties)||{}).map((g,x)=>r.jsx("span",{children:g},x))}),r.jsx("input",{className:"fd-row-description",type:"text",defaultValue:d.description,onBlur:g=>c(d.name,g.target.value)},`fd-${d.description}`)]},`function-${f}`)})})})]})})]})}const o3=v.memo(({isStreaming:t,onIcon:e,offIcon:n,start:a,stop:i})=>t?r.jsx("button",{className:"action-button",onClick:i,children:r.jsx("span",{className:"material-symbols-outlined",children:e})}):r.jsx("button",{className:"action-button",onClick:a,children:r.jsx("span",{className:"material-symbols-outlined",children:n})}));function Kme({videoRef:t,children:e,onVideoStreamChange:n=()=>{},supportsVideo:a,enableEditingSettings:i}){const s=[qme(),zme()],[o,l]=v.useState(null),[c,d]=s,[f,p]=v.useState(0),[g]=v.useState(()=>new hU),[x,b]=v.useState(!1),j=v.useRef(null),S=v.useRef(null),{client:_,connected:T,connect:C,disconnect:P,volume:k}=vd();v.useEffect(()=>{!T&&S.current&&S.current.focus()},[T]),v.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(f*200,8))}px`)},[f]),v.useEffect(()=>{const I=L=>{_.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:L}])};return T&&!x&&g?g.on("data",I).on("volume",p).start():g.stop(),()=>{g.off("data",I).off("volume",p)}},[T,_,x,g]),v.useEffect(()=>{t.current&&(t.current.srcObject=o);let I=-1;function L(){const $=t.current,q=j.current;if(!$||!q)return;const F=q.getContext("2d");if(q.width=$.videoWidth*.25,q.height=$.videoHeight*.25,q.width+q.height>0){F.drawImage($,0,0,q.width,q.height);const H=q.toDataURL("image/jpeg",1),V=H.slice(H.indexOf(",")+1,1/0);_.sendRealtimeInput([{mimeType:"image/jpeg",data:V}])}T&&(I=window.setTimeout(L,1e3/.5))}return T&&o!==null&&requestAnimationFrame(L),()=>{clearTimeout(I)}},[T,o,_,t]);const E=I=>async()=>{if(I){const L=await I.start();l(L),n(L)}else l(null),n(null);s.filter(L=>L!==I).forEach(L=>L.stop())};return r.jsxs("section",{className:"control-tray",children:[r.jsx("canvas",{style:{display:"none"},ref:j}),r.jsxs("nav",{className:ad("actions-nav",{disabled:!T}),children:[r.jsx("button",{className:ad("action-button mic-button",{recording:!x&&T}),onClick:()=>b(!x),children:x?r.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):r.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),r.jsx("div",{className:"action-button no-action outlined",children:r.jsx(Lme,{volume:k,active:T,hover:!1})}),a&&r.jsxs(r.Fragment,{children:[r.jsx(o3,{isStreaming:d.isStreaming,start:E(d),stop:E(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),r.jsx(o3,{isStreaming:c.isStreaming,start:E(c),stop:E(),onIcon:"videocam_off",offIcon:"videocam"})]}),e]}),r.jsxs("div",{className:ad("connection-container",{connected:T}),children:[r.jsx("div",{className:"connection-button-container",children:r.jsx("button",{ref:S,className:ad("action-button connect-toggle",{connected:T}),onClick:T?P:C,children:r.jsx("span",{className:"material-symbols-outlined filled",children:T?"pause":"play_arrow"})})}),r.jsx("span",{className:"text-indicator",children:"Streaming"})]}),i?r.jsx(Wme,{}):""]})}const l3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:ig.OBJECT,properties:{summary:{type:ig.STRING,description:"The summary of the patient's case."}},required:["summary"]}},Yme=({patientData:t,tokenNumber:e})=>{const[n,a]=v.useState(""),{client:i,setConfig:s,setModel:o}=vd();return v.useEffect(()=>{o("models/gemini-2.5-flash-live-preview"),s({responseModalities:[hd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[l3]}]})},[s,o]),v.useEffect(()=>{const l=c=>{if(!c.functionCalls)return;const d=c.functionCalls.find(f=>f.name===l3.name);if(d){const f=d.args.summary;a(f)}c.functionCalls.length&&setTimeout(()=>{var f;return i.sendToolResponse({functionResponses:(f=c.functionCalls)==null?void 0:f.map(p=>({response:{output:{success:!0}},id:p.id,name:p.name}))})},200)};return i.on("toolcall",l),()=>{i.off("toolcall",l)}},[i]),v.useEffect(()=>{if(n){const l=encodeURIComponent(n);e?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${e}&caseDetails=${l}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${l}`}},[n,e]),r.jsxs("div",{className:"hospital-reception",children:[r.jsx("h1",{children:"Newtons Ai"}),r.jsx("p",{children:"Newtons Ai"}),e&&r.jsxs("h2",{children:["Token Number: ",e]}),t&&r.jsxs("div",{children:[r.jsx("h2",{children:"Patient Details"}),r.jsx("pre",{children:JSON.stringify(t,null,2)})]}),n&&r.jsxs("div",{children:[r.jsx("h2",{children:"Case Summary (from Tool Call)"}),r.jsx("p",{children:n})]})]})},c3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function Qme(){if(!v9())return console.warn("No auth token found, using default Live API key."),c3;try{const e=await se("/api/clinics/gemini-api-key");if(e.ok){const a=(await e.json()).geminiApiKey;if(a)return a}}catch(e){console.error("Failed to fetch clinic-specific Live API key:",e)}return console.warn("Clinic-specific Live API key not found or failed to fetch, using default."),c3}function Xme(){const t=v.useRef(null),[e,n]=v.useState(null),[a,i]=v.useState(null);return v.useEffect(()=>{(async()=>{try{const o=await Qme();i({apiKey:o})}catch(o){console.error("Error setting Live API options:",o)}})()},[]),a?r.jsx("div",{className:"App",children:r.jsx(tS,{options:a,children:r.jsx(Jme,{videoRef:t,setVideoStream:n,videoStream:e})})}):r.jsx("div",{children:"Loading Live API settings..."})}const Jme=({videoRef:t,setVideoStream:e,videoStream:n})=>{const[a,i]=v.useState(null),[s,o]=v.useState(null),{connected:l,client:c,connect:d,config:f,model:p}=vd(),[g,x]=v.useState(""),b=v.useRef(null),[j,S]=v.useState(!1);v.useEffect(()=>{const T=window.matchMedia("(prefers-color-scheme: dark)"),C=P=>{document.documentElement.setAttribute("data-theme",P.matches?"dark":"light")};return C(T),T.addEventListener("change",C),()=>T.removeEventListener("change",C)},[]),v.useEffect(()=>{const T=new URLSearchParams(window.location.search),C={};for(const[P,k]of T.entries())P==="token_number"?o(k):C[P]=k;i(C)},[]),v.useEffect(()=>{Object.keys(f).length>0&&p&&d()},[d,f,p]),v.useEffect(()=>{if(l&&a&&!j){const T=JSON.stringify(a,null,2);c.send([{text:T}]),x(""),S(!0)}},[l,a,c,j]),v.useEffect(()=>{a&&x(JSON.stringify(a,null,2))},[a]);const _=()=>{c.send([{text:g}]),x(""),b.current&&(b.current.innerText="")};return r.jsx("div",{className:"streaming-console",children:r.jsxs("main",{children:[r.jsxs("div",{className:"main-app-area",children:[r.jsx(Yme,{patientData:a,tokenNumber:s}),r.jsx("video",{className:ad("stream",{hidden:!t.current||!n}),ref:t,autoPlay:!0,playsInline:!0})]}),r.jsx("div",{className:ad("input-container",{disabled:!l}),children:r.jsxs("div",{className:"input-content",children:[r.jsx("textarea",{className:"input-area",ref:b,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),T.stopPropagation(),_())},onChange:T=>x(T.target.value),value:g}),r.jsx("span",{className:ad("input-content-placeholder",{hidden:g.length}),children:"Typesomething..."}),r.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:_,children:"send"})]})}),r.jsx(Kme,{videoRef:t,supportsVideo:!0,onVideoStreamChange:e,enableEditingSettings:!0})]})})},u3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",mU=({isActive:t,volume:e,size:n="normal"})=>{const a=t&&e>.01,i=a?Math.max(3,Math.min(12,3+e*30)):3,s=n==="mini";return r.jsx("div",{className:`ai-avatar-container ${t?"active":""} ${s?"mini":""}`,children:r.jsxs("svg",{viewBox:"0 0 200 200",className:"ai-avatar-svg",children:[r.jsxs("defs",{children:[r.jsxs("radialGradient",{id:`avatarGlow${s?"Mini":""}`,cx:"50%",cy:"50%",r:"50%",children:[r.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:a?.5:t?.3:.1}),r.jsx("stop",{offset:"100%",stopColor:"#059669",stopOpacity:"0"})]}),r.jsxs("linearGradient",{id:`hairGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#1e1b4b"}),r.jsx("stop",{offset:"100%",stopColor:"#312e81"})]}),r.jsxs("linearGradient",{id:`skinGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd5ce"}),r.jsx("stop",{offset:"100%",stopColor:"#f9bbb2"})]}),r.jsxs("linearGradient",{id:`coatGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),r.jsx("stop",{offset:"100%",stopColor:"#f1f5f9"})]}),r.jsxs("linearGradient",{id:`scrubsGradient${s?"Mini":""}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#0ea5e9"}),r.jsx("stop",{offset:"100%",stopColor:"#0284c7"})]})]}),r.jsx("circle",{cx:"100",cy:"100",r:"95",fill:`url(#avatarGlow${s?"Mini":""})`,className:"avatar-glow"}),r.jsx("circle",{cx:"100",cy:"100",r:"85",fill:"#ecfdf5",stroke:"#a7f3d0",strokeWidth:"2"}),r.jsx("ellipse",{cx:"100",cy:"185",rx:"55",ry:"35",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#e2e8f0",strokeWidth:"1"}),r.jsx("path",{d:"M75 155 L85 175 L90 155",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#cbd5e1",strokeWidth:"1"}),r.jsx("path",{d:"M125 155 L115 175 L110 155",fill:`url(#coatGradient${s?"Mini":""})`,stroke:"#cbd5e1",strokeWidth:"1"}),r.jsx("path",{d:"M90 155 L100 165 L110 155 L110 175 L90 175 Z",fill:`url(#scrubsGradient${s?"Mini":""})`}),r.jsx("path",{d:"M70 165 Q65 155 75 145",stroke:"#374151",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M130 165 Q135 155 125 145",stroke:"#374151",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),r.jsx("circle",{cx:"70",cy:"168",r:"5",fill:"#374151"}),r.jsx("circle",{cx:"70",cy:"168",r:"3",fill:"#6b7280"}),r.jsx("circle",{cx:"130",cy:"168",r:"5",fill:"#374151"}),r.jsx("circle",{cx:"130",cy:"168",r:"3",fill:"#6b7280"}),r.jsx("path",{d:"M77 145 Q85 140 90 145",stroke:"#374151",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M123 145 Q115 140 110 145",stroke:"#374151",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"100",cy:"70",rx:"42",ry:"35",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("rect",{x:"90",y:"130",width:"20",height:"25",fill:`url(#skinGradient${s?"Mini":""})`,rx:"5"}),r.jsx("ellipse",{cx:"100",cy:"92",rx:"35",ry:"38",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("path",{d:"M58 75 Q60 90 65 95 L68 85 Q65 75 58 75",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M142 75 Q140 90 135 95 L132 85 Q135 75 142 75",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M60 70 Q80 50 115 55 Q135 60 140 70 Q120 45 80 45 Q60 55 60 70",fill:`url(#hairGradient${s?"Mini":""})`}),r.jsx("path",{d:"M78 80 Q84 78 90 80",stroke:"#3d3d5c",strokeWidth:"1.2",fill:"none",strokeLinecap:"round"}),r.jsx("path",{d:"M110 80 Q116 78 122 80",stroke:"#3d3d5c",strokeWidth:"1.2",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"84",cy:"90",rx:"9",ry:"10",fill:"white"}),r.jsx("ellipse",{cx:"116",cy:"90",rx:"9",ry:"10",fill:"white"}),r.jsx("circle",{cx:"84",cy:"91",r:"6",fill:"#2d4a3e",children:r.jsx("animate",{attributeName:"cy",values:"91;90;91",dur:"4s",repeatCount:"indefinite"})}),r.jsx("circle",{cx:"116",cy:"91",r:"6",fill:"#2d4a3e",children:r.jsx("animate",{attributeName:"cy",values:"91;90;91",dur:"4s",repeatCount:"indefinite"})}),r.jsx("circle",{cx:"84",cy:"91",r:"3",fill:"#1a1a2e"}),r.jsx("circle",{cx:"116",cy:"91",r:"3",fill:"#1a1a2e"}),r.jsx("ellipse",{cx:"86",cy:"88",rx:"2.5",ry:"3",fill:"white"}),r.jsx("ellipse",{cx:"118",cy:"88",rx:"2.5",ry:"3",fill:"white"}),r.jsx("circle",{cx:"82",cy:"93",r:"1",fill:"white",opacity:"0.7"}),r.jsx("circle",{cx:"114",cy:"93",r:"1",fill:"white",opacity:"0.7"}),r.jsx("ellipse",{cx:"70",cy:"102",rx:"7",ry:"4",fill:"#ffb5b5",opacity:"0.5"}),r.jsx("ellipse",{cx:"130",cy:"102",rx:"7",ry:"4",fill:"#ffb5b5",opacity:"0.5"}),r.jsx("path",{d:"M100 97 L99 102",stroke:"#daa89b",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"100",cy:"112",rx:a?5:6,ry:i,fill:"#d4726a"}),!a&&r.jsx("path",{d:"M94 110 Q100 116 106 110",stroke:"#d4726a",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),r.jsx("ellipse",{cx:"63",cy:"90",rx:"4",ry:"6",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("ellipse",{cx:"137",cy:"90",rx:"4",ry:"6",fill:`url(#skinGradient${s?"Mini":""})`}),r.jsx("circle",{cx:"135",cy:"165",r:"8",fill:"#ef4444"}),r.jsx("rect",{x:"133",y:"160",width:"4",height:"10",fill:"white",rx:"1"}),r.jsx("rect",{x:"130",y:"163",width:"10",height:"4",fill:"white",rx:"1"}),a&&r.jsxs(r.Fragment,{children:[r.jsxs("circle",{cx:"100",cy:"100",r:"90",stroke:"#10b981",strokeWidth:"2",fill:"none",opacity:"0.6",children:[r.jsx("animate",{attributeName:"r",values:"90;95;90",dur:"1.5s",repeatCount:"indefinite"}),r.jsx("animate",{attributeName:"opacity",values:"0.6;0.2;0.6",dur:"1.5s",repeatCount:"indefinite"})]}),r.jsxs("circle",{cx:"100",cy:"100",r:"95",stroke:"#34d399",strokeWidth:"1.5",fill:"none",opacity:"0.4",children:[r.jsx("animate",{attributeName:"r",values:"95;100;95",dur:"1.5s",repeatCount:"indefinite"}),r.jsx("animate",{attributeName:"opacity",values:"0.4;0.1;0.4",dur:"1.5s",repeatCount:"indefinite"})]})]})]})})},Zme=v.forwardRef(({videoRef:t,supportsVideo:e,onVideoStreamChange:n,textInput:a,onSubmitTextInput:i},s)=>{var E;const{connected:o,connect:l,disconnect:c,client:d,volume:f}=vd(),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_]=v.useState(()=>new hU),T=async()=>{o?await c():(await l(),a.trim()&&i())};v.useEffect(()=>{const I=L=>{d.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:L}])};return o&&!p?_.on("data",I).start():_.stop(),()=>{_.off("data",I),_.stop()}},[o,d,p,_]);const C=v.useCallback(async()=>{if(x)k==null||k.getTracks().forEach(I=>I.stop()),n(null),b(!1);else try{const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),b(!0)}catch(I){console.error("Error accessing webcam:",I),b(!1)}},[x,n,t]),P=v.useCallback(async()=>{if(j)k==null||k.getTracks().forEach(I=>I.stop()),n(null),S(!1);else try{const I=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),S(!0)}catch(I){console.error("Error accessing screen share:",I),S(!1)}},[j,n,t]),k=(E=t.current)==null?void 0:E.srcObject;return v.useEffect(()=>()=>{k&&k.getTracks().forEach(I=>I.stop())},[k]),v.useImperativeHandle(s,()=>({handleConnect:T})),r.jsx("div",{className:"live-api-control-tray",children:r.jsxs("div",{className:"live-api-control-tray-inner",children:[r.jsxs("div",{className:"live-api-control-group",children:[r.jsx("button",{onClick:()=>g(!p),disabled:!o,className:`live-api-control-button ${o&&!p?"mic-active":"mic-inactive"}`,"aria-label":p?"Unmute microphone":"Mute microphone",children:p?r.jsx(XX,{className:"w-5 h-5"}):r.jsx(FN,{className:"w-5 h-5"})}),r.jsx("div",{className:"live-api-mini-avatar-container",children:r.jsx(mU,{isActive:o,volume:f,size:"mini"})}),e&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:P,disabled:!o,className:`live-api-control-button ${j?"video-active":"video-inactive"}`,"aria-label":j?"Stop screen share":"Start screen share",children:r.jsx(nJ,{className:"w-5 h-5"})}),r.jsx("button",{onClick:C,disabled:!o,className:`live-api-control-button ${x?"video-active":"video-inactive"}`,"aria-label":x?"Turn off webcam":"Turn on webcam",children:r.jsx(uZ,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"live-api-control-group",children:[r.jsxs("div",{className:"live-api-status-indicator",children:[r.jsx("div",{className:`live-api-status-dot ${o?"connected":"disconnected"}`}),r.jsx("span",{className:"live-api-status-text",children:o?"Streaming":"Disconnected"})]}),r.jsx("button",{onClick:T,className:`live-api-connect-button ${o?"connected":"disconnected"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(hJ,{className:"w-5 h-5"}),r.jsx("span",{children:"Pause"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Wz,{className:"w-5 h-5"}),r.jsx("span",{children:"Start"})]})})]})]})})}),ege=({tokenNumber:t,aiSummary:e,clinicName:n,isActive:a,volume:i})=>r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-avatar-section",children:[r.jsx(mU,{isActive:a,volume:i}),r.jsx("div",{className:"avatar-status-text",children:a?"Listening...":"Ready to assist"})]}),r.jsxs("div",{className:"hospital-reception-info-section",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx("div",{className:"hospital-reception-logo",children:r.jsx("span",{children:n.charAt(0)})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"hospital-reception-title",children:[n," AI"]}),r.jsxs("p",{className:"hospital-reception-subtitle",children:["Intelligent ",n," Reception Assistant"]})]})]}),t&&r.jsxs("div",{className:"hospital-reception-token-card",children:[r.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),r.jsx("p",{className:"hospital-reception-token-number",children:t})]}),e&&r.jsxs("div",{className:"hospital-reception-summary-card",children:[r.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),r.jsx("p",{className:"hospital-reception-summary-text",children:e})]})]})]}),d3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:ig.OBJECT,properties:{summary:{type:ig.STRING,description:"The summary of the patient's case."}},required:["summary"]}},tge=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:i,voiceAiLanguage:s,lastMotionTimestamp:o,backgroundMode:l})=>{const c=v.useRef(null),d=v.useRef(null),[f,p]=v.useState(null),[g,x]=v.useState("hi"),{client:b,connected:j,setConfig:S,setModel:_,disconnect:T,connect:C,volume:P}=vd(),k=v.useRef(!1),E=v.useRef(Date.now()),I=v.useRef(!1);v.useEffect(()=>{k.current=j,j&&(E.current=Date.now(),I.current=!1)},[j]),v.useEffect(()=>{if(o){if(E.current=Date.now(),k.current)return;j||C()}},[o,C,j]),v.useEffect(()=>{if(!o||!j)return;const X=setInterval(()=>{const z=Date.now()-E.current;z>25e3&&z<3e4&&!I.current&&(I.current=!0,b.send([{text:"I'll be here if you need more help!"}])),z>3e4&&(console.log("No motion for 30s. Disconnecting session."),T(),t())},1e3);return()=>clearInterval(X)},[o,j,b,T,t]);const L=v.useMemo(()=>{let X=`Your job is to:

If patient details like name, age, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (Name, Age) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's Name and Age only. Do not ask for their phone number.

    You should guess the patient's sex based on their voice or appearance.

For every visit, collect the patient's history by asking questions.

CRITICAL WORKFLOW - DO NOT USE THE 'case_summary' TOOL YET.

Phase 1: History Collection (MANDATORY LOOP)
Once you have the basics, you MUST ask the patient about their complaints.
- Ask clarifying questions to understand the onset, duration, severity, and associated symptoms.
- DO NOT just accept a one-line complaint.
- Loop your questions until you are confident you have a complete medical history.

Phase 2: Billing Check Protocol
ONLY after you are confident you have the complete history, proceed to the Billing Check Protocol immediately:
1. Ask: 'Would you like to get the tests done?'
   - IF PATIENT SAYS YES: STOP questioning. Do NOT mention medications (they will get them after reports).
     Result -> Lab: Yes, Pharmacy: No.
   - IF PATIENT SAYS NO: Ask: 'Would you like to get the medications?'
     - IF YES: Result -> Lab: No, Pharmacy: Yes.
     - IF NO: Result -> Lab: No, Pharmacy: No.

Phase 3: Final Summary
Only AFTER establishing the billing preferences as per the logic above, you MUST call the 'case_summary' tool IMMEDIATELY.

CRITICAL INSTRUCTION: DO NOT output the summary as spoken text or thoughts. You MUST using the function call \`case_summary\`.

The 'case_summary' MUST be comprehensive and include:
- Patient Name, Age, Sex
- Medical History & Complaints
- Billing Preferences (e.g., 'Billing Preference: Lab - Yes, Pharmacy - No')

Do not call the tool multiple times. Wait until you have ALL the info, then generate the single final summary tool call. Do not say goodbye before calling the tool.`;e&&(X+=`

Patient Data: ${JSON.stringify(e,null,2)}`);const z={"en-US":"English","hi-IN":"Hindi","te-IN":"Telugu","bn-IN":"Bengali","mr-IN":"Marathi","ta-IN":"Tamil","gu-IN":"Gujarati","kn-IN":"Kannada","ml-IN":"Malayalam","pa-IN":"Punjabi","es-ES":"Spanish","fr-FR":"French","de-DE":"German","it-IT":"Italian","pt-PT":"Portuguese","ru-RU":"Russian","ja-JP":"Japanese","ko-KR":"Korean","zh-CN":"Chinese","ar-SA":"Arabic"}[s]||"English";return X+=` You should always speak in ${z}.`,s==="te-IN"&&(X+=" Dont write the telugu words in english."),{responseModalities:[hd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:X}]},tools:[{functionDeclarations:[d3]}]}},[e,s]);v.useEffect(()=>{if(_("models/gemini-2.5-flash-native-audio-preview-12-2025"),S(L),!o){const X=setTimeout(()=>{d.current&&!j&&d.current.handleConnect()},2e3);return()=>clearTimeout(X)}},[S,_,L,j,o]),v.useEffect(()=>()=>{j&&T()},[j,T]);const[$,q]=v.useState(null);v.useEffect(()=>{const X=Y=>{if(!Y.functionCalls)return;const z=Y.functionCalls.find(G=>G.name===d3.name);if(z){const G=z.args.summary;q(G),a(G),setTimeout(()=>{T(),t()},1e3)}Y.functionCalls.length&&setTimeout(()=>{var G;return b.sendToolResponse({functionResponses:(G=Y.functionCalls)==null?void 0:G.map(ie=>({response:{output:{success:!0}},id:ie.id,name:ie.name}))})},200)};return b.on("toolcall",X),()=>{b.off("toolcall",X)}},[b,a]);const F=()=>{g.trim()&&(b.send([{text:g}]),x(""))},H=X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),F())},V=async()=>{q(null),a(null),x("hi"),j?(T(),setTimeout(()=>{C()},500)):C()};return r.jsx("div",{className:"live-api-modal-overlay",style:l?{opacity:0,pointerEvents:"none",position:"absolute",zIndex:-1}:{},children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsxs("div",{className:"live-api-modal-header",children:[r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx("div",{className:"live-api-modal-logo",children:r.jsx("span",{children:i.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h1",{className:"live-api-modal-title",children:i}),r.jsxs("p",{className:"live-api-modal-subtitle",children:[i," Hospital Assistant"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:V,className:"live-api-modal-close-button",title:"Refresh Session","aria-label":"Refresh session",children:r.jsx(Kz,{className:"w-5 h-5"})}),r.jsx("button",{onClick:t,className:"live-api-modal-close-button","aria-label":"Close modal",children:r.jsx(Ft,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"live-api-reception-area",children:[r.jsx(ege,{patientData:e,tokenNumber:n,aiSummary:$,clinicName:i,isActive:j,volume:P}),f&&r.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),r.jsx("div",{className:"live-api-input-area",children:r.jsxs("div",{className:"live-api-input-container",children:[r.jsx("textarea",{value:g,onChange:X=>x(X.target.value),onKeyDown:H,placeholder:"Type your message here...",disabled:!j,rows:1,className:"live-api-textarea"}),r.jsx("button",{onClick:F,disabled:!j||!g.trim(),className:"live-api-send-button","aria-label":"Send message",children:r.jsx($N,{className:"w-5 h-5"})})]})}),r.jsx(Zme,{ref:d,videoRef:c,supportsVideo:!0,onVideoStreamChange:p,textInput:g,onSubmitTextInput:F})]})})]})})},nS=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,lastMotionTimestamp:i,backgroundMode:s})=>{const[o,l]=v.useState(null),[c,d]=v.useState("Newtons Ai"),[f,p]=v.useState("en-US"),[g,x]=v.useState(!0);if(v.useEffect(()=>{(async()=>{try{let S=null,_="Newtons Ai",T="en-US";try{const C=await se("/api/clinics/settings");if(C.ok){const P=await C.json();P.name&&P.name!==""&&(_=P.name),P.gemini_api_key&&P.gemini_api_key.trim()!==""&&(S=P.gemini_api_key.trim()),P.voice_ai_language&&(T=P.voice_ai_language)}}catch(C){console.warn("Failed to fetch clinic settings",C)}if(d(_),p(T),S)l(S);else{try{const C=await se("/api/global-settings/app_gemini_api_key");if(C.ok){const P=await C.json();if(P.value&&P.value.trim()!==""){l(P.value.trim());return}}}catch(C){console.warn("Failed to fetch global key fallback",C)}l(u3)}}catch(S){console.error("Unexpected error in getSettings:",S),l(u3)}finally{x(!1)}})()},[]),g)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsx("div",{className:"live-api-modal-header",style:{borderBottom:"none"},children:r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx(te,{variant:"circular",width:40,height:40}),r.jsxs("div",{style:{marginLeft:"12px"},children:[r.jsx(te,{width:120,height:24}),r.jsx(te,{width:180,height:14,style:{marginTop:"4px"}})]})]})}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx(te,{variant:"circular",width:64,height:64,style:{margin:"0 auto"}}),r.jsx(te,{width:200,height:32,style:{margin:"16px auto 8px"}}),r.jsx(te,{width:250,height:16,style:{margin:"0 auto"}})]}),r.jsxs("div",{className:"hospital-reception-token-card",style:{background:"transparent",boxShadow:"none"},children:[r.jsx(te,{width:140,height:20,style:{margin:"0 auto 8px"}}),r.jsx(te,{width:100,height:48,style:{margin:"0 auto"}})]})]})}),r.jsx("div",{className:"live-api-control-tray",style:{position:"relative"},children:r.jsx("div",{className:"live-api-control-tray-inner",style:{justifyContent:"center"},children:r.jsx("div",{className:"live-api-loading-text",children:"Initializing AI Assistant..."})})})]})});if(!o)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsx("div",{className:"live-api-modal-content",children:r.jsx("div",{children:"Error: API Key not available."})})});const b={apiKey:o};return r.jsx(tS,{options:b,children:r.jsx(tge,{onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:c,voiceAiLanguage:f,lastMotionTimestamp:i,backgroundMode:s})})},rS=()=>{const[t,e]=v.useState(null),[n,a]=v.useState(!0),[i,s]=v.useState(null),o=v.useCallback(async()=>{a(!0),s(null);try{const c=await se("/api/clinics/settings");if(!c.ok)throw new Error("Failed to fetch clinic settings");const d=await c.json();e(d)}catch(c){s(c instanceof Error?c.message:"An error occurred")}finally{a(!1)}},[]);v.useEffect(()=>{o()},[o]);const l=(t==null?void 0:t.custom_columns_config)||{};return{settings:t,customColumnsConfig:l,loading:n,error:i,refetch:o}},nge="_overlay_79cew_5",rge="_overlayMinimized_79cew_55",age="_modal_79cew_65",ige="_minimized_79cew_97",sge="_contentWrapper_79cew_113",oge="_exiting_79cew_161",lge="_header_79cew_183",cge="_inputWrapper_79cew_197",uge="_inputContainer_79cew_215",dge="_minimizedSearchIcon_79cew_273",hge="_input_79cew_197",fge="_controlsGroup_79cew_347",pge="_iconButton_79cew_373",mge="_sendButton_79cew_413",gge="_dragBar_79cew_459",yge="_dragBarTitle_79cew_489",xge="_dragBarControls_79cew_519",vge="_dragBarControlsRight_79cew_537",bge="_newChatBtn_79cew_553",jge="_windowControlBtn_79cew_589",wge="_content_79cew_113",Nge="_overlayContent_79cew_687",Sge="_section_79cew_711",_ge="_sectionTitle_79cew_723",Cge="_recentList_79cew_743",Tge="_recentPill_79cew_767",kge="_recentName_79cew_807",Age="_recentToken_79cew_819",Ege="_recentInfo_79cew_837",Pge="_examplesGrid_79cew_849",Dge="_exampleCard_79cew_861",Oge="_exampleIcon_79cew_897",Mge="_exampleText_79cew_905",Ige="_chatSectionFill_79cew_919",Rge="_chatMessagesFill_79cew_935",Lge="_chatBubble_79cew_955",Fge="_chatBubbleUser_79cew_975",$ge="_chatBubbleModel_79cew_991",Bge="_chatBubbleSystem_79cew_1009",zge="_processing_79cew_1025",qge="_spinner_79cew_1043",Uge="_resultItem_79cew_1065",Vge="_resultName_79cew_1093",Hge="_resultToken_79cew_1103",Gge="_resultDetails_79cew_1115",Wge="_noResults_79cew_1125",It={overlay:nge,overlayMinimized:rge,modal:age,minimized:ige,contentWrapper:sge,exiting:oge,header:lge,inputWrapper:cge,inputContainer:uge,minimizedSearchIcon:dge,input:hge,controlsGroup:fge,iconButton:pge,sendButton:mge,dragBar:gge,dragBarTitle:yge,dragBarControls:xge,dragBarControlsRight:vge,newChatBtn:bge,windowControlBtn:jge,content:wge,overlayContent:Nge,section:Sge,sectionTitle:_ge,recentList:Cge,recentPill:Tge,recentName:kge,recentToken:Age,recentInfo:Ege,examplesGrid:Pge,exampleCard:Dge,exampleIcon:Oge,exampleText:Mge,chatSectionFill:Ige,chatMessagesFill:Rge,chatBubble:Lge,chatBubbleUser:Fge,chatBubbleModel:$ge,chatBubbleSystem:Bge,processing:zge,spinner:qge,resultItem:Uge,resultName:Vge,resultToken:Hge,resultDetails:Gge,noResults:Wge},Rb=({columns:t,data:e,onSave:n,onRowAdd:a,onRowDelete:i,onRowClick:s,onRowHover:o,editable:l=!0,showRowNumbers:c=!0,title:d})=>{const[f,p]=v.useState(e),[g,x]=v.useState(null),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(null),[P,k]=v.useState(!1),[E,I]=v.useState(new Set);Se.useEffect(()=>{p(e),k(!1)},[e]);const L=v.useMemo(()=>{let z=[...f];if(S.trim()){const G=S.toLowerCase();z=z.filter(ie=>Object.values(ie).some(W=>W!=null&&String(W).toLowerCase().includes(G)))}return T&&z.sort((G,ie)=>{const W=G[T.key],B=ie[T.key];return W==null?1:B==null?-1:W<B?T.direction==="asc"?-1:1:W>B?T.direction==="asc"?1:-1:0}),z},[f,S,T]),$=(z,G)=>{var W;if(!l)return;const ie=t.find(B=>B.key===G);(ie==null?void 0:ie.editable)!==!1&&(x({row:z,col:G}),j(String(((W=f[z])==null?void 0:W[G])??"")))},q=()=>{var z;if(g){const G=[...f],ie=t.find(B=>B.key===g.col);let W=b;(ie==null?void 0:ie.type)==="number"&&(W=parseFloat(W)||0),(ie==null?void 0:ie.type)==="boolean"&&(W=W.toLowerCase()==="true"||W==="1"),((z=G[g.row])==null?void 0:z[g.col])!==W&&(G[g.row]={...G[g.row],[g.col]:W},p(G),k(!0))}x(null)},F=z=>{if(z.key==="Enter")q();else if(z.key==="Escape")x(null);else if(z.key==="Tab"&&(z.preventDefault(),q(),g)){const G=t.findIndex(W=>W.key===g.col),ie=t[G+1];ie?setTimeout(()=>$(g.row,ie.key),0):g.row<f.length-1&&setTimeout(()=>$(g.row+1,t[0].key),0)}},H=z=>{C(G=>(G==null?void 0:G.key)===z?G.direction==="asc"?{key:z,direction:"desc"}:null:{key:z,direction:"asc"})},V=()=>{n&&(n(f),k(!1))},X=()=>{const z=t.map(je=>je.label).join(","),G=f.map(je=>t.map(K=>{const Ie=je[K.key];return typeof Ie=="string"&&Ie.includes(",")?`"${Ie}"`:Ie}).join(",")),ie=[z,...G].join(`
`),W=new Blob([ie],{type:"text/csv"}),B=URL.createObjectURL(W),ce=document.createElement("a");ce.href=B,ce.download=`${d||"data"}.csv`,ce.click()},Y=z=>{const G=new Set(E);G.has(z)?G.delete(z):G.add(z),I(G)};return r.jsxs("div",{className:"excel-grid",children:[r.jsxs("div",{className:"excel-toolbar",children:[r.jsxs("div",{className:"excel-search",children:[r.jsx("input",{type:"text",placeholder:" Search...",value:S,onChange:z=>_(z.target.value)}),S&&r.jsx("button",{className:"clear-search",onClick:()=>_(""),children:r.jsx(Ft,{size:14})})]}),r.jsxs("div",{className:"excel-actions",children:[a&&r.jsxs("button",{onClick:a,className:"excel-btn",title:"Add Row",children:[r.jsx(Hn,{size:16})," Add"]}),r.jsxs("button",{onClick:X,className:"excel-btn",title:"Export CSV",children:[r.jsx(zz,{size:16})," Export"]}),l&&n&&r.jsxs("button",{onClick:V,className:`excel-btn save-btn ${P?"has-changes":""}`,disabled:!P,title:"Save Changes",children:[r.jsx(cs,{size:16})," Save"]})]})]}),r.jsxs("div",{className:"excel-status",children:[S&&r.jsxs("span",{children:["Showing ",L.length," of ",f.length]}),P&&r.jsx("span",{className:"unsaved-indicator",children:" Unsaved changes"})]}),r.jsx("div",{className:"excel-table-wrapper",children:r.jsxs("table",{className:"excel-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[c&&r.jsx("th",{className:"row-num-header",children:"#"}),t.map(z=>r.jsx("th",{onClick:()=>H(z.key),style:{width:z.width,cursor:"pointer"},children:r.jsxs("div",{className:"th-content",children:[z.label,(T==null?void 0:T.key)===z.key&&(T.direction==="asc"?r.jsx(YQ,{size:14}):r.jsx(Bz,{size:14}))]})},z.key)),i&&r.jsx("th",{className:"action-col",children:""})]})}),r.jsx("tbody",{children:L.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:t.length+(c?1:0)+(i?1:0),className:"no-data",children:"No data found"})}):L.map((z,G)=>r.jsxs("tr",{className:`${E.has(G)?"selected":""} ${s?"clickable-row":""}`,onClick:()=>s&&s(z,G),onMouseEnter:()=>o&&o(z,G),style:s?{cursor:"pointer"}:void 0,children:[c&&r.jsx("td",{className:"row-num",onClick:()=>Y(G),children:G+1}),t.map(ie=>r.jsx("td",{onClick:()=>$(G,ie.key),className:`
                                                ${(g==null?void 0:g.row)===G&&(g==null?void 0:g.col)===ie.key?"editing":""}
                                                ${ie.editable===!1?"read-only":""}
                                            `,children:(g==null?void 0:g.row)===G&&(g==null?void 0:g.col)===ie.key?r.jsx("input",{type:ie.type==="number"?"number":"text",value:b,onChange:W=>j(W.target.value),onBlur:q,onKeyDown:F,autoFocus:!0}):r.jsx("span",{children:z[ie.key]??""})},ie.key)),i&&r.jsx("td",{className:"action-col",children:r.jsx("button",{className:"delete-row",onClick:()=>i(G),children:r.jsx(Ft,{size:14})})})]},z.id||G))})]})}),r.jsxs("div",{className:"excel-footer",children:[r.jsxs("span",{children:[f.length," rows"]}),E.size>0&&r.jsxs("span",{children:[E.size," selected"]})]})]})};function gU(t){var e,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=gU(t[e]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function pn(){for(var t,e,n=0,a="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=gU(t))&&(a&&(a+=" "),a+=e);return a}var MC,h3;function fs(){if(h3)return MC;h3=1;var t=Array.isArray;return MC=t,MC}var IC,f3;function yU(){if(f3)return IC;f3=1;var t=typeof no=="object"&&no&&no.Object===Object&&no;return IC=t,IC}var RC,p3;function Bl(){if(p3)return RC;p3=1;var t=yU(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return RC=n,RC}var LC,m3;function Lb(){if(m3)return LC;m3=1;var t=Bl(),e=t.Symbol;return LC=e,LC}var FC,g3;function Kge(){if(g3)return FC;g3=1;var t=Lb(),e=Object.prototype,n=e.hasOwnProperty,a=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=n.call(o,i),c=o[i];try{o[i]=void 0;var d=!0}catch{}var f=a.call(o);return d&&(l?o[i]=c:delete o[i]),f}return FC=s,FC}var $C,y3;function Yge(){if(y3)return $C;y3=1;var t=Object.prototype,e=t.toString;function n(a){return e.call(a)}return $C=n,$C}var BC,x3;function Gc(){if(x3)return BC;x3=1;var t=Lb(),e=Kge(),n=Yge(),a="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:a:s&&s in Object(l)?e(l):n(l)}return BC=o,BC}var zC,v3;function Wc(){if(v3)return zC;v3=1;function t(e){return e!=null&&typeof e=="object"}return zC=t,zC}var qC,b3;function zg(){if(b3)return qC;b3=1;var t=Gc(),e=Wc(),n="[object Symbol]";function a(i){return typeof i=="symbol"||e(i)&&t(i)==n}return qC=a,qC}var UC,j3;function _O(){if(j3)return UC;j3=1;var t=fs(),e=zg(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:a.test(s)||!n.test(s)||o!=null&&s in Object(o)}return UC=i,UC}var VC,w3;function bd(){if(w3)return VC;w3=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return VC=t,VC}var HC,N3;function CO(){if(N3)return HC;N3=1;var t=Gc(),e=bd(),n="[object AsyncFunction]",a="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==a||c==i||c==n||c==s}return HC=o,HC}var GC,S3;function Qge(){if(S3)return GC;S3=1;var t=Bl(),e=t["__core-js_shared__"];return GC=e,GC}var WC,_3;function Xge(){if(_3)return WC;_3=1;var t=Qge(),e=function(){var a=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function n(a){return!!e&&e in a}return WC=n,WC}var KC,C3;function xU(){if(C3)return KC;C3=1;var t=Function.prototype,e=t.toString;function n(a){if(a!=null){try{return e.call(a)}catch{}try{return a+""}catch{}}return""}return KC=n,KC}var YC,T3;function Jge(){if(T3)return YC;T3=1;var t=CO(),e=Xge(),n=bd(),a=xU(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,f=RegExp("^"+c.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||e(g))return!1;var x=t(g)?f:s;return x.test(a(g))}return YC=p,YC}var QC,k3;function Zge(){if(k3)return QC;k3=1;function t(e,n){return e==null?void 0:e[n]}return QC=t,QC}var XC,A3;function Mf(){if(A3)return XC;A3=1;var t=Jge(),e=Zge();function n(a,i){var s=e(a,i);return t(s)?s:void 0}return XC=n,XC}var JC,E3;function aS(){if(E3)return JC;E3=1;var t=Mf(),e=t(Object,"create");return JC=e,JC}var ZC,P3;function eye(){if(P3)return ZC;P3=1;var t=aS();function e(){this.__data__=t?t(null):{},this.size=0}return ZC=e,ZC}var e2,D3;function tye(){if(D3)return e2;D3=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return e2=t,e2}var t2,O3;function nye(){if(O3)return t2;O3=1;var t=aS(),e="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return a.call(o,s)?o[s]:void 0}return t2=i,t2}var n2,M3;function rye(){if(M3)return n2;M3=1;var t=aS(),e=Object.prototype,n=e.hasOwnProperty;function a(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return n2=a,n2}var r2,I3;function aye(){if(I3)return r2;I3=1;var t=aS(),e="__lodash_hash_undefined__";function n(a,i){var s=this.__data__;return this.size+=this.has(a)?0:1,s[a]=t&&i===void 0?e:i,this}return r2=n,r2}var a2,R3;function iye(){if(R3)return a2;R3=1;var t=eye(),e=tye(),n=nye(),a=rye(),i=aye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,a2=s,a2}var i2,L3;function sye(){if(L3)return i2;L3=1;function t(){this.__data__=[],this.size=0}return i2=t,i2}var s2,F3;function TO(){if(F3)return s2;F3=1;function t(e,n){return e===n||e!==e&&n!==n}return s2=t,s2}var o2,$3;function iS(){if($3)return o2;$3=1;var t=TO();function e(n,a){for(var i=n.length;i--;)if(t(n[i][0],a))return i;return-1}return o2=e,o2}var l2,B3;function oye(){if(B3)return l2;B3=1;var t=iS(),e=Array.prototype,n=e.splice;function a(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return l2=a,l2}var c2,z3;function lye(){if(z3)return c2;z3=1;var t=iS();function e(n){var a=this.__data__,i=t(a,n);return i<0?void 0:a[i][1]}return c2=e,c2}var u2,q3;function cye(){if(q3)return u2;q3=1;var t=iS();function e(n){return t(this.__data__,n)>-1}return u2=e,u2}var d2,U3;function uye(){if(U3)return d2;U3=1;var t=iS();function e(n,a){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,a])):i[s][1]=a,this}return d2=e,d2}var h2,V3;function sS(){if(V3)return h2;V3=1;var t=sye(),e=oye(),n=lye(),a=cye(),i=uye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,h2=s,h2}var f2,H3;function kO(){if(H3)return f2;H3=1;var t=Mf(),e=Bl(),n=t(e,"Map");return f2=n,f2}var p2,G3;function dye(){if(G3)return p2;G3=1;var t=iye(),e=sS(),n=kO();function a(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return p2=a,p2}var m2,W3;function hye(){if(W3)return m2;W3=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return m2=t,m2}var g2,K3;function oS(){if(K3)return g2;K3=1;var t=hye();function e(n,a){var i=n.__data__;return t(a)?i[typeof a=="string"?"string":"hash"]:i.map}return g2=e,g2}var y2,Y3;function fye(){if(Y3)return y2;Y3=1;var t=oS();function e(n){var a=t(this,n).delete(n);return this.size-=a?1:0,a}return y2=e,y2}var x2,Q3;function pye(){if(Q3)return x2;Q3=1;var t=oS();function e(n){return t(this,n).get(n)}return x2=e,x2}var v2,X3;function mye(){if(X3)return v2;X3=1;var t=oS();function e(n){return t(this,n).has(n)}return v2=e,v2}var b2,J3;function gye(){if(J3)return b2;J3=1;var t=oS();function e(n,a){var i=t(this,n),s=i.size;return i.set(n,a),this.size+=i.size==s?0:1,this}return b2=e,b2}var j2,Z3;function AO(){if(Z3)return j2;Z3=1;var t=dye(),e=fye(),n=pye(),a=mye(),i=gye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,j2=s,j2}var w2,e5;function vU(){if(e5)return w2;e5=1;var t=AO(),e="Expected a function";function n(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var d=a.apply(this,o);return s.cache=c.set(l,d)||c,d};return s.cache=new(n.Cache||t),s}return n.Cache=t,w2=n,w2}var N2,t5;function yye(){if(t5)return N2;t5=1;var t=vU(),e=500;function n(a){var i=t(a,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return N2=n,N2}var S2,n5;function xye(){if(n5)return S2;n5=1;var t=yye(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,c,d){s.push(c?d.replace(n,"$1"):l||o)}),s});return S2=a,S2}var _2,r5;function EO(){if(r5)return _2;r5=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=Array(i);++a<i;)s[a]=n(e[a],a,e);return s}return _2=t,_2}var C2,a5;function vye(){if(a5)return C2;a5=1;var t=Lb(),e=EO(),n=fs(),a=zg(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(a(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return C2=o,C2}var T2,i5;function bU(){if(i5)return T2;i5=1;var t=vye();function e(n){return n==null?"":t(n)}return T2=e,T2}var k2,s5;function jU(){if(s5)return k2;s5=1;var t=fs(),e=_O(),n=xye(),a=bU();function i(s,o){return t(s)?s:e(s,o)?[s]:n(a(s))}return k2=i,k2}var A2,o5;function lS(){if(o5)return A2;o5=1;var t=zg();function e(n){if(typeof n=="string"||t(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return A2=e,A2}var E2,l5;function PO(){if(l5)return E2;l5=1;var t=jU(),e=lS();function n(a,i){i=t(i,a);for(var s=0,o=i.length;a!=null&&s<o;)a=a[e(i[s++])];return s&&s==o?a:void 0}return E2=n,E2}var P2,c5;function wU(){if(c5)return P2;c5=1;var t=PO();function e(n,a,i){var s=n==null?void 0:t(n,a);return s===void 0?i:s}return P2=e,P2}var bye=wU();const Is=Wn(bye);var D2,u5;function jye(){if(u5)return D2;u5=1;function t(e){return e==null}return D2=t,D2}var wye=jye();const hn=Wn(wye);var O2,d5;function Nye(){if(d5)return O2;d5=1;var t=Gc(),e=fs(),n=Wc(),a="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==a}return O2=i,O2}var Sye=Nye();const _f=Wn(Sye);var _ye=CO();const an=Wn(_ye);var Cye=bd();const qg=Wn(Cye);var M2={exports:{}},dr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h5;function Tye(){if(h5)return dr;h5=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function j(S){if(typeof S=="object"&&S!==null){var _=S.$$typeof;switch(_){case t:switch(S=S.type,S){case n:case i:case a:case d:case f:return S;default:switch(S=S&&S.$$typeof,S){case l:case o:case c:case g:case p:case s:return S;default:return _}}case e:return _}}}return dr.ContextConsumer=o,dr.ContextProvider=s,dr.Element=t,dr.ForwardRef=c,dr.Fragment=n,dr.Lazy=g,dr.Memo=p,dr.Portal=e,dr.Profiler=i,dr.StrictMode=a,dr.Suspense=d,dr.SuspenseList=f,dr.isAsyncMode=function(){return!1},dr.isConcurrentMode=function(){return!1},dr.isContextConsumer=function(S){return j(S)===o},dr.isContextProvider=function(S){return j(S)===s},dr.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},dr.isForwardRef=function(S){return j(S)===c},dr.isFragment=function(S){return j(S)===n},dr.isLazy=function(S){return j(S)===g},dr.isMemo=function(S){return j(S)===p},dr.isPortal=function(S){return j(S)===e},dr.isProfiler=function(S){return j(S)===i},dr.isStrictMode=function(S){return j(S)===a},dr.isSuspense=function(S){return j(S)===d},dr.isSuspenseList=function(S){return j(S)===f},dr.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===i||S===a||S===d||S===f||S===x||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===p||S.$$typeof===s||S.$$typeof===o||S.$$typeof===c||S.$$typeof===b||S.getModuleId!==void 0)},dr.typeOf=j,dr}var f5;function kye(){return f5||(f5=1,M2.exports=Tye()),M2.exports}var Aye=kye(),I2,p5;function NU(){if(p5)return I2;p5=1;var t=Gc(),e=Wc(),n="[object Number]";function a(i){return typeof i=="number"||e(i)&&t(i)==n}return I2=a,I2}var R2,m5;function Eye(){if(m5)return R2;m5=1;var t=NU();function e(n){return t(n)&&n!=+n}return R2=e,R2}var Pye=Eye();const Ug=Wn(Pye);var Dye=NU();const Oye=Wn(Dye);var Ri=function(e){return e===0?0:e>0?1:-1},Xh=function(e){return _f(e)&&e.indexOf("%")===e.length-1},Nt=function(e){return Oye(e)&&!Ug(e)},Mye=function(e){return hn(e)},Ca=function(e){return Nt(e)||_f(e)},Iye=0,If=function(e){var n=++Iye;return"".concat(e||"").concat(n)},Li=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Nt(e)&&!_f(e))return a;var s;if(Xh(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return Ug(s)&&(s=a),i&&s>n&&(s=n),s},Ku=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Rye=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,a={},i=0;i<n;i++)if(!a[e[i]])a[e[i]]=!0;else return!0;return!1},_a=function(e,n){return Nt(e)&&Nt(n)?function(a){return e+a*(n-e)}:function(){return n}};function Aw(t,e,n){return!t||!t.length?null:t.find(function(a){return a&&(typeof e=="function"?e(a):Is(a,e))===n})}var Lye=function(e,n){return Nt(e)&&Nt(n)?e-n:_f(e)&&_f(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Fm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var a in e)if({}.hasOwnProperty.call(e,a)&&!{}.hasOwnProperty.call(t,a))return!1;return!0}function eP(t){"@babel/helpers - typeof";return eP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eP(t)}var Fye=["viewBox","children"],$ye=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],g5=["points","pathLength"],L2={svg:Fye,polygon:g5,polyline:g5},DO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ew=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(v.isValidElement(e)&&(a=e.props),!qg(a))return null;var i={};return Object.keys(a).forEach(function(s){DO.includes(s)&&(i[s]=n||function(o){return a[s](a,o)})}),i},Bye=function(e,n,a){return function(i){return e(n,a,i),null}},Cf=function(e,n,a){if(!qg(e)||eP(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];DO.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=Bye(o,n,a))}),i},zye=["children"],qye=["children"];function y5(t,e){if(t==null)return{};var n=Uye(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Uye(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function tP(t){"@babel/helpers - typeof";return tP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tP(t)}var x5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ec=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},v5=null,F2=null,OO=function t(e){if(e===v5&&Array.isArray(F2))return F2;var n=[];return v.Children.forEach(e,function(a){hn(a)||(Aye.isFragment(a)?n=n.concat(t(a.props.children)):n.push(a))}),F2=n,v5=e,n};function Rs(t,e){var n=[],a=[];return Array.isArray(e)?a=e.map(function(i){return Ec(i)}):a=[Ec(e)],OO(t).forEach(function(i){var s=Is(i,"type.displayName")||Is(i,"type.name");a.indexOf(s)!==-1&&n.push(i)}),n}function ks(t,e){var n=Rs(t,e);return n&&n[0]}var b5=function(e){if(!e||!e.props)return!1;var n=e.props,a=n.width,i=n.height;return!(!Nt(a)||a<=0||!Nt(i)||i<=0)},Vye=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Hye=function(e){return e&&e.type&&_f(e.type)&&Vye.indexOf(e.type)>=0},SU=function(e){return e&&tP(e)==="object"&&"clipDot"in e},Gye=function(e,n,a,i){var s,o=(s=L2==null?void 0:L2[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!an(e)&&(i&&o.includes(n)||$ye.includes(n))||a&&DO.includes(n)},zt=function(e,n,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(v.isValidElement(e)&&(i=e.props),!qg(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;Gye((l=i)===null||l===void 0?void 0:l[o],o,n,a)&&(s[o]=i[o])}),s},nP=function t(e,n){if(e===n)return!0;var a=v.Children.count(e);if(a!==v.Children.count(n))return!1;if(a===0)return!0;if(a===1)return j5(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<a;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!j5(s,o))return!1}return!0},j5=function(e,n){if(hn(e)&&hn(n))return!0;if(!hn(e)&&!hn(n)){var a=e.props||{},i=a.children,s=y5(a,zye),o=n.props||{},l=o.children,c=y5(o,qye);return i&&l?Fm(s,c)&&nP(i,l):!i&&!l?Fm(s,c):!1}return!1},w5=function(e,n){var a=[],i={};return OO(e).forEach(function(s,o){if(Hye(s))a.push(s);else if(s){var l=Ec(s.type),c=n[l]||{},d=c.handler,f=c.once;if(d&&(!f||!i[l])){var p=d(s,l,o);a.push(p),i[l]=!0}}}),a},Wye=function(e){var n=e&&e.type;return n&&x5[n]?x5[n]:null},Kye=function(e,n){return OO(n).indexOf(e)},Yye=["children","width","height","viewBox","className","style","title","desc"];function rP(){return rP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rP.apply(this,arguments)}function Qye(t,e){if(t==null)return{};var n=Xye(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Xye(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function aP(t){var e=t.children,n=t.width,a=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,d=Qye(t,Yye),f=i||{width:n,height:a,x:0,y:0},p=pn("recharts-surface",s);return Se.createElement("svg",rP({},zt(d,!0,"svg"),{className:p,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Se.createElement("title",null,l),Se.createElement("desc",null,c),e)}var Jye=["children","className"];function iP(){return iP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},iP.apply(this,arguments)}function Zye(t,e){if(t==null)return{};var n=exe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function exe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var Mn=Se.forwardRef(function(t,e){var n=t.children,a=t.className,i=Zye(t,Jye),s=pn("recharts-layer",a);return Se.createElement("g",iP({className:s},zt(i,!0),{ref:e}),n)}),Bo=function(e,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s]},$2,N5;function txe(){if(N5)return $2;N5=1;function t(e,n,a){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),a=a>s?s:a,a<0&&(a+=s),s=n>a?0:a-n>>>0,n>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+n];return o}return $2=t,$2}var B2,S5;function nxe(){if(S5)return B2;S5=1;var t=txe();function e(n,a,i){var s=n.length;return i=i===void 0?s:i,!a&&i>=s?n:t(n,a,i)}return B2=e,B2}var z2,_5;function _U(){if(_5)return z2;_5=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function c(d){return l.test(d)}return z2=c,z2}var q2,C5;function rxe(){if(C5)return q2;C5=1;function t(e){return e.split("")}return q2=t,q2}var U2,T5;function axe(){if(T5)return U2;T5=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",b=d+"?",j="["+s+"]?",S="(?:"+x+"(?:"+[f,p,g].join("|")+")"+j+b+")*",_=j+b+S,T="(?:"+[f+l+"?",l,p,g,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+T+_,"g");function P(k){return k.match(C)||[]}return U2=P,U2}var V2,k5;function ixe(){if(k5)return V2;k5=1;var t=rxe(),e=_U(),n=axe();function a(i){return e(i)?n(i):t(i)}return V2=a,V2}var H2,A5;function sxe(){if(A5)return H2;A5=1;var t=nxe(),e=_U(),n=ixe(),a=bU();function i(s){return function(o){o=a(o);var l=e(o)?n(o):void 0,c=l?l[0]:o.charAt(0),d=l?t(l,1).join(""):o.slice(1);return c[s]()+d}}return H2=i,H2}var G2,E5;function oxe(){if(E5)return G2;E5=1;var t=sxe(),e=t("toUpperCase");return G2=e,G2}var lxe=oxe();const cS=Wn(lxe);function Ir(t){return function(){return t}}const CU=Math.cos,Pw=Math.sin,Wo=Math.sqrt,Dw=Math.PI,uS=2*Dw,sP=Math.PI,oP=2*sP,Vh=1e-6,cxe=oP-Vh;function TU(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function uxe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return TU;const n=10**e;return function(a){this._+=a[0];for(let i=1,s=a.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}class dxe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?TU:uxe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,a,i){this._append`Q${+e},${+n},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(e,n,a,i,s,o){this._append`C${+e},${+n},${+a},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,a,i,s){if(e=+e,n=+n,a=+a,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=a-e,d=i-n,f=o-e,p=l-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Vh)if(!(Math.abs(p*c-d*f)>Vh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let x=a-o,b=i-l,j=c*c+d*d,S=x*x+b*b,_=Math.sqrt(j),T=Math.sqrt(g),C=s*Math.tan((sP-Math.acos((j+g-S)/(2*_*T)))/2),P=C/T,k=C/_;Math.abs(P-1)>Vh&&this._append`L${e+P*f},${n+P*p}`,this._append`A${s},${s},0,0,${+(p*x>f*b)},${this._x1=e+k*c},${this._y1=n+k*d}`}}arc(e,n,a,i,s,o){if(e=+e,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(i),c=a*Math.sin(i),d=e+l,f=n+c,p=1^o,g=o?i-s:s-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Vh||Math.abs(this._y1-f)>Vh)&&this._append`L${d},${f}`,a&&(g<0&&(g=g%oP+oP),g>cxe?this._append`A${a},${a},0,1,${p},${e-l},${n-c}A${a},${a},0,1,${p},${this._x1=d},${this._y1=f}`:g>Vh&&this._append`A${a},${a},0,${+(g>=sP)},${p},${this._x1=e+a*Math.cos(s)},${this._y1=n+a*Math.sin(s)}`)}rect(e,n,a,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function MO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);e=a}return t},()=>new dxe(e)}function IO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function kU(t){this._context=t}kU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function dS(t){return new kU(t)}function AU(t){return t[0]}function EU(t){return t[1]}function PU(t,e){var n=Ir(!0),a=null,i=dS,s=null,o=MO(l);t=typeof t=="function"?t:t===void 0?AU:Ir(t),e=typeof e=="function"?e:e===void 0?EU:Ir(e);function l(c){var d,f=(c=IO(c)).length,p,g=!1,x;for(a==null&&(s=i(x=o())),d=0;d<=f;++d)!(d<f&&n(p=c[d],d,c))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(p,d,c),+e(p,d,c));if(x)return s=null,x+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ir(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ir(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ir(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,a!=null&&(s=i(a)),l):i},l.context=function(c){return arguments.length?(c==null?a=s=null:s=i(a=c),l):a},l}function kj(t,e,n){var a=null,i=Ir(!0),s=null,o=dS,l=null,c=MO(d);t=typeof t=="function"?t:t===void 0?AU:Ir(+t),e=typeof e=="function"?e:Ir(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?EU:Ir(+n);function d(p){var g,x,b,j=(p=IO(p)).length,S,_=!1,T,C=new Array(j),P=new Array(j);for(s==null&&(l=o(T=c())),g=0;g<=j;++g){if(!(g<j&&i(S=p[g],g,p))===_)if(_=!_)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=g-1;b>=x;--b)l.point(C[b],P[b]);l.lineEnd(),l.areaEnd()}_&&(C[g]=+t(S,g,p),P[g]=+e(S,g,p),l.point(a?+a(S,g,p):C[g],n?+n(S,g,p):P[g]))}if(T)return l=null,T+""||null}function f(){return PU().defined(i).curve(o).context(s)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:Ir(+p),a=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Ir(+p),d):t},d.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:Ir(+p),d):a},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:Ir(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Ir(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Ir(+p),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(a).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Ir(!!p),d):i},d.curve=function(p){return arguments.length?(o=p,s!=null&&(l=o(s)),d):o},d.context=function(p){return arguments.length?(p==null?s=l=null:l=o(s=p),d):s},d}class DU{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function hxe(t){return new DU(t,!0)}function fxe(t){return new DU(t,!1)}const RO={draw(t,e){const n=Wo(e/Dw);t.moveTo(n,0),t.arc(0,0,n,0,uS)}},pxe={draw(t,e){const n=Wo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},OU=Wo(1/3),mxe=OU*2,gxe={draw(t,e){const n=Wo(e/mxe),a=n*OU;t.moveTo(0,-n),t.lineTo(a,0),t.lineTo(0,n),t.lineTo(-a,0),t.closePath()}},yxe={draw(t,e){const n=Wo(e),a=-n/2;t.rect(a,a,n,n)}},xxe=.8908130915292852,MU=Pw(Dw/10)/Pw(7*Dw/10),vxe=Pw(uS/10)*MU,bxe=-CU(uS/10)*MU,jxe={draw(t,e){const n=Wo(e*xxe),a=vxe*n,i=bxe*n;t.moveTo(0,-n),t.lineTo(a,i);for(let s=1;s<5;++s){const o=uS*s/5,l=CU(o),c=Pw(o);t.lineTo(c*n,-l*n),t.lineTo(l*a-c*i,c*a+l*i)}t.closePath()}},W2=Wo(3),wxe={draw(t,e){const n=-Wo(e/(W2*3));t.moveTo(0,n*2),t.lineTo(-W2*n,-n),t.lineTo(W2*n,-n),t.closePath()}},Qs=-.5,Xs=Wo(3)/2,lP=1/Wo(12),Nxe=(lP/2+1)*3,Sxe={draw(t,e){const n=Wo(e/Nxe),a=n/2,i=n*lP,s=a,o=n*lP+n,l=-s,c=o;t.moveTo(a,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Qs*a-Xs*i,Xs*a+Qs*i),t.lineTo(Qs*s-Xs*o,Xs*s+Qs*o),t.lineTo(Qs*l-Xs*c,Xs*l+Qs*c),t.lineTo(Qs*a+Xs*i,Qs*i-Xs*a),t.lineTo(Qs*s+Xs*o,Qs*o-Xs*s),t.lineTo(Qs*l+Xs*c,Qs*c-Xs*l),t.closePath()}};function _xe(t,e){let n=null,a=MO(i);t=typeof t=="function"?t:Ir(t||RO),e=typeof e=="function"?e:Ir(e===void 0?64:+e);function i(){let s;if(n||(n=s=a()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Ir(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Ir(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Ow(){}function Mw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function IU(t){this._context=t}IU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Cxe(t){return new IU(t)}function RU(t){this._context=t}RU.prototype={areaStart:Ow,areaEnd:Ow,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Mw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Txe(t){return new RU(t)}function LU(t){this._context=t}LU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,a=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Mw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function kxe(t){return new LU(t)}function FU(t){this._context=t}FU.prototype={areaStart:Ow,areaEnd:Ow,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Axe(t){return new FU(t)}function P5(t){return t<0?-1:1}function D5(t,e,n){var a=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(a||i<0&&-0),o=(n-t._y1)/(i||a<0&&-0),l=(s*i+o*a)/(a+i);return(P5(s)+P5(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function O5(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function K2(t,e,n){var a=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-a)/3;t._context.bezierCurveTo(a+l,i+l*e,s-l,o-l*n,s,o)}function Iw(t){this._context=t}Iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:K2(this,this._t0,O5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,K2(this,O5(this,n=D5(this,t,e)),n);break;default:K2(this,this._t0,n=D5(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function $U(t){this._context=new BU(t)}($U.prototype=Object.create(Iw.prototype)).point=function(t,e){Iw.prototype.point.call(this,e,t)};function BU(t){this._context=t}BU.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,a,i,s){this._context.bezierCurveTo(e,t,a,n,s,i)}};function Exe(t){return new Iw(t)}function Pxe(t){return new $U(t)}function zU(t){this._context=t}zU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var a=M5(t),i=M5(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(a[0][s],i[0][s],a[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function M5(t){var e,n=t.length-1,a,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)a=i[e]/s[e-1],s[e]-=a,o[e]-=a*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Dxe(t){return new zU(t)}function hS(t,e){this._context=t,this._t=e}hS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Oxe(t){return new hS(t,.5)}function Mxe(t){return new hS(t,0)}function Ixe(t){return new hS(t,1)}function og(t,e){if((o=t.length)>1)for(var n=1,a,i,s=t[e[0]],o,l=s.length;n<o;++n)for(i=s,s=t[e[n]],a=0;a<l;++a)s[a][1]+=s[a][0]=isNaN(i[a][1])?i[a][0]:i[a][1]}function cP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Rxe(t,e){return t[e]}function Lxe(t){const e=[];return e.key=t,e}function Fxe(){var t=Ir([]),e=cP,n=og,a=Rxe;function i(s){var o=Array.from(t.apply(this,arguments),Lxe),l,c=o.length,d=-1,f;for(const p of s)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(p,o[l].key,d,s)]).data=p;for(l=0,f=IO(e(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Ir(Array.from(s)),i):t},i.value=function(s){return arguments.length?(a=typeof s=="function"?s:Ir(+s),i):a},i.order=function(s){return arguments.length?(e=s==null?cP:typeof s=="function"?s:Ir(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??og,i):n},i}function $xe(t,e){if((a=t.length)>0){for(var n,a,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<a;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<a;++n)t[n][i][1]/=o}og(t,e)}}function Bxe(t,e){if((i=t.length)>0){for(var n=0,a=t[e[0]],i,s=a.length;n<s;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;a[n][1]+=a[n][0]=-l/2}og(t,e)}}function zxe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,a=1,i,s,o;a<s;++a){for(var l=0,c=0,d=0;l<o;++l){for(var f=t[e[l]],p=f[a][1]||0,g=f[a-1][1]||0,x=(p-g)/2,b=0;b<l;++b){var j=t[e[b]],S=j[a][1]||0,_=j[a-1][1]||0;x+=S-_}c+=p,d+=x*p}i[a-1][1]+=i[a-1][0]=n,c&&(n-=d/c)}i[a-1][1]+=i[a-1][0]=n,og(t,e)}}function Rv(t){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(t)}var qxe=["type","size","sizeType"];function uP(){return uP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},uP.apply(this,arguments)}function I5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function R5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(n),!0).forEach(function(a){Uxe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Uxe(t,e,n){return e=Vxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vxe(t){var e=Hxe(t,"string");return Rv(e)=="symbol"?e:e+""}function Hxe(t,e){if(Rv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Rv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gxe(t,e){if(t==null)return{};var n=Wxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Wxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var qU={symbolCircle:RO,symbolCross:pxe,symbolDiamond:gxe,symbolSquare:yxe,symbolStar:jxe,symbolTriangle:wxe,symbolWye:Sxe},Kxe=Math.PI/180,Yxe=function(e){var n="symbol".concat(cS(e));return qU[n]||RO},Qxe=function(e,n,a){if(n==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Kxe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Xxe=function(e,n){qU["symbol".concat(cS(e))]=n},LO=function(e){var n=e.type,a=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=Gxe(e,qxe),d=R5(R5({},c),{},{type:a,size:s,sizeType:l}),f=function(){var S=Yxe(a),_=_xe().type(S).size(Qxe(s,l,a));return _()},p=d.className,g=d.cx,x=d.cy,b=zt(d,!0);return g===+g&&x===+x&&s===+s?Se.createElement("path",uP({},b,{className:pn("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(x,")"),d:f()})):null};LO.registerSymbol=Xxe;function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}function dP(){return dP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},dP.apply(this,arguments)}function L5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Jxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(n),!0).forEach(function(a){Lv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Zxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eve(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,VU(a.key),a)}}function tve(t,e,n){return e&&eve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nve(t,e,n){return e=Rw(e),rve(t,UU()?Reflect.construct(e,n||[],Rw(t).constructor):e.apply(t,n))}function rve(t,e){if(e&&(lg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ave(t)}function ave(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UU=function(){return!!t})()}function Rw(t){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rw(t)}function ive(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hP(t,e)}function hP(t,e){return hP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},hP(t,e)}function Lv(t,e,n){return e=VU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VU(t){var e=sve(t,"string");return lg(e)=="symbol"?e:e+""}function sve(t,e){if(lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(lg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Po=32,FO=function(t){function e(){return Zxe(this,e),nve(this,e,arguments)}return ive(e,t),tve(e,[{key:"renderIcon",value:function(a){var i=this.props.inactiveColor,s=Po/2,o=Po/6,l=Po/3,c=a.inactive?i:a.color;if(a.type==="plainline")return Se.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:s,x2:Po,y2:s,className:"recharts-legend-icon"});if(a.type==="line")return Se.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Po,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(a.type==="rect")return Se.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Po/8,"h").concat(Po,"v").concat(Po*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Se.isValidElement(a.legendIcon)){var d=Jxe({},a);return delete d.legendIcon,Se.cloneElement(a.legendIcon,d)}return Se.createElement(LO,{fill:c,cx:s,cy:s,size:Po,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,f={x:0,y:0,width:Po,height:Po},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(x,b){var j=x.formatter||c,S=pn(Lv(Lv({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",x.inactive));if(x.type==="none")return null;var _=an(x.value)?null:x.value;Bo(!an(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=x.inactive?d:x.color;return Se.createElement("li",dP({className:S,style:p,key:"legend-item-".concat(b)},Cf(a.props,x,b)),Se.createElement(aP,{width:o,height:o,viewBox:f,style:g},a.renderIcon(x)),Se.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},j?j(_,x,b):_))})}},{key:"render",value:function(){var a=this.props,i=a.payload,s=a.layout,o=a.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Se.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(v.PureComponent);Lv(FO,"displayName","Legend");Lv(FO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Y2,F5;function ove(){if(F5)return Y2;F5=1;var t=sS();function e(){this.__data__=new t,this.size=0}return Y2=e,Y2}var Q2,$5;function lve(){if($5)return Q2;$5=1;function t(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}return Q2=t,Q2}var X2,B5;function cve(){if(B5)return X2;B5=1;function t(e){return this.__data__.get(e)}return X2=t,X2}var J2,z5;function uve(){if(z5)return J2;z5=1;function t(e){return this.__data__.has(e)}return J2=t,J2}var Z2,q5;function dve(){if(q5)return Z2;q5=1;var t=sS(),e=kO(),n=AO(),a=200;function i(s,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<a-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return Z2=i,Z2}var eT,U5;function HU(){if(U5)return eT;U5=1;var t=sS(),e=ove(),n=lve(),a=cve(),i=uve(),s=dve();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=a,o.prototype.has=i,o.prototype.set=s,eT=o,eT}var tT,V5;function hve(){if(V5)return tT;V5=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return tT=e,tT}var nT,H5;function fve(){if(H5)return nT;H5=1;function t(e){return this.__data__.has(e)}return nT=t,nT}var rT,G5;function GU(){if(G5)return rT;G5=1;var t=AO(),e=hve(),n=fve();function a(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return a.prototype.add=a.prototype.push=e,a.prototype.has=n,rT=a,rT}var aT,W5;function WU(){if(W5)return aT;W5=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(e[a],a,e))return!0;return!1}return aT=t,aT}var iT,K5;function KU(){if(K5)return iT;K5=1;function t(e,n){return e.has(n)}return iT=t,iT}var sT,Y5;function YU(){if(Y5)return sT;Y5=1;var t=GU(),e=WU(),n=KU(),a=1,i=2;function s(o,l,c,d,f,p){var g=c&a,x=o.length,b=l.length;if(x!=b&&!(g&&b>x))return!1;var j=p.get(o),S=p.get(l);if(j&&S)return j==l&&S==o;var _=-1,T=!0,C=c&i?new t:void 0;for(p.set(o,l),p.set(l,o);++_<x;){var P=o[_],k=l[_];if(d)var E=g?d(k,P,_,l,o,p):d(P,k,_,o,l,p);if(E!==void 0){if(E)continue;T=!1;break}if(C){if(!e(l,function(I,L){if(!n(C,L)&&(P===I||f(P,I,c,d,p)))return C.push(L)})){T=!1;break}}else if(!(P===k||f(P,k,c,d,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return sT=s,sT}var oT,Q5;function pve(){if(Q5)return oT;Q5=1;var t=Bl(),e=t.Uint8Array;return oT=e,oT}var lT,X5;function mve(){if(X5)return lT;X5=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i,s){a[++n]=[s,i]}),a}return lT=t,lT}var cT,J5;function $O(){if(J5)return cT;J5=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i){a[++n]=i}),a}return cT=t,cT}var uT,Z5;function gve(){if(Z5)return uT;Z5=1;var t=Lb(),e=pve(),n=TO(),a=YU(),i=mve(),s=$O(),o=1,l=2,c="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",x="[object RegExp]",b="[object Set]",j="[object String]",S="[object Symbol]",_="[object ArrayBuffer]",T="[object DataView]",C=t?t.prototype:void 0,P=C?C.valueOf:void 0;function k(E,I,L,$,q,F,H){switch(L){case T:if(E.byteLength!=I.byteLength||E.byteOffset!=I.byteOffset)return!1;E=E.buffer,I=I.buffer;case _:return!(E.byteLength!=I.byteLength||!F(new e(E),new e(I)));case c:case d:case g:return n(+E,+I);case f:return E.name==I.name&&E.message==I.message;case x:case j:return E==I+"";case p:var V=i;case b:var X=$&o;if(V||(V=s),E.size!=I.size&&!X)return!1;var Y=H.get(E);if(Y)return Y==I;$|=l,H.set(E,I);var z=a(V(E),V(I),$,q,F,H);return H.delete(E),z;case S:if(P)return P.call(E)==P.call(I)}return!1}return uT=k,uT}var dT,e6;function QU(){if(e6)return dT;e6=1;function t(e,n){for(var a=-1,i=n.length,s=e.length;++a<i;)e[s+a]=n[a];return e}return dT=t,dT}var hT,t6;function yve(){if(t6)return hT;t6=1;var t=QU(),e=fs();function n(a,i,s){var o=i(a);return e(a)?o:t(o,s(a))}return hT=n,hT}var fT,n6;function xve(){if(n6)return fT;n6=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=0,o=[];++a<i;){var l=e[a];n(l,a,e)&&(o[s++]=l)}return o}return fT=t,fT}var pT,r6;function vve(){if(r6)return pT;r6=1;function t(){return[]}return pT=t,pT}var mT,a6;function bve(){if(a6)return mT;a6=1;var t=xve(),e=vve(),n=Object.prototype,a=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return a.call(o,l)}))}:e;return mT=s,mT}var gT,i6;function jve(){if(i6)return gT;i6=1;function t(e,n){for(var a=-1,i=Array(e);++a<e;)i[a]=n(a);return i}return gT=t,gT}var yT,s6;function wve(){if(s6)return yT;s6=1;var t=Gc(),e=Wc(),n="[object Arguments]";function a(i){return e(i)&&t(i)==n}return yT=a,yT}var xT,o6;function BO(){if(o6)return xT;o6=1;var t=wve(),e=Wc(),n=Object.prototype,a=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return e(o)&&a.call(o,"callee")&&!i.call(o,"callee")};return xT=s,xT}var pv={exports:{}},vT,l6;function Nve(){if(l6)return vT;l6=1;function t(){return!1}return vT=t,vT}pv.exports;var c6;function XU(){return c6||(c6=1,function(t,e){var n=Bl(),a=Nve(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;t.exports=d}(pv,pv.exports)),pv.exports}var bT,u6;function zO(){if(u6)return bT;u6=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(a,i){var s=typeof a;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(a))&&a>-1&&a%1==0&&a<i}return bT=n,bT}var jT,d6;function qO(){if(d6)return jT;d6=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return jT=e,jT}var wT,h6;function Sve(){if(h6)return wT;h6=1;var t=Gc(),e=qO(),n=Wc(),a="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",x="[object Set]",b="[object String]",j="[object WeakMap]",S="[object ArrayBuffer]",_="[object DataView]",T="[object Float32Array]",C="[object Float64Array]",P="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",L="[object Uint8ClampedArray]",$="[object Uint16Array]",q="[object Uint32Array]",F={};F[T]=F[C]=F[P]=F[k]=F[E]=F[I]=F[L]=F[$]=F[q]=!0,F[a]=F[i]=F[S]=F[s]=F[_]=F[o]=F[l]=F[c]=F[d]=F[f]=F[p]=F[g]=F[x]=F[b]=F[j]=!1;function H(V){return n(V)&&e(V.length)&&!!F[t(V)]}return wT=H,wT}var NT,f6;function JU(){if(f6)return NT;f6=1;function t(e){return function(n){return e(n)}}return NT=t,NT}var mv={exports:{}};mv.exports;var p6;function _ve(){return p6||(p6=1,function(t,e){var n=yU(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,o=s&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(mv,mv.exports)),mv.exports}var ST,m6;function ZU(){if(m6)return ST;m6=1;var t=Sve(),e=JU(),n=_ve(),a=n&&n.isTypedArray,i=a?e(a):t;return ST=i,ST}var _T,g6;function Cve(){if(g6)return _T;g6=1;var t=jve(),e=BO(),n=fs(),a=XU(),i=zO(),s=ZU(),o=Object.prototype,l=o.hasOwnProperty;function c(d,f){var p=n(d),g=!p&&e(d),x=!p&&!g&&a(d),b=!p&&!g&&!x&&s(d),j=p||g||x||b,S=j?t(d.length,String):[],_=S.length;for(var T in d)(f||l.call(d,T))&&!(j&&(T=="length"||x&&(T=="offset"||T=="parent")||b&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,_)))&&S.push(T);return S}return _T=c,_T}var CT,y6;function Tve(){if(y6)return CT;y6=1;var t=Object.prototype;function e(n){var a=n&&n.constructor,i=typeof a=="function"&&a.prototype||t;return n===i}return CT=e,CT}var TT,x6;function e7(){if(x6)return TT;x6=1;function t(e,n){return function(a){return e(n(a))}}return TT=t,TT}var kT,v6;function kve(){if(v6)return kT;v6=1;var t=e7(),e=t(Object.keys,Object);return kT=e,kT}var AT,b6;function Ave(){if(b6)return AT;b6=1;var t=Tve(),e=kve(),n=Object.prototype,a=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))a.call(s,l)&&l!="constructor"&&o.push(l);return o}return AT=i,AT}var ET,j6;function Fb(){if(j6)return ET;j6=1;var t=CO(),e=qO();function n(a){return a!=null&&e(a.length)&&!t(a)}return ET=n,ET}var PT,w6;function fS(){if(w6)return PT;w6=1;var t=Cve(),e=Ave(),n=Fb();function a(i){return n(i)?t(i):e(i)}return PT=a,PT}var DT,N6;function Eve(){if(N6)return DT;N6=1;var t=yve(),e=bve(),n=fS();function a(i){return t(i,n,e)}return DT=a,DT}var OT,S6;function Pve(){if(S6)return OT;S6=1;var t=Eve(),e=1,n=Object.prototype,a=n.hasOwnProperty;function i(s,o,l,c,d,f){var p=l&e,g=t(s),x=g.length,b=t(o),j=b.length;if(x!=j&&!p)return!1;for(var S=x;S--;){var _=g[S];if(!(p?_ in o:a.call(o,_)))return!1}var T=f.get(s),C=f.get(o);if(T&&C)return T==o&&C==s;var P=!0;f.set(s,o),f.set(o,s);for(var k=p;++S<x;){_=g[S];var E=s[_],I=o[_];if(c)var L=p?c(I,E,_,o,s,f):c(E,I,_,s,o,f);if(!(L===void 0?E===I||d(E,I,l,c,f):L)){P=!1;break}k||(k=_=="constructor")}if(P&&!k){var $=s.constructor,q=o.constructor;$!=q&&"constructor"in s&&"constructor"in o&&!(typeof $=="function"&&$ instanceof $&&typeof q=="function"&&q instanceof q)&&(P=!1)}return f.delete(s),f.delete(o),P}return OT=i,OT}var MT,_6;function Dve(){if(_6)return MT;_6=1;var t=Mf(),e=Bl(),n=t(e,"DataView");return MT=n,MT}var IT,C6;function Ove(){if(C6)return IT;C6=1;var t=Mf(),e=Bl(),n=t(e,"Promise");return IT=n,IT}var RT,T6;function t7(){if(T6)return RT;T6=1;var t=Mf(),e=Bl(),n=t(e,"Set");return RT=n,RT}var LT,k6;function Mve(){if(k6)return LT;k6=1;var t=Mf(),e=Bl(),n=t(e,"WeakMap");return LT=n,LT}var FT,A6;function Ive(){if(A6)return FT;A6=1;var t=Dve(),e=kO(),n=Ove(),a=t7(),i=Mve(),s=Gc(),o=xU(),l="[object Map]",c="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",x=o(t),b=o(e),j=o(n),S=o(a),_=o(i),T=s;return(t&&T(new t(new ArrayBuffer(1)))!=g||e&&T(new e)!=l||n&&T(n.resolve())!=d||a&&T(new a)!=f||i&&T(new i)!=p)&&(T=function(C){var P=s(C),k=P==c?C.constructor:void 0,E=k?o(k):"";if(E)switch(E){case x:return g;case b:return l;case j:return d;case S:return f;case _:return p}return P}),FT=T,FT}var $T,E6;function Rve(){if(E6)return $T;E6=1;var t=HU(),e=YU(),n=gve(),a=Pve(),i=Ive(),s=fs(),o=XU(),l=ZU(),c=1,d="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function b(j,S,_,T,C,P){var k=s(j),E=s(S),I=k?f:i(j),L=E?f:i(S);I=I==d?p:I,L=L==d?p:L;var $=I==p,q=L==p,F=I==L;if(F&&o(j)){if(!o(S))return!1;k=!0,$=!1}if(F&&!$)return P||(P=new t),k||l(j)?e(j,S,_,T,C,P):n(j,S,I,_,T,C,P);if(!(_&c)){var H=$&&x.call(j,"__wrapped__"),V=q&&x.call(S,"__wrapped__");if(H||V){var X=H?j.value():j,Y=V?S.value():S;return P||(P=new t),C(X,Y,_,T,P)}}return F?(P||(P=new t),a(j,S,_,T,C,P)):!1}return $T=b,$T}var BT,P6;function UO(){if(P6)return BT;P6=1;var t=Rve(),e=Wc();function n(a,i,s,o,l){return a===i?!0:a==null||i==null||!e(a)&&!e(i)?a!==a&&i!==i:t(a,i,s,o,n,l)}return BT=n,BT}var zT,D6;function Lve(){if(D6)return zT;D6=1;var t=HU(),e=UO(),n=1,a=2;function i(s,o,l,c){var d=l.length,f=d,p=!c;if(s==null)return!f;for(s=Object(s);d--;){var g=l[d];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++d<f;){g=l[d];var x=g[0],b=s[x],j=g[1];if(p&&g[2]){if(b===void 0&&!(x in s))return!1}else{var S=new t;if(c)var _=c(b,j,x,s,o,S);if(!(_===void 0?e(j,b,n|a,c,S):_))return!1}}return!0}return zT=i,zT}var qT,O6;function n7(){if(O6)return qT;O6=1;var t=bd();function e(n){return n===n&&!t(n)}return qT=e,qT}var UT,M6;function Fve(){if(M6)return UT;M6=1;var t=n7(),e=fS();function n(a){for(var i=e(a),s=i.length;s--;){var o=i[s],l=a[o];i[s]=[o,l,t(l)]}return i}return UT=n,UT}var VT,I6;function r7(){if(I6)return VT;I6=1;function t(e,n){return function(a){return a==null?!1:a[e]===n&&(n!==void 0||e in Object(a))}}return VT=t,VT}var HT,R6;function $ve(){if(R6)return HT;R6=1;var t=Lve(),e=Fve(),n=r7();function a(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return HT=a,HT}var GT,L6;function Bve(){if(L6)return GT;L6=1;function t(e,n){return e!=null&&n in Object(e)}return GT=t,GT}var WT,F6;function zve(){if(F6)return WT;F6=1;var t=jU(),e=BO(),n=fs(),a=zO(),i=qO(),s=lS();function o(l,c,d){c=t(c,l);for(var f=-1,p=c.length,g=!1;++f<p;){var x=s(c[f]);if(!(g=l!=null&&d(l,x)))break;l=l[x]}return g||++f!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&a(x,p)&&(n(l)||e(l)))}return WT=o,WT}var KT,$6;function qve(){if($6)return KT;$6=1;var t=Bve(),e=zve();function n(a,i){return a!=null&&e(a,i,t)}return KT=n,KT}var YT,B6;function Uve(){if(B6)return YT;B6=1;var t=UO(),e=wU(),n=qve(),a=_O(),i=n7(),s=r7(),o=lS(),l=1,c=2;function d(f,p){return a(f)&&i(p)?s(o(f),p):function(g){var x=e(g,f);return x===void 0&&x===p?n(g,f):t(p,x,l|c)}}return YT=d,YT}var QT,z6;function Vg(){if(z6)return QT;z6=1;function t(e){return e}return QT=t,QT}var XT,q6;function Vve(){if(q6)return XT;q6=1;function t(e){return function(n){return n==null?void 0:n[e]}}return XT=t,XT}var JT,U6;function Hve(){if(U6)return JT;U6=1;var t=PO();function e(n){return function(a){return t(a,n)}}return JT=e,JT}var ZT,V6;function Gve(){if(V6)return ZT;V6=1;var t=Vve(),e=Hve(),n=_O(),a=lS();function i(s){return n(s)?t(a(s)):e(s)}return ZT=i,ZT}var ek,H6;function zl(){if(H6)return ek;H6=1;var t=$ve(),e=Uve(),n=Vg(),a=fs(),i=Gve();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?a(o)?e(o[0],o[1]):t(o):i(o)}return ek=s,ek}var tk,G6;function a7(){if(G6)return tk;G6=1;function t(e,n,a,i){for(var s=e.length,o=a+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return tk=t,tk}var nk,W6;function Wve(){if(W6)return nk;W6=1;function t(e){return e!==e}return nk=t,nk}var rk,K6;function Kve(){if(K6)return rk;K6=1;function t(e,n,a){for(var i=a-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return rk=t,rk}var ak,Y6;function Yve(){if(Y6)return ak;Y6=1;var t=a7(),e=Wve(),n=Kve();function a(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return ak=a,ak}var ik,Q6;function Qve(){if(Q6)return ik;Q6=1;var t=Yve();function e(n,a){var i=n==null?0:n.length;return!!i&&t(n,a,0)>-1}return ik=e,ik}var sk,X6;function Xve(){if(X6)return sk;X6=1;function t(e,n,a){for(var i=-1,s=e==null?0:e.length;++i<s;)if(a(n,e[i]))return!0;return!1}return sk=t,sk}var ok,J6;function Jve(){if(J6)return ok;J6=1;function t(){}return ok=t,ok}var lk,Z6;function Zve(){if(Z6)return lk;Z6=1;var t=t7(),e=Jve(),n=$O(),a=1/0,i=t&&1/n(new t([,-0]))[1]==a?function(s){return new t(s)}:e;return lk=i,lk}var ck,eL;function ebe(){if(eL)return ck;eL=1;var t=GU(),e=Qve(),n=Xve(),a=KU(),i=Zve(),s=$O(),o=200;function l(c,d,f){var p=-1,g=e,x=c.length,b=!0,j=[],S=j;if(f)b=!1,g=n;else if(x>=o){var _=d?null:i(c);if(_)return s(_);b=!1,g=a,S=new t}else S=d?[]:j;e:for(;++p<x;){var T=c[p],C=d?d(T):T;if(T=f||T!==0?T:0,b&&C===C){for(var P=S.length;P--;)if(S[P]===C)continue e;d&&S.push(C),j.push(T)}else g(S,C,f)||(S!==j&&S.push(C),j.push(T))}return j}return ck=l,ck}var uk,tL;function tbe(){if(tL)return uk;tL=1;var t=zl(),e=ebe();function n(a,i){return a&&a.length?e(a,t(i,2)):[]}return uk=n,uk}var nbe=tbe();const nL=Wn(nbe);function i7(t,e,n){return e===!0?nL(t,n):an(e)?nL(t,e):t}function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}var rbe=["ref"];function rL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function mc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(n),!0).forEach(function(a){pS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function abe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aL(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,o7(a.key),a)}}function ibe(t,e,n){return e&&aL(t.prototype,e),n&&aL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sbe(t,e,n){return e=Lw(e),obe(t,s7()?Reflect.construct(e,n||[],Lw(t).constructor):e.apply(t,n))}function obe(t,e){if(e&&(cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lbe(t)}function lbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s7=function(){return!!t})()}function Lw(t){return Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lw(t)}function cbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fP(t,e)}function fP(t,e){return fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},fP(t,e)}function pS(t,e,n){return e=o7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o7(t){var e=ube(t,"string");return cg(e)=="symbol"?e:e+""}function ube(t,e){if(cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function dbe(t,e){if(t==null)return{};var n=hbe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function hbe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function fbe(t){return t.value}function pbe(t,e){if(Se.isValidElement(t))return Se.cloneElement(t,e);if(typeof t=="function")return Se.createElement(t,e);e.ref;var n=dbe(e,rbe);return Se.createElement(FO,n)}var iL=1,Pc=function(t){function e(){var n;abe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=sbe(this,e,[].concat(i)),pS(n,"lastBoundingBox",{width:-1,height:-1}),n}return cbe(e,t),ibe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>iL||Math.abs(i.height-this.lastBoundingBox.height)>iL)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,a&&a(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?mc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,f=i.chartHeight,p,g;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&s==="vertical"){var x=this.getBBoxSnapshot();p={left:((d||0)-x.width)/2}}else p=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();g={top:((f||0)-b.height)/2}}else g=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return mc(mc({},p),g)}},{key:"render",value:function(){var a=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,f=i.payload,p=mc(mc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Se.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){a.wrapperNode=x}},pbe(s,mc(mc({},this.props),{},{payload:i7(f,d,fbe)})))}}],[{key:"getWithHeight",value:function(a,i){var s=mc(mc({},this.defaultProps),a.props),o=s.layout;return o==="vertical"&&Nt(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||i}:null}}])}(v.PureComponent);pS(Pc,"displayName","Legend");pS(Pc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var dk,sL;function mbe(){if(sL)return dk;sL=1;var t=Lb(),e=BO(),n=fs(),a=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(a&&s&&s[a])}return dk=i,dk}var hk,oL;function l7(){if(oL)return hk;oL=1;var t=QU(),e=mbe();function n(a,i,s,o,l){var c=-1,d=a.length;for(s||(s=e),l||(l=[]);++c<d;){var f=a[c];i>0&&s(f)?i>1?n(f,i-1,s,o,l):t(l,f):o||(l[l.length]=f)}return l}return hk=n,hk}var fk,lL;function gbe(){if(lL)return fk;lL=1;function t(e){return function(n,a,i){for(var s=-1,o=Object(n),l=i(n),c=l.length;c--;){var d=l[e?c:++s];if(a(o[d],d,o)===!1)break}return n}}return fk=t,fk}var pk,cL;function ybe(){if(cL)return pk;cL=1;var t=gbe(),e=t();return pk=e,pk}var mk,uL;function c7(){if(uL)return mk;uL=1;var t=ybe(),e=fS();function n(a,i){return a&&t(a,i,e)}return mk=n,mk}var gk,dL;function xbe(){if(dL)return gk;dL=1;var t=Fb();function e(n,a){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var o=i.length,l=a?o:-1,c=Object(i);(a?l--:++l<o)&&s(c[l],l,c)!==!1;);return i}}return gk=e,gk}var yk,hL;function VO(){if(hL)return yk;hL=1;var t=c7(),e=xbe(),n=e(t);return yk=n,yk}var xk,fL;function u7(){if(fL)return xk;fL=1;var t=VO(),e=Fb();function n(a,i){var s=-1,o=e(a)?Array(a.length):[];return t(a,function(l,c,d){o[++s]=i(l,c,d)}),o}return xk=n,xk}var vk,pL;function vbe(){if(pL)return vk;pL=1;function t(e,n){var a=e.length;for(e.sort(n);a--;)e[a]=e[a].value;return e}return vk=t,vk}var bk,mL;function bbe(){if(mL)return bk;mL=1;var t=zg();function e(n,a){if(n!==a){var i=n!==void 0,s=n===null,o=n===n,l=t(n),c=a!==void 0,d=a===null,f=a===a,p=t(a);if(!d&&!p&&!l&&n>a||l&&c&&f&&!d&&!p||s&&c&&f||!i&&f||!o)return 1;if(!s&&!l&&!p&&n<a||p&&i&&o&&!s&&!l||d&&i&&o||!c&&o||!f)return-1}return 0}return bk=e,bk}var jk,gL;function jbe(){if(gL)return jk;gL=1;var t=bbe();function e(n,a,i){for(var s=-1,o=n.criteria,l=a.criteria,c=o.length,d=i.length;++s<c;){var f=t(o[s],l[s]);if(f){if(s>=d)return f;var p=i[s];return f*(p=="desc"?-1:1)}}return n.index-a.index}return jk=e,jk}var wk,yL;function wbe(){if(yL)return wk;yL=1;var t=EO(),e=PO(),n=zl(),a=u7(),i=vbe(),s=JU(),o=jbe(),l=Vg(),c=fs();function d(f,p,g){p.length?p=t(p,function(j){return c(j)?function(S){return e(S,j.length===1?j[0]:j)}:j}):p=[l];var x=-1;p=t(p,s(n));var b=a(f,function(j,S,_){var T=t(p,function(C){return C(j)});return{criteria:T,index:++x,value:j}});return i(b,function(j,S){return o(j,S,g)})}return wk=d,wk}var Nk,xL;function Nbe(){if(xL)return Nk;xL=1;function t(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}return Nk=t,Nk}var Sk,vL;function Sbe(){if(vL)return Sk;vL=1;var t=Nbe(),e=Math.max;function n(a,i,s){return i=e(i===void 0?a.length-1:i,0),function(){for(var o=arguments,l=-1,c=e(o.length-i,0),d=Array(c);++l<c;)d[l]=o[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=o[l];return f[i]=s(d),t(a,this,f)}}return Sk=n,Sk}var _k,bL;function _be(){if(bL)return _k;bL=1;function t(e){return function(){return e}}return _k=t,_k}var Ck,jL;function d7(){if(jL)return Ck;jL=1;var t=Mf(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Ck=e,Ck}var Tk,wL;function Cbe(){if(wL)return Tk;wL=1;var t=_be(),e=d7(),n=Vg(),a=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return Tk=a,Tk}var kk,NL;function Tbe(){if(NL)return kk;NL=1;var t=800,e=16,n=Date.now;function a(i){var s=0,o=0;return function(){var l=n(),c=e-(l-o);if(o=l,c>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return kk=a,kk}var Ak,SL;function kbe(){if(SL)return Ak;SL=1;var t=Cbe(),e=Tbe(),n=e(t);return Ak=n,Ak}var Ek,_L;function Abe(){if(_L)return Ek;_L=1;var t=Vg(),e=Sbe(),n=kbe();function a(i,s){return n(e(i,s,t),i+"")}return Ek=a,Ek}var Pk,CL;function mS(){if(CL)return Pk;CL=1;var t=TO(),e=Fb(),n=zO(),a=bd();function i(s,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?e(l)&&n(o,l.length):c=="string"&&o in l)?t(l[o],s):!1}return Pk=i,Pk}var Dk,TL;function Ebe(){if(TL)return Dk;TL=1;var t=l7(),e=wbe(),n=Abe(),a=mS(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&a(s,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return Dk=i,Dk}var Pbe=Ebe();const HO=Wn(Pbe);function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function pP(){return pP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pP.apply(this,arguments)}function Dbe(t,e){return Rbe(t)||Ibe(t,e)||Mbe(t,e)||Obe()}function Obe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mbe(t,e){if(t){if(typeof t=="string")return kL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kL(t,e)}}function kL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Ibe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Rbe(t){if(Array.isArray(t))return t}function AL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ok(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AL(Object(n),!0).forEach(function(a){Lbe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Lbe(t,e,n){return e=Fbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fbe(t){var e=$be(t,"string");return Fv(e)=="symbol"?e:e+""}function $be(t,e){if(Fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Fv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bbe(t){return Array.isArray(t)&&Ca(t[0])&&Ca(t[1])?t.join(" ~ "):t}var zbe=function(e){var n=e.separator,a=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,f=e.payload,p=e.formatter,g=e.itemSorter,x=e.wrapperClassName,b=e.labelClassName,j=e.label,S=e.labelFormatter,_=e.accessibilityLayer,T=_===void 0?!1:_,C=function(){if(f&&f.length){var H={padding:0,margin:0},V=(g?HO(f,g):f).map(function(X,Y){if(X.type==="none")return null;var z=Ok({display:"block",paddingTop:4,paddingBottom:4,color:X.color||"#000"},l),G=X.formatter||p||Bbe,ie=X.value,W=X.name,B=ie,ce=W;if(G&&B!=null&&ce!=null){var je=G(ie,W,X,Y,f);if(Array.isArray(je)){var K=Dbe(je,2);B=K[0],ce=K[1]}else B=je}return Se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:z},Ca(ce)?Se.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Ca(ce)?Se.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Se.createElement("span",{className:"recharts-tooltip-item-value"},B),Se.createElement("span",{className:"recharts-tooltip-item-unit"},X.unit||""))});return Se.createElement("ul",{className:"recharts-tooltip-item-list",style:H},V)}return null},P=Ok({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=Ok({margin:0},d),E=!hn(j),I=E?j:"",L=pn("recharts-default-tooltip",x),$=pn("recharts-tooltip-label",b);E&&S&&f!==void 0&&f!==null&&(I=S(j,f));var q=T?{role:"status","aria-live":"assertive"}:{};return Se.createElement("div",pP({className:L,style:P},q),Se.createElement("p",{className:$,style:k},Se.isValidElement(I)?I:"".concat(I)),C())};function $v(t){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(t)}function Aj(t,e,n){return e=qbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qbe(t){var e=Ube(t,"string");return $v(e)=="symbol"?e:e+""}function Ube(t,e){if($v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if($v(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qx="recharts-tooltip-wrapper",Vbe={visibility:"hidden"};function Hbe(t){var e=t.coordinate,n=t.translateX,a=t.translateY;return pn(Qx,Aj(Aj(Aj(Aj({},"".concat(Qx,"-right"),Nt(n)&&e&&Nt(e.x)&&n>=e.x),"".concat(Qx,"-left"),Nt(n)&&e&&Nt(e.x)&&n<e.x),"".concat(Qx,"-bottom"),Nt(a)&&e&&Nt(e.y)&&a>=e.y),"".concat(Qx,"-top"),Nt(a)&&e&&Nt(e.y)&&a<e.y))}function EL(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(s&&Nt(s[a]))return s[a];var f=n[a]-l-i,p=n[a]+i;if(e[a])return o[a]?f:p;if(o[a]){var g=f,x=c[a];return g<x?Math.max(p,c[a]):Math.max(f,c[a])}var b=p+l,j=c[a]+d;return b>j?Math.max(f,c[a]):Math.max(p,c[a])}function Gbe(t){var e=t.translateX,n=t.translateY,a=t.useTranslate3d;return{transform:a?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Wbe(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,f,p;return o.height>0&&o.width>0&&n?(f=EL({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=EL({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Gbe({translateX:f,translateY:p,useTranslate3d:l})):d=Vbe,{cssProperties:d,cssClasses:Hbe({translateX:f,translateY:p,coordinate:n})}}function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function PL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function DL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PL(Object(n),!0).forEach(function(a){gP(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Kbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ybe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,f7(a.key),a)}}function Qbe(t,e,n){return e&&Ybe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xbe(t,e,n){return e=Fw(e),Jbe(t,h7()?Reflect.construct(e,n||[],Fw(t).constructor):e.apply(t,n))}function Jbe(t,e){if(e&&(ug(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zbe(t)}function Zbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h7=function(){return!!t})()}function Fw(t){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fw(t)}function e0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mP(t,e)}function mP(t,e){return mP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},mP(t,e)}function gP(t,e,n){return e=f7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f7(t){var e=t0e(t,"string");return ug(e)=="symbol"?e:e+""}function t0e(t,e){if(ug(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ug(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var OL=1,n0e=function(t){function e(){var n;Kbe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=Xbe(this,e,[].concat(i)),gP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),gP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),n}return e0e(e,t),Qbe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>OL||Math.abs(a.height-this.state.lastBoundingBox.height)>OL)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,f=i.coordinate,p=i.hasPayload,g=i.isAnimationActive,x=i.offset,b=i.position,j=i.reverseDirection,S=i.useTranslate3d,_=i.viewBox,T=i.wrapperStyle,C=Wbe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:x,position:b,reverseDirection:j,tooltipBox:this.state.lastBoundingBox,useTranslate3d:S,viewBox:_}),P=C.cssClasses,k=C.cssProperties,E=DL(DL({transition:g&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},T);return Se.createElement("div",{tabIndex:-1,className:P,style:E,ref:function(L){a.wrapperNode=L}},d)}}])}(v.PureComponent),r0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},jd={isSsr:r0e()};function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}function ML(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function IL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(n),!0).forEach(function(a){GO(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ML(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function a0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i0e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,m7(a.key),a)}}function s0e(t,e,n){return e&&i0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o0e(t,e,n){return e=$w(e),l0e(t,p7()?Reflect.construct(e,n||[],$w(t).constructor):e.apply(t,n))}function l0e(t,e){if(e&&(dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c0e(t)}function c0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p7=function(){return!!t})()}function $w(t){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$w(t)}function u0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yP(t,e)}function yP(t,e){return yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},yP(t,e)}function GO(t,e,n){return e=m7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m7(t){var e=d0e(t,"string");return dg(e)=="symbol"?e:e+""}function d0e(t,e){if(dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(dg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function h0e(t){return t.dataKey}function f0e(t,e){return Se.isValidElement(t)?Se.cloneElement(t,e):typeof t=="function"?Se.createElement(t,e):Se.createElement(zbe,e)}var Mi=function(t){function e(){return a0e(this,e),o0e(this,e,arguments)}return u0e(e,t),s0e(e,[{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,f=i.coordinate,p=i.filterNull,g=i.isAnimationActive,x=i.offset,b=i.payload,j=i.payloadUniqBy,S=i.position,_=i.reverseDirection,T=i.useTranslate3d,C=i.viewBox,P=i.wrapperStyle,k=b??[];p&&k.length&&(k=i7(b.filter(function(I){return I.value!=null&&(I.hide!==!0||a.props.includeHidden)}),j,h0e));var E=k.length>0;return Se.createElement(n0e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:g,active:s,coordinate:f,hasPayload:E,offset:x,position:S,reverseDirection:_,useTranslate3d:T,viewBox:C,wrapperStyle:P},f0e(d,IL(IL({},this.props),{},{payload:k})))}}])}(v.PureComponent);GO(Mi,"displayName","Tooltip");GO(Mi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Mk,RL;function p0e(){if(RL)return Mk;RL=1;var t=Bl(),e=function(){return t.Date.now()};return Mk=e,Mk}var Ik,LL;function m0e(){if(LL)return Ik;LL=1;var t=/\s/;function e(n){for(var a=n.length;a--&&t.test(n.charAt(a)););return a}return Ik=e,Ik}var Rk,FL;function g0e(){if(FL)return Rk;FL=1;var t=m0e(),e=/^\s+/;function n(a){return a&&a.slice(0,t(a)+1).replace(e,"")}return Rk=n,Rk}var Lk,$L;function g7(){if($L)return Lk;$L=1;var t=g0e(),e=bd(),n=zg(),a=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(n(d))return a;if(e(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=e(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=t(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?a:+d}return Lk=c,Lk}var Fk,BL;function y0e(){if(BL)return Fk;BL=1;var t=bd(),e=p0e(),n=g7(),a="Expected a function",i=Math.max,s=Math.min;function o(l,c,d){var f,p,g,x,b,j,S=0,_=!1,T=!1,C=!0;if(typeof l!="function")throw new TypeError(a);c=n(c)||0,t(d)&&(_=!!d.leading,T="maxWait"in d,g=T?i(n(d.maxWait)||0,c):g,C="trailing"in d?!!d.trailing:C);function P(V){var X=f,Y=p;return f=p=void 0,S=V,x=l.apply(Y,X),x}function k(V){return S=V,b=setTimeout(L,c),_?P(V):x}function E(V){var X=V-j,Y=V-S,z=c-X;return T?s(z,g-Y):z}function I(V){var X=V-j,Y=V-S;return j===void 0||X>=c||X<0||T&&Y>=g}function L(){var V=e();if(I(V))return $(V);b=setTimeout(L,E(V))}function $(V){return b=void 0,C&&f?P(V):(f=p=void 0,x)}function q(){b!==void 0&&clearTimeout(b),S=0,f=j=p=b=void 0}function F(){return b===void 0?x:$(e())}function H(){var V=e(),X=I(V);if(f=arguments,p=this,j=V,X){if(b===void 0)return k(j);if(T)return clearTimeout(b),b=setTimeout(L,c),P(j)}return b===void 0&&(b=setTimeout(L,c)),x}return H.cancel=q,H.flush=F,H}return Fk=o,Fk}var $k,zL;function x0e(){if(zL)return $k;zL=1;var t=y0e(),e=bd(),n="Expected a function";function a(i,s,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(i,s,{leading:l,maxWait:s,trailing:c})}return $k=a,$k}var v0e=x0e();const y7=Wn(v0e);function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function qL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ej(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qL(Object(n),!0).forEach(function(a){b0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function b0e(t,e,n){return e=j0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j0e(t){var e=w0e(t,"string");return Bv(e)=="symbol"?e:e+""}function w0e(t,e){if(Bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Bv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N0e(t,e){return T0e(t)||C0e(t,e)||_0e(t,e)||S0e()}function S0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _0e(t,e){if(t){if(typeof t=="string")return UL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UL(t,e)}}function UL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function C0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function T0e(t){if(Array.isArray(t))return t}var iw=v.forwardRef(function(t,e){var n=t.aspect,a=t.initialDimension,i=a===void 0?{width:-1,height:-1}:a,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,f=d===void 0?0:d,p=t.minHeight,g=t.maxHeight,x=t.children,b=t.debounce,j=b===void 0?0:b,S=t.id,_=t.className,T=t.onResize,C=t.style,P=C===void 0?{}:C,k=v.useRef(null),E=v.useRef();E.current=T,v.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var I=v.useState({containerWidth:i.width,containerHeight:i.height}),L=N0e(I,2),$=L[0],q=L[1],F=v.useCallback(function(V,X){q(function(Y){var z=Math.round(V),G=Math.round(X);return Y.containerWidth===z&&Y.containerHeight===G?Y:{containerWidth:z,containerHeight:G}})},[]);v.useEffect(function(){var V=function(W){var B,ce=W[0].contentRect,je=ce.width,K=ce.height;F(je,K),(B=E.current)===null||B===void 0||B.call(E,je,K)};j>0&&(V=y7(V,j,{trailing:!0,leading:!1}));var X=new ResizeObserver(V),Y=k.current.getBoundingClientRect(),z=Y.width,G=Y.height;return F(z,G),X.observe(k.current),function(){X.disconnect()}},[F,j]);var H=v.useMemo(function(){var V=$.containerWidth,X=$.containerHeight;if(V<0||X<0)return null;Bo(Xh(o)||Xh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Bo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Y=Xh(o)?V:o,z=Xh(c)?X:c;n&&n>0&&(Y?z=Y/n:z&&(Y=z*n),g&&z>g&&(z=g)),Bo(Y>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,z,o,c,f,p,n);var G=!Array.isArray(x)&&Ec(x.type).endsWith("Chart");return Se.Children.map(x,function(ie){return Se.isValidElement(ie)?v.cloneElement(ie,Ej({width:Y,height:z},G?{style:Ej({height:"100%",width:"100%",maxHeight:z,maxWidth:Y},ie.props.style)}:{})):ie})},[n,x,c,g,p,f,$,o]);return Se.createElement("div",{id:S?"".concat(S):void 0,className:pn("recharts-responsive-container",_),style:Ej(Ej({},P),{},{width:o,height:c,minWidth:f,minHeight:p,maxHeight:g}),ref:k},H)}),$b=function(e){return null};$b.displayName="Cell";function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function VL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function xP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VL(Object(n),!0).forEach(function(a){k0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function k0e(t,e,n){return e=A0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A0e(t){var e=E0e(t,"string");return zv(e)=="symbol"?e:e+""}function E0e(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(zv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vm={widthCache:{},cacheCount:0},P0e=2e3,D0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},HL="recharts_measurement_span";function O0e(t){var e=xP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var jv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||jd.isSsr)return{width:0,height:0};var a=O0e(n),i=JSON.stringify({text:e,copyStyle:a});if(vm.widthCache[i])return vm.widthCache[i];try{var s=document.getElementById(HL);s||(s=document.createElement("span"),s.setAttribute("id",HL),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=xP(xP({},D0e),a);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return vm.widthCache[i]=c,++vm.cacheCount>P0e&&(vm.cacheCount=0,vm.widthCache={}),c}catch{return{width:0,height:0}}},M0e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function qv(t){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qv(t)}function Bw(t,e){return F0e(t)||L0e(t,e)||R0e(t,e)||I0e()}function I0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R0e(t,e){if(t){if(typeof t=="string")return GL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GL(t,e)}}function GL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function L0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function F0e(t){if(Array.isArray(t))return t}function $0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WL(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,z0e(a.key),a)}}function B0e(t,e,n){return e&&WL(t.prototype,e),n&&WL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function z0e(t){var e=q0e(t,"string");return qv(e)=="symbol"?e:e+""}function q0e(t,e){if(qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(qv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var KL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,U0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,V0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,x7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},H0e=Object.keys(x7),Am="NaN";function G0e(t,e){return t*x7[e]}var Pj=function(){function t(e,n){$0e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!U0e.test(n)&&(this.num=NaN,this.unit=""),H0e.includes(n)&&(this.num=G0e(e,n),this.unit="px")}return B0e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,i=(a=V0e.exec(n))!==null&&a!==void 0?a:[],s=Bw(i,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function v7(t){if(t.includes(Am))return Am;for(var e=t;e.includes("*")||e.includes("/");){var n,a=(n=KL.exec(e))!==null&&n!==void 0?n:[],i=Bw(a,4),s=i[1],o=i[2],l=i[3],c=Pj.parse(s??""),d=Pj.parse(l??""),f=o==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return Am;e=e.replace(KL,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,g=(p=YL.exec(e))!==null&&p!==void 0?p:[],x=Bw(g,4),b=x[1],j=x[2],S=x[3],_=Pj.parse(b??""),T=Pj.parse(S??""),C=j==="+"?_.add(T):_.subtract(T);if(C.isNaN())return Am;e=e.replace(YL,C.toString())}return e}var QL=/\(([^()]*)\)/;function W0e(t){for(var e=t;e.includes("(");){var n=QL.exec(e),a=Bw(n,2),i=a[1];e=e.replace(QL,v7(i))}return e}function K0e(t){var e=t.replace(/\s+/g,"");return e=W0e(e),e=v7(e),e}function Y0e(t){try{return K0e(t)}catch{return Am}}function Bk(t){var e=Y0e(t.slice(5,-1));return e===Am?"":e}var Q0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],X0e=["dx","dy","angle","className","breakAll"];function vP(){return vP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},vP.apply(this,arguments)}function XL(t,e){if(t==null)return{};var n=J0e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function J0e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function JL(t,e){return n1e(t)||t1e(t,e)||e1e(t,e)||Z0e()}function Z0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e1e(t,e){if(t){if(typeof t=="string")return ZL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZL(t,e)}}function ZL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function t1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function n1e(t){if(Array.isArray(t))return t}var b7=/[ \f\n\r\t\v\u2028\u2029]+/,j7=function(e){var n=e.children,a=e.breakAll,i=e.style;try{var s=[];hn(n)||(a?s=n.toString().split(""):s=n.toString().split(b7));var o=s.map(function(c){return{word:c,width:jv(c,i).width}}),l=a?0:jv("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},r1e=function(e,n,a,i,s){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,f=Nt(o),p=l,g=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(z,G){var ie=G.word,W=G.width,B=z[z.length-1];if(B&&(i==null||s||B.width+W+a<Number(i)))B.words.push(ie),B.width+=W+a;else{var ce={words:[ie],width:W};z.push(ce)}return z},[])},x=g(n),b=function(Y){return Y.reduce(function(z,G){return z.width>G.width?z:G})};if(!f)return x;for(var j="",S=function(Y){var z=p.slice(0,Y),G=j7({breakAll:d,style:c,children:z+j}).wordsWithComputedWidth,ie=g(G),W=ie.length>o||b(ie).width>Number(i);return[W,ie]},_=0,T=p.length-1,C=0,P;_<=T&&C<=p.length-1;){var k=Math.floor((_+T)/2),E=k-1,I=S(E),L=JL(I,2),$=L[0],q=L[1],F=S(k),H=JL(F,1),V=H[0];if(!$&&!V&&(_=k+1),$&&V&&(T=k-1),!$&&V){P=q;break}C++}return P||x},eF=function(e){var n=hn(e)?[]:e.toString().split(b7);return[{words:n}]},a1e=function(e){var n=e.width,a=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((n||a)&&!jd.isSsr){var c,d,f=j7({breakAll:o,children:i,style:s});if(f){var p=f.wordsWithComputedWidth,g=f.spaceWidth;c=p,d=g}else return eF(i);return r1e({breakAll:o,children:i,maxLines:l,style:s},c,d,n,a)}return eF(i)},tF="#808080",Tf=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,f=e.scaleToFit,p=f===void 0?!1:f,g=e.textAnchor,x=g===void 0?"start":g,b=e.verticalAnchor,j=b===void 0?"end":b,S=e.fill,_=S===void 0?tF:S,T=XL(e,Q0e),C=v.useMemo(function(){return a1e({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:p,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,p,T.style,T.width]),P=T.dx,k=T.dy,E=T.angle,I=T.className,L=T.breakAll,$=XL(T,X0e);if(!Ca(a)||!Ca(s))return null;var q=a+(Nt(P)?P:0),F=s+(Nt(k)?k:0),H;switch(j){case"start":H=Bk("calc(".concat(d,")"));break;case"middle":H=Bk("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:H=Bk("calc(".concat(C.length-1," * -").concat(l,")"));break}var V=[];if(p){var X=C[0].width,Y=T.width;V.push("scale(".concat((Nt(Y)?Y/X:1)/X,")"))}return E&&V.push("rotate(".concat(E,", ").concat(q,", ").concat(F,")")),V.length&&($.transform=V.join(" ")),Se.createElement("text",vP({},zt($,!0),{x:q,y:F,className:pn("recharts-text",I),textAnchor:x,fill:_.includes("url")?tF:_}),C.map(function(z,G){var ie=z.words.join(L?"":" ");return Se.createElement("tspan",{x:q,dy:G===0?H:l,key:"".concat(ie,"-").concat(G)},ie)}))};function ld(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i1e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function WO(t){let e,n,a;t.length!==2?(e=ld,n=(l,c)=>ld(t(l),c),a=(l,c)=>t(l)-c):(e=t===ld||t===i1e?t:s1e,n=t,a=t);function i(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<0?d=p+1:f=p}while(d<f)}return d}function s(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function o(l,c,d=0,f=l.length){const p=i(l,c,d,f-1);return p>d&&a(l[p-1],c)>-a(l[p],c)?p-1:p}return{left:i,center:o,right:s}}function s1e(){return 0}function w7(t){return t===null?NaN:+t}function*o1e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const l1e=WO(ld),Bb=l1e.right;WO(w7).center;class nF extends Map{constructor(e,n=d1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[a,i]of e)this.set(a,i)}get(e){return super.get(rF(this,e))}has(e){return super.has(rF(this,e))}set(e,n){return super.set(c1e(this,e),n)}delete(e){return super.delete(u1e(this,e))}}function rF({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):n}function c1e({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):(t.set(a,n),n)}function u1e({_intern:t,_key:e},n){const a=e(n);return t.has(a)&&(n=t.get(a),t.delete(a)),n}function d1e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function h1e(t=ld){if(t===ld)return N7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const a=t(e,n);return a||a===0?a:(t(n,n)===0)-(t(e,e)===0)}}function N7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const f1e=Math.sqrt(50),p1e=Math.sqrt(10),m1e=Math.sqrt(2);function zw(t,e,n){const a=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(a)),s=a/Math.pow(10,i),o=s>=f1e?10:s>=p1e?5:s>=m1e?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=n&&n<2?zw(t,e,n*2):[l,c,d]}function bP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const a=e<t,[i,s,o]=a?zw(e,t,n):zw(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(s-d)/-o;else for(let d=0;d<l;++d)c[d]=(s-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function jP(t,e,n){return e=+e,t=+t,n=+n,zw(t,e,n)[2]}function wP(t,e,n){e=+e,t=+t,n=+n;const a=e<t,i=a?jP(e,t,n):jP(t,e,n);return(a?-1:1)*(i<0?1/-i:i)}function aF(t,e){let n;for(const a of t)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function iF(t,e){let n;for(const a of t)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function S7(t,e,n=0,a=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(t.length-1,a)),!(n<=e&&e<=a))return t;for(i=i===void 0?N7:h1e(i);a>n;){if(a-n>600){const c=a-n+1,d=e-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),x=Math.max(n,Math.floor(e-d*p/c+g)),b=Math.min(a,Math.floor(e+(c-d)*p/c+g));S7(t,e,x,b,i)}const s=t[e];let o=n,l=a;for(Xx(t,n,e),i(t[a],s)>0&&Xx(t,n,a);o<l;){for(Xx(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?Xx(t,n,l):(++l,Xx(t,l,a)),l<=e&&(n=l+1),e<=l&&(a=l-1)}return t}function Xx(t,e,n){const a=t[e];t[e]=t[n],t[n]=a}function g1e(t,e,n){if(t=Float64Array.from(o1e(t)),!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return iF(t);if(e>=1)return aF(t);var a,i=(a-1)*e,s=Math.floor(i),o=aF(S7(t,s).subarray(0,s+1)),l=iF(t.subarray(s+1));return o+(l-o)*(i-s)}}function y1e(t,e,n=w7){if(!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return+n(t[0],0,t);if(e>=1)return+n(t[a-1],a-1,t);var a,i=(a-1)*e,s=Math.floor(i),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function x1e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var a=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++a<i;)s[a]=t+a*n;return s}function co(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Kc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const NP=Symbol("implicit");function KO(){var t=new nF,e=[],n=[],a=NP;function i(s){let o=t.get(s);if(o===void 0){if(a!==NP)return a;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new nF;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return KO(e,n).unknown(a)},co.apply(i,arguments),i}function Uv(){var t=KO().unknown(void 0),e=t.domain,n=t.range,a=0,i=1,s,o,l=!1,c=0,d=0,f=.5;delete t.unknown;function p(){var g=e().length,x=i<a,b=x?i:a,j=x?a:i;s=(j-b)/Math.max(1,g-c+d*2),l&&(s=Math.floor(s)),b+=(j-b-s*(g-c))*f,o=s*(1-c),l&&(b=Math.round(b),o=Math.round(o));var S=x1e(g).map(function(_){return b+s*_});return n(x?S.reverse():S)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([a,i]=g,a=+a,i=+i,p()):[a,i]},t.rangeRound=function(g){return[a,i]=g,a=+a,i=+i,l=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(g){return arguments.length?(l=!!g,p()):l},t.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return Uv(e(),[a,i]).round(l).paddingInner(c).paddingOuter(d).align(f)},co.apply(p(),arguments)}function _7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return _7(e())},t}function wv(){return _7(Uv.apply(null,arguments).paddingInner(1))}function YO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function C7(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function zb(){}var Vv=.7,qw=1/Vv,$m="\\s*([+-]?\\d+)\\s*",Hv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Il="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",v1e=/^#([0-9a-f]{3,8})$/,b1e=new RegExp(`^rgb\\(${$m},${$m},${$m}\\)$`),j1e=new RegExp(`^rgb\\(${Il},${Il},${Il}\\)$`),w1e=new RegExp(`^rgba\\(${$m},${$m},${$m},${Hv}\\)$`),N1e=new RegExp(`^rgba\\(${Il},${Il},${Il},${Hv}\\)$`),S1e=new RegExp(`^hsl\\(${Hv},${Il},${Il}\\)$`),_1e=new RegExp(`^hsla\\(${Hv},${Il},${Il},${Hv}\\)$`),sF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};YO(zb,Gv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:oF,formatHex:oF,formatHex8:C1e,formatHsl:T1e,formatRgb:lF,toString:lF});function oF(){return this.rgb().formatHex()}function C1e(){return this.rgb().formatHex8()}function T1e(){return T7(this).formatHsl()}function lF(){return this.rgb().formatRgb()}function Gv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=v1e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?cF(e):n===3?new os(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Dj(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Dj(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=b1e.exec(t))?new os(e[1],e[2],e[3],1):(e=j1e.exec(t))?new os(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=w1e.exec(t))?Dj(e[1],e[2],e[3],e[4]):(e=N1e.exec(t))?Dj(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=S1e.exec(t))?hF(e[1],e[2]/100,e[3]/100,1):(e=_1e.exec(t))?hF(e[1],e[2]/100,e[3]/100,e[4]):sF.hasOwnProperty(t)?cF(sF[t]):t==="transparent"?new os(NaN,NaN,NaN,0):null}function cF(t){return new os(t>>16&255,t>>8&255,t&255,1)}function Dj(t,e,n,a){return a<=0&&(t=e=n=NaN),new os(t,e,n,a)}function k1e(t){return t instanceof zb||(t=Gv(t)),t?(t=t.rgb(),new os(t.r,t.g,t.b,t.opacity)):new os}function SP(t,e,n,a){return arguments.length===1?k1e(t):new os(t,e,n,a??1)}function os(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}YO(os,SP,C7(zb,{brighter(t){return t=t==null?qw:Math.pow(qw,t),new os(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vv:Math.pow(Vv,t),new os(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new os(hf(this.r),hf(this.g),hf(this.b),Uw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uF,formatHex:uF,formatHex8:A1e,formatRgb:dF,toString:dF}));function uF(){return`#${Jh(this.r)}${Jh(this.g)}${Jh(this.b)}`}function A1e(){return`#${Jh(this.r)}${Jh(this.g)}${Jh(this.b)}${Jh((isNaN(this.opacity)?1:this.opacity)*255)}`}function dF(){const t=Uw(this.opacity);return`${t===1?"rgb(":"rgba("}${hf(this.r)}, ${hf(this.g)}, ${hf(this.b)}${t===1?")":`, ${t})`}`}function Uw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jh(t){return t=hf(t),(t<16?"0":"")+t.toString(16)}function hF(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Lo(t,e,n,a)}function T7(t){if(t instanceof Lo)return new Lo(t.h,t.s,t.l,t.opacity);if(t instanceof zb||(t=Gv(t)),!t)return new Lo;if(t instanceof Lo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,a=t.b/255,i=Math.min(e,n,a),s=Math.max(e,n,a),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-a)/l+(n<a)*6:n===s?o=(a-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Lo(o,l,c,t.opacity)}function E1e(t,e,n,a){return arguments.length===1?T7(t):new Lo(t,e,n,a??1)}function Lo(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}YO(Lo,E1e,C7(zb,{brighter(t){return t=t==null?qw:Math.pow(qw,t),new Lo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vv:Math.pow(Vv,t),new Lo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,i=2*n-a;return new os(zk(t>=240?t-240:t+120,i,a),zk(t,i,a),zk(t<120?t+240:t-120,i,a),this.opacity)},clamp(){return new Lo(fF(this.h),Oj(this.s),Oj(this.l),Uw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Uw(this.opacity);return`${t===1?"hsl(":"hsla("}${fF(this.h)}, ${Oj(this.s)*100}%, ${Oj(this.l)*100}%${t===1?")":`, ${t})`}`}}));function fF(t){return t=(t||0)%360,t<0?t+360:t}function Oj(t){return Math.max(0,Math.min(1,t||0))}function zk(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const QO=t=>()=>t;function P1e(t,e){return function(n){return t+n*e}}function D1e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}function O1e(t){return(t=+t)==1?k7:function(e,n){return n-e?D1e(e,n,t):QO(isNaN(e)?n:e)}}function k7(t,e){var n=e-t;return n?P1e(t,n):QO(isNaN(t)?e:t)}const pF=function t(e){var n=O1e(e);function a(i,s){var o=n((i=SP(i)).r,(s=SP(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),d=k7(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=c(f),i.opacity=d(f),i+""}}return a.gamma=t,a}(1);function M1e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,a=e.slice(),i;return function(s){for(i=0;i<n;++i)a[i]=t[i]*(1-s)+e[i]*s;return a}}function I1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function R1e(t,e){var n=e?e.length:0,a=t?Math.min(n,t.length):0,i=new Array(a),s=new Array(n),o;for(o=0;o<a;++o)i[o]=Hg(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<a;++o)s[o]=i[o](l);return s}}function L1e(t,e){var n=new Date;return t=+t,e=+e,function(a){return n.setTime(t*(1-a)+e*a),n}}function Vw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function F1e(t,e){var n={},a={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Hg(t[i],e[i]):a[i]=e[i];return function(s){for(i in n)a[i]=n[i](s);return a}}var _P=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qk=new RegExp(_P.source,"g");function $1e(t){return function(){return t}}function B1e(t){return function(e){return t(e)+""}}function z1e(t,e){var n=_P.lastIndex=qk.lastIndex=0,a,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(a=_P.exec(t))&&(i=qk.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(a=a[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Vw(a,i)})),n=qk.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?B1e(c[0].x):$1e(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)l[(p=c[f]).i]=p.x(d);return l.join("")})}function Hg(t,e){var n=typeof e,a;return e==null||n==="boolean"?QO(e):(n==="number"?Vw:n==="string"?(a=Gv(e))?(e=a,pF):z1e:e instanceof Gv?pF:e instanceof Date?L1e:I1e(e)?M1e:Array.isArray(e)?R1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?F1e:Vw)(t,e)}function XO(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function q1e(t,e){e===void 0&&(e=t,t=Hg);for(var n=0,a=e.length-1,i=e[0],s=new Array(a<0?0:a);n<a;)s[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return s[l](o-l)}}function U1e(t){return function(){return t}}function Hw(t){return+t}var mF=[0,1];function Fi(t){return t}function CP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:U1e(isNaN(e)?NaN:.5)}function V1e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(a){return Math.max(t,Math.min(e,a))}}function H1e(t,e,n){var a=t[0],i=t[1],s=e[0],o=e[1];return i<a?(a=CP(i,a),s=n(o,s)):(a=CP(a,i),s=n(s,o)),function(l){return s(a(l))}}function G1e(t,e,n){var a=Math.min(t.length,e.length)-1,i=new Array(a),s=new Array(a),o=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<a;)i[o]=CP(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var c=Bb(t,l,1,a)-1;return s[c](i[c](l))}}function qb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gS(){var t=mF,e=mF,n=Hg,a,i,s,o=Fi,l,c,d;function f(){var g=Math.min(t.length,e.length);return o!==Fi&&(o=V1e(t[0],t[g-1])),l=g>2?G1e:H1e,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?s:(c||(c=l(t.map(a),e,n)))(a(o(g)))}return p.invert=function(g){return o(i((d||(d=l(e,t.map(a),Vw)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Hw),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=XO,f()},p.clamp=function(g){return arguments.length?(o=g?!0:Fi,f()):o!==Fi},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,x){return a=g,i=x,f()}}function JO(){return gS()(Fi,Fi)}function W1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Gw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,a=t.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+t.slice(n+1)]}function hg(t){return t=Gw(Math.abs(t)),t?t[1]:NaN}function K1e(t,e){return function(n,a){for(var i=n.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>a));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Y1e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Q1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wv(t){if(!(e=Q1e.exec(t)))throw new Error("invalid format: "+t);var e;return new ZO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Wv.prototype=ZO.prototype;function ZO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ZO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function X1e(t){e:for(var e=t.length,n=1,a=-1,i;n<e;++n)switch(t[n]){case".":a=i=n;break;case"0":a===0&&(a=n),i=n;break;default:if(!+t[n])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(i+1):t}var A7;function J1e(t,e){var n=Gw(t,e);if(!n)return t+"";var a=n[0],i=n[1],s=i-(A7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=a.length;return s===o?a:s>o?a+new Array(s-o+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+Gw(t,Math.max(0,e+s-1))[0]}function gF(t,e){var n=Gw(t,e);if(!n)return t+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const yF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:W1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gF(t*100,e),r:gF,s:J1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function xF(t){return t}var vF=Array.prototype.map,bF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Z1e(t){var e=t.grouping===void 0||t.thousands===void 0?xF:K1e(vF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?xF:Y1e(vF.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=Wv(p);var g=p.fill,x=p.align,b=p.sign,j=p.symbol,S=p.zero,_=p.width,T=p.comma,C=p.precision,P=p.trim,k=p.type;k==="n"?(T=!0,k="g"):yF[k]||(C===void 0&&(C=12),P=!0,k="g"),(S||g==="0"&&x==="=")&&(S=!0,g="0",x="=");var E=j==="$"?n:j==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",I=j==="$"?a:/[%p]/.test(k)?o:"",L=yF[k],$=/[defgprs%]/.test(k);C=C===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function q(F){var H=E,V=I,X,Y,z;if(k==="c")V=L(F)+V,F="";else{F=+F;var G=F<0||1/F<0;if(F=isNaN(F)?c:L(Math.abs(F),C),P&&(F=X1e(F)),G&&+F==0&&b!=="+"&&(G=!1),H=(G?b==="("?b:l:b==="-"||b==="("?"":b)+H,V=(k==="s"?bF[8+A7/3]:"")+V+(G&&b==="("?")":""),$){for(X=-1,Y=F.length;++X<Y;)if(z=F.charCodeAt(X),48>z||z>57){V=(z===46?i+F.slice(X+1):F.slice(X))+V,F=F.slice(0,X);break}}}T&&!S&&(F=e(F,1/0));var ie=H.length+F.length+V.length,W=ie<_?new Array(_-ie+1).join(g):"";switch(T&&S&&(F=e(W+F,W.length?_-V.length:1/0),W=""),x){case"<":F=H+F+V+W;break;case"=":F=H+W+F+V;break;case"^":F=W.slice(0,ie=W.length>>1)+H+F+V+W.slice(ie);break;default:F=W+H+F+V;break}return s(F)}return q.toString=function(){return p+""},q}function f(p,g){var x=d((p=Wv(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(hg(g)/3)))*3,j=Math.pow(10,-b),S=bF[8+b/3];return function(_){return x(j*_)+S}}return{format:d,formatPrefix:f}}var Mj,eM,E7;eje({thousands:",",grouping:[3],currency:["$",""]});function eje(t){return Mj=Z1e(t),eM=Mj.format,E7=Mj.formatPrefix,Mj}function tje(t){return Math.max(0,-hg(Math.abs(t)))}function nje(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hg(e)/3)))*3-hg(Math.abs(t)))}function rje(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hg(e)-hg(t))+1}function P7(t,e,n,a){var i=wP(t,e,n),s;switch(a=Wv(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return a.precision==null&&!isNaN(s=nje(i,o))&&(a.precision=s),E7(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(s=rje(i,Math.max(Math.abs(t),Math.abs(e))))&&(a.precision=s-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(s=tje(i))&&(a.precision=s-(a.type==="%")*2);break}}return eM(a)}function wd(t){var e=t.domain;return t.ticks=function(n){var a=e();return bP(a[0],a[a.length-1],n??10)},t.tickFormat=function(n,a){var i=e();return P7(i[0],i[i.length-1],n??10,a)},t.nice=function(n){n==null&&(n=10);var a=e(),i=0,s=a.length-1,o=a[i],l=a[s],c,d,f=10;for(l<o&&(d=o,o=l,l=d,d=i,i=s,s=d);f-- >0;){if(d=jP(o,l,n),d===c)return a[i]=o,a[s]=l,e(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function Ww(){var t=JO();return t.copy=function(){return qb(t,Ww())},co.apply(t,arguments),wd(t)}function D7(t){var e;function n(a){return a==null||isNaN(a=+a)?e:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(t=Array.from(a,Hw),n):t.slice()},n.unknown=function(a){return arguments.length?(e=a,n):e},n.copy=function(){return D7(t).unknown(e)},t=arguments.length?Array.from(t,Hw):[0,1],wd(n)}function O7(t,e){t=t.slice();var n=0,a=t.length-1,i=t[n],s=t[a],o;return s<i&&(o=n,n=a,a=o,o=i,i=s,s=o),t[n]=e.floor(i),t[a]=e.ceil(s),t}function jF(t){return Math.log(t)}function wF(t){return Math.exp(t)}function aje(t){return-Math.log(-t)}function ije(t){return-Math.exp(-t)}function sje(t){return isFinite(t)?+("1e"+t):t<0?0:t}function oje(t){return t===10?sje:t===Math.E?Math.exp:e=>Math.pow(t,e)}function lje(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function NF(t){return(e,n)=>-t(-e,n)}function tM(t){const e=t(jF,wF),n=e.domain;let a=10,i,s;function o(){return i=lje(a),s=oje(a),n()[0]<0?(i=NF(i),s=NF(s),t(aje,ije)):t(jF,wF),e}return e.base=function(l){return arguments.length?(a=+l,o()):a},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),x=i(f),b,j;const S=l==null?10:+l;let _=[];if(!(a%1)&&x-g<S){if(g=Math.floor(g),x=Math.ceil(x),d>0){for(;g<=x;++g)for(b=1;b<a;++b)if(j=g<0?b/s(-g):b*s(g),!(j<d)){if(j>f)break;_.push(j)}}else for(;g<=x;++g)for(b=a-1;b>=1;--b)if(j=g>0?b/s(-g):b*s(g),!(j<d)){if(j>f)break;_.push(j)}_.length*2<S&&(_=bP(d,f,S))}else _=bP(g,x,Math.min(x-g,S)).map(s);return p?_.reverse():_},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Wv(c)).precision==null&&(c.trim=!0),c=eM(c)),l===1/0)return c;const d=Math.max(1,a*l/e.ticks().length);return f=>{let p=f/s(Math.round(i(f)));return p*a<a-.5&&(p*=a),p<=d?c(f):""}},e.nice=()=>n(O7(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function M7(){const t=tM(gS()).domain([1,10]);return t.copy=()=>qb(t,M7()).base(t.base()),co.apply(t,arguments),t}function SF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _F(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function nM(t){var e=1,n=t(SF(e),_F(e));return n.constant=function(a){return arguments.length?t(SF(e=+a),_F(e)):e},wd(n)}function I7(){var t=nM(gS());return t.copy=function(){return qb(t,I7()).constant(t.constant())},co.apply(t,arguments)}function CF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function cje(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function uje(t){return t<0?-t*t:t*t}function rM(t){var e=t(Fi,Fi),n=1;function a(){return n===1?t(Fi,Fi):n===.5?t(cje,uje):t(CF(n),CF(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,a()):n},wd(e)}function aM(){var t=rM(gS());return t.copy=function(){return qb(t,aM()).exponent(t.exponent())},co.apply(t,arguments),t}function dje(){return aM.apply(null,arguments).exponent(.5)}function TF(t){return Math.sign(t)*t*t}function hje(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function R7(){var t=JO(),e=[0,1],n=!1,a;function i(s){var o=hje(t(s));return isNaN(o)?a:n?Math.round(o):o}return i.invert=function(s){return t.invert(TF(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Hw)).map(TF)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return R7(t.domain(),e).round(n).clamp(t.clamp()).unknown(a)},co.apply(i,arguments),wd(i)}function L7(){var t=[],e=[],n=[],a;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=y1e(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?a:e[Bb(n,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ld),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.quantiles=function(){return n.slice()},s.copy=function(){return L7().domain(t).range(e).unknown(a)},co.apply(s,arguments)}function F7(){var t=0,e=1,n=1,a=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[Bb(a,c,0,n)]:s}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,a[0]]:d>=n?[a[n-1],e]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return F7().domain([t,e]).range(i).unknown(s)},co.apply(wd(o),arguments)}function $7(){var t=[.5],e=[0,1],n,a=1;function i(s){return s!=null&&s<=s?e[Bb(t,s,0,a)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),a=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),a=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return $7().domain(t).range(e).unknown(n)},co.apply(i,arguments)}const Uk=new Date,Vk=new Date;function ka(t,e,n,a){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let d;do c.push(d=new Date(+s)),e(s,l),t(s);while(d<s&&s<o);return c},i.filter=s=>ka(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(Uk.setTime(+s),Vk.setTime(+o),t(Uk),t(Vk),Math.floor(n(Uk,Vk))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(a?o=>a(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Kw=ka(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Kw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ka(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Kw);Kw.range;const Sc=1e3,ao=Sc*60,_c=ao*60,Fc=_c*24,iM=Fc*7,kF=Fc*30,Hk=Fc*365,Zh=ka(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Sc)},(t,e)=>(e-t)/Sc,t=>t.getUTCSeconds());Zh.range;const sM=ka(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sc)},(t,e)=>{t.setTime(+t+e*ao)},(t,e)=>(e-t)/ao,t=>t.getMinutes());sM.range;const oM=ka(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ao)},(t,e)=>(e-t)/ao,t=>t.getUTCMinutes());oM.range;const lM=ka(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sc-t.getMinutes()*ao)},(t,e)=>{t.setTime(+t+e*_c)},(t,e)=>(e-t)/_c,t=>t.getHours());lM.range;const cM=ka(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*_c)},(t,e)=>(e-t)/_c,t=>t.getUTCHours());cM.range;const Ub=ka(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ao)/Fc,t=>t.getDate()-1);Ub.range;const yS=ka(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fc,t=>t.getUTCDate()-1);yS.range;const B7=ka(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fc,t=>Math.floor(t/Fc));B7.range;function Rf(t){return ka(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ao)/iM)}const xS=Rf(0),Yw=Rf(1),fje=Rf(2),pje=Rf(3),fg=Rf(4),mje=Rf(5),gje=Rf(6);xS.range;Yw.range;fje.range;pje.range;fg.range;mje.range;gje.range;function Lf(t){return ka(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/iM)}const vS=Lf(0),Qw=Lf(1),yje=Lf(2),xje=Lf(3),pg=Lf(4),vje=Lf(5),bje=Lf(6);vS.range;Qw.range;yje.range;xje.range;pg.range;vje.range;bje.range;const uM=ka(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());uM.range;const dM=ka(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());dM.range;const $c=ka(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());$c.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ka(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});$c.range;const Bc=ka(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Bc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ka(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Bc.range;function z7(t,e,n,a,i,s){const o=[[Zh,1,Sc],[Zh,5,5*Sc],[Zh,15,15*Sc],[Zh,30,30*Sc],[s,1,ao],[s,5,5*ao],[s,15,15*ao],[s,30,30*ao],[i,1,_c],[i,3,3*_c],[i,6,6*_c],[i,12,12*_c],[a,1,Fc],[a,2,2*Fc],[n,1,iM],[e,1,kF],[e,3,3*kF],[t,1,Hk]];function l(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const x=p&&typeof p.range=="function"?p:c(d,f,p),b=x?x.range(d,+f+1):[];return g?b.reverse():b}function c(d,f,p){const g=Math.abs(f-d)/p,x=WO(([,,S])=>S).right(o,g);if(x===o.length)return t.every(wP(d/Hk,f/Hk,p));if(x===0)return Kw.every(Math.max(wP(d,f,p),1));const[b,j]=o[g/o[x-1][2]<o[x][2]/g?x-1:x];return b.every(j)}return[l,c]}const[jje,wje]=z7(Bc,dM,vS,B7,cM,oM),[Nje,Sje]=z7($c,uM,xS,Ub,lM,sM);function Gk(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Wk(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Jx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function _je(t){var e=t.dateTime,n=t.date,a=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=Zx(i),f=ev(i),p=Zx(s),g=ev(s),x=Zx(o),b=ev(o),j=Zx(l),S=ev(l),_=Zx(c),T=ev(c),C={a:G,A:ie,b:W,B,c:null,d:MF,e:MF,f:Kje,g:awe,G:swe,H:Hje,I:Gje,j:Wje,L:q7,m:Yje,M:Qje,p:ce,q:je,Q:LF,s:FF,S:Xje,u:Jje,U:Zje,V:ewe,w:twe,W:nwe,x:null,X:null,y:rwe,Y:iwe,Z:owe,"%":RF},P={a:K,A:Ie,b:Ue,B:ze,c:null,d:IF,e:IF,f:dwe,g:jwe,G:Nwe,H:lwe,I:cwe,j:uwe,L:V7,m:hwe,M:fwe,p:Le,q:be,Q:LF,s:FF,S:pwe,u:mwe,U:gwe,V:ywe,w:xwe,W:vwe,x:null,X:null,y:bwe,Y:wwe,Z:Swe,"%":RF},k={a:q,A:F,b:H,B:V,c:X,d:DF,e:DF,f:zje,g:PF,G:EF,H:OF,I:OF,j:Lje,L:Bje,m:Rje,M:Fje,p:$,q:Ije,Q:Uje,s:Vje,S:$je,u:Eje,U:Pje,V:Dje,w:Aje,W:Oje,x:Y,X:z,y:PF,Y:EF,Z:Mje,"%":qje};C.x=E(n,C),C.X=E(a,C),C.c=E(e,C),P.x=E(n,P),P.X=E(a,P),P.c=E(e,P);function E(Ce,Ae){return function(me){var ye=[],le=-1,J=0,ae=Ce.length,ue,ee,Ne;for(me instanceof Date||(me=new Date(+me));++le<ae;)Ce.charCodeAt(le)===37&&(ye.push(Ce.slice(J,le)),(ee=AF[ue=Ce.charAt(++le)])!=null?ue=Ce.charAt(++le):ee=ue==="e"?" ":"0",(Ne=Ae[ue])&&(ue=Ne(me,ee)),ye.push(ue),J=le+1);return ye.push(Ce.slice(J,le)),ye.join("")}}function I(Ce,Ae){return function(me){var ye=Jx(1900,void 0,1),le=L(ye,Ce,me+="",0),J,ae;if(le!=me.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(Ae&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(J=Wk(Jx(ye.y,0,1)),ae=J.getUTCDay(),J=ae>4||ae===0?Qw.ceil(J):Qw(J),J=yS.offset(J,(ye.V-1)*7),ye.y=J.getUTCFullYear(),ye.m=J.getUTCMonth(),ye.d=J.getUTCDate()+(ye.w+6)%7):(J=Gk(Jx(ye.y,0,1)),ae=J.getDay(),J=ae>4||ae===0?Yw.ceil(J):Yw(J),J=Ub.offset(J,(ye.V-1)*7),ye.y=J.getFullYear(),ye.m=J.getMonth(),ye.d=J.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),ae="Z"in ye?Wk(Jx(ye.y,0,1)).getUTCDay():Gk(Jx(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(ae+5)%7:ye.w+ye.U*7-(ae+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,Wk(ye)):Gk(ye)}}function L(Ce,Ae,me,ye){for(var le=0,J=Ae.length,ae=me.length,ue,ee;le<J;){if(ye>=ae)return-1;if(ue=Ae.charCodeAt(le++),ue===37){if(ue=Ae.charAt(le++),ee=k[ue in AF?Ae.charAt(le++):ue],!ee||(ye=ee(Ce,me,ye))<0)return-1}else if(ue!=me.charCodeAt(ye++))return-1}return ye}function $(Ce,Ae,me){var ye=d.exec(Ae.slice(me));return ye?(Ce.p=f.get(ye[0].toLowerCase()),me+ye[0].length):-1}function q(Ce,Ae,me){var ye=x.exec(Ae.slice(me));return ye?(Ce.w=b.get(ye[0].toLowerCase()),me+ye[0].length):-1}function F(Ce,Ae,me){var ye=p.exec(Ae.slice(me));return ye?(Ce.w=g.get(ye[0].toLowerCase()),me+ye[0].length):-1}function H(Ce,Ae,me){var ye=_.exec(Ae.slice(me));return ye?(Ce.m=T.get(ye[0].toLowerCase()),me+ye[0].length):-1}function V(Ce,Ae,me){var ye=j.exec(Ae.slice(me));return ye?(Ce.m=S.get(ye[0].toLowerCase()),me+ye[0].length):-1}function X(Ce,Ae,me){return L(Ce,e,Ae,me)}function Y(Ce,Ae,me){return L(Ce,n,Ae,me)}function z(Ce,Ae,me){return L(Ce,a,Ae,me)}function G(Ce){return o[Ce.getDay()]}function ie(Ce){return s[Ce.getDay()]}function W(Ce){return c[Ce.getMonth()]}function B(Ce){return l[Ce.getMonth()]}function ce(Ce){return i[+(Ce.getHours()>=12)]}function je(Ce){return 1+~~(Ce.getMonth()/3)}function K(Ce){return o[Ce.getUTCDay()]}function Ie(Ce){return s[Ce.getUTCDay()]}function Ue(Ce){return c[Ce.getUTCMonth()]}function ze(Ce){return l[Ce.getUTCMonth()]}function Le(Ce){return i[+(Ce.getUTCHours()>=12)]}function be(Ce){return 1+~~(Ce.getUTCMonth()/3)}return{format:function(Ce){var Ae=E(Ce+="",C);return Ae.toString=function(){return Ce},Ae},parse:function(Ce){var Ae=I(Ce+="",!1);return Ae.toString=function(){return Ce},Ae},utcFormat:function(Ce){var Ae=E(Ce+="",P);return Ae.toString=function(){return Ce},Ae},utcParse:function(Ce){var Ae=I(Ce+="",!0);return Ae.toString=function(){return Ce},Ae}}}var AF={"-":"",_:" ",0:"0"},$a=/^\s*\d+/,Cje=/^%/,Tje=/[\\^$*+?|[\]().{}]/g;function Zn(t,e,n){var a=t<0?"-":"",i=(a?-t:t)+"",s=i.length;return a+(s<n?new Array(n-s+1).join(e)+i:i)}function kje(t){return t.replace(Tje,"\\$&")}function Zx(t){return new RegExp("^(?:"+t.map(kje).join("|")+")","i")}function ev(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Aje(t,e,n){var a=$a.exec(e.slice(n,n+1));return a?(t.w=+a[0],n+a[0].length):-1}function Eje(t,e,n){var a=$a.exec(e.slice(n,n+1));return a?(t.u=+a[0],n+a[0].length):-1}function Pje(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.U=+a[0],n+a[0].length):-1}function Dje(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.V=+a[0],n+a[0].length):-1}function Oje(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.W=+a[0],n+a[0].length):-1}function EF(t,e,n){var a=$a.exec(e.slice(n,n+4));return a?(t.y=+a[0],n+a[0].length):-1}function PF(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function Mje(t,e,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return a?(t.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function Ije(t,e,n){var a=$a.exec(e.slice(n,n+1));return a?(t.q=a[0]*3-3,n+a[0].length):-1}function Rje(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.m=a[0]-1,n+a[0].length):-1}function DF(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.d=+a[0],n+a[0].length):-1}function Lje(t,e,n){var a=$a.exec(e.slice(n,n+3));return a?(t.m=0,t.d=+a[0],n+a[0].length):-1}function OF(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.H=+a[0],n+a[0].length):-1}function Fje(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.M=+a[0],n+a[0].length):-1}function $je(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.S=+a[0],n+a[0].length):-1}function Bje(t,e,n){var a=$a.exec(e.slice(n,n+3));return a?(t.L=+a[0],n+a[0].length):-1}function zje(t,e,n){var a=$a.exec(e.slice(n,n+6));return a?(t.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function qje(t,e,n){var a=Cje.exec(e.slice(n,n+1));return a?n+a[0].length:-1}function Uje(t,e,n){var a=$a.exec(e.slice(n));return a?(t.Q=+a[0],n+a[0].length):-1}function Vje(t,e,n){var a=$a.exec(e.slice(n));return a?(t.s=+a[0],n+a[0].length):-1}function MF(t,e){return Zn(t.getDate(),e,2)}function Hje(t,e){return Zn(t.getHours(),e,2)}function Gje(t,e){return Zn(t.getHours()%12||12,e,2)}function Wje(t,e){return Zn(1+Ub.count($c(t),t),e,3)}function q7(t,e){return Zn(t.getMilliseconds(),e,3)}function Kje(t,e){return q7(t,e)+"000"}function Yje(t,e){return Zn(t.getMonth()+1,e,2)}function Qje(t,e){return Zn(t.getMinutes(),e,2)}function Xje(t,e){return Zn(t.getSeconds(),e,2)}function Jje(t){var e=t.getDay();return e===0?7:e}function Zje(t,e){return Zn(xS.count($c(t)-1,t),e,2)}function U7(t){var e=t.getDay();return e>=4||e===0?fg(t):fg.ceil(t)}function ewe(t,e){return t=U7(t),Zn(fg.count($c(t),t)+($c(t).getDay()===4),e,2)}function twe(t){return t.getDay()}function nwe(t,e){return Zn(Yw.count($c(t)-1,t),e,2)}function rwe(t,e){return Zn(t.getFullYear()%100,e,2)}function awe(t,e){return t=U7(t),Zn(t.getFullYear()%100,e,2)}function iwe(t,e){return Zn(t.getFullYear()%1e4,e,4)}function swe(t,e){var n=t.getDay();return t=n>=4||n===0?fg(t):fg.ceil(t),Zn(t.getFullYear()%1e4,e,4)}function owe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Zn(e/60|0,"0",2)+Zn(e%60,"0",2)}function IF(t,e){return Zn(t.getUTCDate(),e,2)}function lwe(t,e){return Zn(t.getUTCHours(),e,2)}function cwe(t,e){return Zn(t.getUTCHours()%12||12,e,2)}function uwe(t,e){return Zn(1+yS.count(Bc(t),t),e,3)}function V7(t,e){return Zn(t.getUTCMilliseconds(),e,3)}function dwe(t,e){return V7(t,e)+"000"}function hwe(t,e){return Zn(t.getUTCMonth()+1,e,2)}function fwe(t,e){return Zn(t.getUTCMinutes(),e,2)}function pwe(t,e){return Zn(t.getUTCSeconds(),e,2)}function mwe(t){var e=t.getUTCDay();return e===0?7:e}function gwe(t,e){return Zn(vS.count(Bc(t)-1,t),e,2)}function H7(t){var e=t.getUTCDay();return e>=4||e===0?pg(t):pg.ceil(t)}function ywe(t,e){return t=H7(t),Zn(pg.count(Bc(t),t)+(Bc(t).getUTCDay()===4),e,2)}function xwe(t){return t.getUTCDay()}function vwe(t,e){return Zn(Qw.count(Bc(t)-1,t),e,2)}function bwe(t,e){return Zn(t.getUTCFullYear()%100,e,2)}function jwe(t,e){return t=H7(t),Zn(t.getUTCFullYear()%100,e,2)}function wwe(t,e){return Zn(t.getUTCFullYear()%1e4,e,4)}function Nwe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?pg(t):pg.ceil(t),Zn(t.getUTCFullYear()%1e4,e,4)}function Swe(){return"+0000"}function RF(){return"%"}function LF(t){return+t}function FF(t){return Math.floor(+t/1e3)}var bm,G7,W7;_we({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _we(t){return bm=_je(t),G7=bm.format,bm.parse,W7=bm.utcFormat,bm.utcParse,bm}function Cwe(t){return new Date(t)}function Twe(t){return t instanceof Date?+t:+new Date(+t)}function hM(t,e,n,a,i,s,o,l,c,d){var f=JO(),p=f.invert,g=f.domain,x=d(".%L"),b=d(":%S"),j=d("%I:%M"),S=d("%I %p"),_=d("%a %d"),T=d("%b %d"),C=d("%B"),P=d("%Y");function k(E){return(c(E)<E?x:l(E)<E?b:o(E)<E?j:s(E)<E?S:a(E)<E?i(E)<E?_:T:n(E)<E?C:P)(E)}return f.invert=function(E){return new Date(p(E))},f.domain=function(E){return arguments.length?g(Array.from(E,Twe)):g().map(Cwe)},f.ticks=function(E){var I=g();return t(I[0],I[I.length-1],E??10)},f.tickFormat=function(E,I){return I==null?k:d(I)},f.nice=function(E){var I=g();return(!E||typeof E.range!="function")&&(E=e(I[0],I[I.length-1],E??10)),E?g(O7(I,E)):f},f.copy=function(){return qb(f,hM(t,e,n,a,i,s,o,l,c,d))},f}function kwe(){return co.apply(hM(Nje,Sje,$c,uM,xS,Ub,lM,sM,Zh,G7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Awe(){return co.apply(hM(jje,wje,Bc,dM,vS,yS,cM,oM,Zh,W7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bS(){var t=0,e=1,n,a,i,s,o=Fi,l=!1,c;function d(p){return p==null||isNaN(p=+p)?c:o(i===0?.5:(p=(s(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),a=s(e=+e),i=n===a?0:1/(a-n),d):[t,e]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function f(p){return function(g){var x,b;return arguments.length?([x,b]=g,o=p(x,b),d):[o(0),o(1)]}}return d.range=f(Hg),d.rangeRound=f(XO),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return s=p,n=p(t),a=p(e),i=n===a?0:1/(a-n),d}}function Nd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function K7(){var t=wd(bS()(Fi));return t.copy=function(){return Nd(t,K7())},Kc.apply(t,arguments)}function Y7(){var t=tM(bS()).domain([1,10]);return t.copy=function(){return Nd(t,Y7()).base(t.base())},Kc.apply(t,arguments)}function Q7(){var t=nM(bS());return t.copy=function(){return Nd(t,Q7()).constant(t.constant())},Kc.apply(t,arguments)}function fM(){var t=rM(bS());return t.copy=function(){return Nd(t,fM()).exponent(t.exponent())},Kc.apply(t,arguments)}function Ewe(){return fM.apply(null,arguments).exponent(.5)}function X7(){var t=[],e=Fi;function n(a){if(a!=null&&!isNaN(a=+a))return e((Bb(t,a,1)-1)/(t.length-1))}return n.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let i of a)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ld),n},n.interpolator=function(a){return arguments.length?(e=a,n):e},n.range=function(){return t.map((a,i)=>e(i/(t.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(i,s)=>g1e(t,s/a))},n.copy=function(){return X7(e).domain(t)},Kc.apply(n,arguments)}function jS(){var t=0,e=.5,n=1,a=1,i,s,o,l,c,d=Fi,f,p=!1,g;function x(j){return isNaN(j=+j)?g:(j=.5+((j=+f(j))-s)*(a*j<a*s?l:c),d(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([t,e,n]=j,i=f(t=+t),s=f(e=+e),o=f(n=+n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x):[t,e,n]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(d=j,x):d};function b(j){return function(S){var _,T,C;return arguments.length?([_,T,C]=S,d=q1e(j,[_,T,C]),x):[d(0),d(.5),d(1)]}}return x.range=b(Hg),x.rangeRound=b(XO),x.unknown=function(j){return arguments.length?(g=j,x):g},function(j){return f=j,i=j(t),s=j(e),o=j(n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x}}function J7(){var t=wd(jS()(Fi));return t.copy=function(){return Nd(t,J7())},Kc.apply(t,arguments)}function Z7(){var t=tM(jS()).domain([.1,1,10]);return t.copy=function(){return Nd(t,Z7()).base(t.base())},Kc.apply(t,arguments)}function eV(){var t=nM(jS());return t.copy=function(){return Nd(t,eV()).constant(t.constant())},Kc.apply(t,arguments)}function pM(){var t=rM(jS());return t.copy=function(){return Nd(t,pM()).exponent(t.exponent())},Kc.apply(t,arguments)}function Pwe(){return pM.apply(null,arguments).exponent(.5)}const $F=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Uv,scaleDiverging:J7,scaleDivergingLog:Z7,scaleDivergingPow:pM,scaleDivergingSqrt:Pwe,scaleDivergingSymlog:eV,scaleIdentity:D7,scaleImplicit:NP,scaleLinear:Ww,scaleLog:M7,scaleOrdinal:KO,scalePoint:wv,scalePow:aM,scaleQuantile:L7,scaleQuantize:F7,scaleRadial:R7,scaleSequential:K7,scaleSequentialLog:Y7,scaleSequentialPow:fM,scaleSequentialQuantile:X7,scaleSequentialSqrt:Ewe,scaleSequentialSymlog:Q7,scaleSqrt:dje,scaleSymlog:I7,scaleThreshold:$7,scaleTime:kwe,scaleUtc:Awe,tickFormat:P7},Symbol.toStringTag,{value:"Module"}));var Kk,BF;function wS(){if(BF)return Kk;BF=1;var t=zg();function e(n,a,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=a(l);if(c!=null&&(d===void 0?c===c&&!t(c):i(c,d)))var d=c,f=l}return f}return Kk=e,Kk}var Yk,zF;function tV(){if(zF)return Yk;zF=1;function t(e,n){return e>n}return Yk=t,Yk}var Qk,qF;function Dwe(){if(qF)return Qk;qF=1;var t=wS(),e=tV(),n=Vg();function a(i){return i&&i.length?t(i,n,e):void 0}return Qk=a,Qk}var Owe=Dwe();const id=Wn(Owe);var Xk,UF;function nV(){if(UF)return Xk;UF=1;function t(e,n){return e<n}return Xk=t,Xk}var Jk,VF;function Mwe(){if(VF)return Jk;VF=1;var t=wS(),e=nV(),n=Vg();function a(i){return i&&i.length?t(i,n,e):void 0}return Jk=a,Jk}var Iwe=Mwe();const NS=Wn(Iwe);var Zk,HF;function Rwe(){if(HF)return Zk;HF=1;var t=EO(),e=zl(),n=u7(),a=fs();function i(s,o){var l=a(s)?t:n;return l(s,e(o,3))}return Zk=i,Zk}var eA,GF;function Lwe(){if(GF)return eA;GF=1;var t=l7(),e=Rwe();function n(a,i){return t(e(a,i),1)}return eA=n,eA}var Fwe=Lwe();const $we=Wn(Fwe);var tA,WF;function Bwe(){if(WF)return tA;WF=1;var t=UO();function e(n,a){return t(n,a)}return tA=e,tA}var zwe=Bwe();const kf=Wn(zwe);var Gg=1e9,qwe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},gM,Hr=!0,oo="[DecimalError] ",ff=oo+"Invalid argument: ",mM=oo+"Exponent out of range: ",Wg=Math.floor,Hh=Math.pow,Uwe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Es,Ia=1e7,Fr=7,rV=9007199254740991,Xw=Wg(rV/Fr),Rt={};Rt.absoluteValue=Rt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Rt.comparedTo=Rt.cmp=function(t){var e,n,a,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(a=s.d.length,i=t.d.length,e=0,n=a<i?a:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return a===i?0:a>i^s.s<0?1:-1};Rt.decimalPlaces=Rt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Fr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Rt.dividedBy=Rt.div=function(t){return Dc(this,new this.constructor(t))};Rt.dividedToIntegerBy=Rt.idiv=function(t){var e=this,n=e.constructor;return Cr(Dc(e,new n(t),0,1),n.precision)};Rt.equals=Rt.eq=function(t){return!this.cmp(t)};Rt.exponent=function(){return xa(this)};Rt.greaterThan=Rt.gt=function(t){return this.cmp(t)>0};Rt.greaterThanOrEqualTo=Rt.gte=function(t){return this.cmp(t)>=0};Rt.isInteger=Rt.isint=function(){return this.e>this.d.length-2};Rt.isNegative=Rt.isneg=function(){return this.s<0};Rt.isPositive=Rt.ispos=function(){return this.s>0};Rt.isZero=function(){return this.s===0};Rt.lessThan=Rt.lt=function(t){return this.cmp(t)<0};Rt.lessThanOrEqualTo=Rt.lte=function(t){return this.cmp(t)<1};Rt.logarithm=Rt.log=function(t){var e,n=this,a=n.constructor,i=a.precision,s=i+5;if(t===void 0)t=new a(10);else if(t=new a(t),t.s<1||t.eq(Es))throw Error(oo+"NaN");if(n.s<1)throw Error(oo+(n.s?"NaN":"-Infinity"));return n.eq(Es)?new a(0):(Hr=!1,e=Dc(Kv(n,s),Kv(t,s),s),Hr=!0,Cr(e,i))};Rt.minus=Rt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?sV(e,t):aV(e,(t.s=-t.s,t))};Rt.modulo=Rt.mod=function(t){var e,n=this,a=n.constructor,i=a.precision;if(t=new a(t),!t.s)throw Error(oo+"NaN");return n.s?(Hr=!1,e=Dc(n,t,0,1).times(t),Hr=!0,n.minus(e)):Cr(new a(n),i)};Rt.naturalExponential=Rt.exp=function(){return iV(this)};Rt.naturalLogarithm=Rt.ln=function(){return Kv(this)};Rt.negated=Rt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Rt.plus=Rt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?aV(e,t):sV(e,(t.s=-t.s,t))};Rt.precision=Rt.sd=function(t){var e,n,a,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ff+t);if(e=xa(i)+1,a=i.d.length-1,n=a*Fr+1,a=i.d[a],a){for(;a%10==0;a/=10)n--;for(a=i.d[0];a>=10;a/=10)n++}return t&&e>n?e:n};Rt.squareRoot=Rt.sqrt=function(){var t,e,n,a,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(oo+"NaN")}for(t=xa(l),Hr=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Dl(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Wg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),a=new c(e)):a=new c(i.toString()),n=c.precision,i=o=n+3;;)if(s=a,a=s.plus(Dc(l,s,o+2)).times(.5),Dl(s.d).slice(0,o)===(e=Dl(a.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Cr(s,n+1,0),s.times(s).eq(l)){a=s;break}}else if(e!="9999")break;o+=4}return Hr=!0,Cr(a,n)};Rt.times=Rt.mul=function(t){var e,n,a,i,s,o,l,c,d,f=this,p=f.constructor,g=f.d,x=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,d=x.length,c<d&&(s=g,g=x,x=s,o=c,c=d,d=o),s=[],o=c+d,a=o;a--;)s.push(0);for(a=d;--a>=0;){for(e=0,i=c+a;i>a;)l=s[i]+x[a]*g[i-a-1]+e,s[i--]=l%Ia|0,e=l/Ia|0;s[i]=(s[i]+e)%Ia|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Hr?Cr(t,p.precision):t};Rt.toDecimalPlaces=Rt.todp=function(t,e){var n=this,a=n.constructor;return n=new a(n),t===void 0?n:(Fl(t,0,Gg),e===void 0?e=a.rounding:Fl(e,0,8),Cr(n,t+xa(n)+1,e))};Rt.toExponential=function(t,e){var n,a=this,i=a.constructor;return t===void 0?n=Af(a,!0):(Fl(t,0,Gg),e===void 0?e=i.rounding:Fl(e,0,8),a=Cr(new i(a),t+1,e),n=Af(a,!0,t+1)),n};Rt.toFixed=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?Af(i):(Fl(t,0,Gg),e===void 0?e=s.rounding:Fl(e,0,8),a=Cr(new s(i),t+xa(i)+1,e),n=Af(a.abs(),!1,t+xa(a)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Rt.toInteger=Rt.toint=function(){var t=this,e=t.constructor;return Cr(new e(t),xa(t)+1,e.rounding)};Rt.toNumber=function(){return+this};Rt.toPower=Rt.pow=function(t){var e,n,a,i,s,o,l=this,c=l.constructor,d=12,f=+(t=new c(t));if(!t.s)return new c(Es);if(l=new c(l),!l.s){if(t.s<1)throw Error(oo+"Infinity");return l}if(l.eq(Es))return l;if(a=c.precision,t.eq(Es))return Cr(l,a);if(e=t.e,n=t.d.length-1,o=e>=n,s=l.s,o){if((n=f<0?-f:f)<=rV){for(i=new c(Es),e=Math.ceil(a/Fr+4),Hr=!1;n%2&&(i=i.times(l),YF(i.d,e)),n=Wg(n/2),n!==0;)l=l.times(l),YF(l.d,e);return Hr=!0,t.s<0?new c(Es).div(i):Cr(i,a)}}else if(s<0)throw Error(oo+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Hr=!1,i=t.times(Kv(l,a+d)),Hr=!0,i=iV(i),i.s=s,i};Rt.toPrecision=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?(n=xa(i),a=Af(i,n<=s.toExpNeg||n>=s.toExpPos)):(Fl(t,1,Gg),e===void 0?e=s.rounding:Fl(e,0,8),i=Cr(new s(i),t,e),n=xa(i),a=Af(i,t<=n||n<=s.toExpNeg,t)),a};Rt.toSignificantDigits=Rt.tosd=function(t,e){var n=this,a=n.constructor;return t===void 0?(t=a.precision,e=a.rounding):(Fl(t,1,Gg),e===void 0?e=a.rounding:Fl(e,0,8)),Cr(new a(n),t,e)};Rt.toString=Rt.valueOf=Rt.val=Rt.toJSON=Rt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=xa(t),n=t.constructor;return Af(t,e<=n.toExpNeg||e>=n.toExpPos)};function aV(t,e){var n,a,i,s,o,l,c,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Hr?Cr(e,p):e;if(c=t.d,d=e.d,o=t.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(a=c,s=-s,l=d.length):(a=d,i=o,l=c.length),o=Math.ceil(p/Fr),l=o>l?o+1:l+1,s>l&&(s=l,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for(l=c.length,s=d.length,l-s<0&&(s=l,a=d,d=c,c=a),n=0;s;)n=(c[--s]=c[s]+d[s]+n)/Ia|0,c[s]%=Ia;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Hr?Cr(e,p):e}function Fl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ff+t)}function Dl(t){var e,n,a,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)a=t[e]+"",n=Fr-a.length,n&&(s+=Wu(n)),s+=a;o=t[e],a=o+"",n=Fr-a.length,n&&(s+=Wu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Dc=function(){function t(a,i){var s,o=0,l=a.length;for(a=a.slice();l--;)s=a[l]*i+o,a[l]=s%Ia|0,o=s/Ia|0;return o&&a.unshift(o),a}function e(a,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(a[l]!=i[l]){c=a[l]>i[l]?1:-1;break}return c}function n(a,i,s){for(var o=0;s--;)a[s]-=o,o=a[s]<i[s]?1:0,a[s]=o*Ia+a[s]-i[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,i,s,o){var l,c,d,f,p,g,x,b,j,S,_,T,C,P,k,E,I,L,$=a.constructor,q=a.s==i.s?1:-1,F=a.d,H=i.d;if(!a.s)return new $(a);if(!i.s)throw Error(oo+"Division by zero");for(c=a.e-i.e,I=H.length,k=F.length,x=new $(q),b=x.d=[],d=0;H[d]==(F[d]||0);)++d;if(H[d]>(F[d]||0)&&--c,s==null?T=s=$.precision:o?T=s+(xa(a)-xa(i))+1:T=s,T<0)return new $(0);if(T=T/Fr+2|0,d=0,I==1)for(f=0,H=H[0],T++;(d<k||f)&&T--;d++)C=f*Ia+(F[d]||0),b[d]=C/H|0,f=C%H|0;else{for(f=Ia/(H[0]+1)|0,f>1&&(H=t(H,f),F=t(F,f),I=H.length,k=F.length),P=I,j=F.slice(0,I),S=j.length;S<I;)j[S++]=0;L=H.slice(),L.unshift(0),E=H[0],H[1]>=Ia/2&&++E;do f=0,l=e(H,j,I,S),l<0?(_=j[0],I!=S&&(_=_*Ia+(j[1]||0)),f=_/E|0,f>1?(f>=Ia&&(f=Ia-1),p=t(H,f),g=p.length,S=j.length,l=e(p,j,g,S),l==1&&(f--,n(p,I<g?L:H,g))):(f==0&&(l=f=1),p=H.slice()),g=p.length,g<S&&p.unshift(0),n(j,p,S),l==-1&&(S=j.length,l=e(H,j,I,S),l<1&&(f++,n(j,I<S?L:H,S))),S=j.length):l===0&&(f++,j=[0]),b[d++]=f,l&&j[0]?j[S++]=F[P]||0:(j=[F[P]],S=1);while((P++<k||j[0]!==void 0)&&T--)}return b[0]||b.shift(),x.e=c,Cr(x,o?s+xa(x)+1:s)}}();function iV(t,e){var n,a,i,s,o,l,c=0,d=0,f=t.constructor,p=f.precision;if(xa(t)>16)throw Error(mM+xa(t));if(!t.s)return new f(Es);for(Hr=!1,l=p,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(a=Math.log(Hh(2,d))/Math.LN10*2+5|0,l+=a,n=i=s=new f(Es),f.precision=l;;){if(i=Cr(i.times(t),l),n=n.times(++c),o=s.plus(Dc(i,n,l)),Dl(o.d).slice(0,l)===Dl(s.d).slice(0,l)){for(;d--;)s=Cr(s.times(s),l);return f.precision=p,e==null?(Hr=!0,Cr(s,p)):s}s=o}}function xa(t){for(var e=t.e*Fr,n=t.d[0];n>=10;n/=10)e++;return e}function nA(t,e,n){if(e>t.LN10.sd())throw Hr=!0,n&&(t.precision=n),Error(oo+"LN10 precision limit exceeded");return Cr(new t(t.LN10),e)}function Wu(t){for(var e="";t--;)e+="0";return e}function Kv(t,e){var n,a,i,s,o,l,c,d,f,p=1,g=10,x=t,b=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(oo+(x.s?"NaN":"-Infinity"));if(x.eq(Es))return new j(0);if(e==null?(Hr=!1,d=S):d=e,x.eq(10))return e==null&&(Hr=!0),nA(j,d);if(d+=g,j.precision=d,n=Dl(b),a=n.charAt(0),s=xa(x),Math.abs(s)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)x=x.times(t),n=Dl(x.d),a=n.charAt(0),p++;s=xa(x),a>1?(x=new j("0."+n),s++):x=new j(a+"."+n.slice(1))}else return c=nA(j,d+2,S).times(s+""),x=Kv(new j(a+"."+n.slice(1)),d-g).plus(c),j.precision=S,e==null?(Hr=!0,Cr(x,S)):x;for(l=o=x=Dc(x.minus(Es),x.plus(Es),d),f=Cr(x.times(x),d),i=3;;){if(o=Cr(o.times(f),d),c=l.plus(Dc(o,new j(i),d)),Dl(c.d).slice(0,d)===Dl(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(nA(j,d+2,S).times(s+""))),l=Dc(l,new j(p),d),j.precision=S,e==null?(Hr=!0,Cr(l,S)):l;l=c,i+=2}}function KF(t,e){var n,a,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(n<0&&(n=a),n+=+e.slice(a+1),e=e.substring(0,a)):n<0&&(n=e.length),a=0;e.charCodeAt(a)===48;)++a;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(a,i),e){if(i-=a,n=n-a-1,t.e=Wg(n/Fr),t.d=[],a=(n+1)%Fr,n<0&&(a+=Fr),a<i){for(a&&t.d.push(+e.slice(0,a)),i-=Fr;a<i;)t.d.push(+e.slice(a,a+=Fr));e=e.slice(a),a=Fr-e.length}else a-=i;for(;a--;)e+="0";if(t.d.push(+e),Hr&&(t.e>Xw||t.e<-Xw))throw Error(mM+n)}else t.s=0,t.e=0,t.d=[0];return t}function Cr(t,e,n){var a,i,s,o,l,c,d,f,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(a=e-o,a<0)a+=Fr,i=e,d=p[f=0];else{if(f=Math.ceil((a+1)/Fr),s=p.length,f>=s)return t;for(d=s=p[f],o=1;s>=10;s/=10)o++;a%=Fr,i=a-Fr+o}if(n!==void 0&&(s=Hh(10,o-i-1),l=d/s%10|0,c=e<0||p[f+1]!==void 0||d%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?i>0?d/Hh(10,o-i):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(s=xa(t),p.length=1,e=e-s-1,p[0]=Hh(10,(Fr-e%Fr)%Fr),t.e=Wg(-e/Fr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(a==0?(p.length=f,s=1,f--):(p.length=f+1,s=Hh(10,Fr-a),p[f]=i>0?(d/Hh(10,o-i)%Hh(10,i)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==Ia&&(p[0]=1,++t.e);break}else{if(p[f]+=s,p[f]!=Ia)break;p[f--]=0,s=1}for(a=p.length;p[--a]===0;)p.pop();if(Hr&&(t.e>Xw||t.e<-Xw))throw Error(mM+xa(t));return t}function sV(t,e){var n,a,i,s,o,l,c,d,f,p,g=t.constructor,x=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Hr?Cr(e,x):e;if(c=t.d,p=e.d,a=e.e,d=t.e,c=c.slice(),o=d-a,o){for(f=o<0,f?(n=c,o=-o,l=p.length):(n=p,a=d,l=c.length),i=Math.max(Math.ceil(x/Fr),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=p.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){f=c[i]<p[i];break}o=0}for(f&&(n=c,c=p,p=n,e.s=-e.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(s=i;s&&c[--s]===0;)c[s]=Ia-1;--c[s],c[i]+=Ia}c[i]-=p[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(e.d=c,e.e=a,Hr?Cr(e,x):e):new g(0)}function Af(t,e,n){var a,i=xa(t),s=Dl(t.d),o=s.length;return e?(n&&(a=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Wu(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Wu(-i-1)+s,n&&(a=n-o)>0&&(s+=Wu(a))):i>=o?(s+=Wu(i+1-o),n&&(a=n-i-1)>0&&(s=s+"."+Wu(a))):((a=i+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-o)>0&&(i+1===o&&(s+="."),s+=Wu(a))),t.s<0?"-"+s:s}function YF(t,e){if(t.length>e)return t.length=e,!0}function oV(t){var e,n,a;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ff+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return KF(o,s.toString())}else if(typeof s!="string")throw Error(ff+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Uwe.test(s))KF(o,s);else throw Error(ff+s)}if(i.prototype=Rt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=oV,i.config=i.set=Vwe,t===void 0&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<a.length;)t.hasOwnProperty(n=a[e++])||(t[n]=this[n]);return i.config(t),i}function Vwe(t){if(!t||typeof t!="object")throw Error(oo+"Object expected");var e,n,a,i=["precision",1,Gg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((a=t[n=i[e]])!==void 0)if(Wg(a)===a&&a>=i[e+1]&&a<=i[e+2])this[n]=a;else throw Error(ff+n+": "+a);if((a=t[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(ff+n+": "+a);return this}var gM=oV(qwe);Es=new gM(1);const wr=gM;function Hwe(t){return Ywe(t)||Kwe(t)||Wwe(t)||Gwe()}function Gwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wwe(t,e){if(t){if(typeof t=="string")return TP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TP(t,e)}}function Kwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Ywe(t){if(Array.isArray(t))return TP(t)}function TP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Qwe=function(e){return e},lV={},cV=function(e){return e===lV},QF=function(e){return function n(){return arguments.length===0||arguments.length===1&&cV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Xwe=function t(e,n){return e===1?n:QF(function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==lV}).length;return o>=e?n.apply(void 0,i):t(e-o,QF(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=i.map(function(p){return cV(p)?c.shift():p});return n.apply(void 0,Hwe(f).concat(c))}))})},SS=function(e){return Xwe(e.length,e)},kP=function(e,n){for(var a=[],i=e;i<n;++i)a[i-e]=i;return a},Jwe=SS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Zwe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(!n.length)return Qwe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},AP=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},uV=function(e){var n=null,a=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,a=e.apply(void 0,s)),a}};function eNe(t){var e;return t===0?e=1:e=Math.floor(new wr(t).abs().log(10).toNumber())+1,e}function tNe(t,e,n){for(var a=new wr(t),i=0,s=[];a.lt(e)&&i<1e5;)s.push(a.toNumber()),a=a.add(n),i++;return s}var nNe=SS(function(t,e,n){var a=+t,i=+e;return a+n*(i-a)}),rNe=SS(function(t,e,n){var a=e-+t;return a=a||1/0,(n-t)/a}),aNe=SS(function(t,e,n){var a=e-+t;return a=a||1/0,Math.max(0,Math.min(1,(n-t)/a))});const _S={rangeStep:tNe,getDigitCount:eNe,interpolateNumber:nNe,uninterpolateNumber:rNe,uninterpolateTruncation:aNe};function EP(t){return oNe(t)||sNe(t)||dV(t)||iNe()}function iNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sNe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function oNe(t){if(Array.isArray(t))return PP(t)}function Yv(t,e){return uNe(t)||cNe(t,e)||dV(t,e)||lNe()}function lNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dV(t,e){if(t){if(typeof t=="string")return PP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PP(t,e)}}function PP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function cNe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],a=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));a=!0);}catch(c){i=!0,s=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function uNe(t){if(Array.isArray(t))return t}function hV(t){var e=Yv(t,2),n=e[0],a=e[1],i=n,s=a;return n>a&&(i=a,s=n),[i,s]}function fV(t,e,n){if(t.lte(0))return new wr(0);var a=_S.getDigitCount(t.toNumber()),i=new wr(10).pow(a),s=t.div(i),o=a!==1?.05:.1,l=new wr(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return e?c:new wr(Math.ceil(c))}function dNe(t,e,n){var a=1,i=new wr(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(a=new wr(10).pow(_S.getDigitCount(t)-1),i=new wr(Math.floor(i.div(a).toNumber())).mul(a)):s>1&&(i=new wr(Math.floor(t)))}else t===0?i=new wr(Math.floor((e-1)/2)):n||(i=new wr(Math.floor(t)));var o=Math.floor((e-1)/2),l=Zwe(Jwe(function(c){return i.add(new wr(c-o).mul(a)).toNumber()}),kP);return l(0,e)}function pV(t,e,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new wr(0),tickMin:new wr(0),tickMax:new wr(0)};var s=fV(new wr(e).sub(t).div(n-1),a,i),o;t<=0&&e>=0?o=new wr(0):(o=new wr(t).add(e).div(2),o=o.sub(new wr(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new wr(e).sub(o).div(s).toNumber()),d=l+c+1;return d>n?pV(t,e,n,a,i+1):(d<n&&(c=e>0?c+(n-d):c,l=e>0?l:l+(n-d)),{step:s,tickMin:o.sub(new wr(l).mul(s)),tickMax:o.add(new wr(c).mul(s))})}function hNe(t){var e=Yv(t,2),n=e[0],a=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=hV([n,a]),c=Yv(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var p=f===1/0?[d].concat(EP(kP(0,i-1).map(function(){return 1/0}))):[].concat(EP(kP(0,i-1).map(function(){return-1/0})),[f]);return n>a?AP(p):p}if(d===f)return dNe(d,i,s);var g=pV(d,f,o,s),x=g.step,b=g.tickMin,j=g.tickMax,S=_S.rangeStep(b,j.add(new wr(.1).mul(x)),x);return n>a?AP(S):S}function fNe(t,e){var n=Yv(t,2),a=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=hV([a,i]),l=Yv(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[a,i];if(c===d)return[c];var f=Math.max(e,2),p=fV(new wr(d).sub(c).div(f-1),s,0),g=[].concat(EP(_S.rangeStep(new wr(c),new wr(d).sub(new wr(.99).mul(p)),p)),[d]);return a>i?AP(g):g}var pNe=uV(hNe),mNe=uV(fNe),gNe="Invariant failed";function Ef(t,e){throw new Error(gNe)}var yNe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}function Jw(){return Jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Jw.apply(this,arguments)}function xNe(t,e){return wNe(t)||jNe(t,e)||bNe(t,e)||vNe()}function vNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bNe(t,e){if(t){if(typeof t=="string")return XF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XF(t,e)}}function XF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function jNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function wNe(t){if(Array.isArray(t))return t}function NNe(t,e){if(t==null)return{};var n=SNe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function SNe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function _Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CNe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,yV(a.key),a)}}function TNe(t,e,n){return e&&CNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kNe(t,e,n){return e=Zw(e),ANe(t,mV()?Reflect.construct(e,n||[],Zw(t).constructor):e.apply(t,n))}function ANe(t,e){if(e&&(mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ENe(t)}function ENe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mV=function(){return!!t})()}function Zw(t){return Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zw(t)}function PNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DP(t,e)}function DP(t,e){return DP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},DP(t,e)}function gV(t,e,n){return e=yV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yV(t){var e=DNe(t,"string");return mg(e)=="symbol"?e:e+""}function DNe(t,e){if(mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(mg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vb=function(t){function e(){return _Ne(this,e),kNe(this,e,arguments)}return PNe(e,t),TNe(e,[{key:"render",value:function(){var a=this.props,i=a.offset,s=a.layout,o=a.width,l=a.dataKey,c=a.data,d=a.dataPointFormatter,f=a.xAxis,p=a.yAxis,g=NNe(a,yNe),x=zt(g,!1);this.props.direction==="x"&&f.type!=="number"&&Ef();var b=c.map(function(j){var S=d(j,l),_=S.x,T=S.y,C=S.value,P=S.errorVal;if(!P)return null;var k=[],E,I;if(Array.isArray(P)){var L=xNe(P,2);E=L[0],I=L[1]}else E=I=P;if(s==="vertical"){var $=f.scale,q=T+i,F=q+o,H=q-o,V=$(C-E),X=$(C+I);k.push({x1:X,y1:F,x2:X,y2:H}),k.push({x1:V,y1:q,x2:X,y2:q}),k.push({x1:V,y1:F,x2:V,y2:H})}else if(s==="horizontal"){var Y=p.scale,z=_+i,G=z-o,ie=z+o,W=Y(C-E),B=Y(C+I);k.push({x1:G,y1:B,x2:ie,y2:B}),k.push({x1:z,y1:W,x2:z,y2:B}),k.push({x1:G,y1:W,x2:ie,y2:W})}return Se.createElement(Mn,Jw({className:"recharts-errorBar",key:"bar-".concat(k.map(function(ce){return"".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))},x),k.map(function(ce){return Se.createElement("line",Jw({},ce,{key:"line-".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))}))});return Se.createElement(Mn,{className:"recharts-errorBars"},b)}}])}(Se.Component);gV(Vb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});gV(Vb,"displayName","ErrorBar");function Qv(t){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qv(t)}function JF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JF(Object(n),!0).forEach(function(a){ONe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ONe(t,e,n){return e=MNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MNe(t){var e=INe(t,"string");return Qv(e)=="symbol"?e:e+""}function INe(t,e){if(Qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Qv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xV=function(e){var n=e.children,a=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=ks(n,Pc);if(!o)return null;var l=Pc.defaultProps,c=l!==void 0?Bh(Bh({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:s==="children"?d=(a||[]).reduce(function(f,p){var g=p.item,x=p.props,b=x.sectors||x.data||[];return f.concat(b.map(function(j){return{type:o.props.iconType||g.props.legendType,value:j.name,color:j.fill,payload:j}}))},[]):d=(a||[]).map(function(f){var p=f.item,g=p.type.defaultProps,x=g!==void 0?Bh(Bh({},g),p.props):{},b=x.dataKey,j=x.name,S=x.legendType,_=x.hide;return{inactive:_,dataKey:b,type:c.iconType||S||"square",color:yM(p),value:j||b,payload:x}}),Bh(Bh(Bh({},c),Pc.getWithHeight(o,i)),{},{payload:d,item:o})};function Xv(t){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(t)}function ZF(t){return $Ne(t)||FNe(t)||LNe(t)||RNe()}function RNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LNe(t,e){if(t){if(typeof t=="string")return OP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OP(t,e)}}function FNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $Ne(t){if(Array.isArray(t))return OP(t)}function OP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function e8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ea(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e8(Object(n),!0).forEach(function(a){Bm(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Bm(t,e,n){return e=BNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BNe(t){var e=zNe(t,"string");return Xv(e)=="symbol"?e:e+""}function zNe(t,e){if(Xv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Xv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ca(t,e,n){return hn(t)||hn(e)?n:Ca(e)?Is(t,e,n):an(e)?e(t):n}function Nv(t,e,n,a){var i=$we(t,function(l){return ca(l,e)});if(n==="number"){var s=i.filter(function(l){return Nt(l)||parseFloat(l)});return s.length?[NS(s),id(s)]:[1/0,-1/0]}var o=a?i.filter(function(l){return!hn(l)}):i;return o.map(function(l){return Ca(l)||l instanceof Date?l:""})}var qNe=function(e){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=a==null?void 0:a.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,d=0;d<l;d++){var f=d>0?i[d-1].coordinate:i[l-1].coordinate,p=i[d].coordinate,g=d>=l-1?i[0].coordinate:i[d+1].coordinate,x=void 0;if(Ri(p-f)!==Ri(g-p)){var b=[];if(Ri(g-p)===Ri(c[1]-c[0])){x=g;var j=p+c[1]-c[0];b[0]=Math.min(j,(j+f)/2),b[1]=Math.max(j,(j+f)/2)}else{x=f;var S=g+c[1]-c[0];b[0]=Math.min(p,(S+p)/2),b[1]=Math.max(p,(S+p)/2)}var _=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(e>_[0]&&e<=_[1]||e>=b[0]&&e<=b[1]){o=i[d].index;break}}else{var T=Math.min(f,g),C=Math.max(f,g);if(e>(T+p)/2&&e<=(C+p)/2){o=i[d].index;break}}}else for(var P=0;P<l;P++)if(P===0&&e<=(a[P].coordinate+a[P+1].coordinate)/2||P>0&&P<l-1&&e>(a[P].coordinate+a[P-1].coordinate)/2&&e<=(a[P].coordinate+a[P+1].coordinate)/2||P===l-1&&e>(a[P].coordinate+a[P-1].coordinate)/2){o=a[P].index;break}return o},yM=function(e){var n,a=e,i=a.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?ea(ea({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},UNe=function(e){var n=e.barSize,a=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,d=l.length;c<d;c++)for(var f=s[l[c]].stackGroups,p=Object.keys(f),g=0,x=p.length;g<x;g++){var b=f[p[g]],j=b.items,S=b.cateAxisId,_=j.filter(function(I){return Ec(I.type).indexOf("Bar")>=0});if(_&&_.length){var T=_[0].type.defaultProps,C=T!==void 0?ea(ea({},T),_[0].props):_[0].props,P=C.barSize,k=C[S];o[k]||(o[k]=[]);var E=hn(P)?n:P;o[k].push({item:_[0],stackList:_.slice(1),barSize:hn(E)?void 0:Li(E,a,0)})}}return o},VNe=function(e){var n=e.barGap,a=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=Li(n,i,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var g=!1,x=i/c,b=o.reduce(function(P,k){return P+k.barSize||0},0);b+=(c-1)*d,b>=i&&(b-=(c-1)*d,d=0),b>=i&&x>0&&(g=!0,x*=.9,b=c*x);var j=(i-b)/2>>0,S={offset:j-d,size:0};f=o.reduce(function(P,k){var E={item:k.item,position:{offset:S.offset+S.size+d,size:g?x:k.barSize}},I=[].concat(ZF(P),[E]);return S=I[I.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(L){I.push({item:L,position:S})}),I},p)}else{var _=Li(a,i,0,!0);i-2*_-(c-1)*d<=0&&(d=0);var T=(i-2*_-(c-1)*d)/c;T>1&&(T>>=0);var C=l===+l?Math.min(T,l):T;f=o.reduce(function(P,k,E){var I=[].concat(ZF(P),[{item:k.item,position:{offset:_+(T+d)*E+(T-C)/2,size:C}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(L){I.push({item:L,position:I[I.length-1].position})}),I},p)}return f},HNe=function(e,n,a,i){var s=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),d=xV({children:s,legendWidth:c});if(d){var f=i||{},p=f.width,g=f.height,x=d.align,b=d.verticalAlign,j=d.layout;if((j==="vertical"||j==="horizontal"&&b==="middle")&&x!=="center"&&Nt(e[x]))return ea(ea({},e),{},Bm({},x,e[x]+(p||0)));if((j==="horizontal"||j==="vertical"&&x==="center")&&b!=="middle"&&Nt(e[b]))return ea(ea({},e),{},Bm({},b,e[b]+(g||0)))}return e},GNe=function(e,n,a){return hn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},vV=function(e,n,a,i,s){var o=n.props.children,l=Rs(o,Vb).filter(function(d){return GNe(i,s,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,f){var p=ca(f,a);if(hn(p))return d;var g=Array.isArray(p)?[NS(p),id(p)]:[p,p],x=c.reduce(function(b,j){var S=ca(f,j,0),_=g[0]-Math.abs(Array.isArray(S)?S[0]:S),T=g[1]+Math.abs(Array.isArray(S)?S[1]:S);return[Math.min(_,b[0]),Math.max(T,b[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},WNe=function(e,n,a,i,s){var o=n.map(function(l){return vV(e,l,a,s,i)}).filter(function(l){return!hn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},bV=function(e,n,a,i,s){var o=n.map(function(c){var d=c.props.dataKey;return a==="number"&&d&&vV(e,c,d,i)||Nv(e,d,a,s)});if(a==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var f=0,p=d.length;f<p;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},jV=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},wV=function(e,n,a,i){if(i)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===a&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(a),l},Cc=function(e,n,a){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||a)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ri(l[0]-l[1])*2*d:d,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(p){var g=s?s.indexOf(p):p;return{coordinate:i(g)+d,value:p,offset:d}});return f.filter(function(p){return!Ug(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,g){return{coordinate:i(p)+d,value:p,index:g,offset:d}}):i.ticks&&!a?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+d,value:p,offset:d}}):i.domain().map(function(p,g){return{coordinate:i(p)+d,value:s?s[p]:p,index:g,offset:d}})},rA=new WeakMap,Ij=function(e,n){if(typeof n!="function")return e;rA.has(e)||rA.set(e,new WeakMap);var a=rA.get(e);if(a.has(n))return a.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,i),i},NV=function(e,n,a){var i=e.scale,s=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Uv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Ww(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:wv(),realScaleType:"point"}:s==="category"?{scale:Uv(),realScaleType:"band"}:{scale:Ww(),realScaleType:"linear"};if(_f(i)){var c="scale".concat(cS(i));return{scale:($F[c]||wv)(),realScaleType:$F[c]?c:"point"}}return an(i)?{scale:i}:{scale:wv(),realScaleType:"point"}},t8=1e-4,SV=function(e){var n=e.domain();if(!(!n||n.length<=2)){var a=n.length,i=e.range(),s=Math.min(i[0],i[1])-t8,o=Math.max(i[0],i[1])+t8,l=e(n[0]),c=e(n[a-1]);(l<s||l>o||c<s||c>o)&&e.domain([n[0],n[a-1]])}},KNe=function(e,n){if(!e)return null;for(var a=0,i=e.length;a<i;a++)if(e[a].item===n)return e[a].position;return null},YNe=function(e,n){if(!n||n.length!==2||!Nt(n[0])||!Nt(n[1]))return e;var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Nt(e[0])||e[0]<a)&&(s[0]=a),(!Nt(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<a&&(s[1]=a),s},QNe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0,l=0;l<n;++l){var c=Ug(e[l][a][1])?e[l][a][0]:e[l][a][1];c>=0?(e[l][a][0]=s,e[l][a][1]=s+c,s=e[l][a][1]):(e[l][a][0]=o,e[l][a][1]=o+c,o=e[l][a][1])}},XNe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0;o<n;++o){var l=Ug(e[o][a][1])?e[o][a][0]:e[o][a][1];l>=0?(e[o][a][0]=s,e[o][a][1]=s+l,s=e[o][a][1]):(e[o][a][0]=0,e[o][a][1]=0)}},JNe={sign:QNe,expand:$xe,none:og,silhouette:Bxe,wiggle:zxe,positive:XNe},ZNe=function(e,n,a){var i=n.map(function(l){return l.props.dataKey}),s=JNe[a],o=Fxe().keys(i).value(function(l,c){return+ca(l,c,0)}).order(cP).offset(s);return o(e)},eSe=function(e,n,a,i,s,o){if(!e)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(p,g){var x,b=(x=g.type)!==null&&x!==void 0&&x.defaultProps?ea(ea({},g.type.defaultProps),g.props):g.props,j=b.stackId,S=b.hide;if(S)return p;var _=b[a],T=p[_]||{hasStack:!1,stackGroups:{}};if(Ca(j)){var C=T.stackGroups[j]||{numericAxisId:a,cateAxisId:i,items:[]};C.items.push(g),T.hasStack=!0,T.stackGroups[j]=C}else T.stackGroups[If("_stackId_")]={numericAxisId:a,cateAxisId:i,items:[g]};return ea(ea({},p),{},Bm({},_,T))},c),f={};return Object.keys(d).reduce(function(p,g){var x=d[g];if(x.hasStack){var b={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(j,S){var _=x.stackGroups[S];return ea(ea({},j),{},Bm({},S,{numericAxisId:a,cateAxisId:i,items:_.items,stackedData:ZNe(e,_.items,s)}))},b)}return ea(ea({},p),{},Bm({},g,x))},f)},_V=function(e,n){var a=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=a||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var f=pNe(d,s,l);return e.domain([NS(f),id(f)]),{niceTicks:f}}if(s&&i==="number"){var p=e.domain(),g=mNe(p,s,l);return{niceTicks:g}}return null};function eN(t){var e=t.axis,n=t.ticks,a=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!hn(i[e.dataKey])){var l=Aw(n,"value",i[e.dataKey]);if(l)return l.coordinate+a/2}return n[s]?n[s].coordinate+a/2:null}var c=ca(i,hn(o)?e.dataKey:o);return hn(c)?null:e.scale(c)}var n8=function(e){var n=e.axis,a=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return a[l]?a[l].coordinate+i:null;var c=ca(o,n.dataKey,n.domain[l]);return hn(c)?null:n.scale(c)-s/2+i},tSe=function(e){var n=e.numericAxis,a=n.scale.domain();if(n.type==="number"){var i=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);return i<=0&&s>=0?0:s<0?s:i}return a[0]},nSe=function(e,n){var a,i=(a=e.type)!==null&&a!==void 0&&a.defaultProps?ea(ea({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Ca(s)){var o=n[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},rSe=function(e){return e.reduce(function(n,a){return[NS(a.concat([n[0]]).filter(Nt)),id(a.concat([n[1]]).filter(Nt))]},[1/0,-1/0])},CV=function(e,n,a){return Object.keys(e).reduce(function(i,s){var o=e[s],l=o.stackedData,c=l.reduce(function(d,f){var p=rSe(f.slice(n,a+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},r8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,a8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MP=function(e,n,a){if(an(e))return e(n,a);if(!Array.isArray(e))return n;var i=[];if(Nt(e[0]))i[0]=a?e[0]:Math.min(e[0],n[0]);else if(r8.test(e[0])){var s=+r8.exec(e[0])[1];i[0]=n[0]-s}else an(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Nt(e[1]))i[1]=a?e[1]:Math.max(e[1],n[1]);else if(a8.test(e[1])){var o=+a8.exec(e[1])[1];i[1]=n[1]+o}else an(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},tN=function(e,n,a){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!a||i>0)return i}if(e&&n&&n.length>=2){for(var s=HO(n,function(p){return p.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var d=s[l],f=s[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},i8=function(e,n,a){return!e||!e.length||kf(e,Is(a,"type.defaultProps.domain"))?n:e},TV=function(e,n){var a=e.type.defaultProps?ea(ea({},e.type.defaultProps),e.props):e.props,i=a.dataKey,s=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,d=a.chartType,f=a.hide;return ea(ea({},zt(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:yM(e),value:ca(n,i),type:c,payload:n,chartType:d,hide:f})};function Jv(t){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(t)}function s8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function xc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s8(Object(n),!0).forEach(function(a){kV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function kV(t,e,n){return e=aSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aSe(t){var e=iSe(t,"string");return Jv(e)=="symbol"?e:e+""}function iSe(t,e){if(Jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Jv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sSe(t,e){return uSe(t)||cSe(t,e)||lSe(t,e)||oSe()}function oSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lSe(t,e){if(t){if(typeof t=="string")return o8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o8(t,e)}}function o8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function cSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function uSe(t){if(Array.isArray(t))return t}var nN=Math.PI/180,dSe=function(e){return e*180/Math.PI},Rr=function(e,n,a,i){return{x:e+Math.cos(-nN*i)*a,y:n+Math.sin(-nN*i)*a}},AV=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},hSe=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,f=Li(e.cx,o,o/2),p=Li(e.cy,l,l/2),g=AV(o,l,a),x=Li(e.innerRadius,g,0),b=Li(e.outerRadius,g,g*.8),j=Object.keys(n);return j.reduce(function(S,_){var T=n[_],C=T.domain,P=T.reversed,k;if(hn(T.range))i==="angleAxis"?k=[c,d]:i==="radiusAxis"&&(k=[x,b]),P&&(k=[k[1],k[0]]);else{k=T.range;var E=k,I=sSe(E,2);c=I[0],d=I[1]}var L=NV(T,s),$=L.realScaleType,q=L.scale;q.domain(C).range(k),SV(q);var F=_V(q,xc(xc({},T),{},{realScaleType:$})),H=xc(xc(xc({},T),F),{},{range:k,radius:b,realScaleType:$,scale:q,cx:f,cy:p,innerRadius:x,outerRadius:b,startAngle:c,endAngle:d});return xc(xc({},S),{},kV({},_,H))},{})},fSe=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(a-s,2)+Math.pow(i-o,2))},pSe=function(e,n){var a=e.x,i=e.y,s=n.cx,o=n.cy,l=fSe({x:a,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(a-s)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:dSe(d),angleInRadian:d}},mSe=function(e){var n=e.startAngle,a=e.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:a-o*360}},gSe=function(e,n){var a=n.startAngle,i=n.endAngle,s=Math.floor(a/360),o=Math.floor(i/360),l=Math.min(s,o);return e+l*360},l8=function(e,n){var a=e.x,i=e.y,s=pSe({x:a,y:i},n),o=s.radius,l=s.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var f=mSe(n),p=f.startAngle,g=f.endAngle,x=l,b;if(p<=g){for(;x>g;)x-=360;for(;x<p;)x+=360;b=x>=p&&x<=g}else{for(;x>p;)x-=360;for(;x<g;)x+=360;b=x>=g&&x<=p}return b?xc(xc({},n),{},{radius:o,angle:gSe(x,n)}):null},EV=function(e){return!v.isValidElement(e)&&!an(e)&&typeof e!="boolean"?e.className:""};function Zv(t){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zv(t)}var ySe=["offset"];function xSe(t){return wSe(t)||jSe(t)||bSe(t)||vSe()}function vSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bSe(t,e){if(t){if(typeof t=="string")return IP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IP(t,e)}}function jSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wSe(t){if(Array.isArray(t))return IP(t)}function IP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function NSe(t,e){if(t==null)return{};var n=SSe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function SSe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function c8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c8(Object(n),!0).forEach(function(a){_Se(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function _Se(t,e,n){return e=CSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CSe(t){var e=TSe(t,"string");return Zv(e)=="symbol"?e:e+""}function TSe(t,e){if(Zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Zv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eb(){return eb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},eb.apply(this,arguments)}var kSe=function(e){var n=e.value,a=e.formatter,i=hn(e.children)?n:e.children;return an(a)?a(i):i},ASe=function(e,n){var a=Ri(n-e),i=Math.min(Math.abs(n-e),360);return a*i},ESe=function(e,n,a){var i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,d=c.cx,f=c.cy,p=c.innerRadius,g=c.outerRadius,x=c.startAngle,b=c.endAngle,j=c.clockWise,S=(p+g)/2,_=ASe(x,b),T=_>=0?1:-1,C,P;i==="insideStart"?(C=x+T*o,P=j):i==="insideEnd"?(C=b-T*o,P=!j):i==="end"&&(C=b+T*o,P=j),P=_<=0?P:!P;var k=Rr(d,f,S,C),E=Rr(d,f,S,C+(P?1:-1)*359),I="M".concat(k.x,",").concat(k.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(P?0:1,`,
    `).concat(E.x,",").concat(E.y),L=hn(e.id)?If("recharts-radial-line-"):e.id;return Se.createElement("text",eb({},a,{dominantBaseline:"central",className:pn("recharts-radial-bar-label",l)}),Se.createElement("defs",null,Se.createElement("path",{id:L,d:I})),Se.createElement("textPath",{xlinkHref:"#".concat(L)},n))},PSe=function(e){var n=e.viewBox,a=e.offset,i=e.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,d=s.outerRadius,f=s.startAngle,p=s.endAngle,g=(f+p)/2;if(i==="outside"){var x=Rr(o,l,d+a,g),b=x.x,j=x.y;return{x:b,y:j,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var S=(c+d)/2,_=Rr(o,l,S,g),T=_.x,C=_.y;return{x:T,y:C,textAnchor:"middle",verticalAnchor:"middle"}},DSe=function(e){var n=e.viewBox,a=e.parentViewBox,i=e.offset,s=e.position,o=n,l=o.x,c=o.y,d=o.width,f=o.height,p=f>=0?1:-1,g=p*i,x=p>0?"end":"start",b=p>0?"start":"end",j=d>=0?1:-1,S=j*i,_=j>0?"end":"start",T=j>0?"start":"end";if(s==="top"){var C={x:l+d/2,y:c-p*i,textAnchor:"middle",verticalAnchor:x};return Na(Na({},C),a?{height:Math.max(c-a.y,0),width:d}:{})}if(s==="bottom"){var P={x:l+d/2,y:c+f+g,textAnchor:"middle",verticalAnchor:b};return Na(Na({},P),a?{height:Math.max(a.y+a.height-(c+f),0),width:d}:{})}if(s==="left"){var k={x:l-S,y:c+f/2,textAnchor:_,verticalAnchor:"middle"};return Na(Na({},k),a?{width:Math.max(k.x-a.x,0),height:f}:{})}if(s==="right"){var E={x:l+d+S,y:c+f/2,textAnchor:T,verticalAnchor:"middle"};return Na(Na({},E),a?{width:Math.max(a.x+a.width-E.x,0),height:f}:{})}var I=a?{width:d,height:f}:{};return s==="insideLeft"?Na({x:l+S,y:c+f/2,textAnchor:T,verticalAnchor:"middle"},I):s==="insideRight"?Na({x:l+d-S,y:c+f/2,textAnchor:_,verticalAnchor:"middle"},I):s==="insideTop"?Na({x:l+d/2,y:c+g,textAnchor:"middle",verticalAnchor:b},I):s==="insideBottom"?Na({x:l+d/2,y:c+f-g,textAnchor:"middle",verticalAnchor:x},I):s==="insideTopLeft"?Na({x:l+S,y:c+g,textAnchor:T,verticalAnchor:b},I):s==="insideTopRight"?Na({x:l+d-S,y:c+g,textAnchor:_,verticalAnchor:b},I):s==="insideBottomLeft"?Na({x:l+S,y:c+f-g,textAnchor:T,verticalAnchor:x},I):s==="insideBottomRight"?Na({x:l+d-S,y:c+f-g,textAnchor:_,verticalAnchor:x},I):qg(s)&&(Nt(s.x)||Xh(s.x))&&(Nt(s.y)||Xh(s.y))?Na({x:l+Li(s.x,d),y:c+Li(s.y,f),textAnchor:"end",verticalAnchor:"end"},I):Na({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},I)},OSe=function(e){return"cx"in e&&Nt(e.cx)};function Ra(t){var e=t.offset,n=e===void 0?5:e,a=NSe(t,ySe),i=Na({offset:n},a),s=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,f=i.className,p=f===void 0?"":f,g=i.textBreakAll;if(!s||hn(l)&&hn(c)&&!v.isValidElement(d)&&!an(d))return null;if(v.isValidElement(d))return v.cloneElement(d,i);var x;if(an(d)){if(x=v.createElement(d,i),v.isValidElement(x))return x}else x=kSe(i);var b=OSe(s),j=zt(i,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return ESe(i,x,j);var S=b?PSe(i):DSe(i);return Se.createElement(Tf,eb({className:pn("recharts-label",p)},j,S,{breakAll:g}),x)}Ra.displayName="Label";var PV=function(e){var n=e.cx,a=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,f=e.outerRadius,p=e.x,g=e.y,x=e.top,b=e.left,j=e.width,S=e.height,_=e.clockWise,T=e.labelViewBox;if(T)return T;if(Nt(j)&&Nt(S)){if(Nt(p)&&Nt(g))return{x:p,y:g,width:j,height:S};if(Nt(x)&&Nt(b))return{x,y:b,width:j,height:S}}return Nt(p)&&Nt(g)?{x:p,y:g,width:0,height:0}:Nt(n)&&Nt(a)?{cx:n,cy:a,startAngle:s||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:_}:e.viewBox?e.viewBox:{}},MSe=function(e,n){return e?e===!0?Se.createElement(Ra,{key:"label-implicit",viewBox:n}):Ca(e)?Se.createElement(Ra,{key:"label-implicit",viewBox:n,value:e}):v.isValidElement(e)?e.type===Ra?v.cloneElement(e,{key:"label-implicit",viewBox:n}):Se.createElement(Ra,{key:"label-implicit",content:e,viewBox:n}):an(e)?Se.createElement(Ra,{key:"label-implicit",content:e,viewBox:n}):qg(e)?Se.createElement(Ra,eb({viewBox:n},e,{key:"label-implicit"})):null:null},ISe=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&a&&!e.label)return null;var i=e.children,s=PV(e),o=Rs(i,Ra).map(function(c,d){return v.cloneElement(c,{viewBox:n||s,key:"label-".concat(d)})});if(!a)return o;var l=MSe(e.label,n||s);return[l].concat(xSe(o))};Ra.parseViewBox=PV;Ra.renderCallByParent=ISe;var aA,u8;function RSe(){if(u8)return aA;u8=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return aA=t,aA}var LSe=RSe();const FSe=Wn(LSe);function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}var $Se=["valueAccessor"],BSe=["data","dataKey","clockWise","id","textBreakAll"];function zSe(t){return HSe(t)||VSe(t)||USe(t)||qSe()}function qSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function USe(t,e){if(t){if(typeof t=="string")return RP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RP(t,e)}}function VSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HSe(t){if(Array.isArray(t))return RP(t)}function RP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function rN(){return rN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rN.apply(this,arguments)}function d8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function h8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d8(Object(n),!0).forEach(function(a){GSe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function GSe(t,e,n){return e=WSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WSe(t){var e=KSe(t,"string");return tb(e)=="symbol"?e:e+""}function KSe(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(tb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f8(t,e){if(t==null)return{};var n=YSe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function YSe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var QSe=function(e){return Array.isArray(e.value)?FSe(e.value):e.value};function Rl(t){var e=t.valueAccessor,n=e===void 0?QSe:e,a=f8(t,$Se),i=a.data,s=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=f8(a,BSe);return!i||!i.length?null:Se.createElement(Mn,{className:"recharts-label-list"},i.map(function(f,p){var g=hn(s)?n(f,p):ca(f&&f.payload,s),x=hn(l)?{}:{id:"".concat(l,"-").concat(p)};return Se.createElement(Ra,rN({},zt(f,!0),d,x,{parentViewBox:f.parentViewBox,value:g,textBreakAll:c,viewBox:Ra.parseViewBox(hn(o)?f:h8(h8({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Rl.displayName="LabelList";function XSe(t,e){return t?t===!0?Se.createElement(Rl,{key:"labelList-implicit",data:e}):Se.isValidElement(t)||an(t)?Se.createElement(Rl,{key:"labelList-implicit",data:e,content:t}):qg(t)?Se.createElement(Rl,rN({data:e},t,{key:"labelList-implicit"})):null:null}function JSe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=Rs(a,Rl).map(function(o,l){return v.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var s=XSe(t.label,e);return[s].concat(zSe(i))}Rl.renderCallByParent=JSe;function nb(t){"@babel/helpers - typeof";return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nb(t)}function LP(){return LP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},LP.apply(this,arguments)}function p8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function m8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p8(Object(n),!0).forEach(function(a){ZSe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ZSe(t,e,n){return e=e_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e_e(t){var e=t_e(t,"string");return nb(e)=="symbol"?e:e+""}function t_e(t,e){if(nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(nb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n_e=function(e,n){var a=Ri(n-e),i=Math.min(Math.abs(n-e),359.999);return a*i},Rj=function(e){var n=e.cx,a=e.cy,i=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,f=c*(l?1:-1)+i,p=Math.asin(c/f)/nN,g=d?s:s+o*p,x=Rr(n,a,f,g),b=Rr(n,a,i,g),j=d?s-o*p:s,S=Rr(n,a,f*Math.cos(p*nN),j);return{center:x,circleTangency:b,lineTangency:S,theta:p}},DV=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=n_e(o,l),d=o+c,f=Rr(n,a,s,o),p=Rr(n,a,s,d),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var x=Rr(n,a,i,o),b=Rr(n,a,i,d);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(n,",").concat(a," Z");return g},r_e=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,f=e.endAngle,p=Ri(f-d),g=Rj({cx:n,cy:a,radius:s,angle:d,sign:p,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,b=g.lineTangency,j=g.theta,S=Rj({cx:n,cy:a,radius:s,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:c}),_=S.circleTangency,T=S.lineTangency,C=S.theta,P=c?Math.abs(d-f):Math.abs(d-f)-j-C;if(P<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):DV({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f});var k="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(P>180),",").concat(+(p<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
  `);if(i>0){var E=Rj({cx:n,cy:a,radius:i,angle:d,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=E.circleTangency,L=E.lineTangency,$=E.theta,q=Rj({cx:n,cy:a,radius:i,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),F=q.circleTangency,H=q.lineTangency,V=q.theta,X=c?Math.abs(d-f):Math.abs(d-f)-$-V;if(X<0&&o===0)return"".concat(k,"L").concat(n,",").concat(a,"Z");k+="L".concat(H.x,",").concat(H.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(X>180),",").concat(+(p>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(L.x,",").concat(L.y,"Z")}else k+="L".concat(n,",").concat(a,"Z");return k},a_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},OV=function(e){var n=m8(m8({},a_e),e),a=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,f=n.startAngle,p=n.endAngle,g=n.className;if(o<s||f===p)return null;var x=pn("recharts-sector",g),b=o-s,j=Li(l,b,0,!0),S;return j>0&&Math.abs(f-p)<360?S=r_e({cx:a,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(j,b/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:p}):S=DV({cx:a,cy:i,innerRadius:s,outerRadius:o,startAngle:f,endAngle:p}),Se.createElement("path",LP({},zt(n,!0),{className:x,d:S,role:"img"}))};function rb(t){"@babel/helpers - typeof";return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rb(t)}function FP(){return FP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},FP.apply(this,arguments)}function g8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function y8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g8(Object(n),!0).forEach(function(a){i_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function i_e(t,e,n){return e=s_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s_e(t){var e=o_e(t,"string");return rb(e)=="symbol"?e:e+""}function o_e(t,e){if(rb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(rb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x8={curveBasisClosed:Txe,curveBasisOpen:kxe,curveBasis:Cxe,curveBumpX:hxe,curveBumpY:fxe,curveLinearClosed:Axe,curveLinear:dS,curveMonotoneX:Exe,curveMonotoneY:Pxe,curveNatural:Dxe,curveStep:Oxe,curveStepAfter:Ixe,curveStepBefore:Mxe},Lj=function(e){return e.x===+e.x&&e.y===+e.y},tv=function(e){return e.x},nv=function(e){return e.y},l_e=function(e,n){if(an(e))return e;var a="curve".concat(cS(e));return(a==="curveMonotone"||a==="curveBump")&&n?x8["".concat(a).concat(n==="vertical"?"Y":"X")]:x8[a]||dS},c_e=function(e){var n=e.type,a=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,f=l_e(a,l),p=d?s.filter(function(j){return Lj(j)}):s,g;if(Array.isArray(o)){var x=d?o.filter(function(j){return Lj(j)}):o,b=p.map(function(j,S){return y8(y8({},j),{},{base:x[S]})});return l==="vertical"?g=kj().y(nv).x1(tv).x0(function(j){return j.base.x}):g=kj().x(tv).y1(nv).y0(function(j){return j.base.y}),g.defined(Lj).curve(f),g(b)}return l==="vertical"&&Nt(o)?g=kj().y(nv).x1(tv).x0(o):Nt(o)?g=kj().x(tv).y1(nv).y0(o):g=PU().x(tv).y(nv),g.defined(Lj).curve(f),g(p)},pf=function(e){var n=e.className,a=e.points,i=e.path,s=e.pathRef;if((!a||!a.length)&&!i)return null;var o=a&&a.length?c_e(e):i;return v.createElement("path",FP({},zt(e,!1),Ew(e),{className:pn("recharts-curve",n),d:o,ref:s}))},iA={exports:{}},sA,v8;function u_e(){if(v8)return sA;v8=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sA=t,sA}var oA,b8;function d_e(){if(b8)return oA;b8=1;var t=u_e();function e(){}function n(){}return n.resetWarningCache=e,oA=function(){function a(o,l,c,d,f,p){if(p!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}a.isRequired=a;function i(){return a}var s={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},oA}var j8;function h_e(){return j8||(j8=1,iA.exports=d_e()()),iA.exports}var f_e=h_e();const hr=Wn(f_e);var p_e=Object.getOwnPropertyNames,m_e=Object.getOwnPropertySymbols,g_e=Object.prototype.hasOwnProperty;function w8(t,e){return function(a,i,s){return t(a,i,s)&&e(a,i,s)}}function Fj(t){return function(n,a,i){if(!n||!a||typeof n!="object"||typeof a!="object")return t(n,a,i);var s=i.cache,o=s.get(n),l=s.get(a);if(o&&l)return o===a&&l===n;s.set(n,a),s.set(a,n);var c=t(n,a,i);return s.delete(n),s.delete(a),c}}function N8(t){return p_e(t).concat(m_e(t))}var y_e=Object.hasOwn||function(t,e){return g_e.call(t,e)};function Ff(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var x_e="__v",v_e="__o",b_e="_owner",S8=Object.getOwnPropertyDescriptor,_8=Object.keys;function j_e(t,e,n){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(!n.equals(t[a],e[a],a,a,t,e,n))return!1;return!0}function w_e(t,e){return Ff(t.getTime(),e.getTime())}function N_e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function S_e(t,e){return t===e}function C8(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var d=e.entries(),f=!1,p=0;(l=d.next())&&!l.done;){if(i[p]){p++;continue}var g=o.value,x=l.value;if(n.equals(g[0],x[0],c,p,t,e,n)&&n.equals(g[1],x[1],g[0],x[0],t,e,n)){f=i[p]=!0;break}p++}if(!f)return!1;c++}return!0}var __e=Ff;function C_e(t,e,n){var a=_8(t),i=a.length;if(_8(e).length!==i)return!1;for(;i-- >0;)if(!MV(t,e,n,a[i]))return!1;return!0}function rv(t,e,n){var a=N8(t),i=a.length;if(N8(e).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=a[i],!MV(t,e,n,s)||(o=S8(t,s),l=S8(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function T_e(t,e){return Ff(t.valueOf(),e.valueOf())}function k_e(t,e){return t.source===e.source&&t.flags===e.flags}function T8(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),d=!1,f=0;(l=c.next())&&!l.done;){if(!i[f]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1}return!0}function A_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function E_e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function MV(t,e,n,a){return(a===b_e||a===v_e||a===x_e)&&(t.$$typeof||e.$$typeof)?!0:y_e(e,a)&&n.equals(t[a],e[a],a,a,t,e,n)}var P_e="[object Arguments]",D_e="[object Boolean]",O_e="[object Date]",M_e="[object Error]",I_e="[object Map]",R_e="[object Number]",L_e="[object Object]",F_e="[object RegExp]",$_e="[object Set]",B_e="[object String]",z_e="[object URL]",q_e=Array.isArray,k8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,A8=Object.assign,U_e=Object.prototype.toString.call.bind(Object.prototype.toString);function V_e(t){var e=t.areArraysEqual,n=t.areDatesEqual,a=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,f=t.areSetsEqual,p=t.areTypedArraysEqual,g=t.areUrlsEqual;return function(b,j,S){if(b===j)return!0;if(b==null||j==null)return!1;var _=typeof b;if(_!==typeof j)return!1;if(_!=="object")return _==="number"?o(b,j,S):_==="function"?i(b,j,S):!1;var T=b.constructor;if(T!==j.constructor)return!1;if(T===Object)return l(b,j,S);if(q_e(b))return e(b,j,S);if(k8!=null&&k8(b))return p(b,j,S);if(T===Date)return n(b,j,S);if(T===RegExp)return d(b,j,S);if(T===Map)return s(b,j,S);if(T===Set)return f(b,j,S);var C=U_e(b);return C===O_e?n(b,j,S):C===F_e?d(b,j,S):C===I_e?s(b,j,S):C===$_e?f(b,j,S):C===L_e?typeof b.then!="function"&&typeof j.then!="function"&&l(b,j,S):C===z_e?g(b,j,S):C===M_e?a(b,j,S):C===P_e?l(b,j,S):C===D_e||C===R_e||C===B_e?c(b,j,S):!1}}function H_e(t){var e=t.circular,n=t.createCustomConfig,a=t.strict,i={areArraysEqual:a?rv:j_e,areDatesEqual:w_e,areErrorsEqual:N_e,areFunctionsEqual:S_e,areMapsEqual:a?w8(C8,rv):C8,areNumbersEqual:__e,areObjectsEqual:a?rv:C_e,arePrimitiveWrappersEqual:T_e,areRegExpsEqual:k_e,areSetsEqual:a?w8(T8,rv):T8,areTypedArraysEqual:a?rv:A_e,areUrlsEqual:E_e};if(n&&(i=A8({},i,n(i))),e){var s=Fj(i.areArraysEqual),o=Fj(i.areMapsEqual),l=Fj(i.areObjectsEqual),c=Fj(i.areSetsEqual);i=A8({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function G_e(t){return function(e,n,a,i,s,o,l){return t(e,n,l)}}function W_e(t){var e=t.circular,n=t.comparator,a=t.createState,i=t.equals,s=t.strict;if(a)return function(c,d){var f=a(),p=f.cache,g=p===void 0?e?new WeakMap:void 0:p,x=f.meta;return n(c,d,{cache:g,equals:i,meta:x,strict:s})};if(e)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,d){return n(c,d,o)}}var K_e=Sd();Sd({strict:!0});Sd({circular:!0});Sd({circular:!0,strict:!0});Sd({createInternalComparator:function(){return Ff}});Sd({strict:!0,createInternalComparator:function(){return Ff}});Sd({circular:!0,createInternalComparator:function(){return Ff}});Sd({circular:!0,createInternalComparator:function(){return Ff},strict:!0});function Sd(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,a=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,l=H_e(t),c=V_e(l),d=a?a(c):G_e(c);return W_e({circular:n,comparator:c,createState:i,equals:d,strict:o})}function Y_e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function E8(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):Y_e(i)};requestAnimationFrame(a)}function $P(t){"@babel/helpers - typeof";return $P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$P(t)}function Q_e(t){return eCe(t)||Z_e(t)||J_e(t)||X_e()}function X_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J_e(t,e){if(t){if(typeof t=="string")return P8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P8(t,e)}}function P8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Z_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eCe(t){if(Array.isArray(t))return t}function tCe(){var t={},e=function(){return null},n=!1,a=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=Q_e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){E8(i.bind(null,d),c);return}i(c),E8(i.bind(null,d));return}$P(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,a(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function ab(t){"@babel/helpers - typeof";return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}function D8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function O8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D8(Object(n),!0).forEach(function(a){IV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function IV(t,e,n){return e=nCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nCe(t){var e=rCe(t,"string");return ab(e)==="symbol"?e:String(e)}function rCe(t,e){if(ab(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ab(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aCe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(a,i){return a.filter(function(s){return i.includes(s)})})},iCe=function(e){return e},sCe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Sv=function(e,n){return Object.keys(n).reduce(function(a,i){return O8(O8({},a),{},IV({},i,e(i,n[i])))},{})},M8=function(e,n,a){return e.map(function(i){return"".concat(sCe(i)," ").concat(n,"ms ").concat(a)}).join(",")};function oCe(t,e){return uCe(t)||cCe(t,e)||RV(t,e)||lCe()}function lCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function uCe(t){if(Array.isArray(t))return t}function dCe(t){return pCe(t)||fCe(t)||RV(t)||hCe()}function hCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RV(t,e){if(t){if(typeof t=="string")return BP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BP(t,e)}}function fCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pCe(t){if(Array.isArray(t))return BP(t)}function BP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var aN=1e-4,LV=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},FV=function(e,n){return e.map(function(a,i){return a*Math.pow(n,i)}).reduce(function(a,i){return a+i})},I8=function(e,n){return function(a){var i=LV(e,n);return FV(i,a)}},mCe=function(e,n){return function(a){var i=LV(e,n),s=[].concat(dCe(i.map(function(o,l){return o*l}).slice(1)),[0]);return FV(s,a)}},R8=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(S){return parseFloat(S)}),f=oCe(d,4);i=f[0],s=f[1],o=f[2],l=f[3]}}}var p=I8(i,o),g=I8(s,l),x=mCe(i,o),b=function(_){return _>1?1:_<0?0:_},j=function(_){for(var T=_>1?1:_,C=T,P=0;P<8;++P){var k=p(C)-T,E=x(C);if(Math.abs(k-T)<aN||E<aN)return g(C);C=b(C-k/E)}return g(C)};return j.isStepper=!1,j},gCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,a=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(f,p,g){var x=-(f-p)*a,b=g*s,j=g+(x-b)*l/1e3,S=g*l/1e3+f;return Math.abs(S-p)<aN&&Math.abs(j)<aN?[p,0]:[S,j]};return c.isStepper=!0,c.dt=l,c},yCe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return R8(i);case"spring":return gCe();default:if(i.split("(")[0]==="cubic-bezier")return R8(i)}return typeof i=="function"?i:null};function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function L8(t){return bCe(t)||vCe(t)||$V(t)||xCe()}function xCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bCe(t){if(Array.isArray(t))return qP(t)}function F8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ga(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F8(Object(n),!0).forEach(function(a){zP(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function zP(t,e,n){return e=jCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jCe(t){var e=wCe(t,"string");return ib(e)==="symbol"?e:String(e)}function wCe(t,e){if(ib(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ib(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NCe(t,e){return CCe(t)||_Ce(t,e)||$V(t,e)||SCe()}function SCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $V(t,e){if(t){if(typeof t=="string")return qP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qP(t,e)}}function qP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _Ce(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function CCe(t){if(Array.isArray(t))return t}var iN=function(e,n,a){return e+(n-e)*a},UP=function(e){var n=e.from,a=e.to;return n!==a},TCe=function t(e,n,a){var i=Sv(function(s,o){if(UP(o)){var l=e(o.from,o.to,o.velocity),c=NCe(l,2),d=c[0],f=c[1];return Ga(Ga({},o),{},{from:d,velocity:f})}return o},n);return a<1?Sv(function(s,o){return UP(o)?Ga(Ga({},o),{},{velocity:iN(o.velocity,i[s].velocity,a),from:iN(o.from,i[s].from,a)}):o},n):t(e,i,a-1)};const kCe=function(t,e,n,a,i){var s=aCe(t,e),o=s.reduce(function(S,_){return Ga(Ga({},S),{},zP({},_,[t[_],e[_]]))},{}),l=s.reduce(function(S,_){return Ga(Ga({},S),{},zP({},_,{from:t[_],velocity:0,to:e[_]}))},{}),c=-1,d,f,p=function(){return null},g=function(){return Sv(function(_,T){return T.from},l)},x=function(){return!Object.values(l).filter(UP).length},b=function(_){d||(d=_);var T=_-d,C=T/n.dt;l=TCe(n,l,C),i(Ga(Ga(Ga({},t),e),g())),d=_,x()||(c=requestAnimationFrame(p))},j=function(_){f||(f=_);var T=(_-f)/a,C=Sv(function(k,E){return iN.apply(void 0,L8(E).concat([n(T)]))},o);if(i(Ga(Ga(Ga({},t),e),C)),T<1)c=requestAnimationFrame(p);else{var P=Sv(function(k,E){return iN.apply(void 0,L8(E).concat([n(1)]))},o);i(Ga(Ga(Ga({},t),e),P))}};return p=n.isStepper?b:j,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}};function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}var ACe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ECe(t,e){if(t==null)return{};var n=PCe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function PCe(t,e){if(t==null)return{};var n={},a=Object.keys(t),i,s;for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function lA(t){return ICe(t)||MCe(t)||OCe(t)||DCe()}function DCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OCe(t,e){if(t){if(typeof t=="string")return VP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VP(t,e)}}function MCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ICe(t){if(Array.isArray(t))return VP(t)}function VP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function $8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Do(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$8(Object(n),!0).forEach(function(a){gv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function gv(t,e,n){return e=BV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LCe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,BV(a.key),a)}}function FCe(t,e,n){return e&&LCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BV(t){var e=$Ce(t,"string");return gg(e)==="symbol"?e:String(e)}function $Ce(t,e){if(gg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(gg(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HP(t,e)}function HP(t,e){return HP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},HP(t,e)}function zCe(t){var e=qCe();return function(){var a=sN(t),i;if(e){var s=sN(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return GP(this,i)}}function GP(t,e){if(e&&(gg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WP(t)}function WP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sN(t){return sN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sN(t)}var qo=function(t){BCe(n,t);var e=zCe(n);function n(a,i){var s;RCe(this,n),s=e.call(this,a,i);var o=s.props,l=o.isActive,c=o.attributeName,d=o.from,f=o.to,p=o.steps,g=o.children,x=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(WP(s)),s.changeStyle=s.changeStyle.bind(WP(s)),!l||x<=0)return s.state={style:{}},typeof g=="function"&&(s.state={style:f}),GP(s);if(p&&p.length)s.state={style:p[0].style};else if(d){if(typeof g=="function")return s.state={style:d},GP(s);s.state={style:c?gv({},c,d):d}}else s.state={style:{}};return s}return FCe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,d=s.shouldReAnimate,f=s.to,p=s.from,g=this.state.style;if(l){if(!o){var x={style:c?gv({},c,f):f};this.state&&g&&(c&&g[c]!==f||!c&&g!==f)&&this.setState(x);return}if(!(K_e(i.to,f)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var j=b||d?p:i.to;if(this.state&&g){var S={style:c?gv({},c,j):j};(c&&g[c]!==j||!c&&g!==j)&&this.setState(S)}this.runAnimation(Do(Do({},this.props),{},{from:j,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,d=i.easing,f=i.begin,p=i.onAnimationEnd,g=i.onAnimationStart,x=kCe(o,l,yCe(d),c,this.changeStyle),b=function(){s.stopJSAnimation=x()};this.manager.start([g,f,b,c,p])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],f=d.style,p=d.duration,g=p===void 0?0:p,x=function(j,S,_){if(_===0)return j;var T=S.duration,C=S.easing,P=C===void 0?"ease":C,k=S.style,E=S.properties,I=S.onAnimationEnd,L=_>0?o[_-1]:S,$=E||Object.keys(k);if(typeof P=="function"||P==="spring")return[].concat(lA(j),[s.runJSAnimation.bind(s,{from:L.style,to:k,duration:T,easing:P}),T]);var q=M8($,T,P),F=Do(Do(Do({},L.style),k),{},{transition:q});return[].concat(lA(j),[F,T,I]).filter(iCe)};return this.manager.start([c].concat(lA(o.reduce(x,[f,Math.max(g,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=tCe());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,f=i.onAnimationStart,p=i.onAnimationEnd,g=i.steps,x=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(i);return}if(g.length>1){this.runStepAnimation(i);return}var j=l?gv({},l,c):c,S=M8(Object.keys(j),o,d);b.start([f,s,Do(Do({},j),{},{transition:S}),o,p])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=ECe(i,ACe),d=v.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||d===0||o<=0)return s;var p=function(x){var b=x.props,j=b.style,S=j===void 0?{}:j,_=b.className,T=v.cloneElement(x,Do(Do({},c),{},{style:Do(Do({},S),f),className:_}));return T};return d===1?p(v.Children.only(s)):Se.createElement("div",null,v.Children.map(s,function(g){return p(g)}))}}]),n}(v.PureComponent);qo.displayName="Animate";qo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};qo.propTypes={from:hr.oneOfType([hr.object,hr.string]),to:hr.oneOfType([hr.object,hr.string]),attributeName:hr.string,duration:hr.number,begin:hr.number,easing:hr.oneOfType([hr.string,hr.func]),steps:hr.arrayOf(hr.shape({duration:hr.number.isRequired,style:hr.object.isRequired,easing:hr.oneOfType([hr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),hr.func]),properties:hr.arrayOf("string"),onAnimationEnd:hr.func})),children:hr.oneOfType([hr.node,hr.func]),isActive:hr.bool,canBegin:hr.bool,onAnimationEnd:hr.func,shouldReAnimate:hr.bool,onAnimationStart:hr.func,onAnimationReStart:hr.func};function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oN.apply(this,arguments)}function UCe(t,e){return WCe(t)||GCe(t,e)||HCe(t,e)||VCe()}function VCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HCe(t,e){if(t){if(typeof t=="string")return B8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B8(t,e)}}function B8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function GCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function WCe(t){if(Array.isArray(t))return t}function z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function q8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z8(Object(n),!0).forEach(function(a){KCe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function KCe(t,e,n){return e=YCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YCe(t){var e=QCe(t,"string");return sb(e)=="symbol"?e:e+""}function QCe(t,e){if(sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(sb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U8=function(e,n,a,i,s){var o=Math.min(Math.abs(a)/2,Math.abs(i)/2),l=i>=0?1:-1,c=a>=0?1:-1,d=i>=0&&a>=0||i<0&&a<0?1:0,f;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=s[g]>o?o:s[g];f="M".concat(e,",").concat(n+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+c*p[0],",").concat(n)),f+="L ".concat(e+a-c*p[1],",").concat(n),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+a,",").concat(n+l*p[1])),f+="L ".concat(e+a,",").concat(n+i-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+a-c*p[2],",").concat(n+i)),f+="L ".concat(e+c*p[3],",").concat(n+i),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(n+i-l*p[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var b=Math.min(o,s);f="M ".concat(e,",").concat(n+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+c*b,",").concat(n,`
            L `).concat(e+a-c*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+a,",").concat(n+l*b,`
            L `).concat(e+a,",").concat(n+i-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+a-c*b,",").concat(n+i,`
            L `).concat(e+c*b,",").concat(n+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e,",").concat(n+i-l*b," Z")}else f="M ".concat(e,",").concat(n," h ").concat(a," v ").concat(i," h ").concat(-a," Z");return f},XCe=function(e,n){if(!e||!n)return!1;var a=e.x,i=e.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(s,s+l),f=Math.max(s,s+l),p=Math.min(o,o+c),g=Math.max(o,o+c);return a>=d&&a<=f&&i>=p&&i<=g}return!1},JCe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xM=function(e){var n=q8(q8({},JCe),e),a=v.useRef(),i=v.useState(-1),s=UCe(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var P=a.current.getTotalLength();P&&l(P)}catch{}},[]);var c=n.x,d=n.y,f=n.width,p=n.height,g=n.radius,x=n.className,b=n.animationEasing,j=n.animationDuration,S=n.animationBegin,_=n.isAnimationActive,T=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||f===0||p===0)return null;var C=pn("recharts-rectangle",x);return T?Se.createElement(qo,{canBegin:o>0,from:{width:f,height:p,x:c,y:d},to:{width:f,height:p,x:c,y:d},duration:j,animationEasing:b,isActive:T},function(P){var k=P.width,E=P.height,I=P.x,L=P.y;return Se.createElement(qo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:j,isActive:_,easing:b},Se.createElement("path",oN({},zt(n,!0),{className:C,d:U8(I,L,k,E,g),ref:a})))}):Se.createElement("path",oN({},zt(n,!0),{className:C,d:U8(c,d,f,p,g)}))},ZCe=["points","className","baseLinePoints","connectNulls"];function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Em.apply(this,arguments)}function e2e(t,e){if(t==null)return{};var n=t2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function t2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function V8(t){return i2e(t)||a2e(t)||r2e(t)||n2e()}function n2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r2e(t,e){if(t){if(typeof t=="string")return KP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KP(t,e)}}function a2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function i2e(t){if(Array.isArray(t))return KP(t)}function KP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var H8=function(e){return e&&e.x===+e.x&&e.y===+e.y},s2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(a){H8(a)?n[n.length-1].push(a):n[n.length-1].length>0&&n.push([])}),H8(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},_v=function(e,n){var a=s2e(e);n&&(a=[a.reduce(function(s,o){return[].concat(V8(s),V8(o))},[])]);var i=a.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(i,"Z"):i},o2e=function(e,n,a){var i=_v(e,a);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(_v(n.reverse(),a).slice(1))},l2e=function(e){var n=e.points,a=e.className,i=e.baseLinePoints,s=e.connectNulls,o=e2e(e,ZCe);if(!n||!n.length)return null;var l=pn("recharts-polygon",a);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",d=o2e(n,i,s);return Se.createElement("g",{className:l},Se.createElement("path",Em({},zt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?Se.createElement("path",Em({},zt(o,!0),{fill:"none",d:_v(n,s)})):null,c?Se.createElement("path",Em({},zt(o,!0),{fill:"none",d:_v(i,s)})):null)}var f=_v(n,s);return Se.createElement("path",Em({},zt(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function YP(){return YP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},YP.apply(this,arguments)}var Hb=function(e){var n=e.cx,a=e.cy,i=e.r,s=e.className,o=pn("recharts-dot",s);return n===+n&&a===+a&&i===+i?v.createElement("circle",YP({},zt(e,!1),Ew(e),{className:o,cx:n,cy:a,r:i})):null};function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}var c2e=["x","y","top","left","width","height","className"];function QP(){return QP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},QP.apply(this,arguments)}function G8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function u2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G8(Object(n),!0).forEach(function(a){d2e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function d2e(t,e,n){return e=h2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h2e(t){var e=f2e(t,"string");return ob(e)=="symbol"?e:e+""}function f2e(t,e){if(ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ob(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p2e(t,e){if(t==null)return{};var n=m2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function m2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var g2e=function(e,n,a,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(a)},y2e=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,f=e.width,p=f===void 0?0:f,g=e.height,x=g===void 0?0:g,b=e.className,j=p2e(e,c2e),S=u2e({x:a,y:s,top:l,left:d,width:p,height:x},j);return!Nt(a)||!Nt(s)||!Nt(p)||!Nt(x)||!Nt(l)||!Nt(d)?null:Se.createElement("path",QP({},zt(S,!0),{className:pn("recharts-cross",b),d:g2e(a,s,p,x,l,d)}))},cA,W8;function x2e(){if(W8)return cA;W8=1;var t=wS(),e=tV(),n=zl();function a(i,s){return i&&i.length?t(i,n(s,2),e):void 0}return cA=a,cA}var v2e=x2e();const b2e=Wn(v2e);var uA,K8;function j2e(){if(K8)return uA;K8=1;var t=wS(),e=zl(),n=nV();function a(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return uA=a,uA}var w2e=j2e();const N2e=Wn(w2e);var S2e=["cx","cy","angle","ticks","axisLine"],_2e=["ticks","tick","angle","tickFormatter","stroke"];function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function Cv(){return Cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Cv.apply(this,arguments)}function Y8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function zh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y8(Object(n),!0).forEach(function(a){CS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Q8(t,e){if(t==null)return{};var n=C2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function C2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function T2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,qV(a.key),a)}}function k2e(t,e,n){return e&&X8(t.prototype,e),n&&X8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A2e(t,e,n){return e=lN(e),E2e(t,zV()?Reflect.construct(e,n||[],lN(t).constructor):e.apply(t,n))}function E2e(t,e){if(e&&(yg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P2e(t)}function P2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zV=function(){return!!t})()}function lN(t){return lN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lN(t)}function D2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XP(t,e)}function XP(t,e){return XP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},XP(t,e)}function CS(t,e,n){return e=qV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qV(t){var e=O2e(t,"string");return yg(e)=="symbol"?e:e+""}function O2e(t,e){if(yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(yg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var TS=function(t){function e(){return T2e(this,e),A2e(this,e,arguments)}return D2e(e,t),k2e(e,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Rr(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=b2e(l,function(f){return f.coordinate||0}),d=N2e(l,function(f){return f.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=a.axisLine,d=Q8(a,S2e),f=l.reduce(function(b,j){return[Math.min(b[0],j.coordinate),Math.max(b[1],j.coordinate)]},[1/0,-1/0]),p=Rr(i,s,f[0],o),g=Rr(i,s,f[1],o),x=zh(zh(zh({},zt(d,!1)),{},{fill:"none"},zt(c,!1)),{},{x1:p.x,y1:p.y,x2:g.x,y2:g.y});return Se.createElement("line",Cv({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,d=i.stroke,f=Q8(i,_2e),p=this.getTickTextAnchor(),g=zt(f,!1),x=zt(o,!1),b=s.map(function(j,S){var _=a.getTickValueCoord(j),T=zh(zh(zh(zh({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(_.x,", ").concat(_.y,")")},g),{},{stroke:"none",fill:d},x),{},{index:S},_),{},{payload:j});return Se.createElement(Mn,Cv({className:pn("recharts-polar-radius-axis-tick",EV(o)),key:"tick-".concat(j.coordinate)},Cf(a.props,j,S)),e.renderTickItem(o,T,c?c(j.value,S):j.value))});return Se.createElement(Mn,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,o=a.tick;return!i||!i.length?null:Se.createElement(Mn,{className:pn("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Ra.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Se.isValidElement(a)?o=Se.cloneElement(a,i):an(a)?o=a(i):o=Se.createElement(Tf,Cv({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(v.PureComponent);CS(TS,"displayName","PolarRadiusAxis");CS(TS,"axisType","radiusAxis");CS(TS,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function Yh(){return Yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Yh.apply(this,arguments)}function J8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function qh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J8(Object(n),!0).forEach(function(a){kS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function M2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,VV(a.key),a)}}function I2e(t,e,n){return e&&Z8(t.prototype,e),n&&Z8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function R2e(t,e,n){return e=cN(e),L2e(t,UV()?Reflect.construct(e,n||[],cN(t).constructor):e.apply(t,n))}function L2e(t,e){if(e&&(xg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F2e(t)}function F2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UV=function(){return!!t})()}function cN(t){return cN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cN(t)}function $2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JP(t,e)}function JP(t,e){return JP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},JP(t,e)}function kS(t,e,n){return e=VV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VV(t){var e=B2e(t,"string");return xg(e)=="symbol"?e:e+""}function B2e(t,e){if(xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(xg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var z2e=Math.PI/180,q2e=1e-5,AS=function(t){function e(){return M2e(this,e),R2e(this,e,arguments)}return $2e(e,t),I2e(e,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,o=i.cy,l=i.radius,c=i.orientation,d=i.tickSize,f=d||8,p=Rr(s,o,l,a.coordinate),g=Rr(s,o,l+(c==="inner"?-1:1)*f,a.coordinate);return{x1:p.x,y1:p.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*z2e),o;return s>q2e?o=i==="outer"?"start":"end":s<-1e-5?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.radius,l=a.axisLine,c=a.axisLineType,d=qh(qh({},zt(this.props,!1)),{},{fill:"none"},zt(l,!1));if(c==="circle")return Se.createElement(Hb,Yh({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:s,r:o}));var f=this.props.ticks,p=f.map(function(g){return Rr(i,s,o,g.coordinate)});return Se.createElement(l2e,Yh({className:"recharts-polar-angle-axis-line"},d,{points:p}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,d=i.stroke,f=zt(this.props,!1),p=zt(o,!1),g=qh(qh({},f),{},{fill:"none"},zt(l,!1)),x=s.map(function(b,j){var S=a.getTickLineCoord(b),_=a.getTickTextAnchor(b),T=qh(qh(qh({textAnchor:_},f),{},{stroke:"none",fill:d},p),{},{index:j,payload:b,x:S.x2,y:S.y2});return Se.createElement(Mn,Yh({className:pn("recharts-polar-angle-axis-tick",EV(o)),key:"tick-".concat(b.coordinate)},Cf(a.props,b,j)),l&&Se.createElement("line",Yh({className:"recharts-polar-angle-axis-tick-line"},g,S)),o&&e.renderTickItem(o,T,c?c(b.value,j):b.value))});return Se.createElement(Mn,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,o=a.axisLine;return s<=0||!i||!i.length?null:Se.createElement(Mn,{className:pn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Se.isValidElement(a)?o=Se.cloneElement(a,i):an(a)?o=a(i):o=Se.createElement(Tf,Yh({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(v.PureComponent);kS(AS,"displayName","PolarAngleAxis");kS(AS,"axisType","angleAxis");kS(AS,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var dA,e$;function U2e(){if(e$)return dA;e$=1;var t=e7(),e=t(Object.getPrototypeOf,Object);return dA=e,dA}var hA,t$;function V2e(){if(t$)return hA;t$=1;var t=Gc(),e=U2e(),n=Wc(),a="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,c=o.call(Object);function d(f){if(!n(f)||t(f)!=a)return!1;var p=e(f);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==c}return hA=d,hA}var H2e=V2e();const G2e=Wn(H2e);var fA,n$;function W2e(){if(n$)return fA;n$=1;var t=Gc(),e=Wc(),n="[object Boolean]";function a(i){return i===!0||i===!1||e(i)&&t(i)==n}return fA=a,fA}var K2e=W2e();const Y2e=Wn(K2e);function lb(t){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lb(t)}function uN(){return uN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},uN.apply(this,arguments)}function Q2e(t,e){return eTe(t)||Z2e(t,e)||J2e(t,e)||X2e()}function X2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J2e(t,e){if(t){if(typeof t=="string")return r$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r$(t,e)}}function r$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Z2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function eTe(t){if(Array.isArray(t))return t}function a$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function i$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a$(Object(n),!0).forEach(function(a){tTe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function tTe(t,e,n){return e=nTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nTe(t){var e=rTe(t,"string");return lb(e)=="symbol"?e:e+""}function rTe(t,e){if(lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(lb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s$=function(e,n,a,i,s){var o=a-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+a,",").concat(n),l+="L ".concat(e+a-o/2,",").concat(n+s),l+="L ".concat(e+a-o/2-i,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},aTe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},iTe=function(e){var n=i$(i$({},aTe),e),a=v.useRef(),i=v.useState(-1),s=Q2e(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var C=a.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,d=n.y,f=n.upperWidth,p=n.lowerWidth,g=n.height,x=n.className,b=n.animationEasing,j=n.animationDuration,S=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||g!==+g||f===0&&p===0||g===0)return null;var T=pn("recharts-trapezoid",x);return _?Se.createElement(qo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:g,x:c,y:d},to:{upperWidth:f,lowerWidth:p,height:g,x:c,y:d},duration:j,animationEasing:b,isActive:_},function(C){var P=C.upperWidth,k=C.lowerWidth,E=C.height,I=C.x,L=C.y;return Se.createElement(qo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:j,easing:b},Se.createElement("path",uN({},zt(n,!0),{className:T,d:s$(I,L,P,k,E),ref:a})))}):Se.createElement("g",null,Se.createElement("path",uN({},zt(n,!0),{className:T,d:s$(c,d,f,p,g)})))},sTe=["option","shapeType","propTransformer","activeClassName","isActive"];function cb(t){"@babel/helpers - typeof";return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cb(t)}function oTe(t,e){if(t==null)return{};var n=lTe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function lTe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function o$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function dN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o$(Object(n),!0).forEach(function(a){cTe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function cTe(t,e,n){return e=uTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uTe(t){var e=dTe(t,"string");return cb(e)=="symbol"?e:e+""}function dTe(t,e){if(cb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(cb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hTe(t,e){return dN(dN({},e),t)}function fTe(t,e){return t==="symbols"}function l$(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Se.createElement(xM,n);case"trapezoid":return Se.createElement(iTe,n);case"sector":return Se.createElement(OV,n);case"symbols":if(fTe(e))return Se.createElement(LO,n);break;default:return null}}function pTe(t){return v.isValidElement(t)?t.props:t}function HV(t){var e=t.option,n=t.shapeType,a=t.propTransformer,i=a===void 0?hTe:a,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=oTe(t,sTe),d;if(v.isValidElement(e))d=v.cloneElement(e,dN(dN({},c),pTe(e)));else if(an(e))d=e(c);else if(G2e(e)&&!Y2e(e)){var f=i(e,c);d=Se.createElement(l$,{shapeType:n,elementProps:f})}else{var p=c;d=Se.createElement(l$,{shapeType:n,elementProps:p})}return l?Se.createElement(Mn,{className:o},d):d}function ES(t,e){return e!=null&&"trapezoids"in t.props}function PS(t,e){return e!=null&&"sectors"in t.props}function ub(t,e){return e!=null&&"points"in t.props}function mTe(t,e){var n,a,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.y)||t.y===e.y;return i&&s}function gTe(t,e){var n=t.endAngle===e.endAngle,a=t.startAngle===e.startAngle;return n&&a}function yTe(t,e){var n=t.x===e.x,a=t.y===e.y,i=t.z===e.z;return n&&a&&i}function xTe(t,e){var n;return ES(t,e)?n=mTe:PS(t,e)?n=gTe:ub(t,e)&&(n=yTe),n}function vTe(t,e){var n;return ES(t,e)?n="trapezoids":PS(t,e)?n="sectors":ub(t,e)&&(n="points"),n}function bTe(t,e){if(ES(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(PS(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return ub(t,e)?e.payload:{}}function jTe(t){var e=t.activeTooltipItem,n=t.graphicalItem,a=t.itemData,i=vTe(n,e),s=bTe(n,e),o=a.filter(function(c,d){var f=kf(s,c),p=n.props[i].filter(function(b){var j=xTe(n,e);return j(b,e)}),g=n.props[i].indexOf(p[p.length-1]),x=d===g;return f&&x}),l=a.indexOf(o[o.length-1]);return l}var sw;function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function Pm(){return Pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Pm.apply(this,arguments)}function c$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(n),!0).forEach(function(a){to(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function wTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,WV(a.key),a)}}function NTe(t,e,n){return e&&u$(t.prototype,e),n&&u$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function STe(t,e,n){return e=hN(e),_Te(t,GV()?Reflect.construct(e,n||[],hN(t).constructor):e.apply(t,n))}function _Te(t,e){if(e&&(vg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CTe(t)}function CTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GV=function(){return!!t})()}function hN(t){return hN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hN(t)}function TTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZP(t,e)}function ZP(t,e){return ZP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},ZP(t,e)}function to(t,e,n){return e=WV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WV(t){var e=kTe(t,"string");return vg(e)=="symbol"?e:e+""}function kTe(t,e){if(vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(vg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ql=function(t){function e(n){var a;return wTe(this,e),a=STe(this,e,[n]),to(a,"pieRef",null),to(a,"sectorRefs",[]),to(a,"id",If("recharts-pie-")),to(a,"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),an(i)&&i()}),to(a,"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),an(i)&&i()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return TTe(e,t),NTe(e,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,d=s.valueKey,f=zt(this.props,!1),p=zt(o,!1),g=zt(l,!1),x=o&&o.offsetRadius||20,b=a.map(function(j,S){var _=(j.startAngle+j.endAngle)/2,T=Rr(j.cx,j.cy,j.outerRadius+x,_),C=Mr(Mr(Mr(Mr({},f),j),{},{stroke:"none"},p),{},{index:S,textAnchor:e.getTextAnchor(T.x,j.cx)},T),P=Mr(Mr(Mr(Mr({},f),j),{},{fill:"none",stroke:j.fill},g),{},{index:S,points:[Rr(j.cx,j.cy,j.outerRadius,_),T]}),k=c;return hn(c)&&hn(d)?k="value":hn(c)&&(k=d),Se.createElement(Mn,{key:"label-".concat(j.startAngle,"-").concat(j.endAngle,"-").concat(j.midAngle,"-").concat(S)},l&&e.renderLabelLineItem(l,P,"line"),e.renderLabelItem(o,C,ca(j,k)))});return Se.createElement(Mn,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return a.map(function(d,f){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&a.length!==1)return null;var p=i.isActiveIndex(f),g=c&&i.hasActiveIndex()?c:null,x=p?o:g,b=Mr(Mr({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return Se.createElement(Mn,Pm({ref:function(S){S&&!i.sectorRefs.includes(S)&&i.sectorRefs.push(S)},tabIndex:-1,className:"recharts-pie-sector"},Cf(i.props,d,f),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(f)}),Se.createElement(HV,Pm({option:x,isActive:p,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,d=i.animationEasing,f=i.animationId,p=this.state,g=p.prevSectors,x=p.prevIsAnimationActive;return Se.createElement(qo,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var j=b.t,S=[],_=s&&s[0],T=_.startAngle;return s.forEach(function(C,P){var k=g&&g[P],E=P>0?Is(C,"paddingAngle",0):0;if(k){var I=_a(k.endAngle-k.startAngle,C.endAngle-C.startAngle),L=Mr(Mr({},C),{},{startAngle:T+E,endAngle:T+I(j)+E});S.push(L),T=L.endAngle}else{var $=C.endAngle,q=C.startAngle,F=_a(0,$-q),H=F(j),V=Mr(Mr({},C),{},{startAngle:T+E,endAngle:T+H+E});S.push(V),T=V.endAngle}}),Se.createElement(Mn,null,a.renderSectorsStatically(S))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!kf(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,c=i.label,d=i.cx,f=i.cy,p=i.innerRadius,g=i.outerRadius,x=i.isAnimationActive,b=this.state.isAnimationFinished;if(s||!o||!o.length||!Nt(d)||!Nt(f)||!Nt(p)||!Nt(g))return null;var j=pn("recharts-pie",l);return Se.createElement(Mn,{tabIndex:this.props.rootTabIndex,className:j,ref:function(_){a.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),Ra.renderCallByParent(this.props,null,!1),(!x||b)&&Rl.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i,s){if(Se.isValidElement(a))return Se.cloneElement(a,i);if(an(a))return a(i);var o=pn("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Se.createElement(pf,Pm({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,i,s){if(Se.isValidElement(a))return Se.cloneElement(a,i);var o=s;if(an(a)&&(o=a(i),Se.isValidElement(o)))return o;var l=pn("recharts-pie-label-text",typeof a!="boolean"&&!an(a)?a.className:"");return Se.createElement(Tf,Pm({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(v.PureComponent);sw=ql;to(ql,"displayName","Pie");to(ql,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!jd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});to(ql,"parseDeltaAngle",function(t,e){var n=Ri(e-t),a=Math.min(Math.abs(e-t),360);return n*a});to(ql,"getRealPieData",function(t){var e=t.data,n=t.children,a=zt(t,!1),i=Rs(n,$b);return e&&e.length?e.map(function(s,o){return Mr(Mr(Mr({payload:s},a),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return Mr(Mr({},a),s.props)}):[]});to(ql,"parseCoordinateOfPie",function(t,e){var n=e.top,a=e.left,i=e.width,s=e.height,o=AV(i,s),l=a+Li(t.cx,i,i/2),c=n+Li(t.cy,s,s/2),d=Li(t.innerRadius,o,0),f=Li(t.outerRadius,o,o*.8),p=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:f,maxRadius:p}});to(ql,"getComposedData",function(t){var e=t.item,n=t.offset,a=e.type.defaultProps!==void 0?Mr(Mr({},e.type.defaultProps),e.props):e.props,i=sw.getRealPieData(a);if(!i||!i.length)return null;var s=a.cornerRadius,o=a.startAngle,l=a.endAngle,c=a.paddingAngle,d=a.dataKey,f=a.nameKey,p=a.valueKey,g=a.tooltipType,x=Math.abs(a.minAngle),b=sw.parseCoordinateOfPie(a,n),j=sw.parseDeltaAngle(o,l),S=Math.abs(j),_=d;hn(d)&&hn(p)?(Bo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):hn(d)&&(Bo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=p);var T=i.filter(function(L){return ca(L,_,0)!==0}).length,C=(S>=360?T:T-1)*c,P=S-T*x-C,k=i.reduce(function(L,$){var q=ca($,_,0);return L+(Nt(q)?q:0)},0),E;if(k>0){var I;E=i.map(function(L,$){var q=ca(L,_,0),F=ca(L,f,$),H=(Nt(q)?q:0)/k,V;$?V=I.endAngle+Ri(j)*c*(q!==0?1:0):V=o;var X=V+Ri(j)*((q!==0?x:0)+H*P),Y=(V+X)/2,z=(b.innerRadius+b.outerRadius)/2,G=[{name:F,value:q,payload:L,dataKey:_,type:g}],ie=Rr(b.cx,b.cy,z,Y);return I=Mr(Mr(Mr({percent:H,cornerRadius:s,name:F,tooltipPayload:G,midAngle:Y,middleRadius:z,tooltipPosition:ie},L),b),{},{value:ca(L,_),startAngle:V,endAngle:X,payload:L,paddingAngle:Ri(j)*c}),I})}return Mr(Mr({},b),{},{sectors:E,data:i})});var pA,d$;function ATe(){if(d$)return pA;d$=1;var t=Math.ceil,e=Math.max;function n(a,i,s,o){for(var l=-1,c=e(t((i-a)/(s||1)),0),d=Array(c);c--;)d[o?c:++l]=a,a+=s;return d}return pA=n,pA}var mA,h$;function KV(){if(h$)return mA;h$=1;var t=g7(),e=1/0,n=17976931348623157e292;function a(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var s=i<0?-1:1;return s*n}return i===i?i:0}return mA=a,mA}var gA,f$;function ETe(){if(f$)return gA;f$=1;var t=ATe(),e=mS(),n=KV();function a(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,i)}}return gA=a,gA}var yA,p$;function PTe(){if(p$)return yA;p$=1;var t=ETe(),e=t();return yA=e,yA}var DTe=PTe();const fN=Wn(DTe);function db(t){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},db(t)}function m$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function g$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(n),!0).forEach(function(a){YV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function YV(t,e,n){return e=OTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OTe(t){var e=MTe(t,"string");return db(e)=="symbol"?e:e+""}function MTe(t,e){if(db(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(db(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ITe=["Webkit","Moz","O","ms"],RTe=function(e,n){var a=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=ITe.reduce(function(s,o){return g$(g$({},s),{},YV({},o+a,n))},{});return i[e]=n,i};function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pN.apply(this,arguments)}function y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function xA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y$(Object(n),!0).forEach(function(a){Ts(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function LTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,XV(a.key),a)}}function FTe(t,e,n){return e&&x$(t.prototype,e),n&&x$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Te(t,e,n){return e=mN(e),BTe(t,QV()?Reflect.construct(e,n||[],mN(t).constructor):e.apply(t,n))}function BTe(t,e){if(e&&(bg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zTe(t)}function zTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QV=function(){return!!t})()}function mN(t){return mN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mN(t)}function qTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eD(t,e)}function eD(t,e){return eD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},eD(t,e)}function Ts(t,e,n){return e=XV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XV(t){var e=UTe(t,"string");return bg(e)=="symbol"?e:e+""}function UTe(t,e){if(bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(bg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var VTe=function(e){var n=e.data,a=e.startIndex,i=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=wv().domain(fN(0,c)).range([s,s+o-l]),f=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(a),endX:d(i),scale:d,scaleValues:f}},v$=function(e){return e.changedTouches&&!!e.changedTouches.length},jg=function(t){function e(n){var a;return LTe(this,e),a=$Te(this,e,[n]),Ts(a,"handleDrag",function(i){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(i):a.state.isSlideMoving&&a.handleSlideDrag(i)}),Ts(a,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&a.handleDrag(i.changedTouches[0])}),Ts(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=a.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:s,startIndex:l})}),a.detachDragEndListener()}),Ts(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Ts(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Ts(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Ts(a,"handleSlideDragStart",function(i){var s=v$(i)?i.changedTouches[0]:i;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return qTe(e,t),FTe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var i=a.startX,s=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,p=Math.min(i,s),g=Math.max(i,s),x=e.getIndexInRange(o,p),b=e.getIndexInRange(o,g);return{startIndex:x-x%c,endIndex:b===f?f:b-b%c}}},{key:"getTextOfTick",value:function(a){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=ca(s[a],l,a);return an(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,f=c.width,p=c.travellerWidth,g=c.startIndex,x=c.endIndex,b=c.onChange,j=a.pageX-s;j>0?j=Math.min(j,d+f-p-l,d+f-p-o):j<0&&(j=Math.max(j,d-o,d-l));var S=this.getIndex({startX:o+j,endX:l+j});(S.startIndex!==g||S.endIndex!==x)&&b&&b(S),this.setState({startX:o+j,endX:l+j,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,i){var s=v$(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],f=this.props,p=f.x,g=f.width,x=f.travellerWidth,b=f.onChange,j=f.gap,S=f.data,_={startX:this.state.startX,endX:this.state.endX},T=a.pageX-s;T>0?T=Math.min(T,p+g-x-d):T<0&&(T=Math.max(T,p-d)),_[o]=d+T;var C=this.getIndex(_),P=C.startIndex,k=C.endIndex,E=function(){var L=S.length-1;return o==="startX"&&(l>c?P%j===0:k%j===0)||l<c&&k===L||o==="endX"&&(l>c?k%j===0:P%j===0)||l>c&&k===L};this.setState(Ts(Ts({},o,d+T),"brushMoveStartX",a.pageX),function(){b&&E()&&b(C)})}},{key:"handleTravellerMoveKeyboard",value:function(a,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,f=this.state[i],p=l.indexOf(f);if(p!==-1){var g=p+a;if(!(g===-1||g>=l.length)){var x=l[g];i==="startX"&&x>=d||i==="endX"&&x<=c||this.setState(Ts({},i,x),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.fill,d=a.stroke;return Se.createElement("rect",{stroke:d,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.data,d=a.children,f=a.padding,p=v.Children.only(d);return p?Se.cloneElement(p,{x:i,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,i){var s,o,l=this,c=this.props,d=c.y,f=c.travellerWidth,p=c.height,g=c.traveller,x=c.ariaLabel,b=c.data,j=c.startIndex,S=c.endIndex,_=Math.max(a,this.props.x),T=xA(xA({},zt(this.props,!1)),{},{x:_,y:d,width:f,height:p}),C=x||"Min value: ".concat((s=b[j])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=b[S])===null||o===void 0?void 0:o.name);return Se.createElement(Mn,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(g,T))}},{key:"renderSlide",value:function(a,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,d=s.travellerWidth,f=Math.min(a,i)+d,p=Math.max(Math.abs(i-a)-d,0);return Se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var a=this.props,i=a.startIndex,s=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,d=a.stroke,f=this.state,p=f.startX,g=f.endX,x=5,b={pointerEvents:"none",fill:d};return Se.createElement(Mn,{className:"recharts-brush-texts"},Se.createElement(Tf,pN({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-x,y:o+l/2},b),this.getTextOfTick(i)),Se.createElement(Tf,pN({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+c+x,y:o+l/2},b),this.getTextOfTick(s)))}},{key:"render",value:function(){var a=this.props,i=a.data,s=a.className,o=a.children,l=a.x,c=a.y,d=a.width,f=a.height,p=a.alwaysShowText,g=this.state,x=g.startX,b=g.endX,j=g.isTextActive,S=g.isSlideMoving,_=g.isTravellerMoving,T=g.isTravellerFocused;if(!i||!i.length||!Nt(l)||!Nt(c)||!Nt(d)||!Nt(f)||d<=0||f<=0)return null;var C=pn("recharts-brush",s),P=Se.Children.count(o)===1,k=RTe("userSelect","none");return Se.createElement(Mn,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(j||S||_||T||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var i=a.x,s=a.y,o=a.width,l=a.height,c=a.stroke,d=Math.floor(s+l/2)-1;return Se.createElement(Se.Fragment,null,Se.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),Se.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),Se.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,i){var s;return Se.isValidElement(a)?s=Se.cloneElement(a,i):an(a)?s=a(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(a,i){var s=a.data,o=a.width,l=a.x,c=a.travellerWidth,d=a.updateId,f=a.startIndex,p=a.endIndex;if(s!==i.prevData||d!==i.prevUpdateId)return xA({prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},s&&s.length?VTe({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var g=i.scale.domain().map(function(x){return i.scale(x)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(a.startIndex),endX:i.scale(a.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(a,i){for(var s=a.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>i?l=c:o=c}return i>=a[l]?l:o}}])}(v.PureComponent);Ts(jg,"displayName","Brush");Ts(jg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var vA,b$;function HTe(){if(b$)return vA;b$=1;var t=VO();function e(n,a){var i;return t(n,function(s,o,l){return i=a(s,o,l),!i}),!!i}return vA=e,vA}var bA,j$;function GTe(){if(j$)return bA;j$=1;var t=WU(),e=zl(),n=HTe(),a=fs(),i=mS();function s(o,l,c){var d=a(o)?t:n;return c&&i(o,l,c)&&(l=void 0),d(o,e(l,3))}return bA=s,bA}var WTe=GTe();const KTe=Wn(WTe);var Ll=function(e,n){var a=e.alwaysShow,i=e.ifOverflow;return a&&(i="extendDomain"),i===n},jA,w$;function YTe(){if(w$)return jA;w$=1;var t=d7();function e(n,a,i){a=="__proto__"&&t?t(n,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[a]=i}return jA=e,jA}var wA,N$;function QTe(){if(N$)return wA;N$=1;var t=YTe(),e=c7(),n=zl();function a(i,s){var o={};return s=n(s,3),e(i,function(l,c,d){t(o,c,s(l,c,d))}),o}return wA=a,wA}var XTe=QTe();const JTe=Wn(XTe);var NA,S$;function ZTe(){if(S$)return NA;S$=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(!n(e[a],a,e))return!1;return!0}return NA=t,NA}var SA,_$;function eke(){if(_$)return SA;_$=1;var t=VO();function e(n,a){var i=!0;return t(n,function(s,o,l){return i=!!a(s,o,l),i}),i}return SA=e,SA}var _A,C$;function tke(){if(C$)return _A;C$=1;var t=ZTe(),e=eke(),n=zl(),a=fs(),i=mS();function s(o,l,c){var d=a(o)?t:e;return c&&i(o,l,c)&&(l=void 0),d(o,n(l,3))}return _A=s,_A}var nke=tke();const JV=Wn(nke);var rke=["x","y"];function hb(t){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hb(t)}function tD(){return tD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},tD.apply(this,arguments)}function T$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function av(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(n),!0).forEach(function(a){ake(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ake(t,e,n){return e=ike(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ike(t){var e=ske(t,"string");return hb(e)=="symbol"?e:e+""}function ske(t,e){if(hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(hb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oke(t,e){if(t==null)return{};var n=lke(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function lke(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function cke(t,e){var n=t.x,a=t.y,i=oke(t,rke),s="".concat(n),o=parseInt(s,10),l="".concat(a),c=parseInt(l,10),d="".concat(e.height||i.height),f=parseInt(d,10),p="".concat(e.width||i.width),g=parseInt(p,10);return av(av(av(av(av({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:g,name:e.name,radius:e.radius})}function k$(t){return Se.createElement(HV,tD({shapeType:"rectangle",propTransformer:cke,activeClassName:"recharts-active-bar"},t))}var uke=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,i){if(typeof e=="number")return e;var s=Nt(a)||Mye(a);return s?e(a,i):(s||Ef(),n)}},dke=["value","background"],ZV;function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function hke(t,e){if(t==null)return{};var n=fke(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function fke(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},gN.apply(this,arguments)}function A$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ga(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A$(Object(n),!0).forEach(function(a){sd(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function pke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,tH(a.key),a)}}function mke(t,e,n){return e&&E$(t.prototype,e),n&&E$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gke(t,e,n){return e=yN(e),yke(t,eH()?Reflect.construct(e,n||[],yN(t).constructor):e.apply(t,n))}function yke(t,e){if(e&&(wg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xke(t)}function xke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eH=function(){return!!t})()}function yN(t){return yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yN(t)}function vke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nD(t,e)}function nD(t,e){return nD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},nD(t,e)}function sd(t,e,n){return e=tH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tH(t){var e=bke(t,"string");return wg(e)=="symbol"?e:e+""}function bke(t,e){if(wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(wg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _d=function(t){function e(){var n;pke(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=gke(this,e,[].concat(i)),sd(n,"state",{isAnimationFinished:!1}),sd(n,"id",If("recharts-bar-")),sd(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),sd(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return vke(e,t),mke(e,[{key:"renderRectanglesStatically",value:function(a){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,d=s.activeBar,f=zt(this.props,!1);return a&&a.map(function(p,g){var x=g===c,b=x?d:o,j=ga(ga(ga({},f),p),{},{isActive:x,option:b,index:g,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Se.createElement(Mn,gN({className:"recharts-bar-rectangle"},Cf(i.props,p,g),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(g)}),Se.createElement(k$,j))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,p=i.animationId,g=this.state.prevData;return Se.createElement(qo,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,j=s.map(function(S,_){var T=g&&g[_];if(T){var C=_a(T.x,S.x),P=_a(T.y,S.y),k=_a(T.width,S.width),E=_a(T.height,S.height);return ga(ga({},S),{},{x:C(b),y:P(b),width:k(b),height:E(b)})}if(o==="horizontal"){var I=_a(0,S.height),L=I(b);return ga(ga({},S),{},{y:S.y+S.height-L,height:L})}var $=_a(0,S.width),q=$(b);return ga(ga({},S),{},{width:q})});return Se.createElement(Mn,null,a.renderRectanglesStatically(j))})}},{key:"renderRectangles",value:function(){var a=this.props,i=a.data,s=a.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!kf(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var a=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=zt(this.props.background,!1);return s.map(function(d,f){d.value;var p=d.background,g=hke(d,dke);if(!p)return null;var x=ga(ga(ga(ga(ga({},g),{},{fill:"#eee"},p),c),Cf(a.props,d,f)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Se.createElement(k$,gN({key:"background-bar-".concat(f),option:a.props.background,isActive:f===l},x))})}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,d=s.layout,f=s.children,p=Rs(f,Vb);if(!p)return null;var g=d==="vertical"?o[0].height/2:o[0].width/2,x=function(S,_){var T=Array.isArray(S.value)?S.value[1]:S.value;return{x:S.x,y:S.y,value:T,errorVal:ca(S,_)}},b={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Se.createElement(Mn,b,p.map(function(j){return Se.cloneElement(j,{key:"error-bar-".concat(i,"-").concat(j.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var a=this.props,i=a.hide,s=a.data,o=a.className,l=a.xAxis,c=a.yAxis,d=a.left,f=a.top,p=a.width,g=a.height,x=a.isAnimationActive,b=a.background,j=a.id;if(i||!s||!s.length)return null;var S=this.state.isAnimationFinished,_=pn("recharts-bar",o),T=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,P=T||C,k=hn(j)?this.id:j;return Se.createElement(Mn,{className:_},T||C?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(k)},Se.createElement("rect",{x:T?d:d-p/2,y:C?f:f-g/2,width:T?p:p*2,height:C?g:g*2}))):null,Se.createElement(Mn,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(k,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,k),(!x||S)&&Rl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:i.curData}:a.data!==i.curData?{curData:a.data}:null}}])}(v.PureComponent);ZV=_d;sd(_d,"displayName","Bar");sd(_d,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});sd(_d,"getComposedData",function(t){var e=t.props,n=t.item,a=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,x=KNe(a,n);if(!x)return null;var b=e.layout,j=n.type.defaultProps,S=j!==void 0?ga(ga({},j),n.props):n.props,_=S.dataKey,T=S.children,C=S.minPointSize,P=b==="horizontal"?o:s,k=d?P.scale.domain():null,E=tSe({numericAxis:P}),I=Rs(T,$b),L=p.map(function($,q){var F,H,V,X,Y,z;d?F=YNe(d[f+q],k):(F=ca($,_),Array.isArray(F)||(F=[E,F]));var G=uke(C,ZV.defaultProps.minPointSize)(F[1],q);if(b==="horizontal"){var ie,W=[o.scale(F[0]),o.scale(F[1])],B=W[0],ce=W[1];H=n8({axis:s,ticks:l,bandSize:i,offset:x.offset,entry:$,index:q}),V=(ie=ce??B)!==null&&ie!==void 0?ie:void 0,X=x.size;var je=B-ce;if(Y=Number.isNaN(je)?0:je,z={x:H,y:o.y,width:X,height:o.height},Math.abs(G)>0&&Math.abs(Y)<Math.abs(G)){var K=Ri(Y||G)*(Math.abs(G)-Math.abs(Y));V-=K,Y+=K}}else{var Ie=[s.scale(F[0]),s.scale(F[1])],Ue=Ie[0],ze=Ie[1];if(H=Ue,V=n8({axis:o,ticks:c,bandSize:i,offset:x.offset,entry:$,index:q}),X=ze-Ue,Y=x.size,z={x:s.x,y:V,width:s.width,height:Y},Math.abs(G)>0&&Math.abs(X)<Math.abs(G)){var Le=Ri(X||G)*(Math.abs(G)-Math.abs(X));X+=Le}}return ga(ga(ga({},$),{},{x:H,y:V,width:X,height:Y,value:d?F:F[1],payload:$,background:z},I&&I[q]&&I[q].props),{},{tooltipPayload:[TV(n,$)],tooltipPosition:{x:H+X/2,y:V+Y/2}})});return ga({data:L,layout:b},g)});function fb(t){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fb(t)}function jke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,nH(a.key),a)}}function wke(t,e,n){return e&&P$(t.prototype,e),n&&P$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Io(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D$(Object(n),!0).forEach(function(a){DS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function DS(t,e,n){return e=nH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nH(t){var e=Nke(t,"string");return fb(e)=="symbol"?e:e+""}function Nke(t,e){if(fb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(fb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vM=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.layout,d=e.children,f=Object.keys(n),p={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},g=!!ks(d,_d);return f.reduce(function(x,b){var j=n[b],S=j.orientation,_=j.domain,T=j.padding,C=T===void 0?{}:T,P=j.mirror,k=j.reversed,E="".concat(S).concat(P?"Mirror":""),I,L,$,q,F;if(j.type==="number"&&(j.padding==="gap"||j.padding==="no-gap")){var H=_[1]-_[0],V=1/0,X=j.categoricalDomain.sort(Lye);if(X.forEach(function(Ie,Ue){Ue>0&&(V=Math.min((Ie||0)-(X[Ue-1]||0),V))}),Number.isFinite(V)){var Y=V/H,z=j.layout==="vertical"?a.height:a.width;if(j.padding==="gap"&&(I=Y*z/2),j.padding==="no-gap"){var G=Li(e.barCategoryGap,Y*z),ie=Y*z/2;I=ie-G-(ie-G)/z*G}}}i==="xAxis"?L=[a.left+(C.left||0)+(I||0),a.left+a.width-(C.right||0)-(I||0)]:i==="yAxis"?L=c==="horizontal"?[a.top+a.height-(C.bottom||0),a.top+(C.top||0)]:[a.top+(C.top||0)+(I||0),a.top+a.height-(C.bottom||0)-(I||0)]:L=j.range,k&&(L=[L[1],L[0]]);var W=NV(j,s,g),B=W.scale,ce=W.realScaleType;B.domain(_).range(L),SV(B);var je=_V(B,Io(Io({},j),{},{realScaleType:ce}));i==="xAxis"?(F=S==="top"&&!P||S==="bottom"&&P,$=a.left,q=p[E]-F*j.height):i==="yAxis"&&(F=S==="left"&&!P||S==="right"&&P,$=p[E]-F*j.width,q=a.top);var K=Io(Io(Io({},j),je),{},{realScaleType:ce,x:$,y:q,scale:B,width:i==="xAxis"?a.width:j.width,height:i==="yAxis"?a.height:j.height});return K.bandSize=tN(K,je),!j.hide&&i==="xAxis"?p[E]+=(F?-1:1)*K.height:j.hide||(p[E]+=(F?-1:1)*K.width),Io(Io({},x),{},DS({},b,K))},{})},rH=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(a,s),y:Math.min(i,o),width:Math.abs(s-a),height:Math.abs(o-i)}},Ske=function(e){var n=e.x1,a=e.y1,i=e.x2,s=e.y2;return rH({x:n,y:a},{x:i,y:s})},aH=function(){function t(e){jke(this,t),this.scale=e}return wke(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.bandAware,s=a.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),i=a[0],s=a[a.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();DS(aH,"EPS",1e-4);var bM=function(e){var n=Object.keys(e).reduce(function(a,i){return Io(Io({},a),{},DS({},i,aH.create(e[i])))},{});return Io(Io({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return JTe(i,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return JV(i,function(s,o){return n[o].isInRange(s)})}})};function _ke(t){return(t%180+180)%180}var Cke=function(e){var n=e.width,a=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=_ke(i),o=s*Math.PI/180,l=Math.atan(a/n),c=o>l&&o<Math.PI-l?a/Math.sin(o):n/Math.cos(o);return Math.abs(c)},CA,O$;function Tke(){if(O$)return CA;O$=1;var t=zl(),e=Fb(),n=fS();function a(i){return function(s,o,l){var c=Object(s);if(!e(s)){var d=t(o,3);s=n(s),o=function(p){return d(c[p],p,c)}}var f=i(s,o,l);return f>-1?c[d?s[f]:f]:void 0}}return CA=a,CA}var TA,M$;function kke(){if(M$)return TA;M$=1;var t=KV();function e(n){var a=t(n),i=a%1;return a===a?i?a-i:a:0}return TA=e,TA}var kA,I$;function Ake(){if(I$)return kA;I$=1;var t=a7(),e=zl(),n=kke(),a=Math.max;function i(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var d=l==null?0:n(l);return d<0&&(d=a(c+d,0)),t(s,e(o,3),d)}return kA=i,kA}var AA,R$;function Eke(){if(R$)return AA;R$=1;var t=Tke(),e=Ake(),n=t(e);return AA=n,AA}var Pke=Eke();const Dke=Wn(Pke);var Oke=vU();const Mke=Wn(Oke);var Ike=Mke(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),jM=v.createContext(void 0),wM=v.createContext(void 0),iH=v.createContext(void 0),sH=v.createContext({}),oH=v.createContext(void 0),lH=v.createContext(0),cH=v.createContext(0),L$=function(e){var n=e.state,a=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,f=Ike(s);return Se.createElement(jM.Provider,{value:a},Se.createElement(wM.Provider,{value:i},Se.createElement(sH.Provider,{value:s},Se.createElement(iH.Provider,{value:f},Se.createElement(oH.Provider,{value:o},Se.createElement(lH.Provider,{value:d},Se.createElement(cH.Provider,{value:c},l)))))))},Rke=function(){return v.useContext(oH)},uH=function(e){var n=v.useContext(jM);n==null&&Ef();var a=n[e];return a==null&&Ef(),a},Lke=function(){var e=v.useContext(jM);return Ku(e)},Fke=function(){var e=v.useContext(wM),n=Dke(e,function(a){return JV(a.domain,Number.isFinite)});return n||Ku(e)},dH=function(e){var n=v.useContext(wM);n==null&&Ef();var a=n[e];return a==null&&Ef(),a},$ke=function(){var e=v.useContext(iH);return e},Bke=function(){return v.useContext(sH)},NM=function(){return v.useContext(cH)},SM=function(){return v.useContext(lH)};function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function zke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qke(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,fH(a.key),a)}}function Uke(t,e,n){return e&&qke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vke(t,e,n){return e=xN(e),Hke(t,hH()?Reflect.construct(e,n||[],xN(t).constructor):e.apply(t,n))}function Hke(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gke(t)}function Gke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hH=function(){return!!t})()}function xN(t){return xN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xN(t)}function Wke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rD(t,e)}function rD(t,e){return rD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},rD(t,e)}function F$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function $$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(n),!0).forEach(function(a){_M(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function _M(t,e,n){return e=fH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fH(t){var e=Kke(t,"string");return Ng(e)=="symbol"?e:e+""}function Kke(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ng(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Yke(t,e){return Zke(t)||Jke(t,e)||Xke(t,e)||Qke()}function Qke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xke(t,e){if(t){if(typeof t=="string")return B$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B$(t,e)}}function B$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Jke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Zke(t){if(Array.isArray(t))return t}function aD(){return aD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},aD.apply(this,arguments)}var eAe=function(e,n){var a;return Se.isValidElement(e)?a=Se.cloneElement(e,n):an(e)?a=e(n):a=Se.createElement("line",aD({},n,{className:"recharts-reference-line-line"})),a},tAe=function(e,n,a,i,s,o,l,c,d){var f=s.x,p=s.y,g=s.width,x=s.height;if(a){var b=d.y,j=e.y.apply(b,{position:o});if(Ll(d,"discard")&&!e.y.isInRange(j))return null;var S=[{x:f+g,y:j},{x:f,y:j}];return c==="left"?S.reverse():S}if(n){var _=d.x,T=e.x.apply(_,{position:o});if(Ll(d,"discard")&&!e.x.isInRange(T))return null;var C=[{x:T,y:p+x},{x:T,y:p}];return l==="top"?C.reverse():C}if(i){var P=d.segment,k=P.map(function(E){return e.apply(E,{position:o})});return Ll(d,"discard")&&KTe(k,function(E){return!e.isInRange(E)})?null:k}return null};function nAe(t){var e=t.x,n=t.y,a=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=Rke(),f=uH(i),p=dH(s),g=$ke();if(!d||!g)return null;Bo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=bM({x:f.scale,y:p.scale}),b=Ca(e),j=Ca(n),S=a&&a.length===2,_=tAe(x,b,j,S,g,t.position,f.orientation,p.orientation,t);if(!_)return null;var T=Yke(_,2),C=T[0],P=C.x,k=C.y,E=T[1],I=E.x,L=E.y,$=Ll(t,"hidden")?"url(#".concat(d,")"):void 0,q=$$($$({clipPath:$},zt(t,!0)),{},{x1:P,y1:k,x2:I,y2:L});return Se.createElement(Mn,{className:pn("recharts-reference-line",l)},eAe(o,q),Ra.renderCallByParent(t,Ske({x1:P,y1:k,x2:I,y2:L})))}var CM=function(t){function e(){return zke(this,e),Vke(this,e,arguments)}return Wke(e,t),Uke(e,[{key:"render",value:function(){return Se.createElement(nAe,this.props)}}])}(Se.Component);_M(CM,"displayName","ReferenceLine");_M(CM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function iD(){return iD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},iD.apply(this,arguments)}function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function z$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function q$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z$(Object(n),!0).forEach(function(a){OS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function rAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,mH(a.key),a)}}function iAe(t,e,n){return e&&aAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sAe(t,e,n){return e=vN(e),oAe(t,pH()?Reflect.construct(e,n||[],vN(t).constructor):e.apply(t,n))}function oAe(t,e){if(e&&(Sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lAe(t)}function lAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pH=function(){return!!t})()}function vN(t){return vN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vN(t)}function cAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sD(t,e)}function sD(t,e){return sD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},sD(t,e)}function OS(t,e,n){return e=mH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mH(t){var e=uAe(t,"string");return Sg(e)=="symbol"?e:e+""}function uAe(t,e){if(Sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dAe=function(e){var n=e.x,a=e.y,i=e.xAxis,s=e.yAxis,o=bM({x:i.scale,y:s.scale}),l=o.apply({x:n,y:a},{bandAware:!0});return Ll(e,"discard")&&!o.isInRange(l)?null:l},MS=function(t){function e(){return rAe(this,e),sAe(this,e,arguments)}return cAe(e,t),iAe(e,[{key:"render",value:function(){var a=this.props,i=a.x,s=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,d=Ca(i),f=Ca(s);if(Bo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var p=dAe(this.props);if(!p)return null;var g=p.x,x=p.y,b=this.props,j=b.shape,S=b.className,_=Ll(this.props,"hidden")?"url(#".concat(c,")"):void 0,T=q$(q$({clipPath:_},zt(this.props,!0)),{},{cx:g,cy:x});return Se.createElement(Mn,{className:pn("recharts-reference-dot",S)},e.renderDot(j,T),Ra.renderCallByParent(this.props,{x:g-o,y:x-o,width:2*o,height:2*o}))}}])}(Se.Component);OS(MS,"displayName","ReferenceDot");OS(MS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});OS(MS,"renderDot",function(t,e){var n;return Se.isValidElement(t)?n=Se.cloneElement(t,e):an(t)?n=t(e):n=Se.createElement(Hb,iD({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function oD(){return oD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oD.apply(this,arguments)}function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function U$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function V$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U$(Object(n),!0).forEach(function(a){IS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function hAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,yH(a.key),a)}}function pAe(t,e,n){return e&&fAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mAe(t,e,n){return e=bN(e),gAe(t,gH()?Reflect.construct(e,n||[],bN(t).constructor):e.apply(t,n))}function gAe(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yAe(t)}function yAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gH=function(){return!!t})()}function bN(t){return bN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bN(t)}function xAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lD(t,e)}function lD(t,e){return lD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},lD(t,e)}function IS(t,e,n){return e=yH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yH(t){var e=vAe(t,"string");return _g(e)=="symbol"?e:e+""}function vAe(t,e){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(_g(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bAe=function(e,n,a,i,s){var o=s.x1,l=s.x2,c=s.y1,d=s.y2,f=s.xAxis,p=s.yAxis;if(!f||!p)return null;var g=bM({x:f.scale,y:p.scale}),x={x:e?g.x.apply(o,{position:"start"}):g.x.rangeMin,y:a?g.y.apply(c,{position:"start"}):g.y.rangeMin},b={x:n?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:i?g.y.apply(d,{position:"end"}):g.y.rangeMax};return Ll(s,"discard")&&(!g.isInRange(x)||!g.isInRange(b))?null:rH(x,b)},RS=function(t){function e(){return hAe(this,e),mAe(this,e,arguments)}return xAe(e,t),pAe(e,[{key:"render",value:function(){var a=this.props,i=a.x1,s=a.x2,o=a.y1,l=a.y2,c=a.className,d=a.alwaysShow,f=a.clipPathId;Bo(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Ca(i),g=Ca(s),x=Ca(o),b=Ca(l),j=this.props.shape;if(!p&&!g&&!x&&!b&&!j)return null;var S=bAe(p,g,x,b,this.props);if(!S&&!j)return null;var _=Ll(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Se.createElement(Mn,{className:pn("recharts-reference-area",c)},e.renderRect(j,V$(V$({clipPath:_},zt(this.props,!0)),S)),Ra.renderCallByParent(this.props,S))}}])}(Se.Component);IS(RS,"displayName","ReferenceArea");IS(RS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});IS(RS,"renderRect",function(t,e){var n;return Se.isValidElement(t)?n=Se.cloneElement(t,e):an(t)?n=t(e):n=Se.createElement(xM,oD({},e,{className:"recharts-reference-area-rect"})),n});function xH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var a=[],i=0;i<t.length;i+=e)a.push(t[i]);return a}function jAe(t,e,n){var a={width:t.width+e.width,height:t.height+e.height};return Cke(a,n)}function wAe(t,e,n){var a=n==="width",i=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:a?i:s,end:a?i+o:s+l}:{start:a?i+o:s+l,end:a?i:s}}function jN(t,e,n,a,i){if(t*e<t*a||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-a)>=0&&t*(e+t*s/2-i)<=0}function NAe(t,e){return xH(t,e+1)}function SAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=e.start,l=e.end,c=0,d=1,f=o,p=function(){var b=a==null?void 0:a[c];if(b===void 0)return{v:xH(a,d)};var j=c,S,_=function(){return S===void 0&&(S=n(b,j)),S},T=b.coordinate,C=c===0||jN(t,T,_,f,l);C||(c=0,f=o,d+=1),C&&(f=T+t*(_()/2+i),c+=d)},g;d<=s.length;)if(g=p(),g)return g.v;return[]}function pb(t){"@babel/helpers - typeof";return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(t)}function H$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function di(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H$(Object(n),!0).forEach(function(a){_Ae(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function _Ae(t,e,n){return e=CAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CAe(t){var e=TAe(t,"string");return pb(e)=="symbol"?e:e+""}function TAe(t,e){if(pb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(pb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=s.length,l=e.start,c=e.end,d=function(g){var x=s[g],b,j=function(){return b===void 0&&(b=n(x,g)),b};if(g===o-1){var S=t*(x.coordinate+t*j()/2-c);s[g]=x=di(di({},x),{},{tickCoord:S>0?x.coordinate-S*t:x.coordinate})}else s[g]=x=di(di({},x),{},{tickCoord:x.coordinate});var _=jN(t,x.tickCoord,j,l,c);_&&(c=x.tickCoord-t*(j()/2+i),s[g]=di(di({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return s}function AAe(t,e,n,a,i,s){var o=(a||[]).slice(),l=o.length,c=e.start,d=e.end;if(s){var f=a[l-1],p=n(f,l-1),g=t*(f.coordinate+t*p/2-d);o[l-1]=f=di(di({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate});var x=jN(t,f.tickCoord,function(){return p},c,d);x&&(d=f.tickCoord-t*(p/2+i),o[l-1]=di(di({},f),{},{isShow:!0}))}for(var b=s?l-1:l,j=function(T){var C=o[T],P,k=function(){return P===void 0&&(P=n(C,T)),P};if(T===0){var E=t*(C.coordinate-t*k()/2-c);o[T]=C=di(di({},C),{},{tickCoord:E<0?C.coordinate-E*t:C.coordinate})}else o[T]=C=di(di({},C),{},{tickCoord:C.coordinate});var I=jN(t,C.tickCoord,k,c,d);I&&(c=C.tickCoord+t*(k()/2+i),o[T]=di(di({},C),{},{isShow:!0}))},S=0;S<b;S++)j(S);return o}function TM(t,e,n){var a=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,f=t.unit,p=t.angle;if(!i||!i.length||!a)return[];if(Nt(c)||jd.isSsr)return NAe(i,typeof c=="number"&&Nt(c)?c:0);var g=[],x=l==="top"||l==="bottom"?"width":"height",b=f&&x==="width"?jv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},j=function(C,P){var k=an(d)?d(C.value,P):C.value;return x==="width"?jAe(jv(k,{fontSize:e,letterSpacing:n}),b,p):jv(k,{fontSize:e,letterSpacing:n})[x]},S=i.length>=2?Ri(i[1].coordinate-i[0].coordinate):1,_=wAe(s,S,x);return c==="equidistantPreserveStart"?SAe(S,_,j,i,o):(c==="preserveStart"||c==="preserveStartEnd"?g=AAe(S,_,j,i,o,c==="preserveStartEnd"):g=kAe(S,_,j,i,o),g.filter(function(T){return T.isShow}))}var EAe=["viewBox"],PAe=["viewBox"],DAe=["ticks"];function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Dm.apply(this,arguments)}function G$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function wa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(n),!0).forEach(function(a){kM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function EA(t,e){if(t==null)return{};var n=OAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function OAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function MAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,bH(a.key),a)}}function IAe(t,e,n){return e&&W$(t.prototype,e),n&&W$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RAe(t,e,n){return e=wN(e),LAe(t,vH()?Reflect.construct(e,n||[],wN(t).constructor):e.apply(t,n))}function LAe(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FAe(t)}function FAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vH=function(){return!!t})()}function wN(t){return wN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wN(t)}function $Ae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cD(t,e)}function cD(t,e){return cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},cD(t,e)}function kM(t,e,n){return e=bH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bH(t){var e=BAe(t,"string");return Cg(e)=="symbol"?e:e+""}function BAe(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kg=function(t){function e(n){var a;return MAe(this,e),a=RAe(this,e,[n]),a.state={fontSize:"",letterSpacing:""},a}return $Ae(e,t),IAe(e,[{key:"shouldComponentUpdate",value:function(a,i){var s=a.viewBox,o=EA(a,EAe),l=this.props,c=l.viewBox,d=EA(l,PAe);return!Fm(s,c)||!Fm(o,d)||!Fm(i,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var i=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,f=i.tickSize,p=i.mirror,g=i.tickMargin,x,b,j,S,_,T,C=p?-1:1,P=a.tickSize||f,k=Nt(a.tickCoord)?a.tickCoord:a.coordinate;switch(d){case"top":x=b=a.coordinate,S=o+ +!p*c,j=S-C*P,T=j-C*g,_=k;break;case"left":j=S=a.coordinate,b=s+ +!p*l,x=b-C*P,_=x-C*g,T=k;break;case"right":j=S=a.coordinate,b=s+ +p*l,x=b+C*P,_=x+C*g,T=k;break;default:x=b=a.coordinate,S=o+ +p*c,j=S+C*P,T=j+C*g,_=k;break}return{line:{x1:x,y1:j,x2:b,y2:S},tick:{x:_,y:T}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.orientation,d=a.mirror,f=a.axisLine,p=wa(wa(wa({},zt(this.props,!1)),zt(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var g=+(c==="top"&&!d||c==="bottom"&&d);p=wa(wa({},p),{},{x1:i,y1:s+g*l,x2:i+o,y2:s+g*l})}else{var x=+(c==="left"&&!d||c==="right"&&d);p=wa(wa({},p),{},{x1:i+x*o,y1:s,x2:i+x*o,y2:s+l})}return Se.createElement("line",Dm({},p,{className:pn("recharts-cartesian-axis-line",Is(f,"className"))}))}},{key:"renderTicks",value:function(a,i,s){var o=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,p=l.tickFormatter,g=l.unit,x=TM(wa(wa({},this.props),{},{ticks:a}),i,s),b=this.getTickTextAnchor(),j=this.getTickVerticalAnchor(),S=zt(this.props,!1),_=zt(f,!1),T=wa(wa({},S),{},{fill:"none"},zt(c,!1)),C=x.map(function(P,k){var E=o.getTickLineCoord(P),I=E.line,L=E.tick,$=wa(wa(wa(wa({textAnchor:b,verticalAnchor:j},S),{},{stroke:"none",fill:d},_),L),{},{index:k,payload:P,visibleTicksCount:x.length,tickFormatter:p});return Se.createElement(Mn,Dm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},Cf(o.props,P,k)),c&&Se.createElement("line",Dm({},T,I,{className:pn("recharts-cartesian-axis-tick-line",Is(c,"className"))})),f&&e.renderTickItem(f,$,"".concat(an(p)?p(P.value,k):P.value).concat(g||"")))});return Se.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var a=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,f=i.hide;if(f)return null;var p=this.props,g=p.ticks,x=EA(p,DAe),b=g;return an(c)&&(b=g&&g.length>0?c(this.props):c(x)),o<=0||l<=0||!b||!b.length?null:Se.createElement(Mn,{className:pn("recharts-cartesian-axis",d),ref:function(S){a.layerReference=S}},s&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),Ra.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,i,s){var o,l=pn(i.className,"recharts-cartesian-axis-tick-value");return Se.isValidElement(a)?o=Se.cloneElement(a,wa(wa({},i),{},{className:l})):an(a)?o=a(wa(wa({},i),{},{className:l})):o=Se.createElement(Tf,Dm({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(v.Component);kM(Kg,"displayName","CartesianAxis");kM(Kg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var zAe=["x1","y1","x2","y2","key"],qAe=["offset"];function Pf(t){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(t)}function K$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(n),!0).forEach(function(a){UAe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function UAe(t,e,n){return e=VAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VAe(t){var e=HAe(t,"string");return Pf(e)=="symbol"?e:e+""}function HAe(t,e){if(Pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Pf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ef.apply(this,arguments)}function Y$(t,e){if(t==null)return{};var n=GAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function GAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var WAe=function(e){var n=e.fill;if(!n||n==="none")return null;var a=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return Se.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function jH(t,e){var n;if(Se.isValidElement(t))n=Se.cloneElement(t,e);else if(an(t))n=t(e);else{var a=e.x1,i=e.y1,s=e.x2,o=e.y2,l=e.key,c=Y$(e,zAe),d=zt(c,!1);d.offset;var f=Y$(d,qAe);n=Se.createElement("line",ef({},f,{x1:a,y1:i,x2:s,y2:o,fill:"none",key:l}))}return n}function KAe(t){var e=t.x,n=t.width,a=t.horizontal,i=a===void 0?!0:a,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var d=fi(fi({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return jH(i,d)});return Se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function YAe(t){var e=t.y,n=t.height,a=t.vertical,i=a===void 0?!0:a,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var d=fi(fi({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return jH(i,d)});return Se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function QAe(t){var e=t.horizontalFill,n=t.fillOpacity,a=t.x,i=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var f=l.map(function(g){return Math.round(g+i-i)}).sort(function(g,x){return g-x});i!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var b=!f[x+1],j=b?i+o-g:f[x+1]-g;if(j<=0)return null;var S=x%e.length;return Se.createElement("rect",{key:"react-".concat(x),y:g,x:a,height:j,width:s,stroke:"none",fill:e[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function XAe(t){var e=t.vertical,n=e===void 0?!0:e,a=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!n||!a||!a.length)return null;var f=d.map(function(g){return Math.round(g+s-s)}).sort(function(g,x){return g-x});s!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var b=!f[x+1],j=b?s+l-g:f[x+1]-g;if(j<=0)return null;var S=x%a.length;return Se.createElement("rect",{key:"react-".concat(x),x:g,y:o,width:j,height:c,stroke:"none",fill:a[S],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var JAe=function(e,n){var a=e.xAxis,i=e.width,s=e.height,o=e.offset;return wV(TM(fi(fi(fi({},Kg.defaultProps),a),{},{ticks:Cc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},ZAe=function(e,n){var a=e.yAxis,i=e.width,s=e.height,o=e.offset;return wV(TM(fi(fi(fi({},Kg.defaultProps),a),{},{ticks:Cc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},jm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function mb(t){var e,n,a,i,s,o,l=NM(),c=SM(),d=Bke(),f=fi(fi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:jm.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:jm.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:jm.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:jm.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:jm.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:jm.verticalFill,x:Nt(t.x)?t.x:d.left,y:Nt(t.y)?t.y:d.top,width:Nt(t.width)?t.width:d.width,height:Nt(t.height)?t.height:d.height}),p=f.x,g=f.y,x=f.width,b=f.height,j=f.syncWithTicks,S=f.horizontalValues,_=f.verticalValues,T=Lke(),C=Fke();if(!Nt(x)||x<=0||!Nt(b)||b<=0||!Nt(p)||p!==+p||!Nt(g)||g!==+g)return null;var P=f.verticalCoordinatesGenerator||JAe,k=f.horizontalCoordinatesGenerator||ZAe,E=f.horizontalPoints,I=f.verticalPoints;if((!E||!E.length)&&an(k)){var L=S&&S.length,$=k({yAxis:C?fi(fi({},C),{},{ticks:L?S:C.ticks}):void 0,width:l,height:c,offset:d},L?!0:j);Bo(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Pf($),"]")),Array.isArray($)&&(E=$)}if((!I||!I.length)&&an(P)){var q=_&&_.length,F=P({xAxis:T?fi(fi({},T),{},{ticks:q?_:T.ticks}):void 0,width:l,height:c,offset:d},q?!0:j);Bo(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Pf(F),"]")),Array.isArray(F)&&(I=F)}return Se.createElement("g",{className:"recharts-cartesian-grid"},Se.createElement(WAe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Se.createElement(KAe,ef({},f,{offset:d,horizontalPoints:E,xAxis:T,yAxis:C})),Se.createElement(YAe,ef({},f,{offset:d,verticalPoints:I,xAxis:T,yAxis:C})),Se.createElement(QAe,ef({},f,{horizontalPoints:E})),Se.createElement(XAe,ef({},f,{verticalPoints:I})))}mb.displayName="CartesianGrid";var eEe=["type","layout","connectNulls","ref"],tEe=["key"];function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function Q$(t,e){if(t==null)return{};var n=nEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function nEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function Tv(){return Tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Tv.apply(this,arguments)}function X$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X$(Object(n),!0).forEach(function(a){Ro(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function wm(t){return sEe(t)||iEe(t)||aEe(t)||rEe()}function rEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aEe(t,e){if(t){if(typeof t=="string")return uD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uD(t,e)}}function iEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sEe(t){if(Array.isArray(t))return uD(t)}function uD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function oEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,NH(a.key),a)}}function lEe(t,e,n){return e&&J$(t.prototype,e),n&&J$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cEe(t,e,n){return e=NN(e),uEe(t,wH()?Reflect.construct(e,n||[],NN(t).constructor):e.apply(t,n))}function uEe(t,e){if(e&&(Tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dEe(t)}function dEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wH=function(){return!!t})()}function NN(t){return NN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NN(t)}function hEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dD(t,e)}function dD(t,e){return dD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},dD(t,e)}function Ro(t,e,n){return e=NH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NH(t){var e=fEe(t,"string");return Tg(e)=="symbol"?e:e+""}function fEe(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Tg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gb=function(t){function e(){var n;oEe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=cEe(this,e,[].concat(i)),Ro(n,"state",{isAnimationFinished:!0,totalLength:0}),Ro(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Ro(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(_,T){return _+T});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),p=o%d,g=l-o,x=[],b=0,j=0;b<c.length;j+=c[b],++b)if(j+c[b]>p){x=[].concat(wm(c.slice(0,b)),[p-j]);break}var S=x.length%2===0?[0,g]:[g];return[].concat(wm(e.repeat(c,f)),wm(x),S).map(function(_){return"".concat(_,"px")}).join(", ")}),Ro(n,"id",If("recharts-line-")),Ro(n,"pathRef",function(o){n.mainCurve=o}),Ro(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ro(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return hEe(e,t),lEe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,d=s.layout,f=s.children,p=Rs(f,Vb);if(!p)return null;var g=function(j,S){return{x:j.x,y:j.y,value:j.value,errorVal:ca(j.payload,S)}},x={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Se.createElement(Mn,x,p.map(function(b){return Se.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:g})}))}},{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,f=l.dataKey,p=zt(this.props,!1),g=zt(c,!0),x=d.map(function(j,S){var _=Cs(Cs(Cs({key:"dot-".concat(S),r:3},p),g),{},{index:S,cx:j.x,cy:j.y,value:j.value,dataKey:f,payload:j.payload,points:d});return e.renderDotItem(c,_)}),b={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Se.createElement(Mn,Tv({className:"recharts-line-dots",key:"dots"},b),x)}},{key:"renderCurveStatically",value:function(a,i,s,o){var l=this.props,c=l.type,d=l.layout,f=l.connectNulls;l.ref;var p=Q$(l,eEe),g=Cs(Cs(Cs({},zt(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:a},o),{},{type:c,layout:d,connectNulls:f});return Se.createElement(pf,Tv({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,b=o.animateNewValues,j=o.width,S=o.height,_=this.state,T=_.prevPoints,C=_.totalLength;return Se.createElement(qo,{begin:f,duration:p,isActive:d,easing:g,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(P){var k=P.t;if(T){var E=T.length/l.length,I=l.map(function(H,V){var X=Math.floor(V*E);if(T[X]){var Y=T[X],z=_a(Y.x,H.x),G=_a(Y.y,H.y);return Cs(Cs({},H),{},{x:z(k),y:G(k)})}if(b){var ie=_a(j*2,H.x),W=_a(S/2,H.y);return Cs(Cs({},H),{},{x:ie(k),y:W(k)})}return Cs(Cs({},H),{},{x:H.x,y:H.y})});return s.renderCurveStatically(I,a,i)}var L=_a(0,C),$=L(k),q;if(c){var F="".concat(c).split(/[,\s]+/gim).map(function(H){return parseFloat(H)});q=s.getStrokeDasharray($,C,F)}else q=s.generateSimpleStrokeDasharray(C,$);return s.renderCurveStatically(l,a,i,{strokeDasharray:q})})}},{key:"renderCurve",value:function(a,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,d=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!d&&f>0||!kf(d,o))?this.renderCurveWithAnimation(a,i):this.renderCurveStatically(o,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,f=i.yAxis,p=i.top,g=i.left,x=i.width,b=i.height,j=i.isAnimationActive,S=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=pn("recharts-line",c),P=d&&d.allowDataOverflow,k=f&&f.allowDataOverflow,E=P||k,I=hn(S)?this.id:S,L=(a=zt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},$=L.r,q=$===void 0?3:$,F=L.strokeWidth,H=F===void 0?2:F,V=SU(o)?o:{},X=V.clipDot,Y=X===void 0?!0:X,z=q*2+H;return Se.createElement(Mn,{className:C},P||k?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(I)},Se.createElement("rect",{x:P?g:g-x/2,y:k?p:p-b/2,width:P?x:x*2,height:k?b:b*2})),!Y&&Se.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Se.createElement("rect",{x:g-z/2,y:p-z/2,width:x+z,height:b+z}))):null,!T&&this.renderCurve(E,I),this.renderErrorBar(E,I),(T||o)&&this.renderDots(E,Y,I),(!j||_)&&Rl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:i.curPoints}:a.points!==i.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,i){for(var s=a.length%2!==0?[].concat(wm(a),[0]):a,o=[],l=0;l<i;++l)o=[].concat(wm(o),wm(s));return o}},{key:"renderDotItem",value:function(a,i){var s;if(Se.isValidElement(a))s=Se.cloneElement(a,i);else if(an(a))s=a(i);else{var o=i.key,l=Q$(i,tEe),c=pn("recharts-line-dot",typeof a!="boolean"?a.className:"");s=Se.createElement(Hb,Tv({key:o},l,{className:c}))}return s}}])}(v.PureComponent);Ro(Gb,"displayName","Line");Ro(Gb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!jd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ro(Gb,"getComposedData",function(t){var e=t.props,n=t.xAxis,a=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,f=e.layout,p=c.map(function(g,x){var b=ca(g,o);return f==="horizontal"?{x:eN({axis:n,ticks:i,bandSize:l,entry:g,index:x}),y:hn(b)?null:a.scale(b),value:b,payload:g}:{x:hn(b)?null:n.scale(b),y:eN({axis:a,ticks:s,bandSize:l,entry:g,index:x}),value:b,payload:g}});return Cs({points:p,layout:f},d)});var pEe=["layout","type","stroke","connectNulls","isRange","ref"],mEe=["key"],SH;function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function _H(t,e){if(t==null)return{};var n=gEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function gEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function tf(){return tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},tf.apply(this,arguments)}function Z$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Gu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(n),!0).forEach(function(a){Ol(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function yEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eB(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,TH(a.key),a)}}function xEe(t,e,n){return e&&eB(t.prototype,e),n&&eB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vEe(t,e,n){return e=SN(e),bEe(t,CH()?Reflect.construct(e,n||[],SN(t).constructor):e.apply(t,n))}function bEe(t,e){if(e&&(kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jEe(t)}function jEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CH=function(){return!!t})()}function SN(t){return SN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SN(t)}function wEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hD(t,e)}function hD(t,e){return hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},hD(t,e)}function Ol(t,e,n){return e=TH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TH(t){var e=NEe(t,"string");return kg(e)=="symbol"?e:e+""}function NEe(t,e){if(kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(kg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Cd=function(t){function e(){var n;yEe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=vEe(this,e,[].concat(i)),Ol(n,"state",{isAnimationFinished:!0}),Ol(n,"id",If("recharts-area-")),Ol(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),an(o)&&o()}),Ol(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),an(o)&&o()}),n}return wEe(e,t),xEe(e,[{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,f=c.points,p=c.dataKey,g=zt(this.props,!1),x=zt(d,!0),b=f.map(function(S,_){var T=Gu(Gu(Gu({key:"dot-".concat(_),r:3},g),x),{},{index:_,cx:S.x,cy:S.y,dataKey:p,value:S.value,payload:S.payload,points:f});return e.renderDotItem(d,T)}),j={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Se.createElement(Mn,tf({className:"recharts-area-dots"},j),b)}},{key:"renderHorizontalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,d=o[o.length-1].x,f=a*Math.abs(c-d),p=id(o.map(function(g){return g.y||0}));return Nt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(id(s.map(function(g){return g.y||0})),p)),Nt(p)?Se.createElement("rect",{x:c<d?c:c-f,y:0,width:f,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,d=o[o.length-1].y,f=a*Math.abs(c-d),p=id(o.map(function(g){return g.x||0}));return Nt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(id(s.map(function(g){return g.x||0})),p)),Nt(p)?Se.createElement("rect",{x:0,y:c<d?c:c-f,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(a){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,i,s,o){var l=this.props,c=l.layout,d=l.type,f=l.stroke,p=l.connectNulls,g=l.isRange;l.ref;var x=_H(l,pEe);return Se.createElement(Mn,{clipPath:s?"url(#clipPath-".concat(o,")"):null},Se.createElement(pf,tf({},zt(x,!0),{points:a,connectNulls:p,type:d,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&Se.createElement(pf,tf({},zt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:a})),f!=="none"&&g&&Se.createElement(pf,tf({},zt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,b=this.state,j=b.prevPoints,S=b.prevBaseLine;return Se.createElement(qo,{begin:f,duration:p,isActive:d,easing:g,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var T=_.t;if(j){var C=j.length/l.length,P=l.map(function(L,$){var q=Math.floor($*C);if(j[q]){var F=j[q],H=_a(F.x,L.x),V=_a(F.y,L.y);return Gu(Gu({},L),{},{x:H(T),y:V(T)})}return L}),k;if(Nt(c)&&typeof c=="number"){var E=_a(S,c);k=E(T)}else if(hn(c)||Ug(c)){var I=_a(S,0);k=I(T)}else k=c.map(function(L,$){var q=Math.floor($*C);if(S[q]){var F=S[q],H=_a(F.x,L.x),V=_a(F.y,L.y);return Gu(Gu({},L),{},{x:H(T),y:V(T)})}return L});return s.renderAreaStatically(P,k,a,i)}return Se.createElement(Mn,null,Se.createElement("defs",null,Se.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(T))),Se.createElement(Mn,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,a,i)))})}},{key:"renderArea",value:function(a,i){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,d=this.state,f=d.prevPoints,p=d.prevBaseLine,g=d.totalLength;return c&&o&&o.length&&(!f&&g>0||!kf(f,o)||!kf(p,l))?this.renderAreaWithAnimation(a,i):this.renderAreaStatically(o,l,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,d=i.top,f=i.left,p=i.xAxis,g=i.yAxis,x=i.width,b=i.height,j=i.isAnimationActive,S=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=pn("recharts-area",c),P=p&&p.allowDataOverflow,k=g&&g.allowDataOverflow,E=P||k,I=hn(S)?this.id:S,L=(a=zt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},$=L.r,q=$===void 0?3:$,F=L.strokeWidth,H=F===void 0?2:F,V=SU(o)?o:{},X=V.clipDot,Y=X===void 0?!0:X,z=q*2+H;return Se.createElement(Mn,{className:C},P||k?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(I)},Se.createElement("rect",{x:P?f:f-x/2,y:k?d:d-b/2,width:P?x:x*2,height:k?b:b*2})),!Y&&Se.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Se.createElement("rect",{x:f-z/2,y:d-z/2,width:x+z,height:b+z}))):null,T?null:this.renderArea(E,I),(o||T)&&this.renderDots(E,Y,I),(!j||_)&&Rl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:a.points!==i.curPoints||a.baseLine!==i.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(v.PureComponent);SH=Cd;Ol(Cd,"displayName","Area");Ol(Cd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!jd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ol(Cd,"getBaseValue",function(t,e,n,a){var i=t.layout,s=t.baseValue,o=e.props.baseValue,l=o??s;if(Nt(l)&&typeof l=="number")return l;var c=i==="horizontal"?a:n,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),p=Math.min(d[0],d[1]);return l==="dataMin"?p:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Ol(Cd,"getComposedData",function(t){var e=t.props,n=t.item,a=t.xAxis,i=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,x=e.layout,b=d&&d.length,j=SH.getBaseValue(e,n,a,i),S=x==="horizontal",_=!1,T=p.map(function(P,k){var E;b?E=d[f+k]:(E=ca(P,c),Array.isArray(E)?_=!0:E=[j,E]);var I=E[1]==null||b&&ca(P,c)==null;return S?{x:eN({axis:a,ticks:s,bandSize:l,entry:P,index:k}),y:I?null:i.scale(E[1]),value:E,payload:P}:{x:I?null:a.scale(E[1]),y:eN({axis:i,ticks:o,bandSize:l,entry:P,index:k}),value:E,payload:P}}),C;return b||_?C=T.map(function(P){var k=Array.isArray(P.value)?P.value[0]:null;return S?{x:P.x,y:k!=null&&P.y!=null?i.scale(k):null}:{x:k!=null?a.scale(k):null,y:P.y}}):C=S?i.scale(j):a.scale(j),Gu({points:T,baseLine:C,layout:x,isRange:_},g)});Ol(Cd,"renderDotItem",function(t,e){var n;if(Se.isValidElement(t))n=Se.cloneElement(t,e);else if(an(t))n=t(e);else{var a=pn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=_H(e,mEe);n=Se.createElement(Hb,tf({},s,{key:i,className:a}))}return n});function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function SEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Ee(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,EH(a.key),a)}}function CEe(t,e,n){return e&&_Ee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TEe(t,e,n){return e=_N(e),kEe(t,kH()?Reflect.construct(e,n||[],_N(t).constructor):e.apply(t,n))}function kEe(t,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AEe(t)}function AEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kH=function(){return!!t})()}function _N(t){return _N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_N(t)}function EEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fD(t,e)}function fD(t,e){return fD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},fD(t,e)}function AH(t,e,n){return e=EH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EH(t){var e=PEe(t,"string");return Ag(e)=="symbol"?e:e+""}function PEe(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ag(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pD(){return pD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pD.apply(this,arguments)}function DEe(t){var e=t.xAxisId,n=NM(),a=SM(),i=uH(e);return i==null?null:v.createElement(Kg,pD({},i,{className:pn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return Cc(o,!0)}}))}var zc=function(t){function e(){return SEe(this,e),TEe(this,e,arguments)}return EEe(e,t),CEe(e,[{key:"render",value:function(){return v.createElement(DEe,this.props)}}])}(v.Component);AH(zc,"displayName","XAxis");AH(zc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function OEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,OH(a.key),a)}}function IEe(t,e,n){return e&&MEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function REe(t,e,n){return e=CN(e),LEe(t,PH()?Reflect.construct(e,n||[],CN(t).constructor):e.apply(t,n))}function LEe(t,e){if(e&&(Eg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FEe(t)}function FEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PH=function(){return!!t})()}function CN(t){return CN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CN(t)}function $Ee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mD(t,e)}function mD(t,e){return mD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},mD(t,e)}function DH(t,e,n){return e=OH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OH(t){var e=BEe(t,"string");return Eg(e)=="symbol"?e:e+""}function BEe(t,e){if(Eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function gD(){return gD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},gD.apply(this,arguments)}var zEe=function(e){var n=e.yAxisId,a=NM(),i=SM(),s=dH(n);return s==null?null:v.createElement(Kg,gD({},s,{className:pn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:i},ticksGenerator:function(l){return Cc(l,!0)}}))},qc=function(t){function e(){return OEe(this,e),REe(this,e,arguments)}return $Ee(e,t),IEe(e,[{key:"render",value:function(){return v.createElement(zEe,this.props)}}])}(v.Component);DH(qc,"displayName","YAxis");DH(qc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function tB(t){return HEe(t)||VEe(t)||UEe(t)||qEe()}function qEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UEe(t,e){if(t){if(typeof t=="string")return yD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yD(t,e)}}function VEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HEe(t){if(Array.isArray(t))return yD(t)}function yD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var xD=function(e,n,a,i,s){var o=Rs(e,CM),l=Rs(e,MS),c=[].concat(tB(o),tB(l)),d=Rs(e,RS),f="".concat(i,"Id"),p=i[0],g=n;if(c.length&&(g=c.reduce(function(j,S){if(S.props[f]===a&&Ll(S.props,"extendDomain")&&Nt(S.props[p])){var _=S.props[p];return[Math.min(j[0],_),Math.max(j[1],_)]}return j},g)),d.length){var x="".concat(p,"1"),b="".concat(p,"2");g=d.reduce(function(j,S){if(S.props[f]===a&&Ll(S.props,"extendDomain")&&Nt(S.props[x])&&Nt(S.props[b])){var _=S.props[x],T=S.props[b];return[Math.min(j[0],_,T),Math.max(j[1],_,T)]}return j},g)}return s&&s.length&&(g=s.reduce(function(j,S){return Nt(S)?[Math.min(j[0],S),Math.max(j[1],S)]:j},g)),g},PA={exports:{}},nB;function GEe(){return nB||(nB=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,p||c,g),b=n?n+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,g,x,b){var j=n?n+d:d;if(!this._events[j])return!1;var S=this._events[j],_=arguments.length,T,C;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,g),!0;case 5:return S.fn.call(S.context,f,p,g,x),!0;case 6:return S.fn.call(S.context,f,p,g,x,b),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];S.fn.apply(S.context,T)}else{var P=S.length,k;for(C=0;C<P;C++)switch(S[C].once&&this.removeListener(d,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];S[C].fn.apply(S[C].context,T)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,g){var x=n?n+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,S=[],_=b.length;j<_;j++)(b[j].fn!==f||g&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(PA)),PA.exports}var WEe=GEe();const KEe=Wn(WEe);var DA=new KEe,OA="recharts.syncMouseEvents";function gb(t){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(t)}function YEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,MH(a.key),a)}}function XEe(t,e,n){return e&&QEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MA(t,e,n){return e=MH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MH(t){var e=JEe(t,"string");return gb(e)=="symbol"?e:e+""}function JEe(t,e){if(gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(gb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ZEe=function(){function t(){YEe(this,t),MA(this,"activeIndex",0),MA(this,"coordinateList",[]),MA(this,"layout","horizontal")}return XEe(t,[{key:"setDetails",value:function(n){var a,i=n.coordinateList,s=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,f=n.offset,p=f===void 0?null:f,g=n.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(a=s??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((a=window)===null||a===void 0?void 0:a.scrollY)||0,p=s+c+d,g=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:g})}}}])}();function ePe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var a=t==null?void 0:t[0],i=t==null?void 0:t[1];if(a&&i&&Nt(a)&&Nt(i))return!0}return!1}function tPe(t,e,n,a){var i=a/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?a:n.width-1,height:t==="horizontal"?n.height-1:a}}function IH(t){var e=t.cx,n=t.cy,a=t.radius,i=t.startAngle,s=t.endAngle,o=Rr(e,n,a,i),l=Rr(e,n,a,s);return{points:[o,l],cx:e,cy:n,radius:a,startAngle:i,endAngle:s}}function nPe(t,e,n){var a,i,s,o;if(t==="horizontal")a=e.x,s=a,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,a=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,f=e.outerRadius,p=e.angle,g=Rr(l,c,d,p),x=Rr(l,c,f,p);a=g.x,i=g.y,s=x.x,o=x.y}else return IH(e);return[{x:a,y:i},{x:s,y:o}]}function yb(t){"@babel/helpers - typeof";return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yb(t)}function rB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function $j(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(n),!0).forEach(function(a){rPe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function rPe(t,e,n){return e=aPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aPe(t){var e=iPe(t,"string");return yb(e)=="symbol"?e:e+""}function iPe(t,e){if(yb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(yb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sPe(t){var e,n,a=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,f=t.tooltipAxisBandSize,p=t.layout,g=t.chartName,x=(e=a.props.cursor)!==null&&e!==void 0?e:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!x||!s||!o||g!=="ScatterChart"&&i!=="axis")return null;var b,j=pf;if(g==="ScatterChart")b=o,j=y2e;else if(g==="BarChart")b=tPe(p,o,c,f),j=xM;else if(p==="radial"){var S=IH(o),_=S.cx,T=S.cy,C=S.radius,P=S.startAngle,k=S.endAngle;b={cx:_,cy:T,startAngle:P,endAngle:k,innerRadius:C,outerRadius:C},j=OV}else b={points:nPe(p,o,c)},j=pf;var E=$j($j($j($j({stroke:"#ccc",pointerEvents:"none"},c),b),zt(x,!1)),{},{payload:l,payloadIndex:d,className:pn("recharts-tooltip-cursor",x.className)});return v.isValidElement(x)?v.cloneElement(x,E):v.createElement(j,E)}var oPe=["item"],lPe=["children","className","width","height","style","compact","title","desc"];function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function Om(){return Om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Om.apply(this,arguments)}function aB(t,e){return dPe(t)||uPe(t,e)||LH(t,e)||cPe()}function cPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function dPe(t){if(Array.isArray(t))return t}function iB(t,e){if(t==null)return{};var n=hPe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function hPe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function fPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pPe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,FH(a.key),a)}}function mPe(t,e,n){return e&&pPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gPe(t,e,n){return e=TN(e),yPe(t,RH()?Reflect.construct(e,n||[],TN(t).constructor):e.apply(t,n))}function yPe(t,e){if(e&&(Pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xPe(t)}function xPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RH=function(){return!!t})()}function TN(t){return TN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TN(t)}function vPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vD(t,e)}function vD(t,e){return vD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},vD(t,e)}function Dg(t){return wPe(t)||jPe(t)||LH(t)||bPe()}function bPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LH(t,e){if(t){if(typeof t=="string")return bD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bD(t,e)}}function jPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wPe(t){if(Array.isArray(t))return bD(t)}function bD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function sB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sB(Object(n),!0).forEach(function(a){nn(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nn(t,e,n){return e=FH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FH(t){var e=NPe(t,"string");return Pg(e)=="symbol"?e:e+""}function NPe(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SPe={xAxis:["bottom","top"],yAxis:["left","right"]},_Pe={width:"100%",height:"100%"},$H={x:0,y:0};function Bj(t){return t}var CPe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},TPe=function(e,n,a,i){var s=n.find(function(f){return f&&f.index===a});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=i.radius;return lt(lt(lt({},i),Rr(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,d=i.angle;return lt(lt(lt({},i),Rr(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return $H},LS=function(e,n){var a=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(a??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Dg(l),Dg(d)):l},[]);return o.length>0?o:e&&e.length&&Nt(i)&&Nt(s)?e.slice(i,s+1):[]};function BH(t){return t==="number"?[0,"auto"]:void 0}var jD=function(e,n,a,i){var s=e.graphicalItems,o=e.tooltipAxis,l=LS(n,e);return a<0||!s||!s.length||a>=l.length?null:s.reduce(function(c,d){var f,p=(f=d.props.data)!==null&&f!==void 0?f:n;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=a&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var g;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;g=Aw(x,o.dataKey,i)}else g=p&&p[a]||l[a];return g?[].concat(Dg(c),[TV(d,g)]):c},[])},oB=function(e,n,a,i){var s=i||{x:e.chartX,y:e.chartY},o=CPe(s,a),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,f=qNe(o,l,d,c);if(f>=0&&d){var p=d[f]&&d[f].value,g=jD(e,n,f,p),x=TPe(a,l,f,s);return{activeTooltipIndex:f,activeLabel:p,activePayload:g,activeCoordinate:x}}return null},kPe=function(e,n){var a=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,g=e.stackOffset,x=jV(f,s);return a.reduce(function(b,j){var S,_=j.type.defaultProps!==void 0?lt(lt({},j.type.defaultProps),j.props):j.props,T=_.type,C=_.dataKey,P=_.allowDataOverflow,k=_.allowDuplicatedCategory,E=_.scale,I=_.ticks,L=_.includeHidden,$=_[o];if(b[$])return b;var q=LS(e.data,{graphicalItems:i.filter(function(je){var K,Ie=o in je.props?je.props[o]:(K=je.type.defaultProps)===null||K===void 0?void 0:K[o];return Ie===$}),dataStartIndex:c,dataEndIndex:d}),F=q.length,H,V,X;ePe(_.domain,P,T)&&(H=MP(_.domain,null,P),x&&(T==="number"||E!=="auto")&&(X=Nv(q,C,"category")));var Y=BH(T);if(!H||H.length===0){var z,G=(z=_.domain)!==null&&z!==void 0?z:Y;if(C){if(H=Nv(q,C,T),T==="category"&&x){var ie=Rye(H);k&&ie?(V=H,H=fN(0,F)):k||(H=i8(G,H,j).reduce(function(je,K){return je.indexOf(K)>=0?je:[].concat(Dg(je),[K])},[]))}else if(T==="category")k?H=H.filter(function(je){return je!==""&&!hn(je)}):H=i8(G,H,j).reduce(function(je,K){return je.indexOf(K)>=0||K===""||hn(K)?je:[].concat(Dg(je),[K])},[]);else if(T==="number"){var W=WNe(q,i.filter(function(je){var K,Ie,Ue=o in je.props?je.props[o]:(K=je.type.defaultProps)===null||K===void 0?void 0:K[o],ze="hide"in je.props?je.props.hide:(Ie=je.type.defaultProps)===null||Ie===void 0?void 0:Ie.hide;return Ue===$&&(L||!ze)}),C,s,f);W&&(H=W)}x&&(T==="number"||E!=="auto")&&(X=Nv(q,C,"category"))}else x?H=fN(0,F):l&&l[$]&&l[$].hasStack&&T==="number"?H=g==="expand"?[0,1]:CV(l[$].stackGroups,c,d):H=bV(q,i.filter(function(je){var K=o in je.props?je.props[o]:je.type.defaultProps[o],Ie="hide"in je.props?je.props.hide:je.type.defaultProps.hide;return K===$&&(L||!Ie)}),T,f,!0);if(T==="number")H=xD(p,H,$,s,I),G&&(H=MP(G,H,P));else if(T==="category"&&G){var B=G,ce=H.every(function(je){return B.indexOf(je)>=0});ce&&(H=B)}}return lt(lt({},b),{},nn({},$,lt(lt({},_),{},{axisType:s,domain:H,categoricalDomain:X,duplicateDomain:V,originalDomain:(S=_.domain)!==null&&S!==void 0?S:Y,isCategorical:x,layout:f})))},{})},APe=function(e,n){var a=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,g=LS(e.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:d}),x=g.length,b=jV(f,s),j=-1;return a.reduce(function(S,_){var T=_.type.defaultProps!==void 0?lt(lt({},_.type.defaultProps),_.props):_.props,C=T[o],P=BH("number");if(!S[C]){j++;var k;return b?k=fN(0,x):l&&l[C]&&l[C].hasStack?(k=CV(l[C].stackGroups,c,d),k=xD(p,k,C,s)):(k=MP(P,bV(g,a.filter(function(E){var I,L,$=o in E.props?E.props[o]:(I=E.type.defaultProps)===null||I===void 0?void 0:I[o],q="hide"in E.props?E.props.hide:(L=E.type.defaultProps)===null||L===void 0?void 0:L.hide;return $===C&&!q}),"number",f),i.defaultProps.allowDataOverflow),k=xD(p,k,C,s)),lt(lt({},S),{},nn({},C,lt(lt({axisType:s},i.defaultProps),{},{hide:!0,orientation:Is(SPe,"".concat(s,".").concat(j%2),null),domain:k,originalDomain:P,isCategorical:b,layout:f})))}return S},{})},EPe=function(e,n){var a=n.axisType,i=a===void 0?"xAxis":a,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.children,p="".concat(i,"Id"),g=Rs(f,s),x={};return g&&g.length?x=kPe(e,{axes:g,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(x=APe(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),x},PPe=function(e){var n=Ku(e),a=Cc(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:HO(a,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:tN(n,a)}},lB=function(e){var n=e.children,a=e.defaultShowTooltip,i=ks(n,jg),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},DPe=function(e){return!e||!e.length?!1:e.some(function(n){var a=Ec(n&&n.type);return a&&a.indexOf("Bar")>=0})},cB=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},OPe=function(e,n){var a=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,d=a.width,f=a.height,p=a.children,g=a.margin||{},x=ks(p,jg),b=ks(p,Pc),j=Object.keys(c).reduce(function(k,E){var I=c[E],L=I.orientation;return!I.mirror&&!I.hide?lt(lt({},k),{},nn({},L,k[L]+I.width)):k},{left:g.left||0,right:g.right||0}),S=Object.keys(o).reduce(function(k,E){var I=o[E],L=I.orientation;return!I.mirror&&!I.hide?lt(lt({},k),{},nn({},L,Is(k,"".concat(L))+I.height)):k},{top:g.top||0,bottom:g.bottom||0}),_=lt(lt({},S),j),T=_.bottom;x&&(_.bottom+=x.props.height||jg.defaultProps.height),b&&n&&(_=HNe(_,i,a,n));var C=d-_.left-_.right,P=f-_.top-_.bottom;return lt(lt({brushBottom:T},_),{},{width:Math.max(C,0),height:Math.max(P,0)})},MPe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},FS=function(e){var n=e.chartName,a=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,f=e.formatAxisMap,p=e.defaultProps,g=function(_,T){var C=T.graphicalItems,P=T.stackGroups,k=T.offset,E=T.updateId,I=T.dataStartIndex,L=T.dataEndIndex,$=_.barSize,q=_.layout,F=_.barGap,H=_.barCategoryGap,V=_.maxBarSize,X=cB(q),Y=X.numericAxisName,z=X.cateAxisName,G=DPe(C),ie=[];return C.forEach(function(W,B){var ce=LS(_.data,{graphicalItems:[W],dataStartIndex:I,dataEndIndex:L}),je=W.type.defaultProps!==void 0?lt(lt({},W.type.defaultProps),W.props):W.props,K=je.dataKey,Ie=je.maxBarSize,Ue=je["".concat(Y,"Id")],ze=je["".concat(z,"Id")],Le={},be=c.reduce(function(xe,ne){var oe=T["".concat(ne.axisType,"Map")],_e=je["".concat(ne.axisType,"Id")];oe&&oe[_e]||ne.axisType==="zAxis"||Ef();var De=oe[_e];return lt(lt({},xe),{},nn(nn({},ne.axisType,De),"".concat(ne.axisType,"Ticks"),Cc(De)))},Le),Ce=be[z],Ae=be["".concat(z,"Ticks")],me=P&&P[Ue]&&P[Ue].hasStack&&nSe(W,P[Ue].stackGroups),ye=Ec(W.type).indexOf("Bar")>=0,le=tN(Ce,Ae),J=[],ae=G&&UNe({barSize:$,stackGroups:P,totalSize:MPe(be,z)});if(ye){var ue,ee,Ne=hn(Ie)?V:Ie,Te=(ue=(ee=tN(Ce,Ae,!0))!==null&&ee!==void 0?ee:Ne)!==null&&ue!==void 0?ue:0;J=VNe({barGap:F,barCategoryGap:H,bandSize:Te!==le?Te:le,sizeList:ae[ze],maxBarSize:Ne}),Te!==le&&(J=J.map(function(xe){return lt(lt({},xe),{},{position:lt(lt({},xe.position),{},{offset:xe.position.offset-Te/2})})}))}var Fe=W&&W.type&&W.type.getComposedData;Fe&&ie.push({props:lt(lt({},Fe(lt(lt({},be),{},{displayedData:ce,props:_,dataKey:K,item:W,bandSize:le,barPosition:J,offset:k,stackedData:me,layout:q,dataStartIndex:I,dataEndIndex:L}))),{},nn(nn(nn({key:W.key||"item-".concat(B)},Y,be[Y]),z,be[z]),"animationId",E)),childIndex:Kye(W,_.children),item:W})}),ie},x=function(_,T){var C=_.props,P=_.dataStartIndex,k=_.dataEndIndex,E=_.updateId;if(!b5({props:C}))return null;var I=C.children,L=C.layout,$=C.stackOffset,q=C.data,F=C.reverseStackOrder,H=cB(L),V=H.numericAxisName,X=H.cateAxisName,Y=Rs(I,a),z=eSe(q,Y,"".concat(V,"Id"),"".concat(X,"Id"),$,F),G=c.reduce(function(je,K){var Ie="".concat(K.axisType,"Map");return lt(lt({},je),{},nn({},Ie,EPe(C,lt(lt({},K),{},{graphicalItems:Y,stackGroups:K.axisType===V&&z,dataStartIndex:P,dataEndIndex:k}))))},{}),ie=OPe(lt(lt({},G),{},{props:C,graphicalItems:Y}),T==null?void 0:T.legendBBox);Object.keys(G).forEach(function(je){G[je]=f(C,G[je],ie,je.replace("Map",""),n)});var W=G["".concat(X,"Map")],B=PPe(W),ce=g(C,lt(lt({},G),{},{dataStartIndex:P,dataEndIndex:k,updateId:E,graphicalItems:Y,stackGroups:z,offset:ie}));return lt(lt({formattedGraphicalItems:ce,graphicalItems:Y,offset:ie,stackGroups:z},B),G)},b=function(S){function _(T){var C,P,k;return fPe(this,_),k=gPe(this,_,[T]),nn(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),nn(k,"accessibilityManager",new ZEe),nn(k,"handleLegendBBoxUpdate",function(E){if(E){var I=k.state,L=I.dataStartIndex,$=I.dataEndIndex,q=I.updateId;k.setState(lt({legendBBox:E},x({props:k.props,dataStartIndex:L,dataEndIndex:$,updateId:q},lt(lt({},k.state),{},{legendBBox:E}))))}}),nn(k,"handleReceiveSyncEvent",function(E,I,L){if(k.props.syncId===E){if(L===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(I)}}),nn(k,"handleBrushChange",function(E){var I=E.startIndex,L=E.endIndex;if(I!==k.state.dataStartIndex||L!==k.state.dataEndIndex){var $=k.state.updateId;k.setState(function(){return lt({dataStartIndex:I,dataEndIndex:L},x({props:k.props,dataStartIndex:I,dataEndIndex:L,updateId:$},k.state))}),k.triggerSyncEvent({dataStartIndex:I,dataEndIndex:L})}}),nn(k,"handleMouseEnter",function(E){var I=k.getMouseInfo(E);if(I){var L=lt(lt({},I),{},{isTooltipActive:!0});k.setState(L),k.triggerSyncEvent(L);var $=k.props.onMouseEnter;an($)&&$(L,E)}}),nn(k,"triggeredAfterMouseMove",function(E){var I=k.getMouseInfo(E),L=I?lt(lt({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(L),k.triggerSyncEvent(L);var $=k.props.onMouseMove;an($)&&$(L,E)}),nn(k,"handleItemMouseEnter",function(E){k.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),nn(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),nn(k,"handleMouseMove",function(E){E.persist(),k.throttleTriggeredAfterMouseMove(E)}),nn(k,"handleMouseLeave",function(E){k.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};k.setState(I),k.triggerSyncEvent(I);var L=k.props.onMouseLeave;an(L)&&L(I,E)}),nn(k,"handleOuterEvent",function(E){var I=Wye(E),L=Is(k.props,"".concat(I));if(I&&an(L)){var $,q;/.*touch.*/i.test(I)?q=k.getMouseInfo(E.changedTouches[0]):q=k.getMouseInfo(E),L(($=q)!==null&&$!==void 0?$:{},E)}}),nn(k,"handleClick",function(E){var I=k.getMouseInfo(E);if(I){var L=lt(lt({},I),{},{isTooltipActive:!0});k.setState(L),k.triggerSyncEvent(L);var $=k.props.onClick;an($)&&$(L,E)}}),nn(k,"handleMouseDown",function(E){var I=k.props.onMouseDown;if(an(I)){var L=k.getMouseInfo(E);I(L,E)}}),nn(k,"handleMouseUp",function(E){var I=k.props.onMouseUp;if(an(I)){var L=k.getMouseInfo(E);I(L,E)}}),nn(k,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),nn(k,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.handleMouseDown(E.changedTouches[0])}),nn(k,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.handleMouseUp(E.changedTouches[0])}),nn(k,"handleDoubleClick",function(E){var I=k.props.onDoubleClick;if(an(I)){var L=k.getMouseInfo(E);I(L,E)}}),nn(k,"handleContextMenu",function(E){var I=k.props.onContextMenu;if(an(I)){var L=k.getMouseInfo(E);I(L,E)}}),nn(k,"triggerSyncEvent",function(E){k.props.syncId!==void 0&&DA.emit(OA,k.props.syncId,E,k.eventEmitterSymbol)}),nn(k,"applySyncEvent",function(E){var I=k.props,L=I.layout,$=I.syncMethod,q=k.state.updateId,F=E.dataStartIndex,H=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)k.setState(lt({dataStartIndex:F,dataEndIndex:H},x({props:k.props,dataStartIndex:F,dataEndIndex:H,updateId:q},k.state)));else if(E.activeTooltipIndex!==void 0){var V=E.chartX,X=E.chartY,Y=E.activeTooltipIndex,z=k.state,G=z.offset,ie=z.tooltipTicks;if(!G)return;if(typeof $=="function")Y=$(ie,E);else if($==="value"){Y=-1;for(var W=0;W<ie.length;W++)if(ie[W].value===E.activeLabel){Y=W;break}}var B=lt(lt({},G),{},{x:G.left,y:G.top}),ce=Math.min(V,B.x+B.width),je=Math.min(X,B.y+B.height),K=ie[Y]&&ie[Y].value,Ie=jD(k.state,k.props.data,Y),Ue=ie[Y]?{x:L==="horizontal"?ie[Y].coordinate:ce,y:L==="horizontal"?je:ie[Y].coordinate}:$H;k.setState(lt(lt({},E),{},{activeLabel:K,activeCoordinate:Ue,activePayload:Ie,activeTooltipIndex:Y}))}else k.setState(E)}),nn(k,"renderCursor",function(E){var I,L=k.state,$=L.isTooltipActive,q=L.activeCoordinate,F=L.activePayload,H=L.offset,V=L.activeTooltipIndex,X=L.tooltipAxisBandSize,Y=k.getTooltipEventType(),z=(I=E.props.active)!==null&&I!==void 0?I:$,G=k.props.layout,ie=E.key||"_recharts-cursor";return Se.createElement(sPe,{key:ie,activeCoordinate:q,activePayload:F,activeTooltipIndex:V,chartName:n,element:E,isActive:z,layout:G,offset:H,tooltipAxisBandSize:X,tooltipEventType:Y})}),nn(k,"renderPolarAxis",function(E,I,L){var $=Is(E,"type.axisType"),q=Is(k.state,"".concat($,"Map")),F=E.type.defaultProps,H=F!==void 0?lt(lt({},F),E.props):E.props,V=q&&q[H["".concat($,"Id")]];return v.cloneElement(E,lt(lt({},V),{},{className:pn($,V.className),key:E.key||"".concat(I,"-").concat(L),ticks:Cc(V,!0)}))}),nn(k,"renderPolarGrid",function(E){var I=E.props,L=I.radialLines,$=I.polarAngles,q=I.polarRadius,F=k.state,H=F.radiusAxisMap,V=F.angleAxisMap,X=Ku(H),Y=Ku(V),z=Y.cx,G=Y.cy,ie=Y.innerRadius,W=Y.outerRadius;return v.cloneElement(E,{polarAngles:Array.isArray($)?$:Cc(Y,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(q)?q:Cc(X,!0).map(function(B){return B.coordinate}),cx:z,cy:G,innerRadius:ie,outerRadius:W,key:E.key||"polar-grid",radialLines:L})}),nn(k,"renderLegend",function(){var E=k.state.formattedGraphicalItems,I=k.props,L=I.children,$=I.width,q=I.height,F=k.props.margin||{},H=$-(F.left||0)-(F.right||0),V=xV({children:L,formattedGraphicalItems:E,legendWidth:H,legendContent:d});if(!V)return null;var X=V.item,Y=iB(V,oPe);return v.cloneElement(X,lt(lt({},Y),{},{chartWidth:$,chartHeight:q,margin:F,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),nn(k,"renderTooltip",function(){var E,I=k.props,L=I.children,$=I.accessibilityLayer,q=ks(L,Mi);if(!q)return null;var F=k.state,H=F.isTooltipActive,V=F.activeCoordinate,X=F.activePayload,Y=F.activeLabel,z=F.offset,G=(E=q.props.active)!==null&&E!==void 0?E:H;return v.cloneElement(q,{viewBox:lt(lt({},z),{},{x:z.left,y:z.top}),active:G,label:Y,payload:G?X:[],coordinate:V,accessibilityLayer:$})}),nn(k,"renderBrush",function(E){var I=k.props,L=I.margin,$=I.data,q=k.state,F=q.offset,H=q.dataStartIndex,V=q.dataEndIndex,X=q.updateId;return v.cloneElement(E,{key:E.key||"_recharts-brush",onChange:Ij(k.handleBrushChange,E.props.onChange),data:$,x:Nt(E.props.x)?E.props.x:F.left,y:Nt(E.props.y)?E.props.y:F.top+F.height+F.brushBottom-(L.bottom||0),width:Nt(E.props.width)?E.props.width:F.width,startIndex:H,endIndex:V,updateId:"brush-".concat(X)})}),nn(k,"renderReferenceElement",function(E,I,L){if(!E)return null;var $=k,q=$.clipPathId,F=k.state,H=F.xAxisMap,V=F.yAxisMap,X=F.offset,Y=E.type.defaultProps||{},z=E.props,G=z.xAxisId,ie=G===void 0?Y.xAxisId:G,W=z.yAxisId,B=W===void 0?Y.yAxisId:W;return v.cloneElement(E,{key:E.key||"".concat(I,"-").concat(L),xAxis:H[ie],yAxis:V[B],viewBox:{x:X.left,y:X.top,width:X.width,height:X.height},clipPathId:q})}),nn(k,"renderActivePoints",function(E){var I=E.item,L=E.activePoint,$=E.basePoint,q=E.childIndex,F=E.isRange,H=[],V=I.props.key,X=I.item.type.defaultProps!==void 0?lt(lt({},I.item.type.defaultProps),I.item.props):I.item.props,Y=X.activeDot,z=X.dataKey,G=lt(lt({index:q,dataKey:z,cx:L.x,cy:L.y,r:4,fill:yM(I.item),strokeWidth:2,stroke:"#fff",payload:L.payload,value:L.value},zt(Y,!1)),Ew(Y));return H.push(_.renderActiveDot(Y,G,"".concat(V,"-activePoint-").concat(q))),$?H.push(_.renderActiveDot(Y,lt(lt({},G),{},{cx:$.x,cy:$.y}),"".concat(V,"-basePoint-").concat(q))):F&&H.push(null),H}),nn(k,"renderGraphicChild",function(E,I,L){var $=k.filterFormatItem(E,I,L);if(!$)return null;var q=k.getTooltipEventType(),F=k.state,H=F.isTooltipActive,V=F.tooltipAxis,X=F.activeTooltipIndex,Y=F.activeLabel,z=k.props.children,G=ks(z,Mi),ie=$.props,W=ie.points,B=ie.isRange,ce=ie.baseLine,je=$.item.type.defaultProps!==void 0?lt(lt({},$.item.type.defaultProps),$.item.props):$.item.props,K=je.activeDot,Ie=je.hide,Ue=je.activeBar,ze=je.activeShape,Le=!!(!Ie&&H&&G&&(K||Ue||ze)),be={};q!=="axis"&&G&&G.props.trigger==="click"?be={onClick:Ij(k.handleItemMouseEnter,E.props.onClick)}:q!=="axis"&&(be={onMouseLeave:Ij(k.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:Ij(k.handleItemMouseEnter,E.props.onMouseEnter)});var Ce=v.cloneElement(E,lt(lt({},$.props),be));function Ae(ne){return typeof V.dataKey=="function"?V.dataKey(ne.payload):null}if(Le)if(X>=0){var me,ye;if(V.dataKey&&!V.allowDuplicatedCategory){var le=typeof V.dataKey=="function"?Ae:"payload.".concat(V.dataKey.toString());me=Aw(W,le,Y),ye=B&&ce&&Aw(ce,le,Y)}else me=W==null?void 0:W[X],ye=B&&ce&&ce[X];if(ze||Ue){var J=E.props.activeIndex!==void 0?E.props.activeIndex:X;return[v.cloneElement(E,lt(lt(lt({},$.props),be),{},{activeIndex:J})),null,null]}if(!hn(me))return[Ce].concat(Dg(k.renderActivePoints({item:$,activePoint:me,basePoint:ye,childIndex:X,isRange:B})))}else{var ae,ue=(ae=k.getItemByXY(k.state.activeCoordinate))!==null&&ae!==void 0?ae:{graphicalItem:Ce},ee=ue.graphicalItem,Ne=ee.item,Te=Ne===void 0?E:Ne,Fe=ee.childIndex,xe=lt(lt(lt({},$.props),be),{},{activeIndex:Fe});return[v.cloneElement(Te,xe),null,null]}return B?[Ce,null,null]:[Ce,null]}),nn(k,"renderCustomized",function(E,I,L){return v.cloneElement(E,lt(lt({key:"recharts-customized-".concat(L)},k.props),k.state))}),nn(k,"renderMap",{CartesianGrid:{handler:Bj,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:Bj},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:Bj},YAxis:{handler:Bj},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((C=T.id)!==null&&C!==void 0?C:If("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=y7(k.triggeredAfterMouseMove,(P=T.throttleDelay)!==null&&P!==void 0?P:1e3/60),k.state={},k}return vPe(_,S),mPe(_,[{key:"componentDidMount",value:function(){var C,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,P=C.children,k=C.data,E=C.height,I=C.layout,L=ks(P,Mi);if(L){var $=L.props.defaultIndex;if(!(typeof $!="number"||$<0||$>this.state.tooltipTicks.length-1)){var q=this.state.tooltipTicks[$]&&this.state.tooltipTicks[$].value,F=jD(this.state,k,$,q),H=this.state.tooltipTicks[$].coordinate,V=(this.state.offset.top+E)/2,X=I==="horizontal",Y=X?{x:H,y:V}:{y:H,x:V},z=this.state.formattedGraphicalItems.find(function(ie){var W=ie.item;return W.type.name==="Scatter"});z&&(Y=lt(lt({},Y),z.props.points[$].tooltipPosition),F=z.props.points[$].tooltipPayload);var G={activeTooltipIndex:$,isTooltipActive:!0,activeLabel:q,activePayload:F,activeCoordinate:Y};this.setState(G),this.renderCursor(L),this.accessibilityManager.setIndex($)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var k,E;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(C){nP([ks(C.children,Mi)],[ks(this.props.children,Mi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=ks(this.props.children,Mi);if(C&&typeof C.props.shared=="boolean"){var P=C.props.shared?"axis":"item";return l.indexOf(P)>=0?P:s}return s}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var P=this.container,k=P.getBoundingClientRect(),E=M0e(k),I={chartX:Math.round(C.pageX-E.left),chartY:Math.round(C.pageY-E.top)},L=k.width/P.offsetWidth||1,$=this.inRange(I.chartX,I.chartY,L);if(!$)return null;var q=this.state,F=q.xAxisMap,H=q.yAxisMap,V=this.getTooltipEventType(),X=oB(this.state,this.props.data,this.props.layout,$);if(V!=="axis"&&F&&H){var Y=Ku(F).scale,z=Ku(H).scale,G=Y&&Y.invert?Y.invert(I.chartX):null,ie=z&&z.invert?z.invert(I.chartY):null;return lt(lt({},I),{},{xValue:G,yValue:ie},X)}return X?lt(lt({},I),X):null}},{key:"inRange",value:function(C,P){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,I=C/k,L=P/k;if(E==="horizontal"||E==="vertical"){var $=this.state.offset,q=I>=$.left&&I<=$.left+$.width&&L>=$.top&&L<=$.top+$.height;return q?{x:I,y:L}:null}var F=this.state,H=F.angleAxisMap,V=F.radiusAxisMap;if(H&&V){var X=Ku(H);return l8({x:I,y:L},X)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,P=this.getTooltipEventType(),k=ks(C,Mi),E={};k&&P==="axis"&&(k.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Ew(this.props,this.handleOuterEvent);return lt(lt({},I),E)}},{key:"addListener",value:function(){DA.on(OA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){DA.removeListener(OA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,P,k){for(var E=this.state.formattedGraphicalItems,I=0,L=E.length;I<L;I++){var $=E[I];if($.item===C||$.props.key===C.key||P===Ec($.item.type)&&k===$.childIndex)return $}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,P=this.state.offset,k=P.left,E=P.top,I=P.height,L=P.width;return Se.createElement("defs",null,Se.createElement("clipPath",{id:C},Se.createElement("rect",{x:k,y:E,height:I,width:L})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(P,k){var E=aB(k,2),I=E[0],L=E[1];return lt(lt({},P),{},nn({},I,L.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(P,k){var E=aB(k,2),I=E[0],L=E[1];return lt(lt({},P),{},nn({},I,L.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[C])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(C){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[C])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(C){var P=this.state,k=P.formattedGraphicalItems,E=P.activeItem;if(k&&k.length)for(var I=0,L=k.length;I<L;I++){var $=k[I],q=$.props,F=$.item,H=F.type.defaultProps!==void 0?lt(lt({},F.type.defaultProps),F.props):F.props,V=Ec(F.type);if(V==="Bar"){var X=(q.data||[]).find(function(ie){return XCe(C,ie)});if(X)return{graphicalItem:$,payload:X}}else if(V==="RadialBar"){var Y=(q.data||[]).find(function(ie){return l8(C,ie)});if(Y)return{graphicalItem:$,payload:Y}}else if(ES($,E)||PS($,E)||ub($,E)){var z=jTe({graphicalItem:$,activeTooltipItem:E,itemData:H.data}),G=H.activeIndex===void 0?z:H.activeIndex;return{graphicalItem:lt(lt({},$),{},{childIndex:G}),payload:ub($,E)?H.data[z]:$.props.data[z]}}}return null}},{key:"render",value:function(){var C=this;if(!b5(this))return null;var P=this.props,k=P.children,E=P.className,I=P.width,L=P.height,$=P.style,q=P.compact,F=P.title,H=P.desc,V=iB(P,lPe),X=zt(V,!1);if(q)return Se.createElement(L$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Se.createElement(aP,Om({},X,{width:I,height:L,title:F,desc:H}),this.renderClipPath(),w5(k,this.renderMap)));if(this.props.accessibilityLayer){var Y,z;X.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,X.role=(z=this.props.role)!==null&&z!==void 0?z:"application",X.onKeyDown=function(ie){C.accessibilityManager.keyboardEvent(ie)},X.onFocus=function(){C.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return Se.createElement(L$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Se.createElement("div",Om({className:pn("recharts-wrapper",E),style:lt({position:"relative",cursor:"default",width:I,height:L},$)},G,{ref:function(W){C.container=W}}),Se.createElement(aP,Om({},X,{width:I,height:L,title:F,desc:H,style:_Pe}),this.renderClipPath(),w5(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);nn(b,"displayName",n),nn(b,"defaultProps",lt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),nn(b,"getDerivedStateFromProps",function(S,_){var T=S.dataKey,C=S.data,P=S.children,k=S.width,E=S.height,I=S.layout,L=S.stackOffset,$=S.margin,q=_.dataStartIndex,F=_.dataEndIndex;if(_.updateId===void 0){var H=lB(S);return lt(lt(lt({},H),{},{updateId:0},x(lt(lt({props:S},H),{},{updateId:0}),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:E,prevLayout:I,prevStackOffset:L,prevMargin:$,prevChildren:P})}if(T!==_.prevDataKey||C!==_.prevData||k!==_.prevWidth||E!==_.prevHeight||I!==_.prevLayout||L!==_.prevStackOffset||!Fm($,_.prevMargin)){var V=lB(S),X={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},Y=lt(lt({},oB(_,C,I)),{},{updateId:_.updateId+1}),z=lt(lt(lt({},V),X),Y);return lt(lt(lt({},z),x(lt({props:S},z),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:E,prevLayout:I,prevStackOffset:L,prevMargin:$,prevChildren:P})}if(!nP(P,_.prevChildren)){var G,ie,W,B,ce=ks(P,jg),je=ce&&(G=(ie=ce.props)===null||ie===void 0?void 0:ie.startIndex)!==null&&G!==void 0?G:q,K=ce&&(W=(B=ce.props)===null||B===void 0?void 0:B.endIndex)!==null&&W!==void 0?W:F,Ie=je!==q||K!==F,Ue=!hn(C),ze=Ue&&!Ie?_.updateId:_.updateId+1;return lt(lt({updateId:ze},x(lt(lt({props:S},_),{},{updateId:ze,dataStartIndex:je,dataEndIndex:K}),_)),{},{prevChildren:P,dataStartIndex:je,dataEndIndex:K})}return null}),nn(b,"renderActiveDot",function(S,_,T){var C;return v.isValidElement(S)?C=v.cloneElement(S,_):an(S)?C=S(_):C=Se.createElement(Hb,_),Se.createElement(Mn,{className:"recharts-active-dot",key:T},C)});var j=v.forwardRef(function(_,T){return Se.createElement(b,Om({},_,{ref:T}))});return j.displayName=b.displayName,j},IPe=FS({chartName:"LineChart",GraphicalChild:Gb,axisComponents:[{axisType:"xAxis",AxisComp:zc},{axisType:"yAxis",AxisComp:qc}],formatAxisMap:vM}),zH=FS({chartName:"BarChart",GraphicalChild:_d,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:zc},{axisType:"yAxis",AxisComp:qc}],formatAxisMap:vM}),qH=FS({chartName:"PieChart",GraphicalChild:ql,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:AS},{axisType:"radiusAxis",AxisComp:TS}],formatAxisMap:hSe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),RPe=FS({chartName:"AreaChart",GraphicalChild:Cd,axisComponents:[{axisType:"xAxis",AxisComp:zc},{axisType:"yAxis",AxisComp:qc}],formatAxisMap:vM});const AM=({widget:t,className:e="",autoHideEmptyColumns:n=!1})=>{const a=Lt(),i=ds(),[s,o]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState([]),[p,g]=v.useState(!1),[x,b]=v.useState(null),[j,S]=v.useState(""),[_,T]=v.useState(!1);v.useEffect(()=>{const E=async()=>{var I,L,$,q,F,H;g(!0),b(null);try{const V=t.dataSource,X=((I=t.config)==null?void 0:I.filters)&&Array.isArray(t.config.filters)&&t.config.filters.length>0;let Y=[];if(X&&(V.startsWith("api:")||V.startsWith("table:"))){const z=await se("/api/dashboards/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:V,filters:t.config.filters})});if(z.ok){const G=await z.json();Y=Array.isArray(G)?G:G.data||[],o(Y)}else throw new Error("Failed to fetch filtered data")}else{let z="";const G={"api:patients":{url:"/api/patients?limit=50",dataKey:"patients"},"api:drugs":{url:"/api/drugs?limit=50",dataKey:"drugs"},"api:recurring-medications":{url:"/api/recurring-medications?limit=50"},"api:pharmacy-orders":{url:"/api/pharmacy/orders?limit=50",dataKey:"orders"},"api:lab-orders":{url:"/api/lab/orders?limit=50",dataKey:"orders"},"api:lab-tests":{url:"/api/lab/tests?limit=50",dataKey:"tests"},"api:queue":{url:"/api/queue?limit=50",dataKey:"queue"},"api:bills":{url:"/api/bills?limit=100",dataKey:"bills"}};if(G[V])z=G[V].url;else if(V.startsWith("join:"))z=`/api/dashboards/joined-data?join=${V.split(":")[1]}&limit=50`;else if(V.startsWith("dynamic:")){const W=V.split(":"),B=W[1],ce=W[2],je=(($=(L=t.config)==null?void 0:L.primaryColumns)==null?void 0:$.join(","))||"",K=((F=(q=t.config)==null?void 0:q.relatedColumns)==null?void 0:F.join(","))||"";z=`/api/dashboards/dynamic-join?primary=${B}&related=${ce}&primaryCols=${je}&relatedCols=${K}&limit=50`}else V.startsWith("table:")?z=`/api/custom-tables/${V.split(":")[1]}/records?limit=50`:z=`/api/${V.replace("api:","")}?limit=50`;const ie=await se(z);if(ie.ok){const W=await ie.json();Array.isArray(W)?Y=W:(H=G[V])!=null&&H.dataKey&&W[G[V].dataKey]?Y=W[G[V].dataKey]:W.data?Y=W.data:Y=Object.values(W).find(ce=>Array.isArray(ce))||[],o(Y)}else throw new Error(`Failed to fetch data from ${V}`)}if(t.type==="table"&&n&&Y.length>0){const G=(t.config.columns||[...new Set(Y.flatMap(ie=>Object.keys(ie)))]).filter(ie=>Y.some(W=>{const B=W[ie];return B!=null&&B!==""&&(Array.isArray(B)?B.length>0:!0)}));f(G)}else f(t.config.columns||[])}catch(V){b(V.message)}finally{g(!1)}};t.dataSource&&E()},[t.dataSource,t.config]),v.useEffect(()=>{var I;if(!s||!Array.isArray(s)){c(s);return}let E=[...s];if((I=t.config)!=null&&I.filters&&Array.isArray(t.config.filters)&&(E=E.filter(L=>t.config.filters.every($=>{const q=L[$.field],F=$.value;switch($.operator){case"equals":return q==F;case"neq":return q!=F;case"contains":return String(q).toLowerCase().includes(String(F).toLowerCase());case"gt":return q>F;case"lt":return q<F;case"gte":return q>=F;case"lte":return q<=F;default:return!0}}))),j){const L=j.toLowerCase();E=E.filter($=>Object.values($).some(q=>String(q).toLowerCase().includes(L)))}c(E)},[s,t.config,j]);const C=E=>{E&&(i.prefetchQuery({queryKey:Gt.patients.context(E),queryFn:async()=>{const I=await se(`/api/patients/${E}/context`);if(!I.ok)throw new Error("Failed to fetch patient context");return I.json()},staleTime:1e3*60*5}),i.prefetchQuery({queryKey:Gt.patientDebts.balance(E),queryFn:async()=>{const I=await se(`/api/patient-debts/${E}/balance`);if(!I.ok)throw new Error("Failed to fetch patient debt");return I.json()},staleTime:1e3*60}),i.prefetchQuery({queryKey:Gt.queue.latest(E),queryFn:async()=>{const I=await se(`/api/queue/patient/${E}/latest`);if(!I.ok){if(I.status===404)return null;throw new Error("Failed to fetch queue status")}return I.json()},staleTime:1e3*5}))},P=()=>{var I,L,$;if(p)return r.jsxs("div",{className:"widget-loading",children:[r.jsx(zX,{className:"spin"})," Loading..."]});if(x)return r.jsxs("div",{className:"widget-error",children:["Error: ",x]});const E=l||[];if(t.type==="stat"){const q=Array.isArray(E)?E.length:0;return r.jsxs("div",{className:"widget-stat",children:[r.jsx("div",{className:"stat-value",children:q}),r.jsx("div",{className:"stat-label",children:((I=t.config)==null?void 0:I.label)||"Total Records"})]})}if(t.type==="chart"){if(!Array.isArray(E)||E.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const{chartType:q="bar",xAxisKey:F="name",dataKey:H="value"}=t.config,V=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return r.jsx("div",{style:{width:"100%",height:350,minHeight:200},children:r.jsx(iw,{width:"100%",height:"100%",children:q==="line"?r.jsxs(IPe,{data:E,children:[r.jsx(mb,{strokeDasharray:"3 3"}),r.jsx(zc,{dataKey:F}),r.jsx(qc,{}),r.jsx(Mi,{}),r.jsx(Pc,{}),r.jsx(Gb,{type:"monotone",dataKey:H,stroke:"#8884d8",activeDot:{r:8}})]}):q==="pie"?r.jsxs(qH,{children:[r.jsx(ql,{data:E,cx:"50%",cy:"50%",labelLine:!1,label:({name:X,percent:Y})=>`${X} ${(Y*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:H,nameKey:F,children:E.map((X,Y)=>r.jsx($b,{fill:V[Y%V.length]},`cell-${Y}`))}),r.jsx(Mi,{})]}):r.jsxs(zH,{data:E,children:[r.jsx(mb,{strokeDasharray:"3 3"}),r.jsx(zc,{dataKey:F}),r.jsx(qc,{}),r.jsx(Mi,{}),r.jsx(Pc,{}),r.jsx(_d,{dataKey:H,fill:"#82ca9d"})]})})})}if(t.type==="table"){if(!Array.isArray(E)||E.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const F=(d.length>0?d:((L=t.config)==null?void 0:L.columns)||(E[0]?Object.keys(E[0]).slice(0,5):[])).map(Y=>({key:Y,label:Y.replace(/_/g," ").replace(/\b\w/g,z=>z.toUpperCase()),editable:!1})),H=async Y=>{try{const z=t.dataSource;if(z.startsWith("table:")){const G=z.split(":")[1];for(const ie of Y)ie.id&&await se(`/api/custom-tables/${G}/records/${ie.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:ie})})}else alert("Changes saved locally. Built-in table edits require specific API integration.")}catch(z){console.error("Error saving data:",z),alert("Failed to save changes")}};if(E.length<=10){const Y=(($=t.config)==null?void 0:$.columns)||Object.keys(E[0]).filter(G=>!G.startsWith("_")&&G!=="id"),z=G=>{const ie=G.patient_id||G.patientId;ie&&a(`/dashboard/edit-complaint/patient/${ie}`)};return r.jsx("div",{className:"widget-detail-cards",children:E.map((G,ie)=>{const W=G.patient_id||G.patientId,B=!!W;return r.jsxs("div",{className:`detail-card ${B?"clickable":""}`,onClick:B?()=>z(G):void 0,onMouseEnter:()=>B&&C(W),style:B?{cursor:"pointer"}:void 0,children:[r.jsxs("div",{className:"detail-card-header",children:[r.jsx("span",{className:"detail-card-title",children:G.name||G.patient_name||G.title||G.brand_name||`Record ${ie+1}`}),G.token&&r.jsxs("span",{className:"detail-card-badge",children:["Token #",G.token]}),G.status&&r.jsx("span",{className:`detail-card-status status-${G.status.toLowerCase()}`,children:G.status})]}),r.jsx("div",{className:"detail-card-fields",children:Y.map(ce=>{const je=G[ce];if(je==null||je===""||ce==="name"||ce==="title")return null;const K=ce.replace(/_/g," ").replace(/\b\w/g,Ue=>Ue.toUpperCase()),Ie=typeof je=="object"?JSON.stringify(je):String(je);return r.jsxs("div",{className:"detail-field",children:[r.jsx("span",{className:"detail-field-label",children:K}),r.jsx("span",{className:"detail-field-value",children:Ie})]},ce)})})]},G.id||ie)})})}const V=Y=>{const z=Y.patient_id||Y.patientId;z&&a(`/dashboard/edit-complaint/patient/${z}`)},X=Y=>{const z=Y.patient_id||Y.patientId;z&&C(z)};return r.jsxs("div",{className:"widget-table-container",children:[r.jsxs("div",{className:"widget-table-search",children:[r.jsx(In,{size:14}),r.jsx("input",{type:"text",placeholder:"Search...",value:j,onChange:Y=>S(Y.target.value)})]}),r.jsx(Rb,{columns:F,data:E,editable:!0,showRowNumbers:!0,title:"",onSave:H,onRowClick:V,onRowHover:X})]})}return r.jsx("div",{children:"Unsupported widget type"})},k=r.jsxs("div",{className:`dashboard-widget ${e}`,children:[r.jsxs("div",{className:"widget-header",children:[r.jsx("h3",{children:t.title}),r.jsx("button",{className:"widget-expand-btn",onClick:()=>T(!0),title:"Expand",children:r.jsx(Gz,{size:14})})]}),r.jsx("div",{className:"widget-content",children:P()})]});return r.jsxs(r.Fragment,{children:[k,_&&r.jsx("div",{className:"widget-modal-overlay",onClick:()=>T(!1),children:r.jsxs("div",{className:"widget-modal-content",onClick:E=>E.stopPropagation(),children:[r.jsxs("div",{className:"widget-modal-header",children:[r.jsx("h2",{children:t.title}),r.jsx("button",{onClick:()=>T(!1),className:"widget-modal-close",children:r.jsx(Ft,{size:20})})]}),r.jsx("div",{className:"widget-modal-body",children:P()})]})})]})},LPe=({isOpen:t,onClose:e,title:n,widgets:a,onSave:i})=>{const[s,o]=v.useState(!1),[l,c]=v.useState(n),[d,f]=v.useState(""),[p,g]=v.useState(!1);if(!t)return null;const x=async()=>{if(!(!i||!l.trim())){g(!0);try{await i(l,d),o(!1),e()}catch(b){console.error("Failed to save dashboard:",b),alert("Failed to save dashboard")}finally{g(!1)}}};return r.jsx("div",{className:"temp-dash-overlay",onClick:e,children:r.jsxs("div",{className:"temp-dash-modal",onClick:b=>b.stopPropagation(),children:[r.jsxs("div",{className:"temp-dash-header",children:[r.jsxs("div",{className:"temp-dash-title-group",children:[r.jsx("div",{className:"temp-dash-icon",children:r.jsx(eg,{size:16})}),r.jsxs("div",{className:"temp-dash-title-text",children:[r.jsx("h2",{children:n}),r.jsxs("span",{className:"temp-dash-ai-badge",children:[r.jsx(fw,{size:8})," AI Generated"]})]})]}),r.jsxs("div",{className:"temp-dash-actions",children:[i&&!s&&r.jsxs("button",{onClick:()=>o(!0),className:"temp-dash-save-btn",children:[r.jsx(cs,{size:12})," Save"]}),r.jsx("button",{onClick:e,className:"temp-dash-close-btn",children:r.jsx(Ft,{size:16})})]})]}),s&&r.jsxs("div",{className:"temp-dash-save-form",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:l,onChange:b=>c(b.target.value),autoFocus:!0}),r.jsx("input",{type:"text",placeholder:"Description (optional)",value:d,onChange:b=>f(b.target.value)}),r.jsxs("div",{className:"temp-dash-save-actions",children:[r.jsx("button",{onClick:()=>o(!1),className:"temp-dash-cancel-btn",children:"Cancel"}),r.jsx("button",{onClick:x,className:"temp-dash-confirm-btn",disabled:p||!l.trim(),children:p?"Saving...":"Confirm"})]})]}),r.jsx("div",{className:"temp-dash-body",children:a.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets to display."}):r.jsx("div",{className:"temp-dash-grid",children:a.map((b,j)=>r.jsx(AM,{widget:b,isEditing:!1,autoHideEmptyColumns:!0},b.id||`widget-${j}`))})})]})})},uB=()=>MN(()=>import("./EditComplaintPage-DhMYwAZL.js"),__vite__mapDeps([0,1])),FPe=()=>MN(()=>import("./AddPatientPage-DDCX6wUa.js"),__vite__mapDeps([2,3])),zj=[{name:"Dashboard",path:"/dashboard",icon:r.jsx(eg,{size:16}),keywords:["home","main","analytics","stats"],roles:["all"]},{name:"Clinic Hub",path:"/dashboard/clinic-hub",icon:r.jsx(Nc,{size:16}),keywords:["central","hub","overview"],roles:["admin","superadmin"]},{name:"Analysis Dashboard",path:"/dashboard/analysis",icon:r.jsx(Nc,{size:16}),keywords:["reports","stats","finance","money"],roles:["admin","superadmin"]},{name:"Live AI Assistant",path:"/live-api",icon:r.jsx(Ev,{size:16}),keywords:["ai","chat","voice","assistant"],roles:["all"]},{name:"Clinic Subscriptions",path:"/dashboard/clinic-subscriptions",icon:r.jsx(Nc,{size:16}),keywords:["plans","billing","tenants"],roles:["superadmin"]},{name:"User Management",path:"/dashboard/users",icon:r.jsx(Ds,{size:16}),keywords:["admins","clinics","accounts"],roles:["superadmin"]},{name:"Patient Search",path:"/dashboard/search-patient",icon:r.jsx(In,{size:16}),keywords:["find","lookup","patient"],roles:["all"]},{name:"All Patients",path:"/dashboard/all-patients",icon:r.jsx(Ds,{size:16}),keywords:["list","records","database"],roles:["admin","receptionist","doctor"]},{name:"Add New Patient",path:"/dashboard/add-patient",icon:r.jsx(BN,{size:16}),keywords:["register","new","create","onboard"],roles:["admin","receptionist","doctor"]},{name:"Admissions",path:"/manage-admission",icon:r.jsx(RQ,{size:16}),keywords:["ipd","admit","discharge","rooms"],roles:["admin","doctor","receptionist"]},{name:"Appointment Queue",path:"/dashboard/reception",icon:r.jsx(Ds,{size:16}),keywords:["queue","reception","waiting","appointments"],roles:["admin","receptionist","superadmin"]},{name:"Doctor Queue",path:"/dashboard/queue",icon:r.jsx(Nc,{size:16}),keywords:["waiting","patients","consultation"],roles:["admin","doctor","superadmin"]},{name:"Pharmacy Inventory",path:"/dashboard/inventory",icon:r.jsx(kc,{size:16}),keywords:["drugs","medicine","stock","pharmacy"],roles:["admin","pharmacy"]},{name:"Pharmacy Queue",path:"/dashboard/pharmacy-queue",icon:r.jsx(kc,{size:16}),keywords:["orders","billing","dispense"],roles:["admin","pharmacy","superadmin"]},{name:"Add New Drug",path:"/dashboard/inventory/add",icon:r.jsx(kc,{size:16}),keywords:["create","medicine","stock"],roles:["admin","pharmacy"]},{name:"Add Pharmacy Order",path:"/dashboard/add-order",icon:r.jsx(NE,{size:16}),keywords:["sell","bill","dispense"],roles:["admin","pharmacy"]},{name:"Refill Reminders",path:"/refill-reminders",icon:r.jsx(ua,{size:16}),keywords:["recurring","sms","alert"],roles:["admin","pharmacy"]},{name:"Distributors",path:"/dashboard/distributors",icon:r.jsx(GD,{size:16}),keywords:["suppliers","vendors","stock"],roles:["admin","pharmacy"]},{name:"Purchase",path:"/dashboard/purchase",icon:r.jsx(NE,{size:16}),keywords:["buy","procurement","stock"],roles:["admin","pharmacy"]},{name:"Lab Panel",path:"/dashboard/lab",icon:r.jsx(ls,{size:16}),keywords:["billing","orders","queue"],roles:["admin","lab","superadmin"]},{name:"Create Lab Order",path:"/create-lab-order",icon:r.jsx(ls,{size:16}),keywords:["test","pathology","diagnostics"],roles:["admin","doctor","lab"]},{name:"Search Lab Reports",path:"/lab/search-report",icon:r.jsx(In,{size:16}),keywords:["results","history","find"],roles:["admin","doctor","lab"]},{name:"Lab Inventory",path:"/lab-inventory",icon:r.jsx(ls,{size:16}),keywords:["reagents","tests","stock"],roles:["admin","lab"]},{name:"Dental",path:"/dashboard/dental",icon:r.jsx(Nc,{size:16}),keywords:["teeth","dentist","chart","odontogram"],roles:["admin","doctor","superadmin"]},{name:"Create Custom Bill",path:"/create-custom-bill",icon:r.jsx(Ta,{size:16}),keywords:["invoice","custom","charge"],roles:["admin","receptionist"]},{name:"Billing History",path:"/billing",icon:r.jsx(hw,{size:16}),keywords:["transactions","payments","history"],roles:["admin","receptionist"]},{name:"Patient Debt Management",path:"/dashboard/patient-debt",icon:r.jsx(hw,{size:16}),keywords:["debt","due","outstanding","balance"],roles:["admin","pharmacy","receptionist"]},{name:"Custom Tables",path:"/custom-tables",icon:r.jsx(Ta,{size:16}),keywords:["database","sheets","custom data"],roles:["admin","superadmin"]},{name:"Custom Dashboards",path:"/dashboards",icon:r.jsx(eg,{size:16}),keywords:["charts","reports","analytics"],roles:["admin","doctor","superadmin"]},{name:"Staff Management",path:"/dashboard/staff",icon:r.jsx(ng,{size:16}),keywords:["users","employees","roles","admin"],roles:["admin","superadmin"]},{name:"Role Management",path:"/dashboard/roles",icon:r.jsx(ng,{size:16}),keywords:["roles","permissions","access","custom roles"],roles:["admin","superadmin"]}],dB=[{icon:"",text:"Update Paracetamol stock to 100",roles:["admin","pharmacy"]},{icon:"",text:"Change CBC Test price to 350",roles:["admin","lab","superadmin"]},{icon:"",text:"Set Voice AI language to Hindi",roles:["all"]},{icon:"",text:"Show revenue for last month",roles:["admin","superadmin"]},{icon:"",text:"Purchase 50 strips of Aspirin",roles:["admin","pharmacy"]},{icon:"",text:"Update consultation fee to 500",roles:["admin","superadmin"]},{icon:"",text:"Add new staff member",roles:["admin","superadmin"]},{icon:"",text:"Register: John Doe, 25M, Fever",roles:["all"]},{icon:"",text:"Check Metformin availability",roles:["admin","pharmacy","doctor"]}],$Pe=({user:t})=>{const{isOpen:e,closeCommandBar:n}=Ic(),a=Lt(),i=$r(),s=v.useRef(null),[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!1),[S,_]=v.useState(!0),[T,C]=v.useState(!0),{customColumnsConfig:P}=rS(),k=(P==null?void 0:P.patients)||[],[E,I]=v.useState(null),[L,$]=v.useState(!1),q=ds(),{chatHistory:F,isProcessing:H,handleSendMessage:V,setChatQuery:X,refreshChat:Y,selectedImage:z,handleImageSelect:G,clearImage:ie,temporaryDashboard:W,closeTemporaryDashboard:B,saveTemporaryDashboard:ce}=fO({settings:{},staffList:[],enableDynamicContext:!1}),je=Ve=>{Ve&&(q.prefetchQuery({queryKey:Gt.patients.context(Ve),queryFn:async()=>{const jt=await se(`/api/patients/${Ve}/context`);if(!jt.ok)throw new Error("Failed to fetch patient context");return jt.json()},staleTime:5*60*1e3}),q.prefetchQuery({queryKey:Gt.patientDebts.balance(Ve),queryFn:async()=>{const jt=await se(`/api/patient-debts/${Ve}/balance`);return jt.ok?jt.json():{netDebt:0}},staleTime:1*60*1e3}),q.prefetchQuery({queryKey:Gt.queue.latest(Ve),queryFn:async()=>{const jt=await se(`/api/queue/patient/${Ve}/latest`);if(!jt.ok)throw new Error("Failed to fetch latest queue status");const kt=await jt.json();return kt!=null&&kt._id&&q.prefetchQuery({queryKey:Gt.queue.entry(kt._id),queryFn:async()=>{const Kn=await se(`/api/queue/doctor/complaint/${kt._id}`);if(!Kn.ok)throw new Error("Failed to fetch complaint record");return Kn.json()},staleTime:1*60*1e3}),kt},staleTime:5e3}),q.prefetchQuery({queryKey:Gt.dental.records(Ve),queryFn:async()=>{const jt=await se(`/api/dental/patient/${Ve}`);if(!jt.ok)throw new Error("Failed to fetch dental records");return jt.json()},staleTime:5*60*1e3}))},K=v.useMemo(()=>t?zj.filter(Ve=>Ve.roles.includes("all")||t.role&&Ve.roles.includes(t.role)):zj,[t]),Ie=v.useMemo(()=>t?dB.filter(Ve=>Ve.roles.includes("all")||t.role&&Ve.roles.includes(t.role)):dB,[t]),Ue=v.useMemo(()=>new lo(K,{keys:["name","keywords"],threshold:.3}),[K]),[ze,Le]=v.useState(!1),[be,Ce]=v.useState(!1),[Ae,me]=v.useState(!1);v.useEffect(()=>{if(e)Le(!0),me(!1);else{me(!0);const Ve=setTimeout(()=>{Le(!1),me(!1),Y()},200);return()=>clearTimeout(Ve)}},[e,Y]);const{setPageContext:ye}=LN();v.useEffect(()=>{if(e){const Ve=i.pathname,jt=zj.find(kt=>kt.path===Ve)||zj.find(kt=>Ve.startsWith(kt.path)&&kt.path!=="/dashboard");ye(jt?{name:jt.name,path:Ve,data:{role:jt.roles}}:{name:"Current Page",path:Ve})}},[e,i.pathname,ye]);const le=v.useRef(null),J=Ve=>{var kt;const jt=(kt=Ve.target.files)==null?void 0:kt[0];jt&&G(jt)},[ae,ue]=v.useState({x:0,y:0}),[ee,Ne]=v.useState(!1),Te=v.useRef({x:0,y:0}),Fe=v.useRef({x:0,y:0}),xe=v.useRef(!1),ne=v.useRef(null);v.useEffect(()=>{const Ve=kt=>{if(!ee)return;xe.current=!0;const Kn=kt.clientX-Te.current.x,vt=kt.clientY-Te.current.y;let Dt=Fe.current.x+Kn,Vt=Fe.current.y+vt;if(ne.current){const ln=ne.current.offsetWidth,er=ne.current.offsetHeight,Tn=(window.innerWidth-ln)/2,va=(window.innerHeight-er)/2,Ya=Math.max(0,Tn),Br=Math.max(0,va);Dt=Math.max(-Ya,Math.min(Ya,Dt)),Vt=Math.max(-Br,Math.min(Br,Vt))}ue({x:Dt,y:Vt})},jt=()=>{Ne(!1)};return ee&&(window.addEventListener("mousemove",Ve),window.addEventListener("mouseup",jt)),()=>{window.removeEventListener("mousemove",Ve),window.removeEventListener("mouseup",jt)}},[ee]),v.useEffect(()=>{i.pathname==="/dashboard"&&(l(""),p([]),x([])),e&&(i.pathname==="/dashboard"?$(!1):$(!0))},[i.pathname]),v.useEffect(()=>{(f.length>0||g.length>0)&&L&&$(!1)},[f,g]),v.useEffect(()=>{if(e&&window.innerWidth<=768){window.history.pushState({commandBarOpen:!0},"");const Ve=jt=>{jt.preventDefault(),$(!0)};return window.addEventListener("popstate",Ve),()=>{window.removeEventListener("popstate",Ve)}}},[e]),v.useEffect(()=>{L||ue({x:0,y:0})},[L]),v.useEffect(()=>{X(o)},[o]),v.useEffect(()=>{e&&!L&&s.current&&setTimeout(()=>{if(s.current){s.current.focus();const Ve=s.current.value.length;Ve>0&&s.current.setSelectionRange(Ve,Ve)}},50)},[e,L]),v.useEffect(()=>{if(!e||L||!(window.innerWidth<=768))return;const jt=window.scrollY,kt=document.body.style.overflow,Kn=document.documentElement.style.overflow,vt=document.body.style.position,Dt=document.body.style.top,Vt=document.body.style.width;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${jt}px`,document.body.style.width="100%",()=>{document.documentElement.style.overflow=Kn,document.body.style.overflow=kt,document.body.style.position=vt,document.body.style.top=Dt,document.body.style.width=Vt,window.scrollTo(0,jt)}},[e,L]);const oe=Ve=>{!Ve.trim()&&!z||($(!1),V(Ve),l(""),p([]),x([]))},{preFilledQuery:_e,setPreFilledQuery:De}=Ic();v.useEffect(()=>{e&&_e&&(l(_e),setTimeout(()=>{oe(_e),De("")},300))},[e,_e,De]),v.useEffect(()=>{E&&(l(E),Ce(!1),setTimeout(()=>oe(E),50),I(null))},[E]);const Q=()=>{Ce(!0)},ge=()=>{l(""),p([]),x([]),Y(),s.current&&s.current.focus()};v.useEffect(()=>{e&&(async()=>{_(!0);try{const jt=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),kt=await se(`/api/patients?${jt.toString()}`);if(kt.ok){const Kn=await kt.json();d(Kn.patients||[])}}catch(jt){console.error("Error fetching recent patients:",jt)}finally{_(!1)}})()},[e]);const de=v.useMemo(()=>Uc(async Ve=>{const jt=Ve.trim(),kt=/^\d+$/.test(jt),Kn=jt.split(/\s+/).length;if(jt.length>1){const vt=Ue.search(jt);x(vt.map(Dt=>Dt.item))}else x([]);if(jt.length<2||kt&&jt.length>10||!kt&&Kn>3){p([]),j(!1);return}j(!0);try{const vt=new URLSearchParams({search:encodeURIComponent(Ve),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Dt=await se(`/api/patients?${vt.toString()}`);if(Dt.ok){const Vt=await Dt.json();p(Vt.patients||[])}}catch(vt){console.error("Search error:",vt)}finally{j(!1),uB()}},300),[t]),fe=Ve=>{const jt=Ve.target.value;l(jt),de(jt)},Ee=Ve=>{Ve.id&&a(`/dashboard/edit-complaint/patient/${Ve.id}`)},Ye=Ve=>{a(Ve.path)},$e=Ve=>{Ve.path==="/dashboard/add-patient"&&FPe()},We=Ve=>{l(Ve),setTimeout(()=>oe(Ve),50)},it=async()=>{if(o.trim()){j(!0);try{const Ve=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.trim(),age:null,gender:null,phone:null})});if(!Ve.ok){const vt=await Ve.json();throw new Error(vt.message||"Failed to create patient")}const jt=await Ve.json();let kt=null;const Kn=await se("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:jt.id,complaint:"Walk-in (Quick Create)"})});if(Kn.ok&&(kt=(await Kn.json()).id),kt)a(`/dashboard/edit-complaint/${kt}`);else{const vt=await se(`/api/queue/patient/${jt.id}/latest`);if(vt.ok){const Dt=await vt.json();Dt&&Dt._id&&a(`/dashboard/edit-complaint/${Dt._id}`)}}n()}catch(Ve){console.error("Failed to create patient:",Ve),alert("Failed to create patient. Please try again.")}finally{j(!1)}}},wt=Ve=>{o.trim()&&oe(o)},we=Ve=>{Ve.key==="Enter"&&!Ve.shiftKey&&(Ve.preventDefault(),wt())},Xe=Ve=>{Ve.target===Ve.currentTarget&&n()};if(!e&&!ze)return null;const Je=o.trim().length>0||(f.length>0||g.length>0)&&!b,ct=o.length===0&&f.length===0&&g.length===0,Ct=o.length>=3&&f.length===0&&g.length===0&&!b,bt=F.length>0||H,ke=!bt||Je,ot=bt&&Je,Tt=bt&&!T&&!L&&!Je;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${It.overlay} ${L?It.overlayMinimized:""} ${Ae?It.exiting:""}`,onClick:Xe,children:r.jsxs("div",{ref:ne,className:`${It.modal} ${L?It.minimized:""} ${Tt?It.collapsed:""} ${Ae?It.exiting:""}`,style:{transform:`translate(${ae.x}px, ${ae.y}px)`,height:Tt?"auto":void 0},onClick:()=>{xe.current||(L?$(!1):Tt&&C(!0))},children:[r.jsxs("div",{className:It.dragBar,onMouseDown:Ve=>{Ve.target.closest("button")||(Ne(!0),xe.current=!1,Te.current={x:Ve.clientX,y:Ve.clientY},Fe.current={x:ae.x,y:ae.y})},children:[r.jsxs("div",{className:It.dragBarControls,children:[r.jsx("button",{className:It.windowControlBtn,onClick:n,title:"Close",children:r.jsx(Ft,{size:24,color:"#64748b"})}),r.jsx("button",{className:It.windowControlBtn,onClick:()=>$(!L),title:L?"Maximize":"Minimize",children:L?r.jsx(Gz,{size:24,color:"#64748b"}):r.jsx(eJ,{size:24,color:"#64748b"})})]}),r.jsx("div",{className:It.dragBarTitle,children:bt?r.jsxs(r.Fragment,{children:[r.jsx(Ev,{size:14,className:"text-violet-600"}),r.jsx("span",{children:"AI Assistant"})]}):Je?r.jsxs(r.Fragment,{children:[r.jsx(In,{size:14,className:"text-blue-500"}),r.jsx("span",{children:"Search Results"})]}):r.jsx("span",{style:{opacity:.5,fontWeight:500},children:"Clinic Manager AI"})}),r.jsx("div",{className:It.dragBarControlsRight,children:r.jsx("button",{className:It.newChatBtn,onClick:ge,title:"New Chat",children:r.jsx($i,{size:20})})})]}),r.jsxs("div",{className:It.contentWrapper,children:[bt&&r.jsx("div",{className:It.chatSectionFill,children:r.jsxs("div",{className:It.chatMessagesFill,children:[F.map((Ve,jt)=>r.jsx("div",{className:`${It.chatBubble} ${Ve.role==="user"?It.chatBubbleUser:Ve.role==="model"?It.chatBubbleModel:It.chatBubbleSystem}`,children:Ve.role==="model"?r.jsx(wf,{remarkPlugins:[Nf],children:Ve.text}):Ve.text},jt)),H&&r.jsxs("div",{className:It.processing,children:[r.jsx(so,{size:14,className:It.spinner}),"Thinking..."]})]})}),ke&&r.jsxs("div",{className:ot?It.overlayContent:It.content,children:[ct&&!bt&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Newly Registered"}),r.jsx("div",{className:It.recentList,children:S?[1,2,3,4,5].map(Ve=>r.jsx(te,{width:100,height:32,style:{borderRadius:"16px"}},Ve)):c.length>0?c.map(Ve=>r.jsxs("div",{className:It.recentPill,onClick:()=>Ee(Ve),onMouseEnter:()=>je(Ve.id),children:[r.jsx("span",{className:It.recentName,children:Ve.name||"Patient"}),r.jsxs("span",{className:It.recentToken,children:["#",Ve.token]}),r.jsxs("span",{className:It.recentInfo,children:[Ve.age?`${Ve.age}y`:""," ",Ve.gender||""]})]},Ve.id)):r.jsx("div",{className:It.recentInfo,style:{opacity:.5},children:"No recent patients found."})})]}),ct&&!bt&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Try Asking AI..."}),r.jsx("div",{className:It.examplesGrid,children:Ie.map((Ve,jt)=>r.jsxs("div",{className:It.exampleCard,onClick:()=>We(Ve.text),children:[r.jsx("span",{className:It.exampleIcon,children:Ve.icon}),r.jsx("span",{className:It.exampleText,children:Ve.text})]},jt))})]}),b&&r.jsx("div",{className:It.section,children:r.jsxs("div",{className:It.processing,children:[r.jsx(so,{size:16,className:It.spinner}),"Searching..."]})}),g.length>0&&!b&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Pages Found"}),r.jsx("div",{className:It.resultsList,children:g.map((Ve,jt)=>r.jsxs("div",{className:It.resultItem,onClick:()=>Ye(Ve),onMouseEnter:()=>$e(Ve),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{color:"#7c3aed"},children:Ve.icon}),r.jsx("span",{className:It.resultName,children:Ve.name})]}),r.jsx("span",{className:It.resultDetails,style:{fontSize:"0.7rem"},children:"Jump to page"})]},jt))})]}),Je&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Patients Found"}),r.jsxs("div",{className:It.resultsList,children:[o.trim().length>0&&r.jsx("div",{className:It.resultItem,onClick:it,style:{border:"1px dashed #6366f1",backgroundColor:"#f5f3ff"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#8b5cf6",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(BN,{size:16})}),r.jsxs("div",{children:[r.jsxs("span",{className:It.resultName,style:{color:"#7c3aed"},children:['Create "',o,'"']}),r.jsx("div",{className:"text-xs text-violet-600 mt-0.5",children:"Add new patient"})]})]})}),f.map(Ve=>r.jsxs("div",{className:It.resultItem,onClick:()=>Ee(Ve),onMouseEnter:()=>{uB(),je(Ve.id)},children:[r.jsxs("div",{children:[r.jsxs("span",{className:It.resultToken,children:["[#",Ve.token,"]"]}),r.jsx("span",{className:It.resultName,children:Ve.name})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[Ve.age&&r.jsxs("span",{children:[Ve.age," Yrs"]}),Ve.gender&&r.jsx("span",{children:Ve.gender}),r.jsxs("span",{children:["ID: ",Ve.id.slice(-6).toUpperCase()]}),k.map(jt=>{var Kn;const kt=(Kn=Ve.custom_fields)==null?void 0:Kn[jt.key];return kt?r.jsxs("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 border border-slate-200",children:[jt.label,": ",String(kt)]},jt.key):null})]})]},Ve.id))]})]}),Ct&&!bt&&r.jsx("div",{className:It.section,children:r.jsxs("div",{className:It.noResults,children:["Press ",r.jsx("strong",{children:"Enter"}),' to send "',o,'" to AI Assistant']})})]})]}),r.jsxs("div",{className:It.header,children:[r.jsx("div",{className:It.inputWrapper,children:r.jsxs("div",{className:It.inputContainer,children:[r.jsx("div",{className:It.minimizedSearchIcon,children:r.jsx(In,{size:24})}),r.jsx("textarea",{ref:Ve=>{s.current=Ve,Ve&&(Ve.style.height="auto",Ve.style.height=Math.min(Ve.scrollHeight,150)+"px")},className:It.input,placeholder:L?"Type here...":"Search (Name/Token/Phone), Ask AI, or Enter New Case (Name Age Sex Complaint)...",value:o,onChange:Ve=>{fe(Ve),Ve.target.style.height="auto",Ve.target.style.height=Math.min(Ve.target.scrollHeight,150)+"px"},onKeyDown:we,onFocus:Ve=>{Ve.target.scrollIntoView=()=>{},setTimeout(()=>{ne.current&&(ne.current.scrollTop=ne.current.scrollHeight)},100)},rows:1,disabled:H}),z&&r.jsxs("div",{style:{position:"relative",marginRight:"0.5rem"},children:[r.jsx("img",{src:z,alt:"Selected",style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"4px",border:"1px solid #e2e8f0"}}),r.jsx("button",{onClick:ie,style:{position:"absolute",top:-4,right:-4,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",padding:"1px",cursor:"pointer",display:"flex"},children:r.jsx(Ft,{size:8})})]}),r.jsxs("div",{className:It.controlsGroup,children:[r.jsx("button",{className:It.iconButton,onClick:()=>{var Ve;return(Ve=le.current)==null?void 0:Ve.click()},title:"Attach Image",children:r.jsx(HD,{size:16})}),(o.trim().length>0||z)&&r.jsx("button",{className:`${It.iconButton} ${It.sendButton}`,onClick:()=>oe(o),title:"Send to AI",children:r.jsx($N,{size:16})}),r.jsx("button",{className:It.iconButton,onClick:Q,title:"Voice Input",children:r.jsx(FN,{size:16})})]})]})}),r.jsx("input",{type:"file",ref:le,onChange:J,accept:"image/*",style:{display:"none"}})]})]})}),be&&r.jsx(nS,{onClose:()=>Ce(!1),patientData:null,tokenNumber:null,onAiSummaryChange:Ve=>{console.log("AI Summary:",Ve),I(Ve)}}),W&&r.jsx(LPe,{isOpen:!!W,onClose:B,title:W.title,widgets:W.widgets,onSave:ce})]})};var UH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hB=Se.createContext&&Se.createContext(UH),BPe=["attr","size","title"];function zPe(t,e){if(t==null)return{};var n=qPe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function qPe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function kN(){return kN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},kN.apply(this,arguments)}function fB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function AN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fB(Object(n),!0).forEach(function(a){UPe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function UPe(t,e,n){return e=VPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VPe(t){var e=HPe(t,"string");return typeof e=="symbol"?e:e+""}function HPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VH(t){return t&&t.map((e,n)=>Se.createElement(e.tag,AN({key:n},e.attr),VH(e.child)))}function Bi(t){return e=>Se.createElement(GPe,kN({attr:AN({},t.attr)},e),VH(t.child))}function GPe(t){var e=n=>{var{attr:a,size:i,title:s}=t,o=zPe(t,BPe),l=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Se.createElement("svg",kN({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,o,{className:c,style:AN(AN({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Se.createElement("title",null,s),t.children)};return hB!==void 0?Se.createElement(hB.Consumer,null,n=>e(n)):e(UH)}function WPe(t){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(t)}function pB(t){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function iv(t){return Bi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function mB(t){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function IA(t){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(t)}function Gh(t){return Bi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function qj(t){return Bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(t)}function Uh(t){return Bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(t)}function sv(t){return Bi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(t)}function Tm(t){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function HH(t){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function gB(t){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function KPe(t){return Bi({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function Uj(t){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(t)}function Nm(t){return Bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const GH={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:Gh},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:qj},{path:"/dashboard/users",name:"User Management",icon:Nm}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:Gh}]},{title:"Clinic Management",links:[{path:"/dashboard/clinic-hub",name:"Clinic Hub",icon:mB},{path:"/dashboard/staff",name:"Staff Management",icon:Nm},{path:"/dashboard/roles",name:"Role Management",icon:Uj},{path:"/custom-tables",name:"Custom Tables",icon:iv},{path:"/dashboards",name:"Custom Dashboards",icon:pB}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:qj},{path:"/dashboard/patients",name:"All Patients",icon:Nm},{path:"/dashboard/patients/search",name:"Search Patient",icon:Tm},{path:"/dashboard/files",name:"Patient Files",icon:iv}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:iv},{path:"/dashboard/inventory",name:"Inventory Management",icon:sv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:sv},{path:"/dashboard/distributors",name:"Distributor Management",icon:Nm}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:gB},{path:"/dashboard/reception",name:"Appointment Queue",icon:Gh},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:Uh},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:Uh}]},{title:"Role Operations",links:[{path:"/manage-admission",name:"Admission Desk",icon:Uj},{path:"/dashboard/pharmacy-queue",name:"Pharmacy Queue",icon:sv},{path:"/dashboard/lab",name:"Lab Panel",icon:IA},{path:"/billing",name:"Billing",icon:Uh},{path:"/create-custom-bill",name:"Custom Bill",icon:Uh}]},{title:"Help & Support",links:[{path:"/dashboard/guide",name:"User Guide",icon:WPe}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search-patient",name:"Patient Search",icon:Tm},{path:"/dashboard/add-patient",name:"Add Patient",icon:qj},{path:"/manage-admission",name:"Manage Admission",icon:Uj}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:IA},{path:"/billing",name:"Billing",icon:Uh}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:gB}]},{title:"Analytics",links:[{path:"/dashboards",name:"Custom Dashboards",icon:pB}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Appointment Queue",icon:Gh}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:Nm},{path:"/dashboard/add-patient",name:"Add Patient",icon:qj},{path:"/dashboard/search-patient",name:"Search Patient",icon:Tm}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:Uh},{path:"/manage-admission",name:"Manage Admission",icon:Uj},{path:"/dashboard/patient-debt",name:"Patient Debt Management",icon:Uh}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:Gh},{path:"/lab-inventory",name:"Lab Test Inventory",icon:IA},{path:"/lab/search-report",name:"Search Lab Report",icon:Tm}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:Gh},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:sv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:sv},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:iv},{path:"/dashboard/distributors",name:"Distributor Management",icon:Nm}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:iv},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:mB},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:Tm}]}]},EM=async()=>{const t=await se("/api/clinic-subscriptions/plans",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription plans")}return t.json()},YPe=async t=>{const e=await se(`/api/clinic-subscriptions/cancel/${t}`,{method:"PUT"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to cancel clinic subscription")}return e.json()},QPe=async t=>{const e=await se(`/api/clinics/${t}/subscription-status`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||`Failed to fetch subscription status for clinic ${t}`)}return e.json()},XPe=async t=>{const e=await se(`/api/clinic-subscriptions/plans/${t}`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to fetch clinic subscription plan")}return e.json()},JPe=async t=>{const e=await se("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to create clinic subscription plan")}return e.json()},ZPe=async(t,e)=>{const n=await se(`/api/clinic-subscriptions/plans/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to update clinic subscription plan")}return n.json()},eDe=async t=>{const e=await se(`/api/clinic-subscriptions/plans/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to deactivate clinic subscription plan")}return e.json()},tDe=async t=>{const e=await se("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to initiate clinic subscription")}return e.json()},nDe=async()=>{try{const t=await se("/api/clinic-subscriptions/pending",{method:"GET"});return t.ok?t.json():null}catch(t){return console.error("Error checking for pending subscription:",t),null}},rDe=async()=>{const t=await se("/api/clinics/subscription-status",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription status")}return t.json()};function aDe(t=!0){return ON({queryKey:Gt.clinicSubscription,queryFn:rDe,enabled:t,staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!0})}const iDe="_container_c9bhr_3",sDe="_header_c9bhr_21",oDe="_titleGroup_c9bhr_41",lDe="_title_c9bhr_41",cDe="_closeButton_c9bhr_59",uDe="_messageList_c9bhr_79",dDe="_emptyState_c9bhr_108",hDe="_emptyStateIcon_c9bhr_119",fDe="_exampleContainer_c9bhr_145",pDe="_exampleChip_c9bhr_153",mDe="_messageRow_c9bhr_176",gDe="_messageRowUser_c9bhr_194",yDe="_messageRowModel_c9bhr_198",xDe="_messageRowSystem_c9bhr_202",vDe="_bubble_c9bhr_208",bDe="_bubbleUser_c9bhr_224",jDe="_bubbleModel_c9bhr_234",wDe="_bubbleSystem_c9bhr_247",NDe="_processingIndicator_c9bhr_330",SDe="_spin_c9bhr_343",_De="_inputArea_c9bhr_358",CDe="_imagePreviewContainer_c9bhr_365",TDe="_inputContainer_c9bhr_376",kDe="_inputField_c9bhr_393",ADe="_sendButton_c9bhr_407",fr={container:iDe,header:sDe,titleGroup:oDe,title:lDe,closeButton:cDe,messageList:uDe,emptyState:dDe,emptyStateIcon:hDe,exampleContainer:fDe,exampleChip:pDe,messageRow:mDe,messageRowUser:gDe,messageRowModel:yDe,messageRowSystem:xDe,bubble:vDe,bubbleUser:bDe,bubbleModel:jDe,bubbleSystem:wDe,processingIndicator:NDe,spin:SDe,inputArea:_De,imagePreviewContainer:CDe,inputContainer:TDe,inputField:kDe,sendButton:ADe},WH=({onClose:t,settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s})=>{const{chatQuery:o,setChatQuery:l,chatHistory:c,isProcessing:d,handleSendMessage:f,refreshChat:p,stopGeneration:g,selectedImage:x,handleImageSelect:b,clearImage:j}=fO({settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s}),S=v.useRef(null),_=v.useRef(null),T=()=>{var E;(E=S.current)==null||E.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{T()},[c,d]);const C=E=>{var L;const I=(L=E.target.files)==null?void 0:L[0];I&&b(I)},P=["Check Paracetamol stock","Go to Pharmacy","Analysis for last month","Add nurse Sarah"],k=E=>{l(E)};return r.jsxs("div",{className:fr.container,children:[r.jsxs("header",{className:fr.header,children:[r.jsxs("div",{className:fr.titleGroup,children:[r.jsx(Ev,{size:20,className:"text-violet-600"}),r.jsx("h3",{className:fr.title,children:"Clinic Assistant"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:p,className:fr.closeButton,title:"Refresh Chat",children:r.jsx(Kz,{size:18})}),r.jsx("button",{onClick:t,className:fr.closeButton,title:"Close",children:r.jsx(Ft,{size:20})})]})]}),r.jsxs("div",{className:fr.messageList,children:[c.length===0&&r.jsxs("div",{className:fr.emptyState,children:[r.jsx(Ev,{size:48,className:fr.emptyStateIcon}),r.jsx("p",{children:"How can I help you manage the clinic today?"}),r.jsx("div",{className:fr.exampleContainer,children:P.map((E,I)=>r.jsx("button",{className:fr.exampleChip,onClick:()=>k(E),children:E},I))})]}),c.map((E,I)=>r.jsx("div",{className:`${fr.messageRow} ${E.role==="user"?fr.messageRowUser:E.role==="model"?fr.messageRowModel:fr.messageRowSystem}`,children:r.jsx("div",{className:`${fr.bubble} ${E.role==="user"?fr.bubbleUser:E.role==="model"?fr.bubbleModel:fr.bubbleSystem}`,children:E.role==="user"||E.role==="system"?E.text:r.jsx(wf,{remarkPlugins:[Nf],children:E.text})})},I)),d&&r.jsx("div",{className:`${fr.messageRow} ${fr.messageRowModel}`,children:r.jsxs("div",{className:fr.processingIndicator,children:[r.jsx(so,{size:14,className:fr.spin}),"Thinking..."]})}),r.jsx("div",{ref:S})]}),r.jsxs("div",{className:fr.inputArea,children:[x&&r.jsxs("div",{className:fr.imagePreviewContainer,style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",overflow:"hidden"},children:[r.jsx("img",{src:x,alt:"Selected",style:{width:"100%",height:"100%",objectFit:"cover"}}),r.jsx("button",{onClick:j,style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.5)",color:"white",border:"none",cursor:"pointer",padding:"1px"},children:r.jsx(Ft,{size:12})})]}),r.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Image attached"})]}),r.jsxs("div",{className:fr.inputContainer,children:[r.jsx("input",{type:"file",ref:_,onChange:C,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:fr.sendButton,onClick:()=>{var E;return(E=_.current)==null?void 0:E.click()},disabled:d,title:"Attach Image",style:{marginRight:"0.5rem",color:"#6b7280"},children:r.jsx(HD,{size:18})}),r.jsx("input",{type:"text",className:fr.inputField,placeholder:"Type your request...",value:o,onChange:E=>l(E.target.value),onKeyDown:E=>E.key==="Enter"&&!d&&f(),disabled:d,autoFocus:!0}),d?r.jsx("button",{className:fr.sendButton,onClick:g,title:"Stop Generating",style:{color:"#ef4444"},children:r.jsx(VJ,{size:18,fill:"currentColor"})}):r.jsx("button",{className:fr.sendButton,onClick:()=>f(),disabled:!o.trim()&&!x,children:r.jsx($N,{size:18})})]})]})]})};function Yc(t,e=100){const n=v.useRef(!1);v.useEffect(()=>{if(n.current)return;const a=setTimeout(()=>{const i=document,s=['input[type="text"]:not([disabled]):not([readonly])','input[type="search"]:not([disabled]):not([readonly])','input[type="email"]:not([disabled]):not([readonly])','input[type="tel"]:not([disabled]):not([readonly])','input[type="url"]:not([disabled]):not([readonly])',"input:not([type]):not([disabled]):not([readonly])"].join(", "),o=i.querySelectorAll(s),l=Array.from(o).filter(c=>{const d=window.getComputedStyle(c),f=c.getBoundingClientRect();return d.display!=="none"&&d.visibility!=="hidden"&&d.opacity!=="0"&&f.width>0&&f.height>0});if(l.length>0){const c=l[0];c.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{c.focus()},50),n.current=!0}},e);return()=>clearTimeout(a)},[t,e])}const EDe=({onLoginSuccess:t})=>{const[e,n]=v.useState(""),[a,i]=v.useState(""),[s,o]=v.useState(null),[l,c]=v.useState(!1),d=Lt();Yc();const f=async x=>{x.preventDefault(),c(!0),o(null);try{const b=await se("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})});if(!b.ok){let S=`Login failed with status: ${b.status}`;try{S=(await b.json()).message||S}catch{try{const T=await b.text();T&&(S=`${S} - ${T}`)}catch{}}throw new Error(S)}const j=await b.json();console.log("Login successful:",j),localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?d("/dashboard/queue"):d("/dashboard")}catch(b){console.error("Login failed:",b),o(b.message||"Login failed. Please check your credentials.")}finally{c(!1)}},p=async x=>{c(!0),o(null);try{const b=await se("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x.credential})});if(!b.ok)throw new Error("Google Sign-In failed");const j=await b.json();localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?d("/dashboard/queue"):d("/dashboard")}catch(b){console.error("Google Login Error:",b),o("Google Sign-In failed. Please try again.")}finally{c(!1)}},g=()=>{console.error("Google Login Failed"),o("Google Sign-In was unsuccessful. Please try again.")};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Newtons AI HMS"}),r.jsx("p",{className:"auth-subtitle",children:"Sign in to continue"}),r.jsxs("form",{onSubmit:f,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:x=>n(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"email",children:"Email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:x=>i(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"password",children:"Password"})]}),s&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:s})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:l,className:"auth-submit-button",children:l?"Signing in...":"Sign In"})})]}),r.jsx("div",{className:"google-login-container",children:r.jsx(XW,{onSuccess:p,onError:g,useOneTap:!0})}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",r.jsx(_r,{to:"/register",className:"auth-navigation-link",children:"Create account"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},PDe=()=>{const[t,e]=v.useState(""),[n,a]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,d]=v.useState(null),[f,p]=v.useState(!1),g=Lt(),x=async b=>{b.preventDefault(),p(!0),d(null);try{const j=await se("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:t,userName:n,userEmail:i,userPassword:o})}),S=await j.json();if(!j.ok)throw new Error(S.message||`HTTP error! status: ${j.status}`);console.log("Registration successful:",S),g("/login")}catch(j){console.error("Registration failed:",j),d(j.message||"Registration failed. Please try again.")}finally{p(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),r.jsxs("form",{onSubmit:x,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"}),r.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:t,onChange:b=>e(b.target.value),className:"auth-text-input",placeholder:"Your Clinic's Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"}),r.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:n,onChange:b=>a(b.target.value),className:"auth-text-input",placeholder:"Your Full Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userEmail",children:"Your Email (Admin Login)"}),r.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:i,onChange:b=>s(b.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userPassword",children:"Password"}),r.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:o,onChange:b=>l(b.target.value),className:"auth-text-input",placeholder:"Min. 6 characters"})]}),c&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:c})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:f,className:"auth-submit-button",children:f?"Registering...":"Register Clinic & Admin"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",r.jsx(_r,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},DDe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i})=>{const s=$r(),[o,l]=v.useState(""),c=GH[n]||[],[d,f]=v.useState(500),p=v.useRef(!1),g=v.useCallback(S=>{p.current=!0,S.preventDefault()},[]),x=v.useCallback(()=>{p.current=!1},[]),b=v.useCallback(S=>{if(p.current){const _=window.innerWidth-S.clientX;_>250&&_<window.innerWidth*.8&&f(_)}},[]);v.useEffect(()=>(window.addEventListener("mousemove",b),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",x)}),[b,x]);const j=c.map(S=>({...S,links:S.links.filter(_=>_.name.toLowerCase().includes(o.toLowerCase()))})).filter(S=>S.links.length>0);return r.jsxs("div",{className:`side-panel ${a?"open":""}`,style:{width:`${d}px`,right:a?"0":`-${d}px`},children:[r.jsx("div",{className:"resizer",onMouseDown:g}),r.jsxs("div",{className:"side-panel-header",children:[r.jsx(_r,{to:"/dashboard",className:"home-button",onClick:i,children:r.jsx(Gh,{})}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(Tm,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),r.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:o,onChange:S=>l(S.target.value)})]}),r.jsx("button",{className:"close-button",onClick:i,children:""})]}),r.jsx("nav",{children:j.map((S,_)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:S.title}),r.jsx("ul",{className:"sub-page-list",children:S.links.map(T=>{const C=T.icon;return r.jsx("li",{children:r.jsxs(_r,{to:T.path,className:s.pathname===T.path?"active":"",onClick:i,children:[C&&r.jsx(C,{})," ",T.name]})},T.path)})})]},_))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(HH,{})," Logout"]})]})]})},ODe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i,roleNavigation:s})=>{const o=$r(),l=s[n]||[];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mobile-side-panel-overlay ${a?"open":""}`,onClick:i}),r.jsxs("div",{className:`mobile-side-panel ${a?"open":""}`,children:[r.jsxs("div",{className:"mobile-side-panel-header",children:[r.jsx("h3",{children:"Menu"}),r.jsx("button",{className:"close-button",onClick:i,children:r.jsx(KPe,{})})]}),r.jsx("nav",{children:l.map((c,d)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:c.title}),r.jsx("ul",{className:"sub-page-list",children:c.links.map(f=>{const p=f.icon;return r.jsx("li",{children:r.jsxs(_r,{to:f.path,className:o.pathname===f.path?"active":"",onClick:i,children:[p&&r.jsx(p,{})," ",f.name]})},f.path)})})]},d))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(HH,{})," Logout"]})]})]})]})},Uu={"/dashboard":{label:"Dashboard"},"/dashboard/staff":{label:"Staff Management",parent:"/dashboard"},"/dashboard/staff/add":{label:"Add Staff",parent:"/dashboard/staff"},"/dashboard/staff/edit":{label:"Edit Staff",parent:"/dashboard/staff"},"/dashboard/roles":{label:"Role Management",parent:"/dashboard"},"/dashboard/patients":{label:"All Patients",parent:"/dashboard"},"/dashboard/patients/add":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search-patient":{label:"Search Patient",parent:"/dashboard"},"/dashboard/clinic-hub":{label:"Clinic Hub",parent:"/dashboard"},"/dashboard/reception":{label:"Appointment Queue",parent:"/dashboard"},"/dashboard/pharmacy-queue":{label:"Pharmacy Queue",parent:"/dashboard"},"/dashboard/lab":{label:"Lab Panel",parent:"/dashboard"},"/dashboard/inventory":{label:"Inventory",parent:"/dashboard"},"/dashboard/inventory/add":{label:"Add Drug",parent:"/dashboard/inventory"},"/dashboard/inventory/edit":{label:"Edit Drug",parent:"/dashboard/inventory"},"/dashboard/purchase":{label:"Purchase",parent:"/dashboard"},"/dashboard/distributors":{label:"Distributors",parent:"/dashboard"},"/dashboard/patient-debts":{label:"Patient Debts",parent:"/dashboard"},"/dashboard/add-order":{label:"Add Pharmacy Order",parent:"/dashboard"},"/dashboard/edit-pharmacy-order":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/pharmacy-billing":{label:"Pharmacy Billing",parent:"/dashboard"},"/dashboard/analysis":{label:"Analysis",parent:"/dashboard"},"/dashboard/settings":{label:"Settings",parent:"/dashboard"},"/dashboard/search-patient-records":{label:"Search Records",parent:"/dashboard"},"/dashboard/queue":{label:"Queue",parent:"/dashboard"},"/dashboard/add-patient":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search":{label:"Patient Search",parent:"/dashboard"},"/dashboard/patients/search":{label:"Search Patient",parent:"/dashboard"},"/dashboard/subscriptions":{label:"Subscriptions",parent:"/dashboard"},"/dashboard/subscriptions/add":{label:"Add Plan",parent:"/dashboard/subscriptions"},"/dashboard/subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/subscriptions"},"/dashboard/clinic-subscriptions":{label:"Clinic Subscriptions",parent:"/dashboard"},"/dashboard/clinic-subscriptions/add":{label:"Add Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/clinic-subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/users":{label:"User Management",parent:"/dashboard"},"/dashboard/lab-billing":{label:"Lab Billing",parent:"/dashboard"},"/lab-inventory":{label:"Lab Inventory",parent:"/dashboard"},"/lab/search-report":{label:"Search Lab Report",parent:"/dashboard"},"/create-lab-order":{label:"Create Lab Order",parent:"/dashboard"},"/enter-lab-report":{label:"Enter Lab Report",parent:"/dashboard"},"/view-lab-report":{label:"View Lab Report",parent:"/dashboard"},"/lab/report/:id":{label:"Lab Report",parent:"/lab/search-report"},"/lab/enter-report/:id":{label:"Enter Report",parent:"/lab/search-report"},"/lab/view-report/:id":{label:"View Report",parent:"/lab/search-report"},"/billing":{label:"Billing",parent:"/dashboard"},"/dashboard/doctor-billing":{label:"Doctor Billing",parent:"/dashboard"},"/dashboard/doctor-billing/:id":{label:"Doctor Bill",parent:"/dashboard/doctor-billing"},"/create-custom-bill":{label:"Create Custom Bill",parent:"/dashboard"},"/patient":{label:"Patient",parent:"/dashboard"},"/patient/:id/admission-billing":{label:"Admission Billing",parent:"/manage-admission"},"/patient/:id/admission-bill":{label:"Admission Bill",parent:"/patient/:id/admission-billing"},"/patient/:id/lab-reports":{label:"Lab Reports",parent:"/patient"},"/patient/:id/pharmacy-orders":{label:"Pharmacy Orders",parent:"/patient"},"/patient/:id/complaints":{label:"Past Complaints",parent:"/patient"},"/edit-complaint":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/:id":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/patient/:id":{label:"New Complaint",parent:"/dashboard"},"/start-subscription":{label:"Start Subscription",parent:"/dashboard"},"/start-subscription/:id":{label:"Start Subscription",parent:"/dashboard"},"/manage-admission":{label:"Manage Admission",parent:"/dashboard"},"/dashboard/guide":{label:"User Guide",parent:"/dashboard"},"/custom-tables":{label:"Custom Tables",parent:"/dashboard"},"/custom-tables/:id":{label:"Table Records",parent:"/custom-tables"},"/dashboards":{label:"Dashboards",parent:"/dashboard"},"/dashboards/new":{label:"New Dashboard",parent:"/dashboards"},"/dashboards/:id":{label:"Dashboard View",parent:"/dashboards"},"/dashboards/:id/edit":{label:"Edit Dashboard",parent:"/dashboards"},"/dashboard/pharmacy-billing/:id":{label:"Pharmacy Bill",parent:"/dashboard/pharmacy-billing"},"/dashboard/lab-billing/:id":{label:"Lab Bill",parent:"/dashboard/lab-billing"},"/dashboard/edit-pharmacy-order/:id":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/orders/:id":{label:"Order Details",parent:"/dashboard/add-order"},"/refill-reminders":{label:"Refill Reminders",parent:"/dashboard"},"/start-clinic-subscription":{label:"Start Clinic Subscription",parent:"/dashboard"},"/dashboard/all-patients":{label:"All Patients",parent:"/dashboard"}},yB=t=>t.split("/").map(e=>{const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),a=/^\d+$/.test(e);return n||a?":id":e}).join("/"),MDe=t=>{if(Uu[t])return Uu[t].label;const e=yB(t);if(Uu[e])return Uu[e].label;const n=t.split("/"),a=n[n.length-1],i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a),s=/^\d+$/.test(a);if(i||s){const o=n.slice(0,-1).join("/"),l=yB(o);if(Uu[l])return Uu[l].label;if(Uu[o])return Uu[o].label}return a.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},IDe=()=>{const t=$r(),e=v.useMemo(()=>{const n=t.pathname.split("/").filter(s=>s!=="");if(n.length===0||n[0]==="login"||n[0]==="registration")return[];const a=[];let i="";return n.forEach((s,o)=>{if(i+=`/${s}`,o===0&&s==="dashboard")a.push({label:"Home",path:"/dashboard",isLast:o===n.length-1});else if(s!=="dashboard"){const l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s),c=/^\d+$/.test(s);let d=MDe(i);(l||c)&&d.replace(/\s/g,"").toLowerCase()===s.replace(/[-_]/g,"").toLowerCase()&&(l?d=`#${s.substring(0,8)}`:c&&(d=`#${s}`)),a.push({label:d,path:i,isLast:o===n.length-1})}}),n[0]!=="dashboard"&&a.length>0&&a.unshift({label:"Home",path:"/dashboard",isLast:!1}),a},[t.pathname]);return e.length===0?null:r.jsx("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:r.jsx("ol",{className:"breadcrumb-list",children:e.map((n,a)=>r.jsxs("li",{className:"breadcrumb-item",children:[a>0&&r.jsx(pd,{className:"breadcrumb-separator",size:14}),n.isLast?r.jsxs("span",{className:"breadcrumb-current","aria-current":"page",children:[a===0&&r.jsx(jE,{size:14,className:"breadcrumb-home-icon"}),n.label]}):r.jsxs(_r,{to:n.path,className:"breadcrumb-link",children:[a===0&&r.jsx(jE,{size:14,className:"breadcrumb-home-icon"}),n.label]})]},n.path))})})},RDe="_container_1ivr9_5",LDe="_visualContainer_1ivr9_33",FDe="_mobileDashboardGrid_1ivr9_49",$De="_mobileDashboardItem_1ivr9_87",BDe="_mobileDashboardIcon_1ivr9_195",zDe="_mobileDashboardLabel_1ivr9_233",qDe="_brandTitle_1ivr9_331",UDe="_searchBar_1ivr9_387",VDe="_searchIconWrapper_1ivr9_435",HDe="_searchIcon_1ivr9_435",GDe="_placeholderText_1ivr9_459",WDe="_shortcutHint_1ivr9_479",KDe="_key_1ivr9_495",YDe="_plus_1ivr9_519",QDe="_micButtonWrapper_1ivr9_529",XDe="_micIcon_1ivr9_577",JDe="_newlyRegisteredSection_1ivr9_901",ZDe="_recentList_1ivr9_917",eOe="_recentPatientPill_1ivr9_931",tOe="_recentNameContainer_1ivr9_957",nOe="_recentInfo_1ivr9_969",rOe="_newlyRegisteredLabel_1ivr9_1007",aOe="_recentName_1ivr9_957",iOe="_recentToken_1ivr9_1171",jr={container:RDe,visualContainer:LDe,mobileDashboardGrid:FDe,mobileDashboardItem:$De,mobileDashboardIcon:BDe,mobileDashboardLabel:zDe,brandTitle:qDe,searchBar:UDe,searchIconWrapper:VDe,searchIcon:HDe,placeholderText:GDe,shortcutHint:WDe,key:KDe,plus:YDe,micButtonWrapper:QDe,micIcon:XDe,newlyRegisteredSection:JDe,recentList:ZDe,recentPatientPill:eOe,recentNameContainer:tOe,recentInfo:nOe,newlyRegisteredLabel:rOe,recentName:aOe,recentToken:iOe},sOe=[{label:"Doctor",icon:r.jsx(bf,{size:24}),path:"/dashboard/doctor"},{label:"Labs",icon:r.jsx(Xj,{size:24}),path:"/create-lab-order"},{label:"Clinic",icon:r.jsx(Uz,{size:24}),path:"/dashboard/clinic-hub"},{label:"Inventory",icon:r.jsx(kc,{size:24}),path:"/dashboard/inventory"},{label:"Analysis",icon:r.jsx(Xj,{size:24}),path:"/dashboard/analysis"},{label:"Dental",icon:r.jsx($J,{size:24}),path:"/dashboard/dental"},{label:"Files",icon:r.jsx(Xj,{size:24}),path:"/dashboard/files"},{label:"Distributors",icon:r.jsx(GD,{size:24}),path:"/dashboard/distributors"},{label:"Custom Bill",icon:r.jsx(Ta,{size:24}),path:"/create-custom-bill"},{label:"Patients",icon:r.jsx(Ds,{size:24}),path:"/dashboard/patients"},{label:"Debts",icon:r.jsx(hw,{size:24}),path:"/dashboard/patient-debts"}],KH="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",oOe={apiKey:KH},lOe=()=>{const{openCommandBar:t,isOpen:e,setPreFilledQuery:n}=Ic(),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=Lt(),c=b=>{b.stopPropagation(),i(!0)};v.useEffect(()=>{s&&(i(!1),n&&n(s),t(),o(null))},[s,t,n]);const d=ds(),{data:f,isLoading:p}=ON({queryKey:["recentPatients"],queryFn:async()=>{const b=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),j=await se(`/api/patients?${b.toString()}`);if(!j.ok)throw new Error("Failed to fetch recent patients");return j.json()},staleTime:60*1e3});v.useEffect(()=>{d.prefetchQuery({queryKey:Gt.clinicSettings,queryFn:async()=>{const b=await se("/api/clinics/settings");if(!b.ok)throw new Error("Failed to fetch clinic settings");return b.json()},staleTime:30*60*1e3}),d.prefetchQuery({queryKey:Gt.drugs.all,queryFn:async()=>{const b=await se("/api/drugs");if(!b.ok)throw new Error("Failed to fetch drugs");const j=await b.json();return j.drugs||j},staleTime:10*60*1e3}),d.prefetchQuery({queryKey:Gt.labTests.all,queryFn:async()=>{const b=await se("/api/lab-tests");if(!b.ok)throw new Error("Failed to fetch lab tests");return b.json()},staleTime:10*60*1e3})},[d]);const g=(f==null?void 0:f.patients)||[],x=b=>{b&&(d.prefetchQuery({queryKey:Gt.patients.context(b),queryFn:async()=>{const j=await se(`/api/patients/${b}/context`);if(!j.ok)throw new Error("Failed to fetch patient context");return j.json()},staleTime:5*60*1e3}),d.prefetchQuery({queryKey:Gt.dental.records(b),queryFn:async()=>{const j=await se(`/api/dental/patient/${b}`);if(!j.ok)throw new Error("Failed to fetch dental records");return j.json()},staleTime:5*60*1e3}),d.prefetchQuery({queryKey:Gt.patientDebts.balance(b),queryFn:async()=>{const j=await se(`/api/patient-debts/${b}/balance`);return j.ok?j.json():{netDebt:0}},staleTime:1*60*1e3}),d.prefetchQuery({queryKey:Gt.queue.latest(b),queryFn:async()=>{const j=await se(`/api/queue/patient/${b}/latest`);if(!j.ok)throw new Error("Failed to fetch latest queue status");const S=await j.json();return S!=null&&S._id&&d.prefetchQuery({queryKey:Gt.queue.entry(S._id),queryFn:async()=>{const _=await se(`/api/queue/doctor/complaint/${S._id}`);if(!_.ok)throw new Error("Failed to fetch complaint record");return _.json()},staleTime:1*60*1e3}),S},staleTime:5e3}))};return r.jsxs("div",{className:jr.container,children:[!e&&r.jsx("div",{className:jr.mobileDashboardGrid,children:sOe.map((b,j)=>r.jsxs("div",{className:jr.mobileDashboardItem,onClick:()=>l(b.path),children:[r.jsx("div",{className:jr.mobileDashboardIcon,children:b.icon}),r.jsx("span",{className:jr.mobileDashboardLabel,children:b.label})]},j))}),r.jsxs("div",{className:jr.visualContainer,children:[r.jsx("h1",{className:jr.brandTitle,children:"Newtons Ai"}),!e&&r.jsxs("div",{className:jr.searchBar,onClick:()=>t(),children:[r.jsx("div",{className:jr.searchIconWrapper,children:r.jsx(In,{className:jr.searchIcon})}),r.jsx("span",{className:jr.placeholderText,children:"Search or Ask AI..."}),r.jsx("div",{className:jr.micButtonWrapper,onClick:c,children:r.jsx(FN,{className:jr.micIcon})}),r.jsxs("div",{className:jr.shortcutHint,children:[r.jsx("span",{className:jr.key,children:"Ctrl"}),r.jsx("span",{className:jr.plus,children:"+"}),r.jsx("span",{className:jr.key,children:"K"})]})]})]}),!e&&(p||g.length>0)&&r.jsxs("div",{className:jr.newlyRegisteredSection,children:[r.jsx("div",{className:jr.newlyRegisteredLabel,children:"Newly Registered"}),r.jsx("div",{className:jr.recentList,children:p?[1,2,3,4,5].map(b=>r.jsxs("div",{className:jr.recentPatientPill,style:{cursor:"default"},children:[r.jsxs("div",{className:jr.recentNameContainer,children:[r.jsx(te,{width:100,height:18}),r.jsx(te,{width:30,height:20})]}),r.jsx("div",{className:jr.recentInfo,children:r.jsx(te,{width:80,height:14})})]},b)):g.map(b=>r.jsxs("div",{className:jr.recentPatientPill,onClick:()=>l(`/dashboard/edit-complaint/patient/${b.id}`),onMouseEnter:()=>b.id&&x(b.id),children:[r.jsxs("div",{className:jr.recentNameContainer,children:[r.jsx("span",{className:jr.recentName,children:b.name||"New Patient"}),r.jsxs("span",{className:jr.recentToken,children:["#",b.token]})]}),r.jsxs("div",{className:jr.recentInfo,children:[b.age?`${b.age} yrs`:"",b.age&&b.gender?" / ":"",b.gender||""]})]},b.id))})]}),a&&KH&&r.jsx(tS,{options:oOe,children:r.jsx(nS,{onClose:()=>i(!1),patientData:null,tokenNumber:null,onAiSummaryChange:o})})]})},YH=({queueList:t,onPatientClick:e})=>{const i=Array.from({length:13},(o,l)=>8+l),s={};return i.forEach(o=>s[o]=[]),t.forEach(o=>{const c=new Date(o.createdAt).getHours();c>=8&&c<=20&&s[c].push(o)}),r.jsx("div",{className:"appointment-timeline-container",children:i.map(o=>r.jsxs("div",{className:"timeline-hour-row",children:[r.jsx("div",{className:"timeline-time-label",children:r.jsxs("span",{className:"time-text",children:[o>12?o-12:o," ",o>=12?"PM":"AM"]})}),r.jsxs("div",{className:"timeline-track",children:[s[o].length===0?r.jsx("div",{className:"timeline-empty-slot"}):r.jsx("div",{className:"timeline-appointments-group",children:s[o].map(l=>{var c,d;return r.jsxs("div",{className:`timeline-card status-${l.status}`,onClick:()=>e(l),children:[r.jsxs("div",{className:"timeline-card-header",children:[r.jsx("span",{className:"patient-name-card",children:(c=l.Patient)==null?void 0:c.name}),r.jsxs("span",{className:"token-badge",children:["#",l.token_no]})]}),r.jsxs("div",{className:"timeline-card-details",children:[((d=l.Patient)==null?void 0:d.phone)&&r.jsxs("div",{className:"detail-row",children:[r.jsx(tg,{size:12}),r.jsx("span",{children:l.Patient.phone})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx(kb,{size:12}),r.jsx("span",{children:new Date(l.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),r.jsx("div",{className:`status-line-indicator status-color-${l.status}`})]},l.id)})}),r.jsx("div",{className:"timeline-grid-line"})]})]},o))})},QH=({isOpen:t,onClose:e,onAppointmentBooked:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(""),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(null);v.useEffect(()=>{t&&(i(""),o([]),c(null),f(""),S(null))},[t]);const _=Se.useMemo(()=>Uc(async E=>{if(E.length<2){o([]),b(!1);return}b(!0);try{const I=new URLSearchParams({search:encodeURIComponent(E),page:"1",limit:"10"}),L=await se(`/api/patients?${I.toString()}`);if(L.ok){const $=await L.json();o($.patients||[])}}catch(I){console.error("Error searching patients:",I)}finally{b(!1)}},300),[]),T=E=>{const I=E.target.value;i(I),l&&c(null),I.length>=2?(b(!0),_(I)):o([])},C=E=>{c(E),i(E.name),o([])},P=async()=>{if(a.trim()){g(!0);try{const E=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.trim(),age:null,gender:null,phone:null})});if(!E.ok){const $=await E.json();throw new Error($.message||"Failed to create patient")}const I=await E.json(),L={id:I.id,name:I.name,phone:I.phone,age:I.age,gender:I.gender,token:I.token};C(L)}catch(E){console.error("Failed to create patient:",E),S(E.message||"Failed to create patient")}finally{g(!1)}}},k=async()=>{if(!l){S("Please select a patient.");return}if(!d){S("Please select a date and time.");return}g(!0),S(null);try{if(!(await se("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id,date:new Date(d).toISOString(),description:"Appointment"})})).ok)throw new Error("Failed to book appointment");n(),e()}catch(E){console.error("Error booking appointment:",E),S(E.message||"Failed to book appointment.")}finally{g(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content appointment-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{style:{fontSize:"1.15rem"},children:"Book Appointment"}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx(Ft,{size:18})})]}),r.jsxs("div",{className:"modal-body",children:[j&&r.jsx("div",{className:"error-message",style:{padding:"6px 10px",fontSize:"0.85rem"},children:j}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{style:{fontSize:"0.8rem",marginBottom:"4px"},children:"Search Patient"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(In,{className:"search-icon-input",size:16}),r.jsx("input",{type:"text",placeholder:"Name, phone, or ID...",value:a,onChange:T,className:"modal-input",style:{padding:"8px 10px 8px 34px",fontSize:"0.9rem"}}),x&&r.jsx("div",{className:"spinner-sm"}),(s.length>0||a.length>0&&!x)&&!l&&r.jsxs("div",{className:"search-results-dropdown",style:{maxHeight:"180px"},children:[a.trim().length>0&&!x&&r.jsx("div",{className:"search-result-item create-patient-item",onClick:P,style:{padding:"8px 12px"},children:r.jsxs("div",{className:"patient-info",style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("div",{className:"create-icon-wrapper",style:{width:"28px",height:"28px"},children:r.jsx(BN,{size:14,color:"white"})}),r.jsxs("div",{children:[r.jsxs("span",{className:"name",style:{color:"#7c3aed",fontSize:"0.9rem"},children:['Create "',a,'"']}),r.jsx("span",{className:"details",style:{color:"#7c3aed",fontSize:"0.75rem"},children:"Add new patient"})]})]})}),s.map(E=>r.jsxs("div",{className:"search-result-item",onClick:()=>C(E),style:{padding:"8px 12px"},children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",style:{fontSize:"0.9rem"},children:E.name}),r.jsxs("span",{className:"details",style:{fontSize:"0.75rem"},children:[E.age?`${E.age} yrs`:""," ",E.gender?`/ ${E.gender}`:""]})]}),E.phone&&r.jsx("span",{className:"phone",style:{fontSize:"0.75rem"},children:E.phone})]},E.id))]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{style:{fontSize:"0.8rem",marginBottom:"4px"},children:"Appointment Date & Time"}),r.jsx("div",{className:"date-input-wrapper",children:r.jsx("input",{type:"datetime-local",className:"modal-input",value:d,onChange:E=>f(E.target.value),style:{padding:"8px 10px",fontSize:"0.9rem"}})})]}),l&&r.jsxs("div",{className:"selected-patient-preview",style:{marginTop:"4px"},children:[r.jsx("div",{className:"preview-label",style:{fontSize:"0.75rem"},children:"Selected Patient:"}),r.jsxs("div",{className:"preview-card",style:{padding:"8px",gap:"10px"},children:[r.jsx(Jn,{size:18,style:{color:"var(--primary-color)"}}),r.jsxs("div",{children:[r.jsx("strong",{style:{fontSize:"0.9rem"},children:l.name}),r.jsxs("div",{style:{fontSize:"0.75rem"},children:[l.age?`${l.age} yrs`:"-"," / ",l.gender||"-"]})]})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:k,className:"submit-button",disabled:p||!l||!d,children:p?"Booking...":"Book Appointment"})]})]})}):null},cOe=async t=>{const e=t?`/api/queue?date=${t}`:"/api/queue",n=await se(e);if(!n.ok)throw new Error("Failed to fetch queue");return n.json()};function XH(t){return ON({queryKey:["queue",t||"today"],queryFn:()=>cOe(t),staleTime:5e3,refetchInterval:7e3,placeholderData:e=>e,refetchOnMount:"always",refetchOnWindowFocus:!0})}function uOe(){const t=ds();return qW({mutationFn:async({queueId:e,status:n,doctorId:a})=>{const i=await se(`/api/queue/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,doctorId:a})});if(!i.ok)throw new Error("Failed to update queue status");return i.json()},onSuccess:(e,{queueId:n})=>{t.invalidateQueries({queryKey:Gt.queue.today}),t.invalidateQueries({queryKey:Gt.queue.entry(n)})}})}const Vj=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},dOe=t=>{if(!t)return"Unknown Date";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},RA=({title:t,icon:e,items:n,renderItemContent:a,isLoading:i,noDataText:s})=>{const o=v.useMemo(()=>{const l={};n.forEach(d=>{if(isNaN(d.date.getTime())){l["Unknown Date"]||(l["Unknown Date"]=[]),l["Unknown Date"].push(d);return}const f=dOe(d.originalDateString);l[f]||(l[f]=[]),l[f].push(d)});const c=Object.keys(l);return c.sort((d,f)=>{if(d==="Unknown Date")return 1;if(f==="Unknown Date")return-1;try{const p=b=>{const j=b.split(" ");if(j.length===3){const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(j[1]);if(_!==-1)return new Date(parseInt(j[2]),_,parseInt(j[0]))}return new Date(b)},g=p(d),x=p(f);if(!isNaN(g.getTime())&&!isNaN(x.getTime()))return x.getTime()-g.getTime()}catch(p){console.error("Error parsing date for sorting:",p)}return f.localeCompare(d)}),c.map(d=>({date:d,items:l[d]}))},[n]);return r.jsxs("div",{className:"dcp-group-card",children:[r.jsxs("h4",{className:"dcp-group-header",children:[e&&r.jsx(e,{size:14,className:"dcp-group-icon"}),t]}),r.jsxs("div",{className:"dcp-group-content",children:[i&&r.jsx("div",{className:"dcp-history-items",children:[1,2].map(l=>r.jsxs("div",{className:"dcp-history-item",style:{border:"none"},children:[r.jsx(te,{width:"60%",height:16,style:{marginBottom:"8px"}}),r.jsx(te,{width:"30%",height:12})]},l))}),!i&&n.length===0&&r.jsx("p",{className:"dcp-history-empty",children:s}),!i&&n.length>0&&r.jsx("div",{children:o.map(({date:l,items:c})=>r.jsxs("div",{className:"dcp-date-group",children:[r.jsx("h5",{className:"dcp-date-label",children:l}),r.jsx("div",{className:"dcp-date-items",children:c.map((d,f)=>r.jsx("div",{className:"dcp-history-item",children:a(d)},`${d.type}-${d.originalDateString}-${f}`))})]},l))})]})]})},Hj=()=>{var Ae,me;const{openCommandBar:t}=Ic(),[e,n]=v.useState(new Date),[a,i]=v.useState("list"),[s,o]=v.useState(!1),l=e.toISOString().split("T")[0],{data:c,isLoading:d,refetch:f,isError:p}=XH(l),g=(c==null?void 0:c.list)||[],x=(c==null?void 0:c.summary)||{currentPatient:null,nextPatient:null,waitingCount:0},b=d,[j,S]=v.useState(!1),[_,T]=v.useState(null),C=()=>{f()},[P,k]=v.useState(null),[E,I]=v.useState(null),[L,$]=v.useState(null),[q,F]=v.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[H,V]=v.useState(!1),[X,Y]=v.useState(null),{patientId:z}=Fa(),G=Lt(),ie=ds(),W=ye=>{ye&&(ie.prefetchQuery({queryKey:Gt.patients.context(ye),queryFn:async()=>{const le=await se(`/api/patients/${ye}/context`);if(!le.ok)throw new Error("Failed to fetch patient context");return le.json()},staleTime:5*60*1e3}),ie.prefetchQuery({queryKey:Gt.patientDebts.balance(ye),queryFn:async()=>{const le=await se(`/api/patient-debts/${ye}/balance`);return le.ok?le.json():{netDebt:0}},staleTime:1*60*1e3}),ie.prefetchQuery({queryKey:Gt.queue.latest(ye),queryFn:async()=>{const le=await se(`/api/queue/patient/${ye}/latest`);if(!le.ok)throw new Error("Failed to fetch latest queue status");const J=await le.json();return J!=null&&J._id&&ie.prefetchQuery({queryKey:Gt.queue.entry(J._id),queryFn:async()=>{const ae=await se(`/api/queue/doctor/complaint/${J._id}`);if(!ae.ok)throw new Error("Failed to fetch complaint record");return ae.json()},staleTime:1*60*1e3}),J},staleTime:5e3}),ie.prefetchQuery({queryKey:Gt.dental.records(ye),queryFn:async()=>{const le=await se(`/api/dental/patient/${ye}`);if(!le.ok)throw new Error("Failed to fetch dental records");return le.json()},staleTime:5*60*1e3}))},B=v.useCallback(async ye=>{$(null),k(null),I(null),V(!0),Y(null),F({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const le=await se(`/api/patients/${ye}`);if(!le.ok)throw new Error(`Patient details fetch failed (${le.status})`);const J=await le.json();k(J);const ae=await se(`/api/queue/patient/${ye}/latest`);if(!ae.ok&&ae.status!==404)throw new Error(`Queue entry fetch failed (${ae.status})`);if(ae.ok){const ue=await ae.json();I(ue)}await ce(ye)}catch(le){console.error("Error fetching specific patient data:",le),$(le.message||"Failed to load patient data."),Y(le.message||"Failed to load patient history.")}finally{V(!1)}},[]),ce=v.useCallback(async ye=>{V(!0),Y(null);try{const[le,J,ae,ue]=await Promise.all([se(`/api/queue/patient/${ye}/complaints`),se(`/api/lab/patient/${ye}`),se(`/api/lab/orders/patient/${ye}?status=pending`),se(`/api/pharmacy-orders/patient/${ye}`)]),ee=le.ok?await le.json():[],Ne=J.ok?await J.json():[],Te=ae.ok?await ae.json():[],Fe=ue.ok?await ue.json():[];F({pastComplaints:ee||[],labReports:Ne||[],pendingLabOrders:Te||[],pharmacyOrders:Fe||[]})}catch(le){console.error("Error fetching patient history:",le),Y(le.message||"Failed to load patient history."),F({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{V(!1)}},[]);v.useEffect(()=>{z?B(z):(k(null),I(null),f())},[z,B,f]),v.useEffect(()=>{var ye;if(!z&&((ye=x.currentPatient)==null?void 0:ye.status)==="consulting"){const le=x.currentPatient._id;le&&G(`/dashboard/edit-complaint/${le}`)}},[z,x.currentPatient,G]),v.useEffect(()=>{var ye;!z&&((ye=x.currentPatient)!=null&&ye.patientId)?ce(x.currentPatient.patientId):!z&&!x.currentPatient&&(F({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),V(!1),Y(null))},[z,(Ae=x.currentPatient)==null?void 0:Ae.patientId,ce]);const je=((me=x.currentPatient)==null?void 0:me.patientId)||(z?parseInt(z,10):null),K=v.useMemo(()=>{if(!je||!q.pastComplaints)return[];const ye=q.pastComplaints.map(le=>({date:new Date(le.createdAt),type:"Complaint",data:le,originalDateString:le.createdAt})).filter(le=>!isNaN(le.date.getTime()));return ye.sort((le,J)=>J.date.getTime()-le.date.getTime()),ye},[je,q.pastComplaints]),Ie=v.useMemo(()=>{if(!je)return[];const ye=[];return(q.pendingLabOrders??[]).forEach(le=>{const J=new Date(le.createdAt);isNaN(J.getTime())||ye.push({date:J,type:"Lab Order (Pending)",data:le,originalDateString:le.createdAt})}),(q.labReports??[]).forEach(le=>{const J=le.reportCreatedAt?new Date(le.reportCreatedAt):null;J&&!isNaN(J.getTime())&&ye.push({date:J,type:"Lab Report",data:le,originalDateString:le.reportCreatedAt})}),ye.sort((le,J)=>J.date.getTime()-le.date.getTime()),ye},[je,q.pendingLabOrders,q.labReports]),Ue=v.useMemo(()=>{if(!je||!q.pharmacyOrders)return[];const ye=q.pharmacyOrders.map(le=>({date:new Date(le.date),type:"Pharmacy Order",data:le,originalDateString:le.date})).filter(le=>!isNaN(le.date.getTime()));return ye.sort((le,J)=>J.date.getTime()-le.date.getTime()),ye},[je,q.pharmacyOrders]),ze=async()=>{S(!0),T(null);try{await se("/api/queue/doctor/next",{method:"POST"}),await f()}catch(ye){console.error("Error calling next patient:",ye),T(ye.message||"Failed to call next patient.")}finally{S(!1)}},Le=ye=>{switch(ye){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return ye}},[be,Ce]=v.useState("info");return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"dcp-container",children:[r.jsxs("div",{className:"dcp-header-row",children:[r.jsx("button",{onClick:()=>G(-1),className:"dcp-back-btn",children:r.jsx(on,{size:20})}),r.jsx("h1",{className:"dcp-title",children:"Doctor Consultation Panel"})]}),z?r.jsxs(r.Fragment,{children:[L&&r.jsx("div",{className:"dcp-error",children:L}),P&&r.jsx("div",{className:"dcp-card dcp-card-violet",children:r.jsxs("div",{className:"dcp-card-content",children:[r.jsxs("div",{className:"dcp-mobile-tabs",children:[r.jsx("button",{className:`dcp-mobile-tab ${be==="info"?"active":""}`,onClick:()=>Ce("info"),children:"Patient Record"}),r.jsx("button",{className:`dcp-mobile-tab ${be==="history"?"active":""}`,onClick:()=>Ce("history"),children:"History"})]}),r.jsxs("div",{className:"dcp-flex-split",children:[r.jsxs("div",{className:`dcp-flex-half dcp-tab-info ${be==="info"?"":"hidden"}`,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("div",{className:"dcp-section-header dcp-section-header-violet",children:"Patient Record"}),r.jsxs("button",{onClick:()=>G("/dashboard/doctor"),className:"dcp-btn dcp-btn-outline",style:{padding:"4px 10px",fontSize:"0.75rem"},children:[r.jsx(on,{size:12})," Back to Queue"]})]}),r.jsx("div",{className:"dcp-patient-name dcp-patient-name-gradient",children:P.name}),r.jsxs("div",{className:"dcp-patient-meta",style:{marginBottom:"12px"},children:[r.jsxs("span",{className:"dcp-patient-badge",children:[P.age||"N/A"," Yrs"]}),r.jsx("span",{className:"dcp-patient-badge",children:P.gender||"N/A"})]}),r.jsxs("div",{className:"dcp-activity-box",children:[r.jsx("div",{className:"dcp-activity-label",children:"Latest Activity"}),E?r.jsxs("div",{children:[r.jsxs("div",{className:"dcp-activity-content",children:[r.jsx("strong",{children:"Complaint:"})," ",E.complaint||r.jsx("span",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"None"})]}),r.jsxs("div",{style:{marginTop:"8px"},children:[r.jsx("span",{className:`dcp-status ${E.status==="consulting"?"dcp-status-consulting":E.status==="seen"?"dcp-status-seen":E.status==="waiting"?"dcp-status-waiting":""}`,children:Le(E.status)}),E.status==="consulting"&&E._id&&r.jsx("button",{onClick:()=>G(`/dashboard/edit-complaint/${E._id}`),onMouseEnter:()=>W(String(P.id)),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px",padding:"4px 12px"},children:"Resume"})]}),_&&r.jsx("div",{className:"dcp-error-card",style:{marginBottom:"16px"},children:_}),E.case_summary&&r.jsxs("div",{className:"dcp-ai-summary",style:{marginTop:"10px"},children:[r.jsx("div",{className:"dcp-ai-label",children:" AI Summary"}),r.jsx("p",{className:"dcp-ai-text",children:E.case_summary})]})]}):r.jsx("p",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"No queue entry found for this patient today."})]})]}),r.jsxs("div",{className:`dcp-flex-half dcp-history-section dcp-tab-history ${be==="history"?"":"hidden"} dcp-desktop-only`,children:[r.jsxs("div",{className:"dcp-history-header",children:[r.jsx("span",{className:"dcp-history-title",children:"Patient History"}),H&&r.jsx(te,{width:60,height:14})]}),X&&r.jsx("div",{className:"dcp-error",children:X}),r.jsxs("div",{className:"dcp-history-scroll dcp-scrollbar",children:[r.jsx(RA,{title:"Past Complaints",icon:Ta,items:K,isLoading:H,noDataText:"No past complaints.",renderItemContent:ye=>r.jsxs("div",{children:[ye.data.complaint,r.jsx("div",{className:"dcp-history-timestamp",children:Vj(ye.originalDateString)})]})}),r.jsx(RA,{title:"Lab Reports",icon:ls,items:Ie,isLoading:H,noDataText:"No lab history.",renderItemContent:ye=>ye.type==="Lab Order (Pending)"?r.jsxs("div",{children:[r.jsx("span",{className:"dcp-type-pending",children:"Pending Order"}),r.jsx("div",{children:ye.data.tests.map(le=>le.name).join(", ")}),r.jsx("div",{className:"dcp-history-timestamp",children:Vj(ye.originalDateString)})]}):r.jsxs("div",{children:[r.jsxs("span",{className:"dcp-type-report",children:["Report: ",ye.data.testName]}),r.jsxs("div",{style:{fontStyle:"italic"},children:['"',ye.data.reportFindings.substring(0,50),ye.data.reportFindings.length>50?"...":"",'"']}),r.jsx("div",{className:"dcp-history-timestamp",children:Vj(ye.originalDateString)})]})}),r.jsx(RA,{title:"Medications",icon:ud,items:Ue,isLoading:H,noDataText:"No pharmacy history.",renderItemContent:ye=>r.jsxs("div",{children:[ye.data.medications.map(le=>`${le.name} (${le.pack_quantity||0}p ${le.loose_quantity||0}l)`).join(", "),r.jsxs("div",{className:"dcp-history-timestamp",children:[Vj(ye.originalDateString),"  ",r.jsx("span",{style:{textTransform:"capitalize"},children:ye.data.status})]})]})}),K.length===0&&Ie.length===0&&Ue.length===0&&!H&&r.jsx("div",{className:"dcp-empty-state",children:"No history records found."})]})]})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[p&&r.jsx("div",{className:"dcp-error",children:"Failed to fetch queue data."}),b&&!x.currentPatient?r.jsxs("div",{className:"dcp-card",style:{padding:"2rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx(te,{width:"40%",height:32}),r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx(te,{width:"60%",height:24}),r.jsx(te,{width:"40%",height:16,style:{marginTop:"8px"}})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsx(te,{width:"100%",height:80,style:{borderRadius:"12px"}})}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[r.jsx(te,{width:180,height:40}),r.jsx(te,{width:120,height:40})]})]}):r.jsx("div",{className:"dcp-empty-state",children:x.currentPatient?"Redirecting to consultation...":"No patient currently being seen. Use 'Call Next' or search for a patient record."})]}),r.jsxs("div",{className:"dcp-scheduler-section",children:[r.jsx("div",{className:"queue-header",children:r.jsx("div",{className:"queue-actions",children:r.jsxs("div",{className:"controls-row",children:[r.jsxs("div",{className:"view-toggle-container",children:[r.jsx("button",{className:`view-toggle-btn ${a==="list"?"active":""}`,onClick:()=>i("list"),title:"List View",children:r.jsx($z,{size:16})}),r.jsx("button",{className:`view-toggle-btn ${a==="timeline"?"active":""}`,onClick:()=>i("timeline"),title:"Timeline View",children:r.jsx(VD,{size:16})})]}),r.jsxs("div",{className:"date-picker-container",children:[r.jsx(ua,{size:16,className:"text-gray-500"}),r.jsx("input",{type:"date",className:"date-input",value:e.toISOString().split("T")[0],onChange:ye=>n(new Date(ye.target.value))})]}),r.jsxs("button",{onClick:()=>o(!0),className:"appointment-button",children:[r.jsx(kb,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),r.jsx("span",{className:"sm:hidden",children:"Book"})]}),r.jsx("button",{onClick:()=>t(),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px"},children:"Search Patient"})]})})}),r.jsx(QH,{isOpen:s,onClose:()=>{o(!1),f()},onAppointmentBooked:C}),d&&g.length===0?r.jsx("div",{style:{padding:"20px"},children:r.jsx(te,{width:"100%",height:200})}):a==="timeline"?r.jsx(YH,{queueList:g,onPatientClick:ye=>G(`/dashboard/edit-complaint/${ye.id}`)}):r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Details"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:g.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"20px"},children:"No appointments for this date."})}):g.map(ye=>{var le,J,ae;return r.jsxs("tr",{onClick:()=>G(`/dashboard/edit-complaint/${ye.id}`),className:"queue-row-clickable",children:[r.jsxs("td",{children:["#",ye.token_no]}),r.jsx("td",{children:r.jsx("div",{className:"patient-info",children:r.jsx("span",{className:"name",children:(le=ye.Patient)==null?void 0:le.name})})}),r.jsxs("td",{className:"hidden-mobile",children:[(J=ye.Patient)==null?void 0:J.age,"y, ",(ae=ye.Patient)==null?void 0:ae.gender,"  ",ye.complaint||"-"]}),r.jsx("td",{children:r.jsx("span",{className:`dcp-status ${ye.status==="waiting"?"dcp-status-waiting":ye.status==="consulting"?"dcp-status-consulting":ye.status==="seen"?"dcp-status-seen":""}`,children:Le(ye.status)})}),r.jsx("td",{children:r.jsx("button",{className:"dcp-btn dcp-btn-outline",style:{padding:"4px 8px",fontSize:"0.75rem"},children:"View"})})]},ye.id)})})]})})]}),r.jsxs("div",{className:"dcp-bottom-bar",children:[r.jsx("button",{onClick:ze,disabled:j||b||!x.nextPatient||!!x.currentPatient,className:"dcp-btn dcp-btn-teal",children:"Call Next Patient"}),r.jsxs("div",{className:"dcp-waiting-count",children:[x.waitingCount," patients waiting"]})]})]})]})})},hOe="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",fOe={apiKey:hOe},yv=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(null),g=v.useRef(null),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_,T]=v.useState(null),[C,P]=v.useState(null),[k,E]=v.useState([]),[I,L]=v.useState(!0),[$,q]=v.useState(!1);Yc();const F=Lt(),H=$r(),V=fO({settings:{},staffList:[]}),X=ds(),Y=me=>{me&&(X.prefetchQuery({queryKey:Gt.patients.context(me),queryFn:async()=>{const ye=await se(`/api/patients/${me}/context`);if(!ye.ok)throw new Error("Failed to fetch patient context");return ye.json()},staleTime:5*60*1e3}),X.prefetchQuery({queryKey:Gt.patientDebts.balance(me),queryFn:async()=>{const ye=await se(`/api/patient-debts/${me}/balance`);return ye.ok?ye.json():{netDebt:0}},staleTime:1*60*1e3}),X.prefetchQuery({queryKey:Gt.queue.latest(me),queryFn:async()=>{const ye=await se(`/api/queue/patient/${me}/latest`);if(!ye.ok)throw new Error("Failed to fetch latest queue status");const le=await ye.json();return le!=null&&le._id&&X.prefetchQuery({queryKey:Gt.queue.entry(le._id),queryFn:async()=>{const J=await se(`/api/queue/doctor/complaint/${le._id}`);if(!J.ok)throw new Error("Failed to fetch complaint record");return J.json()},staleTime:1*60*1e3}),le},staleTime:5e3}),X.prefetchQuery({queryKey:Gt.dental.records(me),queryFn:async()=>{const ye=await se(`/api/dental/patient/${me}`);if(!ye.ok)throw new Error("Failed to fetch dental records");return ye.json()},staleTime:5*60*1e3}))},{selectedImage:z,handleImageSelect:G,clearImage:ie}=V,W=v.useRef(null),B=me=>{var le;const ye=(le=me.target.files)==null?void 0:le[0];ye&&G(ye)};v.useEffect(()=>{V.chatHistory.length>0&&$&&V.isProcessing},[V.chatHistory.length]),v.useEffect(()=>{(async()=>{L(!0);try{const ye=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),le=await se(`/api/patients?${ye.toString()}`);if(le.ok){const J=await le.json();E(J.patients||[])}}catch(ye){console.error("Error fetching recent patients:",ye)}finally{L(!1)}})()},[]),v.useEffect(()=>{V.setChatQuery(t)},[t]);const ce=v.useCallback(async me=>{if(!(me||t).trim()){p("Please enter complaint details.");return}d(!0),p(null),me&&me!==V.chatQuery&&V.setChatQuery(me);try{V.handleSendMessage(),e("")}catch(le){console.error("AI Error:",le),p("AI failed to process. Try again."),d(!1)}},[t,V]);v.useEffect(()=>{!V.isProcessing&&c&&d(!1)},[V.isProcessing,c]),v.useEffect(()=>{const me=g.current;me&&(me.style.height="auto",me.style.height=`${me.scrollHeight}px`);const le=new URLSearchParams(H.search).get("caseDetails");if(le){const J=decodeURIComponent(le);J!==t&&(e(J),b(!0))}},[H.search,t]),v.useEffect(()=>{x&&t.trim()&&(F(H.pathname,{replace:!0}),ce(t),b(!1))},[x,t,ce,F,H.pathname]),v.useEffect(()=>{const me=g.current;me&&(me.style.height="auto",me.style.height=`${me.scrollHeight}px`)},[t]),v.useEffect(()=>{_&&(e(_),S(!1),V.setChatQuery(_),setTimeout(()=>V.handleSendMessage(),0),T(null))},[_,V]);const je=()=>{P({id:null,token:null,name:"New Case",age:null,gender:null}),S(!0)},K=v.useMemo(()=>Uc(async me=>{const ye=me.trim(),le=/^\d+$/.test(ye),J=ye.split(/\s+/).length;if(ye.length<2||le&&ye.length>10||!le&&J>2){a([]),s(!1),l(null);return}s(!0),l(null);try{const ae=new URLSearchParams({search:encodeURIComponent(me),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),ue=await se(`/api/patients?${ae.toString()}`);if(!ue.ok){const Ne=await ue.text();throw new Error(`API Error (${ue.status}): ${Ne||ue.statusText}`)}const ee=await ue.json();a(ee.patients)}catch(ae){console.error("Error searching patients:",ae),l(ae.message||"Failed to search patients."),a([])}finally{s(!1)}},300),[]),Ie=me=>{const ye=me.target.value;e(ye);const le=ye.trim(),J=/^\d+$/.test(le),ae=le.split(/\s+/).length;le.length>=2&&!(J&&le.length>10||!J&&ae>2)?s(!0):(s(!1),a([])),K(ye)},Ue=me=>{me.key==="Enter"&&!me.shiftKey&&(me.preventDefault(),t.trim()&&!i&&Ae())},ze=async me=>{me&&me.id&&F(`/dashboard/edit-complaint/patient/${me.id}`)},Le=[{icon:"",title:"Example: Fever & Cold",description:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough",text:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough"},{icon:"",title:"Example: Stomach Ache",description:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days",text:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days"}],be=me=>{e(me),setTimeout(()=>{V.handleSendMessage(me),e(""),a([])},50)},Ce=()=>{e(""),a([]),V.refreshChat()},Ae=()=>{!t.trim()&&!z||(K.cancel(),V.handleSendMessage(t),e(""),a([]))};return r.jsxs("div",{className:"patient-search-page-container",children:[r.jsxs("div",{className:"patient-search-header",children:[r.jsx("button",{onClick:()=>F("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"}),r.jsx("button",{onClick:()=>F(-1),className:"patient-search-button patient-search-button-back",children:r.jsx(on,{size:16})})]}),r.jsxs("div",{className:"patient-search-content-box",children:[o&&r.jsx("p",{className:"patient-search-error",children:o}),f&&r.jsx("p",{className:"patient-search-error",children:f}),I?r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:[1,2,3,4,5].map(me=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(te,{width:100,height:18}),r.jsx(te,{width:30,height:14})]}),r.jsx("div",{className:"recent-info",children:r.jsx(te,{width:60,height:12})})]},me))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}):k.length>0&&r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:k.map(me=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>ze(me),onMouseEnter:()=>me.id&&Y(me.id),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:me.name||"New Patient"}),r.jsxs("span",{className:"recent-token",children:["#",me.token]})]}),r.jsxs("div",{className:"recent-info",children:[me.age," yrs / ",me.gender]})]},me.id))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}),V.chatHistory.length===0&&n.length===0&&r.jsxs("div",{className:"example-cases-section",children:[r.jsxs("div",{className:"example-cases-header",children:[r.jsx("span",{className:"sparkles-icon",children:""}),r.jsx("h3",{children:"Try AI with Example Cases"})]}),r.jsx("div",{className:"example-cards-container",children:Le.map((me,ye)=>r.jsxs("div",{className:"example-case-card",onClick:()=>be(me.text),children:[r.jsx("div",{className:"example-icon",children:me.icon}),r.jsxs("div",{className:"example-content",children:[r.jsx("div",{className:"example-title",children:me.title}),r.jsx("div",{className:"example-description",children:me.description})]})]},ye))})]})]}),V.chatHistory.length>0&&!c&&r.jsxs("div",{className:`ai-chat-overlay ${$?"minimized":""}`,children:[r.jsxs("div",{className:"ai-chat-header",children:[r.jsx("span",{children:"AI Assistant"}),r.jsx("div",{className:"ai-chat-controls",children:r.jsx("button",{className:"icon-btn",onClick:()=>Ce(),title:"Clear Chat",children:r.jsx(Ft,{size:16})})})]}),r.jsxs("div",{className:"ai-chat-messages",children:[V.chatHistory.map((me,ye)=>r.jsx("div",{className:`chat-bubble ${me.role==="model"?"model":"user"}`,children:me.role==="system"?r.jsx("i",{children:me.text}):me.text},ye)),V.isProcessing&&r.jsx("div",{className:"chat-bubble model",children:"Typing..."})]})]}),n.length>0&&!c&&r.jsxs("div",{className:"patient-search-results-overlay",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem"},children:[r.jsx("div",{style:{fontWeight:600,color:"#64748b"},children:"Found Patients"}),r.jsx("button",{onClick:()=>a([]),style:{border:"none",background:"transparent",color:"#94a3b8",cursor:"pointer"},children:r.jsx(Ft,{size:14})})]}),n.map(me=>r.jsxs("div",{onClick:()=>ze(me),onMouseEnter:()=>me.id&&Y(me.id),className:"patient-search-result-item",children:[r.jsxs("div",{className:"patient-search-result-item-name-container",children:[r.jsxs("span",{className:"patient-search-result-item-token",children:["[#",me.token,"]"]}),r.jsx("span",{className:"patient-search-result-item-name",children:me.name})]}),r.jsxs("div",{className:"patient-search-result-item-details",children:[me.age?`${me.age} yrs`:"",me.age&&me.gender?" / ":"",me.gender||"N/A"]})]},me.id))]}),r.jsxs("div",{className:"sticky-chat-input-box",children:[r.jsxs("div",{className:"cmd-input-container",children:[z&&r.jsxs("div",{className:"cmd-image-preview",children:[r.jsx("img",{src:z,alt:"Selected"}),r.jsx("button",{className:"cmd-image-delete",onClick:ie,children:r.jsx(Ft,{size:12})})]}),r.jsx("textarea",{ref:g,placeholder:"Search (Name/Token/Phone), Ask AI, or Enter New Case...",value:t,onChange:Ie,onKeyDown:Ue,className:"cmd-input",disabled:c||V.isProcessing,rows:1}),r.jsxs("div",{className:"cmd-controls-group",children:[r.jsx("input",{type:"file",ref:W,onChange:B,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:"cmd-icon-btn",onClick:()=>{var me;return(me=W.current)==null?void 0:me.click()},title:"Attach Image",children:r.jsx(HD,{})}),r.jsx("button",{className:"cmd-icon-btn",onClick:je,title:"Voice Input",children:r.jsx(FN,{})}),(t.length>0||z)&&r.jsx("button",{className:"cmd-icon-btn send-btn",onClick:Ae,title:"Send",children:r.jsx($N,{})})]})]}),j&&r.jsx(tS,{options:fOe,children:r.jsx(nS,{onClose:()=>S(!1),patientData:C,tokenNumber:null,onAiSummaryChange:T})})]})]})},PM=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(!1),c=Lt(),d=v.useRef(null);v.useEffect(()=>{const C=P=>{d.current&&!d.current.contains(P.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const f=v.useCallback(fU.debounce(async C=>{if(C.trim().length<2){a([]),s(!1);return}s(!0);try{const P=new URLSearchParams({search:encodeURIComponent(C),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),k=await se(`/api/patients?${P.toString()}`);if(!k.ok)throw new Error("Failed to fetch patients");const E=await k.json();a(E.patients)}catch{a([])}finally{s(!1)}},400),[]);v.useEffect(()=>(t?(s(!0),f(t)):(a([]),f.cancel(),s(!1)),()=>f.cancel()),[t,f]);const p=C=>{c(`/patient/${encodeURIComponent(C.id)}/admission-billing`)},g=()=>{e(""),a([]),l(!1)},x=C=>C.slice(0,1).toUpperCase(),[b,j]=v.useState(!1),[S,_]=v.useState(!1),T=async()=>{_(!0);try{const C=await se("/api/patients/discharge-all",{method:"POST"}),P=await C.json();C.ok?(alert(P.message),a([]),e("")):alert(P.message||"Failed to discharge patients")}catch(C){console.error("Bulk discharge error:",C),alert("An error occurred while processing bulk discharge.")}finally{_(!1),j(!1)}};return r.jsxs("div",{className:"ma-container",children:[r.jsxs("div",{className:"ma-header-section",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ma-title",children:"Manage Admission"}),r.jsx("p",{className:"ma-subtitle",children:"Search for a patient to admit, discharge, or view billing details"})]}),r.jsx("button",{className:"ma-discharge-all-btn",onClick:()=>j(!0),children:"Discharge Everyone"})]}),b&&r.jsx("div",{className:"ma-modal-overlay",children:r.jsxs("div",{className:"ma-modal-content",children:[r.jsx("h3",{children:"Confirm Bulk Discharge"}),r.jsxs("p",{children:["Are you sure you want to discharge ",r.jsx("strong",{children:"ALL"})," currently admitted patients?"]}),r.jsx("div",{className:"ma-modal-warning",children:r.jsx("p",{children:" This will finalize bills for all admitted patients."})}),r.jsxs("div",{className:"ma-modal-actions",children:[r.jsx("button",{className:"ma-modal-cancel",onClick:()=>j(!1),disabled:S,children:"Cancel"}),r.jsx("button",{className:"ma-modal-confirm",onClick:T,disabled:S,children:S?"Processing...":"Yes, Discharge All"})]})]})}),r.jsxs("div",{className:"ma-search-wrapper",ref:d,children:[i?r.jsxs("div",{className:"ma-loading-spinner",children:[r.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e2e8f0",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]}):r.jsx(In,{className:"ma-search-icon",size:20}),r.jsx("input",{type:"text",value:t,onChange:C=>{e(C.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search by Name, Phone, or Token...",className:"ma-search-input",autoFocus:!0}),t&&r.jsx("div",{className:"ma-clear-icon",onClick:g,children:r.jsx(Ft,{size:18})}),r.jsxs("div",{className:`ma-results-dropdown ${o&&(n.length>0||i)?"open":""}`,children:[n.map(C=>{const P=C.admission_date&&!C.discharge_date;return r.jsxs("div",{onClick:()=>p(C),className:"ma-result-item",children:[r.jsxs("div",{className:"ma-patient-info",children:[r.jsx("div",{className:"ma-avatar",children:x(C.name)}),r.jsxs("div",{className:"ma-patient-text",children:[r.jsxs("h4",{children:[C.name,r.jsxs("span",{className:"ma-patient-token",children:["#",C.token]})]}),r.jsxs("p",{className:"ma-patient-subtext",children:[C.phone||"No phone","  ",C.age?`${C.age} Y`:"","  ",C.gender||""]})]})]}),r.jsx("div",{className:`ma-badge ${P?"ma-badge-admitted":"ma-badge-discharged"}`,children:P?"ADMITTED":"NOT ADMITTED"})]},C.id)}),t.length>2&&!i&&n.length===0&&r.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:['No patients found matching "',t,'"']})]})]})]})},xB=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"boolean",label:"Yes/No"},{value:"computed",label:"Computed (Formula)"}],DM=({isOpen:t,onClose:e,entityType:n,entityLabel:a,currentConfig:i,onConfigUpdated:s})=>{const[o,l]=v.useState([]),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState({key:"",label:"",type:"text",required:!1,formula:""});v.useEffect(()=>{t&&(l(i[n]||[]),p(null),x({key:"",label:"",type:"text",required:!1,formula:""}))},[t,i,n]);const b=T=>T.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_"),j=()=>{var C;if(!g.label.trim()){p("Column label is required");return}if(g.type==="computed"&&!((C=g.formula)!=null&&C.trim())){p("Formula is required for computed columns");return}const T=b(g.label);if(o.some(P=>P.key===T)){p("A column with this name already exists");return}l([...o,{...g,key:T}]),x({key:"",label:"",type:"text",required:!1,formula:""}),p(null)},S=T=>{l(o.filter(C=>C.key!==T))},_=async()=>{d(!0),p(null);try{const T={...i,[n]:o};if(!(await se("/api/clinics/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_columns_config:T})})).ok)throw new Error("Failed to save custom columns");s(T),e()}catch(T){p(T.message||"Failed to save")}finally{d(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content manage-columns-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsxs("h2",{children:["Manage Custom Columns - ",a]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Ft,{size:18})})]}),f&&r.jsx("div",{className:"error-message",children:f}),r.jsxs("div",{className:"columns-list",children:[r.jsx("h4",{children:"Current Custom Columns"}),o.length===0?r.jsx("p",{className:"no-columns",children:"No custom columns defined yet."}):r.jsx("div",{style:{overflowX:"auto",borderRadius:"6px",border:"1px solid var(--border-color, #e5e7eb)"},children:r.jsxs("table",{className:"columns-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Label"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Details"}),r.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),r.jsx("tbody",{children:o.map(T=>{var C;return r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:500},children:T.label}),r.jsx("td",{children:((C=xB.find(P=>P.value===T.type))==null?void 0:C.label)||T.type}),r.jsx("td",{children:T.type==="computed"?r.jsx("code",{className:"computed-formula",children:T.formula}):r.jsx("span",{style:{fontSize:"0.75rem",opacity:.8},children:T.required?"Required":"Optional"})}),r.jsx("td",{style:{textAlign:"center"},children:r.jsx("button",{onClick:()=>S(T.key),className:"remove-column-btn",title:"Remove Column",style:{padding:"0.2rem"},children:r.jsx(Vn,{size:14})})})]},T.key)})})]})})]}),r.jsxs("div",{className:"add-column-section",children:[r.jsx("h4",{children:"Add New Column"}),r.jsxs("div",{className:"add-column-form",children:[r.jsx("input",{type:"text",placeholder:"Label (e.g., BMI)",value:g.label,onChange:T=>x({...g,label:T.target.value}),className:"column-input",style:{flex:1.5}}),r.jsx("select",{value:g.type,onChange:T=>x({...g,type:T.target.value}),className:"column-select",children:xB.map(T=>r.jsx("option",{value:T.value,children:T.label},T.value))}),g.type==="computed"?r.jsx("input",{type:"text",placeholder:"Formula (e.g. weight / (height * height))",value:g.formula||"",onChange:T=>x({...g,formula:T.target.value}),className:"column-input",style:{flex:2}}):r.jsxs("label",{className:"required-checkbox",children:[r.jsx("input",{type:"checkbox",checked:g.required,onChange:T=>x({...g,required:T.target.checked})}),r.jsx("span",{style:{fontSize:"0.8rem"},children:"Required"})]}),r.jsxs("button",{onClick:j,className:"add-column-btn",children:[r.jsx(Hn,{size:14})," Add"]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:e,className:"cancel-btn",disabled:c,children:"Cancel"}),r.jsxs("button",{onClick:_,className:"save-btn",disabled:c,children:[r.jsx(cs,{size:16})," ",c?"Saving...":"Save Changes"]})]})]})}):null},LA=15,wD=()=>{const t=Lt(),{customColumnsConfig:e,refetch:n}=rS(),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(!0),[d,f]=v.useState(null),[p,g]=v.useState(""),[x,b]=v.useState(1),[j,S]=v.useState(1),[_,T]=v.useState(0),[C,P]=v.useState("created_at"),k=ds(),E=ee=>{ee&&(k.prefetchQuery({queryKey:Gt.patients.context(ee),queryFn:async()=>{const Ne=await se(`/api/patients/${ee}/context`);if(!Ne.ok)throw new Error("Failed to fetch patient context");return Ne.json()},staleTime:5*60*1e3}),k.prefetchQuery({queryKey:Gt.patientDebts.balance(ee),queryFn:async()=>{const Ne=await se(`/api/patient-debts/${ee}/balance`);return Ne.ok?Ne.json():{netDebt:0}},staleTime:1*60*1e3}),k.prefetchQuery({queryKey:Gt.queue.latest(ee),queryFn:async()=>{const Ne=await se(`/api/queue/patient/${ee}/latest`);if(!Ne.ok)throw new Error("Failed to fetch latest queue status");const Te=await Ne.json();return Te!=null&&Te._id&&k.prefetchQuery({queryKey:Gt.queue.entry(Te._id),queryFn:async()=>{const Fe=await se(`/api/queue/doctor/complaint/${Te._id}`);if(!Fe.ok)throw new Error("Failed to fetch complaint record");return Fe.json()},staleTime:1*60*1e3}),Te},staleTime:5e3}),k.prefetchQuery({queryKey:Gt.dental.records(ee),queryFn:async()=>{const Ne=await se(`/api/dental/patient/${ee}`);if(!Ne.ok)throw new Error("Failed to fetch dental records");return Ne.json()},staleTime:5*60*1e3}))},[I,L]=v.useState("desc"),[$,q]=v.useState(""),[F,H]=v.useState(!1),[V,X]=v.useState(null),[Y,z]=v.useState([]),[G,ie]=v.useState(""),[W,B]=v.useState(!1),[ce,je]=v.useState(null),[K,Ie]=v.useState(!0),[Ue,ze]=v.useState(null),[Le,be]=v.useState(p);Yc(),v.useEffect(()=>{const ee=setTimeout(()=>{be(p),b(1)},500);return()=>{clearTimeout(ee)}},[p]);const Ce=v.useCallback(async()=>{Ie(!0),ze(null);try{const ee=await se("/api/subscriptions");if(!ee.ok){let Te=`Failed to fetch subscription plans (${ee.status})`;try{Te=(await ee.json()).message||Te}catch{}throw new Error(Te)}const Ne=await ee.json();z(Ne)}catch(ee){console.error("Error fetching subscription plans:",ee),ze(ee.message||"An unknown error occurred while fetching plans."),z([])}finally{Ie(!1)}},[]),Ae=v.useCallback(async(ee,Ne,Te,Fe,xe)=>{c(!0),f(null);try{const ne=new URLSearchParams({page:ee.toString(),limit:LA.toString(),sortBy:Te,sortOrder:Fe});Ne&&ne.append("search",Ne),xe&&ne.append("gender",xe);const oe=await se(`/api/patients?${ne.toString()}`);if(!oe.ok){const De=await oe.json();throw new Error(De.message||"Failed to fetch patients")}const _e=await oe.json();o(_e.patients),T(_e.totalCount),b(_e.currentPage),S(_e.totalPages)}catch(ne){console.error("Error fetching patients:",ne),f(`Failed to load patients: ${ne.message}`),o([]),T(0),b(1),S(1)}finally{c(!1)}},[]);v.useEffect(()=>{Ae(x,Le,C,I,$),Ce()},[x,Le,C,I,$,Ae,Ce]);const me=ee=>{const Ne=C===ee&&I==="asc"?"desc":"asc";P(ee),L(Ne),b(1)},ye=ee=>{try{return new Date(ee).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},le=()=>{H(!1),X(null),ie(""),je(null),B(!1)},J=async(ee,Ne)=>{o(Te=>Te.map(Fe=>Fe.id===ee?{...Fe,insurance_type:Ne}:Fe));try{const Te=await se(`/api/patients/${ee}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:Ne})});if(!Te.ok){const Fe=await Te.json();throw new Error(Fe.message||"Failed to update insurance type")}}catch(Te){console.error("Error updating insurance type:",Te),Ae(x,Le,C,I,$)}},ae=(ee,Ne)=>{const Te=new Date(ee),Fe=Ne.interval||1;switch(Ne.period){case"daily":Te.setDate(ee.getDate()+Fe);break;case"weekly":Te.setDate(ee.getDate()+Fe*7);break;case"monthly":Te.setMonth(ee.getMonth()+Fe);break;case"yearly":Te.setFullYear(ee.getFullYear()+Fe);break;default:console.warn(`Unknown subscription period: ${Ne.period}. Defaulting to 1 month.`),Te.setMonth(ee.getMonth()+1)}return Te},ue=async()=>{if(!V||!G){je("Please select a subscription plan.");return}const ee=Y.find(Ne=>Ne.id===G);if(!ee){je("Selected plan details not found.");return}B(!0),je(null);try{const Ne=new Date,Te=ae(Ne,ee),Fe={subscription_plan_id:G,subscription_status:"active",subscription_start_date:Ne.toISOString(),subscription_end_date:Te.toISOString(),subscription_payment_method:"manual"},xe=await se(`/api/patients/${V.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(!xe.ok){const ne=await xe.json();throw new Error(ne.message||"Failed to update patient subscription")}le(),Ae(x,Le,C,I,$)}catch(Ne){console.error("Error starting subscription:",Ne),je(`Failed to start subscription: ${Ne.message}`)}finally{B(!1)}};return r.jsxs("div",{className:"all-patients-container",children:[r.jsxs("div",{className:"all-patients-header-section",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:16})}),r.jsxs("h1",{className:"all-patients-title",children:[r.jsx(Jn,{size:28}),"All Patients"]})]}),r.jsxs("div",{className:"controls-container",children:[!K&&!Ue&&Y.length>0&&r.jsx("div",{className:"compact-subscriptions",children:Y.map(ee=>r.jsxs("span",{className:"plan-chip",title:`${ee.name}: ${ee.price} / ${ee.interval} ${ee.period}${ee.description?" - "+ee.description:""}`,children:[ee.name,": ",ee.price]},ee.id))}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search...",className:"search-input",value:p,onChange:ee=>g(ee.target.value)}),r.jsx(In,{className:"search-input-icon",size:16})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("div",{className:"filter-select-container",children:[r.jsx(wX,{size:14,className:"filter-select-icon"}),r.jsxs("select",{id:"genderFilter",value:$,onChange:ee=>q(ee.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Gender"}),r.jsx("option",{value:"M",children:"M"}),r.jsx("option",{value:"F",children:"F"}),r.jsx("option",{value:"O",children:"O"})]})]})}),r.jsxs("button",{onClick:()=>i(!0),className:"action-button",title:"Manage Custom Columns",children:[r.jsx(dd,{size:14})," Columns"]})]})]}),d&&r.jsxs("div",{className:"error-alert",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:d})]}),l?r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:50,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:40,height:20})}),r.jsx("th",{children:r.jsx(te,{width:60,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:120,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:40,height:20})}),r.jsx("td",{className:"patient-name",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:120,height:20})]})}),r.jsx("td",{children:r.jsx(te,{width:30,height:20})}),r.jsx("td",{children:r.jsx(te,{width:30,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(te,{width:100,height:32})}),r.jsx("td",{children:r.jsx(te,{width:80,height:32,style:{borderRadius:"4px"}})})]},ee))})]})}):s.length===0?r.jsx("div",{className:"empty-state",children:Le?"No patients found matching your search.":"No patients registered yet."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsxs("th",{className:"sortable-header",onClick:()=>me("name"),children:["Name",C==="name"&&(I==="asc"?r.jsx(bI,{size:14,className:"sort-icon"}):r.jsx(vI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Age"}),r.jsx("th",{children:"Gender"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Address"}),r.jsxs("th",{className:"sortable-header",onClick:()=>me("created_at"),children:["Registered On",C==="created_at"&&(I==="asc"?r.jsx(bI,{size:14,className:"sort-icon"}):r.jsx(vI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Insurance Type"})," ",r.jsx("th",{children:"Action"})," "]})}),r.jsx("tbody",{children:s.map(ee=>r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{className:"patient-row clickable-row",onClick:()=>t(`/dashboard/edit-complaint/patient/${ee.id}`),onMouseEnter:()=>E(ee.id),children:[r.jsx("td",{children:ee.token??"-"}),r.jsx("td",{className:"patient-name",children:ee.name}),r.jsx("td",{children:ee.age??"-"}),r.jsx("td",{children:ee.gender??"-"}),r.jsx("td",{children:ee.phone??"-"}),r.jsx("td",{children:ee.address??"-"}),r.jsx("td",{children:ye(ee.created_at)}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${ee.subscription_status==="active"?"active":ee.subscription_status==="cancelled"||ee.subscription_status==="expired"?"inactive":"none"}`,children:ee.subscription_status??"None"})}),r.jsx("td",{children:r.jsxs("select",{value:ee.insurance_type,onClick:Ne=>Ne.stopPropagation(),onChange:Ne=>J(ee.id,Ne.target.value),className:"form-select insurance-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),r.jsx("td",{children:r.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),t(`/start-subscription/${ee.id}`)},className:"action-button",children:"Start Sub"})})]}),e.patients&&e.patients.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:10,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:e.patients.map(Ne=>{var Te;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[Ne.label,":"]})," ",(Te=ee.custom_fields)!=null&&Te[Ne.key]?String(ee.custom_fields[Ne.key]):"-"]},Ne.key)})})})})]},ee.id))})]})}),j>1&&r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("div",{className:"pagination-info",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(x-1)*LA+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(x*LA,_)})," ","of"," ",r.jsx("span",{className:"font-medium",children:_})," results"]}),r.jsxs("div",{className:"pagination-buttons",children:[r.jsxs("button",{onClick:()=>b(ee=>Math.max(ee-1,1)),disabled:x===1||l,className:"pagination-button",children:[r.jsx(Tb,{size:16,className:"prev-icon"}),"Previous"]}),r.jsxs("span",{className:"pagination-current-page",children:["Page ",r.jsx("span",{className:"font-medium",children:x})," of ",r.jsx("span",{className:"font-medium",children:j})]}),r.jsxs("button",{onClick:()=>b(ee=>Math.min(ee+1,j)),disabled:x===j||l,className:"pagination-button",children:["Next",r.jsx(pd,{size:16,className:"next-icon"})]})]})]})]}),F&&V&&r.jsx("div",{className:"subscription-modal-overlay",children:r.jsxs("div",{className:"subscription-modal-content",children:[r.jsxs("div",{className:"subscription-modal-header",children:[r.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",V.name]}),r.jsx("button",{onClick:le,className:"subscription-modal-close-button",children:r.jsx(Ft,{size:24})})]}),ce&&r.jsx("div",{className:"error-alert",role:"alert",children:r.jsx("span",{children:ce})}),r.jsxs("div",{className:"subscription-modal-body",children:[r.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),r.jsxs("select",{id:"subscriptionPlan",value:G,onChange:ee=>ie(ee.target.value),className:"form-select",disabled:W||K||Ue!==null||Y.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),K?r.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):Ue?r.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):Y.length>0?Y.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.name," - ",ee.price," (",ee.interval," ",ee.period,ee.interval>1?"s":"",")"]},ee.id)):r.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),Ue&&r.jsx("p",{className:"error-message",children:Ue}),Y.length===0&&!K&&!Ue&&r.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),r.jsxs("div",{className:"subscription-modal-footer",children:[r.jsx("button",{onClick:le,disabled:W,className:"subscription-modal-button cancel",children:"Cancel"}),r.jsx("button",{onClick:ue,disabled:!G||W,className:"subscription-modal-button submit",children:W?"Starting...":"Start Subscription"})]})]})}),r.jsx(DM,{isOpen:a,onClose:()=>i(!1),entityType:"patients",entityLabel:"Patients",currentConfig:e,onConfigUpdated:()=>{n()}})]})},JH=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(!1),[d,f]=v.useState(!1),p=/^\+?[0-9\s\-().]{7,20}$/,g=v.useMemo(()=>Uc(async _=>{if(_.trim().length<2){i([]),o(!1);return}o(!0);try{const T=new URLSearchParams({search:encodeURIComponent(_),page:"1",limit:"8",sortBy:"name",sortOrder:"asc"}),C=await se(`/api/patients?${T.toString()}`);if(!C.ok)throw new Error("Failed to search");const P=await C.json();i(P.patients)}catch{i([])}finally{o(!1)}},300),[]),x=_=>{const T=_.target.value;n(T),c(p.test(T)),o(!0),f(!0),g(T)},b=v.useCallback(_=>{t("/billing",{state:{patientId:_.id,patientName:_.name}})},[t]),j=v.useCallback(async()=>{if(!(!e||!l)){o(!0);try{const T=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Direct Patient",phone:e,age:null,gender:null,token:null})});if(!T.ok)throw new Error("Failed to create patient");const C=await T.json();b(C)}catch(_){alert(`Error: ${_.message}`)}finally{o(!1)}}},[e,l,b]),S=_=>_.slice(0,1).toUpperCase();return r.jsxs("div",{className:"ccb-container",children:[r.jsxs("div",{className:"ccb-header-section",children:[r.jsx("button",{onClick:()=>t(-1),className:"ccb-back-button",title:"Go Back",children:r.jsx(on,{size:24})}),r.jsx("h1",{className:"ccb-title",children:"Create Custom Bill"}),r.jsx("p",{className:"ccb-subtitle",children:"Search for a patient to bill manually, or create a new one instantly."})]}),r.jsxs("div",{className:"ccb-search-wrapper",children:[r.jsx(In,{className:"ccb-search-icon",size:20}),r.jsx("input",{type:"text",placeholder:"Search by Name, Phone, or Token...",value:e,onChange:x,onFocus:()=>f(!0),className:"ccb-search-input",autoFocus:!0}),e&&r.jsx("div",{className:"ccb-clear-icon",onClick:()=>{n(""),i([]),f(!1)},children:r.jsx(Ft,{size:18})}),r.jsxs("div",{className:`ccb-results-dropdown ${d&&(a.length>0||s||e.length>2&&a.length===0)?"open":""}`,children:[s&&r.jsx("div",{className:"p-4 flex justify-center items-center",children:r.jsx("div",{className:"ccb-spinner"})}),!s&&a.map(_=>r.jsxs("div",{onClick:()=>b(_),className:"ccb-result-item",children:[r.jsxs("div",{className:"ccb-patient-info",children:[r.jsx("div",{className:"ccb-avatar",children:S(_.name)}),r.jsxs("div",{className:"ccb-patient-details",children:[r.jsx("h4",{children:_.name}),r.jsxs("p",{className:"ccb-patient-meta",children:[_.phone||"No phone","  ",_.gender||"-","  ",_.age?`${_.age}y`:"-"]})]})]}),r.jsxs("span",{className:"ccb-token-badge",children:["#",_.token]})]},_.id)),!s&&a.length===0&&e.length>2&&r.jsxs("div",{className:"ccb-create-action",children:[r.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No patients found."}),l&&r.jsxs("button",{onClick:j,className:"ccb-create-btn w-full",children:["Create Patient with Phone ",e]})]})]})]})]})},ZH=({currentUser:t})=>{const e=Lt(),n=ds(),[a,i]=v.useState("select_patient"),[s,o]=v.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,c]=v.useState(null),[d,f]=v.useState([]),[p,g]=v.useState([]),[x,b]=v.useState(""),[j,S]=v.useState([]),[_,T]=v.useState(""),[C,P]=v.useState([]),[k,E]=v.useState(!1),[I,L]=v.useState(null),[$,q]=v.useState(null),[F,H]=v.useState(null),[V,X]=v.useState(!1),[Y,z]=v.useState(!1),[G,ie]=v.useState(!1),W=/^\+?[0-9\s\-().]{7,20}$/,B=/^[a-zA-Z\s'-]{2,}$/,ce=v.useCallback(async()=>{if(!(d.length>0)){X(!0),H(null);try{const J=await se("/api/lab-tests");if(!J.ok)throw new Error("Failed to fetch lab tests");const ae=await J.json();f(ae)}catch(J){console.error("Failed to fetch available lab tests:",J),H("Could not load lab test list: "+J.message),f([])}finally{X(!1)}}},[d.length]),je=J=>{J&&(n.prefetchQuery({queryKey:Gt.patients.context(J),queryFn:async()=>{const ae=await se(`/api/patients/${J}/context`);if(!ae.ok)throw new Error("Failed to fetch patient context");return ae.json()},staleTime:1e3*60*5}),n.prefetchQuery({queryKey:Gt.patientDebts.balance(J),queryFn:async()=>{const ae=await se(`/api/patient-debts/${J}/balance`);if(!ae.ok)throw new Error("Failed to fetch patient debt");return ae.json()},staleTime:1e3*60}),n.prefetchQuery({queryKey:Gt.queue.latest(J),queryFn:async()=>{const ae=await se(`/api/queue/patient/${J}/latest`);if(!ae.ok){if(ae.status===404)return null;throw new Error("Failed to fetch queue status")}return ae.json()},staleTime:1e3*5}))},K=v.useMemo(()=>new lo(d,{keys:["name","description"],threshold:.3,ignoreLocation:!0}),[d]);v.useEffect(()=>{if(!x){S([]);return}const J=K.search(x).map(ae=>ae.item);S(J.slice(0,10))},[x,K]);const Ie=v.useCallback(J=>{const ae={id:J.id,name:J.name,token:J.token,age:J.age,gender:J.gender,phone:J.phone};c(ae),i("create_order"),g([]),b(""),S([]),H(null),ce()},[ce]),Ue=v.useMemo(()=>Uc(async J=>{if(J.trim().length<2){P([]),E(!1),L(null);return}E(!0),L(null);try{const ae=new URLSearchParams({search:encodeURIComponent(J),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),ue=await se(`/api/patients?${ae.toString()}`);if(!ue.ok){const Ne=await ue.text();throw new Error(`API Error (${ue.status}): ${Ne||ue.statusText}`)}const ee=await ue.json();P(ee.patients)}catch(ae){console.error("Error searching lab patients:",ae),L(ae.message||"Failed to search lab patients."),P([])}finally{E(!1)}},300),[W,B]),ze=J=>{const ae=J.target.value;T(ae),z(W.test(ae)),ie(B.test(ae)&&!W.test(ae)),E(!0),Ue(ae)},Le=v.useCallback(async J=>{if(!_||J==="phone"&&!Y||J==="name"&&!G){L(`Invalid ${J} to create a new patient.`);return}E(!0),L(null);try{const ue=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:J==="name"?_:"direct lab",phone:J==="phone"?_:null,age:null,gender:null,token:null})});if(!ue.ok){const Ne=await ue.json();throw new Error(Ne.message||`Failed to create patient: ${ue.statusText}`)}const ee=await ue.json();alert(`New patient "${ee.name}" created with ${J==="phone"?`phone ${ee.phone}`:`name ${ee.name}`}.`),Ie({id:ee.id,name:ee.name,token:ee.token??null,age:ee.age??null,gender:ee.gender??null,phone:ee.phone})}catch(ae){console.error("Error creating new patient:",ae),L(ae.message||"Failed to create new patient.")}finally{E(!1)}},[_,Y,G,Ie]),be=()=>{i("select_patient"),c(null),T(""),P([]),L(null)},Ce=J=>{const{name:ae,value:ue}=J.target;o(ee=>({...ee,[ae]:ae==="age"?ue?parseInt(ue,10):void 0:ue}))},Ae=async J=>{if(J.preventDefault(),q(null),!s.name){q("Patient Name is required.");return}const ae={name:s.name,age:s.age,gender:s.gender,phone:s.phone,address:s.address};try{const ue=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!ue.ok){const Ne=await ue.json();throw new Error(Ne.message||`Failed to create patient: ${ue.statusText}`)}const ee=await ue.json();Ie({id:ee.id,name:ee.name,token:ee.token??null,age:ee.age??null,gender:ee.gender??null,phone:ee.phone})}catch(ue){console.error("Failed to create patient:",ue),q(ue.message||"Failed to create patient. Please try again.")}},me=J=>{if(p.some(ae=>ae.id===J.id)){H(`${J.name} is already in the order.`),setTimeout(()=>H(null),3e3),b(""),S([]);return}g(ae=>[...ae,{...J}]),b(""),S([])},ye=J=>{g(ae=>ae.filter(ue=>ue.id!==J))},le=async J=>{if(J.preventDefault(),H(null),!l){H("No patient selected.");return}if(p.length===0){H("No lab tests selected.");return}const ae={patient_id:l.id,tests:p.map(ue=>({id:ue.id,name:ue.name,price:ue.price}))};console.log("Submitting Lab Order:",ae);try{const ue=await se("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!ue.ok){const Te=await ue.json();throw console.error("API Error Data:",Te),new Error(Te.message||`Failed to create lab order: ${ue.statusText}`)}const ee=await ue.json();console.log("Lab Order Creation Result:",ee);let Ne=l.queueId;if(!Ne){const Te=await se(`/api/queue/patient/${l.id}/latest`);if(Te.ok){const Fe=await Te.json();Fe!=null&&Fe._id&&(Ne=Fe._id)}}if(!Ne){const Te=await se("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id})});if(!Te.ok){const xe=await Te.text();throw new Error(`Failed to create queue entry for redirection: ${xe||Te.statusText}`)}const Fe=await Te.json();if(Fe!=null&&Fe.id)Ne=Fe.id;else throw new Error("Failed to get ID from new queue entry for redirection.")}(t==null?void 0:t.role)==="lab"?e("/dashboard"):e(`/dashboard/edit-complaint/${Ne}`)}catch(ue){console.error("Failed to create lab order:",ue),H(ue.message||"Failed to create lab order.")}};return v.useEffect(()=>{ce()},[ce]),r.jsxs("div",{className:"create-lab-order-container",children:[r.jsxs("div",{className:"create-lab-order-header",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button","aria-label":"Go back",children:r.jsx(on,{size:20})}),r.jsx("h1",{className:"create-lab-order-title",children:"Create New Lab Order"}),r.jsx("div",{style:{width:"64px"}})," "]}),(a==="select_patient"||a==="create_patient")&&r.jsxs("div",{className:"glass-card",children:[a==="select_patient"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"header-with-action",children:r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Select Patient"})}),r.jsxs("div",{className:"search-container",children:[r.jsx(In,{className:"search-icon",size:20}),r.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No...",value:_,onChange:ze,className:"modern-input",autoFocus:!0,autoComplete:"off"}),k&&r.jsx("div",{style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(te,{width:80,height:14})})]}),k&&r.jsx("ul",{className:"patient-list",children:[1,2,3].map(J=>r.jsxs("li",{className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx(te,{width:120,height:20}),r.jsx(te,{width:50,height:24,style:{borderRadius:"12px"}})]}),r.jsx("div",{className:"patient-details",children:r.jsx(te,{width:200,height:16})})]},J))}),I&&r.jsxs("div",{className:"error-message",children:[r.jsx(Wr,{size:18}),I]}),C.length>0&&r.jsx("ul",{className:"patient-list",children:C.map(J=>r.jsxs("li",{onClick:()=>Ie(J),onMouseEnter:()=>je(J.id),className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("strong",{children:J.name}),r.jsxs("span",{className:"token-badge",children:["#",J.token||"N/A"]})]}),r.jsxs("div",{className:"patient-details",children:[J.age?`${J.age} yrs`:"",J.gender?` / ${J.gender}`:"",J.phone?`  ${J.phone}`:""]})]},J.id))}),_.length>=2&&!k&&C.length===0&&!I&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{className:"no-data-message",style:{background:"none",border:"none",padding:0},children:['No patients found matching "',_,'".']}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px",marginTop:"15px"},children:[Y&&r.jsxs("button",{type:"button",onClick:()=>Le("phone"),className:"secondary-button",children:['Create "Direct Lab" Patient (Phone: ',_,")"]}),G&&r.jsxs("button",{type:"button",onClick:()=>Le("name"),className:"secondary-button",children:["Create Patient (Name: ",_,")"]})]})]}),_.length<2&&!k&&r.jsx("div",{className:"info-message",children:"Start typing to search for a patient..."})]}),a==="create_patient"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"New Patient Registration"}),r.jsx("button",{onClick:be,className:"text-button",children:" Back to Search "})]}),$&&r.jsxs("div",{className:"error-message",children:[r.jsx(Wr,{size:18}),$]}),r.jsxs("form",{onSubmit:Ae,children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-name",className:"form-label",children:"Patient Name *"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Jn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:s.name,onChange:Ce,className:"modern-input",placeholder:"Enter full name"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-age",className:"form-label",children:"Age"}),r.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:s.age??"",onChange:Ce,className:"modern-input",style:{paddingLeft:"16px"},placeholder:"e.g. 30"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-gender",className:"form-label",children:"Gender"}),r.jsxs("select",{name:"gender",id:"lab-patient-gender",value:s.gender??"",onChange:Ce,className:"modern-input",style:{paddingLeft:"16px"},children:[r.jsx("option",{value:"",children:"Select Gender..."}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-phone",className:"form-label",children:"Phone Number"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(tg,{className:"search-icon",size:18}),r.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:s.phone||"",onChange:Ce,className:"modern-input",placeholder:"e.g. 9876543210"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-address",className:"form-label",children:"Address"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Hz,{className:"search-icon",size:18,style:{top:"20px"}}),r.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:s.address||"",onChange:Ce,className:"modern-input",style:{resize:"none"},placeholder:"Enter address (optional)"})]})]})]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:be,className:"secondary-button",children:" Cancel "}),r.jsxs("button",{type:"submit",className:"primary-button",children:[r.jsx(Hn,{size:18}),"Create & Proceed"]})]})]})]})]}),a==="create_order"&&l&&r.jsxs("div",{className:"glass-card",children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Create Lab Order"}),r.jsx("button",{onClick:be,className:"text-button",children:" Change Patient "})]}),r.jsxs("div",{className:"patient-summary",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(Jn,{size:20,className:"highlight-primary"}),r.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600"},children:l.name})]}),r.jsxs("div",{className:"patient-details",style:{marginLeft:"30px",marginTop:"4px"},children:[l.age?`${l.age} yrs`:"Age N/A",l.gender&&`  ${l.gender}`,l.phone&&`  ${l.phone}`]})]}),F&&r.jsxs("div",{className:"error-message",children:[r.jsx(Wr,{size:18}),F]}),r.jsxs("form",{onSubmit:le,children:[r.jsxs("div",{className:"form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",className:"form-label",children:"Add Lab Test"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[V?r.jsx("div",{style:{position:"absolute",right:"45px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(te,{width:24,height:24,variant:"circular"})}):r.jsx(In,{className:"search-icon",size:18}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search tests (e.g. CBC, Lipid Profile)...",value:x,onChange:J=>b(J.target.value),className:"modern-input",disabled:V,autoComplete:"off"}),V&&x&&r.jsx("div",{className:"search-results-dropdown",children:[1,2,3].map(J=>r.jsxs("div",{className:"search-result-item",children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"20%",height:20})]},J))}),x&&j.length>0&&r.jsx("div",{className:"search-results-dropdown",children:j.map(J=>r.jsxs("div",{onClick:()=>me(J),className:"search-result-item",children:[r.jsx("span",{style:{fontWeight:500},children:J.name}),r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(J.price).toFixed(2)]})]},J.id))}),x&&j.length===0&&!V&&r.jsxs("div",{className:"no-data-message",style:{marginTop:"5px",padding:"10px",fontSize:"0.9rem"},children:['No tests found matching "',x,'".']})]})]}),r.jsxs("div",{style:{marginTop:"30px"},children:[r.jsxs("h4",{className:"card-title",style:{fontSize:"1.1rem"},children:["Selected Tests (",p.length,")"]}),p.length===0?r.jsx("div",{className:"info-message",children:"No tests added yet. Search above to add tests."}):r.jsx("div",{className:"selected-tests-list",children:p.map(J=>r.jsxs("div",{className:"selected-test-item",children:[r.jsx("div",{style:{flex:1},children:r.jsx("div",{style:{fontWeight:500},children:J.name})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(J.price).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ye(J.id),className:"remove-button",title:"Remove Test",children:r.jsx(Vn,{size:18})})]})]},J.id))})]}),p.length>0&&r.jsxs("div",{className:"total-price",children:["Total: ",p.reduce((J,ae)=>J+parseFloat(ae.price),0).toFixed(2)]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:be,className:"secondary-button",children:" Cancel Order "}),r.jsxs("button",{type:"submit",disabled:p.length===0,className:"primary-button",children:[r.jsx(NE,{size:18}),"Create Lab Order"]})]})]})]})]})},eG=({patient:t,onClose:e,onSave:n})=>{const[a,i]=v.useState({name:t.name,age:t.age,gender:t.gender,phone:t.phone||""}),[s,o]=v.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{await n({...a,phone:a.phone||void 0}),e()}catch(d){console.error(d),alert("Failed to update patient")}finally{o(!1)}};return r.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(2px)"},children:r.jsxs("div",{className:"modal-content",style:{backgroundColor:"var(--surface-color, white)",padding:"1.25rem",borderRadius:"var(--radius-lg, 12px)",width:"380px",maxWidth:"90%",boxShadow:"var(--shadow-lg, 0 10px 25px rgba(0,0,0,0.15))",border:"1px solid var(--border-color, #e2e8f0)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.75rem",borderBottom:"1px solid var(--border-color, #e2e8f0)",marginBottom:"1rem"},children:[r.jsx("h3",{style:{margin:0,fontSize:"1.15rem",fontWeight:700,color:"var(--text-color, #333)"},children:"Edit Patient"}),r.jsx("button",{onClick:e,style:{border:"none",background:"none",cursor:"pointer",color:"var(--text-secondary, #666)",padding:"4px"},children:r.jsx(Ft,{size:18})})]}),r.jsxs("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Full Name"}),r.jsx("input",{type:"text",value:a.name,onChange:c=>i({...a,name:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"},required:!0})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Age"}),r.jsx("input",{type:"number",value:a.age||"",onChange:c=>i({...a,age:parseInt(c.target.value)||0}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Gender"}),r.jsxs("select",{value:a.gender||"",onChange:c=>i({...a,gender:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)",background:"white"},children:[r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"0.85rem",fontWeight:500,color:"var(--text-secondary, #555)"},children:"Phone Number"}),r.jsx("input",{type:"tel",value:a.phone,onChange:c=>i({...a,phone:c.target.value}),className:"dental-search-input",style:{padding:"8px 10px",fontSize:"0.9rem",width:"100%",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)"},placeholder:"Optional"})]}),r.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--border-color, #e2e8f0)",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{type:"button",onClick:e,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--border-color, #ccc)",background:"none",fontSize:"0.9rem",cursor:"pointer"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"save-btn",style:{padding:"8px 20px",borderRadius:"6px",border:"none",background:"var(--primary-color, #3b82f6)",color:"white",fontSize:"0.9rem",fontWeight:500,display:"flex",alignItems:"center",gap:"6px",cursor:"pointer"},disabled:s,children:s?"Saving...":r.jsxs(r.Fragment,{children:[r.jsx(cs,{size:16})," Save Details"]})})]})]})]})})},vB=[{value:"general",label:"General"},{value:"diagnostic",label:"Diagnostic"},{value:"treatment",label:"Treatment"},{value:"minor_surgery",label:"Minor Surgery"}],pOe=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState({}),[f,p]=v.useState(!1),[g,x]=v.useState({name:"",cost:0,category:"general"});v.useEffect(()=>{b()},[]);const b=async()=>{s(!0);try{const C=await se("/api/medical/procedures");if(C.ok){const P=await C.json();a(P)}}catch(C){console.error(C)}finally{s(!1)}},j=async()=>{if(!(!g.name||!g.cost))try{(await se("/api/medical/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,category:"general"}),b(),e())}catch(C){console.error(C)}},S=async C=>{try{(await se(`/api/medical/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),d({}),b(),e())}catch(P){console.error(P)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await se(`/api/medical/procedures/${C}`,{method:"DELETE"})).ok&&(b(),e())}catch(P){console.error(P)}},T=C=>{l(C.id),d({name:C.name,cost:C.cost,category:C.category})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Medical Procedures"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await se("/api/medical/procedures/import-defaults",{method:"POST"}),b(),e()}catch(C){console.error(C)}},className:"btn-secondary btn-compact",children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(Ft,{size:20})})]})]}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{className:"p-20 text-center",children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"w-40",children:"Name"}),r.jsx("th",{className:"w-20",children:"Category"}),r.jsx("th",{className:"w-20",children:"Cost ()"}),r.jsx("th",{className:"w-20",children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"text-center p-20 text-muted",children:"No procedures found. Add one below."})}):n.map(C=>r.jsx("tr",{children:o===C.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:P=>d({...c,name:P.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsx("select",{className:"edit-select",value:c.category||"general",onChange:P=>d({...c,category:P.target.value}),children:vB.map(P=>r.jsx("option",{value:P.value,children:P.label},P.value))})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:P=>d({...c,cost:parseFloat(P.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>S(C.id),className:"action-btn btn-save",title:"Save",children:r.jsx(cs,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Ft,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:C.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${C.category}`,children:C.category.replace("_"," ")})}),r.jsxs("td",{className:"fw-500",children:["",C.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>T(C),className:"action-btn btn-edit",title:"Edit",children:r.jsx(ro,{size:18})}),r.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Vn,{size:18})})]})]})},C.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:C=>x({...g,name:C.target.value})}),r.jsx("select",{className:"form-select",value:g.category||"general",onChange:C=>x({...g,category:C.target.value}),children:vB.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:C=>x({...g,cost:parseFloat(C.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:j,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(Hn,{size:18})," Add New Procedure"]})})]})})};var mOe=Object.defineProperty,EN=Object.getOwnPropertySymbols,tG=Object.prototype.hasOwnProperty,nG=Object.prototype.propertyIsEnumerable,bB=(t,e,n)=>e in t?mOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ND=(t,e)=>{for(var n in e||(e={}))tG.call(e,n)&&bB(t,n,e[n]);if(EN)for(var n of EN(e))nG.call(e,n)&&bB(t,n,e[n]);return t},SD=(t,e)=>{var n={};for(var a in t)tG.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&EN)for(var a of EN(t))e.indexOf(a)<0&&nG.call(t,a)&&(n[a]=t[a]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Df;(t=>{const e=class Dn{constructor(c,d,f,p){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<Dn.MIN_VERSION||c>Dn.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let g=[];for(let b=0;b<this.size;b++)g.push(!1);for(let b=0;b<this.size;b++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(f);if(this.drawCodewords(x),p==-1){let b=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const S=this.getPenaltyScore();S<b&&(p=j,b=S),this.applyMask(j)}}i(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,d){const f=t.QrSegment.makeSegments(c);return Dn.encodeSegments(f,d)}static encodeBinary(c,d){const f=t.QrSegment.makeBytes(c);return Dn.encodeSegments([f],d)}static encodeSegments(c,d,f=1,p=40,g=-1,x=!0){if(!(Dn.MIN_VERSION<=f&&f<=p&&p<=Dn.MAX_VERSION)||g<-1||g>7)throw new RangeError("Invalid value");let b,j;for(b=f;;b++){const C=Dn.getNumDataCodewords(b,d)*8,P=o.getTotalBits(c,b);if(P<=C){j=P;break}if(b>=p)throw new RangeError("Data too long")}for(const C of[Dn.Ecc.MEDIUM,Dn.Ecc.QUARTILE,Dn.Ecc.HIGH])x&&j<=Dn.getNumDataCodewords(b,C)*8&&(d=C);let S=[];for(const C of c){n(C.mode.modeBits,4,S),n(C.numChars,C.mode.numCharCountBits(b),S);for(const P of C.getData())S.push(P)}i(S.length==j);const _=Dn.getNumDataCodewords(b,d)*8;i(S.length<=_),n(0,Math.min(4,_-S.length),S),n(0,(8-S.length%8)%8,S),i(S.length%8==0);for(let C=236;S.length<_;C^=253)n(C,8,S);let T=[];for(;T.length*8<S.length;)T.push(0);return S.forEach((C,P)=>T[P>>>3]|=C<<7-(P&7)),new Dn(b,d,T,g)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let f=0;f<d;f++)for(let p=0;p<d;p++)f==0&&p==0||f==0&&p==d-1||f==d-1&&p==0||this.drawAlignmentPattern(c[f],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let f=d;for(let g=0;g<10;g++)f=f<<1^(f>>>9)*1335;const p=(d<<10|f)^21522;i(p>>>15==0);for(let g=0;g<=5;g++)this.setFunctionModule(8,g,a(p,g));this.setFunctionModule(8,7,a(p,6)),this.setFunctionModule(8,8,a(p,7)),this.setFunctionModule(7,8,a(p,8));for(let g=9;g<15;g++)this.setFunctionModule(14-g,8,a(p,g));for(let g=0;g<8;g++)this.setFunctionModule(this.size-1-g,8,a(p,g));for(let g=8;g<15;g++)this.setFunctionModule(8,this.size-15+g,a(p,g));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let f=0;f<12;f++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;i(d>>>18==0);for(let f=0;f<18;f++){const p=a(d,f),g=this.size-11+f%3,x=Math.floor(f/3);this.setFunctionModule(g,x,p),this.setFunctionModule(x,g,p)}}drawFinderPattern(c,d){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const g=Math.max(Math.abs(p),Math.abs(f)),x=c+p,b=d+f;0<=x&&x<this.size&&0<=b&&b<this.size&&this.setFunctionModule(x,b,g!=2&&g!=4)}}drawAlignmentPattern(c,d){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,d+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(c,d,f){this.modules[d][c]=f,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,f=this.errorCorrectionLevel;if(c.length!=Dn.getNumDataCodewords(d,f))throw new RangeError("Invalid argument");const p=Dn.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][d],g=Dn.ECC_CODEWORDS_PER_BLOCK[f.ordinal][d],x=Math.floor(Dn.getNumRawDataModules(d)/8),b=p-x%p,j=Math.floor(x/p);let S=[];const _=Dn.reedSolomonComputeDivisor(g);for(let C=0,P=0;C<p;C++){let k=c.slice(P,P+j-g+(C<b?0:1));P+=k.length;const E=Dn.reedSolomonComputeRemainder(k,_);C<b&&k.push(0),S.push(k.concat(E))}let T=[];for(let C=0;C<S[0].length;C++)S.forEach((P,k)=>{(C!=j-g||k>=b)&&T.push(P[C])});return i(T.length==x),T}drawCodewords(c){if(c.length!=Math.floor(Dn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let g=0;g<2;g++){const x=f-g,j=(f+1&2)==0?this.size-1-p:p;!this.isFunction[j][x]&&d<c.length*8&&(this.modules[j][x]=a(c[d>>>3],7-(d&7)),d++)}}i(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let f=0;f<this.size;f++){let p;switch(c){case 0:p=(f+d)%2==0;break;case 1:p=d%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+d)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(d/2))%2==0;break;case 5:p=f*d%2+f*d%3==0;break;case 6:p=(f*d%2+f*d%3)%2==0;break;case 7:p=((f+d)%2+f*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][f]&&p&&(this.modules[d][f]=!this.modules[d][f])}}getPenaltyScore(){let c=0;for(let g=0;g<this.size;g++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[g][S]==x?(b++,b==5?c+=Dn.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*Dn.PENALTY_N3),x=this.modules[g][S],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*Dn.PENALTY_N3}for(let g=0;g<this.size;g++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][g]==x?(b++,b==5?c+=Dn.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*Dn.PENALTY_N3),x=this.modules[S][g],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*Dn.PENALTY_N3}for(let g=0;g<this.size-1;g++)for(let x=0;x<this.size-1;x++){const b=this.modules[g][x];b==this.modules[g][x+1]&&b==this.modules[g+1][x]&&b==this.modules[g+1][x+1]&&(c+=Dn.PENALTY_N2)}let d=0;for(const g of this.modules)d=g.reduce((x,b)=>x+(b?1:0),d);const f=this.size*this.size,p=Math.ceil(Math.abs(d*20-f*10)/f)-1;return i(0<=p&&p<=9),c+=p*Dn.PENALTY_N4,i(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let f=[6];for(let p=this.size-7;f.length<c;p-=d)f.splice(1,0,p);return f}}static getNumRawDataModules(c){if(c<Dn.MIN_VERSION||c>Dn.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const f=Math.floor(c/7)+2;d-=(25*f-10)*f-55,c>=7&&(d-=36)}return i(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(Dn.getNumRawDataModules(c)/8)-Dn.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*Dn.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let p=0;p<c-1;p++)d.push(0);d.push(1);let f=1;for(let p=0;p<c;p++){for(let g=0;g<d.length;g++)d[g]=Dn.reedSolomonMultiply(d[g],f),g+1<d.length&&(d[g]^=d[g+1]);f=Dn.reedSolomonMultiply(f,2)}return d}static reedSolomonComputeRemainder(c,d){let f=d.map(p=>0);for(const p of c){const g=p^f.shift();f.push(0),d.forEach((x,b)=>f[b]^=Dn.reedSolomonMultiply(x,g))}return f}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(d>>>p&1)*c;return i(f>>>8==0),f}finderPenaltyCountPatterns(c){const d=c[1];i(d<=this.size*3);const f=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(f&&c[0]>=d*4&&c[6]>=d?1:0)+(f&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,f){return c&&(this.finderPenaltyAddHistory(d,f),d=0),d+=this.size,this.finderPenaltyAddHistory(d,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let f=c-1;f>=0;f--)d.push(l>>>f&1)}function a(l,c){return(l>>>c&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const s=class Jr{constructor(c,d,f){if(this.mode=c,this.numChars=d,this.bitData=f,d<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(c){let d=[];for(const f of c)n(f,8,d);return new Jr(Jr.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!Jr.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let f=0;f<c.length;){const p=Math.min(c.length-f,3);n(parseInt(c.substring(f,f+p),10),p*3+1,d),f+=p}return new Jr(Jr.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!Jr.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],f;for(f=0;f+2<=c.length;f+=2){let p=Jr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f))*45;p+=Jr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f+1)),n(p,11,d)}return f<c.length&&n(Jr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f)),6,d),new Jr(Jr.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:Jr.isNumeric(c)?[Jr.makeNumeric(c)]:Jr.isAlphanumeric(c)?[Jr.makeAlphanumeric(c)]:[Jr.makeBytes(Jr.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new Jr(Jr.Mode.ECI,0,d)}static isNumeric(c){return Jr.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Jr.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let f=0;for(const p of c){const g=p.mode.numCharCountBits(d);if(p.numChars>=1<<g)return 1/0;f+=4+g+p.bitData.length}return f}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let f=0;f<c.length;f++)c.charAt(f)!="%"?d.push(c.charCodeAt(f)):(d.push(parseInt(c.substring(f+1,f+3),16)),f+=2);return d}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;t.QrSegment=s})(Df||(Df={}));(t=>{(e=>{const n=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Df||(Df={}));(t=>{(e=>{const n=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Df||(Df={}));var Mm=Df;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var gOe={L:Mm.QrCode.Ecc.LOW,M:Mm.QrCode.Ecc.MEDIUM,Q:Mm.QrCode.Ecc.QUARTILE,H:Mm.QrCode.Ecc.HIGH},rG=128,aG="L",iG="#FFFFFF",sG="#000000",oG=!1,lG=1,yOe=4,xOe=0,vOe=.1;function cG(t,e=0){const n=[];return t.forEach(function(a,i){let s=null;a.forEach(function(o,l){if(!o&&s!==null){n.push(`M${s+e} ${i+e}h${l-s}v1H${s+e}z`),s=null;return}if(l===a.length-1){if(!o)return;s===null?n.push(`M${l+e},${i+e} h1v1H${l+e}z`):n.push(`M${s+e},${i+e} h${l+1-s}v1H${s+e}z`);return}o&&s===null&&(s=l)})}),n.join("")}function uG(t,e){return t.slice().map((n,a)=>a<e.y||a>=e.y+e.h?n:n.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function bOe(t,e,n,a){if(a==null)return null;const i=t.length+n*2,s=Math.floor(e*vOe),o=i/e,l=(a.width||s)*o,c=(a.height||s)*o,d=a.x==null?t.length/2-l/2:a.x*o,f=a.y==null?t.length/2-c/2:a.y*o,p=a.opacity==null?1:a.opacity;let g=null;if(a.excavate){let b=Math.floor(d),j=Math.floor(f),S=Math.ceil(l+d-b),_=Math.ceil(c+f-j);g={x:b,y:j,w:S,h:_}}const x=a.crossOrigin;return{x:d,y:f,h:c,w:l,excavation:g,opacity:p,crossOrigin:x}}function jOe(t,e){return e!=null?Math.max(Math.floor(e),0):t?yOe:xOe}function dG({value:t,level:e,minVersion:n,includeMargin:a,marginSize:i,imageSettings:s,size:o,boostLevel:l}){let c=Se.useMemo(()=>{const b=(Array.isArray(t)?t:[t]).reduce((j,S)=>(j.push(...Mm.QrSegment.makeSegments(S)),j),[]);return Mm.QrCode.encodeSegments(b,gOe[e],n,void 0,void 0,l)},[t,e,n,l]);const{cells:d,margin:f,numCells:p,calculatedImageSettings:g}=Se.useMemo(()=>{let x=c.getModules();const b=jOe(a,i),j=x.length+b*2,S=bOe(x,o,b,s);return{cells:x,margin:b,numCells:j,calculatedImageSettings:S}},[c,o,s,a,i]);return{qrcode:c,margin:f,cells:d,numCells:p,calculatedImageSettings:g}}var wOe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),La=Se.forwardRef(function(e,n){const a=e,{value:i,size:s=rG,level:o=aG,bgColor:l=iG,fgColor:c=sG,includeMargin:d=oG,minVersion:f=lG,boostLevel:p,marginSize:g,imageSettings:x}=a,j=SD(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=j,_=SD(j,["style"]),T=x==null?void 0:x.src,C=Se.useRef(null),P=Se.useRef(null),k=Se.useCallback(X=>{C.current=X,typeof n=="function"?n(X):n&&(n.current=X)},[n]),[E,I]=Se.useState(!1),{margin:L,cells:$,numCells:q,calculatedImageSettings:F}=dG({value:i,level:o,minVersion:f,boostLevel:p,includeMargin:d,marginSize:g,imageSettings:x,size:s});Se.useEffect(()=>{if(C.current!=null){const X=C.current,Y=X.getContext("2d");if(!Y)return;let z=$;const G=P.current,ie=F!=null&&G!==null&&G.complete&&G.naturalHeight!==0&&G.naturalWidth!==0;ie&&F.excavation!=null&&(z=uG($,F.excavation));const W=window.devicePixelRatio||1;X.height=X.width=s*W;const B=s/q*W;Y.scale(B,B),Y.fillStyle=l,Y.fillRect(0,0,q,q),Y.fillStyle=c,wOe?Y.fill(new Path2D(cG(z,L))):$.forEach(function(ce,je){ce.forEach(function(K,Ie){K&&Y.fillRect(Ie+L,je+L,1,1)})}),F&&(Y.globalAlpha=F.opacity),ie&&Y.drawImage(G,F.x+L,F.y+L,F.w,F.h)}}),Se.useEffect(()=>{I(!1)},[T]);const H=ND({height:s,width:s},S);let V=null;return T!=null&&(V=Se.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{I(!0)},ref:P,crossOrigin:F==null?void 0:F.crossOrigin})),Se.createElement(Se.Fragment,null,Se.createElement("canvas",ND({style:H,height:s,width:s,ref:k,role:"img"},_)),V)});La.displayName="QRCodeCanvas";var NOe=Se.forwardRef(function(e,n){const a=e,{value:i,size:s=rG,level:o=aG,bgColor:l=iG,fgColor:c=sG,includeMargin:d=oG,minVersion:f=lG,boostLevel:p,title:g,marginSize:x,imageSettings:b}=a,j=SD(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:_,numCells:T,calculatedImageSettings:C}=dG({value:i,level:o,minVersion:f,boostLevel:p,includeMargin:d,marginSize:x,imageSettings:b,size:s});let P=_,k=null;b!=null&&C!=null&&(C.excavation!=null&&(P=uG(_,C.excavation)),k=Se.createElement("image",{href:b.src,height:C.h,width:C.w,x:C.x+S,y:C.y+S,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const E=cG(P,S);return Se.createElement("svg",ND({height:s,width:s,viewBox:`0 0 ${T} ${T}`,ref:n,role:"img"},j),!!g&&Se.createElement("title",null,g),Se.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),Se.createElement("path",{fill:c,d:E,shapeRendering:"crispEdges"}),k)});NOe.displayName="QRCodeSVG";const SOe=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var ue,ee,Ne,Te,Fe,xe,ne;const[i,s]=v.useState(null),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState([]),[b,j]=v.useState("cash"),[S,_]=v.useState(!1),[T,C]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[P,k]=v.useState(0),[E,I]=v.useState(""),[L,$]=v.useState(""),[q,F]=v.useState(""),[H,V]=v.useState(null),[X,Y]=v.useState(null),[z,G]=v.useState(!1),ie=()=>{T.length>=5||C(oe=>[...oe,{id:crypto.randomUUID(),method:"cash",amount:0}])},W=oe=>{T.length<=2||C(_e=>_e.filter(De=>De.id!==oe))},B=(oe,_e,De)=>{C(Q=>Q.map(ge=>ge.id===oe?{...ge,[_e]:De}:ge))},ce=oe=>{const _e=T.filter(Q=>Q.id!==oe).reduce((Q,ge)=>Q+ge.amount,0),De=Math.max(0,ze-_e);B(oe,"amount",De)},je=oe=>{const _e=Math.min(100,Math.max(0,oe||0));k(_e),x(De=>De.map(Q=>({...Q,discount_percentage:_e})))},K=(oe,_e)=>{const De=Math.min(100,Math.max(0,_e||0));x(Q=>Q.map((ge,de)=>de===oe?{...ge,discount_percentage:De}:ge))},Ie=v.useMemo(()=>g.reduce((oe,_e)=>oe+(_e.price??_e.cost??0),0),[g]),Ue=v.useMemo(()=>g.reduce((oe,_e)=>{const Q=(_e.price??_e.cost??0)*(_e.discount_percentage??0)/100;return oe+Q},0),[g]),ze=Ie-Ue,Le=v.useMemo(()=>T.reduce((oe,_e)=>oe+_e.amount,0),[T]),be=ze-Le,Ce=Math.abs(be)<.01,Ae=v.useMemo(()=>S?T.some(oe=>oe.method==="credit"):b==="credit",[S,T,b]),me=async()=>{var oe,_e;if(!i)return d("No record data available to bill."),null;if(g.length===0)return d("Cannot bill an empty procedure list."),null;p(!0),d(null);try{const De=g.map(We=>{const it=We.price??We.cost??0,wt=it*((We.discount_percentage??0)/100),we=it-wt;return{name:We.name,price:it,quantity:1,total:we,item_id:We.id||`proc_${Date.now()}`,type:"service",discount_percentage:We.discount_percentage??0}}),Q=S?((oe=T[0])==null?void 0:oe.method)||"cash":b,ge=S?T.map(We=>({method:We.method,amount:We.amount})):void 0,de={patientId:i.patientId.id,items:De,amount:ze,paymentMode:Q,splitPayments:ge,type:"consultation",related_id:i.id,status:"paid",discountPercentage:P},fe=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)}),Ee=await fe.json();if(!fe.ok||!Ee.id)throw new Error(Ee.message||"Failed to create bill.");(await se(`/api/medical/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:Ee.id})})).ok||console.error("Failed to update medical record status"),s(We=>We?{...We,status:"billed",billId:Ee.id}:null);const $e=S?((_e=T.find(We=>We.method==="credit"))==null?void 0:_e.amount)||0:b==="credit"?ze:0;if($e>0)try{await se(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:$e,related_bill_id:Ee.id,notes:`Medical Bill #${Ee.id}${S?" (Split Payment - Credit portion)":""}`})})}catch(We){console.error("Failed to create debt entry:",We)}return a&&a(),Ee.id}catch(De){return console.error("Billing process failed:",De),d(De.message||"Failed to create bill."),null}finally{p(!1)}},ye=()=>{window.print()},le=async()=>{await me()&&setTimeout(()=>window.print(),300)},J=async()=>{if(n){l(!0),d(null);try{const oe=await se(`/api/medical/${n}`);if(!oe.ok)throw new Error("Failed to fetch medical record");const _e=await oe.json(),De=_e.Patient||{},Q={id:_e.id,patientId:{id:De.id||_e.patient_id,name:De.name||"Unknown",patient_token_number:De.patient_token_number,age:De.age,gender:De.gender},clinicId:_e.clinic_id,selectedProcedures:_e.selected_procedures||[],status:_e.status,billId:_e.bill_id,createdAt:_e.createdAt||_e.date,date:_e.date,notes:_e.notes};s(Q);const ge=(_e.selected_procedures||[]).map(de=>({...de,price:de.cost,discount_percentage:0}));x(ge);try{const de=await se("/api/clinics/settings");if(de.ok){const fe=await de.json();I(fe.name||""),$(fe.address||""),F(fe.notes||""),fe.upi_id&&V(`upi://pay?pa=${fe.upi_id}&pn=${encodeURIComponent(fe.name||"Clinic")}&cu=INR`)}}catch(de){console.error("Failed to fetch clinic settings",de)}}catch(oe){d(oe.message||"Failed to load record")}finally{l(!1)}}},ae=async()=>{var oe;if((oe=i==null?void 0:i.patientId)!=null&&oe.id){G(!0);try{const _e=await se(`/api/patient-debts/patient/${i.patientId.id}/balance`);if(_e.ok){const De=await _e.json();Y(De.balance||0)}}catch(_e){console.error("Failed to fetch patient debt",_e)}finally{G(!1)}}};return v.useEffect(()=>{t&&n&&J()},[t,n]),v.useEffect(()=>{var oe;(oe=i==null?void 0:i.patientId)!=null&&oe.id&&ae()},[(ue=i==null?void 0:i.patientId)==null?void 0:ue.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Medical Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(Ft,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsx("div",{className:"space-y-4 p-5",children:r.jsx(te,{width:100,height:20})})]})})]})})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"MEDICAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:E||"Clinic Name"}),(L||q)&&r.jsxs("div",{className:"clinic-details-print",children:[L&&r.jsx("span",{className:"small-text clinic-address",children:L}),q&&r.jsx("span",{className:"small-text clinic-notes",children:q})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((ee=i.patientId)==null?void 0:ee.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",((Ne=i.patientId)==null?void 0:Ne.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Te=i.patientId)==null?void 0:Te.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",((Fe=i.patientId)==null?void 0:Fe.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ta,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((oe,_e)=>{const De=oe.price??oe.cost??0,Q=De*(oe.discount_percentage??0)/100,ge=De-Q;return r.jsxs("tr",{children:[r.jsx("td",{children:_e+1}),r.jsx("td",{children:oe.name}),r.jsx("td",{children:De.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:oe.discount_percentage===0?"":oe.discount_percentage,onChange:de=>K(_e,parseFloat(de.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:ge.toFixed(2)})]},_e)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",P.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Ue.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ze.toFixed(2)]})})]}),H&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!(S&&T.some(oe=>oe.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(La,{value:H,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:P===0?"":P,onChange:oe=>je(parseFloat(oe.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ze.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:H?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:H,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${S?"active":""}`,onClick:()=>_(!S),disabled:f||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:S?"2px solid #4facfe":"1px solid #ddd",background:S?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:S?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:S?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(zo,{size:14}),"Split Pay"]})]}),S?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(zo,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",ze.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:T.map((oe,_e)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:_e+1}),r.jsxs("select",{value:oe.method,onChange:De=>B(oe.id,"method",De.target.value),className:`split-payment-select ${oe.method==="credit"?"is-credit":""}`,disabled:f||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:oe.amount===0?"":oe.amount,onChange:De=>B(oe.id,"amount",parseFloat(De.target.value)||0),placeholder:"0",className:`split-payment-input ${oe.method==="credit"?"is-credit":""}`,disabled:f||i.status==="billed"})]}),T.length>2&&r.jsx("button",{type:"button",onClick:()=>ce(oe.id),className:"split-payment-btn split-payment-btn-fill",disabled:f||i.status==="billed",children:"Fill"}),T.length>2&&r.jsx("button",{type:"button",onClick:()=>W(oe.id),className:"split-payment-btn split-payment-btn-remove",disabled:f||i.status==="billed",children:r.jsx(Vn,{size:12})})]},oe.id))}),T.length<5&&r.jsxs("button",{type:"button",onClick:ie,className:"split-payment-add-btn",disabled:f||i.status==="billed",children:[r.jsx(Hn,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Le.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(be)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(be)<.01?"":be>0?"":"",Math.abs(be)<.01?"Balanced":be>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(be).toFixed(2)]})]}),!Ce&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",ze.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:oe=>j(oe.target.value),className:"payment-mode-select",disabled:f||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),Ae&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),z?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:X&&X>0?"#dc3545":"#28a745"},children:["",(X||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:S?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",(S?((xe=T.find(oe=>oe.method==="credit"))==null?void 0:xe.amount)||0:ze).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((X||0)+(S?((ne=T.find(oe=>oe.method==="credit"))==null?void 0:ne.amount)||0:ze)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ye,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:le,className:"primary-button",disabled:f||S&&!Ce,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Fo,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:ye,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},jB=/^\+?[0-9\s\-().]{7,20}$/,_Oe=/^[a-zA-Z\s'-]{2,}$/,hG=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState([]),[_,T]=v.useState(!0),C=$r();v.useEffect(()=>{C.state&&C.state.patient&&me(C.state.patient)},[C.state]);const[P,k]=v.useState([]),[E,I]=v.useState(""),[L,$]=v.useState(!1),[q,F]=v.useState("plan"),[H,V]=v.useState([]),[X,Y]=v.useState([]),[z,G]=v.useState(!1),[ie,W]=v.useState(""),[B,ce]=v.useState(!1),[je,K]=v.useState(null),[Ie,Ue]=v.useState(null);v.useEffect(()=>{Le(),ze()},[]);const ze=async()=>{try{const xe=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),ne=await se(`/api/patients?${xe.toString()}`);if(ne.ok){const oe=await ne.json();S(oe.patients||[])}}catch(xe){console.error("Error fetching recent patients",xe)}finally{T(!1)}},Le=async()=>{try{const xe=await se("/api/medical/procedures");if(xe.ok){const ne=await xe.json();Y(ne)}}catch(xe){console.error("Error fetching procedures",xe)}};v.useEffect(()=>{(async()=>{if(!l){V([]),Ue(null),I(""),k([]);return}try{const ne=await se(`/api/medical/patient/${l.id}`);if(ne.ok){const oe=await ne.json();V(oe);const _e=new Date().toDateString(),De=oe.find(Q=>Q.status==="draft"&&new Date(Q.date||Q.createdAt||Date.now()).toDateString()===_e);De?(Ue(De.id),I(De.notes||""),k(De.selected_procedures.map(Q=>({instanceId:crypto.randomUUID(),procedureId:Q.id,name:Q.name,price:Q.cost,category:Q.category})))):(Ue(null),I(""),k([]))}}catch(ne){console.error("Error fetching history",ne)}})()},[l]);const be=v.useMemo(()=>Uc(async xe=>{if(!xe.trim()||xe.length<2){i([]),o(!1);return}o(!0);try{const ne=await se(`/api/patients?search=${encodeURIComponent(xe)}&limit=10`);if(ne.ok){const oe=await ne.json();i(oe.patients||[])}}catch(ne){console.error("Search error:",ne)}finally{o(!1)}},300),[]);v.useEffect(()=>{be(e)},[e,be]);const Ce=xe=>{const ne=xe.target.value;n(ne),g(jB.test(ne)),b(_Oe.test(ne)&&!jB.test(ne))},Ae=async xe=>{if(!(!e||xe==="phone"&&!p||xe==="name"&&!x)){o(!0);try{const oe=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:xe==="name"?e:"direct medical",phone:xe==="phone"?e:null,age:null,gender:null,token:null})});if(oe.ok){const _e=await oe.json();me({id:_e.id,name:_e.name,token:_e.token??null,age:_e.age??null,gender:_e.gender??null,phone:_e.phone})}else alert("Failed to create patient")}catch(ne){console.error("Error creating patient:",ne),alert("Error creating patient")}finally{o(!1)}}},me=xe=>{c(xe),n(""),i([])},ye=()=>{c(null),k([]),I("")},le=async xe=>{if(!l)return;const ne=await se(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(ne.ok)await ne.json(),c(oe=>oe?{...oe,...xe}:null);else throw new Error("Failed to update")},J=xe=>{const ne={instanceId:crypto.randomUUID(),procedureId:xe.id,name:xe.name,price:xe.cost,category:xe.category};k(oe=>[...oe,ne])},ae=xe=>{k(ne=>ne.filter(oe=>oe.instanceId!==xe))},ue=(xe,ne)=>{k(oe=>oe.map(_e=>_e.instanceId===xe?{..._e,price:ne}:_e))},ee=xe=>{const ne=H.find(oe=>oe.id===xe);ne&&(Ue(ne.id),I(ne.notes||""),k(ne.selected_procedures.map(oe=>({instanceId:crypto.randomUUID(),procedureId:oe.id,name:oe.name,price:oe.cost,category:oe.category}))),F("plan"))},Ne=async(xe=!0)=>{var ne;if(l){$(!0);try{const oe=P.map(Q=>({id:Q.procedureId,name:Q.name,cost:Q.price,category:Q.category})),_e={patientId:l.id,selectedProcedures:oe,notes:E};let De;if(Ie?((ne=H.find(ge=>ge.id===Ie))==null?void 0:ne.status)==="draft"?De=await se(`/api/medical/${Ie}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}):De=await se("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}):De=await se("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}),De.ok){const Q=await De.json();Ue(Q.id);const ge=await se(`/api/medical/patient/${l.id}`);if(ge.ok){const de=await ge.json();V(de)}xe?(K(Q.id),ce(!0)):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save medical record.")}catch(oe){console.error(oe),alert("Error saving record.")}finally{$(!1)}}},Te=v.useMemo(()=>P.reduce((xe,ne)=>xe+ne.price,0),[P]),Fe=v.useMemo(()=>{const xe={};return X.filter(oe=>oe.name.toLowerCase().includes(ie.toLowerCase())||oe.category.toLowerCase().includes(ie.toLowerCase())).forEach(oe=>{const _e=oe.category||"general";xe[_e]||(xe[_e]=[]),xe[_e].push(oe)}),xe},[X,ie]);return r.jsxs("div",{className:"medical-page-container printable-section",children:[r.jsxs("header",{className:"medical-header no-print",children:[r.jsxs("div",{className:"medical-title-group",children:[r.jsx(bf,{className:"medical-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"medical-title",children:"Medical Procedures"}),r.jsx("p",{className:"medical-subtitle",children:"Create medical procedure records and bills"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(ro,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:ye,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Ft,{size:16})})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(In,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"medical-search-input header-input",value:e,onChange:Ce}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(xe=>r.jsxs("div",{onClick:()=>me(xe),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:xe.name}),r.jsxs("div",{className:"patient-meta",children:[xe.age," yrs / ",xe.gender,"  ",xe.phone]})]}),r.jsx(Jn,{size:16,color:"var(--mp-text-sec)"})]},xe.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--mp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>Ae(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"medical-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container no-print",children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--mp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(In,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"medical-search-input",value:e,onChange:Ce}),s&&r.jsx("div",{className:"search-spinner"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(xe=>r.jsxs("div",{onClick:()=>me(xe),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:xe.name}),r.jsxs("div",{className:"patient-meta",children:[xe.age," yrs / ",xe.gender,"  ",xe.phone]})]}),r.jsx(Jn,{size:16,color:"var(--mp-text-sec)"})]},xe.id))})]}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown",style:{padding:"16px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--mp-text-sec)",marginBottom:"12px"},children:['No patients found for "',e,'"']}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[p&&r.jsxs("button",{type:"button",onClick:()=>Ae("phone"),className:"create-patient-btn",children:[r.jsx(Hn,{size:16})," Create patient with phone: ",e]}),x&&r.jsxs("button",{type:"button",onClick:()=>Ae("name"),className:"create-patient-btn",children:[r.jsx(Hn,{size:16})," Create patient: ",e]})]})]}),e.length<2&&r.jsxs("div",{className:"recent-patients-section",children:[r.jsx("h3",{children:"Recent Patients"}),_?r.jsx("div",{className:"recent-patients-list",children:[1,2,3].map(xe=>r.jsx("div",{className:"recent-patient-chip skeleton",children:r.jsx(te,{width:100,height:20})},xe))}):r.jsx("div",{className:"recent-patients-list",children:j.map(xe=>r.jsxs("button",{onClick:()=>me(xe),className:"recent-patient-chip",children:[r.jsx("span",{className:"chip-avatar",children:xe.name.charAt(0)}),r.jsx("span",{children:xe.name})]},xe.id))})]})]}),l&&r.jsx("div",{className:"medical-workspace no-print",children:r.jsxs("div",{className:"medical-grid",children:[r.jsxs("section",{className:"procedures-section no-print",children:[r.jsxs("div",{className:"medical-card procedures-container",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:"Available Procedures"}),r.jsx("button",{className:"manage-procedures-btn",onClick:()=>G(!0),children:"Manage"})]}),r.jsx("div",{className:"procedure-search-bar",style:{padding:"0 16px 12px 16px"},children:r.jsxs("div",{className:"search-input-wrapper header-variant",style:{background:"var(--mp-bg-sec)"},children:[r.jsx(In,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search procedures...",className:"medical-search-input header-input",value:ie,onChange:xe=>W(xe.target.value),style:{background:"transparent"}}),ie&&r.jsx("button",{onClick:()=>W(""),className:"clear-search-btn",style:{border:"none",background:"transparent",cursor:"pointer",color:"var(--mp-text-sec)"},children:r.jsx(Ft,{size:14})})]})}),r.jsx("div",{className:"procedures-list",children:Object.entries(Fe).map(([xe,ne])=>r.jsxs("div",{className:"procedure-category-group",children:[r.jsx("h4",{className:"category-label",children:xe.replace("_"," ")}),ne.map(oe=>r.jsxs("div",{onClick:()=>J(oe),className:"procedure-item",children:[r.jsx("span",{className:"proc-name",children:oe.name}),r.jsxs("span",{className:"proc-cost",children:["",oe.cost]})]},oe.id))]},xe))})]}),r.jsxs("div",{className:"medical-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("span",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>Ne(!1),disabled:L,children:[r.jsx(cs,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:E,onChange:xe=>I(xe.target.value)})]})]}),r.jsx("section",{className:"plan-section no-print",children:r.jsxs("div",{className:"medical-card full-height",children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{className:q==="plan"?"active":"",onClick:()=>F("plan"),children:"Treatment Plan"}),r.jsx("button",{className:q==="history"?"active":"",onClick:()=>F("history"),children:"History"})]}),q==="plan"&&r.jsxs("div",{className:"treatment-plan-container",children:[r.jsx("div",{className:"treatment-plan-list",children:P.length===0?r.jsx("p",{className:"empty-plan-message no-print",children:"Click on procedures to add them to the treatment plan."}):P.map(xe=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",children:xe.name}),r.jsxs("div",{className:"plan-item-controls",children:[r.jsx("input",{type:"number",className:"cost-input",value:xe.price,onChange:ne=>ue(xe.instanceId,parseFloat(ne.target.value)||0)}),r.jsx("button",{className:"remove-proc-btn",onClick:()=>ae(xe.instanceId),children:r.jsx(Vn,{size:14})})]})]},xe.instanceId))}),P.length>0&&r.jsxs("div",{className:"plan-total",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{className:"total-amount",children:["",Te.toFixed(2)]})]})]}),q==="history"&&r.jsx("div",{className:"history-list",children:H.length===0?r.jsx("p",{className:"empty-plan-message",children:"No previous records found."}):H.map(xe=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(xe.date||xe.createdAt||Date.now()).toLocaleDateString()}),r.jsx("span",{className:`record-status status-${xe.status}`,children:xe.status})]}),r.jsx("div",{className:"history-procedures",children:xe.selected_procedures.map((ne,oe)=>r.jsx("span",{className:"history-proc-tag",children:ne.name},oe))}),xe.notes&&r.jsxs("div",{className:"history-notes",children:[r.jsx("strong",{children:"Notes:"})," ",xe.notes.substring(0,100),"..."]}),r.jsxs("div",{className:"history-record-actions",children:[xe.status==="draft"&&r.jsxs("button",{className:"edit-record-btn",onClick:()=>ee(xe.id),children:[r.jsx(ro,{size:14})," Edit"]}),xe.bill_id&&r.jsxs("button",{className:"view-bill-btn",onClick:()=>{K(xe.id),ce(!0)},children:[r.jsx(Ta,{size:14})," View Bill"]})]})]},xe.id))}),r.jsx("div",{className:"action-footer no-print",children:r.jsx("button",{className:"save-btn",onClick:()=>Ne(!0),disabled:L||P.length===0,children:L?"Saving...":"Save & Bill"})})]})})]})}),d&&l&&r.jsx(eG,{patient:l,onClose:()=>f(!1),onSave:le}),z&&r.jsx(pOe,{onClose:()=>G(!1),onUpdate:Le}),B&&je&&r.jsx(SOe,{isOpen:B,onClose:()=>ce(!1),recordId:je,onBillingComplete:()=>{l&&se(`/api/medical/patient/${l.id}`).then(xe=>xe.json()).then(xe=>V(xe)).catch(console.error)}})]})},COe=({isOpen:t,onClose:e,patientId:n,patientName:a,onRecordPayment:i})=>{const[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(null),[p,g]=v.useState(!1),x=v.useCallback(async()=>{if(!(!t||!n)){g(!0),f(null);try{const j=await se(`/api/patient-debts/${n}/transactions`);if(!j.ok)throw new Error(`Failed to fetch transactions: ${j.statusText}`);const _=(await j.json()).map(P=>({...P,debt_value:parseFloat(P.debt_value),amount_paid:parseFloat(P.amount_paid),balance_remaining:parseFloat(P.balance_remaining)}));o(_);const T=await se(`/api/patient-debts/${n}/balance`);if(!T.ok)throw new Error(`Failed to fetch balance: ${T.statusText}`);const C=await T.json();c({patientId:C.patientId,patientName:C.patientName,totalDebtValue:parseFloat(C.totalDebtValue),totalAmountPaid:parseFloat(C.totalAmountPaid),netDebt:parseFloat(C.netDebt)})}catch(j){console.error("Error fetching transactions/balance:",j),f(j.message||"Failed to load transactions or balance.")}finally{g(!1)}}},[t,n]);if(v.useEffect(()=>{t&&x()},[t,x]),!t)return null;const b=r.jsxs("div",{id:"debt-history-modal-root",className:"modal-overlay",children:[r.jsx("style",{children:`
                @media print {
                    body > * { display: none !important; }
                    #root { display: none !important; }
                    #debt-history-modal-root {
                        display: flex !important;
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        background: white !important;
                        z-index: 99999 !important;
                        align-items: flex-start !important; /* Start from top for long lists */
                        overflow-y: auto !important;
                    }
                    #debt-history-modal-root .modal-content {
                        box-shadow: none !important;
                        border: none !important;
                        width: 100% !important;
                        max-width: 100% !important;
                        margin: 0 !important;
                        padding: 20px !important;
                    }
                    /* Ensure visibility of children */
                    #debt-history-modal-root * { visibility: visible !important; }
                    
                    /* Hide non-print elements */
                    .modal-close-button,
                    .view-button,
                    .modal-actions {
                        display: none !important;
                    }
                    
                    .balance-summary {
                         page-break-inside: avoid;
                    }
                    
                    .debt-table {
                        width: 100% !important;
                    }
                    
                    /* Reset table colors for print */
                    .debt-table th {
                        background-color: #f3f4f6 !important;
                        color: black !important;
                        -webkit-print-color-adjust: exact;
                    }
                }
            `}),r.jsxs("div",{className:"modal-content large-modal printable-section",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border-color)",paddingBottom:"0.75rem",marginBottom:"1rem"},children:[r.jsxs("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:700,color:"var(--text-color)"},children:["Debt History: ",a]}),r.jsxs("button",{onClick:()=>window.print(),className:"action-text-button view-button",style:{padding:"0.4rem 0.8rem"},title:"Print Ledger",children:[r.jsx(vf,{size:14})," ",r.jsx("span",{style:{fontSize:"0.85rem"},children:"Print Ledger"})]})]}),d&&r.jsx("div",{className:"modal-error-message",children:d}),p&&r.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}),!p&&l&&r.jsxs("div",{className:"balance-summary",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem"},children:[r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",backgroundColor:"rgba(0,0,0,0.02)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Debt"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700},children:["",l.totalDebtValue.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",backgroundColor:"rgba(0,0,0,0.02)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Paid"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--success-color)"},children:["",l.totalAmountPaid.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"balance-card",style:{padding:"0.5rem",borderRadius:"var(--radius-md)",border:"1px solid var(--success-color)",backgroundColor:l.netDebt>0?"rgba(239, 68, 68, 0.05)":"rgba(16, 185, 129, 0.05)",borderColor:l.netDebt>0?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Net Outstanding"}),r.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:800,color:l.netDebt>0?"var(--danger-color)":"var(--success-color)"},children:["",l.netDebt.toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),r.jsx("h4",{style:{fontSize:"1rem",marginTop:"1.25rem",marginBottom:"0.75rem"},children:"Transaction History"}),!p&&s.length===0?r.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"No transactions recorded for this patient."}):r.jsx("div",{className:"table-responsive",style:{marginTop:"0"},children:r.jsxs("table",{className:"debt-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Debt Added"}),r.jsx("th",{children:"Payment"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:s.map(j=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",style:{whiteSpace:"nowrap"},children:new Date(j.transaction_date).toLocaleDateString()}),r.jsx("td",{"data-label":"Debt Added",className:j.debt_value>0?"debt-added":"",style:{fontWeight:500},children:j.debt_value>0?`+ ${j.debt_value.toLocaleString("en-IN",{minimumFractionDigits:2})}`:"-"}),r.jsx("td",{"data-label":"Payment",className:j.amount_paid>0?"payment-received":"",style:{fontWeight:500},children:j.amount_paid>0?`- ${j.amount_paid.toLocaleString("en-IN",{minimumFractionDigits:2})}`:"-"}),r.jsxs("td",{"data-label":"Balance",style:{fontWeight:600},children:["",j.balance_remaining.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsx("td",{"data-label":"Mode",children:j.payment_mode?j.payment_mode.charAt(0).toUpperCase()+j.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:j.notes||"",children:j.notes||"-"})]},j.id))})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:()=>{i()},className:"button-submit",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Record Payment"}),r.jsx("button",{type:"button",onClick:e,className:"button-cancel",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Close"})]})]})]});return zD.createPortal(b,document.body)},TOe=({isOpen:t,onClose:e,patientId:n,patientName:a,currentDebt:i,onPaymentSuccess:s})=>{const[o,l]=v.useState(""),[c,d]=v.useState(""),[f,p]=v.useState(""),[g,x]=v.useState("cash"),[b,j]=v.useState(null),[S,_]=v.useState(!1);v.useEffect(()=>{t&&(l(new Date().toISOString().split("T")[0]),d(""),p(""),x("cash"),j(null),_(!1))},[t]);const T=async P=>{if(P.preventDefault(),j(null),!n)return;const k=parseFloat(c||"0");if(k<=0){j("Payment amount must be greater than 0");return}_(!0);try{const E=await se(`/api/patient-debts/${n}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:o,amount_paid:k,notes:f,payment_mode:g})});if(!E.ok){const I=await E.json();throw new Error(I.message||"Failed to add payment.")}s(),e(),window.confirm("Payment Recorded. Print Receipt?")&&setTimeout(()=>window.print(),500)}catch(E){console.error("Error adding payment:",E),j(E.message||"Failed to add payment.")}finally{_(!1)}};if(!t||!t)return null;const C=r.jsxs("div",{id:"add-payment-modal-root",className:"modal-overlay",children:[r.jsx("style",{children:`
                 /* Print styles for Add Payment Modal (if ever needed to print the form itself) */
                @media print {
                    body > * { display: none !important; }
                    #root { display: none !important; }
                    #add-payment-modal-root {
                        display: flex !important;
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        background: white !important;
                        z-index: 99999 !important;
                        align-items: center !important;
                        justify-content: center !important;
                    }
                    #add-payment-modal-root .modal-content {
                        box-shadow: none !important;
                        border: none !important;
                        width: 100% !important;
                        max-width: 100% !important;
                    }
                    #add-payment-modal-root * { visibility: visible !important; }
                    .button-cancel, .button-submit, .modal-close-button { display: none !important; }
                }
            `}),r.jsxs("div",{className:"modal-content small-modal",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:""}),r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h3",{children:"Record Payment"}),r.jsxs("div",{className:"modal-header-subtitle",children:["Patient: ",a]})]}),r.jsxs("div",{className:"current-debt-info highlight-debt",children:[r.jsx("span",{children:"Outstanding Debt"}),r.jsxs("strong",{children:["",parseFloat(i).toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),b&&r.jsx("div",{className:"modal-error-message",children:b}),r.jsxs("form",{onSubmit:T,children:[r.jsxs("div",{className:"form-grid-2",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_date",children:"Date"}),r.jsx("input",{type:"date",id:"payment_date",value:o,onChange:P=>l(P.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_mode",children:"Mode"}),r.jsxs("select",{id:"payment_mode",value:g,onChange:P=>x(P.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"amount_paid",children:"Amount Paid ()"}),r.jsx("input",{type:"number",id:"amount_paid",value:c,onChange:P=>d(P.target.value),step:"0.01",min:"0.01",className:"amount-input",placeholder:"0.00",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_notes",children:"Notes"}),r.jsx("textarea",{id:"payment_notes",value:f,onChange:P=>p(P.target.value),placeholder:"e.g., Partial payment via cash",className:"h-60"})]}),r.jsxs("div",{className:"modal-actions mt-0 pt-16",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",disabled:S,children:S?"Recording...":"Record Payment"})]})]})]})]});return zD.createPortal(C,document.body)},PN=()=>{const t=Lt(),e=ds(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(""),[f,p]=v.useState("debtHighToLow"),[g,x]=v.useState(!0),[b,j]=v.useState(""),[S,_]=v.useState(!1),[T,C]=v.useState(!1),[P,k]=v.useState(null),[E,I]=v.useState(0),L=v.useMemo(()=>{let z=[...n];g&&(z=z.filter(ie=>parseFloat(ie.netDebt)>0));const G=parseFloat(b);switch(!isNaN(G)&&G>0&&(z=z.filter(ie=>parseFloat(ie.netDebt)>=G)),f){case"name":z.sort((ie,W)=>ie.name.localeCompare(W.name));break;case"debtHighToLow":z.sort((ie,W)=>parseFloat(W.netDebt)-parseFloat(ie.netDebt));break;case"debtLowToHigh":z.sort((ie,W)=>parseFloat(ie.netDebt)-parseFloat(W.netDebt));break}return z},[n,g,b,f]),$=v.useCallback(async()=>{s(!0),l(null);try{const z=c?`/api/patient-debts?search=${encodeURIComponent(c)}`:"/api/patient-debts",G=await se(z);if(!G.ok)throw new Error(`Failed to fetch patients with debt: ${G.statusText}`);const ie=await G.json();a(ie);const W=ie.reduce((B,ce)=>B+parseFloat(ce.netDebt||"0"),0);I(W)}catch(z){console.error("Failed to fetch patients with debt:",z),l(z.message||"Failed to load patients with debt.")}finally{s(!1)}},[c]);v.useEffect(()=>{$()},[$]);const q=z=>{z&&(e.prefetchQuery({queryKey:Gt.patients.context(z),queryFn:async()=>{const G=await se(`/api/patients/${z}/context`);if(!G.ok)throw new Error("Failed to fetch patient context");return G.json()},staleTime:1e3*60*5}),e.prefetchQuery({queryKey:Gt.patientDebts.balance(z),queryFn:async()=>{const G=await se(`/api/patient-debts/${z}/balance`);if(!G.ok)throw new Error("Failed to fetch patient debt");return G.json()},staleTime:1e3*60}),e.prefetchQuery({queryKey:Gt.queue.latest(z),queryFn:async()=>{const G=await se(`/api/queue/patient/${z}/latest`);if(!G.ok){if(G.status===404)return null;throw new Error("Failed to fetch queue status")}return G.json()},staleTime:1e3*5}))},F=v.useCallback(()=>{$()},[$]),H=z=>{k(z),_(!0)},V=()=>{_(!1),k(null)},X=z=>{k(z),C(!0)},Y=()=>{C(!1),k(null)};return i?r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(te,{width:80,height:36}),r.jsx(te,{width:200,height:32})]}),r.jsx(te,{width:250,height:36})]}),r.jsxs("div",{className:"filter-container",children:[r.jsx(te,{width:200,height:40}),r.jsx(te,{width:120,height:40}),r.jsx(te,{width:100,height:40}),r.jsx(te,{width:150,height:40})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Total Debt Value"}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6].map(z=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:32})})]},z))})]})})]}):r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(on,{size:20})}),r.jsx("h2",{children:"Patient Debt Management"})]}),r.jsxs("div",{className:`total-debt-display ${E>0?"debt-positive":"debt-zero"}`,children:[r.jsx(cd,{size:20}),r.jsx("strong",{children:"Total Outstanding Debt:"})," ",E.toFixed(2)]})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("div",{className:"filter-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or phone...",value:c,onChange:z=>d(z.target.value),className:"filter-search-input"}),r.jsxs("select",{id:"sortBy",value:f,onChange:z=>p(z.target.value),className:"filter-select",title:"Sort by",children:[r.jsx("option",{value:"debtHighToLow",children:"Debt "}),r.jsx("option",{value:"debtLowToHigh",children:"Debt "}),r.jsx("option",{value:"name",children:"Name A-Z"})]}),r.jsx("input",{type:"number",id:"minDebt",value:b,onChange:z=>j(z.target.value),placeholder:"Min ",min:"0",className:"filter-number-input",title:"Minimum debt amount"}),r.jsxs("label",{className:"filter-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:z=>x(z.target.checked)}),"Outstanding only"]}),r.jsxs("span",{className:"filter-count",children:[L.length,"/",n.length]})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsxs("th",{children:[r.jsx(Jn,{size:14})," Patient Name"]}),r.jsxs("th",{children:[r.jsx(tg,{size:14})," Phone"]}),r.jsxs("th",{children:[r.jsx(hw,{size:14})," Total Debt Value"]}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{className:"actions-cell",children:"Actions"})]})}),r.jsx("tbody",{children:L.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"no-results-message",children:c?"No patients found matching your search.":"No patients with outstanding debt."})}):L.map(z=>r.jsxs("tr",{onClick:()=>t(`/dashboard/edit-complaint/patient/${z.id}`),onMouseEnter:()=>q(z.id),style:{cursor:"pointer"},title:"Click to view patient details",children:[r.jsx("td",{"data-label":"Patient Name",children:r.jsxs("div",{className:"patient-name-cell",children:[r.jsx("strong",{children:z.name}),z.age&&z.gender&&r.jsxs("span",{className:"patient-meta",children:[z.age,"y / ",z.gender]})]})}),r.jsx("td",{"data-label":"Phone",children:z.phone||"-"}),r.jsxs("td",{"data-label":"Total Debt Value",children:["",z.totalDebtValue]}),r.jsxs("td",{"data-label":"Total Paid",className:"amount-paid",children:["",z.totalAmountPaid]}),r.jsxs("td",{"data-label":"Net Debt",className:parseFloat(z.netDebt)>0?"debt-outstanding":"debt-clear",children:["",z.netDebt]}),r.jsx("td",{className:"actions-cell",onClick:G=>G.stopPropagation(),children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsxs("button",{onClick:()=>H(z),className:"action-text-button view-button",title:"View Transactions",children:[r.jsx(Im,{size:16})," View History"]}),r.jsxs("button",{onClick:()=>X(z),className:"action-text-button add-payment-button",title:"Record Payment",children:[r.jsx(Ps,{size:16})," Record Payment"]})]})})]},z.id))})]})}),S&&P&&r.jsx(COe,{isOpen:S,onClose:V,patientId:P.id,patientName:P.name,onRecordPayment:()=>{V(),C(!0)}}),T&&P&&r.jsx(TOe,{isOpen:T,onClose:Y,patientId:P.id,patientName:P.name,currentDebt:P.netDebt,onPaymentSuccess:()=>{F(),_(!0)}})]})},fG=()=>{const t=Lt(),e=$r(),[n,a]=v.useState(""),[i,s]=v.useState([]),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!1),[S,_]=v.useState(!1),[T,C]=v.useState("idle"),[P,k]=v.useState(null),[E,I]=v.useState(""),L=v.useMemo(()=>Uc(async be=>{if(be.trim().length<2){s([]),l(!1);return}l(!0);try{const Ce=new URLSearchParams({search:encodeURIComponent(be),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Ae=await se(`/api/patients?${Ce.toString()}`);if(Ae.ok){const me=await Ae.json();s(me.patients||[])}}catch(Ce){console.error("Search failed",Ce)}finally{l(!1)}},300),[]),$=be=>{const Ce=be.target.value;a(Ce),Ce.length>=2?(l(!0),L(Ce)):(s([]),l(!1))},q=v.useCallback(async be=>{_(!0);try{const Ce=await se(`/api/patient-files/${be}`);if(Ce.ok){const Ae=await Ce.json();x(Ae)}}catch(Ce){console.error("Failed to fetch files",Ce)}finally{_(!1)}},[]),F=be=>{d({id:be.id,name:be.name,age:be.age,gender:be.gender,phone:be.phone,token:be.token}),a(""),I(""),s([]),k(null),C("idle"),p([]),q(be.id)},H=()=>{d(null),p([]),x([]),C("idle")};Se.useEffect(()=>{if(e.state&&e.state.patient){const be=e.state.patient;F(be)}},[e.state]);const V=be=>{if(be.target.files){const Ce=Array.from(be.target.files);p(Ae=>[...Ae,...Ce]),C("idle")}},X=be=>{p(Ce=>Ce.filter((Ae,me)=>me!==be))},Y=async be=>{if(confirm("Are you sure you want to delete this file?"))try{(await se(`/api/patient-files/${be}`,{method:"DELETE"})).ok?x(Ae=>Ae.filter(me=>me.id!==be)):alert("Failed to delete file.")}catch(Ce){console.error("Delete error",Ce),alert("Error deleting file.")}},z=be=>be.startsWith("image/")?r.jsx(_I,{size:20}):be==="application/pdf"?r.jsx(Ta,{size:20}):be.startsWith("video/")?r.jsx(vX,{size:20}):be.startsWith("audio/")?r.jsx(aJ,{size:20}):r.jsx(nC,{size:20}),G=be=>{if(be===0)return"0 Bytes";const Ce=1024,Ae=["Bytes","KB","MB","GB"],me=Math.floor(Math.log(be)/Math.log(Ce));return parseFloat((be/Math.pow(Ce,me)).toFixed(2))+" "+Ae[me]},ie=async()=>{if(!(!c||f.length===0)){j(!0),k(null),C("idle");try{const be=new FormData;f.forEach(Ae=>{be.append("files",Ae)});const Ce=await se(`/api/patient-files/${c.id}`,{method:"POST",body:be});if(Ce.ok){C("success");const Ae=await Ce.json();Ae.files&&x(me=>[...Ae.files,...me]),setTimeout(()=>{p([]),C("idle")},1500)}else throw new Error("Upload failed")}catch(be){console.error("Upload error",be),k("Failed to upload files. Please try again."),C("error")}finally{j(!1)}}},[W,B]=v.useState(null),[ce,je]=v.useState(""),K=v.useRef(null),Ie=()=>{K.current&&(K.current.value="",K.current.click())},Ue=be=>{B(be.id),je(be.original_name)},ze=()=>{B(null),je("")},Le=async be=>{if(ce.trim())try{(await se(`/api/patient-files/${be}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:ce})})).ok?(x(Ae=>Ae.map(me=>me.id===be?{...me,original_name:ce}:me)),B(null)):alert("Failed to rename file.")}catch(Ce){console.error("Rename error",Ce),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(on,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Patient Files"})]})}),c?r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"selected-patient-header",children:[r.jsx("div",{className:"patient-avatar",children:c.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"selected-patient-info",children:[r.jsx("h2",{className:"selected-patient-name",children:c.name}),r.jsxs("div",{className:"selected-patient-details",children:[r.jsxs("span",{children:["Token: #",c.token||"NA"]}),c.gender&&r.jsxs("span",{children:[" ",c.gender]}),c.age&&r.jsxs("span",{children:[" ",c.age," yrs"]}),c.phone&&r.jsxs("span",{children:[" ",c.phone]})]}),r.jsx("input",{ref:K,type:"file",multiple:!0,onChange:V,style:{display:"none"}})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Ie,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx(SE,{size:18}),r.jsx("span",{children:"Upload"})]}),r.jsx("button",{onClick:H,className:"secondary-btn change-patient-btn",children:"Change Patient"})]})]}),(g.length>0||S)&&r.jsxs("div",{className:"existing-files-section mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(nC,{className:"text-indigo-500",size:20}),"Uploaded Files (",g.length,")"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(In,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search in Drive...",value:E,onChange:be=>I(be.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),S?r.jsx("div",{className:"flex justify-center p-8",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx(te,{width:300,height:20}),r.jsx(te,{width:300,height:20}),r.jsx(te,{width:300,height:20})]})}):r.jsxs("div",{className:"file-grid",children:[g.filter(be=>be.original_name.toLowerCase().includes(E.toLowerCase())).map(be=>{const Ce=be.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[Ce?r.jsx("img",{src:be.url,alt:be.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:z(be.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:be.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-icon-btn download",title:"Download",children:r.jsx(zz,{size:18})}),r.jsx("button",{onClick:()=>Ue(be),className:"action-icon-btn rename",title:"Rename",children:r.jsx(mJ,{size:18})}),r.jsx("button",{onClick:()=>Y(be.id),className:"action-icon-btn delete",title:"Delete",children:r.jsx(Vn,{size:18})})]})]}),r.jsx("div",{className:"file-card-meta",children:W===be.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:ce,onChange:Ae=>je(Ae.target.value),className:"rename-input",autoFocus:!0,onKeyDown:Ae=>{Ae.key==="Enter"&&Le(be.id),Ae.key==="Escape"&&ze()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>Le(be.id),className:"icon-btn text-green-600",children:r.jsx(Fo,{size:14})}),r.jsx("button",{onClick:ze,className:"icon-btn text-red-500",children:r.jsx(Ft,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:Ce?r.jsx(_I,{size:16,className:"text-purple-500"}):z(be.mime_type)}),r.jsx("a",{href:be.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:be.original_name,children:be.original_name})]})})]},be.id)}),g.filter(be=>be.original_name.toLowerCase().includes(E.toLowerCase())).length===0&&E&&r.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(In,{size:48,className:"text-slate-200"}),r.jsxs("p",{children:['No files found matching "',E,'"']})]})})]})]}),(f.length>0||T==="success"||P)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:f.length>0?"Pending Uploads":"Upload Status"}),P&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(Wr,{size:20}),P]}),T==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Fo,{size:20}),"Files uploaded successfully!"]}),f.length>0&&r.jsx("div",{className:"file-list",children:f.map((be,Ce)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(nC,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:be.name,children:be.name}),r.jsx("div",{className:"file-size",children:G(be.size)})]}),r.jsx("button",{onClick:()=>X(Ce),className:"remove-file-btn",title:"Remove file",children:r.jsx(Ft,{size:16})})]},Ce))}),f.length>0&&r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{onClick:()=>p([]),className:"secondary-btn",disabled:b,children:"Clear"}),r.jsx("button",{onClick:ie,className:"primary-btn",disabled:b,children:b?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx(SE,{size:18}),"Upload ",f.length," File",f.length!==1?"s":""]})})]})]})]}):r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-slate-700",children:[r.jsx(In,{className:"text-indigo-500"}),"Search Patient"]}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(In,{className:"search-icon-files",size:20}),r.jsx("input",{type:"text",placeholder:"Enter patient name, phone, or token...",value:n,onChange:$,className:"search-input",autoFocus:!0})]}),o?r.jsx("div",{className:"patient-results-list",children:[1,2,3].map(be=>r.jsxs("div",{className:"patient-result-item",style:{cursor:"default"},children:[r.jsx(te,{width:150,height:20}),r.jsx(te,{width:100,height:16})]},be))}):i.length>0&&r.jsx("ul",{className:"patient-results-list",children:i.map(be=>r.jsxs("li",{className:"patient-result-item",onClick:()=>F(be),children:[r.jsxs("div",{children:[r.jsx("div",{className:"patient-name-text",children:be.name}),r.jsxs("div",{className:"patient-meta",children:[r.jsxs("span",{children:["#",be.token||"N/A"]}),be.gender&&r.jsx("span",{children:be.gender}),be.age&&r.jsxs("span",{children:[be.age," yrs"]})]})]}),r.jsx("div",{className:"patient-phone",children:be.phone})]},be.id))}),n.length>=2&&!o&&i.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"30px",color:"#94a3b8"},children:['No patients found matching "',n,'"']})]})]})},kOe=()=>{const t=v.useRef(null),e=v.useRef(null),[n,a]=v.useState(!1),[i,s]=v.useState(0),[o,l]=v.useState(!1),[c,d]=v.useState(!1),[f,p]=v.useState(null),g=30,x=100,b=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:!0});t.current&&(t.current.srcObject=_,d(!0),p(null))}catch(_){console.error("Error accessing camera:",_),p("Camera access denied. Please allow camera permissions to use motion detection."),d(!1)}},j=()=>{var T;const _=(T=t.current)==null?void 0:T.srcObject;_&&_.getTracks().forEach(C=>C.stop()),d(!1)};v.useEffect(()=>(b(),()=>j()),[]),v.useEffect(()=>{if(!c)return;let _;const T=e.current,C=t.current;if(!T||!C)return;const P=T.getContext("2d",{willReadFrequently:!0});if(!P)return;const k=320,E=240;T.width=k,T.height=E;let I=null;const L=()=>{if(C.readyState===C.HAVE_ENOUGH_DATA){P.drawImage(C,0,0,k,E);const q=P.getImageData(0,0,k,E).data;if(I){let F=0;for(let H=0;H<q.length;H+=4*4){const V=Math.abs(q[H]-I[H]),X=Math.abs(q[H+1]-I[H+1]),Y=Math.abs(q[H+2]-I[H+2]);V+X+Y>g&&F++}if(F>x){const H=Date.now();s(H),a(!0),o||l(!0)}else a(!1)}I=q}_=requestAnimationFrame(L)};return L(),()=>{cancelAnimationFrame(_)}},[c,o]);const S=()=>{l(!1)};return r.jsxs("div",{className:"motion-detect-container",style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{className:"status-header bg-white p-4 rounded-lg shadow-sm flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${c?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:r.jsx(xE,{size:24})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Motion Detection Status"}),r.jsx("p",{className:"text-sm text-gray-500",children:c?"Camera Active - Monitoring":"Camera Inactive"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${n?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(Nc,{size:16}),r.jsx("span",{className:"font-medium",children:n?"Motion Detected!":"No Motion"})]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${o?"bg-blue-50 border-blue-200 text-blue-600":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(bE,{size:16}),r.jsx("span",{className:"font-medium",children:o?"AI Assistant Active":"AI Assistant Idle"})]})]})]}),f&&r.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-200",children:f}),r.jsxs("div",{className:"video-feed-container bg-black rounded-lg overflow-hidden relative shadow-lg",style:{maxWidth:"640px",margin:"0 auto"},children:[r.jsx("video",{ref:t,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",display:c?"block":"none"}}),r.jsx("canvas",{ref:e,style:{display:"none"}}),!c&&!f&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:r.jsxs("div",{className:"text-center",children:[r.jsx(xE,{size:48,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Connecting to camera..."})]})})]}),o&&r.jsx(nS,{onClose:S,patientData:null,tokenNumber:null,onAiSummaryChange:()=>{},lastMotionTimestamp:i,backgroundMode:!0})]})},AOe=async()=>{const t=await se("/api/staff");if(!t.ok)throw new Error("Failed to fetch staff");const e=await t.json();return e.staff||e||[]};function EOe(){return ON({queryKey:[...Gt.staff.list,"doctors"],queryFn:AOe,staleTime:5*60*1e3,select:t=>t.filter(e=>e.role==="doctor"||e.role==="admin")})}const FA=({currentUser:t})=>{const[e,n]=v.useState("queue"),[a,i]=v.useState(""),[s,o]=v.useState(new Date),l=s.toISOString().split("T")[0],[c,d]=v.useState(!1),[f,p]=v.useState("list"),{data:g,isLoading:x,refetch:b}=XH(l),j=(g==null?void 0:g.list)||[],{data:S=[],isLoading:_}=EOe(),T=uOe(),C=ds(),[P,k]=v.useState(null),[E,I]=v.useState(null),L=Lt(),$=$r(),q=()=>{b()};v.useEffect(()=>{const B=new URLSearchParams($.search).get("tab");B&&Y.find(je=>je.id===B)&&n(B)},[$.search]),v.useEffect(()=>{e==="queue"&&b()},[e,b]);const F=v.useCallback(async(W,B)=>{if(console.log(`Attempting to assign doctor ${B} to queue ${W}`),I(null),k(null),!B){console.log("No doctor ID provided, skipping assignment.");return}const ce=j.find(Ie=>Ie.id===W);if(!ce){console.error(`Queue entry ${W} not found in local state.`),I("Queue entry not found.");return}if(ce.doctor_id===B){console.log(`Queue ${W} already assigned to doctor ${B}. Skipping.`);return}const je=async Ie=>{if(!Ie||!Ie.id||!Ie.name){I("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",Ie);return}const Ue=async()=>{try{await T.mutateAsync({queueId:W,status:"waiting",doctorId:B});const ze=S.find(Le=>Le.id===B);return console.log(`Successfully assigned doctor ${ze==null?void 0:ze.name} to queue ${W}.`),!0}catch(ze){return console.error(`Error assigning doctor for queue ${W}:`,ze),I(`Failed to assign doctor: ${ze.message}`),!1}};Ie.subscription_status==="active"?(console.log(`Patient ${Ie.name} (ID: ${Ie.id}) has active subscription. Assigning doctor directly.`),await Ue()):(console.log(`Patient ${Ie.name} (ID: ${Ie.id}) does not have active subscription. Navigating to billing WITHOUT assigning doctor yet.`),L(`/dashboard/doctor-billing/${W}?doctorId=${B}`))},K=ce.Patient;if(K&&K.id&&K.name)console.log("Patient details found in state. Proceeding with assignment."),await je(K);else{console.warn(`Patient details missing for queue entry ${W}. Fetching patient ${ce.patient_id}...`);try{const Ie=await se(`/api/patients/${ce.patient_id}`);if(!Ie.ok){const ze=await Ie.json().catch(()=>({}));throw new Error(ze.message||`Failed to fetch patient details (status ${Ie.status})`)}const Ue=await Ie.json();console.log("Successfully fetched patient details:",Ue),await je(Ue)}catch(Ie){console.error(`Failed to fetch patient details for patient ID ${ce.patient_id}:`,Ie),I(`Failed to fetch required patient details: ${Ie.message}`)}}},[S,j,L,T]),H=W=>{W&&(C.prefetchQuery({queryKey:Gt.patients.context(W),queryFn:async()=>{const B=await se(`/api/patients/${W}/context`);if(!B.ok)throw new Error("Failed to fetch patient context");return B.json()},staleTime:5*60*1e3}),C.prefetchQuery({queryKey:Gt.patientDebts.balance(W),queryFn:async()=>{const B=await se(`/api/patient-debts/${W}/balance`);return B.ok?B.json():{netDebt:0}},staleTime:1*60*1e3}),C.prefetchQuery({queryKey:Gt.queue.latest(W),queryFn:async()=>{const B=await se(`/api/queue/patient/${W}/latest`);if(!B.ok)throw new Error("Failed to fetch latest queue status");const ce=await B.json();return ce!=null&&ce._id&&C.prefetchQuery({queryKey:Gt.queue.entry(ce._id),queryFn:async()=>{const je=await se(`/api/queue/doctor/complaint/${ce._id}`);if(!je.ok)throw new Error("Failed to fetch complaint record");return je.json()},staleTime:1*60*1e3}),ce},staleTime:5e3}),C.prefetchQuery({queryKey:Gt.dental.records(W),queryFn:async()=>{const B=await se(`/api/dental/patient/${W}`);if(!B.ok)throw new Error("Failed to fetch dental records");return B.json()},staleTime:5*60*1e3}))},V=async(W,B)=>{var je;I(null);const ce=B==="consulting"?"start consultation":"complete visit";try{await T.mutateAsync({queueId:W,status:B,doctorId:B==="consulting"&&((je=j.find(K=>K.id===W))==null?void 0:je.doctor_id)||void 0})}catch(K){console.error(`Error trying to ${ce}:`,K),I(`Failed to ${ce}: ${K.message}`)}},X=async(W,B)=>{let ce="red";B==="red"?ce="green":B==="green"?ce="blue":B==="blue"?ce=null:ce="red";try{if(!(await se(`/api/patients/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_code:ce})})).ok)throw new Error("Failed to update patient color");b()}catch(je){console.error("Error updating patient color:",je)}},Y=[{id:"queue",label:"Queue",icon:r.jsx(Ds,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:r.jsx(In,{size:20})},{id:"manage-admission",label:"Admissions",icon:r.jsx(_Q,{size:20})},{id:"all-patients",label:"Patients",icon:r.jsx(Ab,{size:20})},{id:"lab",label:"Lab",icon:r.jsx(Xj,{size:20})},{id:"custom-bill",label:"Bill",icon:r.jsx(Ps,{size:20})},{id:"medical",label:"Medical",icon:r.jsx(TX,{size:20})},{id:"motion-detect",label:"Motion",icon:r.jsx(xE,{size:20})},{id:"debt-management",label:"Debt",icon:r.jsx(cd,{size:20})},{id:"patient-files",label:"Files",icon:r.jsx(Ta,{size:20})}],z=W=>{try{return new Date(W).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},G=j.filter(W=>{var B,ce;return(ce=(B=W.Patient)==null?void 0:B.name)==null?void 0:ce.toLowerCase().includes(a.toLowerCase())}),{openCommandBar:ie}=Ic();return r.jsxs("div",{className:"reception-app",children:[E&&r.jsxs("div",{className:"reception-error",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:E})]}),r.jsx("div",{className:"reception-nav",children:Y.map(W=>r.jsxs("button",{className:`reception-nav-item ${e===W.id?"active":""}`,onClick:()=>{W.id==="newtons-ai"?ie():n(W.id)},children:[r.jsx("span",{children:W.icon}),W.label]},W.id))}),r.jsxs("div",{className:"reception-main",children:[e==="queue"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"reception-header",children:[r.jsxs("div",{className:"reception-actions",children:[r.jsxs("div",{className:"reception-search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patients...",className:"reception-search-input",value:a,onChange:W=>i(W.target.value)}),r.jsx(In,{className:"reception-search-icon",size:18})]}),r.jsxs("div",{className:"reception-controls",children:[r.jsxs("div",{className:"reception-view-toggle",children:[r.jsxs("button",{className:`reception-toggle-option ${f==="list"?"active":""}`,onClick:()=>p("list"),title:"List View",children:[r.jsx($z,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"List"})]}),r.jsxs("button",{className:`reception-toggle-option ${f==="timeline"?"active":""}`,onClick:()=>p("timeline"),title:"Timeline View",children:[r.jsx(VD,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"Timeline"})]})]}),r.jsx("div",{className:"reception-btn-icon",style:{width:"auto",padding:"0 10px",gap:"8px"},children:r.jsx("input",{type:"date",className:"bg-transparent border-none outline-none text-sm dark:text-white",value:s.toISOString().split("T")[0],onChange:W=>o(new Date(W.target.value))})}),r.jsxs("button",{onClick:()=>d(!0),className:"reception-btn-primary",children:[r.jsx(kb,{size:16}),r.jsx("span",{children:"Book Appointment"})]})]})]}),r.jsxs("div",{className:"reception-stats",children:[r.jsxs("div",{className:"reception-stat-card stat-waiting",children:[r.jsx("div",{className:"reception-stat-label",children:"Waiting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(W=>W.status==="waiting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-consulting",children:[r.jsx("div",{className:"reception-stat-label",children:"Consulting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(W=>W.status==="consulting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-completed",children:[r.jsx("div",{className:"reception-stat-label",children:"Completed"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(W=>W.status==="seen").length})]})]})]}),r.jsx(QH,{isOpen:c,onClose:()=>{d(!1),b()},onAppointmentBooked:q}),x&&j.length===0?r.jsx("div",{className:"reception-card",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:50,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{className:"hidden md:table-cell",children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:120,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(W=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:40,height:20})}),r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsx(te,{width:120,height:32})})]},W))})]})}):G.length===0?r.jsx("div",{className:"empty-queue-message",children:a?"No patients found matching your search.":"Queue is empty."}):f==="timeline"?r.jsx(YH,{queueList:G,onPatientClick:W=>L(`/dashboard/edit-complaint/${W.id}`)}):r.jsx("div",{className:"reception-card reception-table-wrapper",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"hidden-mobile",children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Phone"}),r.jsx("th",{className:"hidden-mobile",children:"Complaint"}),r.jsx("th",{className:"hidden-mobile",children:"Subscription"}),r.jsx("th",{className:"hidden-mobile",children:"Time"}),r.jsx("th",{className:"text-center",children:"Action"})]})}),r.jsx("tbody",{children:G.map(W=>{var B,ce,je,K,Ie,Ue,ze,Le,be,Ce,Ae,me;return r.jsxs("tr",{onClick:()=>L(`/dashboard/edit-complaint/${W.id}`),onMouseEnter:()=>W.patient_id&&H(W.patient_id),className:"reception-row",children:[r.jsxs("td",{className:"hidden-mobile",children:[" ",r.jsxs("span",{className:"queue-token",children:["#",W.token_no]})," "]}),r.jsx("td",{children:r.jsxs("div",{className:"patient-cell-content",children:[r.jsx("span",{className:"reception-color-dot",style:{backgroundColor:((B=W.Patient)==null?void 0:B.color_code)||"#cbd5e1"},onClick:ye=>{var le;ye.stopPropagation(),(le=W.Patient)!=null&&le.id&&X(W.Patient.id,W.Patient.color_code)},title:"Click to change color"}),r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:((ce=W.Patient)==null?void 0:ce.name)||"N/A"}),r.jsxs("span",{className:"details",children:[(je=W.Patient)!=null&&je.age?`${W.Patient.age}y`:"",(K=W.Patient)!=null&&K.gender?`, ${W.Patient.gender}`:""]})]})]})}),r.jsxs("td",{className:"desktop-only",children:[" ",r.jsx("div",{className:"text-sm text-gray-500",children:((Ie=W.Patient)==null?void 0:Ie.phone)||"-"})," "]}),r.jsx("td",{className:"desktop-only",children:r.jsx("span",{className:"reception-badge badge-neutral",children:W.complaint||"-"})}),r.jsxs("td",{className:"desktop-only",children:[r.jsx("span",{className:`reception-badge ${((Ue=W.Patient)==null?void 0:Ue.subscription_status)==="active"?"badge-active":((ze=W.Patient)==null?void 0:ze.subscription_status)==="cancelled"||((Le=W.Patient)==null?void 0:Le.subscription_status)==="expired"?"badge-inactive":"badge-neutral"}`,children:((be=W.Patient)==null?void 0:be.subscription_status)??"None"}),W.Patient&&W.Patient.id&&W.Patient.subscription_status!=="active"&&r.jsx("button",{onClick:ye=>{ye.stopPropagation(),W.Patient&&L(`/start-subscription/${W.Patient.id}`)},className:"btn-start-sub ml-2",children:"Start Sub"})]}),r.jsx("td",{className:"hidden-mobile text-sm text-gray-500",children:z(W.createdAt)}),r.jsx("td",{className:"action-doctor-cell",children:P===W.id?r.jsx("div",{className:"relative inline-block text-left w-full",onClick:ye=>ye.stopPropagation(),children:r.jsxs("select",{value:"",onChange:ye=>F(W.id,ye.target.value),onBlur:()=>k(null),className:"doctor-select",autoFocus:!0,children:[r.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),_?r.jsx("option",{disabled:!0,children:"Loading..."}):S.length>0?S.map(ye=>r.jsx("option",{value:ye.id,children:ye.name},ye.id)):r.jsx("option",{disabled:!0,children:"No doctors available"})]})}):r.jsxs("div",{className:"action-doctor-content",onClick:ye=>ye.stopPropagation(),children:[W.status==="waiting"&&r.jsx(r.Fragment,{children:(Ce=W.User)!=null&&Ce.name?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"doctor-name-display",children:W.User.name}),r.jsx("button",{onClick:()=>V(W.id,"consulting"),className:"btn-action btn-start",children:"Start"})]}):_?r.jsx(te,{width:80,height:20}):S.length===0?r.jsx("span",{className:"text-red-500 text-xs",children:"No docs"}):S.length===1?r.jsxs("button",{onClick:()=>F(W.id,S[0].id),className:"btn-action btn-assign",children:["Assign ",S[0].name.split(" ")[0]]}):r.jsx("button",{onClick:()=>k(W.id),className:"btn-action btn-assign",children:"Assign"})}),W.status==="consulting"&&r.jsxs(r.Fragment,{children:[((Ae=W.User)==null?void 0:Ae.name)&&r.jsx("span",{className:"doctor-name-display",children:W.User.name}),r.jsx("button",{onClick:()=>V(W.id,"seen"),className:"btn-action btn-complete",children:"Complete"})]}),W.status==="seen"&&r.jsxs(r.Fragment,{children:[((me=W.User)==null?void 0:me.name)&&r.jsx("span",{className:"doctor-name-display",children:W.User.name}),r.jsx("span",{className:"text-gray-400 italic text-xs",children:"Done"})]}),W.status==="cancelled"&&r.jsx("span",{className:"text-red-500 italic text-xs",children:"Cancelled"})]})})]},W.id)})})]})})]}),e==="lab"&&r.jsxs("div",{className:"lab-tab-content",children:[" ",r.jsx(ZH,{currentUser:t}),r.jsxs("button",{onClick:()=>L("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[r.jsx(In,{size:16}),"Search Lab Reports"]})]}),e==="newtons-ai"&&r.jsx("div",{className:"newtons-ai-tab-content",children:r.jsx(yv,{})}),e==="manage-admission"&&r.jsx("div",{className:"manage-admission-tab-content",children:r.jsx(PM,{})}),e==="all-patients"&&r.jsx("div",{className:"all-patients-tab-content",children:r.jsx(wD,{})}),e==="custom-bill"&&r.jsx("div",{className:"custom-bill-tab-content",children:r.jsx(JH,{})}),e==="medical"&&r.jsx("div",{className:"medical-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(hG,{})}),e==="motion-detect"&&r.jsx("div",{className:"motion-detect-tab-content",style:{height:"100%"},children:r.jsx(kOe,{})}),e==="debt-management"&&r.jsx("div",{className:"debt-management-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(PN,{})}),e==="patient-files"&&r.jsx("div",{className:"patient-files-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(fG,{})})]})]})},pG=6048e5,POe=864e5,mG=6e4,gG=36e5,wB=Symbol.for("constructDateFrom");function Uo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&wB in t?t[wB](e):t instanceof Date?new t.constructor(e):new Date(e)}function mi(t,e){return Uo(e||t,t)}function DOe(t,e,n){const a=mi(t,n==null?void 0:n.in);if(isNaN(e))return Uo(t,NaN);const i=a.getDate(),s=Uo(t,a.getTime());s.setMonth(a.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(a.setFullYear(s.getFullYear(),s.getMonth(),i),a)}let OOe={};function $S(){return OOe}function xb(t,e){var l,c,d,f;const n=$S(),a=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=mi(t,e==null?void 0:e.in),s=i.getDay(),o=(s<a?7:0)+s-a;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function DN(t,e){return xb(t,{...e,weekStartsOn:1})}function yG(t,e){const n=mi(t,e==null?void 0:e.in),a=n.getFullYear(),i=Uo(n,0);i.setFullYear(a+1,0,4),i.setHours(0,0,0,0);const s=DN(i),o=Uo(n,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=DN(o);return n.getTime()>=s.getTime()?a+1:n.getTime()>=l.getTime()?a:a-1}function NB(t){const e=mi(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function MOe(t,...e){const n=Uo.bind(null,e.find(a=>typeof a=="object"));return e.map(n)}function SB(t,e){const n=mi(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function IOe(t,e,n){const[a,i]=MOe(n==null?void 0:n.in,t,e),s=SB(a),o=SB(i),l=+s-NB(s),c=+o-NB(o);return Math.round((l-c)/POe)}function ROe(t,e){const n=yG(t,e),a=Uo(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),DN(a)}function LOe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function _D(t){return!(!LOe(t)&&typeof t!="number"||isNaN(+mi(t)))}function FOe(t,e){const n=mi(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const $Oe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BOe=(t,e,n)=>{let a;const i=$Oe[t];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function $A(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const zOe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qOe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},UOe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VOe={date:$A({formats:zOe,defaultWidth:"full"}),time:$A({formats:qOe,defaultWidth:"full"}),dateTime:$A({formats:UOe,defaultWidth:"full"})},HOe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GOe=(t,e,n,a)=>HOe[t];function ov(t){return(e,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let i;if(a==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const WOe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},KOe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},YOe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},QOe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XOe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},JOe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ZOe=(t,e)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},eMe={ordinalNumber:ZOe,era:ov({values:WOe,defaultWidth:"wide"}),quarter:ov({values:KOe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ov({values:YOe,defaultWidth:"wide"}),day:ov({values:QOe,defaultWidth:"wide"}),dayPeriod:ov({values:XOe,defaultWidth:"wide",formattingValues:JOe,defaultFormattingWidth:"wide"})};function lv(t){return(e,n={})=>{const a=n.width,i=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?nMe(l,p=>p.test(o)):tMe(l,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function tMe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function nMe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function rMe(t){return(e,n={})=>{const a=e.match(t.matchPattern);if(!a)return null;const i=a[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const aMe=/^(\d+)(th|st|nd|rd)?/i,iMe=/\d+/i,sMe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},oMe={any:[/^b/i,/^(a|c)/i]},lMe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},cMe={any:[/1/i,/2/i,/3/i,/4/i]},uMe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dMe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hMe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fMe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pMe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mMe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gMe={ordinalNumber:rMe({matchPattern:aMe,parsePattern:iMe,valueCallback:t=>parseInt(t,10)}),era:lv({matchPatterns:sMe,defaultMatchWidth:"wide",parsePatterns:oMe,defaultParseWidth:"any"}),quarter:lv({matchPatterns:lMe,defaultMatchWidth:"wide",parsePatterns:cMe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:lv({matchPatterns:uMe,defaultMatchWidth:"wide",parsePatterns:dMe,defaultParseWidth:"any"}),day:lv({matchPatterns:hMe,defaultMatchWidth:"wide",parsePatterns:fMe,defaultParseWidth:"any"}),dayPeriod:lv({matchPatterns:pMe,defaultMatchWidth:"any",parsePatterns:mMe,defaultParseWidth:"any"})},yMe={code:"en-US",formatDistance:BOe,formatLong:VOe,formatRelative:GOe,localize:eMe,match:gMe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xMe(t,e){const n=mi(t,e==null?void 0:e.in);return IOe(n,FOe(n))+1}function vMe(t,e){const n=mi(t,e==null?void 0:e.in),a=+DN(n)-+ROe(n);return Math.round(a/pG)+1}function xG(t,e){var f,p,g,x;const n=mi(t,e==null?void 0:e.in),a=n.getFullYear(),i=$S(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(g=i.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,o=Uo((e==null?void 0:e.in)||t,0);o.setFullYear(a+1,0,s),o.setHours(0,0,0,0);const l=xb(o,e),c=Uo((e==null?void 0:e.in)||t,0);c.setFullYear(a,0,s),c.setHours(0,0,0,0);const d=xb(c,e);return+n>=+l?a+1:+n>=+d?a:a-1}function bMe(t,e){var l,c,d,f;const n=$S(),a=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=xG(t,e),s=Uo((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,a),s.setHours(0,0,0,0),xb(s,e)}function jMe(t,e){const n=mi(t,e==null?void 0:e.in),a=+xb(n,e)-+bMe(n,e);return Math.round(a/pG)+1}function xr(t,e){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return n+a}const Vu={y(t,e){const n=t.getFullYear(),a=n>0?n:1-n;return xr(e==="yy"?a%100:a,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):xr(n+1,2)},d(t,e){return xr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return xr(t.getHours()%12||12,e.length)},H(t,e){return xr(t.getHours(),e.length)},m(t,e){return xr(t.getMinutes(),e.length)},s(t,e){return xr(t.getSeconds(),e.length)},S(t,e){const n=e.length,a=t.getMilliseconds(),i=Math.trunc(a*Math.pow(10,n-3));return xr(i,e.length)}},Sm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_B={G:function(t,e,n){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const a=t.getFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return Vu.y(t,e)},Y:function(t,e,n,a){const i=xG(t,a),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return xr(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):xr(s,e.length)},R:function(t,e){const n=yG(t);return xr(n,e.length)},u:function(t,e){const n=t.getFullYear();return xr(n,e.length)},Q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return xr(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return xr(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,n){const a=t.getMonth();switch(e){case"M":case"MM":return Vu.M(t,e);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,n){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return xr(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,n,a){const i=jMe(t,a);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):xr(i,e.length)},I:function(t,e,n){const a=vMe(t);return e==="Io"?n.ordinalNumber(a,{unit:"week"}):xr(a,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Vu.d(t,e)},D:function(t,e,n){const a=xMe(t);return e==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):xr(a,e.length)},E:function(t,e,n){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return xr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return xr(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const a=t.getDay(),i=a===0?7:a;switch(e){case"i":return String(i);case"ii":return xr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const a=t.getHours();let i;switch(a===12?i=Sm.noon:a===0?i=Sm.midnight:i=a/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const a=t.getHours();let i;switch(a>=17?i=Sm.evening:a>=12?i=Sm.afternoon:a>=4?i=Sm.morning:i=Sm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return Vu.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Vu.H(t,e)},K:function(t,e,n){const a=t.getHours()%12;return e==="Ko"?n.ordinalNumber(a,{unit:"hour"}):xr(a,e.length)},k:function(t,e,n){let a=t.getHours();return a===0&&(a=24),e==="ko"?n.ordinalNumber(a,{unit:"hour"}):xr(a,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Vu.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Vu.s(t,e)},S:function(t,e){return Vu.S(t,e)},X:function(t,e,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return TB(a);case"XXXX":case"XX":return Wh(a);case"XXXXX":case"XXX":default:return Wh(a,":")}},x:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"x":return TB(a);case"xxxx":case"xx":return Wh(a);case"xxxxx":case"xxx":default:return Wh(a,":")}},O:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+CB(a,":");case"OOOO":default:return"GMT"+Wh(a,":")}},z:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+CB(a,":");case"zzzz":default:return"GMT"+Wh(a,":")}},t:function(t,e,n){const a=Math.trunc(+t/1e3);return xr(a,e.length)},T:function(t,e,n){return xr(+t,e.length)}};function CB(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=Math.trunc(a/60),s=a%60;return s===0?n+String(i):n+String(i)+e+xr(s,2)}function TB(t,e){return t%60===0?(t>0?"-":"+")+xr(Math.abs(t)/60,2):Wh(t,e)}function Wh(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=xr(Math.trunc(a/60),2),s=xr(a%60,2);return n+i+e+s}const kB=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},vG=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},wMe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return kB(t,e);let s;switch(a){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",kB(a,e)).replace("{{time}}",vG(i,e))},NMe={p:vG,P:wMe},SMe=/^D+$/,_Me=/^Y+$/,CMe=["D","DD","YY","YYYY"];function TMe(t){return SMe.test(t)}function kMe(t){return _Me.test(t)}function AMe(t,e,n){const a=EMe(t,e,n);if(console.warn(a),CMe.includes(t))throw new RangeError(a)}function EMe(t,e,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const PMe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DMe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,OMe=/^'([^]*?)'?$/,MMe=/''/g,IMe=/[a-zA-Z]/;function mf(t,e,n){var f,p,g,x;const a=$S(),i=a.locale??yMe,s=a.firstWeekContainsDate??((p=(f=a.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=a.weekStartsOn??((x=(g=a.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=mi(t,n==null?void 0:n.in);if(!_D(l))throw new RangeError("Invalid time value");let c=e.match(DMe).map(b=>{const j=b[0];if(j==="p"||j==="P"){const S=NMe[j];return S(b,i.formatLong)}return b}).join("").match(PMe).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const j=b[0];if(j==="'")return{isToken:!1,value:RMe(b)};if(_B[j])return{isToken:!0,value:b};if(j.match(IMe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(b=>{if(!b.isToken)return b.value;const j=b.value;(kMe(j)||TMe(j))&&AMe(j,e,String(t));const S=_B[j[0]];return S(l,j,i.localize,d)}).join("")}function RMe(t){const e=t.match(OMe);return e?e[1].replace(MMe,"'"):t}function BA(t,e){return+mi(t)<+mi(e)}function AB(t,e){const n=()=>Uo(e==null?void 0:e.in,NaN),i=BMe(t);let s;if(i.date){const d=zMe(i.date,2);s=qMe(d.restDateString,d.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,c;if(i.time&&(l=UMe(i.time),isNaN(l)))return n();if(i.timezone){if(c=VMe(i.timezone),isNaN(c))return n()}else{const d=new Date(o+l),f=mi(0,e==null?void 0:e.in);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return mi(o+l+c,e==null?void 0:e.in)}const Gj={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},LMe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,FMe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,$Me=/^([+-])(\d{2})(?::?(\d{2}))?$/;function BMe(t){const e={},n=t.split(Gj.dateTimeDelimiter);let a;if(n.length>2)return e;if(/:/.test(n[0])?a=n[0]:(e.date=n[0],a=n[1],Gj.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Gj.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){const i=Gj.timezone.exec(a);i?(e.time=a.replace(i[1],""),e.timezone=i[1]):e.time=a}return e}function zMe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(n);if(!a)return{year:NaN,restDateString:""};const i=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((a[1]||a[2]).length)}}function qMe(t,e){if(e===null)return new Date(NaN);const n=t.match(LMe);if(!n)return new Date(NaN);const a=!!n[4],i=cv(n[1]),s=cv(n[2])-1,o=cv(n[3]),l=cv(n[4]),c=cv(n[5])-1;if(a)return YMe(e,l,c)?HMe(e,l,c):new Date(NaN);{const d=new Date(0);return!WMe(e,s,o)||!KMe(e,i)?new Date(NaN):(d.setUTCFullYear(e,s,Math.max(i,o)),d)}}function cv(t){return t?parseInt(t):1}function UMe(t){const e=t.match(FMe);if(!e)return NaN;const n=zA(e[1]),a=zA(e[2]),i=zA(e[3]);return QMe(n,a,i)?n*gG+a*mG+i*1e3:NaN}function zA(t){return t&&parseFloat(t.replace(",","."))||0}function VMe(t){if(t==="Z")return 0;const e=t.match($Me);if(!e)return 0;const n=e[1]==="+"?-1:1,a=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return XMe(a,i)?n*(a*gG+i*mG):NaN}function HMe(t,e,n){const a=new Date(0);a.setUTCFullYear(t,0,4);const i=a.getUTCDay()||7,s=(e-1)*7+n+1-i;return a.setUTCDate(a.getUTCDate()+s),a}const GMe=[31,null,31,30,31,30,31,31,30,31,30,31];function bG(t){return t%400===0||t%4===0&&t%100!==0}function WMe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(GMe[e]||(bG(t)?29:28))}function KMe(t,e){return e>=1&&e<=(bG(t)?366:365)}function YMe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function QMe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function XMe(t,e){return e>=0&&e<=59}const OM=({isEmbedded:t=!1})=>{const{customColumnsConfig:e,refetch:n}=rS(),a=e.lab_tests||[],[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState([]),[f,p]=v.useState(""),[g,x]=v.useState(!1),[b,j]=v.useState(null),[S,_]=v.useState(!1),[T,C]=v.useState(null),P=v.useRef(null),[k,E]=v.useState(!1),[I,L]=v.useState(null),[$,q]=v.useState(!1),[F,H]=v.useState(!1),[V,X]=v.useState(null),[Y,z]=v.useState({name:"",description:"",price:"",default_parameters:[]}),G=v.useCallback(async()=>{x(!0),j(null),C(null),L(null);try{const J=await se("/api/lab-tests");if(!J.ok)throw new Error(`HTTP error! status: ${J.status}`);const ae=await J.json();d(ae)}catch(J){console.error("Error fetching lab tests:",J),j(J.message||"Failed to fetch lab tests.")}finally{x(!1)}},[]);v.useEffect(()=>{G()},[G]);const ie=J=>{const{name:ae,value:ue}=J.target;z(ee=>({...ee,[ae]:ue}))},W=(J,ae,ue)=>{const ee=[...Y.default_parameters],Ne=ee[J];if(ae==="type")switch(Ne.type=ue,ue){case"number":Ne.defaultValue=0,Ne.lower_limit=null,Ne.upper_limit=null,Ne.unit="";break;case"boolean":Ne.defaultValue=!1,Ne.lower_limit=void 0,Ne.upper_limit=void 0,Ne.unit=void 0;break;case"string":default:Ne.defaultValue="",Ne.lower_limit=void 0,Ne.upper_limit=void 0,Ne.unit=void 0;break}else ae==="defaultValue"?Ne.type==="number"?Ne.defaultValue=parseFloat(ue)||0:(Ne.type,Ne.defaultValue=ue):ae==="lower_limit"||ae==="upper_limit"?Ne[ae]=ue===""?null:parseFloat(ue):Ne[ae]=ue;z(Te=>({...Te,default_parameters:ee}))},B=()=>{z(J=>({...J,default_parameters:[...J.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},ce=J=>{z(ae=>({...ae,default_parameters:ae.default_parameters.filter((ue,ee)=>ee!==J)}))},je=async J=>{J.preventDefault(),x(!0),j(null);const ae=V!==null,ue=ae?`/api/lab-tests/${V}`:"/api/lab-tests",ee=ae?"PUT":"POST";try{const Ne=await se(ue,{method:ee,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Y.name,description:Y.description,price:parseFloat(Y.price),default_parameters:Y.default_parameters})});if(!Ne.ok){const Te=await Ne.json();throw new Error(Te.message||`HTTP error! status: ${Ne.status}`)}H(!1),X(null),z({name:"",description:"",price:"",default_parameters:[]}),G()}catch(Ne){console.error(`Error ${ae?"updating":"adding"} lab test:`,Ne),j(Ne.message||`Failed to ${ae?"update":"add"} lab test.`)}finally{x(!1)}},K=()=>{X(null),z({name:"",description:"",price:"",default_parameters:[]}),H(!0)},Ie=J=>{if(V===J.id)X(null);else{X(J.id);const ae=(J.default_parameters||[]).map(ue=>({...ue,unit:ue.unit||"",lower_limit:ue.lower_limit===void 0?null:ue.lower_limit,upper_limit:ue.upper_limit===void 0?null:ue.upper_limit}));z({name:J.name,description:J.description||"",price:J.price,default_parameters:ae}),H(!1)}},Ue=async J=>{if(window.confirm("Are you sure you want to delete this lab test?")){x(!0),j(null);try{const ae=await se(`/api/lab-tests/${J}`,{method:"DELETE"});if(!ae.ok){const ue=await ae.json();throw new Error(ue.message||`HTTP error! status: ${ae.status}`)}G()}catch(ae){console.error("Error deleting lab test:",ae),j(ae.message||"Failed to delete lab test.")}finally{x(!1)}}},ze=()=>{H(!1),X(null),j(null),z({name:"",description:"",price:"",default_parameters:[]})},Le=async J=>{if(!J){C("No file selected.");return}_(!0),C(null),j(null);const ae=new FormData;ae.append("file",J);try{const ue=await se("/api/lab-tests/import",{method:"POST",body:ae});if(!ue.ok){const ee=await ue.json();throw new Error(ee.message||`Import failed: ${ue.statusText}`)}G()}catch(ue){console.error("Error importing lab tests from Excel:",ue),C(ue.message||"Failed to import lab tests from Excel.")}finally{_(!1)}},be=async J=>{if(J.target.files&&J.target.files[0]){const ae=J.target.files[0];await Le(ae),J.target&&(J.target.value="")}},Ce=async J=>{const ae=J==="xray"?"X-Ray":"biochemistry and pathology";if(window.confirm(`Are you sure you want to import default ${ae} tests? This will add new tests and may duplicate existing ones if names match.`)){E(!0),L(null),j(null);try{const ue=await se("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:J})});if(!ue.ok){const ee=await ue.json();throw new Error(ee.message||`Default import failed: ${ue.statusText}`)}G()}catch(ue){console.error(`Error importing default ${J} lab tests:`,ue),L(ue.message||`Failed to import default ${J} lab tests.`)}finally{E(!1)}}},Ae=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){q(!0),j(null),C(null),L(null);try{const J=await se("/api/lab-tests/all",{method:"DELETE"});if(!J.ok){const ae=await J.json();throw new Error(ae.message||`Delete all failed: ${J.statusText}`)}G()}catch(J){console.error("Error deleting all lab tests:",J),j(J.message||"Failed to delete all lab tests.")}finally{q(!1)}}},me=g||S||k||$,ye=v.useMemo(()=>new lo(c,{keys:["name","description","default_parameters.name"],threshold:.3,ignoreLocation:!0}),[c]),le=v.useMemo(()=>f?ye.search(f).map(J=>J.item):c,[c,f,ye]);return r.jsxs("div",{className:`lab-inventory-card ${t?"embedded":""}`,style:t?{border:"none",boxShadow:"none",padding:0}:{},children:[!t&&r.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),r.jsx("div",{className:"mb-4",style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:r.jsx("input",{type:"text",placeholder:"Search by test name...",value:f,onChange:J=>p(J.target.value),className:"lab-inventory-input",style:{maxWidth:"300px",marginRight:"10px"}})}),r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:K,className:"lab-inventory-button",disabled:me,children:"Add New Test"}),r.jsx("button",{onClick:()=>{var J;return(J=P.current)==null?void 0:J.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,children:S?"Importing...":"Import from Excel"}),r.jsx("input",{type:"file",ref:P,onChange:be,accept:".xlsx, .xls",style:{display:"none"},disabled:S}),r.jsx("button",{onClick:()=>Ce("general"),className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,children:k?"Importing Defaults...":"Import Default Tests"}),r.jsx("button",{onClick:()=>Ce("xray"),className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,children:k?"Importing X-Rays...":"Import X-Rays"}),r.jsx("button",{onClick:Ae,className:"lab-inventory-button lab-inventory-button-danger",disabled:me,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:$?"Deleting All...":"Delete All Tests"}),r.jsxs("button",{onClick:()=>s(!0),className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,title:"Manage Custom Columns",children:[r.jsx(dd,{size:16,style:{marginRight:"4px"}})," Columns"]}),r.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"auto"},children:[r.jsxs("button",{onClick:()=>l(!1),className:`view-mode-btn ${o?"":"active"}`,title:"List View",children:[r.jsx(Ab,{size:18})," List"]}),r.jsxs("button",{onClick:()=>l(!0),className:`view-mode-btn ${o?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(xf,{size:18})," Excel"]})]})]}),b&&r.jsx("div",{className:"error-text mb-4",children:b}),T&&r.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",T]}),I&&r.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",I]}),F&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:Y.name,onChange:ie,className:"lab-inventory-input",required:!0,disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:Y.description,onChange:ie,rows:3,className:"lab-inventory-input",disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:Y.price,onChange:ie,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),Y.default_parameters.map((J,ae)=>{var ue,ee;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:J.name,onChange:Ne=>W(ae,"name",Ne.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:J.type,onChange:Ne=>W(ae,"type",Ne.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),J.type==="boolean"?r.jsxs("select",{value:J.defaultValue.toString(),onChange:Ne=>W(ae,"defaultValue",Ne.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:J.type==="number"?"number":"text",placeholder:"Default Value",value:J.defaultValue.toString(),onChange:Ne=>W(ae,"defaultValue",Ne.target.value),className:"lab-inventory-input"}),J.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:J.lower_limit===null?"":((ue=J.lower_limit)==null?void 0:ue.toString())??"",onChange:Ne=>W(ae,"lower_limit",Ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:J.upper_limit===null?"":((ee=J.upper_limit)==null?void 0:ee.toString())??"",onChange:Ne=>W(ae,"upper_limit",Ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:J.unit||"",onChange:Ne=>W(ae,"unit",Ne.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>ce(ae),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},ae)}),r.jsx("button",{type:"button",onClick:B,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:ze,className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:me,children:g?"Saving...":"Add Test"})]})]})]}),me&&!F?r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"mb-4 flex gap-2",children:[1,2,3,4,5].map(J=>r.jsx(te,{width:100,height:36},J))}),r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"}),r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(J=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:"60%",height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:"90%",height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(te,{width:40,height:20}),r.jsx(te,{width:50,height:20})]})})]},J))})]}),r.jsx("p",{className:"loading-text mt-2 text-sm italic text-gray-500",children:S?"Importing Excel data...":k?"Importing default data...":"Loading tests..."})]}):null,!me&&le.length===0&&!b&&!T&&!I&&r.jsx("p",{className:"no-data-message",children:f?`No lab tests found matching "${f}".`:"No lab tests found. Add one or import from Excel to get started."}),o&&le.length>0?r.jsx(Rb,{columns:[{key:"name",label:"Test Name",editable:!0,type:"text"},{key:"description",label:"Description",editable:!0,type:"text"},{key:"price",label:"Price",editable:!0,type:"number"}],data:le,editable:!0,showRowNumbers:!0,title:"Lab Test Inventory",onSave:async J=>{const ae=J.map(async ue=>{const ee=c.find(Ne=>Ne.id===ue.id);if(ee&&(ee.name!==ue.name||ee.price!==ue.price||ee.description!==ue.description))return se(`/api/lab-tests/${ue.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)})});try{await Promise.all(ae),G()}catch(ue){alert("Error saving changes"),console.error(ue)}}}):!me&&le.length>0&&r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:le.map(J=>{const ae=V===J.id,ue=J.price&&typeof J.price=="string"?parseFloat(J.price):NaN,ee=isNaN(ue)?"0.00":ue.toFixed(2);return r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{onClick:()=>Ie(J),style:{cursor:"pointer"},children:[r.jsx("td",{children:J.name}),r.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:J.description||"-"}),r.jsxs("td",{children:["",ee]}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),Ie(J)},className:"lab-inventory-link",disabled:me,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),r.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),Ue(J.id)},className:"lab-inventory-link",disabled:me,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),a.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:a.map(Ne=>{var Te;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[Ne.label,":"]})," ",(Te=J.custom_fields)!=null&&Te[Ne.key]?String(J.custom_fields[Ne.key]):"-"]},Ne.key)})})})}),ae&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:Y.name,onChange:ie,className:"lab-inventory-input",required:!0,disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:Y.description,onChange:ie,rows:3,className:"lab-inventory-input",disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:Y.price,onChange:ie,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),Y.default_parameters.map((Ne,Te)=>{var Fe,xe;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:Ne.name,onChange:ne=>W(Te,"name",ne.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:Ne.type,onChange:ne=>W(Te,"type",ne.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),Ne.type==="boolean"?r.jsxs("select",{value:Ne.defaultValue.toString(),onChange:ne=>W(Te,"defaultValue",ne.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:Ne.type==="number"?"number":"text",placeholder:"Default Value",value:Ne.defaultValue.toString(),onChange:ne=>W(Te,"defaultValue",ne.target.value),className:"lab-inventory-input"}),Ne.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:Ne.lower_limit===null?"":((Fe=Ne.lower_limit)==null?void 0:Fe.toString())??"",onChange:ne=>W(Te,"lower_limit",ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:Ne.upper_limit===null?"":((xe=Ne.upper_limit)==null?void 0:xe.toString())??"",onChange:ne=>W(Te,"upper_limit",ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:Ne.unit||"",onChange:ne=>W(Te,"unit",ne.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>ce(Te),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},Te)}),r.jsx("button",{type:"button",onClick:B,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:ze,className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:me,children:g?"Saving...":"Update Test"})]})]})]})})})]},J.id)})})]})]}),r.jsx(DM,{isOpen:i,onClose:()=>s(!1),entityType:"lab_tests",entityLabel:"Lab Tests",currentConfig:e,onConfigUpdated:()=>{n()}})]})},JMe=t=>{let e="";if(!t.report_content)return"No report content available.";e+=`*Report Date:* ${t.report_date?new Date(t.report_date).toLocaleDateString():"N/A"}

`;try{const n=JSON.parse(t.report_content);typeof n=="object"&&n!==null&&t.tests?t.tests.forEach((a,i)=>{e+=`*Test: ${a.name}*
`,n[a.id]?Object.entries(n[a.id]).forEach(([s,o])=>{var f;const l=(f=a.default_parameters)==null?void 0:f.find(p=>p.name===s);let c=String(o),d="";if(l){const p=l.unit?` _${l.unit}_`:"";if(l.type==="boolean"){const g=o===!0||o==="true";c=g?"*Reactive*":"Non-Reactive",g||(d="`Normal: Non-Reactive`")}else if(l.type==="number"){const g=typeof o=="string"?parseFloat(o):typeof o=="number"?o:NaN;if(l.lower_limit!=null||l.upper_limit!=null){let x=[];l.lower_limit!=null&&x.push(`${l.lower_limit}`),l.upper_limit!=null&&x.push(`${l.upper_limit}`),d=`\`Normal: ${x.join(" - ")}\`${p}`,!isNaN(g)&&(l.lower_limit!=null&&g<l.lower_limit||l.upper_limit!=null&&g>l.upper_limit)&&(c=`*${c}*`)}}l.unit&&(c+=p)}e+=`${s}: ${c}
`,d&&((l==null?void 0:l.type)==="boolean"&&(o===!0||o==="true")||(e+=`${d}
`))}):e+=`_No parameters reported for this test._
`,i<t.tests.length-1&&(e+=`
`)}):e+=t.report_content}catch{e+=t.report_content}return e},MM=t=>{var o;if(!((o=t==null?void 0:t.Patient)!=null&&o.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(t!=null&&t.report_content)){alert("Cannot share report: No report content is available to share.");return}const e=t.Patient.name||"Patient",n=JMe(t),a=`Hello ${e},

Your lab report is ready.

${n}`,s=`https://wa.me/${ZMe(t.Patient.phone)}?text=${encodeURIComponent(a)}`;window.open(s,"_blank")},ZMe=t=>{let e=t.replace(/\D/g,"");const n=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,a=e.match(n);return a?e="91"+a[1]:e.startsWith("91")||(e="91"+e),e},EB=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState("orders"),[g,x]=v.useState(1),[b]=v.useState(20),[j,S]=v.useState(0),_=v.useMemo(()=>Math.ceil(j/b),[j,b]),T=v.useCallback(async(F=1,H="")=>{s(!0),d(null);try{const V=new URLSearchParams({page:String(F),limit:String(b)});H&&V.append("search",H);const X=await se(`/api/lab?${V.toString()}`);if(!X.ok)throw new Error(`HTTP error! status: ${X.status}`);const Y=await X.json(),z=Y.orders.map(G=>{var ie,W;return{id:G.id,labTokenNumber:String(G.lab_token_number??"N/A"),patientName:((ie=G.Patient)==null?void 0:ie.name)||"N/A",patientId:G.patient_id,patientTokenNumber:String(((W=G.Patient)==null?void 0:W.patient_token_number)??"N/A"),tests:(G.tests||[]).map(B=>B.name||"Unknown Test"),date:mf(new Date(G.createdAt),"yyyy-MM-dd"),status:G.status,reportId:G.reportId,billId:G.billId}});e(z),S(Y.totalCount),x(F)}catch(V){console.error("Failed to fetch lab orders:",V),d(V instanceof Error?V.message:"An unknown error occurred"),e([]),S(0)}finally{s(!1),l(!1)}},[b]);v.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${g}, Search term: "${n}"`),n.length===0||n.length>=2?(console.log(`Condition met (length ${n.length}). Fetching orders...`),T(g,n)):console.log(`Condition not met (length ${n.length}). Not fetching.`)},[T,g,n]),v.useEffect(()=>{const F=setTimeout(()=>{n.length>=2?g!==1&&x(1):n.length<2&&g!==1&&x(1)},1e3);return()=>{clearTimeout(F)}},[n]);const C=async(F,H)=>{console.log(`Updating order ${F} to status ${H}`);try{const V=await se(`/api/lab/${F}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:H})});if(!V.ok){const X=await V.json();throw new Error(X.message||`Failed to update status: ${V.status}`)}if(H==="completed"){const X=await se(`/api/lab/orders/${F}/report`);if(X.ok){const Y=await X.json();MM(Y)}}await T(g,n),console.log(`Order ${F} status updated to ${H}, refetching page ${g}`)}catch(V){console.error("Error updating status:",V),alert(`Failed to update status: ${V instanceof Error?V.message:"Unknown error"}`)}},{openCommandBar:P}=Ic(),k=Lt(),E=F=>{if(!F){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}F.billId?(console.log(`Navigating to existing bill for Bill ID: ${F.billId}, Patient: ${F.patientName}`),k("/billing",{state:{billId:F.billId,patientId:F.patientId,patientName:F.patientName,billType:"lab"}})):(console.log(`Navigating to LabBillingPage for Order ID: ${F.id}`),k(`/dashboard/lab-billing/${F.id}`))},I=F=>{F&&F.id?k(`/lab/report/${F.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},L=F=>{switch(F){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:F,className:"status-badge"}}};if(i&&o)return r.jsxs("div",{className:"admin-panel-container",children:[r.jsx("div",{className:"admin-nav-bar",children:[1,2,3,4].map(F=>r.jsx(te,{width:100,height:40,style:{borderRadius:"8px",margin:"0 8px"}},F))}),r.jsxs("div",{className:"admin-content-section",style:{padding:"20px"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx(te,{width:200,height:32}),r.jsx(te,{width:300,height:40})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(te,{width:150,height:32})})]},F))})]})})]})]});if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[r.jsx(Wr,{size:48,className:"mb-4"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),r.jsx("p",{className:"mb-4",children:c}),r.jsx("button",{onClick:()=>T(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const $=()=>{g>1&&x(F=>F-1)},q=()=>{g<_&&x(F=>F+1)};return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("div",{className:"admin-nav-bar",children:[r.jsxs("button",{onClick:()=>k(-1),className:"admin-nav-button",title:"Back",children:[r.jsx(on,{})," Back"]}),r.jsxs("button",{onClick:()=>p("orders"),className:`admin-nav-button ${f==="orders"?"active":""}`,children:[r.jsx(jE,{})," Orders"]}),r.jsx("button",{onClick:()=>k("/create-lab-order"),className:"admin-nav-button",children:"Create New Lab Order"}),r.jsxs("button",{onClick:()=>p("inventory"),className:`admin-nav-button ${f==="inventory"?"active":""}`,children:[r.jsx(NQ,{})," Inventory"]}),r.jsxs("button",{onClick:()=>P(),className:"admin-nav-button",children:[r.jsx(UD,{})," Newton's AI"]})]}),r.jsx("div",{className:"admin-content-section",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[f==="orders"&&r.jsxs("div",{className:"lab-orders-view",children:[" ",r.jsxs("div",{className:"lab-orders-header-controls",children:[r.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),r.jsxs("div",{className:"lab-orders-search-container",children:[r.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:n,onChange:F=>a(F.target.value),className:"lab-inventory-input lab-orders-search-input"}),r.jsx(In,{size:18,className:"lab-orders-search-icon"})]})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient (Token)"}),r.jsx("th",{children:"Tests"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),r.jsxs("tbody",{children:[i&&!c&&t.length===0&&[1,2,3,4,5].map(F=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(te,{width:150,height:32})})]},F)),!i&&!c&&t.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."})}),!i&&!c&&t.map(F=>{const H=L(F.status);return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:F.patientName}),r.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",F.patientTokenNumber]})]}),r.jsx("td",{children:F.tests.map((V,X)=>r.jsx("div",{children:V},X))}),r.jsx("td",{className:"hidden md:table-cell",children:F.date}),r.jsx("td",{children:r.jsx("span",{className:H.className,children:H.text})}),r.jsx("td",{children:r.jsxs("div",{className:"lab-table-actions",children:[F.status==="pending"&&r.jsx("button",{onClick:()=>E(F),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),F.status==="billed"&&r.jsx("button",{onClick:()=>C(F.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),F.status==="collected"&&r.jsx("button",{onClick:()=>C(F.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(F.status==="processing"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>I(F),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>C(F.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(F.status==="completed"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>{F.id?k(`/lab/view-report/${F.id}`):(console.error("Attempted to view report for an order with no ID:",F),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},F.id)})]})]})}),r.jsxs("div",{className:"lab-orders-card-container",children:[i&&!c&&t.length===0&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>r.jsx("div",{className:"lab-order-card",children:r.jsx(te,{width:"100%",height:150})},F))}),!i&&!c&&t.length===0&&r.jsx("div",{className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."}),!i&&!c&&t.map(F=>{const H=L(F.status);return r.jsxs("div",{className:"lab-order-card",children:[r.jsxs("div",{className:"lab-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lab-card-patient-name",children:F.patientName}),r.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",F.patientTokenNumber]}),r.jsx("div",{className:"lab-card-date",children:F.date})]}),r.jsx("span",{className:`${H.className} lab-card-status-pill`,children:H.text})]}),r.jsxs("div",{className:"lab-card-section",children:[r.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),F.tests.map((V,X)=>r.jsx("div",{className:"lab-card-test-item",children:V},X)),F.tests.length===0&&r.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),r.jsxs("div",{className:"lab-card-actions",children:[F.status==="pending"&&r.jsx("button",{onClick:()=>E(F),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),F.status==="billed"&&r.jsx("button",{onClick:()=>C(F.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),F.status==="collected"&&r.jsx("button",{onClick:()=>C(F.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(F.status==="processing"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>I(F),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>C(F.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(F.status==="completed"||F.status==="report_ready"||F.status==="reported")&&r.jsx("button",{onClick:()=>{F.id?k(`/lab/view-report/${F.id}`):(console.error("Attempted to view report for an order with no ID:",F),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},F.id)})]}),!i&&j>0&&r.jsxs("div",{className:"lab-pagination-controls",children:[r.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",r.jsx("strong",{children:(g-1)*b+1})," ","to"," ",r.jsx("strong",{children:Math.min(g*b,j)})," ","of"," ",r.jsx("strong",{children:j})," ","results"]}),r.jsxs("div",{className:"lab-pagination-buttons",children:[r.jsx("button",{onClick:$,disabled:g===1,className:"lab-pagination-button","aria-label":"Previous page",children:r.jsx(Tb,{size:18})}),r.jsxs("span",{children:["Page ",g," of ",_]}),r.jsx("button",{onClick:q,disabled:g===_,className:"lab-pagination-button","aria-label":"Next page",children:r.jsx(pd,{size:18})})]})]})]}),f==="inventory"&&r.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",r.jsx(OM,{})]})]})})," "]})},qA=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(null),c=Lt(),d=v.useRef(null),{openCommandBar:f}=Ic(),p=ds(),g=L=>{L&&(p.prefetchQuery({queryKey:Gt.patients.context(L),queryFn:async()=>{const $=await se(`/api/patients/${L}/context`);if(!$.ok)throw new Error("Failed to fetch patient context");return $.json()},staleTime:5*60*1e3}),p.prefetchQuery({queryKey:Gt.patientDebts.balance(L),queryFn:async()=>{const $=await se(`/api/patient-debts/${L}/balance`);return $.ok?$.json():{netDebt:0}},staleTime:1*60*1e3}),p.prefetchQuery({queryKey:Gt.queue.latest(L),queryFn:async()=>{const $=await se(`/api/queue/patient/${L}/latest`);if(!$.ok)throw new Error("Failed to fetch latest queue status");const q=await $.json();return q!=null&&q._id&&p.prefetchQuery({queryKey:Gt.queue.entry(q._id),queryFn:async()=>{const F=await se(`/api/queue/doctor/complaint/${q._id}`);if(!F.ok)throw new Error("Failed to fetch complaint record");return F.json()},staleTime:1*60*1e3}),q},staleTime:5e3}),p.prefetchQuery({queryKey:Gt.dental.records(L),queryFn:async()=>{const $=await se(`/api/dental/patient/${L}`);if(!$.ok)throw new Error("Failed to fetch dental records");return $.json()},staleTime:5*60*1e3}))},[x,b]=v.useState(1),[j,S]=v.useState(1),_=10,T=v.useCallback(async(L,$,q)=>{s(!0),l(null);try{let F=`/api/pharmacy-orders?page=${L}&limit=${$}`;q&&q.trim()!==""&&(F+=`&search=${encodeURIComponent(q.trim())}`);const H=await se(F);if(!H.ok)throw new Error(`Failed to fetch orders: ${H.statusText} (${H.status})`);const V=await H.json();V&&Array.isArray(V.orders)?(e(V.orders),S(V.totalPages||1),b(V.currentPage||L)):e([])}catch(F){console.error("Failed to fetch pharmacy orders:",F),l(F.message||"Failed to fetch orders."),e([])}finally{s(!1)}},[]);v.useEffect(()=>(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{T(n?1:x,_,n)},500),()=>{d.current&&clearTimeout(d.current)}),[n,x,T]);const C=L=>c(`/dashboard/edit-pharmacy-order/${L}`),P=L=>c(`/dashboard/edit-complaint/patient/${L.patientId}`),k=L=>{const $=t.find(q=>q.id===L);if($){const q=$.medications.map(F=>({name:F.name,pack_quantity:F.pack_quantity,loose_quantity:F.loose_quantity,price:F.price??0,pack_price:F.pack_price,loose_price:F.loose_price,total_price:F.total_price,isLoose:F.isLoose,unit:F.unit,drug_id:F.drug_id?String(F.drug_id):null,tabletsPerDay:F.tabletsPerDay,numberOfDays:F.numberOfDays,directions_to_use:F.directions_to_use,discount_percentage:0,batch:F.batch,expiry_date:F.expiry_date}));c(`/dashboard/pharmacy-billing/${L}`,{state:{initialItems:q}})}},E=async(L,$)=>{const q=t.find(F=>F.id===L);if(q)try{const F=await se(`/api/pharmacy-orders/${L}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:$,medications:q.medications})});if(F.ok){const H=await F.json();e(V=>V.map(X=>X.id===H.id?{...X,status:H.status}:X))}}catch(F){console.error("Status update failed",F),alert("Failed to update status")}},I=L=>`pq-pill ${L}`;return r.jsxs("div",{className:"pq-container",children:[r.jsxs("div",{className:"pq-header",children:[r.jsxs("div",{className:"pq-nav-actions",children:[r.jsxs("button",{onClick:()=>c("/dashboard/add-order"),className:"pq-btn",children:[r.jsx(Ps,{})," Add Order"]}),r.jsxs("button",{onClick:()=>c("/dashboard/inventory"),className:"pq-btn",children:[r.jsx(ud,{})," Inventory"]}),r.jsxs("button",{onClick:()=>f(),className:"pq-btn",children:[r.jsx(UD,{})," Newton's AI"]}),r.jsxs("button",{onClick:()=>c("/dashboard/distributors"),className:"pq-btn",children:[r.jsx(ud,{})," Distributors"]})]}),r.jsxs("div",{className:"pq-search-wrap",children:[r.jsx(In,{className:"pq-search-icon"}),r.jsx("input",{className:"pq-search-input",placeholder:"Search orders...",value:n,onChange:L=>a(L.target.value)})]})]}),r.jsxs("div",{className:"pq-card",children:[r.jsxs("div",{className:"pq-card-content",children:[i&&t.length===0&&r.jsx("div",{className:"p-4 space-y-2",children:[1,2,3].map(L=>r.jsx(te,{height:40,className:"mb-2"},L))}),o&&r.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]}),!i&&!o&&t.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."}),!i&&t.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pq-table-wrapper",children:r.jsxs("table",{className:"pq-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map(L=>r.jsxs("tr",{className:"pq-row",onClick:()=>P(L),onMouseEnter:()=>g(L.patientId),children:[r.jsxs("td",{children:[r.jsx("div",{className:"pq-text-bold",children:L.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",L.patientTokenNumber]})]}),r.jsx("td",{children:r.jsxs("div",{className:"pq-nested-table-wrap",children:[r.jsx("table",{className:"pq-nested-table",children:r.jsx("tbody",{children:L.medications.map(($,q)=>r.jsxs("tr",{children:[r.jsx("td",{className:"pq-text-bold",children:$.name}),r.jsxs("td",{children:[$.pack_quantity>0&&`Pack: ${$.pack_quantity} `,$.loose_quantity>0&&`Loose: ${$.loose_quantity}`]}),r.jsx("td",{className:"pq-text-sm",children:$.directions_to_use})]},q))})}),L.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"mt-1 text-xs opacity-75 pq-markdown",children:[r.jsx("strong",{children:"Note:"})," ",r.jsx(wf,{remarkPlugins:[Nf],children:L.prescriptionForUnavailableDrugs})]})]})}),r.jsx("td",{className:"pq-text-sm",children:new Date(L.date).toLocaleDateString()}),r.jsxs("td",{className:"pq-text-mono pq-text-bold",children:["",Number(L.order_total||0).toFixed(2)]}),r.jsx("td",{children:r.jsx("span",{className:I(L.status),children:L.status})}),r.jsx("td",{children:r.jsxs("div",{className:"pq-actions",children:[L.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:$=>{$.stopPropagation(),C(L.id)},className:"pq-action-btn pq-btn-edit",children:[r.jsx($i,{size:12})," Edit"]}),r.jsxs("button",{onClick:$=>{$.stopPropagation(),k(L.id)},className:"pq-action-btn pq-btn-bill",children:[r.jsx(cd,{size:12})," Bill"]})]}),L.status==="billed"&&r.jsxs("button",{onClick:$=>{$.stopPropagation(),E(L.id,"dispensed")},className:"pq-action-btn pq-btn-dispense",children:[r.jsx(Go,{size:12})," Dispense"]}),(L.status==="pending"||L.status==="billed")&&r.jsx("button",{onClick:$=>{$.stopPropagation(),E(L.id,"cancelled")},className:"pq-action-btn pq-btn-cancel",children:"Cancel"}),r.jsx("button",{onClick:$=>{$.stopPropagation(),P(L)},onMouseEnter:()=>g(L.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})]})})]},L.id))})]})}),r.jsx("div",{className:"pq-card-list",children:t.map(L=>r.jsxs("div",{className:"pq-mobile-card",onClick:()=>P(L),onMouseEnter:()=>g(L.patientId),children:[r.jsxs("div",{className:"pq-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"pq-text-bold",children:L.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",L.patientTokenNumber]})]}),r.jsx("span",{className:I(L.status),children:L.status})]}),r.jsx("div",{className:"mb-2",children:L.medications.slice(0,3).map(($,q)=>r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[$.name," (",$.pack_quantity>0?`${$.pack_quantity}p`:""," ",$.loose_quantity>0?`${$.loose_quantity}l`:"",")"]},q))}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("div",{className:"pq-text-mono pq-text-bold",children:["",Number(L.order_total||0).toFixed(2)]}),r.jsx("div",{className:"pq-actions",children:r.jsx("button",{onClick:$=>{$.stopPropagation(),P(L)},onMouseEnter:()=>g(L.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})})]})]},L.id))})]})]}),!i&&j>1&&r.jsxs("div",{className:"pq-footer px-4 pb-4",children:[r.jsxs("div",{className:"pq-page-info",children:["Page ",x," of ",j]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"pq-pagination-btn",disabled:x===1,onClick:()=>b(L=>Math.max(1,L-1)),children:r.jsx(Tb,{size:16})}),r.jsx("button",{className:"pq-pagination-btn",disabled:x===j,onClick:()=>b(L=>Math.min(j,L+1)),children:r.jsx(pd,{size:16})})]})]})]})]})},UA=10,eIe=3,jG=({isEmbedded:t=!1,initialSearch:e=""})=>{const n=Lt(),{customColumnsConfig:a,refetch:i}=rS(),s=a.drugs||[],[o,l]=v.useState(!1),[c,d]=v.useState(!1),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(e),[S,_]=v.useState(!0),[T,C]=v.useState(null),[P,k]=v.useState(new Set),[E,I]=v.useState("all"),L=async()=>{try{const ke=await se("/api/inventory/download-csv");if(!ke.ok)throw new Error(`Failed to download CSV: ${ke.statusText}`);const ot=await ke.blob(),Tt=window.URL.createObjectURL(ot),Ve=document.createElement("a");Ve.href=Tt,Ve.download="pharmacy_inventory.csv",document.body.appendChild(Ve),Ve.click(),Ve.remove(),window.URL.revokeObjectURL(Tt)}catch(ke){console.error("Failed to download CSV:",ke),C(ke.message||"Failed to download inventory CSV. Please try again.")}},[$,q]=v.useState(!1),[F,H]=v.useState(!1),[V,X]=v.useState(null),[Y,z]=v.useState(!1),[G,ie]=v.useState(new Set),[W,B]=v.useState(1),ce=8,[je,K]=v.useState(null),[Ie,Ue]=v.useState(0),[ze,Le]=v.useState(!1),[be,Ce]=v.useState(null),[Ae,me]=v.useState(1),[ye,le]=v.useState(!1),J=W*ce,ae=J-ce,ue=g.slice(ae,J),ee=Math.ceil(g.length/ce);v.useEffect(()=>{B(1)},[b,E]);const Ne=v.useCallback(async()=>{_(!0),C(null);try{const ke=await se("/api/drugs");if(!ke.ok)throw new Error(`Failed to fetch drugs: ${ke.statusText} (${ke.status})`);const ot=await ke.json();let Tt=Array.isArray(ot)?ot:ot.drugs||[];Tt=Tt.map(Ve=>({...Ve,mrp:parseFloat(String(Ve.mrp))||0,rate:Ve.rate!==null&&Ve.rate!==void 0?parseFloat(String(Ve.rate)):null,stock:parseInt(String(Ve.stock),10)||0,gst:Ve.gst!==null&&Ve.gst!==void 0?parseFloat(String(Ve.gst)):null,margin:Ve.margin!==null&&Ve.margin!==void 0?parseFloat(String(Ve.margin)):null,discount:Ve.discount!==null&&Ve.discount!==void 0?parseFloat(String(Ve.discount)):null})),p(Tt),x(Tt)}catch(ke){console.error("Failed to fetch drugs:",ke),C(ke.message||"Failed to load inventory. Please try again.")}finally{_(!1)}},[]);v.useEffect(()=>{Ne()},[Ne]),v.useEffect(()=>{e&&j(e)},[e]);const Te=v.useMemo(()=>new lo(f,{keys:["name","brand_name","description","supplier","box_number"],threshold:.3,ignoreLocation:!0}),[f]);v.useEffect(()=>{let ke=f;b&&(ke=Te.search(b).map(Ve=>Ve.item));const ot=new Date,Tt=DOe(ot,eIe);E==="low-stock"?ke=ke.filter(Ve=>Ve.stock<=UA):E==="near-expiry"?ke=ke.filter(Ve=>{if(!Ve.expiry_date)return!1;const jt=AB(Ve.expiry_date);return _D(jt)&&BA(jt,Tt)&&!BA(jt,ot)}):E==="expired"&&(ke=ke.filter(Ve=>{if(!Ve.expiry_date)return!1;const jt=AB(Ve.expiry_date);return _D(jt)&&BA(jt,ot)})),x(ke)},[b,f,E,Te]);const Fe=()=>{q(!1),K(null)},xe=ke=>{Ue(parseInt(ke.target.value,10)||0)},ne=async ke=>{if(ke.preventDefault(),C(null),!je||!je.id||Ie===0){C("No drug selected or adjustment amount is zero.");return}try{const ot=await se(`/api/drugs/${je.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:Ie})});if(!ot.ok){const Ve=await ot.json();throw new Error(Ve.message||`Failed to adjust stock: ${ot.statusText}`)}const Tt=await ot.json();p(Ve=>Ve.map(jt=>jt.id===Tt.id?Tt:jt)),Fe()}catch(ot){console.error("Failed to adjust stock:",ot),C(ot.message||"Failed to adjust stock. Please try again.")}},oe=ke=>{X(ke),H(!0)},_e=()=>{H(!1),X(null)},De=async()=>{if(!V||!V.id){C("No drug selected for deletion.");return}_(!0),C(null);try{const ke=await se(`/api/drugs/${V.id}`,{method:"DELETE"});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete drug: ${ke.statusText}`)}Ne(),_e()}catch(ke){console.error("Failed to delete drug:",ke),C(ke.message||"Failed to delete drug. Please try again.")}finally{_(!1)}},Q=()=>{z(!0)},ge=()=>{z(!1)},[de,fe]=v.useState(!1),Ee=()=>{G.size>0&&fe(!0)},Ye=()=>{fe(!1)},$e=async()=>{if(G.size===0){C("No drugs selected for deletion.");return}_(!0),C(null);try{const ke=await se("/api/drugs/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugIds:Array.from(G)})});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete selected drugs: ${ke.statusText}`)}Ne(),ie(new Set),Ye()}catch(ke){console.error("Failed to delete selected drugs:",ke),C(ke.message||"Failed to delete selected drugs. Please try again.")}finally{_(!1)}},We=async()=>{_(!0),C(null);try{const ke=await se("/api/drugs/all",{method:"DELETE"});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete all drugs: ${ke.statusText}`)}Ne(),ge()}catch(ke){console.error("Failed to delete all drugs:",ke),C(ke.message||"Failed to delete all drugs. Please try again.")}finally{_(!1)}},it=ke=>{if(!ke)return null;const ot=ke.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return ot?parseInt(ot[1],10):null},wt=ke=>{Ce(ke),me(1),Le(!0)},we=()=>{Le(!1),Ce(null),me(1)},Xe=ke=>{me(parseInt(ke.target.value,10)||0)},Je=async ke=>{if(ke.preventDefault(),C(null),!be||!be.id||Ae<=0){C("No drug selected or invalid number of packs to convert.");return}const ot=it(be.pack);if(!ot||ot<=0){C(`Cannot convert "${be.name}" to loose. Invalid pack unit: ${be.pack||"N/A"}.`);return}if(Ae>(be.stock??0)){C(`Cannot convert ${Ae} packs. Only ${be.stock??0} packs are in stock.`);return}try{const Tt=await se(`/api/drugs/${be.id}/convert-to-loose`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({packsToConvert:Ae,packSize:ot})});if(!Tt.ok){const jt=await Tt.json();throw new Error(jt.message||`Failed to convert to loose: ${Tt.statusText}`)}const Ve=await Tt.json();p(jt=>jt.map(kt=>kt.id===Ve.id?Ve:kt)),we()}catch(Tt){console.error("Failed to convert to loose:",Tt),C(Tt.message||"Failed to convert to loose. Please try again.")}finally{_(!1)}},ct=()=>{le(!0)},Ct=()=>{le(!1)},bt=async()=>{_(!0),C(null);try{const ke=await se("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to add default medications: ${ke.statusText}`)}Ne(),Ct()}catch(ke){console.error("Failed to add default medications:",ke),C(ke.message||"Failed to add default medications. Please try again.")}finally{_(!1)}};return S?r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsx("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[1,2,3,4].map(ke=>r.jsx(te,{width:120,height:36},ke))}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsx(te,{width:100,height:36}),[1,2,3,4].map(ke=>r.jsx(te,{width:120,height:36},ke))]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsx(te,{width:"100%",height:40,style:{maxWidth:"600px"}}),r.jsx(te,{width:150,height:40})]}),r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx(te,{width:20,height:20})}),r.jsx("th",{children:"DRUG DETAILS"}),r.jsx("th",{children:"PACK"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{className:"qty-header",children:"STOCK"}),r.jsx("th",{className:"mrp-header",children:"MRP"}),r.jsx("th",{className:"rate-header",children:"RATE"}),r.jsx("th",{children:"BOX"}),r.jsx("th",{children:"DISC %"}),r.jsx("th",{children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ke=>r.jsxs("tr",{children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx(te,{width:20,height:20})}),r.jsxs("td",{children:[r.jsx(te,{width:"80%",height:20}),r.jsx(te,{width:"40%",height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsxs("td",{children:[r.jsx(te,{width:40,height:20}),r.jsx(te,{width:60,height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:40,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(te,{width:20,height:20}),r.jsx(te,{width:20,height:20}),r.jsx(te,{width:20,height:20})]})})]},ke))})]})})]}):T?r.jsxs("div",{className:"error-indicator",children:["Error: ",T]}):r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsxs("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline add-drug-button",children:[r.jsx(Ps,{size:18}),"Add New Drug"]}),r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline",children:[r.jsx(Ps,{size:18}),"Purchase Page"]}),r.jsxs("button",{onClick:()=>n("/dashboard/distributors"),className:"action-button-outline",children:[r.jsx(Ps,{size:18}),"Distributors"]}),r.jsxs("button",{onClick:()=>l(!0),className:"action-button-outline",title:"Manage Custom Columns",children:[r.jsx(dd,{size:18}),"Columns"]})]}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>d(!1),className:`view-mode-btn ${c?"":"active"}`,title:"List View",children:[r.jsx(Ab,{size:18})," List"]}),r.jsxs("button",{onClick:()=>d(!0),className:`view-mode-btn ${c?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(xf,{size:18})," Excel"]})]}),r.jsx("button",{onClick:L,className:"action-button-outline",children:"Download CSV"}),r.jsxs("button",{onClick:ct,className:"action-button-outline",children:[r.jsx(Ps,{size:18}),"Import Defaults"]}),r.jsxs("button",{onClick:Ee,className:"action-button-outline delete-button-outline",disabled:G.size===0,children:[r.jsx(Vn,{size:18}),"Delete (",G.size,")"]}),r.jsxs("button",{onClick:Q,className:"action-button-outline delete-all-button-outline",children:[r.jsx(Vn,{size:18}),"Delete All"]})]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsxs("div",{className:"search-input-wrapper",style:{maxWidth:"600px"},children:[r.jsx(In,{size:20,className:"search-input-icon"}),r.jsx("input",{type:"text",placeholder:"Search drugs...",value:b,onChange:ke=>j(ke.target.value),className:"inventory-search-input"})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("select",{value:E,onChange:ke=>I(ke.target.value),className:"inventory-filter-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})})]}),c?r.jsx("div",{className:"inventory-table-container",style:{padding:"1rem"},children:r.jsx(Rb,{title:"Pharmacy Inventory",columns:[{key:"name",label:"Drug Name",type:"text",editable:!0},{key:"brand_name",label:"Brand Name",type:"text",editable:!0},{key:"pack",label:"Pack",type:"text",editable:!0},{key:"expiry_date",label:"Expiry",type:"date",editable:!0},{key:"stock",label:"Stock",type:"number",editable:!0},{key:"mrp",label:"MRP",type:"number",editable:!0},{key:"rate",label:"Rate",type:"number",editable:!0},{key:"box_number",label:"Box",type:"text",editable:!0},{key:"discount",label:"Discount %",type:"number",editable:!0},{key:"gst",label:"GST %",type:"number",editable:!0},{key:"supplier",label:"Supplier",type:"text",editable:!0}],data:g,onSave:async ke=>{try{for(const ot of ke)ot.id&&await se(`/api/drugs/${ot.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ot)});Ne()}catch(ot){console.error("Failed to save:",ot),C(ot.message||"Failed to save changes")}},editable:!0,showRowNumbers:!0})}):r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx("input",{type:"checkbox",onChange:ke=>{if(ke.target.checked){const ot=new Set(g.map(Tt=>Tt.id));ie(ot)}else ie(new Set)},checked:G.size===g.length&&g.length>0,disabled:g.length===0})}),r.jsx("th",{className:"drug-name-header",children:"DRUG DETAILS"}),r.jsx("th",{className:"pack-header",children:"PACK"}),r.jsx("th",{className:"expiry-header",children:"EXPIRY"}),r.jsx("th",{className:"text-stock qty-header",children:"STOCK"}),r.jsx("th",{className:"text-price mrp-header",children:"MRP"}),r.jsx("th",{className:"text-cost rate-header",children:"RATE"}),r.jsx("th",{className:"box-number-header",children:"BOX"}),r.jsx("th",{className:"discount-header",children:"DISC %"}),r.jsx("th",{className:"margin-header",children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsxs("tbody",{children:[g.length===0&&r.jsx("tr",{className:"no-results-message",children:r.jsx("td",{colSpan:11,children:"No drugs found matching your search."})}),ue.map(ke=>r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{className:"drug-row",onClick:()=>{const ot=new Set(P);ot.has(ke.id)&&ke.id!==void 0?ot.delete(ke.id):ke.id!==void 0&&ot.add(ke.id),k(ot)},children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx("input",{type:"checkbox",onClick:ot=>ot.stopPropagation(),checked:G.has(ke.id),onChange:()=>{const ot=new Set(G);ot.has(ke.id)?ot.delete(ke.id):ot.add(ke.id),ie(ot)}})}),r.jsx("td",{className:"drug-name-cell",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:ke.brand_name||ke.name||"-"}),ke.brand_name&&ke.name&&ke.brand_name!==ke.name&&r.jsx("span",{className:"text-xs text-muted-foreground",style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:ke.name})]})}),r.jsx("td",{className:"text-muted pack-cell",children:ke.pack||"-"}),r.jsx("td",{className:"text-muted",children:ke.expiry_date?new Date(ke.expiry_date).toLocaleDateString("en-GB"):"-"}),r.jsxs("td",{className:`text-stock ${ke.stock<=UA?"low-stock":""}`,children:[r.jsx("div",{style:{fontWeight:"bold"},children:ke.stock}),r.jsx("div",{className:"loose-quantity",children:ke.loose!==null&&ke.loose!==void 0?`${ke.loose} loose`:"0 loose"})]}),r.jsxs("td",{className:"text-muted text-price",children:["",typeof ke.mrp=="number"?ke.mrp.toFixed(2):"N/A"]}),r.jsx("td",{className:"text-muted text-cost",children:ke.rate!==null&&ke.rate!==void 0?`${ke.rate.toFixed(2)}`:"-"}),r.jsx("td",{className:"text-muted",children:ke.box_number||"-"}),r.jsx("td",{className:"text-muted",children:ke.discount!==null&&ke.discount!==void 0?`${ke.discount.toFixed(2)}%`:"0.00%"}),r.jsx("td",{className:"text-muted",children:(()=>{const ot=ke.mrp||0,Tt=ke.rate||0,Ve=ke.discount||0,jt=ke.gst||0,Kn=Tt*(1-Ve/100)*(1+jt/100),vt=ot-Kn;return`${(ot>0?vt/ot*100:0).toFixed(2)}%`})()}),r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsx("button",{onClick:ot=>{ot.stopPropagation(),n(`/dashboard/inventory/edit/${ke.id}`)},className:"action-icon-button",title:"Edit Drug",children:r.jsx($i,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),oe(ke)},className:"action-icon-button delete-button",title:"Delete Drug",children:r.jsx(Vn,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),K(ke),q(!0)},className:"action-icon-button adjust-stock-button",title:"Adjust Stock",children:r.jsx(NI,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),wt(ke)},className:"action-icon-button convert-to-loose-button",title:"Convert to Loose",disabled:!ke.pack||it(ke.pack)===null,children:r.jsx(kI,{size:16})})]})})]}),P.has(ke.id)&&r.jsx("tr",{className:"collapsible-row",children:r.jsx("td",{colSpan:11,children:r.jsxs("div",{className:"collapsible-content",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",ke.description||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Supplier:"})," ",ke.supplier||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Batch:"})," ",ke.batch||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"HSN Code:"})," ",ke.hsn_code||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"MFG:"})," ",ke.mfg||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Loose Price:"}),(()=>{const ot=it(ke.pack);return ot&&ot>0&&typeof ke.mrp=="number"?`${(ke.mrp/ot).toFixed(2)}`:"N/A"})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"GST:"})," ",ke.gst!==null&&ke.gst!==void 0?`${ke.gst.toFixed(2)}%`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",new Date(ke.last_updated).toLocaleString()]}),s.length>0&&r.jsx("div",{className:"custom-fields-display",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px dashed var(--border-color)"},children:s.map(ot=>{var Tt;return r.jsxs("p",{children:[r.jsxs("strong",{children:[ot.label,":"]})," ",(Tt=ke.custom_fields)!=null&&Tt[ot.key]?String(ke.custom_fields[ot.key]):"-"]},ot.key)})})]})})})]},ke.id))]})]})}),r.jsx("div",{className:`inventory-grid-mobile ${t?"embedded":""}`,style:{display:c?"none":void 0},children:g.length===0?r.jsx("div",{className:"inventory-card-empty",children:"No drugs found matching your search."}):ue.map(ke=>r.jsxs("div",{className:"inventory-card",onClick:()=>{const ot=new Set(P);ot.has(ke.id)&&ke.id!==void 0?ot.delete(ke.id):ke.id!==void 0&&ot.add(ke.id),k(ot)},children:[r.jsxs("div",{className:"inventory-card-header",children:[r.jsxs("div",{className:"inventory-card-drug-info",children:[r.jsx("h4",{className:"inventory-card-drug-name",children:ke.brand_name||ke.name||"-"}),ke.brand_name&&ke.name&&ke.brand_name!==ke.name&&r.jsx("div",{className:"inventory-card-brand-name",children:ke.name})]}),r.jsx("div",{className:"inventory-card-checkbox",onClick:ot=>ot.stopPropagation(),children:r.jsx("input",{type:"checkbox",checked:G.has(ke.id),onChange:()=>{const ot=new Set(G);ot.has(ke.id)?ot.delete(ke.id):ot.add(ke.id),ie(ot)}})})]}),r.jsxs("div",{className:"inventory-card-body",children:[r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Stock"}),r.jsxs("span",{className:`inventory-card-field-value stock-value ${ke.stock<=UA?"stock-low":""}`,children:[ke.stock,r.jsxs("span",{className:"inventory-card-loose",children:[" (",ke.loose??0," loose)"]})]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"MRP"}),r.jsxs("span",{className:"inventory-card-field-value price-value",children:["",typeof ke.mrp=="number"?ke.mrp.toFixed(2):"N/A"]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Pack"}),r.jsx("span",{className:"inventory-card-field-value",children:ke.pack||"-"})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Expiry"}),r.jsx("span",{className:"inventory-card-field-value",children:ke.expiry_date?new Date(ke.expiry_date).toLocaleDateString("en-GB"):"-"})]})]}),P.has(ke.id)&&r.jsxs("div",{className:"inventory-card-expanded",children:[r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Rate"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.rate!==null&&ke.rate!==void 0?`${ke.rate.toFixed(2)}`:"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Box"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.box_number||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Supplier"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.supplier||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Batch"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.batch||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"HSN Code"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.hsn_code||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Discount"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.discount!==null&&ke.discount!==void 0?`${ke.discount.toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"GST"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.gst!==null&&ke.gst!==void 0?`${ke.gst.toFixed(2)}%`:"-"})]}),s.length>0&&s.map(ot=>{var Tt;return r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:ot.label}),r.jsx("span",{className:"inventory-card-expanded-value",children:(Tt=ke.custom_fields)!=null&&Tt[ot.key]?String(ke.custom_fields[ot.key]):"-"})]},ot.key)})]}),r.jsxs("div",{className:"inventory-card-actions",onClick:ot=>ot.stopPropagation(),children:[r.jsxs("button",{className:"inventory-card-action-btn btn-edit",onClick:()=>n(`/dashboard/inventory/edit/${ke.id}`),title:"Edit Drug",children:[r.jsx($i,{size:14}),"Edit"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-delete",onClick:()=>oe(ke),title:"Delete Drug",children:[r.jsx(Vn,{size:14}),"Delete"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-adjust",onClick:()=>{K(ke),q(!0)},title:"Adjust Stock",children:[r.jsx(NI,{size:14}),"Adjust"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-convert",onClick:()=>wt(ke),title:"Convert to Loose",disabled:!ke.pack||it(ke.pack)===null,children:[r.jsx(kI,{size:14}),"Loose"]})]})]},ke.id))}),ee>1&&r.jsxs("div",{className:"pagination-controls",style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",backgroundColor:"var(--card-bg, #fff)",borderTop:"1px solid var(--border-color)"},children:[r.jsx("button",{onClick:()=>B(ke=>Math.max(ke-1,1)),disabled:W===1,className:"pagination-button",children:"Previous"}),r.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Page ",W," of ",ee]}),r.jsx("button",{onClick:()=>B(ke=>Math.min(ke+1,ee)),disabled:W===ee,className:"pagination-button",children:"Next"})]}),F&&V&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:_e,className:"modal-close-button",children:r.jsx(Ft,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),r.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',r.jsx("span",{className:"drug-name",children:V.name||"Unnamed Drug"}),'"? This action cannot be undone.']}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:_e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:De,className:"button-delete",children:"Delete"})]})]})}),$&&je&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Fe,className:"modal-close-button",children:r.jsx(Ft,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:je.name||"Unnamed Drug"}),r.jsx("br",{}),"Current Stock: ",je.stock]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:ne,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),r.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:Ie===0?"":Ie,onChange:xe,placeholder:"e.g., 10 or -5",className:"form-input"}),r.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Fe,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),Y&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ge,className:"modal-close-button",children:r.jsx(Ft,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ge,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:We,className:"button-delete",children:"Delete All"})]})]})}),de&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ye,className:"modal-close-button",children:r.jsx(Ft,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of Selected Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:G.size})," selected drug(s)? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ye,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:$e,className:"button-delete",children:"Delete Selected"})]})]})}),ze&&be&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:we,className:"modal-close-button",children:r.jsx(Ft,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Convert to Loose"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:be.name||"Unnamed Drug"}),r.jsx("br",{}),"Pack Size: ",be.pack,r.jsx("br",{}),"Current Stock: ",be.stock," packs, ",be.loose??0," loose units."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:Je,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"packsToConvert",className:"form-label",children:"Packs to Convert"}),r.jsx("input",{type:"number",name:"packsToConvert",id:"packsToConvert",required:!0,step:"1",min:"1",max:be.stock,value:Ae===0?"":Ae,onChange:Xe,className:"form-input"}),r.jsxs("p",{className:"form-help-text",children:["Converting ",Ae," pack(s) will add ",Ae*(it(be.pack)||0)," loose units."]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:we,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Convert"})]})]})]})}),ye&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ct,className:"modal-close-button",children:r.jsx(Ft,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Add Default Medications"}),r.jsx("p",{className:"modal-description",children:"Are you sure you want to add default medications to the inventory? This will add a predefined set of common medications."}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ct,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:bt,className:"button-submit",children:"Add Defaults"})]})]})}),r.jsx(DM,{isOpen:o,onClose:()=>l(!1),entityType:"drugs",entityLabel:"Pharmacy Drugs",currentConfig:a,onConfigUpdated:()=>{i()}})]})},tIe=()=>{const t=Lt();return r.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[r.jsx("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},wG=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(!1),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null),j=v.useCallback(async()=>{if(!t){l("Drug ID is missing."),s(!1);return}s(!0),l(null);try{const C=await se(`/api/drugs/${t}`);if(!C.ok){const k=await C.json();throw new Error(k.message||`Failed to fetch drug: ${C.statusText}`)}let P=await C.json();P={...P,name:P.name||"",brand_name:P.brand_name||"",mrp:parseFloat(String(P.mrp))||0,rate:P.rate!==null&&P.rate!==void 0?parseFloat(String(P.rate)):null,stock:parseInt(String(P.stock),10)||0,gst:P.gst!==null&&P.gst!==void 0?parseFloat(String(P.gst)):null,margin:P.margin!==null&&P.margin!==void 0?parseFloat(String(P.margin)):null,discount:P.discount!==null&&P.discount!==void 0?parseFloat(String(P.discount)):null,batch:P.batch||"",hsn_code:P.hsn_code||"",mfg:P.mfg||"",loose:P.loose!==null&&P.loose!==void 0?parseInt(String(P.loose),10):null},a(P)}catch(C){console.error("Failed to fetch drug:",C),l(C.message||"Failed to load drug data. Please try again.")}finally{s(!1)}},[t]);v.useEffect(()=>{j()},[j]),v.useEffect(()=>{const C=k=>{k.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var E;(E=b.current)==null||E.focus()},0),k.preventDefault()))},P=k=>{g.current&&!g.current.contains(k.target)&&p(!1)};return document.addEventListener("keydown",C),document.addEventListener("mousedown",P),()=>{document.removeEventListener("keydown",C),document.removeEventListener("mousedown",P)}},[f]);const S=C=>{const{name:P,value:k,type:E}=C.target;a(I=>I?{...I,[P]:E==="number"?parseFloat(k)||null:k}:null)},_=()=>{e(-1)},T=async C=>{if(C.preventDefault(),l(null),d(!0),!n||!n.id){l("Cannot edit drug: No drug data available."),d(!1);return}if(n.mrp===void 0||n.stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const P={...n,name:n.name===""?null:n.name,brand_name:n.brand_name===""?null:n.brand_name,rate:n.rate===0?null:n.rate,expiry_date:n.expiry_date===""?null:n.expiry_date,gst:n.gst===0?null:n.gst,margin:n.margin===0?null:n.margin,discount:n.discount===0?null:n.discount,batch:n.batch===""?null:n.batch,hsn_code:n.hsn_code===""?null:n.hsn_code,mfg:n.mfg===""?null:n.mfg,loose:n.loose===0?null:n.loose};try{const k=await se(`/api/drugs/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!k.ok){const E=await k.json();throw new Error(E.message||`Failed to update drug: ${k.statusText}`)}await k.json(),e(-1)}catch(k){console.error("Failed to update drug:",k),l(k.message||"Failed to update drug. Please try again.")}finally{d(!1)}};return i?r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):o&&!n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"error-message-load",children:["Error: ",o]})}):n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"edit-drug-form-container",children:[r.jsxs("div",{className:"edit-drug-form-header",children:[r.jsxs("h2",{children:["Edit Drug: ",n.name]}),r.jsx("button",{onClick:_,className:"cancel-button",title:"Go Back",children:r.jsx(Ft,{size:24})})]}),o&&r.jsx("div",{className:"error-message-submit",children:o}),r.jsxs("form",{onSubmit:T,className:"edit-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Composition Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"edit-name",value:n.name||"",onChange:S,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})," "]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-brand_name",className:"form-label",children:"Brand Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"edit-brand_name",value:n.brand_name||"",onChange:S,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"edit-mrp",required:!0,step:"0.01",min:"0",value:n.mrp||"",onChange:S,className:"custom-text-input",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"edit-stock",required:!0,step:"1",min:"0",value:n.stock||"",onChange:S,className:"custom-text-input",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"edit-pack",value:n.pack||"",onChange:S,className:"custom-text-input",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:n.expiry_date||"",onChange:S,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:n.box_number||"",onChange:S,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:g,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:n.description||"",onChange:S,className:"custom-text-input",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:n.supplier||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:10})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"edit-rate",step:"0.01",min:"0",value:n.rate??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:11,ref:b})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"edit-gst",step:"0.01",min:"0",max:"100",value:n.gst??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"edit-margin",step:"0.01",min:"0",max:"100",value:n.margin??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"edit-discount",step:"0.01",min:"0",max:"100",value:n.discount??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"edit-batch",value:n.batch||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"edit-hsn_code",value:n.hsn_code||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"edit-mfg",value:n.mfg||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:17})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-loose",className:"form-label",children:"Loose"}),r.jsx("input",{type:"number",name:"loose",id:"edit-loose",step:"1",min:"0",value:n.loose??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:18})]})]})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:_,disabled:c,className:"form-button cancel-form-button",tabIndex:19,children:"Back"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:20,children:c?"Saving...":"Save Changes"})]})]})]})}):r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"not-found-message",children:"Drug not found."})})},nIe=({clinicId:t})=>{const e=Lt(),[n,a]=v.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState([]),[f,p]=v.useState(!0),g=async()=>{try{const S=await se("/api/clinic-roles");if(S.ok){const _=await S.json();d(_)}}catch(S){console.error("Failed to fetch roles:",S)}finally{p(!1)}};v.useEffect(()=>{s(t?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly."),g()},[t]);const x=S=>{const{name:_,value:T}=S.target;a(C=>{const P={...C,[_]:T};return _==="role"&&T!=="doctor"&&(P.opd_fee=""),P})},b=async S=>{if(S.preventDefault(),s(null),!n.name||!n.email||!n.role||!n.password){s("Name, Email, Role, and Password are required.");return}if(!t){s("Clinic information is missing. Cannot add staff.");return}const _={...n,clinic_id:t,opd_fee:n.role==="doctor"&&n.opd_fee?parseFloat(String(n.opd_fee)):null};if(_.role==="doctor"&&n.opd_fee&&isNaN(_.opd_fee)){s("Invalid OPD Fee format. Please enter a number.");return}l(!0);try{const T=await se("/api/staff",{method:"POST",body:JSON.stringify(_)});if(!T.ok){const C=await T.json();throw new Error(C.message||"Server responded with an error")}e(-1)}catch(T){s(`Failed to add staff: ${T.message}`)}finally{l(!1)}},j=()=>{e(-1)};return r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:j,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(on,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{children:"Add New Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),i]}),r.jsxs("form",{onSubmit:b,className:`staff-form ${t?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{id:"name",type:"text",name:"name",value:n.name||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",name:"email",value:n.email||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"role",children:"Assign Role"}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:x,required:!0,disabled:o||!t||f,children:f?r.jsx("option",{value:"",children:"Loading roles..."}):c.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):c.map(S=>r.jsx("option",{value:S.key,children:S.name},S.key))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:n.password||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Create a password"})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee () (Optional)"}),r.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:n.opd_fee||"",onChange:x,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:o||!t}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),r.jsxs("button",{type:"submit",disabled:o||!t,children:[o?r.jsx(so,{size:18,className:"animate-spin mr-2"}):r.jsx(Hn,{size:18,className:"mr-2"}),o?"Adding...":"Add Staff Member"]})]})]})},rIe=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState(null),[b,j]=v.useState([]),[S,_]=v.useState(!0),T=async()=>{try{const I=await se("/api/clinic-roles");if(I.ok){const L=await I.json();j(L)}}catch(I){console.error("Failed to fetch roles:",I)}finally{_(!1)}},C=v.useCallback(async()=>{if(!t){p("Staff ID is missing."),l(!1);return}l(!0),p(null),x(null);try{const I=await se(`/staff/${t}`);if(!I.ok){const $=await I.json();throw new Error($.message||`HTTP error! status: ${I.status}`)}const L=await I.json();a({name:L.name,email:L.email,role:L.role,opd_fee:L.opd_fee??"",active:L.active})}catch(I){p(`Failed to load staff details: ${I.message}`)}finally{l(!1)}},[t]);v.useEffect(()=>{C(),T()},[C]);const P=I=>{const{name:L,value:$,type:q}=I.target;if(q==="checkbox"){const{checked:F}=I.target;a(H=>({...H,[L]:F}))}else a(F=>({...F,[L]:$}))},k=I=>{s(I.target.value)},E=async I=>{if(I.preventDefault(),!t){p("Staff ID is missing.");return}d(!0),p(null),x(null);const L={name:n.name,email:n.email,role:n.role,active:n.active};if(n.role==="doctor"){const $=n.opd_fee?parseFloat(String(n.opd_fee)):null;if($!==null&&isNaN($)){p("OPD Fee must be a valid number."),d(!1);return}L.opd_fee=$}else L.opd_fee=null;i.trim()!==""&&(L.password=i.trim());try{const $=await se(`/staff/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!$.ok){const q=await $.json();throw new Error(q.message||`HTTP error! status: ${$.status}`)}x("Staff details updated successfully!"),s(""),setTimeout(()=>e(-1),1500)}catch($){p(`Failed to update staff: ${$.message}`)}finally{d(!1)}};return o?r.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(so,{className:"h-12 w-12 animate-spin text-teal-600"}),r.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(on,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),f&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),f,r.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),g&&r.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[r.jsx(Go,{size:18,className:"mr-2 text-green-500"}),g,r.jsx("button",{onClick:()=>x(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:""})]}),r.jsxs("form",{onSubmit:E,className:"staff-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:P,required:!0,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email||"",onChange:P,required:!0,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"role",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:P,required:!0,disabled:S,children:S?r.jsx("option",{value:"",children:"Loading roles..."}):b.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"lab",children:"Lab Technician"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"})]}):b.map(I=>r.jsx("option",{value:I.key,children:I.name},I.key))})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee ()"}),r.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:n.opd_fee||"",onChange:P,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),r.jsxs("div",{className:"form-group checkbox-group",children:[r.jsx("input",{id:"active",name:"active",type:"checkbox",checked:n.active??!0,onChange:P}),r.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),r.jsx("input",{type:"password",id:"password",name:"password",value:i,onChange:k,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),r.jsx("button",{type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(so,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(cs,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})},aIe=()=>{const{patientId:t}=Fa(),e=Lt(),[n,a]=v.useState([]),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){d("Patient ID not provided.");return}l(!0),d(null);try{const g=await se(`/api/patients/${t}`);if(!g.ok)throw new Error(`Failed to fetch patient details: ${g.status}`);const x=await g.json();s({name:x.name,age:x.age,gender:x.gender});const b=await se(`/api/patients/${t}/complaints`);if(b.ok){const S=(await b.json()).sort((_,T)=>new Date(T.createdAt).getTime()-new Date(_.createdAt).getTime());a(S)}else if(b.status===404)a([]);else throw new Error(`Failed to fetch complaints: ${b.status}`)}catch(g){console.error("Error fetching past complaints or patient info:",g),d(`Failed to load data. ${g.message}`),a([]),s(null)}finally{l(!1)}})()},[t]);const f=p=>{navigator.clipboard.writeText(p).then(()=>console.log("Complaint copied to clipboard")).catch(g=>console.error("Failed to copy complaint: ",g))};return r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",r.jsx("strong",{children:i.name})," (",i.age??"N/A"," / ",i.gender??"N/A",")"]}),c&&r.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",c]}),o&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!o&&n.length===0&&!c&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!o&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(p=>r.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(p.createdAt).toLocaleString()}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.complaint}),r.jsx("button",{onClick:()=>f(p.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:""})]},p.id))})]})},iIe=t=>{if(t===0)return"Zero";const e=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],a=l=>l===0?"":l<20?e[l]:l<100?n[Math.floor(l/10)]+(l%10?" "+e[l%10]:""):e[Math.floor(l/100)]+" Hundred"+(l%100?" and "+a(l%100):""),i=Math.floor(t),s=Math.round((t-i)*100);let o="";return i>=1e7&&(o+=a(Math.floor(i/1e7))+" Crore "),i>=1e5&&(o+=a(Math.floor(i%1e7/1e5))+" Lakh "),i>=1e3&&(o+=a(Math.floor(i%1e5/1e3))+" Thousand "),i>=100&&(o+=a(Math.floor(i%1e3/100))+" Hundred "),i%100&&(o+=(o?"and ":"")+a(i%100)),o=o.trim()+" Rupees",s>0&&(o+=" and "+a(s)+" Paise"),o+" Only"},sIe=t=>{const e=typeof t=="string"?parseInt(t,10):t;return`INV-${String(e).padStart(6,"0")}`},VA=500,PB="defaultConsultationFee",oIe=({patientId:t,billId:e,queueId:n,onBillCreated:a,onBillUpdated:i,initialItems:s=[],billType:o="other",relatedId:l,initialStatus:c="pending",initialDiscountPercentage:d=0,readOnlyMode:f=!1,doctorId:p,labOrderId:g,patientInsuranceType:x})=>{const[b,j]=v.useState(null),[S,_]=v.useState([]),T=v.useRef([]),[C,P]=v.useState(""),[k,E]=v.useState(""),[I,L]=v.useState(1),[$,q]=v.useState(d),[F,H]=v.useState("cash"),[V,X]=v.useState(!1),[Y,z]=v.useState(null),[G,ie]=v.useState(!1),[W,B]=v.useState(!1),[ce,je]=v.useState(!1),[K,Ie]=v.useState(null),[Ue,ze]=v.useState([]),[Le,be]=v.useState(null),[Ce,Ae]=v.useState(""),[me,ye]=v.useState("cash"),[le,J]=v.useState(!1),[ae,ue]=v.useState(!1),[ee,Ne]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Te=()=>{ee.length<5&&Ne(tt=>[...tt,{id:Date.now().toString(),method:"cash",amount:0}])},Fe=tt=>{ee.length>2&&Ne(gt=>gt.filter(St=>St.id!==tt))},xe=(tt,gt,St)=>{Ne(Ot=>Ot.map(Ln=>Ln.id===tt?gt==="method"?{...Ln,method:St}:{...Ln,amount:Math.max(0,St)}:Ln))},ne=(tt,gt)=>{const St=ee.filter(Nn=>Nn.id!==tt).reduce((Nn,Ln)=>Nn+Ln.amount,0),Ot=Math.max(0,gt-St);Ne(Nn=>Nn.map(Ln=>Ln.id===tt?{...Ln,amount:Ot}:Ln))},[oe,_e]=v.useState(null),[De,Q]=v.useState(!1),[ge,de]=v.useState(VA),[fe,Ee]=v.useState(VA.toString()),[Ye,$e]=v.useState(""),[We,it]=v.useState(""),[wt,we]=v.useState(""),[Xe,Je]=v.useState(""),[ct,Ct]=v.useState(""),bt=e?"view_pay":"create";v.useEffect(()=>{const tt=localStorage.getItem(PB),gt=tt?parseFloat(tt):VA;isNaN(gt)||(de(gt),Ee(gt.toString()))},[]);const ke=s.length===0;v.useEffect(()=>{t?(async()=>{X(!0),z(null);try{const gt=await se(`/api/patients/${t}`);if(!gt.ok){const Ot=await gt.json().catch(()=>({}));throw new Error(Ot.message||"Failed to fetch patient details")}const St=await gt.json();j(St)}catch(gt){z(`Failed to load patient details: ${gt.message}`),j(null)}finally{X(!1)}})():j(null)},[t]),v.useEffect(()=>{e?(async()=>{je(!0),z(null),Ie(null),ze([]),be(null);try{const gt=await se(`/api/bills/${e}`);if(!gt.ok){const Ot=await gt.json().catch(()=>({}));throw new Error(Ot.message||"Failed to fetch bill details")}const St=await gt.json();if(!St.bill||!St.payments||!St.calculated)throw new Error("Invalid bill details structure.");Ie(St.bill),ze(St.payments),be(St.calculated),q(St.bill.discount_percentage!==void 0&&St.bill.discount_percentage!==null?parseFloat(St.bill.discount_percentage.toString()):0),St.bill.payment_mode&&H(St.bill.payment_mode),!b&&St.bill.patient_id&&ot(St.bill.patient_id.toString())}catch(gt){z(`Failed to load bill details: ${gt.message}`),Ie(null),ze([]),be(null)}finally{je(!1)}})():(Ie(null),ze([]),be(null))},[e]),v.useEffect(()=>{(async()=>{try{const gt=await se("/api/clinics/settings");if(!gt.ok)throw new Error("Failed to fetch clinic settings");const St=await gt.json();$e(St.upi_id||""),it(St.name||""),we(St.address||""),Je(St.notes||"")}catch(gt){console.error("Error fetching clinic settings:",gt)}})()},[]);const ot=async tt=>{X(!0);try{const gt=await se(`/api/patients/${tt}`);if(!gt.ok)throw new Error("Failed to fetch patient");const St=await gt.json();j(St)}catch(gt){console.error("Error fetching patient details:",gt),j(null)}finally{X(!1)}},Tt=v.useCallback(async tt=>{B(!0),z(null);const gt=tt.filter(St=>St.drug_id!=null).map(async St=>{try{const Ot=await se(`/api/drugs/${St.drug_id}`);if(!Ot.ok)throw new Error(`Drug ${St.drug_id} not found.`);const Nn=await Ot.json();return{...St,price:Nn.price,total:Nn.price*St.quantity}}catch{return z(Nn=>`${Nn?Nn+"; ":""}Failed to fetch price for ${St.name}`),St}});try{const St=await Promise.all(gt);_(Ot=>{const Nn=new Map(St.map(Ln=>[Ln.id,Ln]));return Ot.map(Ln=>Nn.get(Ln.id)||Ln)})}catch{}finally{B(!1)}},[se]);v.useEffect(()=>{if(e){_([]),T.current=[];return}JSON.stringify(s)===JSON.stringify(T.current)||(async()=>{let St=[];if(s&&s.length>0)St=s.map((Ot,Nn)=>({...Ot,id:`initial-${Nn}-${Date.now()}`})),H(c==="paid"?"cash":x==="no_cash_insurance"?"no_cash_insurance":"cash"),q(d),o==="pharmacy"&&!f&&await Tt(St);else if(t&&ke&&o==="consultation"){let Ot=ge;if(p)try{const Nn=await se(`/api/staff/${p}`);if(!Nn.ok){const ba=await Nn.json().catch(()=>({}));throw new Error(ba.message||"Doctor not found or error fetching fee")}const Ln=await Nn.json();Ln.opd_fee!=null&&!isNaN(parseFloat(String(Ln.opd_fee)))&&parseFloat(String(Ln.opd_fee))>=0&&(Ot=parseFloat(String(Ln.opd_fee)))}catch(Nn){z(Ln=>`${Ln?Ln+"; ":""}Could not fetch doctor's fee, using default. (${Nn.message})`)}St=[{id:Date.now(),name:"Consultation Fee",price:Ot,quantity:1,total:Ot*1,drug_id:null}],H(x==="no_cash_insurance"?"no_cash_insurance":"cash")}else St=[],H(x==="no_cash_insurance"?"no_cash_insurance":"cash");_(St),T.current=s})()},[e,t,p,s,o,ge,ke,c,f,Tt,d,x]);const Ve=()=>{const tt=parseFloat(k);if(!f)if(C&&!isNaN(tt)&&tt>=0&&I>0){if(C.trim().toLowerCase()==="consultation fee"&&S.some(St=>St.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const gt={id:Date.now(),name:C.trim(),price:tt,quantity:I,total:tt*I,drug_id:null};_([...S,gt]),P(""),E(""),L(1)}else alert("Invalid item details.")},jt=tt=>{f||_(S.filter(gt=>gt.id!==tt))},kt=v.useMemo(()=>{let tt=S.reduce((gt,St)=>gt+St.total,0);return bt==="create"&&$>0&&(tt=tt*(1-$/100)),(Le==null?void 0:Le.totalDue)!==void 0&&(Le==null?void 0:Le.totalDue)!==null?Le.totalDue:tt},[S,Le,$,bt]),Kn=v.useMemo(()=>S.reduce((tt,gt)=>tt+gt.total,0),[S]),vt=v.useMemo(()=>Kn*($/100),[Kn,$]),Dt=v.useMemo(()=>(Le==null?void 0:Le.totalPaid)??0,[Le]),Vt=v.useMemo(()=>(Le==null?void 0:Le.balance)!==void 0&&(Le==null?void 0:Le.balance)!==null?Le.balance:kt-Dt,[Le,kt,Dt]);v.useEffect(()=>{if(kt>0&&Ye){const tt=`upi://pay?pa=${Ye}&pn=${encodeURIComponent(We)}&am=${kt.toFixed(2)}&cu=INR`;Ct(tt)}else Ct("")},[kt,Ye,We]),v.useEffect(()=>{(async()=>{if(F==="credit"&&t){Q(!0);try{const gt=await se(`/api/patient-debts/${t}/balance`);if(gt.ok){const St=await gt.json();_e(St.netDebt||0)}else _e(0)}catch(gt){console.error("Error fetching patient debt:",gt),_e(0)}finally{Q(!1)}}})()},[F,t]);const ln=()=>{const tt=parseFloat(fe);!isNaN(tt)&&tt>=0?(de(tt),localStorage.setItem(PB,tt.toString())):alert("Invalid fee amount.")},er=async(tt,gt)=>{ie(!0),z(null);try{const St=await se("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:gt,billId:tt})}),Ot=await St.json();if(!St.ok||!Ot.order)throw new Error(Ot.message||"Failed to create Razorpay order.");const{key_id:Nn,order:Ln}=Ot,ba={key:Nn,amount:Ln.amount,currency:Ln.currency,name:"Newtons Ai HMS Clinic",description:`Bill Payment for Patient ID: ${t}`,order_id:Ln.id,handler:async function(yi){try{const uo=await se("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:yi.razorpay_payment_id,razorpay_order_id:yi.razorpay_order_id,razorpay_signature:yi.razorpay_signature,billId:tt})}),Td=await uo.json();if(uo.ok&&Td.success)a&&a(tt),i&&i(),setTimeout(()=>window.print(),200);else throw new Error(Td.message||"Payment verification failed.")}catch(uo){z(`Payment verification failed: ${uo.message}. Contact support.`)}finally{ie(!1)}},prefill:{name:(b==null?void 0:b.name)||""},notes:{bill_id:tt,patient_id:t},theme:{color:"#3399cc"},modal:{ondismiss:function(){z("Payment cancelled."),ie(!1)}}};if(window.Razorpay)new window.Razorpay(ba).open();else throw new Error("Razorpay SDK not loaded.")}catch(St){z(`Failed to initiate online payment: ${St.message}`),ie(!1)}},Tn=async()=>{if(!e){z("Bill ID is missing.");return}const tt=ae?va:parseFloat(Ce);if(isNaN(tt)||tt<=0){z("Please enter a valid positive payment amount.");return}J(!0),z(null);try{if(ae){for(const gt of ee)if(gt.amount>0){const St=await se(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:gt.amount,payment_mode:gt.method})});if(!St.ok){const Ot=await St.json();throw new Error(Ot.message||`Failed to record ${gt.method} payment`)}}}else{const gt={amount_paid:tt,payment_mode:me},St=await se(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(gt)}),Ot=await St.json();if(!St.ok)throw new Error(Ot.message||`Failed to record payment (Status: ${St.status})`)}Ae(""),ae&&(Ne([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),ue(!1)),i?i():console.log("Payment recorded.")}catch(gt){z(`Failed to record payment: ${gt.message}`)}finally{J(!1)}},va=ee.reduce((tt,gt)=>tt+gt.amount,0),Ya=Math.abs(va-(bt==="create"?kt:va))<.01,Br=ae?ee.some(tt=>tt.method==="credit"):bt==="create"?F==="credit":me==="credit",Aa=async()=>{if(bt==="view_pay")return;if(!t){z("Patient ID is missing for creating a bill.");return}if(S.length===0){z("Cannot finalize an empty bill.");return}if(ae&&Math.abs(va-kt)>.01){z(`Split payment total (${va.toFixed(2)}) must match the bill total (${kt.toFixed(2)}).`);return}ie(!0),z(null);const tt=kt,gt=S.map(({id:Ot,...Nn})=>Nn),St={patientId:t,queueId:n||null,items:gt,amount:tt,paymentMode:ae?"split":F==="online"?"online":F,type:o,related_id:l||g||null,status:F==="online"?"pending":ae||F?"paid":"pending",discountPercentage:$,labOrderId:g||null};if(ae&&(St.splitPayments=ee.map(Ot=>({method:Ot.method,amount:Ot.amount}))),F==="online"&&!ae)try{const Ot=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Nn=await Ot.json();if(!Ot.ok)throw new Error(Nn.message||"Failed to create pending bill.");er(Nn.id,Math.round(tt*100))}catch(Ot){z(`Failed to create pending bill: ${Ot.message}`),ie(!1)}else{if(!F&&!ae){z("Payment mode required."),ie(!1);return}setTimeout(()=>window.print(),200);try{const Ot=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Nn=await Ot.json();if(!Ot.ok)throw new Error(Nn.message||"Failed to create bill.");if(Br&&t){const Ln=ae?ee.filter(ba=>ba.method==="credit").reduce((ba,yi)=>ba+yi.amount,0):F==="credit"?tt:0;if(Ln>0)try{await se(`/api/patient-debts/${t}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Ln,related_bill_id:Nn.id,notes:`Bill #${Nn.id} (Credit Part)`})})}catch(ba){console.error("Failed to create debt entry:",ba)}}a&&a(Nn.id),ie(!1)}catch(Ot){z(`Failed to process bill: ${Ot.message}`),ie(!1)}}},zi=(K==null?void 0:K.status)??c,Rn=bt==="view_pay"&&K&&zi==="pending";return!t&&!e?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):V||bt==="view_pay"&&ce?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):bt==="view_pay"&&!K&&!ce&&Y?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",Y]}):bt==="create"&&!b&&!V&&Y?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",Y]}):r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:We?`${We}`:"Bill"}),(wt||Xe)&&r.jsxs("div",{className:"clinic-details-print",children:[wt&&r.jsx("span",{className:"small-text clinic-address",children:wt}),Xe&&r.jsx("span",{className:"small-text clinic-notes",children:Xe})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient"]})," ",(b==null?void 0:b.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]}),K&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"# Invoice"})," ",sIe(K.id)]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",b==null?void 0:b.name]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," ID"]})," ",b==null?void 0:b.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Age/Gender"]})," ",(b==null?void 0:b.age)??"N/A"," / ",(b==null?void 0:b.gender)??"N/A"]}),bt==="view_pay"&&K&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(kc,{size:16})," Bill ID"]})," ",K.id]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h2",{children:"Bill Items"}),bt==="create"&&o==="pharmacy"&&!f&&S.some(tt=>tt.drug_id!=null)&&r.jsxs("button",{onClick:()=>Tt(S),disabled:W,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[r.jsx(wE,{size:14,className:`lucide ${W?"animate-spin":""}`}),W?"Refreshing...":"Refresh"]})]}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"}),bt==="create"&&!f&&r.jsx("th",{className:"no-print",children:"Action"})]})}),r.jsxs("tbody",{children:[bt==="create"&&S.map((tt,gt)=>r.jsxs("tr",{children:[r.jsx("td",{children:gt+1}),r.jsx("td",{children:tt.name}),r.jsx("td",{children:tt.quantity}),r.jsxs("td",{children:["",tt.price.toFixed(2)]}),r.jsxs("td",{children:["",tt.total.toFixed(2)]}),!f&&r.jsx("td",{className:"no-print",children:typeof tt.id=="number"&&tt.name!=="Consultation Fee"?r.jsxs("button",{onClick:()=>jt(tt.id),className:"remove-item-button",title:"Remove",children:[" ",r.jsx(Ft,{size:16})," "]}):r.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",r.jsx(UX,{size:14})," "]})})]},tt.id)),bt==="view_pay"&&K&&K.items.map((tt,gt)=>r.jsxs("tr",{children:[r.jsx("td",{children:gt+1}),r.jsx("td",{children:tt.name}),r.jsx("td",{children:tt.quantity}),r.jsxs("td",{children:["",tt.price.toFixed(2)]}),r.jsxs("td",{children:["",(tt.total??tt.price*tt.quantity).toFixed(2)]})]},gt)),(bt==="create"&&S.length===0||bt==="view_pay"&&(K==null?void 0:K.items.length)===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"20px"},children:"No items added."})})]})]}),bt==="create"&&!f&&r.jsxs("div",{className:"add-item-form no-print",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Item Description"}),r.jsx("input",{type:"text",value:C,onChange:tt=>P(tt.target.value),placeholder:"Service Name",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"80px"},children:[r.jsx("label",{children:"Qty"}),r.jsx("input",{type:"number",min:"1",value:I,onChange:tt=>L(parseInt(tt.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"100px"},children:[r.jsx("label",{children:"Price ()"}),r.jsx("input",{type:"number",value:k,onChange:tt=>E(tt.target.value),placeholder:"0.00",className:"custom-text-input"})]}),r.jsx("button",{onClick:Ve,className:"add-item-button",children:"Add Item"}),o==="consultation"&&r.jsxs("div",{className:"default-fee-section",style:{marginLeft:"auto",display:"flex",alignItems:"flex-end",gap:"5px"},children:[r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{children:"Default Fee"}),r.jsx("input",{type:"number",value:fe,onChange:tt=>Ee(tt.target.value),style:{width:"80px",padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}})]}),r.jsx("button",{onClick:ln,className:"secondary-button",style:{padding:"10px"},children:r.jsx(cs,{size:16})})]})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Kn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",$,"%)"]}),r.jsxs("span",{children:["- ",vt.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",kt.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px dashed #ddd"},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9em",marginBottom:"5px"},children:"Payment Mode:"}),ae?ee.map((tt,gt)=>tt.amount>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:tt.method.toUpperCase()}),r.jsxs("span",{children:["",tt.amount.toFixed(2)]})]},gt)):r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:F?F.toUpperCase():"CASH"}),r.jsxs("span",{children:["",kt.toFixed(2)]})]}),bt==="view_pay"&&Ue&&Ue.length>0&&r.jsxs("div",{style:{marginTop:"5px"},children:[r.jsx("div",{style:{fontSize:"0.8em",color:"#666"},children:"Payment History:"}),Ue.map(tt=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8em"},children:[r.jsxs("span",{children:[tt.payment_mode," (",new Date(tt.payment_date).toLocaleDateString(),")"]}),r.jsxs("span",{children:["",tt.amount_paid]})]},tt.id))]})]}),Br&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",fontSize:"0.85em",fontWeight:500},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Prev. Debt:"}),r.jsxs("span",{children:["",(oe||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Net Payable:"}),r.jsxs("span",{children:["",((oe||0)+(ae?ee.filter(tt=>tt.method==="credit").reduce((tt,gt)=>tt+gt.amount,0):F==="credit"?kt:0)).toFixed(2)]})]})]})]}),ct&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(La,{value:ct,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Kn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),bt==="create"&&!f?r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:$,onChange:tt=>q(parseFloat(tt.target.value)||0),min:"0",max:"100",className:"discount-input-total"}),"%"]}):r.jsxs("span",{children:[$,"%"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Amount"}),r.jsxs("span",{children:["- ",vt.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",kt.toFixed(2)]})]}),bt==="view_pay"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"summary-row",style:{color:"green"},children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Dt.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",style:{color:"red",fontWeight:"bold"},children:[r.jsx("span",{children:"Balance Due"}),r.jsxs("span",{children:["",Vt.toFixed(2)]})]})]}),r.jsx("div",{className:"qr-code-container",children:ct?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:ct,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available."})}),bt==="create"&&r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>ue(!ae),disabled:f||G,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ae?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ae?"rgba(79, 172, 254, 0.1)":"transparent",color:ae?"#4facfe":"#666",cursor:f||G?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(zo,{size:14})," Split"]})]}),ae?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",va.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:ee.map((tt,gt)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:gt+1}),r.jsxs("select",{value:tt.method,onChange:St=>xe(tt.id,"method",St.target.value),className:"split-payment-select",disabled:G,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:tt.amount||"",onChange:St=>xe(tt.id,"amount",parseFloat(St.target.value)||0),className:"split-payment-input",disabled:G})]}),ee.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ne(tt.id,kt),className:"split-payment-btn split-payment-btn-fill",title:"Fill",children:"Buy"}),r.jsx("button",{type:"button",onClick:()=>Fe(tt.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Vn,{size:12})})]})]},tt.id))}),ee.length<5&&r.jsxs("button",{type:"button",onClick:Te,className:"split-payment-add-btn",disabled:G,children:[r.jsx(Hn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Required:"}),r.jsxs("span",{style:{fontWeight:600},children:["",kt.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ya?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:Ya?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",va.toFixed(2)]})]})]})]}):r.jsxs("select",{id:"paymentMode",value:F,onChange:tt=>H(tt.target.value),className:"payment-mode-select",disabled:f||G,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"}),r.jsx("option",{value:"online",children:"Online (Razorpay)"})]})]}),bt==="create"&&F==="credit"&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),De?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:oe&&oe>0?"#dc3545":"#28a745"},children:["",(oe||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"This Bill:"}),r.jsxs("strong",{children:["+ ",kt.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((oe||0)+kt).toFixed(2)]})]})]})]}),bt==="create"&&!f&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:Aa,className:"primary-button",disabled:G||S.length===0,children:G?"Processing...":"Finalise and Bill"})}),bt==="view_pay"&&r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:()=>window.print(),className:"secondary-button",children:"Print Bill"}),Rn&&Vt>0&&r.jsxs("div",{className:"payment-recording-section",style:{marginTop:"20px",borderTop:"1px dashed #ccc",paddingTop:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("h3",{style:{fontSize:"1em",marginBottom:"0"},children:"Record Payment"}),r.jsxs("button",{type:"button",onClick:()=>ue(!ae),disabled:le,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",fontSize:"0.75rem",border:ae?"1px solid #4facfe":"1px solid #ccc",borderRadius:"4px",backgroundColor:ae?"rgba(79, 172, 254, 0.1)":"transparent",color:ae?"#4facfe":"#666",cursor:le?"not-allowed":"pointer"},children:[r.jsx(zo,{size:12})," Split"]})]}),ae?r.jsxs("div",{className:"split-payment-wrapper",style:{marginBottom:"10px",fontSize:"0.9em"},children:[r.jsx("div",{className:"split-payment-list",children:ee.map(tt=>r.jsxs("div",{className:"split-payment-row",children:[r.jsxs("select",{value:tt.method,onChange:gt=>xe(tt.id,"method",gt.target.value),className:"split-payment-select",disabled:le,style:{padding:"4px"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Ins."}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",style:{left:"5px",fontSize:"0.8em"},children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:tt.amount||"",onChange:gt=>xe(tt.id,"amount",parseFloat(gt.target.value)||0),className:"split-payment-input",style:{paddingLeft:"15px"},disabled:le})]}),ee.length>2&&r.jsx("button",{type:"button",onClick:()=>Fe(tt.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Vn,{size:12})})]},tt.id))}),ee.length<5&&r.jsxs("button",{type:"button",onClick:Te,className:"split-payment-add-btn",disabled:le,style:{fontSize:"0.8em",padding:"4px"},children:[r.jsx(Hn,{size:12})," Add"]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em",marginTop:"5px",color:"#666"},children:[r.jsxs("span",{children:["Paying: ",r.jsxs("strong",{children:["",va.toFixed(2)]})]}),r.jsxs("span",{style:{color:va>Vt?"red":"inherit"},children:["Max: ",Vt.toFixed(2)]})]})]}):r.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[r.jsx("input",{type:"number",value:Ce,onChange:tt=>Ae(tt.target.value),placeholder:`Max ${Vt.toFixed(2)}`,className:"custom-text-input",style:{flex:1}}),r.jsxs("select",{value:me,onChange:tt=>ye(tt.target.value),className:"custom-select-input",style:{width:"auto"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsx("button",{onClick:Tn,disabled:le||ae&&va<=0||!ae&&(!Ce||parseFloat(Ce)<=0),className:"primary-button",style:{width:"100%",fontSize:"0.9em"},children:le?"Recording...":"Record Payment"})]})]})]})})]}),r.jsxs("div",{className:"amount-in-words-print print-only",children:[r.jsx("strong",{children:"Amount in Words:"})," ",iIe(bt==="view_pay"&&K?K.amount:kt)]}),r.jsxs("div",{className:"terms-conditions-print print-only",children:[r.jsx("h4",{children:"Terms & Conditions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Goods once sold will not be taken back or exchanged."}),r.jsx("li",{children:"All disputes are subject to local jurisdiction."}),r.jsx("li",{children:"Please retain this bill for future reference."})]})]}),r.jsxs("div",{className:"signature-section-print print-only",children:[r.jsx("div",{className:"receiver-sign",children:r.jsx("div",{className:"sign-line",children:"Receiver's Signature"})}),r.jsxs("div",{className:"authorized-sign",children:[r.jsxs("div",{className:"for-clinic",children:["For ",We||"Clinic"]}),r.jsx("div",{className:"sign-line",children:"Authorised Signatory"})]})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{className:"thank-you",children:"Thank you for your visit!"}),r.jsx("p",{className:"computer-generated",children:"This is a computer generated invoice and does not require a physical signature."})]})]})]})},lIe=()=>{const t=Lt(),e=$r(),{patientId:n,queueId:a,patientName:i,initialItems:s,billType:o,relatedId:l,initialStatus:c,initialDiscountPercentage:d,doctorId:f,billId:p,labOrderId:g}=e.state||{},[x,b]=v.useState(null),[j,S]=v.useState(null),[_,T]=v.useState(null),[C,P]=v.useState(null),[k,E]=v.useState(null),[I,L]=v.useState(null),[$,q]=v.useState(null),[F,H]=v.useState(null),[V,X]=v.useState(!0),[Y,z]=v.useState(null),[G,ie]=v.useState(i||"");v.useEffect(()=>{if(!n){console.error("BillingPage loaded without required patientId in location state."),t("/");return}(async()=>{X(!0),z(null);try{let Ie=n,Ue=s||null,ze=c||null,Le=o||null,be=l||null,Ce=d!==void 0?parseFloat(d):null,Ae=i||null,me=null;if(p){console.log(`Fetching details for Bill ID: ${p}`);const ye=await se(`/api/bills/${p}`);if(!ye.ok){const J=await ye.json().catch(()=>({message:`Failed to fetch bill details for ID ${p}`}));throw new Error(J.message||`Failed to fetch bill details (Status: ${ye.status})`)}const le=await ye.json();if(console.log("Fetched Bill Data:",le),Ue=le.bill.items||[],ze=le.bill.status||"pending",Le=le.bill.type||null,be=le.bill.related_id||null,Ce=le.bill.discount_percentage!==void 0&&le.bill.discount_percentage!==null?parseFloat(le.bill.discount_percentage):0,Ie=le.bill.patient_id,P(Ue),E(ze),L(Le),q(be),H(Ce),Ie){const J=await se(`/api/patients/${Ie}`);if(J.ok){const ae=await J.json();Ae=ae.name,me=ae.phone??null,T(ae.insurance_type??null),ie(Ae),S(me)}else console.warn(`Could not fetch patient details for ID ${Ie} from bill.`),ie("Patient (Not Found)")}else console.warn(`Bill ${p} does not have an associated patient_id.`),ie("Patient (Unknown)")}else if(g){console.log(`Fetching details for Lab Order ID: ${g}`);const ye=await se(`/api/lab/${g}`);if(!ye.ok){let J=`Failed to fetch lab order details (Status: ${ye.status} ${ye.statusText})`;try{J=(await ye.json()).message||J}catch{console.error("Response was not valid JSON:",await ye.text())}throw new Error(J)}const le=await ye.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(le,null,2)),Ue=(le.tests||[]).filter(J=>J&&typeof J.name=="string"&&J.price!==void 0&&J.id!==void 0).map(J=>{const ae=parseFloat(J.price||"0"),ue=!isNaN(ae)&&isFinite(ae)?ae:0;return{item_id:J.id,name:J.name,price:ue,quantity:1,total:ue*1,type:"lab_test"}}),Ue&&Ue.length===0&&(le.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",le.tests),z(J=>`${J?J+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),ze="pending",Le="lab",be=g,Ie=le.patient_id,P(Ue),E(ze),L(Le),q(be),Ie){const J=await se(`/api/patients/${Ie}`);if(J.ok){const ae=await J.json();Ae=ae.name,me=ae.phone??null,T(ae.insurance_type??null),ie(Ae),S(me)}else console.warn(`Could not fetch patient details for ID ${Ie} from lab order.`),ie("Patient (Not Found)")}else console.warn(`Lab Order ${g} does not have an associated patient_id.`),ie("Patient (Unknown)")}else if(P(s||null),E(c||null),L(o||null),q(l||null),H(d!==void 0?parseFloat(d):null),ie(i||`ID ${n}`),Ie){const ye=await se(`/api/patients/${Ie}`);if(ye.ok){const le=await ye.json();S(le.phone??null),T(le.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${Ie}.`)}if(a){const ye=await se(`/api/queue/${a}`);if(ye.ok){const le=await ye.json();b(le.token_number)}else console.warn(`Could not fetch queue details for ID ${a}.`)}}catch(Ie){console.error("Error fetching billing page details:",Ie),z(`Failed to load details: ${Ie.message}`),P(null),E(null),L(null),q(null),ie(i||""),S(null),b(null)}finally{X(!1)}})()},[n,p,g,a,t]);const W=K=>{console.log(`Billing process completed for patient ID ${n}. New Bill ID: ${K}`),t(-1)},B=()=>{console.log(`Bill updated for patient ID ${n}.`),t(-1)};if(!n)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(PI,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),r.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(V)return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx(te,{width:80,height:32})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx(te,{width:300,height:32})}),r.jsxs("div",{className:"patient-info-bar mb-6",style:{display:"flex",gap:"1rem",padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:120,height:20}),r.jsx(te,{width:140,height:20})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 space-y-4",children:[r.jsx(te,{width:"100%",height:200,className:"rounded-lg"}),r.jsx(te,{width:"100%",height:150,className:"rounded-lg"})]}),r.jsx("div",{className:"space-y-4",children:r.jsx(te,{width:"100%",height:300,className:"rounded-lg"})})]})]})]});if(Y)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(PI,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),r.jsx("p",{className:"text-sm text-center mb-4",children:Y}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>t(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const je=(k??c)==="paid";return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(on,{size:20,className:"lucide"})})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsxs("h3",{className:"billing-page-title",children:[p?"Bill Details":g?"Create Lab Bill":"Create Bill"," for Patient: ",G||`ID ${n}`]}),r.jsxs("div",{className:"patient-info-bar",children:[x!==null&&r.jsxs("span",{children:[r.jsx(Ka,{size:14,className:"lucide"})," Token: ",x]}),j&&r.jsxs("span",{children:[r.jsx(tg,{size:14,className:"lucide"})," Phone: ",j]}),g&&r.jsxs("span",{className:"lab-order-info",children:[r.jsx(ls,{size:14,className:"lucide"})," Lab Order: ",g.substring(0,8),"..."]}),!j&&x===null&&!g&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),_&&r.jsxs("span",{className:"insurance-info",children:[r.jsx(IJ,{size:14,className:"lucide"})," Insurance: ",_.replace(/_/g," ").replace(/\b\w/g,K=>K.toUpperCase())]}),!j&&x===null&&!g&&!_&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),r.jsx(oIe,{patientId:n,labOrderId:g,queueId:a,onBillCreated:W,onBillUpdated:B,initialItems:C??s,billType:I??o,relatedId:$??l,initialStatus:k??c,initialDiscountPercentage:F??d,readOnlyMode:je,doctorId:f,patientInsuranceType:_??void 0})]})]})},cIe=()=>{const{patientId:t}=Fa(),e=Lt(),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,d]=v.useState("");return v.useEffect(()=>{(async()=>{if(!t){l("Patient ID not provided in URL.");return}s(!0),l(null),a([]);try{try{const x=await se(`/api/patients/${t}`);if(x.ok){const b=await x.json();d(b.name)}}catch(x){console.warn("Could not fetch patient name:",x)}console.log(`Fetching pharmacy orders for patient ID: ${t}`);const p=await se(`/api/pharmacy-orders/patient/${t}`);if(!p.ok){const x=await p.json().catch(()=>({}));throw new Error(x.message||`HTTP error! status: ${p.status}`)}const g=await p.json();console.log("Fetched Pharmacy Orders:",g),a(g||[])}catch(p){console.error("Error fetching pharmacy orders:",p),l(`Failed to load pharmacy orders: ${p.message}`)}finally{s(!1)}})()},[t]),r.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(on,{size:16,className:"mr-1"}),"Back"]}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[r.jsx(ud,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",c&&`for ${c}`]}),r.jsx("div",{})," "]}),i&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(te,{width:150,height:20}),r.jsx(te,{width:100,height:20})]}),r.jsx(te,{width:200,height:20,className:"mb-2"}),r.jsx(te,{width:180,height:20,className:"mb-3"}),r.jsx(te,{width:120,height:24,className:"mb-2"}),r.jsxs("div",{className:"space-y-1 ml-4",children:[r.jsx(te,{width:"80%",height:16}),r.jsx(te,{width:"70%",height:16}),r.jsx(te,{width:"60%",height:16})]})]},f))}),o&&r.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:o}),!i&&n.length===0&&!o&&r.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!i&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Date:"})," ",new Date(f.date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm font-medium capitalize",children:[r.jsx("strong",{children:"Status:"})," ",f.status]})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Prescribed By:"})," ",f.prescribedBy||"N/A"]}),f.dispensedBy&&r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Dispensed By:"})," ",f.dispensedBy]}),r.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),r.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:f.medications.map((p,g)=>r.jsxs("li",{children:[p.name," - Qty: ",p.quantity,p.tabletsPerDay&&` (${p.tabletsPerDay} per day`,p.numberOfDays&&` for ${p.numberOfDays} days)`,!p.tabletsPerDay&&p.numberOfDays&&` (for ${p.numberOfDays} days)`,p.tabletsPerDay&&!p.numberOfDays&&")"]},g))})]},f.id))})]})},uIe=()=>{const t=Lt(),e=$r(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState([]),[c,d]=v.useState(""),[f,p]=v.useState([]),[g,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState(null),[T,C]=v.useState(!0),[P,k]=v.useState(""),[E,I]=v.useState([]),[L,$]=v.useState(!1),[q,F]=v.useState(null),[H,V]=v.useState(!1),[X,Y]=v.useState(!1),[z,G]=v.useState([]),[ie,W]=v.useState(!1),[B,ce]=v.useState(null),je=/^\+?[0-9\s\-().]{7,20}$/,K=/^[a-zA-Z\s'-]{2,}$/,Ie=v.useCallback(async()=>{try{const ne=await se("/api/drugs");if(!ne.ok)throw new Error("Failed to fetch drugs");const oe=await ne.json(),_e=oe.drugs||oe||[];s(_e)}catch(ne){console.error("Failed to fetch available drugs:",ne),x("Could not load drug list. "+ne.message)}},[]),Ue=v.useCallback(async ne=>{W(!0),ce(null);try{const oe=await se(`/api/pharmacy-orders/patient/${ne}`);if(!oe.ok){const De=await oe.json().catch(()=>({}));throw new Error(De.message||`HTTP error! status: ${oe.status}`)}const _e=await oe.json();G(_e||[])}catch(oe){console.error("Failed to fetch previous pharmacy orders:",oe),ce(`Could not load previous orders: ${oe.message}`)}finally{W(!1)}},[]);v.useEffect(()=>{var ne;Ie(),(ne=e.state)!=null&&ne.patient?Ce(e.state.patient):C(!0)},[Ie,e.state]),v.useEffect(()=>{n!=null&&n.id?Ue(n.id):G([])},[n,Ue]);const ze=v.useMemo(()=>new lo(i,{keys:["name","brand_name"],threshold:.3}),[i]);v.useEffect(()=>{if(!c){p([]);return}const ne=ze.search(c).map(oe=>oe.item);p(ne.slice(0,10))},[c,ze]);const Le=v.useMemo(()=>Uc(async ne=>{if(ne.trim().length<2){I([]),$(!1),F(null);return}$(!0),F(null);try{const oe=new URLSearchParams({search:encodeURIComponent(ne),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),_e=await se(`/api/patients?${oe.toString()}`);if(!_e.ok){const Q=await _e.text();throw new Error(`API Error (${_e.status}): ${Q||_e.statusText}`)}const De=await _e.json();I(De.patients)}catch(oe){console.error("Error searching patients:",oe),F(oe.message||"Failed to search patients."),I([])}finally{$(!1)}},300),[je]),be=ne=>{const oe=ne.target.value;k(oe),V(je.test(oe)),Y(K.test(oe)&&!je.test(oe)),$(!0),Le(oe)},Ce=v.useCallback(ne=>{a(ne),C(!1),k(""),I([]),F(null)},[]),Ae=v.useCallback(async ne=>{if(!P||ne==="phone"&&!H||ne==="name"&&!X){F(`Invalid ${ne} to create a new patient.`);return}$(!0),F(null);try{const _e=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ne==="name"?P:"direct pharmacy",phone:ne==="phone"?P:null,age:null,gender:null,token:null})});if(!_e.ok){const Q=await _e.json();throw new Error(Q.message||`Failed to create patient: ${_e.statusText}`)}const De=await _e.json();alert(`New patient "${De.name}" created with ${ne==="phone"?`phone ${De.phone}`:`name ${De.name}`}.`),Ce(De)}catch(oe){console.error("Error creating new patient:",oe),F(oe.message||"Failed to create new patient.")}finally{$(!1)}},[P,H,X,Ce]),me=()=>{a(null),C(!0),l([]),x(null),G([])},ye=ne=>{if(o.some(oe=>oe.drug_id===ne.id)){const oe=ne.name||ne.brand_name||"This drug";x(`${oe} is already in the order.`),setTimeout(()=>x(null),3e3),d(""),p([]);return}l(oe=>[...oe,{drug_id:ne.id,name:ne.name||ne.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,tabletsPerDay:1,numberOfDays:1,mrp:Number(ne.mrp)||0,originalMrp:Number(ne.mrp)||0,stock:ne.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(ne.mrp)||0)/(J(ne.pack)||1),pack:ne.pack}]),d(""),p([])},le=()=>{const ne=c.trim();if(!ne){x("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>x(null),3e3);return}t("/dashboard/inventory/add",{state:{initialDrugName:ne}}),d(""),p([])},J=ne=>{if(!ne)return null;const oe=ne.match(/(?:\d+x)?(\d+)/);return oe?parseInt(oe[1],10):null},ae=ne=>{l(oe=>oe.filter(_e=>(_e.drug_id??_e.name)!==ne))},ue=(ne,oe)=>{l(_e=>_e.map(De=>{if((De.drug_id??De.name)===ne&&De.isLoose){const ge=J(De.pack),de=Math.max(0,oe),fe=de*(ge??1)+(De.looseUnits??0);return{...De,loosePacks:de,looseQuantity:fe,pack_quantity:de}}return De}))},ee=(ne,oe)=>{l(_e=>_e.map(De=>{if((De.drug_id??De.name)===ne&&De.isLoose){const ge=J(De.pack),de=Math.max(0,oe),fe=(De.loosePacks??0)*(ge??1)+de;return{...De,looseUnits:de,looseQuantity:fe}}return De}))},Ne=ne=>{const oe=[];ne.medications.forEach(_e=>{if(o.find(Q=>Q.drug_id&&_e.drug_id&&Q.drug_id===_e.drug_id||Q.name.toLowerCase()===_e.name.toLowerCase()))l(Q=>Q.map(ge=>{if(ge.drug_id&&_e.drug_id&&ge.drug_id===_e.drug_id||ge.name.toLowerCase()===_e.name.toLowerCase()){const de=(ge.pack_quantity??0)+(_e.pack_quantity??0),fe=(ge.loose_quantity??0)+(_e.loose_quantity??0),Ee=_e.tabletsPerDay??ge.tabletsPerDay,Ye=_e.numberOfDays??ge.numberOfDays,$e=J(ge.pack),We=de*($e??1)+fe;return{...ge,pack_quantity:de,loose_quantity:fe,directions_to_use:_e.directions_to_use??ge.directions_to_use,tabletsPerDay:Ee,numberOfDays:Ye,looseQuantity:We,loosePacks:Math.floor(We/($e??1)),looseUnits:We%($e??1)}}return ge}));else{let Q=_e.drug_id,ge=_e.drug_id?i.find(de=>de.id===_e.drug_id):void 0;if(!Q&&_e.name){const de=i.find(fe=>fe.name&&fe.name.toLowerCase()===_e.name.toLowerCase());de&&(Q=de.id,ge=de)}oe.push({drug_id:Q,name:_e.name,pack_quantity:_e.pack_quantity??0,loose_quantity:_e.loose_quantity??0,directions_to_use:_e.directions_to_use,tabletsPerDay:_e.tabletsPerDay??1,numberOfDays:_e.numberOfDays??1,mrp:ge?ge.mrp:_e.pack_price,originalMrp:ge?ge.mrp:_e.pack_price,stock:ge?ge.stock:_e.stock,isLoose:!0,loosePacks:0,looseUnits:(_e.pack_quantity??0)*(J((ge==null?void 0:ge.pack)||_e.pack)??1)+(_e.loose_quantity??0),looseQuantity:(_e.pack_quantity??0)*(J((ge==null?void 0:ge.pack)||_e.pack)??1)+(_e.loose_quantity??0),pricePerLooseUnit:(ge?Number(ge.mrp):Number(_e.pack_price)||0)/(J((ge==null?void 0:ge.pack)||_e.pack)||1),pack:(ge==null?void 0:ge.pack)||_e.pack})}}),l(_e=>[..._e,...oe]),ne.prescriptionForUnavailableDrugs&&(!S||!S.includes(ne.prescriptionForUnavailableDrugs))&&_(_e=>_e?`${_e}

-- From Order ${ne.id.substring(0,8)} --
${ne.prescriptionForUnavailableDrugs}`:ne.prescriptionForUnavailableDrugs),x("Medications from previous order added to current order."),setTimeout(()=>x(null),3e3)},Te=async ne=>{if(ne.preventDefault(),x(null),j(!0),!n){x("No patient selected for the order."),j(!1);return}if(o.length===0&&!(S!=null&&S.trim())){x("Please add at least one medication or provide a prescription for unavailable drugs."),j(!1);return}const oe=o.filter(De=>{const Q=De.looseQuantity??0;return Q<=0||De.stock!==void 0&&Q>De.stock});if(oe.length>0){x(`Invalid quantity or insufficient stock for: ${oe.map(De=>De.name).join(", ")}`),j(!1);return}const _e={patient_id:n.id,items:o.map(De=>{const Q=De.mrp??0,ge=De.pricePerLooseUnit??0,de=ge*(De.looseQuantity??0);return{drug_id:De.drug_id===void 0?null:De.drug_id,name:De.name,pack_quantity:De.loosePacks??0,loose_quantity:De.looseUnits??0,pack_price:Q,loose_price:ge,total_price:de,price:De.originalMrp??0,directions_to_use:De.directions_to_use===void 0?null:De.directions_to_use,tabletsPerDay:De.tabletsPerDay??1,numberOfDays:De.numberOfDays??1}}),order_total:Fe,prescription_for_unavailable_drugs:S};try{const De=await se("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)});if(!De.ok){const Q=await De.json();throw new Error(Q.message||`Failed to create order: ${De.statusText}`)}t(-1)}catch(De){console.error("Failed to create pharmacy order:",De),x(De.message||"Failed to create order. Please try again.")}finally{j(!1)}},Fe=v.useMemo(()=>o.reduce((ne,oe)=>{const _e=oe.isLoose?oe.pricePerLooseUnit??0:oe.mrp??0,De=oe.isLoose?oe.looseQuantity??0:oe.quantity??0;return ne+_e*De},0),[o]),xe=(Number(Fe)||0).toFixed(2);return r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",r.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[r.jsx(on,{size:20})," "]}),r.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),T&&r.jsxs("div",{className:"content-section",children:[" ",r.jsx("h3",{className:"section-title",children:"Select Patient"})," ",r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:P,onChange:be,className:"custom-text-input mt-1",autoFocus:!0})]}),q&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:q})," ",L?r.jsx("div",{className:"patient-search-results items-loading mt-1",children:[1,2,3].map(ne=>r.jsx("div",{className:"px-4 py-3 border-b border-gray-100 last:border-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(te,{width:40,height:20}),r.jsx(te,{width:120,height:20})]}),r.jsx("div",{className:"mt-1 sm:mt-0",children:r.jsx(te,{width:150,height:16})})]})},ne))}):E.length>0&&r.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",r.jsxs("ul",{children:[" ",E.map(ne=>r.jsxs("li",{onClick:()=>Ce({id:ne.id,name:ne.name,token:ne.token,age:ne.age,gender:ne.gender,phone:ne.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",ne.token]}),ne.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[ne.age?`${ne.age} yrs`:"Age N/A",ne.gender?` / ${ne.gender}`:" / Gender N/A",ne.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",ne.phone]})]})]}),ne.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",ne.phone]})]},ne.id))]})]}),P.length>=2&&!L&&E.length===0&&!q&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',P,'".']}),H&&r.jsx("button",{type:"button",onClick:()=>Ae("phone"),className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:L,children:'Create "direct pharmacy" Patient with this Phone'}),X&&r.jsx("button",{type:"button",onClick:()=>Ae("name"),className:"create-patient-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-2",disabled:L,children:"Create Patient with this Name"})]}),P.length<2&&!L&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),n&&!T&&r.jsxs("form",{onSubmit:Te,children:[r.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:"section-title",children:[" ","Patient: ",r.jsx("span",{className:"font-normal",children:n.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:n.token??"N/A"}),n.age&&`    Age: ${n.age}`,n.gender&&`    Gender: ${n.gender}`,n.phone&&`    Phone: ${n.phone}`]}),r.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${n.id}`,children:["ID: ",n.id.substring(0,12),"..."]})]}),r.jsx("button",{type:"button",onClick:me,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),g&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:g})," ",ie?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:[1,2].map(ne=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx(te,{width:180,height:20}),r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx(te,{width:"90%",height:16}),r.jsx(te,{width:"70%",height:16})]}),r.jsx(te,{width:"100%",height:36,style:{borderRadius:"6px"}})]},ne))})]}):B?r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:B}):z.length>0?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:z.map(ne=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"font-semibold text-gray-800",children:["Order Date: ",new Date(ne.date).toLocaleDateString()]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ne.status==="dispensed"?"bg-green-100 text-green-800":ne.status==="pending"?"bg-yellow-100 text-yellow-800":ne.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:ne.status.charAt(0).toUpperCase()+ne.status.slice(1)})]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-3",children:ne.medications.map((oe,_e)=>r.jsxs("li",{children:[r.jsx("strong",{children:oe.name}),": ",oe.quantity," Qty",oe.directions_to_use&&` - Directions: ${oe.directions_to_use}`]},_e))}),ne.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Prescription for Unavailable:"}),r.jsxs("div",{className:"prose prose-sm max-w-none",children:[" ",r.jsx(wf,{remarkPlugins:[Nf],children:ne.prescriptionForUnavailableDrugs})]})]}),r.jsxs("button",{type:"button",onClick:()=>Ne(ne),className:"add-previous-meds-button mt-3 px-3 py-1.5 text-sm font-medium rounded-md flex items-center justify-center",children:[r.jsx(Hn,{size:16,className:"mr-1"})," Add Medications to Current Order"]})]},ne.id))})]}):n&&r.jsx("div",{className:"content-section text-center py-4 mt-4",children:r.jsx("p",{className:"text-gray-500",children:"No previous orders found for this patient."})}),r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:S??"",onChange:ne=>_(ne.target.value||null),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[" ",r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:c,onChange:ne=>d(ne.target.value),className:"custom-text-input mt-1"}),c&&r.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",f.length>0&&r.jsxs("ul",{children:[" ",f.map(ne=>r.jsxs("li",{onClick:()=>ye(ne),className:"cursor-pointer select-none relative",children:[r.jsx("span",{className:"font-medium block truncate",children:ne.name||ne.brand_name}),r.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",ne.stock??"N/A",", MRP: ",Number(ne.mrp||0).toFixed(2),")"]})]},ne.id))]}),c.trim()&&!i.some(ne=>ne.name&&ne.name.toLowerCase()===c.trim().toLowerCase()||ne.brand_name&&ne.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsxs("div",{onClick:le,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',c.trim(),'" as new item']}),c.trim()&&f.length===0&&i.some(ne=>ne.name&&ne.name.toLowerCase()===c.trim().toLowerCase()||ne.brand_name&&ne.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",r.jsx("h4",{className:"section-title",children:"Order Items"})," ",o.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),o.length>0&&r.jsx("ul",{className:"space-y-4",children:o.map(ne=>{const oe=ne.drug_id??ne.name,_e=!ne.drug_id;return r.jsxs("li",{className:"order-item-card text-sm",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsxs("span",{className:`item-name block text-base ${_e?"custom":""}`,children:[" ",ne.name,_e?" (custom)":""]}),!_e&&ne.pricePerLooseUnit!==void 0&&r.jsxs("span",{className:"item-details text-xs",children:[" ","@ ",(Number(ne.pricePerLooseUnit)||0).toFixed(2)," per loose unit"]}),ne.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${ne.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",ne.stock,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-packs-${oe}`,className:"dosage-label",children:"Packs:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>ue(oe,(ne.loosePacks??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-packs-${oe}`,min:"0",value:ne.loosePacks||"",onChange:De=>{const Q=parseInt(De.target.value,10);ue(oe,isNaN(Q)?0:Q)},onFocus:De=>De.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>ue(oe,(ne.loosePacks??0)+1),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-units-${oe}`,className:"dosage-label",children:"Loose:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>ee(oe,(ne.looseUnits??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-units-${oe}`,min:"0",value:ne.looseUnits||"",onChange:De=>{const Q=parseInt(De.target.value,10);ee(oe,isNaN(Q)?0:Q)},onFocus:De=>De.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>ee(oe,(ne.looseUnits??0)+1),className:"quantity-btn",children:"+"})]}),ne.pack&&r.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",ne.pack.split("x")[1]||ne.pack," per pack)"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","",(Number((ne.pricePerLooseUnit??0)*(ne.looseQuantity??0))||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ae(oe),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:r.jsx(Vn,{size:18})})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2 mt-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`tablets-per-day-${oe}`,className:"dosage-label",children:"Per Day:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(De=>De.map(Q=>Q.drug_id===oe?{...Q,tabletsPerDay:Math.max(1,(Q.tabletsPerDay??1)-1)}:Q)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`tablets-per-day-${oe}`,min:"1",value:ne.tabletsPerDay??1,onChange:De=>{const Q=parseInt(De.target.value,10);l(ge=>ge.map(de=>de.drug_id===oe?{...de,tabletsPerDay:isNaN(Q)?1:Math.max(1,Q)}:de))},onFocus:De=>De.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(De=>De.map(Q=>Q.drug_id===oe?{...Q,tabletsPerDay:(Q.tabletsPerDay??1)+1}:Q)),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`number-of-days-${oe}`,className:"dosage-label",children:"No. Days:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(De=>De.map(Q=>Q.drug_id===oe?{...Q,numberOfDays:Math.max(1,(Q.numberOfDays??1)-1)}:Q)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`number-of-days-${oe}`,min:"1",value:ne.numberOfDays??1,onChange:De=>{const Q=parseInt(De.target.value,10);l(ge=>ge.map(de=>de.drug_id===oe?{...de,numberOfDays:isNaN(Q)?1:Math.max(1,Q)}:de))},onFocus:De=>De.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(De=>De.map(Q=>Q.drug_id===oe?{...Q,numberOfDays:(Q.numberOfDays??1)+1}:Q)),className:"quantity-btn",children:"+"})]})]})]}),r.jsx("div",{className:"flex items-center mt-2",children:ne.pack&&J(ne.pack)&&r.jsx("span",{className:"ml-4 text-sm text-gray-400",children:(()=>{const De=J(ne.pack),Q=ne.looseQuantity??0;if(De&&De>0){const ge=Math.floor(Q/De),de=Q%De;return`(Subtract: ${ge} packs, ${de} loose)`}return""})()})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${oe}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${oe}`,placeholder:"e.g., 'After food', 'Twice a day'",value:ne.directions_to_use??"",onChange:De=>{const Q=De.target.value;l(ge=>ge.map(de=>(de.drug_id??de.name)===oe?{...de,directions_to_use:Q}:de))},className:"dosage-input text-sm w-full mt-1"})]})]},oe)})})]}),o.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ",xe]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:b||o.length===0&&!(S!=null&&S.trim()),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${b||o.length===0&&!(S!=null&&S.trim())?"":"hover:opacity-90"}`,children:b?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},NG=()=>{const{orderId:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(null),[o,l]=v.useState([]),[c,d]=v.useState([]),[f,p]=v.useState(""),[g,x]=v.useState([]),[b,j]=v.useState(null),[S,_]=v.useState(!1),[T,C]=v.useState(null),[P,k]=v.useState(!0);Yc();const E=v.useCallback(async()=>{k(!0);try{const z=await se(`/api/pharmacy-orders/${t}`);if(!z.ok)throw new Error("Failed to fetch order details");const G=await z.json();a(G),s({id:G.patientId,name:G.patientName||"N/A",token:G.patientTokenNumber}),C(G.prescriptionForUnavailableDrugs);const ie=G.medications.map(W=>{const B=$(W.pack),ce=W.pack_quantity*(B??1)+W.loose_quantity;return{...W,isLoose:!0,loosePacks:W.pack_quantity,looseUnits:W.loose_quantity,looseQuantity:ce,pack_price:W.pack_price,loose_price:W.loose_price,total_price:W.total_price,pricePerLooseUnit:W.loose_price,originalPrice:W.pack_price,box_number:W.box_number,pack:W.pack,batch:W.batch,expiry_date:W.expiry_date,discount_percentage:W.discount_percentage}});d(ie)}catch(z){j("Could not load order details. "+z.message)}finally{k(!1)}},[t]),I=v.useCallback(async()=>{try{const z=await se("/api/drugs");if(!z.ok)throw new Error("Failed to fetch drugs");const G=await z.json(),ie=G.drugs||G||[];l(ie)}catch(z){j("Could not load drug list. "+z.message)}},[]);v.useEffect(()=>{E(),I()},[E,I]);const L=v.useMemo(()=>new lo(o,{keys:["name","brand_name"],threshold:.3}),[o]);v.useEffect(()=>{if(!f){x([]);return}const z=L.search(f).map(G=>G.item);x(z.slice(0,10))},[f,L]);const $=z=>{if(!z)return null;const G=z.match(/(?:\d+x)?(\d+)/);return G?parseInt(G[1],10):null},q=z=>{if(c.some(G=>G.drug_id===z.id)){j(`${z.name||z.brand_name} is already in the order.`),setTimeout(()=>j(null),3e3),p(""),x([]);return}d(G=>[...G,{drug_id:z.id,name:z.name||z.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,pack_price:Number(z.mrp)||0,loose_price:(Number(z.mrp)||0)/($(z.pack)||1),total_price:(Number(z.mrp)||0)/($(z.pack)||1),discount_percentage:0,directions_to_use:"",tabletsPerDay:1,numberOfDays:1,stock:z.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(z.mrp)||0)/($(z.pack)||1),originalPrice:Number(z.mrp)||0,pack:z.pack}]),p(""),x([])},F=z=>{d(G=>G.filter(ie=>(ie.drug_id??ie.name)!==z))},H=(z,G)=>{d(ie=>ie.map(W=>{if((W.drug_id??W.name)===z&&W.isLoose){const B=$(W.pack),ce=Math.max(0,G),je=ce*(B??1)+(W.looseUnits??0);return{...W,loosePacks:ce,looseQuantity:je,pack_quantity:ce}}return W}))},V=(z,G)=>{d(ie=>ie.map(W=>{if((W.drug_id??W.name)===z&&W.isLoose){const B=$(W.pack),ce=Math.max(0,G),je=(W.loosePacks??0)*(B??1)+ce;return{...W,looseUnits:ce,looseQuantity:je,loose_quantity:ce}}return W}))},X=async z=>{if(z.preventDefault(),j(null),_(!0),c.length===0&&!(T!=null&&T.trim())){j("Please add at least one medication or provide a prescription."),_(!1);return}const G=c.filter(W=>{const B=W.looseQuantity??0;return B<=0||W.stock!==void 0&&B>W.stock});if(G.length>0){j(`Invalid quantity or insufficient stock for: ${G.map(W=>W.name).join(", ")}`),_(!1);return}const ie={items:c.map(W=>({drug_id:W.drug_id??null,name:W.name,pack_quantity:W.loosePacks??0,loose_quantity:W.looseUnits??0,pack_price:W.pack_price??0,loose_price:W.loose_price??0,total_price:(W.loose_price??0)*(W.looseQuantity??0),discount_percentage:W.discount_percentage??0,directions_to_use:W.directions_to_use??null,tabletsPerDay:W.tabletsPerDay??1,numberOfDays:W.numberOfDays??1})),prescription_for_unavailable_drugs:T,order_total:Y};try{const W=await se(`/api/pharmacy-orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!W.ok){const B=await W.json();throw new Error(B.message||"Failed to update order")}e(-1)}catch(W){j(W.message||"Failed to update order. Please try again.")}finally{_(!1)}},Y=v.useMemo(()=>c.reduce((z,G)=>{const ie=G.loose_price??0,W=G.looseQuantity??0;return z+ie*W},0),[c]);return P?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(te,{variant:"circular",width:40,height:40}),r.jsx(te,{width:300,height:32})]}),r.jsx("div",{className:"header-right",children:r.jsx(te,{width:100,height:32,style:{borderRadius:"16px"}})})]}),r.jsx("div",{className:"order-meta",style:{display:"flex",gap:"1rem",margin:"1rem 0"},children:r.jsx(te,{width:200,height:24})}),r.jsxs("div",{className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(te,{width:200,height:24})}),r.jsx("div",{style:{padding:"1.5rem"},children:r.jsx(te,{height:42})})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(te,{width:250,height:24})}),r.jsxs("div",{className:"table-container",style:{padding:"0 1rem 1rem"},children:[r.jsxs("div",{className:"table-header-row",style:{display:"flex",gap:"1rem",padding:"1rem"},children:[r.jsx(te,{width:"30%",height:20}),r.jsx(te,{width:"20%",height:20}),r.jsx(te,{width:"20%",height:20}),r.jsx(te,{width:"15%",height:20}),r.jsx(te,{width:"5%",height:20})]}),r.jsx("div",{className:"table-body",children:[1,2,3].map(z=>r.jsxs("div",{className:"table-row",style:{display:"flex",gap:"1rem",padding:"1rem",borderBottom:"1px solid #eee"},children:[r.jsxs("div",{style:{width:"30%"},children:[r.jsx(te,{width:"80%",height:20,className:"mb-2"}),r.jsx(te,{width:"40%",height:14})]}),r.jsx(te,{width:"20%",height:36}),r.jsx(te,{width:"20%",height:36}),r.jsx(te,{width:"15%",height:20,style:{alignSelf:"center"}}),r.jsx(te,{width:"5%",height:24,style:{alignSelf:"center"}})]},z))})]})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx(te,{width:180,height:24})}),r.jsx("div",{style:{padding:"1rem"},children:r.jsx(te,{height:80})})]}),r.jsx("div",{style:{marginTop:"20px"},children:r.jsx(te,{height:48,width:"100%"})})]})]})]}):n?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:r.jsx(on,{size:20})}),r.jsxs("h2",{className:"page-title",children:["EDIT ORDER ",r.jsxs("span",{className:"text-gray-500 text-lg font-normal ml-2",children:[i==null?void 0:i.name," #",n.id.substring(0,4)]})]})]}),r.jsx("div",{className:"header-right",children:r.jsx("span",{className:"status-badge",children:n.status.toUpperCase()})})]}),r.jsx("div",{className:"order-meta",children:r.jsxs("span",{className:"order-date",children:[" Order Date: ",new Date(n.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})}),r.jsxs("form",{onSubmit:X,className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{children:" Find & Add Medication"})}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by name or brand...",value:f,onChange:z=>p(z.target.value),className:"search-input"}),f&&r.jsx("div",{className:"dropdown-results",children:g.length>0?r.jsx("ul",{children:g.map(z=>r.jsxs("li",{onClick:()=>q(z),className:"dropdown-item",children:[r.jsx("span",{className:"drug-name",children:z.name||z.brand_name}),r.jsxs("span",{className:"drug-meta",children:["(Stock: ",z.stock??"N/A",", MRP: ",Number(z.mrp||0).toFixed(2),")"]})]},z.id))}):r.jsxs("div",{className:"p-3 text-gray-500 text-sm",children:['No drugs found matching "',f,'"']})})]})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{children:[" Medications in Order ",r.jsxs("span",{className:"item-count",children:[c.length," items"]})]})}),c.length>0?r.jsxs("div",{className:"table-container",children:[r.jsxs("div",{className:"table-header-row",children:[r.jsx("div",{className:"col-medication",children:"MEDICATION"}),r.jsx("div",{className:"col-directions",children:"DIRECTIONS"}),r.jsx("div",{className:"col-quantity",children:"QUANTITY"}),r.jsx("div",{className:"col-subtotal",children:"SUBTOTAL"}),r.jsx("div",{className:"col-action"})]}),r.jsx("div",{className:"table-body",children:c.map(z=>{const G=z.drug_id??z.name;return r.jsxs("div",{className:"table-row",children:[r.jsxs("div",{className:"col-medication",children:[r.jsx("span",{className:"med-name",children:z.name}),z.pack&&r.jsx("span",{className:"med-unit text-xs text-gray-500 block",children:z.pack}),r.jsxs("div",{className:"stock-info",children:[" Stock: ",r.jsxs("span",{className:"stock-value",children:[" ",z.stock!==void 0?z.pack?`BOX OF ${$(z.pack)}`:z.stock:"N/A"]})]})]}),r.jsx("div",{className:"col-directions",children:r.jsx("input",{type:"text",placeholder:"1 tablet twice daily...",value:z.directions_to_use??"",onChange:ie=>{const W=ie.target.value;d(B=>B.map(ce=>(ce.drug_id??ce.name)===G?{...ce,directions_to_use:W}:ce))},className:"directions-input"})}),r.jsx("div",{className:"col-quantity",children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"PACKS"}),r.jsx("input",{type:"number",min:"0",value:z.loosePacks||"",onChange:ie=>H(G,ie.target.value===""?0:parseInt(ie.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"LOOSE"}),r.jsx("input",{type:"number",min:"0",value:z.looseUnits||"",onChange:ie=>V(G,ie.target.value===""?0:parseInt(ie.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]})]})}),r.jsxs("div",{className:"col-subtotal",children:["",(Number((z.pricePerLooseUnit??0)*(z.looseQuantity??0))||0).toFixed(2)]}),r.jsx("div",{className:"col-action",children:r.jsx("button",{type:"button",onClick:()=>F(G),className:"delete-btn",title:"Remove Item",children:r.jsx(Vn,{size:18,strokeWidth:2.5})})})]},G)})})]}):r.jsx("div",{className:"empty-state",children:"No medications added. Search above to add."})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx("h3",{children:" Prescription Notes"})}),r.jsx("textarea",{rows:3,value:T??"",onChange:z=>C(z.target.value||null),placeholder:"Add notes about unavailable drugs...",className:"notes-input"})]}),r.jsxs("button",{type:"submit",disabled:S,className:"confirm-btn",style:{width:"100%",margin:"20px 0 0 0"},children:[r.jsx("span",{className:"check-icon",children:""})," ",S?"Updating...":"Confirm Changes"]}),b&&r.jsx("div",{className:"error-alert mt-4",children:b})]})]})]}):r.jsx("div",{className:"p-6 text-red-500 flex justify-center items-center h-screen",children:"Order not found or failed to load."})},dIe=(t,e,n,a="non-black")=>{if(isNaN(t)||isNaN(e)||t<=0||e<=0)return null;let i;return n==="female"?t<=.7?i=141*Math.pow(t/.7,-.329)*Math.pow(.993,e):i=141*Math.pow(t/.7,-1.209)*Math.pow(.993,e):t<=.9?i=141*Math.pow(t/.9,-.411)*Math.pow(.993,e):i=141*Math.pow(t/.9,-1.209)*Math.pow(.993,e),a==="black"&&(i*=1.018),parseFloat(i.toFixed(2))},hIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0||n>=400)return null;const a=t-e-n/5;return parseFloat(a.toFixed(2))},fIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},pIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},mIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=t-(e+n);return parseFloat(a.toFixed(2))},gIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=2*t+e/18+n/2.8;return parseFloat(a.toFixed(2))},yIe=t=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(t),DB=()=>{var me,ye;const{orderId:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!0),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState(null),[b,j]=v.useState(null),[S,_]=v.useState({}),[T,C]=v.useState(null),[P,k]=v.useState(!1),[E,I]=v.useState(""),[L,$]=v.useState(!1),[q,F]=v.useState(""),[H,V]=v.useState(""),[X,Y]=v.useState(!1),[z,G]=v.useState(""),ie=v.useCallback(async le=>{var J;try{const ae=await se(`/api/patients/${le}`);if(!ae.ok)throw new Error(`Failed to fetch patient details: ${ae.status}`);const ue=await ae.json();x(ue.age),j(((J=ue.sex)==null?void 0:J.toLowerCase())==="female"?"female":"male"),ue.phone&&a(ee=>ee?{...ee,Patient:{...ee.Patient,phone:ue.phone}}:null)}catch(ae){console.error("Error fetching patient details:",ae),x(null),j(null)}},[]),W=v.useCallback(async()=>{if(t){l(!0),p(null);try{const le=await se(`/api/lab/${t}`);if(!le.ok){const ue=await le.json().catch(()=>({message:`HTTP error! status: ${le.status}`}));throw new Error(ue.message||`HTTP error! status: ${le.status}`)}const J=await le.json();if(a(J),J.createdAt)try{const ue=new Date(J.createdAt),ee=new Date(ue.getTime()-ue.getTimezoneOffset()*6e4).toISOString().slice(0,16);I(ee)}catch(ue){console.error("Error formatting date for edit:",ue)}if(J.report_date)try{const ue=new Date(J.report_date),ee=new Date(ue.getTime()-ue.getTimezoneOffset()*6e4).toISOString().slice(0,16);F(ee)}catch(ue){console.error("Error formatting report date for edit:",ue)}else{const ue=new Date,ee=new Date(ue.getTime()-ue.getTimezoneOffset()*6e4).toISOString().slice(0,16);F(ee)}J.referral_doctor&&G(J.referral_doctor),J.patient_id&&ie(J.patient_id);const ae={};if(J.tests&&J.tests.forEach(ue=>{ae[ue.id]={},ue.default_parameters&&ue.default_parameters.length>0?ue.default_parameters.forEach(ee=>{ae[ue.id][ee.name]=ee.defaultValue}):ae[ue.id].report_content=""}),J.report_content)try{const ue=JSON.parse(J.report_content);typeof ue=="object"&&ue!==null&&!Array.isArray(ue)?s(ue):(console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),s(ae))}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),s(ae)}else s({})}catch(le){console.error("Failed to fetch lab order details:",le),p(le instanceof Error?le.message:"An unknown error occurred while fetching order details.")}finally{l(!1)}}},[t,ie]);v.useEffect(()=>{t?W():(p("No Order ID provided in the URL."),l(!1))},[t,W]),v.useEffect(()=>{(async()=>{try{const J=await se("/api/clinics/settings");if(J.ok){const ae=await J.json();V(ae.labLetterheadUrl||"")}}catch(J){console.error("Error fetching clinic settings:",J)}})()},[]);const B=(le,J,ae)=>{s(ue=>{var We,it,wt,we,Xe,Je,ct,Ct,bt,ke,ot,Tt,Ve,jt,kt,Kn,vt,Dt,Vt;const ee={...ue,[le]:{...ue[le],[J]:ae}},Ne=parseFloat((We=ee[le])==null?void 0:We.Creatinine),Te=g,Fe=b;if(J==="Creatinine"&&!isNaN(Ne)&&Te!==null&&Fe!==null){const ln=dIe(Ne,Te,Fe);ln!==null&&((it=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&it.default_parameters.find(Tn=>Tn.name==="eGFR"))&&(ee[le].eGFR=ln)}const xe=parseFloat((wt=ee[le])==null?void 0:wt["Total Cholesterol"]),ne=parseFloat((we=ee[le])==null?void 0:we["HDL Cholesterol"]),oe=parseFloat((Xe=ee[le])==null?void 0:Xe.Triglycerides);if((J==="Total Cholesterol"||J==="HDL Cholesterol"||J==="Triglycerides")&&!isNaN(xe)&&!isNaN(ne)&&!isNaN(oe)){const ln=hIe(xe,ne,oe);ln!==null&&((Je=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&Je.default_parameters.find(Tn=>Tn.name==="LDL Cholesterol"))&&(ee[le]["LDL Cholesterol"]=ln)}const _e=parseFloat((ct=ee[le])==null?void 0:ct["Total Bilirubin"]),De=parseFloat((Ct=ee[le])==null?void 0:Ct["Direct Bilirubin"]);if((J==="Total Bilirubin"||J==="Direct Bilirubin")&&!isNaN(_e)&&!isNaN(De)){const ln=fIe(_e,De);ln!==null&&((bt=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&bt.default_parameters.find(Tn=>Tn.name==="Indirect Bilirubin"))&&(ee[le]["Indirect Bilirubin"]=ln)}const Q=parseFloat((ke=ee[le])==null?void 0:ke["Total Protein"]),ge=parseFloat((ot=ee[le])==null?void 0:ot.Albumin);if((J==="Total Protein"||J==="Albumin")&&!isNaN(Q)&&!isNaN(ge)){const ln=pIe(Q,ge);ln!==null&&((Tt=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&Tt.default_parameters.find(Tn=>Tn.name==="Globulin"))&&(ee[le].Globulin=ln)}const de=parseFloat((Ve=ee[le])==null?void 0:Ve.Sodium),fe=parseFloat((jt=ee[le])==null?void 0:jt.Chloride),Ee=parseFloat((kt=ee[le])==null?void 0:kt.Bicarbonate);if((J==="Sodium"||J==="Chloride"||J==="Bicarbonate")&&!isNaN(de)&&!isNaN(fe)&&!isNaN(Ee)){const ln=mIe(de,fe,Ee);ln!==null&&((Kn=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&Kn.default_parameters.find(Tn=>Tn.name==="Anion Gap"))&&(ee[le]["Anion Gap"]=ln)}const Ye=parseFloat((vt=ee[le])==null?void 0:vt.Glucose),$e=parseFloat((Dt=ee[le])==null?void 0:Dt.BUN);if((J==="Sodium"||J==="Glucose"||J==="BUN")&&!isNaN(de)&&!isNaN(Ye)&&!isNaN($e)){const ln=gIe(de,Ye,$e);ln!==null&&((Vt=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&Vt.default_parameters.find(Tn=>Tn.name==="Osmolality"))&&(ee[le].Osmolality=ln)}return ee})},ce=async le=>{const J=i[le]||{},ae=n==null?void 0:n.tests.find(Te=>Te.id===le);if(!ae)return;const ue={};ae.default_parameters&&ae.default_parameters.forEach(Te=>{ue[Te.name]=Te.defaultValue});const ee={...ue,...J},Ne={...i,[le]:ee};s(Ne),d(!0),p(null);try{const Te=await se(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(Ne),isPartial:!0})});if(!Te.ok)throw new Error(`Save failed: ${Te.status}`)}catch(Te){console.error("Error saving test report:",Te),alert("Failed to save test report.")}finally{d(!1)}},je=async(le=null)=>{if(!n||!n.tests||!t){alert("Order details not loaded.");return}d(!0),p(null);try{let J;if(le===null){const ue={};n.tests.forEach(ee=>{const Ne=i[ee.id]||{},Te={};ee.default_parameters&&ee.default_parameters.forEach(Fe=>{Fe.defaultValue!==void 0&&Fe.defaultValue!==null&&(Te[Fe.name]=Fe.defaultValue)}),ue[ee.id]={...Te,...Ne},(!ee.default_parameters||ee.default_parameters.length===0)&&!ue[ee.id].report_content&&(ue[ee.id].report_content="")}),J=ue,s(ue)}else{const ue=i[le]||{},ee=n.tests.find(Fe=>Fe.id===le);if(!ee){d(!1);return}const Ne={};ee.default_parameters&&ee.default_parameters.forEach(Fe=>{Ne[Fe.name]=Fe.defaultValue});const Te={...Ne,...ue};J={...i,[le]:Te},s(J)}const ae=await se(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(J),isPartial:le!==null})});if(!ae.ok)throw new Error(`Save failed: ${ae.status}`);C(le),setTimeout(()=>{window.print()},100)}catch(J){console.error("Error saving before print:",J),alert("Failed to save report before printing.")}finally{d(!1)}},K=()=>{n&&MM(n)},Ie=async()=>{if(!n||!n.tests){alert("Order details not loaded.");return}if(!t){alert("Cannot submit report without an Order ID.");return}const le={};if(n.tests.forEach(J=>{const ae=i[J.id]||{},ue={};J.default_parameters&&J.default_parameters.forEach(ee=>{ee.defaultValue!==void 0&&ee.defaultValue!==null&&(ue[ee.name]=ee.defaultValue)}),le[J.id]={...ue,...ae},(!J.default_parameters||J.default_parameters.length===0)&&!le[J.id].report_content&&(le[J.id].report_content="")}),Object.keys(le).length===0){alert("Report content cannot be empty.");return}s(le),d(!0),p(null);try{const J=await se(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(le)})});if(!J.ok){const ae=await J.json().catch(()=>({message:`Submission failed: ${J.status}`}));throw new Error(ae.message||`Submission failed: ${J.status}`)}e(-1)}catch(J){console.error("Error submitting report:",J),p(J instanceof Error?J.message:"An unknown error occurred during submission.")}finally{d(!1)}},Ue=async()=>{if(!(!t||!E))try{const le=await se(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:new Date(E).toISOString()})});if(!le.ok)throw new Error("Failed to update date");const J=await le.json();J.order&&a(ae=>ae?{...ae,createdAt:J.order.createdAt}:null),k(!1)}catch(le){console.error("Failed to update date:",le),alert("Failed to update date")}},ze=async()=>{if(!(!t||!q))try{const le=await se(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportDate:new Date(q).toISOString()})});if(!le.ok)throw new Error("Failed to update report date");const J=await le.json();J.order&&a(ae=>ae?{...ae,report_date:J.order.report_date}:null),$(!1)}catch(le){console.error("Failed to update report date:",le),alert("Failed to update report date")}},Le=async()=>{if(t)try{const le=await se(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralDoctor:z})});if(!le.ok)throw new Error("Failed to update referral doctor");const J=await le.json();J.order&&(G(J.order.referral_doctor||""),a(ae=>ae?{...ae,referral_doctor:J.order.referral_doctor}:null)),Y(!1)}catch(le){console.error("Failed to update referral doctor:",le),alert("Failed to update referral doctor")}};if(o)return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem"},children:[r.jsx(te,{width:200,height:28}),r.jsxs("div",{className:"header-actions",style:{display:"flex",gap:"8px"},children:[r.jsx(te,{width:80,height:32}),r.jsx(te,{width:80,height:32}),r.jsx(te,{width:80,height:32})]})]}),r.jsxs("div",{className:"lab-inventory-card no-print summary-card",style:{margin:"1rem",padding:"0"},children:[r.jsx("div",{className:"lab-inventory-header summary-header",style:{padding:"0.75rem 1rem",borderBottom:"1px solid #eee"},children:r.jsx(te,{width:120,height:20})}),r.jsxs("div",{className:"summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem"},children:[r.jsx(te,{height:24}),r.jsx(te,{height:24}),r.jsx(te,{height:24}),r.jsx(te,{height:24})]})]}),r.jsx("div",{className:"lab-tests-container no-print",style:{padding:"1rem"},children:[1,2].map(le=>r.jsxs("div",{className:"test-card",style:{marginBottom:"1.5rem",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"white"},children:[r.jsxs("div",{className:"test-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsx(te,{width:250,height:24}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsx(te,{width:70,height:30}),r.jsx(te,{width:36,height:30})]})]}),r.jsx("div",{className:"parameter-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(J=>r.jsxs("div",{className:"parameter-item",children:[r.jsx(te,{width:"30%",height:16,style:{marginBottom:"0.5rem"}}),r.jsx(te,{height:40})]},J))})]},le))})]})});if(f&&!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Wr,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),r.jsx("p",{className:"error-text",children:f}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:r.jsx(on,{size:16})})]})});if(!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Pl,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${t}.`}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:r.jsx(on,{size:16})})]})});const be=(me=n==null?void 0:n.Patient)==null?void 0:me.name,Ce=(ye=n==null?void 0:n.Patient)==null?void 0:ye.patient_token_number;return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",children:[r.jsx("h2",{children:"Enter Lab Report"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:r.jsx(on,{size:16})}),r.jsxs("button",{onClick:()=>je(null),className:"lab-inventory-button compact-btn",title:"Print Full Report",children:[r.jsx(vf,{size:16}),r.jsx("span",{className:"btn-text",children:"Print"})]}),r.jsxs("button",{onClick:K,className:"lab-inventory-button whatsapp-btn compact-btn",title:"Share via WhatsApp",children:[r.jsx(Yz,{size:16}),r.jsx("span",{className:"btn-text",children:"Share"})]})]})]}),n&&r.jsxs("div",{className:"lab-inventory-card no-print summary-card",children:[r.jsxs("h3",{className:"lab-inventory-header summary-header",children:[r.jsx(Pl,{size:14})," Summary"]}),r.jsxs("div",{className:"summary-grid",children:[r.jsxs("div",{className:"summary-item",children:[r.jsx(Jn,{size:13,className:"icon"}),r.jsx("strong",{children:"Patient:"})," ",be??"N/A"," (",Ce??"N/A",")"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(wI,{size:13,className:"icon"}),r.jsx("strong",{children:"Ordered:"})," ",P?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:E,onChange:le=>I(le.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Ue,className:"icon-btn save",children:r.jsx(Fo,{size:12})}),r.jsx("button",{onClick:()=>k(!1),className:"icon-btn cancel",children:r.jsx(Ft,{size:12})})]}):r.jsxs(r.Fragment,{children:[mf(new Date(n.createdAt),"dd MMM, HH:mm"),r.jsx("button",{onClick:()=>k(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(ro,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(wI,{size:13,className:"icon"}),r.jsx("strong",{children:"Reported:"})," ",L?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:q,onChange:le=>F(le.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:ze,className:"icon-btn save",children:r.jsx(Fo,{size:12})}),r.jsx("button",{onClick:()=>$(!1),className:"icon-btn cancel",children:r.jsx(Ft,{size:12})})]}):r.jsxs(r.Fragment,{children:[n.report_date?mf(new Date(n.report_date),"dd MMM, HH:mm"):"Not Set",r.jsx("button",{onClick:()=>$(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(ro,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(Jn,{size:13,className:"icon"}),r.jsx("strong",{children:"Ref. Doctor:"})," ",X?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"text",value:z,onChange:le=>G(le.target.value),className:"lab-inventory-input date-input",placeholder:"Enter referral doctor name"}),r.jsx("button",{onClick:Le,className:"icon-btn save",children:r.jsx(Fo,{size:12})}),r.jsx("button",{onClick:()=>Y(!1),className:"icon-btn cancel",children:r.jsx(Ft,{size:12})})]}):r.jsxs(r.Fragment,{children:[z||"Not Set",r.jsx("button",{onClick:()=>Y(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(ro,{size:11})})]})]})]})]}),r.jsxs("div",{className:"lab-tests-container no-print",children:[n==null?void 0:n.tests.map(le=>{var J;return r.jsxs("div",{className:"test-card",children:[r.jsxs("div",{className:"test-header",children:[r.jsx("h4",{children:le.name}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsxs("button",{type:"button",onClick:ae=>{ae.stopPropagation(),ce(le.id)},className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:[r.jsx(cs,{size:14}),r.jsx("span",{className:"btn-text",children:"Save"})]}),r.jsx("button",{type:"button",onClick:ae=>{ae.stopPropagation(),je(le.id)},className:"lab-inventory-button compact-btn",title:"Print",children:r.jsx(vf,{size:14})})]})]}),r.jsx("div",{className:"test-parameters-body",children:le.default_parameters&&le.default_parameters.length>0?r.jsx("div",{className:"parameter-grid",children:le.default_parameters.map(ae=>{var xe,ne;const ue=(xe=i[le.id])==null?void 0:xe[ae.name],ee=ue!==void 0?ue:ae.defaultValue??"",Ne=ae.type==="number"&&ee!==""&&(ae.lower_limit!=null&&parseFloat(String(ee))<ae.lower_limit||ae.upper_limit!=null&&parseFloat(String(ee))>ae.upper_limit),Te=yIe(ae.name),Fe=(ne=S[le.id])==null?void 0:ne[ae.name];return r.jsxs("div",{className:"parameter-item",children:[r.jsxs("label",{className:"parameter-label",htmlFor:`${le.id}-${ae.name}`,children:[ae.name," ",ae.unit&&r.jsxs("span",{className:"parameter-unit",children:["(",ae.unit,")"]})]}),r.jsxs("div",{className:"input-wrapper",children:[ae.type==="boolean"?r.jsxs("select",{id:`${le.id}-${ae.name}`,value:(ee==null?void 0:ee.toString())??"false",onChange:oe=>B(le.id,ae.name,oe.target.value==="true"),className:"lab-inventory-input parameter-input",disabled:c,children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-Reactive"})]}):r.jsx("input",{id:`${le.id}-${ae.name}`,type:ae.type==="number"?"number":"text",value:ee,onChange:oe=>B(le.id,ae.name,oe.target.value),className:`lab-inventory-input parameter-input ${Ne?"abnormal-result":""} ${Te?"calculated-input":""}`,disabled:c||Te&&!Fe,placeholder:ae.lower_limit!=null&&ae.upper_limit!=null?`${ae.lower_limit}-${ae.upper_limit}`:""}),Te&&r.jsx("button",{type:"button",onClick:()=>_(oe=>({...oe,[le.id]:{...oe[le.id]||{},[ae.name]:!Fe}})),className:"edit-calculated-btn",title:Fe?"Lock":"Edit",children:r.jsx(ro,{size:11})})]})]},ae.name)})}):r.jsxs("div",{className:"parameter-item",style:{width:"100%"},children:[r.jsx("label",{className:"parameter-label",htmlFor:`${le.id}-report_content`,children:"Results / Observations"}),r.jsx("textarea",{id:`${le.id}-report_content`,value:((J=i[le.id])==null?void 0:J.report_content)??"",onChange:ae=>B(le.id,"report_content",ae.target.value),className:"lab-inventory-input parameter-textarea",rows:3,placeholder:`Enter results for ${le.name}...`,disabled:c})]})})]},le.id)}),f&&r.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[r.jsx(Wr,{size:15,className:"inline mr-1"}),f]})]}),r.jsx("div",{className:"form-actions-footer no-print",children:r.jsx("button",{type:"button",onClick:Ie,disabled:c,className:"lab-inventory-button lab-inventory-button-primary submit-btn",children:c?r.jsxs(r.Fragment,{children:[r.jsx(so,{className:"animate-spin",size:16})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(cs,{size:16})," Save All"]})})}),r.jsxs("div",{className:"printable-only",children:[H&&r.jsx("div",{className:"print-letterhead-container",children:r.jsx("img",{src:H,alt:"Lab Letterhead",className:"print-letterhead-image"})}),n&&n.Patient&&r.jsxs("div",{style:{marginBottom:"20px",borderBottom:"1px solid #ccc",paddingBottom:"10px"},children:[r.jsx("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Lab Report"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"12px"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Patient Name:"})," ",n.Patient.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age/Sex:"})," ",g??"N/A"," / ",b??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. Doctor:"})," ",z||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",mf(new Date(n.createdAt),"PPpp")]})]})]}),n==null?void 0:n.tests.filter(le=>T===null||le.id===T).map(le=>{var J;return r.jsxs("div",{style:{marginBottom:"20px",pageBreakInside:"avoid"},children:[r.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"5px"},children:le.name}),le.default_parameters&&le.default_parameters.length>0?r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"#f9f9f9"},children:[r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Parameter"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Result"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Units"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Normal Range"})]})}),r.jsx("tbody",{children:le.default_parameters.map(ae=>{var xe;const ue=(xe=i[le.id])==null?void 0:xe[ae.name],ee=typeof ue=="string"?parseFloat(ue):typeof ue=="number"?ue:NaN,Ne=ae.type==="number"&&!isNaN(ee)&&ue!==""&&(ae.lower_limit!=null&&ee<ae.lower_limit||ae.upper_limit!=null&&ee>ae.upper_limit),Te=ae.type==="boolean"&&(ue===!0||ue==="true"),Fe=ae.type==="boolean"?ue===!0||ue==="true"?"Reactive":"Non-Reactive":ue??"";return r.jsxs("tr",{children:[r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ae.name}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee",fontWeight:Ne||Te?"bold":"normal",color:Ne?"red":Te?"green":"inherit"},children:Fe}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ae.unit??""}),r.jsxs("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:[ae.lower_limit!==null&&ae.lower_limit!==void 0&&`> ${ae.lower_limit}`,ae.lower_limit!==null&&ae.lower_limit!==void 0&&ae.upper_limit!==null&&ae.upper_limit!==void 0&&" - ",ae.upper_limit!==null&&ae.upper_limit!==void 0&&`< ${ae.upper_limit}`]})]},ae.name)})})]}):r.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"12px",padding:"10px"},children:((J=i[le.id])==null?void 0:J.report_content)||"No report content entered."})]},le.id)})]})]})})},xIe=()=>{const{orderId:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(""),f=v.useCallback(async g=>{if(!g){l("No Order ID specified in the URL."),s(!1),a(null);return}s(!0),l(null),a(null);try{console.log(`Fetching order details for ID: ${g}`);const x=await se(`/api/lab/orders/${g}/report`);if(!x.ok){let j;try{j=await x.json()}catch{j={message:`Server returned status ${x.status}`}}throw console.error("Fetch order details error response:",j),new Error(j.message||`Failed to fetch order details: ${x.status}`)}const b=await x.json();if(console.log("Received order data:",b),!b)throw console.error("Invalid order data structure:",b),new Error("Invalid order data received from server.");a(b)}catch(x){console.error("Error fetching order details:",x),l(x instanceof Error?x.message:"An unknown error occurred while fetching the order details")}finally{s(!1)}},[se]);v.useEffect(()=>{f(t)},[t,f]),v.useEffect(()=>{(async()=>{try{const x=await se("/api/clinics/settings");if(x.ok){const b=await x.json();d(b.labLetterheadUrl||"")}}catch(x){console.error("Error fetching clinic settings:",x)}})()},[]);const p=()=>{n&&MM(n)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs(_r,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[r.jsx(In,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:r.jsx(on,{size:16})}),r.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[r.jsx(vf,{size:16,style:{marginRight:"5px"}}),"Print"]}),r.jsxs("button",{onClick:p,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[r.jsx(Yz,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",t||"None Specified",")"]}),i&&r.jsx("div",{className:"loading-text",children:"Loading report..."}),o&&!i&&r.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[r.jsx(Wr,{size:48}),r.jsx("h3",{className:"error-title",children:"Error Loading Report"}),r.jsx("p",{children:o}),t&&r.jsx("button",{onClick:()=>f(t),className:"retry-button",children:"Retry"})]}),r.jsxs("div",{className:"printable-section",children:[c&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:c,alt:"Lab Letterhead",className:"print-letterhead-image"})}),!i&&!o&&(n==null?void 0:n.Patient)&&r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Jn,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",n.Patient.name||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age:"})," ",n.Patient.age??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Gender:"})," ",n.Patient.gender||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Token No:"})," ",n.Patient.patient_token_number||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Patient ID:"})," ",n.Patient.id]}),n.Patient.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",n.Patient.phone]})]})]}),!i&&!o&&(n==null?void 0:n.report_content)&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Ta,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const g=JSON.parse(n.report_content||"{}");return typeof g=="object"&&g!==null&&n.tests?n.tests.map(x=>r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em"},children:x.name}),g[x.id]?r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(g[x.id]).map(([b,j])=>{var k;const S=(k=x.default_parameters)==null?void 0:k.find(E=>E.name===b),_=typeof j=="string"?parseFloat(j):typeof j=="number"?j:NaN,T=(S==null?void 0:S.type)==="number"&&!isNaN(_)&&(S.lower_limit!=null&&_<S.lower_limit||S.upper_limit!=null&&_>S.upper_limit),C=(S==null?void 0:S.type)==="boolean"?j===!0||j==="true"?"Reactive":"Non-Reactive":String(j),P=(S==null?void 0:S.type)==="boolean"&&(j===!0||j==="true");return r.jsxs("tr",{children:[r.jsx("td",{children:b}),r.jsxs("td",{className:`${T?"abnormal-result":""} ${P?"reactive-result":""}`,children:[C," ",S==null?void 0:S.unit]}),r.jsx("td",{children:S&&S.type==="number"&&(S.lower_limit!==null||S.upper_limit!==null)?r.jsxs(r.Fragment,{children:[S.lower_limit!=null&&` > ${S.lower_limit}`,S.lower_limit!=null&&S.upper_limit!=null&&" - ",S.upper_limit!=null&&` < ${S.upper_limit}`,S.unit&&` ${S.unit}`]}):((S==null?void 0:S.type)==="boolean","N/A")})]},b)})})]}):r.jsx("p",{children:"No parameters reported for this test."})]},x.id)):r.jsx(wf,{remarkPlugins:[Nf],children:n.report_content})}catch{return r.jsx(wf,{remarkPlugins:[Nf],children:n.report_content||"*No findings recorded.*"})}})()})]})]}),!i&&!o&&!(n!=null&&n.report_content)&&!(n!=null&&n.Patient)&&t&&r.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",t,". The order might be processing, does not exist, or the ID is incorrect."]}),!t&&!i&&!o&&r.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",r.jsx(_r,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},vIe=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(e);Yc(),v.useEffect(()=>{const j=setTimeout(()=>{f(e)},500);return()=>{clearTimeout(j)}},[e]),v.useEffect(()=>{p()},[d]);const p=async()=>{const j=e.trim();if(!j){o([]),c(null);return}i(!0),c(null),o([]),console.log(`Searching for: ${j}`);try{const S=await se("/api/lab");if(!S.ok){let E;try{E=await S.json()}catch{E={message:`Server returned status ${S.status}`}}throw console.error("Search fetch error response:",E),new Error(E.message||`HTTP error! status: ${S.status}`)}const{orders:_}=await S.json();console.log("Received lab orders for search:",_);const C=_.filter(E=>!!E.report_content).map(E=>{var I,L;return{id:E.id,labTokenNumber:String(E.lab_token_number??"N/A"),patientName:((I=E.Patient)==null?void 0:I.name)||"N/A",patientId:E.patient_id,patientTokenNumber:String(((L=E.Patient)==null?void 0:L.patient_token_number)??"N/A"),tests:(E.tests||[]).map($=>$.name||"Unknown Test"),date:mf(new Date(E.createdAt),"yyyy-MM-dd"),status:E.status}}),P=new lo(C,{keys:["patientName","labTokenNumber","patientTokenNumber","tests","id","patientId"],threshold:.3,ignoreLocation:!0}),k=e.trim()?P.search(e).map(E=>E.item):C;console.log("Filtered search results:",k),o(k),k.length===0&&j?c(`No matching reports found for "${j}".`):c(null)}catch(S){console.error("Failed to search lab reports:",S),c(S instanceof Error?S.message:"An unknown error occurred during search")}finally{i(!1)}},g=j=>{console.log(`Result clicked, navigating to view report for order ID: ${j}`),t(`/lab/view-report/${j}`)},x=j=>{switch(j){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:j,color:"text-gray-600 bg-gray-100"}}},b=j=>{switch(j){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),r.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(on,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[r.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[r.jsx(In,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),r.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:e,onChange:j=>n(j.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[a&&r.jsx("div",{className:"loading-text",children:"Searching..."}),l&&!a&&r.jsxs("div",{className:"error-text",children:[r.jsx(Wr,{size:20,className:"inline mr-2"})," ",l]}),s.length>0&&!a&&r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:s.map(j=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(j.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[r.jsx(rX,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),j.patientName," (Token: ",j.patientTokenNumber,")"]}),r.jsx("span",{className:b(j.status),children:x(j.status).text})]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(Ta,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",j.id]}),r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(YJ,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",j.tests.join(", ")]}),r.jsxs("div",{children:[r.jsx(VD,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",j.date]})]})]},j.id))}),!a&&s.length===0&&!l&&e.trim()&&r.jsxs("div",{className:"no-data-message",children:['No results found for "',e,'".']}),!a&&s.length===0&&!l&&!e.trim()&&r.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},bIe=()=>{const{patientId:t}=Fa(),e=Lt(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(null),[f,p]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){l("Patient ID is missing from the URL."),s(!1);return}s(!0),l(null),a([]),p(null);try{const b=await se(`/api/patients/${t}`);if(b.ok){const _=await b.json();p(_.name||`Patient ID: ${t}`)}else console.warn(`Failed to fetch patient name for ID ${t}`),p(`Patient ID: ${t}`);const j=await se(`/api/lab/patient/${t}`);if(!j.ok){const _=await j.json().catch(()=>({}));throw new Error(_.message||`HTTP error! status: ${j.status}`)}const S=await j.json();a(S||[])}catch(b){console.error("Error fetching data:",b),l(`Failed to load data: ${b.message}`)}finally{s(!1)}})()},[t]);const g=x=>{x.report_content?e(`/lab/view-report/${x.id}`):e(`/lab/enter-report/${x.id}`)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{margin:0},children:["Lab Reports ",f?`for ${f}`:`for Patient ID: ${t}`]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:async()=>{if(!t){alert("Patient ID is missing. Cannot create a new report.");return}try{const x=await se("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:t})});if(!x.ok){const j=await x.json().catch(()=>({message:`Failed to create new lab order: ${x.status}`}));throw new Error(j.message||`Failed to create new lab order: ${x.status}`)}const b=await x.json();e(`/lab/enter-report/${b.newOrderId}`)}catch(x){console.error("Error creating new lab order:",x),alert(`Error creating new lab order: ${x.message}`)}},className:"lab-inventory-button",disabled:!t,title:t?"Enter a new lab report for this patient":"Patient ID missing",children:[r.jsx(Ps,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),r.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[r.jsx(on,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),r.jsx("div",{style:{marginTop:"20px"},children:i?r.jsx("div",{className:"skeleton-reports-list",children:[1,2,3].map(x=>r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[r.jsx(te,{variant:"circular",width:24,height:24,style:{marginRight:"15px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx(te,{width:"40%",height:20,style:{marginBottom:"8px"}}),r.jsx(te,{width:"60%",height:16})]})]}),r.jsx("div",{style:{marginLeft:"10px"},children:r.jsx(te,{width:80,height:24,style:{borderRadius:"12px"}})})]},x))}):o?r.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[r.jsx(nZ,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),r.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),r.jsx("p",{children:o})]}):n.length===0?r.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Ta,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),r.jsx("p",{children:"No lab reports found for this patient."}),r.jsxs("p",{children:["You can ",r.jsx(_r,{to:`/lab/create-order/${t}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):c?r.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",c.report_date?mf(new Date(c.report_date),"PPP p"):"N/A"]}),r.jsxs("button",{onClick:()=>d(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[r.jsx(on,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),r.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[r.jsx("strong",{children:"Tests Ordered:"})," ",(c.tests||[]).map(x=>x.name).join(", ")]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:r.jsx(wf,{remarkPlugins:[Nf],children:c.report_content||"*No findings recorded.*"})})]}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:n.map(x=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(x),tabIndex:0,onKeyPress:b=>b.key==="Enter"&&g(x),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Ta,{size:24,style:{marginRight:"15px",color:"#007bff"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",mf(new Date(x.createdAt),"PPP")]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",x.tests&&x.tests.length>0?x.tests.map(b=>b.name).join(", "):"N/A"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x.status&&r.jsx("span",{className:wIe(x.status),children:jIe(x.status)}),r.jsx(pd,{size:20,style:{color:"#6c757d"}})]})]},x.id))})})]})})},jIe=t=>{if(!t)return"Unknown";switch(t.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return t.charAt(0).toUpperCase()+t.slice(1)}},wIe=t=>{if(!t)return"status-badge";switch(t.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},SG=()=>{const t=Lt(),[e]=Sz(),n=e.get("search")||"",[a,i]=v.useState("pharmacy");return Yc(void 0,300),r.jsxs("div",{className:"inventory-management-container",style:{padding:"10px 15px",backgroundColor:"var(--background-color)",minHeight:"100vh"},children:[r.jsxs("div",{className:"inventory-header",style:{marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"action-icon-button",title:"Go Back",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-primary)"},children:r.jsx(on,{size:20})}),r.jsx("h1",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700",color:"var(--text-primary)"},children:"Inventory Management"})]}),r.jsxs("div",{className:"inventory-tabs",style:{display:"flex",gap:"4px",backgroundColor:"var(--card-bg, #f3f4f6)",padding:"3px",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("button",{onClick:()=>i("pharmacy"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="pharmacy"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="pharmacy"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="pharmacy"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="pharmacy"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="pharmacy"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(kc,{size:16}),"Pharmacy Stock"]}),r.jsxs("button",{onClick:()=>i("lab"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="lab"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="lab"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="lab"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="lab"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="lab"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(ls,{size:16}),"Lab Stock"]})]})]}),r.jsx("div",{className:"inventory-content",style:{backgroundColor:"var(--card-bg, #fff)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:a==="pharmacy"?r.jsx(jG,{isEmbedded:!0,initialSearch:n}):r.jsx(OM,{isEmbedded:!0})})]})},NIe=({fetchWithAuth:t})=>{const e=Lt(),[n,a]=v.useState(!0),[i,s]=v.useState([]),[o,l]=v.useState(null),[c,d]=v.useState(null),f=v.useCallback(async()=>{a(!0),l(null);try{const b=await(await t("/staff")).json();s(b.map(j=>({...j,id:j._id||j.id})))}catch(x){l(`Failed to load staff data: ${x.message}`),s([])}finally{a(!1)}},[t]);v.useEffect(()=>{f()},[f]),v.useEffect(()=>{if(c){const x=setTimeout(()=>d(null),5e3);return()=>clearTimeout(x)}},[c]);const p=x=>{switch(x){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},g=x=>{switch(x){case"doctor":return r.jsx(bf,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return r.jsx(Qz,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return r.jsx(kc,{size:16,className:"mr-2 text-purple-600"});case"lab":return r.jsx(ls,{size:16,className:"mr-2 text-yellow-600"});case"admin":return r.jsx(dd,{size:16,className:"mr-2 text-teal-600"});default:return r.jsx(Ds,{size:16,className:"mr-2 text-gray-500"})}};return n?r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(te,{width:40,height:40,variant:"circular"}),r.jsx(te,{width:200,height:32})]}),r.jsx(te,{width:150,height:40})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:60,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(te,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(te,{width:80,height:32})})]},x))})]})})]}):r.jsxs("div",{className:"staff-page-container",children:[c&&r.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[c.type==="success"?r.jsx(Go,{size:18,className:"mr-2"}):r.jsx(Wr,{size:18,className:"mr-2"}),r.jsx("span",{children:c.message}),r.jsx("button",{onClick:()=>d(null),className:"ml-auto text-xl font-bold",children:""})]}),o&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[r.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),o,r.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(on,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),r.jsxs("button",{onClick:()=>e("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[r.jsx(Hn,{size:16,className:"mr-2"})," Add New Staff"]})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0&&!n?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):i.map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:x.name}),r.jsx("td",{className:"hidden md:table-cell",children:x.email}),r.jsx("td",{children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(x.role)}`,children:[g(x.role),x.role.charAt(0).toUpperCase()+x.role.slice(1)]})}),r.jsx("td",{className:"hidden md:table-cell",children:x.role==="doctor"?x.opd_fee?parseFloat(String(x.opd_fee)).toFixed(2):"Not Set":"N/A"}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="active"?"Active":"Inactive"})}),r.jsx("td",{className:"actions",children:r.jsxs("button",{onClick:()=>e(`/dashboard/staff/edit/${x.id}`),className:"edit-link",disabled:x.role==="admin",title:"Edit Staff",children:[r.jsx($i,{size:16})," Edit"]})})]},x.id))})]})})]})},OB=()=>{var le,J,ae,ue,ee,Ne,Te,Fe,xe,ne,oe,_e,De,Q,ge,de,fe,Ee,Ye;const{patientId:t,billId:e}=Fa(),n=Lt(),[a,i]=v.useState(null),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(""),[p,g]=v.useState("cash"),[x,b]=v.useState(!1),[j,S]=v.useState(""),[_,T]=v.useState(""),[C,P]=v.useState(""),[k,E]=v.useState(""),[I,L]=v.useState([]),[$,q]=v.useState(""),[F,H]=v.useState(!1),[V,X]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Y=()=>{V.length<5&&X($e=>[...$e,{id:Date.now().toString(),method:"cash",amount:0}])},z=$e=>{V.length>2&&X(We=>We.filter(it=>it.id!==$e))},G=($e,We,it)=>{X(wt=>wt.map(we=>we.id===$e?We==="method"?{...we,method:it}:{...we,amount:Math.max(0,it)}:we))},ie=($e,We)=>{const it=V.filter(we=>we.id!==$e).reduce((we,Xe)=>we+Xe.amount,0),wt=Math.max(0,We-it);X(we=>we.map(Xe=>Xe.id===$e?{...Xe,amount:wt}:Xe))},[W,B]=v.useState([]),[ce,je]=v.useState(0),K=((le=a==null?void 0:a.patient)==null?void 0:le.insurance_type)==="no_cash_insurance";v.useEffect(()=>{g(K?"no_cash_insurance":"cash")},[K]),v.useEffect(()=>{e&&(async()=>{o(!0),c(null);try{const[We,it,wt]=await Promise.all([se(`/api/bills/${e}`),se("/api/clinics/settings").catch(()=>null),se(`/api/bills?patientId=${t}`).catch(()=>null)]);if(!We.ok)throw new Error(`HTTP error! status: ${We.status}`);const we=await We.json();if(!we||!we.bill||!we.calculated)throw new Error("Incomplete data structure received from backend.");if(we.bill.type!=="admission")throw new Error(`Unexpected bill type: ${we.bill.type}. Expected 'admission'.`);const Xe=Array.isArray(we.admissionPayments)?we.admissionPayments:[];if(i({...we.bill,amount:we.bill.amount,created_at:we.bill.createdAt||we.bill.created_at,items:(we.bill.items||[]).map(Je=>({...Je,price:parseFloat(Je.price)||0,quantity:parseInt(Je.quantity)||1})),AdmissionPayments:Xe,calculated:we.calculated,admissionRecord:we.admissionRecord,patient:we.bill.Patient?{id:we.bill.Patient.id,name:we.bill.Patient.name,admission_date:we.bill.Patient.admission_date,discharge_date:we.bill.Patient.discharge_date,token:we.bill.Patient.patient_token_number||we.bill.Patient.token,insurance_type:we.bill.Patient.insurance_type}:void 0}),it&&it.ok){const Je=await it.json();S(Je.name||""),T(Je.address||""),P(Je.notes||""),E(Je.upi_id||"")}try{const Je=await se(`/api/patients/${t}/admission-payments`);if(Je.ok){const ct=await Je.json();L(ct)}}catch(Je){console.error("Failed to fetch payment history:",Je)}if(wt&&wt.ok){const ct=((await wt.json()).bills||[]).filter(bt=>bt.type==="admission"&&bt.id!==e).map(bt=>{var ot,Tt;const ke=bt.AdmissionRecord;return{id:bt.id,amount:ke?parseFloat(ke.total_amount):parseFloat(bt.amount)||0,status:ke?ke.balance<=0||ke.status==="discharged"&&ke.balance<=0?"paid":"pending":bt.status,created_at:bt.createdAt||bt.created_at,admission_date:ke?ke.admission_date:((ot=bt.Patient)==null?void 0:ot.admission_date)||bt.admission_date,discharge_date:ke?ke.discharge_date:((Tt=bt.Patient)==null?void 0:Tt.discharge_date)||bt.discharge_date,admissionRecord:ke}});B(ct);const Ct=ct.filter(bt=>bt.admissionRecord?bt.admissionRecord.balance>0:bt.status!=="paid").reduce((bt,ke)=>ke.admissionRecord?bt+(typeof ke.admissionRecord.balance=="string"?parseFloat(ke.admissionRecord.balance):ke.admissionRecord.balance):bt+ke.amount,0);je(Ct)}}catch(We){console.error("Failed to fetch admission bill details:",We),c(We instanceof Error?We.message:"An unknown error occurred")}finally{o(!1)}})()},[e,t]),v.useEffect(()=>{(async()=>{if(!e){if(!t){c("Patient ID is missing."),o(!1);return}try{o(!0);const We=await se(`/api/patients/${t}`);if(We.ok){const it=await We.json();if(it){if(it.admission_date&&!it.discharge_date){const we=await se(`/api/patients/${t}/active-bill?type=admission`);if(we.ok){const Xe=await we.json();if(Xe&&Xe.id){n(`/patient/${t}/admission-bill/${Xe.id}`,{replace:!0});return}}}i({id:0,patient_id:it.id,type:"admission",amount:"0",status:"pending",created_at:new Date().toISOString(),AdmissionPayments:[],calculated:{totalPaid:0,totalDue:0,balance:0,daysStayed:0,perDayCharge:0},patient:{id:it.id,name:it.name,admission_date:it.admission_date,discharge_date:it.discharge_date,token:it.token,insurance_type:it.insurance_type}});const wt=await se(`/api/bills?patientId=${t}`);if(wt.ok){const Xe=((await wt.json()).bills||[]).filter(Je=>Je.type==="admission").map(Je=>{var Ct,bt;const ct=Je.AdmissionRecord;return{id:Je.id,amount:ct?parseFloat(ct.total_amount):parseFloat(Je.amount)||0,status:ct?ct.balance<=0||ct.status==="discharged"&&ct.balance<=0?"paid":"pending":Je.status,created_at:Je.createdAt||Je.created_at,admission_date:ct?ct.admission_date:((Ct=Je.Patient)==null?void 0:Ct.admission_date)||Je.admission_date,discharge_date:ct?ct.discharge_date:((bt=Je.Patient)==null?void 0:bt.discharge_date)||Je.discharge_date,admissionRecord:ct}});B(Xe)}}else c("Patient not found")}}catch(We){console.error("Error fetching patient status:",We),c("Failed to load patient details")}finally{o(!1)}}})()},[t,e,n]);const Ie=async()=>{if(t){b(!0);try{const $e=await se(`/api/patients/${t}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!$e.ok){const it=await $e.json();throw new Error(it.message||"Failed to admit patient")}const We=await $e.json();We.bill&&We.bill.id?n(`/patient/${t}/admission-bill/${We.bill.id}`):window.location.reload()}catch($e){c($e instanceof Error?$e.message:"Failed to admit patient"),b(!1)}}},Ue=async()=>{if(t&&window.confirm("Are you sure you want to discharge this patient? This will finalize the bill.")){b(!0);try{const $e=await se(`/api/patients/${t}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!$e.ok){const We=await $e.json();throw new Error(We.message||"Failed to discharge patient")}window.location.reload()}catch($e){c($e instanceof Error?$e.message:"Failed to discharge patient"),b(!1)}}},ze=((J=a==null?void 0:a.patient)==null?void 0:J.admission_date)&&!((ae=a==null?void 0:a.patient)!=null&&ae.discharge_date),Le=!!((ue=a==null?void 0:a.patient)!=null&&ue.discharge_date);v.useEffect(()=>{var it,wt;const We=Number(((it=a==null?void 0:a.calculated)==null?void 0:it.balance)??((wt=a==null?void 0:a.admissionRecord)==null?void 0:wt.balance)??0)+ce;if(We>0&&k){const we=`upi://pay?pa=${k}&pn=${encodeURIComponent(j||"Clinic")}&am=${We.toFixed(2)}&cu=INR`;q(we)}else q("")},[a,ce,k,j]);const be=V.reduce(($e,We)=>$e+We.amount,0),Ce=async $e=>{var we,Xe;$e.preventDefault();const it=Number(((we=a==null?void 0:a.calculated)==null?void 0:we.balance)??((Xe=a==null?void 0:a.admissionRecord)==null?void 0:Xe.balance)??0)+ce,wt=F?be:parseFloat(d);if(!t||wt<=0||wt>it+.1){c(`Please enter a valid amount. Max payable: ${it.toFixed(2)}`);return}c(null),b(!0);try{if(F){for(const Ct of V)if(Ct.amount>0){const bt=await se(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:Ct.amount,payment_mode:Ct.method})});if(!bt.ok){const ke=await bt.json();throw new Error(ke.message||`Failed to record ${Ct.method} payment`)}}}else{const Ct=await se(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(d),payment_mode:p})});if(!Ct.ok){const bt=await Ct.json();throw new Error(bt.message||`HTTP error! status: ${Ct.status}`)}}const ct=await(await se(`/api/bills/${e}`)).json();if(ct&&ct.bill&&ct.calculated&&ct.admissionPayments)i({...ct.bill,amount:parseFloat(ct.bill.amount),AdmissionPayments:ct.admissionPayments,calculated:ct.calculated,patient:ct.bill.Patient?{id:ct.bill.Patient.id,name:ct.bill.Patient.name,admission_date:ct.bill.Patient.admission_date,discharge_date:ct.bill.Patient.discharge_date,token:ct.bill.Patient.token,insurance_type:ct.bill.Patient.insurance_type}:void 0});else throw new Error("Invalid data structure received after payment submission.");f(""),g("cash"),F&&(X([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),H(!1)),setTimeout(()=>{window.print()},100)}catch(Je){console.error("Failed to submit payment:",Je),c(Je instanceof Error?Je.message:"Failed to record payment")}finally{b(!1)}},Ae=()=>{window.print()};if(s)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(te,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]})]})]})})]})]})});if(l)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>n(-1),className:"back-button",children:r.jsx(on,{size:20})}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"error-message-box",children:["Error: ",l]})]})});if(!a||!a.calculated)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"error-message-box",children:"No bill details found or data is incomplete."})});const me=Number(a.calculated&&a.calculated.balance!==void 0?a.calculated.balance:a.admissionRecord?a.admissionRecord.balance:0),ye=a.status==="paid"||me<=0;return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"ADMISSION BILL"}),r.jsx("h2",{className:"clinic-name-print",children:j||"Hospital"}),(_||C)&&r.jsxs("div",{className:"clinic-details-print",children:[_&&r.jsx("span",{className:"small-text clinic-address",children:_}),C&&r.jsx("span",{className:"small-text clinic-notes",children:C})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient"]})," ",((ee=a.patient)==null?void 0:ee.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",((Ne=a.patient)==null?void 0:Ne.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[r.jsx(on,{size:20}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{children:"Patient Information"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[!ze&&!Le&&r.jsxs("button",{onClick:Ie,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(BN,{size:16})," Admit Patient"]}),ze&&r.jsxs("button",{onClick:Ue,disabled:x,className:"secondary-button",style:{fontSize:"0.85em",padding:"6px 12px",background:"#dc3545",color:"white"},children:[r.jsx(HX,{size:16})," Discharge"]}),Le&&r.jsxs("button",{onClick:Ie,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(CJ,{size:16})," Re-Admit"]})]})]}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Te=a.patient)==null?void 0:Te.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",((Fe=a.patient)==null?void 0:Fe.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(TQ,{size:16})," Bill ID"]})," ",a.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Created"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Admission Charges Breakdown"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsxs("tbody",{children:[a.admissionRecord?r.jsxs(r.Fragment,{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]})]}),a.admissionRecord.days_stayed?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString(),a.admissionRecord.discharge_date?` - ${new Date(a.admissionRecord.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.admissionRecord.days_stayed," days"]}),r.jsxs("td",{children:["",Number(a.admissionRecord.per_day_charge).toFixed(2)]}),r.jsxs("td",{children:["",(Number(a.admissionRecord.days_stayed)*Number(a.admissionRecord.per_day_charge)).toFixed(2)]})]}):a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges (Ongoing)",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString()," - Today)"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]}):null]}):r.jsxs(r.Fragment,{children:[a.items&&a.items.length>0?a.items.map(($e,We)=>r.jsxs("tr",{children:[r.jsx("td",{children:We+1}),r.jsx("td",{children:$e.name}),r.jsx("td",{children:$e.quantity}),r.jsxs("td",{children:["",$e.price.toFixed(2)]}),r.jsxs("td",{children:["",($e.price*$e.quantity).toFixed(2)]})]},`item-${We}`)):r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Initial Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]})]}),a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0&&r.jsxs("tr",{children:[r.jsx("td",{children:(((xe=a.items)==null?void 0:xe.length)||1)+1}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",(ne=a.patient)!=null&&ne.admission_date?new Date(a.patient.admission_date).toLocaleDateString():"",(oe=a.patient)!=null&&oe.discharge_date?` - ${new Date(a.patient.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]})]}),r.jsxs("tr",{className:"subtotal-row current-admission-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Current Admission Total"}),r.jsxs("td",{children:["",Number(((_e=a.calculated)==null?void 0:_e.totalDue)??((De=a.admissionRecord)==null?void 0:De.total_amount)??0).toFixed(2)]})]}),W.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("tr",{className:"section-header-row previous-admissions-header",children:r.jsx("td",{colSpan:5,style:{fontWeight:600,textAlign:"center"},children:"Previous Admissions"})}),W.map(($e,We)=>r.jsxs("tr",{className:$e.status!=="paid"?"bill-row-unpaid":"bill-row-paid",children:[r.jsx("td",{children:We+1}),r.jsxs("td",{children:["Admission - ",$e.admission_date?new Date($e.admission_date).toLocaleDateString():"N/A",$e.discharge_date&&r.jsxs("small",{style:{display:"block",color:"inherit",opacity:.8,fontSize:"0.75em"},children:["Discharged: ",new Date($e.discharge_date).toLocaleDateString()]})]}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",$e.amount.toFixed(2)]}),r.jsxs("td",{className:$e.status!=="paid"?"text-danger":"text-success",children:["",$e.amount.toFixed(2),$e.status==="paid"&&r.jsx("small",{style:{marginLeft:"4px"},children:"(Paid)"})]})]},$e.id)),ce>0&&r.jsxs("tr",{className:"subtotal-row unpaid-balance-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Previous Unpaid Balance"}),r.jsxs("td",{children:["",ce.toFixed(2)]})]})]}),r.jsxs("tr",{className:`grand-total-row-dynamic ${ce>0?"grand-total-unpaid":"grand-total-paid"}`,children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"GRAND TOTAL"}),r.jsxs("td",{style:{fontSize:"1.1em"},children:["",(Number(((Q=a.calculated)==null?void 0:Q.totalDue)??((ge=a.admissionRecord)==null?void 0:ge.total_amount)??0)+ce).toFixed(2)]})]})]})]})]}),I.length>0&&r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Payment History"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DATE"}),r.jsx("th",{children:"MODE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsx("tbody",{children:I.map(($e,We)=>{var it;return r.jsxs("tr",{children:[r.jsx("td",{children:We+1}),r.jsx("td",{children:$e.payment_date?new Date($e.payment_date).toLocaleDateString():"N/A"}),r.jsx("td",{style:{textTransform:"capitalize"},children:((it=$e.payment_mode)==null?void 0:it.replace(/_/g," "))||"N/A"}),r.jsxs("td",{children:["",(Number($e.amount_paid)||0).toFixed(2)]})]},$e.id)})})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",Number(((de=a.calculated)==null?void 0:de.totalDue)??((fe=a.admissionRecord)==null?void 0:fe.total_amount)??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Number(((Ee=a.calculated)==null?void 0:Ee.totalPaid)??((Ye=a.admissionRecord)==null?void 0:Ye.total_paid)??0).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Balance Due: ",me.toFixed(2)]})})]}),$&&me>0&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(La,{value:$,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",(a.calculated.totalDue||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Days Stayed"}),r.jsx("span",{children:a.calculated.daysStayed??0})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{style:{color:"#28a745"},children:["",(a.calculated.totalPaid||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Balance Due"}),r.jsxs("strong",{style:{color:me>0?"#dc3545":"#28a745"},children:["",me.toFixed(2)]})]}),W.length>0&&r.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #dee2e6"},children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",color:"#495057"},children:"Previous Admissions"}),W.map($e=>r.jsxs("div",{className:"summary-row",style:{fontSize:"0.8rem"},children:[r.jsxs("span",{style:{color:"#6c757d"},children:[$e.admission_date?new Date($e.admission_date).toLocaleDateString():"N/A",$e.status!=="paid"&&r.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"(Unpaid)"})]}),r.jsxs("span",{style:{color:$e.status!=="paid"?"#dc3545":"#28a745"},children:["",$e.amount.toFixed(2)]})]},$e.id)),ce>0&&r.jsxs("div",{className:"summary-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e9ecef"},children:[r.jsx("strong",{style:{color:"#dc3545",fontSize:"0.875rem"},children:"Previous Balance"}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",ce.toFixed(2)]})]})]}),ce>0&&r.jsxs("div",{className:"summary-row grand-total-row",style:{marginTop:"0.75rem",background:"#fff3cd"},children:[r.jsx("strong",{style:{color:"#856404"},children:"Total Outstanding"}),r.jsxs("strong",{style:{color:"#856404"},children:["",(me+ce).toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:$&&me>0?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:$,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):me<=0?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#28a745"},children:[r.jsx(dv,{size:48}),r.jsx("p",{style:{marginTop:"10px",fontWeight:600},children:"Fully Paid"})]}):r.jsx("p",{children:"UPI QR code not available."})}),!ye&&r.jsxs("form",{onSubmit:Ce,children:[r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>H(!F),disabled:x,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:F?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:F?"rgba(79, 172, 254, 0.1)":"transparent",color:F?"#4facfe":"#666",cursor:x?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(zo,{size:14}),"Split"]})]}),F?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",be.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:V.map(($e,We)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:We+1}),r.jsxs("select",{value:$e.method,onChange:it=>G($e.id,"method",it.target.value),className:"split-payment-select",disabled:x,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:$e.amount||"",onChange:it=>G($e.id,"amount",parseFloat(it.target.value)||0),className:"split-payment-input",disabled:x})]}),V.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ie($e.id,me+ce),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining balance",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>z($e.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Vn,{size:12})})]})]},$e.id))}),V.length<5&&r.jsxs("button",{type:"button",onClick:Y,className:"split-payment-add-btn",disabled:x,children:[r.jsx(Hn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Max Payable:"}),r.jsxs("span",{style:{fontWeight:600},children:["",(me+ce).toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${be<=me+ce+.1?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:be<=me+ce+.1?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",be.toFixed(2)]})]}),be>me+ce+.1&&r.jsx("div",{className:"split-payment-warning",children:" Amount exceeds balance!"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"payment-input-group",style:{marginBottom:"15px"},children:[r.jsx("label",{htmlFor:"paymentAmount",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Amount ()"}),r.jsx("input",{type:"number",id:"paymentAmount",value:d,onChange:$e=>f($e.target.value),placeholder:`Max ${(me+ce).toFixed(2)}`,min:"0.01",step:"0.01",max:me+ce,className:"payment-mode-select",required:!0})]}),r.jsxs("div",{className:"payment-input-group",children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",value:p,onChange:$e=>g($e.target.value),className:"payment-mode-select",disabled:K,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),K&&r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"})]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{type:"button",onClick:Ae,className:"secondary-button print-preview-button",children:"Print Preview"}),r.jsx("button",{type:"submit",className:"primary-button",disabled:x||!F&&(!d||parseFloat(d)<=0||parseFloat(d)>me+ce)||F&&(be<=0||be>me+ce+.1),children:x?"Processing...":"Record Payment & Print"})]})]}),ye&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:Ae,className:"secondary-button",children:"Print Bill"})})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for choosing our hospital!"}),r.jsx("p",{children:"This is a computer-generated bill and does not require a signature."})]})]})})},SIe=t=>{switch(t){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},_Ie=()=>{const{orderId:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState({}),[g,x]=v.useState(""),[b,j]=v.useState(""),[S,_]=v.useState("cash"),T=v.useMemo(()=>(n==null?void 0:n.medications.reduce((F,H)=>{const V=H.total_price??0,X=V*(H.discount_percentage??0)/100;return F+V-X},0))??0,[n==null?void 0:n.medications]),C=5,P=v.useMemo(()=>!n||!n.medications?0:n.medications.reduce((F,H,V)=>{var W,B;const X=H.drug_id??`index-${V}`,Y=((W=f[X])==null?void 0:W.pack)||0,z=((B=f[X])==null?void 0:B.loose)||0,G=H.pack_price??0,ie=H.loose_price??0;return F+Y*G+z*ie},0),[n,f]),k=v.useCallback(async()=>{if(!t){l("Order ID is missing."),s(!1);return}s(!0),l(null);try{const F=await se(`/api/pharmacy-orders/${t}`);if(!F.ok)throw F.status===404?new Error(`Order with ID ${t} not found.`):new Error(`Failed to fetch order details: ${F.statusText} (${F.status})`);const H=await F.json();console.log("Fetched order data after return:",H);const X=H.medications.map(z=>z.pack_price&&z.loose_price&&z.loose_price>0?{...z,unitsPerPack:Math.round(z.pack_price/z.loose_price)}:{...z,unitsPerPack:0}).map(z=>({...z,discount_percentage:z.discount_percentage??0}));a({...H,medications:X});const Y={};X.forEach((z,G)=>{const ie=z.drug_id??`index-${G}`;Y[ie]={pack:0,loose:0}}),p(Y)}catch(F){console.error("Failed to fetch order details:",F),l(F.message||"Failed to load order details.")}finally{s(!1)}},[t]);v.useEffect(()=>{k()},[k]),v.useEffect(()=>{(async()=>{try{const H=await se("/api/clinics/settings");if(!H.ok)throw new Error("Failed to fetch clinic settings");const V=await H.json();console.log("Fetched clinic settings:",V),x(V.upi_id||"")}catch(H){console.error("Error fetching clinic settings:",H)}})()},[]),v.useEffect(()=>{if((n==null?void 0:n.order_total)!==void 0&&n.order_total>0&&g){const F=`upi://pay?pa=${g}&pn=ClinicName&am=${n.order_total.toFixed(2)}&cu=INR`;j(F)}else j("")},[n==null?void 0:n.order_total,g]);const E=(F,H)=>{a(V=>{if(!V)return null;const X=V.medications.map((z,G)=>(z.drug_id??`index-${G}`)===F?{...z,discount_percentage:isNaN(H)?0:H}:z),Y=X.reduce((z,G)=>{const ie=G.total_price??0,W=ie*(G.discount_percentage??0)/100;return z+ie-W},0);return{...V,medications:X,order_total:Y}})},I=(F,H,V)=>{p(X=>{const Y=V.unitsPerPack||0,G=V.pack_quantity*Y+V.loose_quantity,ie=Math.max(0,Math.min(H,G));let W=0,B=ie;return Y>0&&(W=Math.floor(ie/Y),B=ie%Y),{...X,[F]:{pack:W,loose:B}}})},L=async()=>{const F=n==null?void 0:n.medications.map((H,V)=>{var G,ie;const X=H.drug_id??`index-${V}`,Y=((G=f[X])==null?void 0:G.pack)||0,z=((ie=f[X])==null?void 0:ie.loose)||0;return Y>0||z>0?{drug_id:H.drug_id,name:H.name,pack_quantity:H.pack_quantity,loose_quantity:H.loose_quantity,returnPackQuantity:Y,returnLooseQuantity:z}:null}).filter(H=>H!==null);if(!F||F.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!t){alert("Order ID is missing. Cannot process return.");return}if(!F){alert("Could not prepare items for return.");return}d(!0),l(null);try{const H=await se(`/api/pharmacy-orders/${t}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:F})}),V=await H.json();if(!H.ok)throw new Error(V.message||`Failed to process return: ${H.statusText}`);const X={};n==null||n.medications.forEach((Y,z)=>{const G=Y.drug_id??`index-${z}`;X[G]={pack:0,loose:0}}),p(X),k()}catch(H){console.error("Failed to process return:",H),l(H.message||"An error occurred while processing the return."),alert(`Error processing return: ${H.message||"Unknown error"}`)}finally{d(!1)}};if(i)return r.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(o)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(on,{size:14,className:"mr-1.5"})," Back"]}),r.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",o]})]});if(!n)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(on,{size:14,className:"mr-1.5"})," Back"]}),r.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const $=()=>{window.print()},q=SIe(n.status);return r.jsx("div",{className:"pharmacy-order-details-page",children:r.jsxs("div",{className:"order-details-container printable-section",children:[r.jsxs("div",{className:"order-details-header no-print",children:[r.jsx("h1",{children:"Pharmacy Order Details"}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(on,{size:20})}),r.jsxs("button",{onClick:$,className:"print-button",children:[r.jsx(vf,{size:18})," Print Bill"]})]})]}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{children:"Mahajan Pharmacy"}),r.jsxs("div",{className:"clinic-details-print",children:[r.jsx("span",{className:"small-text clinic-address",children:"D.No: 3-1-289, Plot No. 101, Kabela Center, RR Nagar, Vijayawada  520012."}),r.jsx("span",{className:"small-text clinic-notes",children:"Phone: 93919 44733"}),r.jsx("span",{className:"small-text clinic-license",children:"Licence No:RLF20AP2025003328"})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Patient Name:"})," RESHMA"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Token:"})," 12"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Order Date:"})," 31/10/2025"]})]})]}),r.jsxs("div",{className:"order-info-section no-print",children:[r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Order ID:"})," ",n.id]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Patient:"})," ",n.patientName||"N/A"," (",n.patientTokenNumber||"N/A",")"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleString()]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Prescribed By:"})," ",n.prescribedBy||"N/A"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:`status-pill ${q.text} ${q.bg}`,children:n.status})]})]}),r.jsxs("div",{className:"medications-section",children:[r.jsx("h2",{children:"Medications Ordered"}),n.medications.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"PACK QTY"}),r.jsx("th",{children:"PACK PRICE"}),r.jsx("th",{children:"LOOSE QTY"}),r.jsx("th",{children:"LOOSE PRICE"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"no-print",children:"RETURN PACK QTY"}),r.jsx("th",{className:"no-print",children:"RETURN LOOSE QTY"})]})]})}),r.jsx("tbody",{children:n.medications.map((F,H)=>{var W,B;const V=F.drug_id??`index-${H}`,X=F.total_price??0,Y=X*(F.discount_percentage??0)/100,z=X-Y,G=((W=f[V])==null?void 0:W.pack)||0,ie=((B=f[V])==null?void 0:B.loose)||0;return r.jsxs("tr",{children:[r.jsx("td",{children:F.name}),r.jsx("td",{children:F.pack_quantity??0}),r.jsx("td",{children:F.pack_price!=null?Number(F.pack_price).toFixed(2):"N/A"}),r.jsx("td",{children:F.loose_quantity??0}),r.jsx("td",{children:F.loose_price!=null?Number(F.loose_price).toFixed(2):"N/A"}),r.jsx("td",{children:F.price!=null?Number(F.price).toFixed(2):"N/A"})," ",r.jsx("td",{children:F.price!=null?Number(F.price).toFixed(2):"N/A"})," ",r.jsxs("td",{children:[r.jsx("input",{type:"number",value:F.discount_percentage??0,onChange:ce=>E(V,parseFloat(ce.target.value)),min:"0",max:"100",className:"discount-input-table no-print"}),r.jsxs("span",{className:"print-only",children:[F.discount_percentage??0,"%"]})]}),r.jsxs("td",{children:[C.toFixed(1),"%"]}),r.jsx("td",{children:z.toFixed(2)}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:F.pack_quantity,value:G,onChange:ce=>{const K=(parseInt(ce.target.value,10)||0)*(F.unitsPerPack||0)+ie;I(V,K,F)},className:"return-quantity-input"})}),r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:F.loose_quantity+F.pack_quantity*(F.unitsPerPack||0)-G*(F.unitsPerPack||0),value:ie,onChange:ce=>{const je=parseInt(ce.target.value,10)||0,K=G*(F.unitsPerPack||0)+je;I(V,K,F)},className:"return-quantity-input"})})]})]},V)})})]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",T.toFixed(2)]})}),r.jsxs("div",{className:"order-total-section no-print",children:[r.jsx("span",{className:"total-label",children:"Order Total:"}),r.jsxs("span",{className:"total-amount",children:["",T.toFixed(2)]})]}),r.jsxs("div",{className:"payment-section no-print",children:[r.jsxs("div",{className:"payment-mode-group",children:[r.jsx("label",{htmlFor:"paymentMode",children:"Payment Mode:"}),r.jsxs("select",{id:"paymentMode",value:S,onChange:F=>_(F.target.value),className:"payment-mode-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),b&&r.jsxs("div",{className:"qr-code-container",children:[r.jsx(La,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]})]}),(n.status==="dispensed"||n.status==="billed")&&n.medications.length>0&&r.jsxs("div",{className:"return-action-section no-print",children:[P>0&&r.jsxs("div",{className:"total-refund-display",children:["Total Refund: ",P.toFixed(2)]}),r.jsx("button",{onClick:L,disabled:Object.values(f).every(F=>F.pack===0&&F.loose===0)||c,className:"process-return-button",children:c?r.jsxs(r.Fragment,{children:[r.jsx(wE,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(wE,{size:16,className:"mr-2"})," Process Return"]})})]})]})})},CIe=async()=>{const t=await se("/subscriptions");if(!t.ok)throw new Error("Failed to fetch subscription plans");return await t.json()},TIe=async t=>{const e=await se(`/subscriptions/${t}`);if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(n.message||"Failed to fetch subscription plan details")}return await e.json()},kIe=async t=>{const e=await se("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(n.message||"Failed to create subscription plan")}return await e.json()},AIe=async(t,e)=>{const n=await se(`/subscriptions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(a.message||"Failed to update subscription plan")}return await n.json()},EIe=async t=>{const e=await se(`/subscriptions/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(n.message||"Failed to deactivate subscription plan")}return await e.json()},PIe=async(t,e)=>{const n=await se("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:t,planId:e})});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(a.message||"Failed to initiate Razorpay subscription")}return await n.json()},DIe=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),d=v.useCallback(async()=>{i(!0),o(null);try{const p=await CIe();n(p)}catch(p){o(p.message||"Failed to fetch subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await EIe(p),c({type:"success",message:"Plan deactivated successfully!"}),d()}catch(g){o(g.message||"Failed to deactivate plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Go,{size:18,className:"mr-2 text-green-500"}):r.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ft,{size:16})})]}),r.jsxs("div",{children:[" ",r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:16})}),r.jsx("h1",{children:"Manage Subscription Plans"}),r.jsxs("button",{onClick:()=>t("/dashboard/subscriptions/add"),className:"subscription-btn",children:[r.jsx(Hn,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(te,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx($i,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(Vn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},OIe=()=>{const t=Lt(),[e,n]=v.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const d=g=>{const{name:x,value:b}=g.target;n(j=>({...j,[x]:b}))},f=async g=>{if(g.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await kIe(e),c({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Go,{size:18,className:"mr-2 text-green-500"}):r.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ft,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:d,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:d,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:d,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:d,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:d})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:r.jsx(on,{size:16})}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},MIe=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),d(!1);return}d(!0),p(null);try{const T=await TIe(t);a(T),s({name:T.name,description:T.description||"",price:T.price,period:T.period,interval:T.interval,razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{d(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:P}=T.target;s(k=>({...k,[C]:P}))},S=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await AIe(t,i),x({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const P=C.message||"Failed to update plan.";p(P),x({type:"error",message:P})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Go,{size:18,className:"mr-2"}):r.jsx(Wr,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Ft,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:S,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval||1,onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:r.jsx(on,{size:16})}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},IIe=()=>{const{patientId:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(""),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState("manual"),[b,j]=v.useState(!1),[S,_]=v.useState(null),T=v.useCallback(async()=>{d(!0),p(null);try{const k=await se(`/api/patients/${t}`);if(!k.ok){const $=await k.json();throw new Error($.message||"Failed to fetch patient details")}const E=await k.json();a(E);const I=await se("/api/subscriptions");if(!I.ok){const $=await I.json();throw new Error($.message||"Failed to fetch subscription plans")}const L=await I.json();s(L.filter($=>$.status==="active"))}catch(k){console.error("Error fetching data:",k),p(`Failed to load data: ${k.message}`)}finally{d(!1)}},[t]);v.useEffect(()=>{t?T():(p("Patient ID is missing."),d(!1))},[t,T]);const C=(k,E)=>{const I=new Date(k),L=E.interval||1;switch(E.period){case"daily":I.setDate(k.getDate()+L);break;case"weekly":I.setDate(k.getDate()+L*7);break;case"monthly":I.setMonth(k.getMonth()+L);break;case"yearly":I.setFullYear(k.getFullYear()+L);break;default:console.warn(`Unknown subscription period: ${E.period}. Defaulting to 1 month.`),I.setMonth(k.getMonth()+1)}return I},P=async()=>{if(!t||!o){_("Please select a subscription plan.");return}const k=i.find(E=>E.id===o);if(!k){_("Selected plan details not found.");return}j(!0),_(null);try{const E=new Date,I=C(E,k);if(g==="manual"){const L={subscription_plan_id:o,subscription_status:"active",subscription_start_date:E.toISOString(),subscription_end_date:I.toISOString(),subscription_payment_method:"manual"},$=await se(`/api/patients/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!$.ok){const q=await $.json();throw new Error(q.message||"Failed to start subscription manually")}e("/all-patients")}else if(g==="razorpay"){console.log("Initiating Razorpay subscription for plan:",k);const L=await PIe(t,o);if(L&&L.short_url)window.location.href=L.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch(E){console.error("Error starting subscription:",E),_(`Failed to start subscription: ${E.message}`),j(!1)}};return c?r.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):f?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:f})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(on,{size:16})})]}):n?r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(on,{size:16})}),r.jsxs("h1",{children:[r.jsx(Jn,{size:28})," ","Start Subscription for ",n.name]}),S&&r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",r.jsx("span",{children:S})]}),r.jsxs("div",{className:"subscription-form",children:[" ",r.jsx("h2",{children:"Available Subscription Plans"}),i.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:i.map(k=>r.jsxs("div",{className:`subscription-plan-card ${o===k.id?"selected-plan":""}`,onClick:()=>l(k.id),children:[r.jsx("h3",{children:k.name}),r.jsxs("p",{className:"price",children:["",k.price]}),r.jsxs("p",{className:"duration",children:["Every ",k.interval," ",k.period,k.interval>1?"s":""]}),k.description&&r.jsx("p",{children:k.description})]},k.id))})]}),r.jsxs("div",{className:"subscription-form mb-6",children:[" ",r.jsx("h2",{children:"Select Payment Method"}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:g==="manual",onChange:()=>x("manual"),className:"mr-2"}),r.jsx("span",{children:"Cash (Manual)"})]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:g==="razorpay",onChange:()=>x("razorpay"),className:"mr-2"}),r.jsx("span",{children:"Razorpay"})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:P,disabled:!o||b||i.length===0,className:"subscription-btn",children:[b&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),b?"Starting...":"Start Subscription"]})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Warning: "}),r.jsx("span",{children:"Patient not found."})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(on,{size:16})})]})},RIe=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),d=v.useCallback(async()=>{i(!0),o(null);try{const p=await EM();n(p)}catch(p){o(p.message||"Failed to fetch clinic subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await eDe(p),c({type:"success",message:"Clinic plan deactivated successfully!"}),d()}catch(g){o(g.message||"Failed to deactivate clinic plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Go,{size:18,className:"mr-2 text-green-500"}):r.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ft,{size:16})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(on,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),r.jsxs("button",{onClick:()=>t("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[r.jsx(Hn,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(te,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/clinic-subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx($i,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(Vn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},LIe=()=>{const t=Lt(),[e,n]=v.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const d=g=>{const{name:x,value:b,type:j}=g.target;n(S=>({...S,[x]:j==="number"?parseFloat(b):b}))},f=async g=>{if(g.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await JPe(e),c({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/clinic-subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create clinic plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Go,{size:18,className:"mr-2 text-green-500"}):r.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ft,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Clinic Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:d,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:d,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:d,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:d,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:d})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},FIe=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),d(!1);return}d(!0),p(null);try{const T=await XPe(t);a(T),s({name:T.name,description:T.description||"",price:Number(T.price),period:T.period,interval:Number(T.interval),razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch clinic plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{d(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:P,type:k}=T.target;s(E=>({...E,[C]:k==="number"?parseFloat(P):P}))},S=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await ZPe(t,i),x({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const P=C.message||"Failed to update clinic plan.";p(P),x({type:"error",message:P})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Go,{size:18,className:"mr-2"}):r.jsx(Wr,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Ft,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Clinic Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:S,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval!==void 0?i.interval:"",onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},$Ie=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(""),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(null),x=v.useCallback(async()=>{c(null);try{const S=(await EM()).filter(_=>_.status==="active");n(S),S.length>0&&!a&&i(S[0].id)}catch(j){console.error("Error fetching plans:",j),c(`Failed to load subscription plans: ${j.message}`)}},[]);v.useEffect(()=>{(async()=>{o(!0);try{const S=await nDe();if(S&&S.short_url){window.location.href=S.short_url,c("You have a pending subscription. Redirecting to payment...");return}await x()}catch(S){console.error("Error during initial page load:",S),c(`An unexpected error occurred: ${S.message}`)}finally{o(!1)}})()},[x]);const b=async()=>{if(!a){g("Please select a clinic subscription plan.");return}const j=e.find(S=>S.id===a);if(!j){g("Selected plan details not found.");return}f(!0),g(null);try{console.log("Initiating Razorpay clinic subscription for plan:",j);const S=await tDe(a);if(S&&S.short_url)window.location.href=S.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(S){console.error("Error starting clinic subscription:",S),g(`Failed to start clinic subscription: ${S.message}`),f(!1)}};return s?r.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):l?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:l})]}),r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:16})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:16})}),r.jsxs("h1",{children:[r.jsx(FQ,{size:28}),"Buy Pro Plan for Clinic"]}),p&&r.jsx("div",{className:"error-alert-subscription",role:"alert",children:r.jsx("span",{children:p})}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h2",{children:"Available Pro Plans"}),e.length===0?r.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:e.map(j=>r.jsxs("div",{className:`subscription-plan-card ${a===j.id?"selected-plan":""}`,onClick:()=>i(j.id),children:[r.jsx("h3",{children:j.name}),r.jsxs("p",{className:"price",children:["",Number(j.price).toFixed(2)]}),r.jsxs("p",{className:"duration",children:["Every ",j.interval," ",j.period,j.interval>1?"s":""]}),j.description&&r.jsx("p",{children:j.description})]},j.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:b,disabled:!a||d||e.length===0,className:"subscription-btn",children:[d&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),d?"Initiating Payment...":"Buy Pro Plan"]})})]})},BIe=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(null),[j,S]=v.useState({name:"",email:"",password:"",role:"user"}),[_,T]=v.useState({name:"",email:"",role:"",password:"",confirmPassword:""}),[C,P]=v.useState(""),[k,E]=v.useState(""),[I,L]=v.useState({}),[$,q]=v.useState(!1),[F,H]=v.useState(null),[V,X]=v.useState([]),[Y,z]=v.useState(""),[G,ie]=v.useState(!1),[W,B]=v.useState(null);v.useEffect(()=>{const Ae=setTimeout(()=>{E(C)},500);return()=>{clearTimeout(Ae)}},[C]),v.useEffect(()=>{ce(k)},[k]);const ce=async(Ae="")=>{i(!0);try{const me=Ae?`/api/users?search=${encodeURIComponent(Ae)}`:"/api/users",le=await(await se(me)).json();if(n(le),le.length>0){const J=[...new Set(le.map(ue=>ue.clinic_id).filter(ue=>!!ue))],ae={};await Promise.all(J.map(async ue=>{try{const ee=await QPe(ue);ae[ue]=ee}catch(ee){console.error(`Failed to fetch subscription status for clinic ${ue}`,ee),ae[ue]={hasProPlan:!1}}})),L(ae)}c(null)}catch(me){c("Failed to fetch users."),console.error(me)}finally{i(!1),o(!1)}},je=async Ae=>{Ae.preventDefault();try{await se("/users",{method:"POST",body:JSON.stringify(j)}),f(!1),S({name:"",email:"",password:"",role:"user"}),ce()}catch(me){c("Failed to add user."),console.error(me)}},K=async Ae=>{if(Ae.preventDefault(),!x)return;const{password:me,confirmPassword:ye,...le}=_,J={...le};if(me){if(me.length<6){c("Password must be at least 6 characters long.");return}if(me!==ye){c("Passwords do not match.");return}J.password=me}try{await se(`/users/${x.id}`,{method:"PUT",body:JSON.stringify(J)}),g(!1),b(null),T({..._,password:"",confirmPassword:""}),ce()}catch(ae){c("Failed to update user."),console.error(ae)}},Ie=async Ae=>{if(window.confirm("Are you sure you want to delete this user?"))try{await se(`/users/${Ae}`,{method:"DELETE"}),ce()}catch(me){c("Failed to delete user."),console.error(me)}},Ue=Ae=>{b(Ae),T({name:Ae.name,email:Ae.email,role:Ae.role,password:"",confirmPassword:""}),g(!0)},ze=async()=>{ie(!0);try{const Ae=await EM();X(Ae),Ae.length>0&&z(Ae[0].id),B(null)}catch(Ae){B("Failed to fetch subscription plans."),console.error(Ae)}finally{ie(!1)}},Le=Ae=>{H(Ae),q(!0),ze()},be=async Ae=>{if(Ae.preventDefault(),!F||!Y){c("Please select a clinic and a plan.");return}try{await se("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:F,planId:Y})}),q(!1),H(null),z(""),ce(),c(null)}catch(me){c("Failed to manually activate clinic subscription."),console.error(me)}},Ce=async Ae=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await YPe(Ae),ce(),c(null)}catch(me){c("Failed to cancel subscription."),console.error(me)}};return a&&s?r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("div",{className:"back-button",style:{width:80,height:32},children:r.jsx(te,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(te,{width:200,height:32})})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx(te,{width:"100%",height:40,style:{maxWidth:"300px"}}),r.jsx(te,{width:150,height:40})]}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(Ae=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(te,{width:150,height:32})})]},Ae))})]})]}):l&&s?r.jsx("div",{className:"error-message",children:l}):r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{className:"w-4 h-4"})}),r.jsx("h1",{children:"User Management"})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:C,onChange:Ae=>P(Ae.target.value),className:"search-input"}),r.jsx("button",{onClick:()=>f(!0),className:"add-user-button",children:"Add New User"})]}),d&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>f(!1),children:""}),r.jsx("h2",{children:"Add New User"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:j.name,onChange:Ae=>S({...j,name:Ae.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:j.email,onChange:Ae=>S({...j,email:Ae.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",value:j.password,onChange:Ae=>S({...j,password:Ae.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:j.role,onChange:Ae=>S({...j,role:Ae.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Add User"})]})]})}),p&&x&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>g(!1),children:""}),r.jsx("h2",{children:"Edit User"}),r.jsxs("form",{onSubmit:K,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:_.name,onChange:Ae=>T({..._,name:Ae.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:_.email,onChange:Ae=>T({..._,email:Ae.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:_.role,onChange:Ae=>T({..._,role:Ae.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"New Password (optional):"}),r.jsx("input",{type:"password",value:_.password,onChange:Ae=>T({..._,password:Ae.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm New Password:"}),r.jsx("input",{type:"password",value:_.confirmPassword,onChange:Ae=>T({..._,confirmPassword:Ae.target.value})})]}),r.jsx("button",{type:"submit",children:"Update User"})]})]})}),$&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>q(!1),children:""}),r.jsx("h2",{children:"Select Subscription Plan for Clinic"}),G&&r.jsx("div",{children:"Loading plans..."}),W&&r.jsx("div",{className:"error-message",children:W}),!G&&!W&&V.length===0&&r.jsx("div",{children:"No active subscription plans available."}),!G&&!W&&V.length>0&&r.jsxs("form",{onSubmit:be,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Plan:"}),r.jsx("select",{value:Y,onChange:Ae=>z(Ae.target.value),required:!0,children:V.map(Ae=>r.jsxs("option",{value:Ae.id,children:[Ae.name," - $",Ae.price,"/",Ae.interval," ",Ae.period]},Ae.id))})]}),r.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(Ae=>{const me=Ae.clinic_id||"N/A",ye=me!=="N/A"?I[me]:null,le=(ye==null?void 0:ye.hasProPlan)??!1,J=le?"PRO":"Standard";return r.jsxs("tr",{children:[r.jsx("td",{children:Ae.name}),r.jsx("td",{children:Ae.email}),r.jsx("td",{children:Ae.role}),r.jsx("td",{children:me}),r.jsx("td",{children:me!=="N/A"?r.jsx("span",{className:le?"pro-badge":"standard-badge",children:J}):"N/A"}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>Ue(Ae),className:"edit-button",children:"Edit"}),r.jsx("button",{onClick:()=>Ie(Ae.id),className:"delete-button",children:"Delete"}),Ae.clinic_id&&!le&&r.jsx("button",{onClick:()=>Le(Ae.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),Ae.clinic_id&&le&&r.jsx("button",{onClick:()=>Ce(Ae.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},Ae.id)})})]})]})},zIe="_modalOverlay_cydw9_3",qIe="_modalContent_cydw9_29",UIe="_modalHeader_cydw9_53",VIe="_modalTitle_cydw9_71",HIe="_modalCloseButton_cydw9_83",GIe="_modalBody_cydw9_111",WIe="_formGroup_cydw9_119",KIe="_inputField_cydw9_143",YIe="_errorText_cydw9_177",QIe="_successText_cydw9_195",XIe="_modalFooter_cydw9_213",JIe="_button_cydw9_229",ZIe="_buttonPrimary_cydw9_249",eRe="_buttonSecondary_cydw9_267",Ei={modalOverlay:zIe,modalContent:qIe,modalHeader:UIe,modalTitle:VIe,modalCloseButton:HIe,modalBody:GIe,formGroup:WIe,inputField:KIe,errorText:YIe,successText:QIe,modalFooter:XIe,button:JIe,buttonPrimary:ZIe,buttonSecondary:eRe},tRe=({isOpen:t,onClose:e})=>{const[n,a]=v.useState(""),[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState(null);Yc(void 0,t?200:99999),v.useEffect(()=>{t&&g()},[t]);const g=async()=>{s(!0),d(null);try{const b=await se("/api/global-settings/app_gemini_api_key");if(b.ok){const j=await b.json();a(j.value||"")}else b.status}catch(b){console.warn("Could not fetch existing key:",b)}finally{s(!1)}},x=async()=>{l(!0),d(null),p(null);try{if(!(await se("/api/global-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"app_gemini_api_key",value:n})})).ok)throw new Error("Failed to save API Key");p("API Key updated successfully!"),setTimeout(()=>{e(),p(null)},1500)}catch(b){d(b.message||"Error saving key")}finally{l(!1)}};return t?r.jsx("div",{className:Ei.modalOverlay,children:r.jsxs("div",{className:Ei.modalContent,children:[r.jsxs("div",{className:Ei.modalHeader,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(qz,{size:24}),r.jsx("h3",{className:Ei.modalTitle,children:"App Gemini API Key"})]}),r.jsx("button",{onClick:e,className:Ei.modalCloseButton,children:r.jsx(Ft,{size:20})})]}),r.jsxs("div",{className:Ei.modalBody,children:[c&&r.jsx("div",{className:Ei.errorText,children:c}),f&&r.jsx("div",{className:Ei.successText,children:f}),r.jsxs("div",{className:Ei.formGroup,children:[r.jsx("label",{htmlFor:"gemini-key",children:"Gemini API Key"}),i?r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}}):r.jsx("input",{type:"text",id:"gemini-key",value:n,onChange:b=>a(b.target.value),className:Ei.inputField,placeholder:"Enter Gemini API Key (AIza...)",disabled:o})]}),r.jsx("p",{style:{fontSize:"0.9em",color:"var(--secondary-text-color, #666)"},children:"This key will be used as a fallback for all clinics if their specific Gemini API key is not configured."})]}),r.jsxs("div",{className:Ei.modalFooter,children:[r.jsx("button",{onClick:e,className:`${Ei.button} ${Ei.buttonSecondary}`,disabled:o,children:"Cancel"}),r.jsx("button",{onClick:x,className:`${Ei.button} ${Ei.buttonPrimary}`,disabled:o,children:o?"Saving...":"Save Key"})]})]})}):null},nRe=()=>{const[t,e]=v.useState(!1);return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("h1",{className:"admin-panel-title",children:[r.jsx(dd,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),r.jsxs("div",{className:"admin-panel-grid",children:[r.jsxs(_r,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[r.jsx(cd,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Clinic Subscription Plans"}),r.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),r.jsxs(_r,{to:"/dashboard/users",className:"admin-panel-card",children:[r.jsx(Ds,{size:48,className:"card-icon"}),r.jsx("h2",{children:"User Management"}),r.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]}),r.jsxs("div",{className:"admin-panel-card",onClick:()=>e(!0),style:{cursor:"pointer"},children:[r.jsx(qz,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage App Gemini API Key"}),r.jsx("p",{children:"Update the fallback Gemini API key used by the application."})]})]}),r.jsx(tRe,{isOpen:t,onClose:()=>e(!1)})]})},HA="tutorialCurrentStep",rRe=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,d;n(!0);try{const f=await se("/api/drugs/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){i(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((d=p.details)==null?void 0:d.updated)||0,b=`Added: ${g}, Updated: ${x}`;o(b),t(!0,"Default medications imported successfully!","pharmacyImport")}else t(!1,"Failed to import medications.")}catch{t(!1,"Error importing medications.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"One click to populate your inventory."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fo,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(so,{size:18,className:"animate-spin"})," Importing ~80 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Zm,{size:18})," Import Drugs"]})})]})},aRe=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,d;n(!0);try{const f=await se("/api/lab-tests/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){i(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((d=p.details)==null?void 0:d.updated)||0,b=`Added: ${g}, Updated: ${x}`;o(b),t(!0,"Default lab tests imported successfully!","labImport")}else t(!1,"Failed to import lab tests.")}catch{t(!1,"Error importing lab tests.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Setup your lab with common tests."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fo,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(so,{size:18,className:"animate-spin"})," Importing ~25 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ls,{size:18})," Import Tests"]})})]})},iRe=({onOpenCommandBar:t})=>r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Ready to experience the power? Open the command bar to start."}),r.jsx("button",{onClick:t,className:"tutorial-button primary large-button",children:r.jsxs("div",{className:"flex items-center gap-2",children:["Open Command Bar ",r.jsx("span",{className:"shortcut-hint-badge",children:"Ctrl+K"})]})})]}),GA=[{title:"Welcome to Newtons Ai HMS",description:"Your all-in-one clinic management solution. Let's get your clinic ready in less than 2 minutes.",icon:r.jsx(fw,{size:48,className:"step-icon welcome"}),component:null,actionText:"Get Started"},{title:"Pharmacy Setup",description:"Start by populating your pharmacy. We can import a standard list of medicines for you.",icon:r.jsx(Zm,{size:48,className:"step-icon pharmacy"}),component:rRe,actionText:"Next",showSkip:!0},{title:"Lab Configuration",description:"Next, let's set up your lab. Import common lab tests to start generating reports immediately.",icon:r.jsx(ls,{size:48,className:"step-icon lab"}),component:aRe,actionText:"Next",showSkip:!0},{title:"Power at Your Fingertips",description:"The Command Bar is your central hub for everything. Search patients, add orders, or use AI tools instantly.",icon:r.jsx(OQ,{size:48,className:"step-icon ai"}),component:iRe,actionText:null,isLast:!0}],sRe=({onClose:t,onMarkAsSeen:e})=>{const{openCommandBar:n}=Ic(),[a,i]=v.useState(()=>{const S=localStorage.getItem(HA);return S?parseInt(S,10):0}),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(null);v.useEffect(()=>{localStorage.setItem(HA,a.toString()),c(null)},[a]);const p=()=>{o(!0),setTimeout(()=>{i(S=>Math.min(S+1,GA.length-1)),o(!1)},300)},g=(S,_,T)=>{f(S),c(_),S&&(T==="pharmacyImport"||T==="labImport")&&setTimeout(p,1e3)},x=()=>{e(),t(),localStorage.removeItem(HA)},b=()=>{x(),setTimeout(()=>{n()},100)},j=GA[a];return r.jsx("div",{className:"tutorial-overlay",children:r.jsxs("div",{className:`tutorial-card ${s?"fade-out":"fade-in"}`,children:[r.jsxs("div",{className:"tutorial-visual",children:[r.jsx("div",{className:"icon-circle",children:j.icon}),r.jsx("div",{className:"step-indicators",children:GA.map((S,_)=>r.jsx("div",{className:`step-dot ${_===a?"active":""} ${_<a?"completed":""}`},_))})]}),r.jsxs("div",{className:"tutorial-content",children:[r.jsx("button",{className:"close-button",onClick:x,title:"Close Tutorial",children:r.jsx(Ft,{size:20})}),r.jsxs("div",{className:"text-content",children:[r.jsx("h2",{children:j.title}),r.jsx("p",{className:"description",children:j.description})]}),r.jsxs("div",{className:"interactive-area",children:[j.component?r.jsx(j.component,{onActionComplete:g,onOpenCommandBar:b}):null,l&&r.jsx("div",{className:`status-message ${d?"success":"error"}`,children:l})]}),r.jsxs("div",{className:"action-footer",children:[j.showSkip&&r.jsx("button",{onClick:p,className:"tutorial-button text-only",children:"Skip for now"}),j.actionText&&r.jsxs("button",{onClick:p,className:"tutorial-button primary",children:[j.actionText," ",r.jsx(pd,{size:16})]})]})]})]})})},oRe=({isOpen:t,onClose:e,onSuccess:n,medication:a,initialPatient:i,initialItems:s})=>{const[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState(null),[g,x]=v.useState(!1);Yc(void 0,t?200:99999),v.useEffect(()=>{if(t&&a){j([{id:Date.now(),medication_name:a.medicationName,drug_id:null,quantity:a.quantity,tablets_per_day:a.tabletsPerDay||1,number_of_days:a.numberOfDays||30,directions:a.directions||"",notes:a.notes||""}]),_(a.frequencyDays);try{const Le=new Date(a.nextDeliveryDate);isNaN(Le.getTime())||C(Le.toISOString().split("T")[0])}catch(Le){console.error("Error parsing date",Le)}p({id:a.patientId,name:a.patientName,phone:a.patientPhone,patient_token_number:a.patientToken})}else t&&(i||s)?(s&&s.length>0&&j(s),i&&p(i)):t&&!a&&!s&&(j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30),C(""),p(null),l(""))},[t,a,i,s]);const[b,j]=v.useState([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),[S,_]=v.useState(30),[T,C]=v.useState(""),[P,k]=v.useState(null),[E,I]=v.useState(""),[L,$]=v.useState([]),[q,F]=v.useState(!1),[H,V]=v.useState(!1),[X,Y]=v.useState(null),z=v.useRef(null),G=v.useRef(null);v.useEffect(()=>{if(t){const Le=new Date;Le.setDate(Le.getDate()+30),C(Le.toISOString().split("T")[0])}},[t]);const ie=v.useCallback(async Le=>{if(!Le.trim()){d([]);return}x(!0);try{const be=await se(`/api/patients?search=${encodeURIComponent(Le)}&limit=10`);if(be.ok){const Ce=await be.json();d(Ce.patients||[])}}catch(be){console.error("Error searching patients:",be)}finally{x(!1)}},[]);v.useEffect(()=>{z.current&&clearTimeout(z.current),o&&!f?z.current=setTimeout(()=>ie(o),300):d([])},[o,f,ie]);const W=v.useCallback(async Le=>{if(!Le.trim()){$([]);return}F(!0);try{const be=await se(`/api/drugs?search=${encodeURIComponent(Le)}&limit=10`);if(be.ok){const Ce=await be.json();$(Ce.drugs||[])}}catch(be){console.error("Error searching drugs:",be)}finally{F(!1)}},[]);v.useEffect(()=>{G.current&&clearTimeout(G.current),E&&P!==null?G.current=setTimeout(()=>W(E),300):$([])},[E,P,W]);const B=Le=>{if(!Le)return 1;const be=Le.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return be?parseInt(be[1],10):1},ce=Le=>{p(Le),l(`${Le.name} (${Le.patient_token_number})`),d([])},je=(Le,be)=>{const Ce=[...b];Ce[be]={...Ce[be],medication_name:Le.name,drug_id:Le.id,pack_size:B(Le.pack),packs:0,loose:0,quantity:0},j(Ce),k(null),I(""),$([])},K=(Le,be,Ce)=>{const Ae=[...b],me={...Ae[Le]},ye=me.pack_size||1;if(be==="packs"||be==="loose"){const le=parseInt(Ce)||0;be==="packs"&&(me.packs=le),be==="loose"&&(me.loose=le);const J=me.packs||0,ae=me.loose||0;me.quantity=J*ye+ae}else if(be==="tablets_per_day"||be==="number_of_days"){be==="tablets_per_day"&&(me.tablets_per_day=Ce),be==="number_of_days"&&(me.number_of_days=Ce);const le=parseFloat(me.tablets_per_day.toString())||0,J=parseInt(me.number_of_days.toString())||0,ae=Math.ceil(le*J);me.quantity=ae,me.packs=Math.floor(ae/ye),me.loose=ae%ye}else me[be]=Ce;Ae[Le]=me,j(Ae)},Ie=()=>{j([...b,{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:S,directions:"",notes:"",packs:0,loose:0,pack_size:1}])},Ue=Le=>{b.length>1&&j(b.filter((be,Ce)=>Ce!==Le))},ze=async Le=>{if(Le.preventDefault(),Y(null),!f){Y("Please select a patient.");return}if(b.some(Ce=>!Ce.medication_name||Ce.quantity<=0)){Y("Please ensure all items have a medication name and valid quantity.");return}V(!0);try{const Ce={patient_id:f.id,items:b.map(me=>({medication_name:me.medication_name,drug_id:me.drug_id,quantity:me.quantity,tablets_per_day:me.tablets_per_day,number_of_days:me.number_of_days,directions:me.directions,notes:me.notes,frequency_days:S,next_delivery_date:T}))},Ae=await se("/api/recurring-medications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ce)});if(!Ae.ok){const me=await Ae.json();throw new Error(me.message+(me.error?": "+me.error:"")||"Failed to create recurring medication.")}n(),e(),p(null),l(""),j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30)}catch(Ce){Y(Ce.message)}finally{V(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"add-recurring-modal",style:{maxWidth:"800px",width:"95%"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Add Recurring Medication Order"}),r.jsx("button",{className:"close-btn",onClick:e,children:r.jsx(Ft,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[X&&r.jsx("div",{className:"error-message",children:X}),r.jsxs("form",{onSubmit:ze,className:"recurring-form",children:[r.jsxs("div",{className:"order-settings-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsxs("label",{children:[r.jsx(Jn,{size:16})," Patient"]}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patient...",value:o,onChange:Le=>{l(Le.target.value),p(null)},className:f?"selected":"unselected"}),g&&r.jsx("span",{className:"spinner",children:"..."}),o&&!f&&c.length>0&&r.jsx("ul",{className:"suggestions-list",children:c.map(Le=>r.jsxs("li",{onClick:()=>ce(Le),children:[r.jsx("div",{className:"suggestion-name",children:Le.name}),r.jsxs("div",{className:"suggestion-details",children:[Le.phone,"  ",Le.patient_token_number]})]},Le.id))})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(kb,{size:16})," Frequency"]}),r.jsxs("select",{value:S,onChange:Le=>{const be=parseInt(Le.target.value);_(be);const Ce=new Date;Ce.setDate(Ce.getDate()+be),C(Ce.toISOString().split("T")[0]);const Ae=b.map(me=>({...me,number_of_days:be}));j(Ae)},children:[r.jsx("option",{value:15,children:"Every 15 Days"}),r.jsx("option",{value:30,children:"Every 30 Days"}),r.jsx("option",{value:60,children:"Every 60 Days"}),r.jsx("option",{value:90,children:"Every 90 Days"})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(ua,{size:16})," Next Delivery"]}),r.jsx("input",{type:"date",value:T,onChange:Le=>C(Le.target.value)})]})]}),r.jsx("hr",{className:"divider"}),r.jsxs("div",{className:"items-header",children:[r.jsx("h4",{children:"Medications"}),r.jsxs("button",{type:"button",className:"add-item-btn",onClick:Ie,children:[r.jsx(Hn,{size:14})," Add Drug"]})]}),r.jsx("div",{className:"items-list",children:b.map((Le,be)=>r.jsxs("div",{className:"medication-item-row",children:[r.jsxs("div",{className:"row-top",children:[r.jsxs("div",{className:"form-group med-search-group",children:[r.jsx("label",{children:"Drug Name"}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search drug...",value:P===be?E:Le.medication_name,onFocus:()=>{k(be),I(Le.medication_name)},onChange:Ce=>{I(Ce.target.value),K(be,"medication_name",Ce.target.value)}}),P===be&&q&&r.jsx("span",{className:"spinner",children:"..."}),P===be&&E&&L.length>0&&r.jsx("ul",{className:"suggestions-list",children:L.map(Ce=>r.jsxs("li",{onClick:()=>je(Ce,be),children:[r.jsx("div",{className:"suggestion-name",children:Ce.name}),r.jsxs("div",{className:"suggestion-details",children:["Stock: ",Ce.stock]})]},Ce.id))})]})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Tabs/Day"}),r.jsx("input",{type:"number",min:"0.5",step:"0.5",value:Le.tablets_per_day,onChange:Ce=>K(be,"tablets_per_day",Ce.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Days"}),r.jsx("input",{type:"number",min:"1",value:Le.number_of_days,onChange:Ce=>K(be,"number_of_days",Ce.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Packs"}),r.jsx("input",{type:"number",min:"0",value:Le.packs||"",onChange:Ce=>K(be,"packs",Ce.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Loose"}),r.jsx("input",{type:"number",min:"0",value:Le.loose||"",onChange:Ce=>K(be,"loose",Ce.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Total"}),r.jsx("input",{type:"number",value:Le.quantity,disabled:!0,style:{backgroundColor:"#f5f5f5",cursor:"not-allowed"}})]}),r.jsx("button",{type:"button",className:"remove-btn",onClick:()=>Ue(be),disabled:b.length===1,children:r.jsx(Vn,{size:16})})]}),r.jsxs("div",{className:"row-bottom",children:[r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Directions (e.g. 1-0-1 after food)",value:Le.directions,onChange:Ce=>K(be,"directions",Ce.target.value)})}),r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Notes",value:Le.notes,onChange:Ce=>K(be,"notes",Ce.target.value)})})]})]},Le.id))}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-submit",disabled:H,children:H?"Creating...":"Create Recurring Order"})]})]})]})]})}):null},lRe=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(""),[c,d]=v.useState(1),[f,p]=v.useState(1),[g,x]=v.useState(0),[b,j]=v.useState(!1),[S,_]=v.useState(void 0),T=10,C=v.useRef(null);Yc();const P=v.useCallback(async(F,H)=>{a(!0),s(null);try{let V=`/api/recurring-medications?page=${F}&limit=${T}`;H&&(V+=`&search=${encodeURIComponent(H)}`);const X=await se(V);if(!X.ok)throw new Error("Failed to fetch recurring medications.");const Y=await X.json();e(Y.medications),p(Y.totalPages),x(Y.total),d(Y.page)}catch(V){console.error(V),s(V.message||"An error occurred while fetching data.")}finally{a(!1)}},[]);v.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{P(c,o)},500),()=>{C.current&&clearTimeout(C.current)}),[o,c,P]);const k=F=>{l(F.target.value),d(1)},E=F=>{F>=1&&F<=f&&d(F)},I=F=>{_(F),j(!0)},L=()=>{P(c,o),j(!1),_(void 0)},$=F=>F===30?"Every 30 Days (Monthly)":F===15?"Every 15 Days":`Every ${F} Days`,q=F=>{switch(F){case"active":return"status-pill status-pill-active";case"paused":return"status-pill status-pill-paused";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill"}};return r.jsxs("div",{className:"refill-reminders-container",children:[r.jsxs("div",{className:"refill-header",children:[r.jsx("h3",{className:"refill-title",children:"Recurring Medications"}),r.jsxs("div",{className:"refill-actions",children:[r.jsxs("button",{className:"refill-action-button btn-add",onClick:()=>{_(void 0),j(!0)},children:[r.jsx(Ps,{size:16})," Add New"]}),r.jsxs("div",{className:"search-box",children:[r.jsx("input",{type:"text",placeholder:"Search patient, phone, medication...",value:o,onChange:k}),r.jsx(In,{size:18,className:"search-icon"})]})]})]}),i&&r.jsx("div",{className:"error-message-box",children:i}),r.jsx("div",{className:"refill-table-container",children:n?r.jsx("div",{className:"loading-pulse",children:"Loading..."}):t.length===0?r.jsx("div",{className:"empty-state",children:"No recurring medications found."}):r.jsx("div",{className:"refill-grouped-list",children:Object.values(t.reduce((F,H)=>{const V=H.patientId;return F[V]||(F[V]={patientId:H.patientId,patientName:H.patientName,patientPhone:H.patientPhone,patientToken:H.patientToken,medications:[]}),F[V].medications.push(H),F},{})).map(F=>r.jsxs("div",{className:"patient-medication-group-card",children:[r.jsxs("div",{className:"group-header",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("h4",{className:"patient-name",children:F.patientName}),r.jsxs("span",{className:"patient-meta",children:["Token: ",F.patientToken,"  Phone: ",F.patientPhone]})]}),r.jsx("div",{className:"group-actions"})]}),r.jsxs("table",{className:"refill-table group-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Medication"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Frequency"}),r.jsx("th",{children:"Next Delivery"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:F.medications.map(H=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"med-name",children:H.medicationName}),(H.tabletsPerDay||H.numberOfDays||H.directions)&&r.jsxs("div",{className:"med-usage-details",style:{fontSize:"0.8em",color:"#666"},children:[H.tabletsPerDay&&r.jsxs("span",{children:[H.tabletsPerDay," tabs/day  "]}),H.numberOfDays&&r.jsxs("span",{children:[H.numberOfDays," days "]})]}),H.notes&&r.jsxs("div",{className:"med-notes",children:["Note: ",H.notes]})]}),r.jsx("td",{children:H.quantity}),r.jsx("td",{children:r.jsx("span",{className:"frequency-badge",children:$(H.frequencyDays)})}),r.jsx("td",{children:r.jsx("div",{className:"date-display",children:new Date(H.nextDeliveryDate).toLocaleDateString()})}),r.jsx("td",{children:r.jsx("span",{className:q(H.status),children:H.status})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",title:"Edit",onClick:()=>I(H),children:r.jsx($i,{size:16})}),r.jsx("button",{className:"action-btn delete",title:"Delete/Cancel",children:r.jsx(Vn,{size:16})})]})})]},H.id))})]})]},F.patientId))})}),!n&&f>1&&r.jsxs("div",{className:"pagination-container",children:[r.jsxs("span",{className:"pagination-info",children:["Page ",c," of ",f," (Total ",g,")"]}),r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("button",{onClick:()=>E(c-1),disabled:c===1,className:"page-btn",children:[r.jsx(Tb,{size:16})," Prev"]}),r.jsxs("button",{onClick:()=>E(c+1),disabled:c===f,className:"page-btn",children:["Next ",r.jsx(pd,{size:16})]})]})]}),r.jsx(oRe,{isOpen:b,onClose:()=>{j(!1),_(void 0)},onSuccess:L,medication:S})]})},cRe=()=>{const t=Lt(),e=$r();return v.useEffect(()=>{const n=new URLSearchParams(e.search),a=n.get("token"),i=n.get("caseDetails");a?(async()=>{try{const o=await se(`/api/patients?search=${a}&limit=1`);if(!o.ok)throw new Error("Failed to fetch patient by token");const c=(await o.json()).patients[0];if(!c)throw new Error("Patient with the given token not found");const d=await se(`/api/queue/patient/${c.id}/latest`);if(d.ok){const g=await d.json();if(g!=null&&g._id){t(`/dashboard/edit-complaint/${g._id}`,{state:{initialComplaint:i}});return}}const f=await se("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:c.id,complaint:i})});if(!f.ok)throw new Error("Failed to create queue entry");const p=await f.json();if(p!=null&&p.id)t(`/dashboard/edit-complaint/${p.id}`,{state:{initialComplaint:i}});else throw new Error("Failed to get ID from new queue entry.")}catch(o){console.error("Error handling complaint URL:",o),t("/dashboard/search-patient")}})():t("/dashboard/search-patient")},[e,t]),r.jsx("div",{children:"Loading..."})},MB=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(null),[l,c]=v.useState(!1),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_,T]=v.useState(!1),[C,P]=v.useState(null),[k,E]=v.useState([]),[I,L]=v.useState(null),[$,q]=v.useState(""),[F,H]=v.useState(""),[V,X]=v.useState(""),[Y,z]=v.useState(""),[G,ie]=v.useState(""),[W,B]=v.useState(""),[ce,je]=v.useState(""),[K,Ie]=v.useState(""),[Ue,ze]=v.useState(""),[Le,be]=v.useState(""),[Ce,Ae]=v.useState(""),[me,ye]=v.useState("cash"),le=v.useCallback(async()=>{i(!0),o(null);try{const fe=await se("/api/distributors");if(!fe.ok)throw new Error(`Failed to fetch distributors: ${fe.statusText}`);const Ee=await fe.json();n(Ee)}catch(fe){console.error("Failed to fetch distributors:",fe),o(fe.message||"Failed to load distributors.")}finally{i(!1)}},[]);v.useEffect(()=>{le()},[le]);const J=async fe=>{fe.preventDefault(),o(null);try{const Ee=await se("/api/distributors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:$,contact_person:F,phone:V,email:Y,address:G,gst_number:W,drug_license_number:ce})});if(!Ee.ok){const Ye=await Ee.json();throw new Error(Ye.message||"Failed to add distributor.")}Fe(),le()}catch(Ee){console.error("Error adding distributor:",Ee),o(Ee.message||"Failed to add distributor.")}},ae=async fe=>{if(fe.preventDefault(),o(null),!!C)try{const Ee=await se(`/api/distributors/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:$,contact_person:F,phone:V,email:Y,address:G,gst_number:W,drug_license_number:ce})});if(!Ee.ok){const Ye=await Ee.json();throw new Error(Ye.message||"Failed to update distributor.")}ne(),le()}catch(Ee){console.error("Error updating distributor:",Ee),o(Ee.message||"Failed to update distributor.")}},ue=async()=>{if(o(null),!!C)try{const fe=await se(`/api/distributors/${C.id}`,{method:"DELETE"});if(!fe.ok){const Ee=await fe.json();throw new Error(Ee.message||"Failed to delete distributor.")}_e(),le()}catch(fe){console.error("Error deleting distributor:",fe),o(fe.message||"Failed to delete distributor.")}},ee=v.useCallback(async fe=>{o(null);try{const Ee=await se(`/api/distributors/${fe}/payments`);if(!Ee.ok)throw new Error(`Failed to fetch payments: ${Ee.statusText}`);const $e=(await Ee.json()).map(wt=>({...wt,order_value:parseFloat(wt.order_value),amount_paid:parseFloat(wt.amount_paid),balance_remaining:parseFloat(wt.balance_remaining)}));E($e);const We=await se(`/api/distributors/${fe}/balance`);if(!We.ok)throw new Error(`Failed to fetch balance: ${We.statusText}`);const it=await We.json();L({totalOrderValue:parseFloat(it.totalOrderValue),totalAmountPaid:parseFloat(it.totalAmountPaid),remainingBalance:parseFloat(it.remainingBalance)})}catch(Ee){console.error("Error fetching payments/balance:",Ee),o(Ee.message||"Failed to load payments or balance.")}},[]),Ne=async fe=>{if(fe.preventDefault(),o(null),!!C)try{const Ee=await se(`/api/distributors/${C.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:K,order_value:parseFloat(Ue||"0"),amount_paid:parseFloat(Le||"0"),notes:Ce,payment_mode:me})});if(!Ee.ok){const Ye=await Ee.json();throw new Error(Ye.message||"Failed to add payment.")}T(!1),await ee(C.id),S(!0),window.confirm("Payment Recorded. Print Receipt?")&&setTimeout(()=>window.print(),500)}catch(Ee){console.error("Error adding payment:",Ee),o(Ee.message||"Failed to add payment.")}},Te=()=>{q(""),H(""),X(""),z(""),ie(""),B(""),je(""),o(null),f(!0)},Fe=()=>{f(!1)},xe=fe=>{P(fe),q(fe.name),H(fe.contact_person||""),X(fe.phone||""),z(fe.email||""),ie(fe.address||""),B(fe.gst_number||""),je(fe.drug_license_number||""),o(null),g(!0)},ne=()=>{g(!1),P(null)},oe=fe=>{P(fe),o(null),b(!0)},_e=()=>{b(!1),P(null)},De=fe=>{P(fe),ee(fe.id),o(null),S(!0)},Q=()=>{S(!1),P(null),E([]),L(null)},ge=fe=>{P(fe),Ie(new Date().toISOString().split("T")[0]),ze("0"),be("0"),Ae(""),ye("cash"),o(null),T(!0)},de=()=>{T(!1),P(null)};return a?r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",style:{marginBottom:"20px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(te,{width:80,height:36}),r.jsx(te,{width:200,height:32})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx(te,{width:150,height:36}),r.jsx(te,{width:150,height:36}),r.jsx(te,{width:180,height:36})]})]}),r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Contact Person"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(fe=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:150,height:20})}),r.jsx("td",{children:r.jsx(te,{width:120,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:80,height:20})}),r.jsx("td",{children:r.jsx(te,{width:100,height:30})})]},fe))})]})})]}):s?r.jsxs("div",{className:"error-indicator",children:["Error: ",s]}):r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("button",{onClick:()=>t(-1),className:"dmp-button dmp-button-secondary",title:"Go Back",children:[r.jsx(on,{size:20})," Back"]}),r.jsx("h2",{children:"Distributor Management"})]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("div",{className:"view-mode-toggle",style:{display:"flex",gap:"8px"},children:[r.jsxs("button",{onClick:()=>c(!1),className:`dmp-button ${l?"dmp-button-secondary":"dmp-button-primary"}`,title:"List View",children:[r.jsx(Ab,{size:18})," List"]}),r.jsxs("button",{onClick:()=>c(!0),className:`dmp-button ${l?"dmp-button-primary":"dmp-button-secondary"}`,title:"Excel Mode (Edit)",children:[r.jsx(xf,{size:18})," Excel"]})]}),r.jsxs("button",{onClick:Te,className:"dmp-button dmp-button-primary",children:[r.jsx(Ps,{size:18}),"Add Distributor"]})]})]}),(()=>{const fe=e.reduce((Ye,$e)=>Ye+parseFloat($e.remainingBalance||"0"),0),Ee=fe>=0;return r.jsxs("div",{className:"stats-container",children:[r.jsxs("div",{className:`stat-card ${Ee?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Total Balance"}),r.jsxs("span",{className:"value",children:["",fe.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Distributors"}),r.jsx("span",{className:"value",children:e.length})]})]})})(),r.jsx("div",{className:"table-wrapper",children:l?r.jsx(Rb,{columns:[{key:"name",label:"Name",editable:!0,type:"text"},{key:"contact_person",label:"Contact Person",editable:!0,type:"text"},{key:"phone",label:"Phone",editable:!0,type:"text"},{key:"email",label:"Email",editable:!0,type:"text"},{key:"address",label:"Address",editable:!0,type:"text"},{key:"gst_number",label:"GST Number",editable:!0,type:"text"},{key:"drug_license_number",label:"Drug License",editable:!0,type:"text"}],data:e,editable:!0,showRowNumbers:!0,title:"Distributors",onSave:async fe=>{const Ee=fe.map(async Ye=>{const $e=e.find(We=>We.id===Ye.id);if($e&&JSON.stringify($e)!==JSON.stringify(Ye))return se(`/api/distributors/${Ye.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ye)})});try{await Promise.all(Ee),le()}catch(Ye){alert("Error saving changes"),console.error(Ye)}}}):r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name / Contact"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Tax / License"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"2rem",color:"var(--dmp-text-secondary)"},children:"No distributors found."})}):e.map(fe=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"primary-text",children:fe.name}),r.jsx("div",{className:"secondary-text",children:fe.contact_person})]}),r.jsxs("td",{children:[r.jsx("div",{className:"secondary-text",children:fe.phone||"-"}),r.jsx("div",{className:"secondary-text",children:fe.email||"-"}),r.jsx("div",{className:"secondary-text",children:fe.address||"-"})]}),r.jsxs("td",{children:[r.jsxs("div",{className:"secondary-text",children:["GST: ",fe.gst_number||"-"]}),r.jsxs("div",{className:"secondary-text",children:["DL: ",fe.drug_license_number||"-"]})]}),r.jsx("td",{children:r.jsxs("span",{className:`status-badge ${parseFloat(fe.remainingBalance||"0")>0?"balance-ok":"balance-owed"}`,children:["",fe.remainingBalance||"0.00"]})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>De(fe),className:"dmp-button-icon",title:"View Payments & Balance",children:r.jsx(Im,{size:18})}),r.jsx("button",{onClick:()=>ge(fe),className:"dmp-button-icon",title:"Add Payment",children:r.jsx(pw,{size:18})}),r.jsx("button",{onClick:()=>xe(fe),className:"dmp-button-icon edit",title:"Edit Distributor",children:r.jsx($i,{size:18})}),r.jsx("button",{onClick:()=>oe(fe),className:"dmp-button-icon delete",title:"Delete Distributor",children:r.jsx(Vn,{size:18})})]})})]},fe.id))})]})}),d&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:Fe,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Add New Distributor"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem",padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:s}),r.jsxs("form",{onSubmit:J,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"name",children:"Name:"}),r.jsx("input",{type:"text",id:"name",className:"dmp-input",style:{padding:"0.6rem"},value:$,onChange:fe=>q(fe.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"contact_person",className:"dmp-input",style:{padding:"0.6rem"},value:F,onChange:fe=>H(fe.target.value)})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"phone",className:"dmp-input",style:{padding:"0.6rem"},value:V,onChange:fe=>X(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"email",children:"Email:"}),r.jsx("input",{type:"email",id:"email",className:"dmp-input",style:{padding:"0.6rem"},value:Y,onChange:fe=>z(fe.target.value)})]})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"address",children:"Address:"}),r.jsx("textarea",{id:"address",className:"dmp-textarea",style:{padding:"0.6rem",minHeight:"60px"},value:G,onChange:fe=>ie(fe.target.value)})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"gst_number",className:"dmp-input",style:{padding:"0.6rem"},value:W,onChange:fe=>B(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"drug_license_number",children:"Drug License:"}),r.jsx("input",{type:"text",id:"drug_license_number",className:"dmp-input",style:{padding:"0.6rem"},value:ce,onChange:fe=>je(fe.target.value)})]})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("button",{type:"button",onClick:Fe,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Add Distributor"})]})]})]})}),p&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:ne,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Edit Distributor"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem",padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:s}),r.jsxs("form",{onSubmit:ae,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-name",children:"Name:"}),r.jsx("input",{type:"text",id:"edit-name",className:"dmp-input",style:{padding:"0.6rem"},value:$,onChange:fe=>q(fe.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"edit-contact_person",className:"dmp-input",style:{padding:"0.6rem"},value:F,onChange:fe=>H(fe.target.value)})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"edit-phone",className:"dmp-input",style:{padding:"0.6rem"},value:V,onChange:fe=>X(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-email",children:"Email:"}),r.jsx("input",{type:"email",id:"edit-email",className:"dmp-input",style:{padding:"0.6rem"},value:Y,onChange:fe=>z(fe.target.value)})]})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-address",children:"Address:"}),r.jsx("textarea",{id:"edit-address",className:"dmp-textarea",style:{padding:"0.6rem",minHeight:"60px"},value:G,onChange:fe=>ie(fe.target.value)})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"edit-gst_number",className:"dmp-input",style:{padding:"0.6rem"},value:W,onChange:fe=>B(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",style:{marginBottom:"1rem"},children:[r.jsx("label",{className:"dmp-label",style:{fontSize:"0.85rem",marginBottom:"0.4rem"},htmlFor:"edit-drug_license_number",children:"Drug License:"}),r.jsx("input",{type:"text",id:"edit-drug_license_number",className:"dmp-input",style:{padding:"0.6rem"},value:ce,onChange:fe=>je(fe.target.value)})]})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"0.5rem",paddingTop:"1rem",borderTop:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("button",{type:"button",onClick:ne,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Save Changes"})]})]})]})}),x&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:_e,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Confirm Delete"}),r.jsxs("p",{children:['Are you sure you want to delete distributor "',C.name,'"?']}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:_e,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ue,className:"dmp-button dmp-button-primary",style:{backgroundColor:"var(--dmp-danger-color)"},children:"Delete"})]})]})}),j&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal printable-section",style:{maxWidth:"900px"},children:[r.jsx("button",{onClick:Q,className:"dmp-modal-close",children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #e2e8f0",paddingBottom:"0.5rem",marginBottom:"1rem"},children:[r.jsxs("h3",{className:"dmp-modal-title",style:{marginBottom:0},children:["Ledger: ",C.name]}),r.jsxs("button",{onClick:()=>window.print(),className:"dmp-button dmp-button-primary",style:{padding:"0.4rem 0.8rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"8px"},title:"Print Ledger",children:[r.jsx(vf,{size:14})," Print Ledger"]})]}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),I&&r.jsxs("div",{className:"stats-container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.75rem",marginBottom:"1.25rem"},children:[r.jsxs("div",{className:"stat-card",style:{padding:"0.75rem",border:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Order Value"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem"},children:["",I.totalOrderValue.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"stat-card",style:{padding:"0.75rem",border:"1px solid var(--dmp-bg-primary)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Total Paid"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem",color:"var(--dmp-success-color)"},children:["",I.totalAmountPaid.toLocaleString("en-IN",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:`stat-card ${I.remainingBalance>0?"positive":"negative"}`,style:{padding:"0.75rem",border:"1px solid",borderColor:I.remainingBalance>0?"rgba(0, 208, 132, 0.2)":"rgba(255, 77, 79, 0.2)",backgroundColor:I.remainingBalance>0?"rgba(0, 208, 132, 0.05)":"rgba(255, 77, 79, 0.05)"},children:[r.jsx("span",{className:"label",style:{fontSize:"0.7rem"},children:"Balance"}),r.jsxs("span",{className:"value",style:{fontSize:"1.1rem",color:I.remainingBalance>0?"var(--dmp-success-color)":"var(--dmp-danger-color)"},children:["",I.remainingBalance.toLocaleString("en-IN",{minimumFractionDigits:2})]})]})]}),r.jsx("h4",{style:{fontSize:"1rem",marginTop:"1rem",marginBottom:"0.5rem"},children:"Payment History"}),k.length===0?r.jsx("p",{children:"No payments recorded for this distributor."}):r.jsx("div",{className:"table-wrapper",style:{boxShadow:"none",border:"1px solid var(--dmp-bg-primary)"},children:r.jsxs("table",{className:"dmp-table",style:{fontSize:"0.875rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Date"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Order"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Paid"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Balance"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Mode"}),r.jsx("th",{style:{padding:"0.5rem 0.75rem"},children:"Notes"})]})}),r.jsx("tbody",{children:k.map(fe=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(fe.payment_date).toLocaleDateString()}),r.jsxs("td",{"data-label":"Order",style:{fontWeight:500},children:["",fe.order_value.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsxs("td",{"data-label":"Paid",style:{fontWeight:500,color:"var(--dmp-success-color)"},children:["",fe.amount_paid.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsxs("td",{"data-label":"Balance",style:{fontWeight:600},children:["",fe.balance_remaining.toLocaleString("en-IN",{minimumFractionDigits:2})]}),r.jsx("td",{"data-label":"Mode",children:fe.payment_mode?fe.payment_mode.charAt(0).toUpperCase()+fe.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:fe.notes||"",children:fe.notes||"-"})]},fe.id))})]})}),r.jsx("div",{className:"dmp-modal-actions",style:{marginTop:"1rem"},children:r.jsx("button",{type:"button",onClick:Q,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Close"})})]})}),_&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"420px"},children:[r.jsx("button",{onClick:de,className:"dmp-modal-close",children:""}),r.jsx("div",{className:"dmp-modal-header",children:r.jsx("h3",{className:"dmp-modal-title",children:"Add Payment"})}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:Ne,children:[r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_date",children:"Date:"}),r.jsx("input",{type:"date",id:"payment_date",className:"dmp-input",value:K,onChange:fe=>Ie(fe.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_mode",children:"Mode:"}),r.jsxs("select",{id:"payment_mode",className:"dmp-select",value:me,onChange:fe=>ye(fe.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"order_value",children:"Order Value:"}),r.jsx("input",{type:"number",id:"order_value",className:"dmp-input",value:Ue,onChange:fe=>ze(fe.target.value),step:"0.01"})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"amount_paid",children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount_paid",className:"dmp-input",value:Le,onChange:fe=>be(fe.target.value),step:"0.01"})]})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",className:"dmp-textarea",value:Ce,onChange:fe=>Ae(fe.target.value),rows:2,style:{resize:"none"}})]}),r.jsxs("div",{className:"dmp-modal-actions",style:{marginTop:"1.25rem"},children:[r.jsx("button",{type:"button",onClick:de,className:"dmp-button dmp-button-secondary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Add Payment"})]})]})]})})]})},Wj=t=>{if(!t)return"";let e=t.toLowerCase();return e=e.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),e=e.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),e=e.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),e},uRe=(t,e)=>{if(!t||!e||e.length===0)return;const n=Wj(t);let a=e.find(o=>Wj(o.name)===n);if(a)return a;let i=e.find(o=>Wj(o.name).includes(n));if(i)return i;let s=e.find(o=>n.includes(Wj(o.name)));if(s)return s},dRe=({isOpen:t,onClose:e,excelHeaders:n,onConfirm:a,availableFields:i})=>{const[s,o]=v.useState({});if(v.useEffect(()=>{t&&c()},[t,n,i]),!t)return null;const l=(f,p)=>{o(g=>({...g,[f]:p}))},c=()=>{const f={};n.forEach(p=>{const g=i.map(b=>({name:b})),x=uRe(p,g);x&&(f[p]=x.name)}),o(f)},d=()=>{const f={};for(const p in s)s[p]&&s[p]!=="none"&&(f[p]=s[p]);a(f),e()};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content excel-mapping-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h3",{children:"Match File Columns"}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Ft,{size:18})})]}),r.jsx("p",{className:"modal-description",children:'Match file columns to app fields. Use "Auto Match" for suggestions.'}),r.jsx("div",{className:"modal-actions-top",children:r.jsx("button",{type:"button",onClick:c,className:"button-auto-match",children:"Auto Match"})}),r.jsxs("div",{className:"column-mapping-grid",children:[r.jsx("div",{className:"grid-header",children:"Excel Column"}),r.jsx("div",{className:"grid-header",children:"App Field"}),n.map((f,p)=>r.jsxs(Se.Fragment,{children:[r.jsx("div",{className:"excel-header-cell",children:f}),r.jsx("div",{className:"app-field-cell",children:r.jsxs("select",{value:s[f]||"",onChange:g=>l(f,g.target.value),className:"app-field-select",children:[r.jsx("option",{value:"",children:"-- Select Field --"}),r.jsx("option",{value:"none",children:"None (Ignore Column)"}),i.map((g,x)=>r.jsx("option",{value:g,children:g==="name"?"Composition Name":g==="brand_name"?"Brand Name":g==="price"?"MRP":g==="buying_price"?"Rate":g==="unit"?"Pack":g==="batch"?"Batch":g==="hsn_code"?"HSN Code":g==="mfg"?"MFG":g==="loose_quantity"?"Loose":g.replace(/_/g," ").replace(/\b\w/g,b=>b.toUpperCase())},x))]})})]},p))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:d,className:"button-submit",children:"Confirm Mapping"})]})]})})},hRe=({entityType:t,config:e,values:n,onChange:a,className:i=""})=>{const o=(e[t]||[]).filter(c=>c.type!=="computed");if(o.length===0)return null;const l=c=>{const d=n[c.key]??"";switch(c.type){case"number":return r.jsx("input",{type:"number",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value===""?null:parseFloat(f.target.value)),className:"custom-text-input mt-1",placeholder:c.label,required:c.required});case"date":return r.jsx("input",{type:"date",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value||null),className:"custom-text-input mt-1",required:c.required});case"boolean":return r.jsx("input",{type:"checkbox",id:`custom_${c.key}`,name:`custom_${c.key}`,checked:!!d,onChange:f=>a(c.key,f.target.checked),className:"custom-checkbox mt-1"});case"text":default:return r.jsx("input",{type:"text",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value||null),className:"custom-text-input mt-1",placeholder:c.label,required:c.required})}};return r.jsxs("div",{className:`custom-fields-section ${i}`,children:[r.jsx("h4",{className:"custom-fields-title",children:"Custom Fields"}),r.jsx("div",{className:"custom-fields-grid",children:o.map(c=>r.jsxs("div",{className:"custom-field-item",children:[r.jsxs("label",{htmlFor:`custom_${c.key}`,className:"form-label",children:[c.label,c.required&&r.jsx("span",{className:"required-star",children:"*"})]}),l(c)]},c.key))})]})},fRe=({isOpen:t,onClose:e,onDrugAddedToPurchase:n,customColumnsConfig:a={}})=>{const[i,s]=v.useState({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(!1),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null);v.useEffect(()=>{t&&(s({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),l(null),d(!1),p(!1))},[t]),v.useEffect(()=>{const T=P=>{P.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var k;(k=b.current)==null||k.focus()},0),P.preventDefault()))},C=P=>{g.current&&!g.current.contains(P.target)&&p(!1)};return document.addEventListener("keydown",T),document.addEventListener("mousedown",C),()=>{document.removeEventListener("keydown",T),document.removeEventListener("mousedown",C)}},[f]);const j=T=>{const{name:C,value:P,type:k}=T.target;s(E=>({...E,[C]:k==="number"?parseFloat(P)||null:P}))},S=(T,C)=>{s(P=>({...P,custom_fields:{...P.custom_fields,[T]:C}}))},_=T=>{if(T.preventDefault(),l(null),d(!0),i.mrp===void 0||i.stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const C={...i,name:i.name===""?null:i.name,composition:i.composition===""?null:i.composition,rate:i.rate===0?null:i.rate,expiry_date:i.expiry_date===""?null:i.expiry_date,gst:i.gst===0?null:i.gst,margin:i.margin===0?null:i.margin,discount:i.discount===0?null:i.discount,brand_name:i.brand_name===""?null:i.brand_name,batch:i.batch===""?null:i.batch,hsn_code:i.hsn_code===""?null:i.hsn_code,mfg:i.mfg===""?null:i.mfg,loose:i.loose===0?null:i.loose,custom_fields:i.custom_fields||{}};n(C),d(!1),e()};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content add-drug-form-container",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsx("h2",{children:"Add New Drug"}),r.jsx("button",{onClick:e,className:"cancel-button",title:"Close",children:r.jsx(Ft,{size:18})})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("form",{onSubmit:_,className:"add-drug-form",children:[r.jsxs("div",{className:"form-grid-2",children:[r.jsxs("div",{className:"span-2 form-group",children:[r.jsxs("label",{htmlFor:"name",className:"form-label",children:["Composition Name",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Pl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. Optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"name",value:i.name||"",onChange:j,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})]}),r.jsxs("div",{className:"span-2 form-group",children:[r.jsxs("label",{htmlFor:"brand_name",className:"form-label",children:["Brand Name",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Pl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. Optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"brand_name",value:i.brand_name||"",onChange:j,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"mrp",className:"form-label",children:["MRP () *",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Pl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Price for the pack size."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"mrp",required:!0,step:"0.01",min:"0",value:i.mrp||"",onChange:j,className:"custom-text-input",placeholder:"0.00",tabIndex:3})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"stock",className:"form-label",children:["Quantity *",r.jsxs("div",{className:"relative ml-1 group",children:[r.jsx(Pl,{size:14,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Number of packs in stock."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"stock",required:!0,step:"1",min:"0",value:i.stock||"",onChange:j,className:"custom-text-input",placeholder:"0",tabIndex:4})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pack",className:"form-label",children:"Pack (e.g., strip)"}),r.jsx("input",{type:"text",name:"pack",id:"pack",value:i.pack||"",onChange:j,className:"custom-text-input",placeholder:"e.g., strip",tabIndex:5})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:i.expiry_date||"",onChange:j,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"box_number",value:i.box_number||"",onChange:j,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[r.jsxs("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},tabIndex:8,ref:x,children:["Others",r.jsx("span",{children:f?"":"+"})]}),f&&r.jsxs("div",{className:"form-grid-2",style:{marginTop:"0.5rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary, #f9fafb)",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("div",{className:"span-2 form-group",children:[r.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"description",rows:2,value:i.description||"",onChange:j,className:"custom-text-input",tabIndex:9,style:{minHeight:"60px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"rate",step:"0.01",min:"0",value:i.rate??"",onChange:j,placeholder:"Buying Price",className:"custom-text-input",tabIndex:10,ref:b})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"gst",step:"0.01",min:"0",max:"100",value:i.gst??"",onChange:j,placeholder:"5",className:"custom-text-input",tabIndex:11})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"margin",step:"0.01",min:"0",max:"100",value:i.margin??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"discount",step:"0.01",min:"0",max:"100",value:i.discount??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"batch",value:i.batch||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:14})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"hsn_code",value:i.hsn_code||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"mfg",value:i.mfg||"",onChange:j,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"loose",className:"form-label",children:"Loose Qty"}),r.jsx("input",{type:"number",name:"loose",id:"loose",step:"1",min:"0",value:i.loose??"",onChange:j,placeholder:"Optional",className:"custom-text-input",tabIndex:17})]})]})]})]}),r.jsx("div",{style:{marginTop:"1rem"},children:r.jsx(hRe,{entityType:"drugs",config:a,values:i.custom_fields||{},onChange:S})}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:e,disabled:c,className:"form-button cancel-form-button",tabIndex:18,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:19,children:c?"Adding...":"Add Drug"})]})]})]})}):null},pRe=({purchaseRows:t,onCellChange:e,onRemoveDrug:n,onAddEmptyRow:a})=>{const i=v.useRef(new Map),s=["name","mrp","stock","pack","expiry_date","rate","brand_name","box_number","gst","discount","batch","hsn_code","mfg","loose"],o=(l,c,d)=>{if(l.key==="Tab"){l.preventDefault();const f=s.indexOf(d);if(f!==-1){const p=(f+1)%s.length,g=s[p],x=i.current.get(`${c}-${g}`);x==null||x.focus()}}};return t.length===0?r.jsxs("div",{className:"no-drugs-message",children:[r.jsx("p",{children:"No drugs added to the purchase list yet."}),r.jsxs("button",{onClick:a,className:"action-button add-drug-to-table-button",children:[r.jsx(Ps,{size:18,className:"button-icon"}),"Add the first drug"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"purchase-drugs-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Composition Name"}),r.jsx("th",{children:"MRP ()"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Pack"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Rate ()"}),r.jsx("th",{children:"Brand Name"}),r.jsx("th",{children:"Box Number"}),r.jsx("th",{children:"GST (%)"}),r.jsx("th",{children:"Discount (%)"}),r.jsx("th",{children:"Margin (%)"}),r.jsx("th",{children:"Batch"}),r.jsx("th",{children:"HSN Code"}),r.jsx("th",{children:"MFG"}),r.jsx("th",{children:"Loose"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map((l,c)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("input",{type:"text",value:l.name||"",onChange:d=>e(d,l.id,"name"),onKeyDown:d=>o(d,l.id,"name"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-name`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.mrp||"",onChange:d=>e(d,l.id,"mrp"),onKeyDown:d=>o(d,l.id,"mrp"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-mrp`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.stock||"",onChange:d=>e(d,l.id,"stock"),onKeyDown:d=>o(d,l.id,"stock"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-stock`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.pack||"",onChange:d=>e(d,l.id,"pack"),onKeyDown:d=>o(d,l.id,"pack"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-pack`,d)}})}),r.jsx("td",{children:l.supplier||"N/A"}),r.jsx("td",{children:r.jsx("input",{type:"date",value:l.expiry_date||"",onChange:d=>e(d,l.id,"expiry_date"),onKeyDown:d=>o(d,l.id,"expiry_date"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-expiry_date`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.rate||"",onChange:d=>e(d,l.id,"rate"),onKeyDown:d=>o(d,l.id,"rate"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-rate`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.brand_name||"",onChange:d=>e(d,l.id,"brand_name"),onKeyDown:d=>o(d,l.id,"brand_name"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-brand_name`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.box_number||"",onChange:d=>e(d,l.id,"box_number"),onKeyDown:d=>o(d,l.id,"box_number"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-box_number`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.gst||"",onChange:d=>e(d,l.id,"gst"),onKeyDown:d=>o(d,l.id,"gst"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-gst`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.discount||"",onChange:d=>e(d,l.id,"discount"),onKeyDown:d=>o(d,l.id,"discount"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-discount`,d)}})}),r.jsx("td",{children:(()=>{const d=l.mrp||0,f=l.rate||0,p=l.gst!==null&&l.gst!==void 0?l.gst/100*f:0,g=l.discount!==null&&l.discount!==void 0?l.discount/100*d:0,x=d-(f+p)-g;return`${(d>0?x/d*100:0).toFixed(2)}%`})()}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.batch||"",onChange:d=>e(d,l.id,"batch"),onKeyDown:d=>o(d,l.id,"batch"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-batch`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.hsn_code||"",onChange:d=>e(d,l.id,"hsn_code"),onKeyDown:d=>o(d,l.id,"hsn_code"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-hsn_code`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.mfg||"",onChange:d=>e(d,l.id,"mfg"),onKeyDown:d=>o(d,l.id,"mfg"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-mfg`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.loose||"",onChange:d=>e(d,l.id,"loose"),onKeyDown:d=>o(d,l.id,"loose"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-loose`,d)}})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>n(l.id),className:"delete-button",title:"Remove Item",children:r.jsx(Vn,{size:16})})})]},l.id||c))})]})})},mRe="_container_7ak2k_7",gRe="_header_7ak2k_207",yRe="_backButton_7ak2k_221",xRe="_title_7ak2k_265",vRe="_stickyActionBar_7ak2k_287",bRe="_actionRow_7ak2k_317",jRe="_inputWrapper_7ak2k_335",wRe="_inputIcon_7ak2k_345",NRe="_input_7ak2k_335",SRe="_quickDistributors_7ak2k_401",_Re="_distributorChip_7ak2k_417",CRe="_distributorChipIcon_7ak2k_463",TRe="_selectedInfo_7ak2k_473",kRe="_resultsDropdown_7ak2k_503",ARe="_resultItem_7ak2k_537",ERe="_buttonGroup_7ak2k_565",PRe="_button_7ak2k_565",DRe="_buttonPrimary_7ak2k_609",ORe="_buttonSecondary_7ak2k_631",MRe="_buttonAccent_7ak2k_653",IRe="_buttonDisabled_7ak2k_675",RRe="_tableSection_7ak2k_691",LRe="_cardTitle_7ak2k_707",FRe="_cardIcon_7ak2k_727",$Re="_footer_7ak2k_947",BRe="_totalValue_7ak2k_981",zRe="_footerControls_7ak2k_1005",qRe="_paidInputGroup_7ak2k_1017",URe="_paidLabel_7ak2k_1029",VRe="_paidInput_7ak2k_1017",HRe="_errorMsg_7ak2k_1075",fn={container:mRe,header:gRe,backButton:yRe,title:xRe,stickyActionBar:vRe,actionRow:bRe,inputWrapper:jRe,inputIcon:wRe,input:NRe,quickDistributors:SRe,distributorChip:_Re,distributorChipIcon:CRe,selectedInfo:TRe,resultsDropdown:kRe,resultItem:ARe,buttonGroup:ERe,button:PRe,buttonPrimary:DRe,buttonSecondary:ORe,buttonAccent:MRe,buttonDisabled:IRe,tableSection:RRe,cardTitle:LRe,cardIcon:FRe,footer:$Re,totalValue:BRe,footerControls:zRe,paidInputGroup:qRe,paidLabel:URe,paidInput:VRe,errorMsg:HRe},IB=()=>{const t=Lt(),{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:d,setDistributors:f}=Tz(),[p,g]=v.useState(!1),[x,b]=v.useState(!0),j=v.useRef(null),S=v.useRef(null),[_,T]=v.useState(!1),C=v.useRef(null),[P,k]=v.useState(!1),[E,I]=v.useState([]),[L,$]=v.useState(null),[q,F]=v.useState(null),[H,V]=v.useState(!1),[X,Y]=v.useState([]),z=["name","description","mrp","stock","pack","supplier","expiry_date","rate","box_number","gst","margin","discount","brand_name","batch","hsn_code","mfg","loose"];v.useEffect(()=>{(async()=>{b(!0);try{const ue=await se("/api/distributors?limit=4");if(ue.ok){const ee=await ue.json();Y(Array.isArray(ee)?ee.slice(0,4):[])}}catch(ue){console.error("Failed to fetch initial distributors",ue)}finally{b(!1)}})()},[]);const G=()=>{const ue={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:"",composition:"",description:"",mrp:0,stock:0,pack:"",supplier:a?a.name:"",expiry_date:"",rate:0,box_number:"",gst:0,margin:0,discount:0,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:0,last_updated:"",created_at:""};n(ee=>[...ee,ue])},ie=async(ae,ue)=>{if(!ae){F("No file provided for import.");return}if(!a){F("Please select a distributor before importing.");return}g(!0),F(null);const ee=new FormData;ee.append("inventoryFile",ae),ee.append("columnMapping",JSON.stringify(ue));try{const Ne=await se("/api/drugs/parse-excel",{method:"POST",body:ee});if(!Ne.ok){const Fe=await Ne.json();throw new Error(Fe.message||`Failed to parse Excel file: ${Ne.statusText}`)}const Te=await Ne.json();n(Fe=>[...Fe,...Te.map(xe=>({...xe,id:Date.now().toString()+Math.random().toString(36).substring(2,9),supplier:a?a.name:xe.supplier}))])}catch(Ne){console.error("Failed to parse Excel file:",Ne),F(Ne.message||"Failed to parse Excel file. Please check the file format and try again.")}finally{j.current&&(j.current.value=""),g(!1),$(null)}},W=async ae=>{if(ae.target.files&&ae.target.files[0]){const ue=ae.target.files[0];$(ue),F(null),g(!0);const ee=new FormData;ee.append("inventoryFile",ue);try{const Ne=await se("/api/drugs/get-file-headers",{method:"POST",body:ee});if(!Ne.ok){const Fe=await Ne.json();throw new Error(Fe.message||`Failed to get file headers: ${Ne.statusText}`)}const{headers:Te}=await Ne.json();I(Te),k(!0)}catch(Ne){console.error("Failed to get file headers:",Ne),F(Ne.message||"Failed to read file headers. Please check the file format and try again."),$(null)}finally{g(!1)}}else $(null)},B=ae=>{L?ie(L,ae):F("No file selected for import after mapping."),k(!1)},ce=()=>{k(!1),I([]),$(null),j.current&&(j.current.value="")},je=()=>{var ae;(ae=j.current)==null||ae.click()},K=async ae=>{if(ae.target.files&&ae.target.files[0]){const ue=ae.target.files[0];F(null),g(!0);const ee=new FormData;ee.append("file",ue),ee.append("output_type","csv");const Te={Authorization:"Bearer 00841ac4-b279-11f0-ab55-0a3a41e3fad1"};try{const Fe=await fetch("https://extraction-api.nanonets.com/extract",{method:"POST",headers:Te,body:ee});if(!Fe.ok){const de=await Fe.json();throw new Error(de.message||`Failed to extract data from image/PDF: ${Fe.statusText}`)}const xe=await Fe.json();if(!xe.success||!xe.content)throw new Error(xe.detail||"Nanonets API did not return expected content.");let ne=xe.content;ne=ne.split(`
`).filter(de=>!de.startsWith("#")&&de.trim()!=="").join(`
`);const _e=new File([ne],"extracted_data.csv",{type:"text/csv"}),De=new FormData;De.append("inventoryFile",_e);const Q=await se("/api/drugs/get-file-headers",{method:"POST",body:De});if(!Q.ok){const de=await Q.json();throw new Error(de.message||`Failed to get headers from extracted CSV: ${Q.statusText}`)}const{headers:ge}=await Q.json();I(ge),$(_e),k(!0)}catch(Fe){console.error("Failed to extract data from image/PDF:",Fe),F(Fe.message||"Failed to extract data from image/PDF. Please check the file and try again.")}finally{S.current&&(S.current.value=""),g(!1)}}},Ie=()=>{var ae;(ae=S.current)==null||ae.click()},Ue=()=>{if(!a){F("Please select a distributor before adding a drug manually.");return}V(!0)},ze=()=>{V(!1),F(null)},Le=ae=>{n(ue=>[...ue,{...ae,id:Date.now().toString(),supplier:a?a.name:ae.supplier}]),ze()},be=ae=>{n(ue=>ue.filter(ee=>ee.id!==ae))},Ce=(ae,ue,ee)=>{const{value:Ne}=ae.target;n(Te=>Te.map(Fe=>{if(Fe.id===ue){let xe=Ne;ee==="expiry_date"?xe=Ne.trim()===""?null:Ne:["mrp","stock","rate","gst","margin","discount","loose"].includes(ee)&&(xe=parseFloat(Ne),isNaN(xe)&&(xe=null));const ne={...Fe,[ee]:xe};return ee==="name"&&a&&!ne.supplier&&(ne.supplier=a.name),ne}return Fe}))},Ae=v.useCallback(()=>e.reduce((ae,ue)=>{const ee=ue.stock||0,Ne=ue.rate||0,Te=ue.gst||0,Fe=ue.discount||0;let xe=Ne*(1-Fe/100),ne=ee*xe;return ne+=ne*(Te/100),ae+ne},0),[e]),me=async()=>{if(!a){F("Please select a distributor before submitting the purchase.");return}const ae=e.filter(ue=>Object.values(ue).some(ee=>typeof ee=="string"&&ee.trim()!==""||typeof ee=="number"&&ee!==0||ee!=null&&typeof ee!="string"&&typeof ee!="number"));if(ae.length===0){F("No valid drugs to submit. Please fill in at least one field for a row, or remove empty rows."),g(!1);return}g(!0),F(null);try{for(const Te of ae){const Fe={...Te,expiry_date:Te.expiry_date===""?null:Te.expiry_date,distributorId:a.id},xe=await se("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(!xe.ok){const ne=await xe.json();throw new Error(ne.message||`Failed to add drug ${Te.name}: ${xe.statusText}`)}}const ue=Ae(),ee=new Date().toISOString().split("T")[0],Ne=await se(`/api/distributors/${a.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:ee,order_value:ue,amount_paid:l,notes:"Payment from purchase page."})});if(!Ne.ok){const Te=await Ne.json();throw new Error(Te.message||`Failed to record distributor payment: ${Ne.statusText}`)}n([]),i(null),o(""),c(0),t("/dashboard/inventory")}catch(ue){console.error("Failed to submit purchase:",ue),F(ue.message||"Failed to submit purchase. Please try again.")}finally{g(!1)}},ye=v.useCallback(async ae=>{if(ae.trim()===""){f([]);return}try{const ue=await se(`/api/distributors?search=${encodeURIComponent(ae)}`);if(!ue.ok)throw new Error(`Failed to fetch distributors: ${ue.statusText}`);const ee=await ue.json();f(ee)}catch(ue){console.error("Failed to fetch distributors:",ue),F(ue.message||"Failed to load distributors.")}},[]),le=ae=>{const ue=ae.target.value;o(ue),i(null),C.current&&clearTimeout(C.current),ue.trim()!==""?C.current=setTimeout(()=>{ye(ue),T(!0)},300):(f([]),T(!1))},J=ae=>{i(ae),o(ae.name),T(!1),f([])};return v.useEffect(()=>{const ae=ue=>{ue.target instanceof HTMLElement&&!ue.target.closest(`.${fn.inputWrapper}`)&&T(!1)};return document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae),C.current&&clearTimeout(C.current)}},[]),r.jsxs("div",{className:fn.container,children:[r.jsxs("div",{className:fn.header,children:[r.jsx("button",{onClick:()=>t(-1),className:fn.backButton,title:"Go Back",children:r.jsx(on,{size:24})}),r.jsx("h2",{className:fn.title,children:"Purchase Inventory"})]}),q&&r.jsxs("div",{className:fn.errorMsg,children:[r.jsx(Wr,{size:20}),q]}),r.jsx("div",{className:fn.stickyActionBar,children:r.jsxs("div",{className:fn.actionRow,children:[r.jsxs("div",{style:{flex:1,minWidth:"300px",position:"relative"},children:[r.jsxs("div",{className:fn.inputWrapper,children:[r.jsx(In,{className:fn.inputIcon,size:20}),r.jsx("input",{type:"text",placeholder:"Search distributor...",value:s,onChange:le,onFocus:()=>s.trim()!==""&&T(!0),className:fn.input}),_&&d.length>0&&r.jsx("ul",{className:fn.resultsDropdown,children:d.map(ae=>r.jsx("li",{onClick:()=>J(ae),className:fn.resultItem,children:ae.name},ae.id))})]}),x?r.jsx("div",{className:fn.quickDistributors,children:[1,2,3,4].map(ae=>r.jsx(te,{width:100,height:32,style:{borderRadius:"16px"}},ae))}):X.length>0&&!a&&r.jsx("div",{className:fn.quickDistributors,children:X.map(ae=>r.jsxs("button",{className:fn.distributorChip,onClick:()=>J(ae),children:[r.jsx(Jn,{className:fn.distributorChipIcon}),ae.name]},ae.id))}),a&&r.jsxs("div",{className:fn.selectedInfo,style:{marginTop:"0.5rem",marginBottom:0},children:[r.jsx(Go,{size:18}),r.jsxs("span",{children:["Selected: ",r.jsx("strong",{children:a.name})]})]})]}),r.jsxs("div",{className:fn.buttonGroup,children:[r.jsx("input",{ref:j,type:"file",className:"sr-only",style:{display:"none"},accept:".xlsx, .xls, .csv",onChange:W}),r.jsx("input",{ref:S,type:"file",className:"sr-only",style:{display:"none"},accept:".pdf, .png, .jpg, .jpeg",onChange:K}),r.jsxs("button",{onClick:je,disabled:p||!a,className:`${fn.button} ${fn.buttonPrimary} ${p||!a?fn.buttonDisabled:""}`,title:a?"":"Select a distributor to import",children:[r.jsx(SE,{size:18}),p?"Processing...":"Import Excel/CSV"]}),r.jsxs("button",{onClick:Ie,disabled:p||!a,className:`${fn.button} ${fn.buttonSecondary} ${p||!a?fn.buttonDisabled:""}`,title:a?"":"Select a distributor",children:[r.jsx(Ta,{size:18}),"Scan Image/PDF"]}),r.jsxs("button",{onClick:Ue,disabled:!a,className:`${fn.button} ${fn.buttonAccent} ${a?"":fn.buttonDisabled}`,title:a?"":"Select a distributor",children:[r.jsx(Ps,{size:18}),"Add Manually"]})]})]})}),r.jsx(dRe,{isOpen:P,onClose:ce,excelHeaders:E,onConfirm:B,availableFields:z}),H&&r.jsx(fRe,{isOpen:H,onClose:ze,onDrugAddedToPurchase:Le}),r.jsxs("div",{className:fn.tableSection,children:[r.jsxs("div",{className:fn.cardTitle,children:[r.jsx(Eb,{className:fn.cardIcon,size:24}),"Purchase Items (",e.length,")"]}),r.jsx(pRe,{purchaseRows:e,onCellChange:Ce,onRemoveDrug:be,onAddEmptyRow:G})]}),r.jsxs("div",{className:fn.footer,children:[r.jsxs("button",{onClick:G,className:`${fn.button} ${fn.buttonSecondary}`,children:[r.jsx(Ps,{size:18}),"Add New Row"]}),r.jsxs("div",{className:fn.footerControls,children:[r.jsxs("div",{className:fn.paidInputGroup,children:[r.jsx("label",{htmlFor:"amount-paid",className:fn.paidLabel,children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount-paid",value:l,onChange:ae=>c(parseFloat(ae.target.value)||0),placeholder:"0.00",className:fn.paidInput,step:"0.01",disabled:!a})]}),r.jsxs("div",{className:fn.totalValue,children:["Total: ",r.jsxs("span",{children:["",Ae().toFixed(2)]})]}),r.jsx("button",{onClick:me,disabled:p||e.length===0||!a,className:`${fn.button} ${fn.buttonPrimary} ${fn.submitButton} ${p||!a||e.length===0?fn.buttonDisabled:""}`,style:{padding:"0.8rem 1.5rem",fontSize:"1rem"},children:p?"Submitting...":"Complete Purchase"})]})]})]})},GRe=t=>{if(!t)return 1;const e=t.match(/(?:\d+x)?(\d+)/);return e&&e[1]?parseInt(e[1],10):1},WRe=()=>{const t=Lt(),e=$r(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState("cash"),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(""),[P,k]=v.useState(""),[E,I]=v.useState(""),[L,$]=v.useState(0),q=v.useRef(!1),[F,H]=v.useState(null),[V,X]=v.useState(!1),[Y,z]=v.useState(!1),[G,ie]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),W=()=>{G.length<5&&ie(ee=>[...ee,{id:Date.now().toString(),method:"cash",amount:0}])},B=ee=>{G.length>2&&ie(Ne=>Ne.filter(Te=>Te.id!==ee))},ce=(ee,Ne,Te)=>{ie(Fe=>{const xe=Fe.map(ne=>ne.id===ee?Ne==="method"?{...ne,method:Te}:{...ne,amount:Math.max(0,Te)}:ne);if(Ne==="amount"&&xe.length===2){const oe=xe.findIndex(Q=>Q.id===ee)===0?1:0,_e=Math.max(0,Te),De=me-_e;xe[oe]={...xe[oe],amount:Math.max(0,De)}}return xe})},je=(ee,Ne)=>{const Te=G.filter(xe=>xe.id!==ee).reduce((xe,ne)=>xe+ne.amount,0),Fe=Math.max(0,Ne-Te);ie(xe=>xe.map(ne=>ne.id===ee?{...ne,amount:Fe}:ne))},K=ee=>{const Ne=Math.max(0,Math.min(100,isNaN(ee)?0:ee));q.current=!0,$(Ne);const Te=i.map(Fe=>({...Fe,discount_percentage:Ne}));s(Te)},Ie=(ee,Ne)=>{const Te=[...i];Te[ee].discount_percentage=isNaN(Ne)?0:Ne,s(Te)};v.useEffect(()=>{if(q.current){q.current=!1;return}const ee=i.reduce((Fe,xe)=>Fe+(xe.total_price??0),0);if(ee===0){$(0);return}const Te=i.reduce((Fe,xe)=>{const oe=(xe.total_price??0)*((xe.discount_percentage??0)/100);return Fe+oe},0)/ee*100;$(Fe=>Math.abs(Fe-Te)>.01?Te:Fe)},[i]);const Ue=async()=>{if(!n)return d("No order data available to bill."),null;if(i.length===0)return d("Cannot bill an empty order."),null;p(!0),d(null);try{const ee=i.map(oe=>{const _e=(oe.pricePerLooseUnit??0)*(oe.looseQuantity??0),De=_e*((oe.discount_percentage??0)/100),Q=_e-De;return{name:oe.name,pack_quantity:oe.loosePacks??0,loose_quantity:oe.looseUnits??0,price:oe.originalPrice??0,pack_price:oe.originalPrice??0,loose_price:oe.pricePerLooseUnit??0,total:Q,drug_id:oe.drug_id,discount_percentage:oe.discount_percentage??0,batch:oe.batch,expiry_date:oe.expiry_date}}),Ne={patientId:n.patientId,queueId:n.id,items:ee,amount:me,paymentMode:Y?"split":g,type:"pharmacy",related_id:n.id,status:"paid",discountPercentage:L};Y&&(Ne.splitPayments=G.map(oe=>({method:oe.method,amount:oe.amount})));const Te=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)}),Fe=await Te.json();if(!Te.ok||!Fe.id)throw new Error(Fe.message||"Failed to create bill.");const xe=await se(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:Fe.id,medications:i})});if(!xe.ok){const oe=await xe.text();throw new Error(`Failed to update pharmacy order status: ${xe.statusText} - ${oe}`)}a(oe=>oe?{...oe,status:"billed",bill_id:Fe.id}:null);const ne=Y?G.filter(oe=>oe.method==="credit").reduce((oe,_e)=>oe+_e.amount,0):g==="credit"?me:0;if(ne>0)try{await se(`/api/patient-debts/${n.patientId}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:ne,related_bill_id:Fe.id,notes:`Pharmacy Bill #${Fe.id}`})})}catch(oe){console.error("Failed to create debt entry:",oe)}return t(`/dashboard/pharmacy-billing/${n.id}`,{replace:!0,state:{order:{...n,status:"billed",bill_id:Fe.id},initialItems:i}}),Fe.id}catch(ee){return console.error("Billing process failed:",ee),d(ee.message||"Failed to mark order as billed. Please try again."),null}finally{p(!1)}},ze=async()=>{if(n)try{const ee=await se(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"dispensed",medications:i})});if(!ee.ok){const Ne=await ee.text();console.error("Failed to dispense order:",Ne)}}catch(ee){console.error("Error dispensing order:",ee)}},Le=()=>{window.print()},be=async()=>{await Ue()&&(window.print(),await ze(),t(-1))};v.useEffect(()=>{const ee=e.pathname.split("/"),Ne=ee[ee.length-1];Ne?(async()=>{try{l(!0);const[Fe,xe,ne]=await Promise.all([se(`/api/pharmacy-orders/${Ne}`),se("/api/drugs").then(Q=>Q.ok?Q.json():null).catch(()=>null),se("/api/clinics/settings").then(Q=>Q.ok?Q.json():null).catch(()=>null)]);if(!Fe.ok)throw new Error("Failed to fetch pharmacy order details");const oe=await Fe.json();a(oe);let _e=[];xe&&(_e=xe.drugs||xe||[]),ne&&(_(ne.upi_id||""),C(ne.name||""),k(ne.address||""),I(ne.notes||""));const De=oe.medications.map(Q=>{const ge=GRe(Q.unit),de=(Q.pack_quantity??0)*ge+(Q.loose_quantity??0),fe=_e.find(wt=>Q.drug_id&&String(wt.id)===String(Q.drug_id)||wt.name.toLowerCase()===Q.name.toLowerCase()),Ee=Q.batch||(fe==null?void 0:fe.batch)||(fe==null?void 0:fe.batch_number),Ye=Q.expiry_date||(fe==null?void 0:fe.expiry_date),$e=Number(Q.pack_price)||Number(fe==null?void 0:fe.mrp)||0,We=Number(fe==null?void 0:fe.rate)||0;let it=Number(Q.loose_price)||0;return it===0&&($e>0&&ge>0?it=$e/ge:We>0&&(it=We)),{...Q,isLoose:!0,loosePacks:Q.pack_quantity??0,looseUnits:Q.loose_quantity??0,looseQuantity:de,pack_price:$e,loose_price:it,total_price:Number(Q.total_price)||it*de,pricePerLooseUnit:it,originalPrice:$e,discount_percentage:Number(Q.discount_percentage)??0,directions_to_use:Q.directions_to_use,tabletsPerDay:Q.tabletsPerDay,numberOfDays:Q.numberOfDays,batch:Ee,expiry_date:Ye}});s(De)}catch(Fe){console.error("Failed to fetch data:",Fe),d(Fe.message||"Failed to load order details.")}finally{l(!1)}})():(d("No pharmacy order ID provided."),l(!1))},[e.pathname]);const Ce=v.useMemo(()=>i.reduce((ee,Ne)=>ee+(Ne.total_price??0),0),[i]),Ae=v.useMemo(()=>i.reduce((ee,Ne)=>{const Fe=(Ne.total_price??0)*(Ne.discount_percentage??0)/100;return ee+Fe},0),[i]),me=v.useMemo(()=>Ce-Ae,[Ce,Ae]),ye=v.useMemo(()=>G.reduce((ee,Ne)=>ee+Ne.amount,0),[G]),le=v.useMemo(()=>me-ye,[me,ye]),J=v.useMemo(()=>Math.abs(le)<.01,[le]),ae=v.useMemo(()=>Y?G.some(ee=>ee.method==="credit"&&ee.amount>0):g==="credit",[Y,G,g]),ue=v.useMemo(()=>Y?G.filter(ee=>ee.method==="credit").reduce((ee,Ne)=>ee+Ne.amount,0):g==="credit"?me:0,[Y,G,g,me]);return v.useEffect(()=>{if(me>0&&S){const ee=`upi://pay?pa=${S}&pn=ClinicName&am=${me.toFixed(2)}&cu=INR`;j(ee)}else j("")},[me,S]),v.useEffect(()=>{(async()=>{if(g==="credit"&&(n!=null&&n.patientId)){X(!0);try{const Ne=await se(`/api/patient-debts/${n.patientId}/balance`);if(Ne.ok){const Te=await Ne.json();H(Te.netDebt||0)}else H(0)}catch(Ne){console.error("Error fetching patient debt:",Ne),H(0)}finally{X(!1)}}})()},[g,n==null?void 0:n.patientId]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(te,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:30,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})}),r.jsx("th",{children:r.jsx(te,{width:60,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:20,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:90,height:20})}),r.jsx("td",{children:r.jsx(te,{width:60,height:20})})]},ee))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:28}),r.jsx(te,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(te,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T?`${T} Pharmacy`:"Pharmacy Bill"}),(P||E)&&r.jsxs("div",{className:"clinic-details-print",children:[P&&r.jsx("span",{className:"small-text clinic-address",children:P}),E&&r.jsx("span",{className:"small-text clinic-notes",children:E})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Pharmacy Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(kc,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Medications"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"BATCH"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{children:"QUANTITY"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((ee,Ne)=>{var oe;const Te=ee.total_price??0,Fe=Te*(ee.discount_percentage??0)/100,xe=Te-Fe;return r.jsxs("tr",{children:[r.jsx("td",{children:Ne+1}),r.jsx("td",{children:ee.name}),r.jsx("td",{children:ee.batch||"N/A"}),r.jsx("td",{children:ee.expiry_date?new Date(ee.expiry_date).toLocaleDateString():"N/A"}),r.jsxs("td",{children:[r.jsxs("div",{children:["Packs: ",ee.loosePacks??0]}),r.jsxs("div",{children:["Loose: ",ee.looseUnits??0]})]}),r.jsx("td",{children:((oe=ee.originalPrice)==null?void 0:oe.toFixed(2))??"N/A"}),r.jsx("td",{children:((ee.pricePerLooseUnit??0)*(1-(ee.discount_percentage??0)/100)).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:ee.discount_percentage===0?"":ee.discount_percentage,onChange:_e=>Ie(Ne,parseFloat(_e.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsxs("td",{children:[5 .toFixed(1),"%"]}),r.jsx("td",{children:xe.toFixed(2)})]},Ne)})})]}):r.jsx("p",{children:"No medications in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",L.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"GST (Included)"}),r.jsxs("span",{children:["",(me*.05).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",me.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:Y?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),Y&&G.map((ee,Ne)=>ee.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:ee.method==="cash"?"Cash":ee.method==="upi"?"UPI":ee.method==="card"?"Card":ee.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",ee.amount.toFixed(2)]})]},Ne))]}),F!==null&&(F>0||ae)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(F??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(F??0).toFixed(2)]})]}),ae&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((F??0)+(ae?ue:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(La,{value:b,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:L===0?"":L,onChange:ee=>K(parseFloat(ee.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",me.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>z(!Y),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:Y?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:Y?"rgba(79, 172, 254, 0.1)":"transparent",color:Y?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(zo,{size:14}),"Split"]})]}),Y?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",me.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:G.map((ee,Ne)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Ne+1}),r.jsxs("select",{value:ee.method,onChange:Te=>ce(ee.id,"method",Te.target.value),className:`split-payment-select ${ee.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:ee.amount||"",onChange:Te=>ce(ee.id,"amount",parseFloat(Te.target.value)||0),className:`split-payment-input ${ee.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),G.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>je(ee.id,me),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>B(ee.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Vn,{size:12})})]})]},ee.id))}),G.length<5&&r.jsxs("button",{type:"button",onClick:W,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(Hn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ye.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${J?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[J?"":le>0?"":"",J?"Balanced":le>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(le).toFixed(2)]})]}),!J&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",me.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:g,onChange:ee=>x(ee.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),ae&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),V?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:F&&F>0?"#dc3545":"#28a745"},children:["",(F||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ue.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((F||0)+ue).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[n.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Le,className:"secondary-button print-preview-button no-print",disabled:f||i.length===0,children:"Print Preview"}),r.jsx("button",{onClick:be,className:"primary-button",disabled:f||i.length===0,children:f?"Processing...":"Finalise and Bill"})]}),n.status==="billed"&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${n.bill_id}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},KRe=()=>{const t=Lt(),e=$r(),[n,a]=v.useState(null),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState(!0),[g,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState("cash"),[T,C]=v.useState(""),[P,k]=v.useState(""),[E,I]=v.useState(""),[L,$]=v.useState(""),[q,F]=v.useState(""),[H,V]=v.useState(""),[X,Y]=v.useState(0),z=v.useRef(!1),[G,ie]=v.useState(null),[W,B]=v.useState(!1),[ce,je]=v.useState(!1),[K,Ie]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ue=()=>{K.length<5&&Ie(ne=>[...ne,{id:Date.now().toString(),method:"cash",amount:0}])},ze=ne=>{K.length>2&&Ie(oe=>oe.filter(_e=>_e.id!==ne))},Le=(ne,oe,_e)=>{Ie(De=>{const Q=De.map(ge=>ge.id===ne?oe==="method"?{...ge,method:_e}:{...ge,amount:Math.max(0,_e)}:ge);if(oe==="amount"&&Q.length===2){const de=Q.findIndex(Ye=>Ye.id===ne)===0?1:0,fe=Math.max(0,_e),Ee=ue-fe;Q[de]={...Q[de],amount:Math.max(0,Ee)}}return Q})},be=(ne,oe)=>{const _e=K.filter(Q=>Q.id!==ne).reduce((Q,ge)=>Q+ge.amount,0),De=Math.max(0,oe-_e);Ie(Q=>Q.map(ge=>ge.id===ne?{...ge,amount:De}:ge))},Ce=ne=>{const oe=Math.max(0,Math.min(100,isNaN(ne)?0:ne));z.current=!0,Y(oe);const _e=c.map(De=>({...De,discount_percentage:oe}));d(_e)},Ae=(ne,oe)=>{const _e=[...c];_e[ne].discount_percentage=isNaN(oe)?0:oe,d(_e)};v.useEffect(()=>{if(z.current){z.current=!1;return}const ne=c.reduce((De,Q)=>De+(Q.price??0),0);if(ne===0){Y(0);return}const _e=c.reduce((De,Q)=>{const de=(Q.price??0)*((Q.discount_percentage??0)/100);return De+de},0)/ne*100;Y(De=>Math.abs(De-_e)>.01?_e:De)},[c]);const me=async()=>{if(!n)return x("No order data available to bill."),null;if(c.length===0)return x("Cannot bill an empty order."),null;j(!0),x(null);try{const ne=c.map(de=>{const fe=de.price,Ee=fe*((de.discount_percentage??0)/100),Ye=fe-Ee;return{name:de.name,price:de.price,quantity:1,total:Ye,item_id:de.id,type:"lab_test",discount_percentage:de.discount_percentage??0}}),oe={patientId:n.patient_id,items:ne,amount:ue,paymentMode:ce?"split":S,type:"lab",related_id:n.id,status:"paid",discountPercentage:X};ce&&(oe.splitPayments=K.map(de=>({method:de.method,amount:de.amount})));const _e=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)}),De=await _e.json();if(!_e.ok||!De.id)throw new Error(De.message||"Failed to create bill.");const Q=await se(`/api/lab/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:De.id})});if(!Q.ok){const de=await Q.text();throw new Error(`Failed to update lab order status: ${Q.statusText} - ${de}`)}a(de=>de?{...de,status:"billed",bill_id:De.id}:null);const ge=ce?K.filter(de=>de.method==="credit").reduce((de,fe)=>de+fe.amount,0):S==="credit"?ue:0;if(ge>0)try{await se(`/api/patient-debts/${n.patient_id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:ge,related_bill_id:De.id,notes:`Lab Bill #${De.id}`})})}catch(de){console.error("Failed to create debt entry:",de)}return t(`/dashboard/lab-billing/${n.id}`,{replace:!0,state:{...e.state,order:{...n,status:"billed",bill_id:De.id}}}),De.id}catch(ne){return console.error("Billing process failed:",ne),x(ne.message||"Failed to mark order as billed. Please try again."),null}finally{j(!1)}},ye=()=>{window.print()},le=async()=>{await me()&&(window.print(),t(-1))};v.useEffect(()=>{const ne=e.pathname.split("/"),oe=ne[ne.length-1];oe?(async()=>{try{const[De,Q]=await Promise.all([se(`/api/lab/${oe}`),se("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!De.ok)throw new Error("Failed to fetch lab order details");const ge=await De.json();a(ge);const de=ge.patient_id?se(`/api/patients/${ge.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1});if(Q.ok&&"json"in Q){const Ye=await Q.json();k(Ye.upi_id||""),I(Ye.name||""),$(Ye.address||""),F(Ye.notes||""),V(Ye.labLetterheadUrl||"")}const fe=await de;if(fe.ok&&"json"in fe){const Ye=await fe.json();s(Ye.name),l(Ye.patient_token_number)}const Ee=ge.tests.map(Ye=>({...Ye,price:typeof Ye.price=="string"?parseFloat(Ye.price):Number(Ye.price)||0,discount_percentage:0,total_price:typeof Ye.price=="string"?parseFloat(Ye.price):Number(Ye.price)||0}));d(Ee)}catch(De){console.error("Failed to fetch data:",De),x(De.message||"Failed to load order details.")}finally{p(!1)}})():(x("No lab order ID provided."),p(!1))},[e.pathname]);const J=v.useMemo(()=>c.reduce((ne,oe)=>ne+(oe.price??0),0),[c]),ae=v.useMemo(()=>c.reduce((ne,oe)=>{const De=(oe.price??0)*(oe.discount_percentage??0)/100;return ne+De},0),[c]),ue=v.useMemo(()=>J-ae,[J,ae]),ee=v.useMemo(()=>K.reduce((ne,oe)=>ne+oe.amount,0),[K]),Ne=v.useMemo(()=>ue-ee,[ue,ee]),Te=v.useMemo(()=>Math.abs(Ne)<.01,[Ne]),Fe=v.useMemo(()=>ce?K.some(ne=>ne.method==="credit"&&ne.amount>0):S==="credit",[ce,K,S]),xe=v.useMemo(()=>ce?K.filter(ne=>ne.method==="credit").reduce((ne,oe)=>ne+oe.amount,0):S==="credit"?ue:0,[ce,K,S,ue]);return v.useEffect(()=>{if(ue>0&&P){const ne=`upi://pay?pa=${P}&pn=ClinicName&am=${ue.toFixed(2)}&cu=INR`;C(ne)}else C("")},[ue,P]),v.useEffect(()=>{(async()=>{if(Fe&&(n!=null&&n.patient_id)){B(!0);try{const oe=await se(`/api/patient-debts/${n.patient_id}/balance`);if(oe.ok){const _e=await oe.json();ie(_e.netDebt||0)}else ie(0)}catch(oe){console.error("Error fetching patient debt:",oe),ie(0)}finally{B(!1)}}})()},[Fe,n==null?void 0:n.patient_id]),f?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(te,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(te,{width:200,height:20}),r.jsx(te,{width:150,height:20}),r.jsx(te,{width:180,height:20}),r.jsx(te,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:24}),r.jsx(te,{width:100,height:24})]}),r.jsx(te,{width:"100%",height:150})," ",r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})})]})]})}):g?r.jsxs("div",{className:"error-message-box",children:["Error: ",g]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[H&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:H,alt:"Lab Letterhead",className:"print-letterhead-image"})}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:E?`${E} Lab`:"Lab Bill"}),(L||q)&&r.jsxs("div",{className:"clinic-details-print",children:[L&&r.jsx("span",{className:"small-text clinic-address",children:L}),q&&r.jsx("span",{className:"small-text clinic-notes",children:q})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:20})}),r.jsx("h1",{children:"Lab Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(ls,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Lab Tests"})}),c.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"TEST DESCRIPTION"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:c.map((ne,oe)=>{const _e=ne.price??0,De=_e*(ne.discount_percentage??0)/100,Q=_e-De;return r.jsxs("tr",{children:[r.jsx("td",{children:oe+1}),r.jsx("td",{children:ne.name}),r.jsx("td",{children:typeof ne.price=="number"?ne.price.toFixed(2):Number(ne.price||0).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:ne.discount_percentage||"",onChange:ge=>Ae(oe,parseFloat(ge.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Q.toFixed(2)})]},oe)})})]}):r.jsx("p",{children:"No tests in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",J.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",X.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ae.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ue.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:ce?"Split Payment":S==="cash"?"Cash":S==="upi"?"UPI":S==="card"?"Card":S==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),ce&&K.map((ne,oe)=>ne.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:ne.method==="cash"?"Cash":ne.method==="upi"?"UPI":ne.method==="card"?"Card":ne.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",ne.amount.toFixed(2)]})]},oe))]}),G!==null&&(G>0||Fe)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(G??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(G??0).toFixed(2)]})]}),Fe&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",xe.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((G??0)+(Fe?xe:0)).toFixed(2)]})]})]})]}),T&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${S!=="upi"?"hide-on-screen":""}`,children:[r.jsx(La,{value:T,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",J.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:X===0?"":X,onChange:ne=>Ce(parseFloat(ne.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:b||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ue.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:T?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:T,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>je(!ce),disabled:b||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ce?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ce?"rgba(79, 172, 254, 0.1)":"transparent",color:ce?"#4facfe":"#666",cursor:b||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(zo,{size:14}),"Split"]})]}),ce?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ue.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:K.map((ne,oe)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:oe+1}),r.jsxs("select",{value:ne.method,onChange:_e=>Le(ne.id,"method",_e.target.value),className:`split-payment-select ${ne.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:ne.amount||"",onChange:_e=>Le(ne.id,"amount",parseFloat(_e.target.value)||0),className:`split-payment-input ${ne.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed"})]}),K.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>be(ne.id,ue),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>ze(ne.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Vn,{size:12})})]})]},ne.id))}),K.length<5&&r.jsxs("button",{type:"button",onClick:Ue,className:"split-payment-add-btn",disabled:b||n.status==="billed",children:[r.jsx(Hn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ee.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Te?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Te?"":Ne>0?"":"",Te?"Balanced":Ne>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Ne).toFixed(2)]})]}),!Te&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ue.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:S,onChange:ne=>_(ne.target.value),className:"payment-mode-select",disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Fe&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),W?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:G&&G>0?"#dc3545":"#28a745"},children:["",(G||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",xe.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((G||0)+xe).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:ye,className:"secondary-button print-preview-button no-print",disabled:b||c.length===0,children:"Print Preview"}),n.status!=="billed"&&r.jsx("button",{onClick:le,className:"primary-button",disabled:b||c.length===0,children:b?"Processing...":"Finalise and Bill"}),n.status==="billed"&&n.bill_id&&r.jsx("button",{onClick:()=>t("/billing",{state:{billId:n.bill_id}}),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})]}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},YRe=500,QRe=()=>{const t=Lt(),{queueId:e}=Fa(),[n]=Sz(),a=n.get("doctorId"),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,d]=v.useState(null),[f,p]=v.useState(null),[g,x]=v.useState([]),[b,j]=v.useState(!0),[S,_]=v.useState(null),[T,C]=v.useState(!1),[P,k]=v.useState(!1),[E,I]=v.useState(null),[L,$]=v.useState("cash"),[q,F]=v.useState(""),[H,V]=v.useState(""),[X,Y]=v.useState(""),[z,G]=v.useState(""),[ie,W]=v.useState(""),[B,ce]=v.useState(0),[je,K]=v.useState(null),[Ie,Ue]=v.useState(!1),[ze,Le]=v.useState(!1),[be,Ce]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ae=()=>{be.length<5&&Ce(Q=>[...Q,{id:Date.now().toString(),method:"cash",amount:0}])},me=Q=>{be.length>2&&Ce(ge=>ge.filter(de=>de.id!==Q))},ye=(Q,ge,de)=>{Ce(fe=>{const Ee=fe.map(Ye=>Ye.id===Q?ge==="method"?{...Ye,method:de}:{...Ye,amount:Math.max(0,de)}:Ye);if(ge==="amount"&&Ee.length===2){const $e=Ee.findIndex(wt=>wt.id===Q)===0?1:0,We=Math.max(0,de),it=ue-We;Ee[$e]={...Ee[$e],amount:Math.max(0,it)}}return Ee})},le=(Q,ge)=>{const de=be.filter(Ee=>Ee.id!==Q).reduce((Ee,Ye)=>Ee+Ye.amount,0),fe=Math.max(0,ge-de);Ce(Ee=>Ee.map(Ye=>Ye.id===Q?{...Ye,amount:fe}:Ye))};v.useEffect(()=>{(async()=>{if(!e){_("No queue ID provided."),j(!1);return}try{j(!0),_(null);const[ge,de]=await Promise.all([se(`/api/queue/${e}`),se("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ge.ok)throw new Error("Failed to fetch queue entry");const fe=await ge.json();if(s(fe),de.ok&&"json"in de){const it=await de.json();V(it.upi_id||""),Y(it.name||""),G(it.address||""),W(it.notes||"")}const Ee=a||fe.doctor_id,[Ye,$e]=await Promise.all([fe.patient_id?se(`/api/patients/${fe.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1}),Ee?se(`/api/staff/${Ee}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1})]);if(Ye.ok&&"json"in Ye){const it=await Ye.json();l(it)}let We=YRe;if(Ee&&(p(Ee),$e.ok&&"json"in $e)){const it=await $e.json();d(it),it.opd_fee!=null&&!isNaN(parseFloat(String(it.opd_fee)))&&(We=parseFloat(String(it.opd_fee)))}x([{name:"Consultation Fee",quantity:1,price:We,total:We,discount_percentage:0}])}catch(ge){console.error("Failed to fetch data:",ge),_(ge.message||"Failed to load billing details.")}finally{j(!1)}})()},[e,a]);const J=v.useMemo(()=>g.reduce((Q,ge)=>Q+ge.total,0),[g]),ae=v.useMemo(()=>J*(B/100),[J,B]),ue=v.useMemo(()=>J-ae,[J,ae]),ee=v.useMemo(()=>be.reduce((Q,ge)=>Q+ge.amount,0),[be]),Ne=v.useMemo(()=>ue-ee,[ue,ee]),Te=v.useMemo(()=>Math.abs(Ne)<.01,[Ne]),Fe=v.useMemo(()=>ze?be.some(Q=>Q.method==="credit"&&Q.amount>0):L==="credit",[ze,be,L]),xe=v.useMemo(()=>ze?be.filter(Q=>Q.method==="credit").reduce((Q,ge)=>Q+ge.amount,0):L==="credit"?ue:0,[ze,be,L,ue]);v.useEffect(()=>{if(ue>0&&H){const Q=`upi://pay?pa=${H}&pn=${encodeURIComponent(X)}&am=${ue.toFixed(2)}&cu=INR`;F(Q)}else F("")},[ue,H,X]),v.useEffect(()=>{(async()=>{if(Fe&&(o!=null&&o.id)){Ue(!0);try{const ge=await se(`/api/patient-debts/${o.id}/balance`);if(ge.ok){const de=await ge.json();K(de.netDebt||0)}else K(0)}catch(ge){console.error("Error fetching patient debt:",ge),K(0)}finally{Ue(!1)}}})()},[Fe,o==null?void 0:o.id]);const ne=Q=>{const ge=Math.max(0,Math.min(100,isNaN(Q)?0:Q));ce(ge)},oe=async()=>{if(!i||!o)return _("Missing queue or patient data."),null;if(g.length===0)return _("Cannot create an empty bill."),null;C(!0),_(null);try{const Q=g.map(Ye=>({name:Ye.name,quantity:Ye.quantity,price:Ye.price,total:Ye.total*(1-B/100)})),ge={patientId:o.id,queueId:i.id,items:Q,amount:ue,paymentMode:ze?"split":L,type:"consultation",related_id:i.id,status:"paid",discountPercentage:B};ze&&(ge.splitPayments=be.map(Ye=>({method:Ye.method,amount:Ye.amount})));const de=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)}),fe=await de.json();if(!de.ok||!fe.id)throw new Error(fe.message||"Failed to create bill.");const Ee=ze?be.filter(Ye=>Ye.method==="credit").reduce((Ye,$e)=>Ye+$e.amount,0):L==="credit"?ue:0;if(Ee>0)try{await se(`/api/patient-debts/${o.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Ee,related_bill_id:fe.id,notes:`Consultation Bill #${fe.id}`})})}catch(Ye){console.error("Failed to create debt entry:",Ye)}if(f&&i.id)try{const Ye={status:"waiting",doctorId:f},$e=await se(`/api/queue/${i.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ye)});if($e.ok)console.log(`Doctor ${f} assigned to queue ${i.id} after billing.`);else{const We=await $e.json();console.error("Failed to assign doctor to queue:",We.message)}}catch(Ye){console.error("Error assigning doctor to queue:",Ye)}return k(!0),I(fe.id),fe.id}catch(Q){return console.error("Billing process failed:",Q),_(Q.message||"Failed to create bill. Please try again."),null}finally{C(!1)}},_e=()=>{window.print()},De=async()=>{await oe()&&(window.print(),t(-1))};return b?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(te,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(te,{width:200,height:20}),r.jsx(te,{width:150,height:20}),r.jsx(te,{width:180,height:20}),r.jsx(te,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:24}),r.jsx(te,{width:100,height:24})]}),r.jsx(te,{width:"100%",height:150})," ",r.jsx(te,{width:"100%",height:40}),r.jsx(te,{width:"100%",height:40})]})]})})]})]})}):S?r.jsxs("div",{className:"error-message-box",children:["Error: ",S]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:X||"Clinic Bill"}),(z||ie)&&r.jsxs("div",{className:"clinic-details-print",children:[z&&r.jsx("span",{className:"small-text clinic-address",children:z}),ie&&r.jsx("span",{className:"small-text clinic-notes",children:ie})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date().toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:20})}),r.jsx("h1",{children:"Consultation Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Patient ID"]})," ",(o==null?void 0:o.id)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date().toLocaleDateString()]}),c&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(bf,{size:16})," Doctor"]})," ",c.name]}),i.complaint&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Complaint"})," ",i.complaint]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Bill Items"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((Q,ge)=>{const de=Q.total*(B/100),fe=Q.total-de;return r.jsxs("tr",{children:[r.jsx("td",{children:ge+1}),r.jsx("td",{children:Q.name}),r.jsx("td",{children:Q.quantity}),r.jsxs("td",{children:["",Q.price.toFixed(2)]}),r.jsxs("td",{children:["",fe.toFixed(2)]})]},ge)})})]}):r.jsx("p",{children:"No items in this bill."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",J.toFixed(2)]})]}),B>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",B.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ae.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ue.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:ze?"Split Payment":L==="cash"?"Cash":L==="upi"?"UPI":L==="card"?"Card":L==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),ze&&be.map((Q,ge)=>Q.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:Q.method==="cash"?"Cash":Q.method==="upi"?"UPI":Q.method==="card"?"Card":Q.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",Q.amount.toFixed(2)]})]},ge))]}),je!==null&&(je>0||Fe)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(je??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(je??0).toFixed(2)]})]}),Fe&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",xe.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((je??0)+(Fe?xe:0)).toFixed(2)]})]})]})]}),q&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${L!=="upi"?"hide-on-screen":""}`,children:[r.jsx(La,{value:q,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",J.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{children:["- ",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:B===0?"":B,onChange:Q=>ne(parseFloat(Q.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:T||P}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ue.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:q?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:q,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>Le(!ze),disabled:T||P,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ze?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ze?"rgba(79, 172, 254, 0.1)":"transparent",color:ze?"#4facfe":"#666",cursor:T||P?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(zo,{size:14}),"Split"]})]}),ze?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ue.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:be.map((Q,ge)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ge+1}),r.jsxs("select",{value:Q.method,onChange:de=>ye(Q.id,"method",de.target.value),className:`split-payment-select ${Q.method==="credit"?"is-credit":""}`,disabled:T||P,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Q.amount||"",onChange:de=>ye(Q.id,"amount",parseFloat(de.target.value)||0),className:`split-payment-input ${Q.method==="credit"?"is-credit":""}`,disabled:T||P})]}),be.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>le(Q.id,ue),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>me(Q.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Vn,{size:12})})]})]},Q.id))}),be.length<5&&r.jsxs("button",{type:"button",onClick:Ae,className:"split-payment-add-btn",disabled:T||P,children:[r.jsx(Hn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ee.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Te?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Te?"":Ne>0?"":"",Te?"Balanced":Ne>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Ne).toFixed(2)]})]}),!Te&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ue.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:L,onChange:Q=>$(Q.target.value),className:"payment-mode-select",disabled:T||P,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Fe&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Ie?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:je&&je>0?"#dc3545":"#28a745"},children:["",(je||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",xe.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((je||0)+xe).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[!P&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:_e,className:"secondary-button print-preview-button no-print",disabled:T||g.length===0,children:"Print Preview"}),r.jsx("button",{onClick:De,className:"primary-button",disabled:T||g.length===0,children:T?"Processing...":"Finalise and Bill"})]}),P&&E&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${E}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your visit!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No queue data available."})},XRe=({isOpen:t,onClose:e,onStaffAdded:n,clinicId:a,fetchWithAuth:i})=>{const[s,o]=v.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState([]),[x,b]=v.useState(!1),j=v.useCallback(async()=>{b(!0);try{const T=await i("/api/clinic-roles");if(T.ok){const C=await T.json();g(C)}}catch(T){console.error("Failed to fetch roles:",T)}finally{b(!1)}},[i]);v.useEffect(()=>{t&&(j(),o({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),c(null))},[t,j]);const S=T=>{const{name:C,value:P}=T.target;o(k=>{const E={...k,[C]:P};return C==="role"&&P!=="doctor"&&(E.opd_fee=""),E})},_=async T=>{if(T.preventDefault(),c(null),!s.name||!s.email||!s.role||!s.password){c("Name, Email, Role, and Password are required.");return}if(!a){c("Clinic information is missing. Cannot add staff.");return}const C={...s,clinic_id:a,opd_fee:s.role==="doctor"&&s.opd_fee?parseFloat(String(s.opd_fee)):null};if(C.role==="doctor"&&s.opd_fee&&isNaN(C.opd_fee)){c("Invalid OPD Fee format. Please enter a number.");return}f(!0);try{const P=await i("/api/staff",{method:"POST",body:JSON.stringify(C)});if(!P.ok){const k=await P.json();throw new Error(k.message||"Server responded with an error")}n(),e()}catch(P){c(`Failed to add staff: ${P.message}`)}finally{f(!1)}};return t?r.jsx("div",{className:"staff-modal-overlay",children:r.jsxs("div",{className:"staff-modal-content",children:[r.jsxs("div",{className:"staff-modal-header",children:[r.jsx("h2",{className:"staff-modal-title",children:"Add New Staff"}),r.jsx("button",{onClick:e,className:"staff-modal-close",children:r.jsx(Ft,{size:20})})]}),l&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-3 py-2 rounded-lg relative mb-3 flex items-center",role:"alert",children:[r.jsx(Wr,{size:14,className:"mr-2 flex-shrink-0"}),r.jsx("span",{className:"text-xs",children:l})]}),r.jsxs("form",{onSubmit:_,className:"space-y-3",children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Full Name"}),r.jsx("input",{type:"text",name:"name",value:s.name||"",onChange:S,required:!0,disabled:d,placeholder:"Full name",className:"custom-text-input"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:s.email||"",onChange:S,required:!0,disabled:d,placeholder:"Email",className:"custom-text-input"})]}),r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Password"}),r.jsx("input",{type:"password",name:"password",value:s.password||"",onChange:S,required:!0,disabled:d,placeholder:"Initial password",className:"custom-text-input"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Assign Role"}),r.jsx("select",{name:"role",value:s.role||"receptionist",onChange:S,required:!0,disabled:d||x,className:"custom-select-input",children:x?r.jsx("option",{value:"",children:"Loading..."}):p.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):p.map(T=>r.jsx("option",{value:T.key,children:T.name},T.key))})]}),s.role==="doctor"&&r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"OPD Fee ()"}),r.jsx("input",{type:"number",name:"opd_fee",value:s.opd_fee||"",onChange:S,step:"0.01",min:"0",placeholder:"e.g., 500",disabled:d,className:"custom-text-input"})]})]}),r.jsxs("div",{className:"staff-modal-footer",children:[r.jsx("button",{type:"button",onClick:e,className:"btn-compact border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:d,children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn-compact bg-teal-600 text-white hover:bg-teal-700 disabled:opacity-50",disabled:d,children:[d?r.jsx(so,{size:16,className:"animate-spin mr-2"}):r.jsx(Hn,{size:16,className:"mr-2"}),d?"Adding...":"Add Staff"]})]})]})]})}):null},JRe=({staffId:t,isOpen:e,onClose:n,onStaffUpdated:a,fetchWithAuth:i})=>{const[s,o]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState([]),[j,S]=v.useState(!1),_=v.useCallback(async()=>{S(!0);try{const k=await i("/api/clinic-roles");if(k.ok){const E=await k.json();b(E)}}catch(k){console.error("Failed to fetch roles:",k)}finally{S(!1)}},[i]),T=v.useCallback(async()=>{if(t){f(!0),c(null);try{const k=await i(`/staff/${t}`);if(!k.ok)throw new Error("Failed to fetch staff member");const E=await k.json();o({...E,id:E._id||E.id,opd_fee:E.opd_fee!==null&&E.opd_fee!==void 0?parseFloat(String(E.opd_fee)).toFixed(2):""})}catch(k){c(`Failed to load staff data: ${k.message}`)}finally{f(!1)}}},[t,i]);v.useEffect(()=>{e&&t?(T(),_()):(o(null),c(null))},[e,t,T,_]);const C=k=>{const{name:E,value:I,type:L}=k.target;o($=>{if(!$)return null;let q=I;L==="checkbox"&&(q=k.target.checked);const F={...$,[E]:q};return E==="role"&&I!=="doctor"&&(F.opd_fee=""),F})},P=async k=>{if(k.preventDefault(),!s||!t)return;if(c(null),!s.name||!s.email||!s.role){c("Name, Email, and Role are required.");return}const E={name:s.name,email:s.email,role:s.role,active:s.active,opd_fee:s.role==="doctor"&&s.opd_fee?parseFloat(String(s.opd_fee)):null};if(E.role==="doctor"&&s.opd_fee&&isNaN(E.opd_fee)){c("Invalid OPD Fee format. Please enter a number.");return}g(!0);try{const I=await i(`/staff/${t}`,{method:"PUT",body:JSON.stringify(E)});if(!I.ok){const L=await I.json();throw new Error(L.message||"Failed to update staff")}a(),n()}catch(I){c(`Failed to update staff: ${I.message}`)}finally{g(!1)}};return e?r.jsx("div",{className:"staff-modal-overlay",children:r.jsxs("div",{className:"staff-modal-content",children:[r.jsxs("div",{className:"staff-modal-header",children:[r.jsx("h3",{className:"staff-modal-title",children:"Edit Staff"}),r.jsx("button",{onClick:n,className:"staff-modal-close",children:r.jsx(Ft,{size:20})})]}),l&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-3 py-2 rounded-lg relative mb-3 flex items-center",role:"alert",children:[r.jsx(Wr,{size:14,className:"mr-2 flex-shrink-0"}),r.jsx("span",{className:"text-xs",children:l})]}),d?r.jsxs("div",{className:"py-10 flex flex-col items-center justify-center text-gray-500",children:[r.jsx(so,{size:28,className:"animate-spin mb-3 text-teal-600"}),r.jsx("p",{className:"text-sm",children:"Loading details..."})]}):s?r.jsxs("form",{onSubmit:P,className:"space-y-3",children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Full Name"}),r.jsx("input",{type:"text",name:"name",required:!0,value:s.name||"",onChange:C,className:"custom-text-input",disabled:p})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Role"}),r.jsx("select",{name:"role",required:!0,value:s.role||"",onChange:C,className:"custom-select-input",disabled:p||j,children:j?r.jsx("option",{value:"",children:"Loading..."}):x.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):x.map(k=>r.jsx("option",{value:k.key,children:k.name},k.key))})]}),r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"Email"}),r.jsx("input",{type:"email",name:"email",required:!0,value:s.email||"",onChange:C,className:"custom-text-input",disabled:p})]})]}),s.role==="doctor"&&r.jsxs("div",{className:"staff-form-group",children:[r.jsx("label",{className:"staff-form-label",children:"OPD Fee ()"}),r.jsx("input",{type:"number",name:"opd_fee",value:s.opd_fee||"",onChange:C,className:"custom-text-input",step:"0.01",min:"0",placeholder:"e.g., 500",disabled:p})]}),r.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[r.jsx("input",{type:"checkbox",id:"staff-active",name:"active",checked:s.active??!0,onChange:C,className:"w-3.5 h-3.5 rounded text-teal-600 focus:ring-teal-500"}),r.jsx("label",{htmlFor:"staff-active",className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider",children:"Account Active"})]}),r.jsxs("div",{className:"staff-modal-footer",children:[r.jsx("button",{type:"button",onClick:n,className:"btn-compact border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:p,children:"Cancel"}),r.jsxs("button",{type:"submit",className:"btn-compact bg-teal-600 text-white hover:bg-teal-700 disabled:opacity-50",disabled:p,children:[p?r.jsx(so,{size:16,className:"animate-spin mr-2"}):r.jsx(Go,{size:16,className:"mr-2"}),p?"Saving...":"Save"]})]})]}):null]})}):null},ZRe=()=>{const[t,e]=v.useState(!0),[n,a]=v.useState([]),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,d]=v.useState(!1),[f,p]=v.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",name:"",logoUrl:"",labLetterheadUrl:"",upi_id:"",address:"",notes:"",voice_ai_language:"en-US"}),[g,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState(null),[T,C]=v.useState(!1),P=(V,X)=>{x({type:V,message:X}),setTimeout(()=>x(null),3e3)},k=V=>{switch(V){case"doctor":return r.jsx(bf,{size:14,className:"text-blue-600"});case"receptionist":return r.jsx(Qz,{size:14,className:"text-green-600"});case"pharmacy":return r.jsx(kc,{size:14,className:"text-purple-600"});case"lab":return r.jsx(ls,{size:14,className:"text-yellow-600"});default:return r.jsx(dd,{size:14,className:"text-gray-500"})}},E=V=>{switch(V){case"doctor":return"avatar-blue";case"receptionist":return"avatar-green";case"pharmacy":return"avatar-purple";case"lab":return"avatar-yellow";default:return"avatar-gray"}},I=v.useCallback(async()=>{e(!0);try{const V=await se("/staff");if(V.ok){const X=await V.json();a(X.map(Y=>({...Y,id:Y._id||Y.id})))}}catch(V){console.error("Error fetching staff:",V),P("error","Failed to load staff list")}finally{e(!1)}},[]),L=v.useCallback(async()=>{l(!0);try{const V=await se("/api/clinics/settings");if(V.ok){const X=await V.json();p({admissionCharge:parseFloat(X.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(X.perDayCharge||0).toFixed(2),otherCharges:parseFloat(X.otherCharges||0).toFixed(2),aiMemory:X.aiMemory||"",clinicWideSystemPrompt:X.clinicWideSystemPrompt||"",gemini_api_key:X.gemini_api_key||"",low_stock_threshold:X.low_stock_threshold!==void 0&&X.low_stock_threshold!==null?String(X.low_stock_threshold):"10",name:X.name||"",logoUrl:X.logoUrl||"",labLetterheadUrl:X.labLetterheadUrl||"",upi_id:X.upi_id||"",address:X.address||"",notes:X.notes||"",clinic_id:X.clinic_id,voice_ai_language:X.voice_ai_language||"en-US"})}}catch(V){console.error("Error fetching settings:",V),P("error","Failed to load settings")}finally{l(!1)}},[]);v.useEffect(()=>{I(),L()},[I,L]);const $=V=>{const{name:X,value:Y}=V.target;p(z=>({...z,[X]:Y}))},q=async()=>{d(!0);try{const V=parseFloat(f.admissionCharge),X=parseFloat(f.perDayCharge),Y=parseFloat(f.otherCharges),z=parseInt(f.low_stock_threshold);if((await se("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:f.name,admissionCharge:V,perDayCharge:X,otherCharges:Y,aiMemory:f.aiMemory,clinicWideSystemPrompt:f.clinicWideSystemPrompt,gemini_api_key:f.gemini_api_key,low_stock_threshold:z,logoUrl:f.logoUrl,labLetterheadUrl:f.labLetterheadUrl,upi_id:f.upi_id,address:f.address,notes:f.notes,voice_ai_language:f.voice_ai_language})})).ok)P("success","Changes saved successfully");else throw new Error("Failed to save")}catch(V){console.error("Error saving settings:",V),P("error","Failed to save settings")}finally{d(!1)}},F=n.filter(V=>V.name.toLowerCase().includes(i.toLowerCase())||V.role.toLowerCase().includes(i.toLowerCase())),H=async V=>{for(const X of V){const Y=document.getElementById(X);Y&&(Y.scrollIntoView({behavior:"smooth",block:"center"}),Y.classList.add("ai-feedback-glow"),await new Promise(z=>setTimeout(z,1500)),Y.classList.remove("ai-feedback-glow"))}};return r.jsxs("div",{className:"clinic-hub-container",children:[r.jsxs("header",{className:"clinic-hub-header",children:[r.jsxs("div",{className:"clinic-hub-title",children:[r.jsx("h1",{children:"Clinic Hub"}),r.jsx("p",{className:"clinic-hub-subtitle",children:"Manage your ecosystem"})]}),r.jsxs("div",{className:"clinic-hub-actions",children:[g&&r.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium ${g.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.message}),r.jsxs("button",{className:"btn-add-staff",onClick:()=>j(!0),children:[r.jsx(Hn,{size:16})," Add Staff"]}),r.jsxs("button",{className:"btn-save-changes",onClick:q,disabled:c,children:[r.jsx(cs,{size:16})," ",c?"Saving...":"Save Changes"]})]})]}),r.jsxs("main",{className:"clinic-hub-content",children:[r.jsxs("div",{className:"team-directory-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(Ds,{size:18,className:"text-gray-500"}),r.jsxs("span",{className:"panel-title",children:["Team Directory (",n.length,")"]})]}),r.jsx("div",{className:"search-container",children:r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(In,{size:16,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Find member...",className:"search-input",value:i,onChange:V=>s(V.target.value)})]})}),r.jsx("div",{className:"team-list",children:t?r.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4].map(V=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(te,{variant:"circular",width:40,height:40}),r.jsxs("div",{className:"flex-1",children:[r.jsx(te,{width:120,height:16,className:"mb-1"}),r.jsx(te,{width:80,height:12})]})]},V))}):F.length===0?r.jsx("div",{className:"empty-state",children:"No staff found."}):F.map(V=>r.jsxs("div",{id:`staff-member-${V.id}`,className:"team-member-item",children:[r.jsx("div",{className:`member-avatar ${E(V.role)}`,children:V.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"member-info",children:[r.jsx("div",{className:"member-name",children:V.name}),r.jsxs("div",{className:"member-role",children:[k(V.role),V.role]})]}),r.jsx("span",{className:`member-status ${V.active?"status-active":"status-inactive"}`,children:V.active?"Active":"Inactive"}),r.jsx("button",{className:"btn-edit-member",onClick:()=>_(V.id),children:r.jsx($i,{size:16})})]},V.id))})]}),r.jsxs("div",{className:"config-console-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(Uz,{size:18,className:"text-gray-500"}),r.jsx("span",{className:"panel-title",children:"Configuration Console"})]}),o?r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:80,style:{borderRadius:"8px"}})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(te,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(te,{width:"100%",height:40,style:{borderRadius:"8px"}})]})]})]})]}):r.jsxs("div",{className:"config-content",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Hz,{size:16})," CLINIC IDENTITY & LOCATION"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Clinic Name"}),r.jsx("input",{type:"text",className:"form-input",name:"name",id:"setting-name",value:f.name,onChange:$})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Logo URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"logoUrl",id:"setting-logoUrl",value:f.logoUrl,onChange:$})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Lab Letterhead URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"labLetterheadUrl",id:"setting-labLetterheadUrl",value:f.labLetterheadUrl,onChange:$})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Address"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Full physical address",name:"address",id:"setting-address",value:f.address,onChange:$})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(cd,{size:16})," FINANCIAL OPERATIONS"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Admission Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"admissionCharge",id:"setting-admissionCharge",value:f.admissionCharge,onChange:$})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Per Day Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"perDayCharge",id:"setting-perDayCharge",value:f.perDayCharge,onChange:$})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Other Charges ()"}),r.jsx("input",{type:"number",className:"form-input",name:"otherCharges",id:"setting-otherCharges",value:f.otherCharges,onChange:$})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"UPI ID"}),r.jsx("input",{type:"text",className:"form-input",name:"upi_id",id:"setting-upi_id",value:f.upi_id,onChange:$})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(UD,{size:16})," INVENTORY & AI"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Low Stock Threshold"}),r.jsx("input",{type:"number",className:"form-input",name:"low_stock_threshold",id:"setting-low_stock_threshold",value:f.low_stock_threshold,onChange:$})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Voice AI Language"}),r.jsxs("select",{className:"form-input",name:"voice_ai_language",id:"setting-voice_ai_language",value:f.voice_ai_language,onChange:V=>p(X=>({...X,voice_ai_language:V.target.value})),children:[r.jsx("option",{value:"en-US",children:"English"}),r.jsx("option",{value:"hi-IN",children:"Hindi"}),r.jsx("option",{value:"te-IN",children:"Telugu"}),r.jsx("option",{value:"bn-IN",children:"Bengali"}),r.jsx("option",{value:"mr-IN",children:"Marathi"}),r.jsx("option",{value:"ta-IN",children:"Tamil"}),r.jsx("option",{value:"gu-IN",children:"Gujarati"}),r.jsx("option",{value:"kn-IN",children:"Kannada"}),r.jsx("option",{value:"ml-IN",children:"Malayalam"}),r.jsx("option",{value:"pa-IN",children:"Punjabi"}),r.jsx("option",{value:"es-ES",children:"Spanish"}),r.jsx("option",{value:"fr-FR",children:"French"}),r.jsx("option",{value:"de-DE",children:"German"}),r.jsx("option",{value:"it-IT",children:"Italian"}),r.jsx("option",{value:"pt-PT",children:"Portuguese"}),r.jsx("option",{value:"ru-RU",children:"Russian"}),r.jsx("option",{value:"ja-JP",children:"Japanese"}),r.jsx("option",{value:"ko-KR",children:"Korean"}),r.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),r.jsx("option",{value:"ar-SA",children:"Arabic"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Gemini API Key"}),r.jsx("input",{type:"password",className:"form-input",name:"gemini_api_key",id:"setting-gemini_api_key",value:f.gemini_api_key,onChange:$,placeholder:"******************"})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Clinic-Wide System Prompt"}),r.jsx("textarea",{className:"form-textarea",name:"clinicWideSystemPrompt",id:"setting-clinicWideSystemPrompt",value:f.clinicWideSystemPrompt,onChange:$,placeholder:"Instructions for the AI..."})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"AI Memory (Context)"}),r.jsx("textarea",{className:"form-textarea",name:"aiMemory",id:"setting-aiMemory",value:f.aiMemory,onChange:$,placeholder:"Shared context for the AI..."})]})]})]})]})]})]}),T&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:r.jsx("div",{className:"w-96 bg-white h-full shadow-2xl animate-slide-in-right",children:r.jsx(WH,{onClose:()=>C(!1),settings:f,staffList:n,onSettingsUpdate:L,onStaffUpdate:I,onHighlight:H})})}),r.jsx(XRe,{isOpen:b,onClose:()=>j(!1),onStaffAdded:I,clinicId:f.clinic_id,fetchWithAuth:se}),r.jsx(JRe,{staffId:S,isOpen:!!S,onClose:()=>_(null),onStaffUpdated:I,fetchWithAuth:se})]})},e4e="_container_13uqm_121",t4e="_header_13uqm_141",n4e="_title_13uqm_187",r4e="_controls_13uqm_203",a4e="_dateInputGroup_13uqm_231",i4e="_dateInputLabel_13uqm_255",s4e="_dateInput_13uqm_231",o4e="_section_13uqm_297",l4e="_sectionTitle_13uqm_325",c4e="_statsGrid_13uqm_351",u4e="_statCard_13uqm_365",d4e="_statTitle_13uqm_397",h4e="_statValue_13uqm_415",f4e="_statSubtitle_13uqm_431",p4e="_revenueGrid_13uqm_443",m4e="_revenueCard_13uqm_469",g4e="_revenueCardTitle_13uqm_485",y4e="_revenueCardList_13uqm_505",x4e="_revenueCardListItem_13uqm_517",v4e="_tableContainer_13uqm_557",b4e="_table_13uqm_557",j4e="_textRight_13uqm_639",w4e="_textGreen_13uqm_647",N4e="_textRed_13uqm_655",S4e="_loadingContainer_13uqm_673",_4e="_errorAlert_13uqm_693",C4e="_backButton_13uqm_759",T4e="_chartsGrid_13uqm_797",k4e="_chartCard_13uqm_823",A4e="_chartWrapper_13uqm_873",at={container:e4e,header:t4e,title:n4e,controls:r4e,dateInputGroup:a4e,dateInputLabel:i4e,dateInput:s4e,section:o4e,sectionTitle:l4e,statsGrid:c4e,statCard:u4e,statTitle:d4e,statValue:h4e,statSubtitle:f4e,revenueGrid:p4e,revenueCard:m4e,revenueCardTitle:g4e,revenueCardList:y4e,revenueCardListItem:x4e,tableContainer:v4e,table:b4e,textRight:j4e,textGreen:w4e,textRed:N4e,loadingContainer:S4e,errorAlert:_4e,backButton:C4e,chartsGrid:T4e,chartCard:k4e,chartWrapper:A4e},RB=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],WA=({active:t,payload:e,label:n})=>t&&e&&e.length?r.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-gray-800",children:n}),e.map((a,i)=>r.jsxs("p",{style:{color:a.color},className:"text-sm",children:[a.name,": ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a.value)]},i))]}):null,E4e=()=>{const t=Lt(),e=$r(),n=new URLSearchParams(e.search),a=n.get("startDate"),i=n.get("endDate"),s=new Date().toISOString().split("T")[0],[o,l]=v.useState(a||s),[c,d]=v.useState(i||s),[f,p]=v.useState(!1),[g,x]=v.useState(null),{setAnalysisDateRange:b,analysisDateRange:j,setAnalysisData:S,registerAnalysisNavigator:_,registerAnalysisRefresher:T}=LN(),[C,P]=v.useState(0),[k,E]=v.useState(0),[I,L]=v.useState(0),[$,q]=v.useState(null),[F,H]=v.useState(null),[V,X]=v.useState(null),[Y,z]=v.useState({reception:{},pharmacy:{},lab:{},dental:{}}),[G,ie]=v.useState(0),[W,B]=v.useState(null),[ce,je]=v.useState([]),[K,Ie]=v.useState(null),[Ue,ze]=v.useState(null),[Le,be]=v.useState(null),[Ce,Ae]=v.useState([]),[me,ye]=v.useState(null),[le,J]=v.useState(0),ae=v.useCallback(async(Te,Fe)=>{p(!0),x(null);const xe=Te||o,ne=Fe||c;if(P(0),E(0),L(0),q(null),H(null),X(null),z({reception:{},pharmacy:{},lab:{},dental:{}}),Ie(null),Ie(null),ie(0),B(null),je([]),ze(null),be(null),Ae([]),ye(null),J(0),!xe||!ne){x("Please select both start and end dates."),p(!1);return}try{const oe=Ede(),[_e,De,Q,ge,de,fe]=await Promise.all([se(`/api/bills?startDate=${o}&endDate=${c}&limit=10000`),se(`/api/payment/admission?startDate=${o}&endDate=${c}`),se(`/api/subscriptions/transactions/manual?startDate=${o}&endDate=${c}`),se(`/api/patient-debts/collections/analysis?startDate=${o}&endDate=${c}`),oe?se(`/api/inventory/comprehensive-analysis?startDate=${o}&endDate=${c}&clinicId=${oe}`):Promise.resolve(null),se(`/api/distributors/payments/analysis?startDate=${o}&endDate=${c}`)]);if(_e.ok&&De.ok&&Q.ok){const Ee=await _e.json(),Ye=await De.json(),$e=await Q.json(),We=Ee.bills||[],it=Ye.admissionPayments||[],wt=$e||[];let we={totalRevenue:0,totalCashCollected:0,revenueByType:{consultation:0,pharmacy:0,lab:0,dental:0,other:0},cashByMode:{},revenueByMode:{},detailedRevenue:{reception:{},pharmacy:{},lab:{},dental:{}},dailyRevenue:new Map,pharmacyReturns:0,discountByType:{reception:0,pharmacy:0,lab:0,dental:0,other:0},byUser:{}};const Xe=new Map,Je=new Set;let ct=0,Ct=0,bt=0,ke=0;const ot=(vt,Dt)=>{const Vt=vt.split("T")[0];we.dailyRevenue.set(Vt,(we.dailyRevenue.get(Vt)||0)+Dt)},Tt=(vt,Dt,Vt,ln,er=!0)=>{const Tn=Dt.toLowerCase()==="credit";er&&(we.totalRevenue+=vt,we.revenueByType.hasOwnProperty(Vt)?we.revenueByType[Vt]+=vt:we.revenueByType.other=(we.revenueByType.other||0)+vt,ot(ln,vt),we.revenueByMode[Dt]=(we.revenueByMode[Dt]||0)+vt),Tn||(we.totalCashCollected+=vt,we.cashByMode[Dt]=(we.cashByMode[Dt]||0)+vt),er&&(Vt==="pharmacy"?we.detailedRevenue.pharmacy[Dt]=(we.detailedRevenue.pharmacy[Dt]||0)+vt:Vt==="lab"?we.detailedRevenue.lab[Dt]=(we.detailedRevenue.lab[Dt]||0)+vt:Vt==="dental"?we.detailedRevenue.dental[Dt]=(we.detailedRevenue.dental[Dt]||0)+vt:Vt!=="debt"&&(we.detailedRevenue.reception[Dt]=(we.detailedRevenue.reception[Dt]||0)+vt)),Vt==="debt"&&(we.detailedRevenue.debt=we.detailedRevenue.debt||{},we.detailedRevenue.debt[Dt]=(we.detailedRevenue.debt[Dt]||0)+vt)};if(We.forEach(vt=>{var Dt,Vt,ln,er,Tn,va;if(vt.status==="paid"||vt.type==="pharmacy_return"){let Ya=parseFloat(vt.amount.toString()),Br=vt.type||"other";if(Br==="pharmacy_return"&&(we.pharmacyReturns+=Ya,Br="pharmacy"),vt.split_payments&&Array.isArray(vt.split_payments)&&vt.split_payments.length>0)vt.split_payments.forEach(Rn=>{const tt=parseFloat(Rn.amount.toString()),gt=Rn.method||"Unknown",St=gt.toLowerCase()==="credit";we.totalRevenue+=tt,we.revenueByType.hasOwnProperty(Br)?we.revenueByType[Br]+=tt:we.revenueByType.other=(we.revenueByType.other||0)+tt,ot(vt.createdAt,tt),we.revenueByMode[gt]=(we.revenueByMode[gt]||0)+tt,St||(we.totalCashCollected+=tt,we.cashByMode[gt]=(we.cashByMode[gt]||0)+tt),Br==="pharmacy"?we.detailedRevenue.pharmacy[gt]=(we.detailedRevenue.pharmacy[gt]||0)+tt:Br==="lab"?we.detailedRevenue.lab[gt]=(we.detailedRevenue.lab[gt]||0)+tt:Br==="dental"?we.detailedRevenue.dental[gt]=(we.detailedRevenue.dental[gt]||0)+tt:we.detailedRevenue.reception[gt]=(we.detailedRevenue.reception[gt]||0)+tt});else{const Rn=vt.payment_mode||"Unknown";Tt(Ya,Rn,Br,vt.createdAt,!0)}let Aa=0;if(vt.items&&Array.isArray(vt.items)&&(Aa=vt.items.reduce((Rn,tt)=>{const gt=tt.discount_percentage||0;if(gt>0&&gt<100){const Ot=(tt.total||tt.total_price||0)*(gt/(100-gt));return Rn+Ot}return Rn},0)),Aa>0){Br==="pharmacy"?we.discountByType.pharmacy+=Aa:Br==="lab"?we.discountByType.lab+=Aa:Br==="dental"?we.discountByType.dental+=Aa:Br==="consultation"||Br==="other"?we.discountByType.reception+=Aa:we.discountByType.other+=Aa;const Rn=vt.created_by||((Dt=vt.Creator)==null?void 0:Dt.id)||"unknown";if(Rn!=="unknown"){const tt=((Vt=vt.Creator)==null?void 0:Vt.name)||"Unknown User",gt=((ln=vt.Creator)==null?void 0:ln.role)||"unknown";we.byUser[Rn]||(we.byUser[Rn]={id:Rn,name:tt,role:gt,revenue:0,cashFlow:0,discount:0}),we.byUser[Rn].discount+=Aa}}const zi=vt.created_by||((er=vt.Creator)==null?void 0:er.id)||"unknown";if(zi!=="unknown"){const Rn=((Tn=vt.Creator)==null?void 0:Tn.name)||"Unknown User",tt=((va=vt.Creator)==null?void 0:va.role)||"unknown";if(we.byUser[zi]||(we.byUser[zi]={id:zi,name:Rn,role:tt,revenue:0,cashFlow:0,discount:0}),we.byUser[zi].revenue+=Ya,!(vt.payment_mode==="credit"||vt.payment_mode==="no_cash_insurance")){let St=0;vt.split_payments&&vt.split_payments.length>0?vt.split_payments.forEach(Ot=>{Ot.method!=="credit"&&Ot.method!=="no_cash_insurance"&&(St+=parseFloat(Ot.amount.toString()))}):St=Ya,we.byUser[zi].cashFlow+=St}}if(vt.Patient){const Rn=vt.Patient.id,tt=new Date(vt.Patient.createdAt||"2000-01-01")>=new Date(xe);tt?bt+=Ya:ke+=Ya,Je.has(Rn)||(Je.add(Rn),tt?ct++:Ct++)}vt.items&&Array.isArray(vt.items)&&vt.items.forEach(Rn=>{if(Rn.name){const tt=Xe.get(Rn.name)||{count:0,revenue:0},gt=parseFloat((Rn.quantity||0).toString()),St=parseFloat((Rn.total||Rn.total_price||0).toString());Xe.set(Rn.name,{count:tt.count+gt,revenue:tt.revenue+St})}})}}),it.forEach(vt=>{Tt(parseFloat(vt.amount_paid.toString()),vt.payment_mode||"Unknown","consultation",vt.payment_date,!0)}),wt.forEach(vt=>{var ln,er;const Dt=parseFloat(((er=(ln=vt.subscriptionPlan)==null?void 0:ln.price)==null?void 0:er.toString())??"0"),Vt=vt.subscription_payment_method||"manual";Tt(Dt,Vt,"consultation",vt.subscription_start_date,!0)}),ge.ok){const Dt=(await ge.json()).paymentModeBreakdown||{};Object.entries(Dt).forEach(([Vt,ln])=>{const er=Number(ln);Tt(er,Vt,"debt","",!1)})}E(we.totalCashCollected),P(we.totalRevenue),L(we.pharmacyReturns),q(we.cashByMode),H(we.revenueByMode),X(we.revenueByType),z(we.detailedRevenue),ze(we.discountByType);const Ve=Object.values(we.byUser).sort((vt,Dt)=>Dt.revenue-vt.revenue);be(Ve),ye({newPatients:ct,returningPatients:Ct,newPatientRevenue:bt,returningPatientRevenue:ke});const jt=Array.from(Xe.entries()).map(([vt,Dt])=>({name:vt,...Dt})).sort((vt,Dt)=>Dt.count-vt.count).slice(0,10);Ae(jt);const kt=We.length>0?we.totalRevenue/We.length:0;if(J(kt),fe&&fe.ok){const vt=await fe.json();ie(vt.totalPaid||0),B(vt.paymentModeBreakdown||{})}const Kn=Array.from(we.dailyRevenue.entries()).sort((vt,Dt)=>new Date(vt[0]).getTime()-new Date(Dt[0]).getTime()).map(([vt,Dt])=>({date:vt,amount:Dt}));je(Kn)}if(de&&de.ok){const Ee=await de.json();Ie(Ee)}}catch(oe){console.error("Analysis Fetch Error:",oe),x("Failed to fetch analysis data. Please try again.")}finally{p(!1)}},[o,c]);v.useEffect(()=>{_(Te=>{const Fe=`analysis-${Te}`,xe=document.getElementById(Fe);xe&&(xe.scrollIntoView({behavior:"smooth",block:"center"}),xe.classList.add("ai-highlight-glow"),setTimeout(()=>xe.classList.remove("ai-highlight-glow"),2e3))})},[_]),v.useEffect(()=>{T(async()=>(await ae(),null))},[T,ae]),v.useEffect(()=>{if(j.startDate&&j.endDate){const Te=j.startDate.toISOString().split("T")[0],Fe=j.endDate.toISOString().split("T")[0];(Te!==o||Fe!==c)&&(l(Te),d(Fe))}},[j]),v.useEffect(()=>{const Te=new URLSearchParams(e.search),Fe=Te.get("section"),xe=Te.get("startDate"),ne=Te.get("endDate");if(xe&&ne){l(xe),d(ne);const oe=j.startDate?j.startDate.toISOString().split("T")[0]:null,_e=j.endDate?j.endDate.toISOString().split("T")[0]:null;(oe!==xe||_e!==ne)&&b({startDate:new Date(xe),endDate:new Date(ne)})}if(Fe){const oe=`analysis-${Fe}`;setTimeout(()=>{const _e=document.getElementById(oe);_e&&(_e.scrollIntoView({behavior:"smooth",block:"center"}),_e.classList.add("ai-highlight-glow"),setTimeout(()=>_e.classList.remove("ai-highlight-glow"),2e3))},500)}},[e.search]),v.useEffect(()=>{ae()},[o,c,ae]),v.useEffect(()=>{!f&&(k>0||K)&&S({totalRevenue:C,totalCashFlow:k,totalExpenses:G,netCashFlow:k-G,collectionsBreakdown:$,revenueBreakdown:F,inventoryValue:0,pharmacyRevenue:(V==null?void 0:V.pharmacy)||0,labRevenue:(V==null?void 0:V.lab)||0,dentalRevenue:(V==null?void 0:V.dental)||0,receptionRevenue:((V==null?void 0:V.consultation)||0)+((V==null?void 0:V.other)||0),inventorySummary:K?{totalItemsAnalyzed:K.pharmacyAnalysis.length,netPositiveItems:K.pharmacyAnalysis.filter(Te=>Te.net_change>0).length}:null})},[C,k,G,$,F,K,V,f,S]);const ue=Te=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Te),ee=v.useMemo(()=>F?Object.entries(F).map(([Te,Fe])=>({name:Te,value:Fe})):[],[F]),Ne=v.useMemo(()=>V?[{name:"Consultation",value:V.consultation},{name:"Pharmacy",value:V.pharmacy},{name:"Lab",value:V.lab},{name:"Dental",value:V.dental},{name:"Debt Collections",value:V.debt||0},{name:"Other",value:V.other||0}].filter(Te=>Te.value>0):[],[V]);return r.jsxs("div",{className:at.container,children:[r.jsxs("div",{className:at.header,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>t(-1),className:at.backButton,title:"Go Back",children:[r.jsx(on,{size:20})," Back"]}),r.jsx("h1",{className:at.title,children:"Analysis Dashboard"})]}),r.jsxs("div",{className:at.controls,children:[r.jsxs("div",{className:at.dateInputGroup,children:[r.jsx("label",{className:at.dateInputLabel,children:"From:"}),r.jsx("input",{type:"date",className:at.dateInput,value:o,onChange:Te=>{l(Te.target.value),c&&b({startDate:new Date(Te.target.value),endDate:new Date(c)})}})]}),r.jsxs("div",{className:at.dateInputGroup,children:[r.jsx("label",{className:at.dateInputLabel,children:"To:"}),r.jsx("input",{type:"date",className:at.dateInput,value:c,onChange:Te=>{d(Te.target.value),o&&b({startDate:new Date(o),endDate:new Date(Te.target.value)})}})]})]})]}),g&&r.jsxs("div",{className:at.errorAlert,children:[r.jsx(Wr,{size:20}),r.jsx("span",{children:g})]}),!f&&r.jsxs("div",{children:[r.jsxs("section",{className:at.section,id:"analysis-expenses",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(pw,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Cash Flow Analysis"})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Cash Inflow"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-success)"},children:ue(k)}),r.jsx("div",{className:at.statSubtitle,children:"Collections (Cash, UPI, etc.)"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Expenses"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-danger)"},children:ue(G)}),r.jsx("div",{className:at.statSubtitle,children:"Distributor Payments"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Net Cash Flow"}),r.jsx("div",{className:at.statValue,style:{color:k-G>=0?"var(--accent-success)":"var(--accent-danger)"},children:ue(k-G)}),r.jsx("div",{className:at.statSubtitle,children:"Inflow - Outflow"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Avg. Bill Value"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-primary)"},children:ue(le)}),r.jsx("div",{className:at.statSubtitle,children:"Per Visit Average"})]})]}),r.jsxs("div",{className:at.revenueGrid,style:{marginTop:"1rem"},children:[$&&Object.keys($).length>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Collections Breakdown"}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries($).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:ue(Fe)})]},Te))})]}),W&&Object.keys(W).length>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Expense Breakdown"}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(W).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:ue(Fe)})]},Te))})]})]})]}),r.jsxs("section",{className:at.section,id:"analysis-financial",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(cd,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Financial Performance"})]}),r.jsx("div",{className:at.statsGrid,children:r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Revenue Generated"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-primary)"},children:ue(C)}),r.jsx("div",{className:at.statSubtitle,children:"Billings & Services (Accrual)"})]})}),r.jsxs("div",{className:at.chartsGrid,children:[r.jsxs("div",{className:at.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{children:"Revenue Trend (Daily)"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(iw,{width:"100%",height:300,children:r.jsxs(RPe,{data:ce,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"var(--accent-primary)",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"var(--accent-primary)",stopOpacity:.05})]})}),r.jsx(mb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(zc,{dataKey:"date",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(qc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:Te=>`${Te/1e3}k`}),r.jsx(Mi,{content:r.jsx(WA,{})}),r.jsx(Cd,{type:"monotone",dataKey:"amount",stroke:"var(--accent-primary)",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx("h3",{children:"Payment Method Distribution"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(iw,{width:"100%",height:300,children:r.jsxs(qH,{children:[r.jsx(ql,{data:ee,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:ee.map((Te,Fe)=>r.jsx($b,{fill:RB[Fe%RB.length]},`cell-${Fe}`))}),r.jsx(Mi,{content:r.jsx(WA,{})}),r.jsx(Pc,{verticalAlign:"bottom",height:36,formatter:Te=>r.jsx("span",{style:{color:"var(--text-primary)"},children:Te})})]})})})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx("h3",{children:"Revenue by Source"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(iw,{width:"100%",height:300,children:r.jsxs(zH,{data:Ne,children:[r.jsx(mb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(zc,{dataKey:"name",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(qc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:Te=>`${Te/1e3}k`}),r.jsx(Mi,{content:r.jsx(WA,{}),cursor:{fill:"var(--bg-primary)"}}),r.jsx(_d,{dataKey:"value",fill:"var(--accent-success)",radius:[4,4,0,0]})]})})})]})]}),Y&&r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(vE,{style:{color:"var(--text-secondary)"},size:20}),r.jsx("h3",{children:"Detailed Breakdown"})]}),Y&&r.jsxs("div",{className:at.revenueGrid,children:[r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:ue(((V==null?void 0:V.consultation)||0)+((V==null?void 0:V.other)||0))}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Y.reception).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:ue(Fe)})]},Te))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:ue((V==null?void 0:V.pharmacy)||0)}),I<0&&r.jsxs("div",{className:`${at.textRed} text-sm mb-2`,children:["Returns: ",ue(I)]}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Y.pharmacy).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:ue(Fe)})]},Te))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:ue((V==null?void 0:V.lab)||0)}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Y.lab).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:ue(Fe)})]},Te))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:ue((V==null?void 0:V.dental)||0)}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Y.dental).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:ue(Fe)})]},Te))})]})]}),Ue&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(yJ,{style:{color:"var(--accent-warning)"},size:20}),r.jsx("h3",{children:"Revenue Lost Due to Discount"})]}),Ue.reception>0||Ue.pharmacy>0||Ue.lab>0||Ue.dental>0||Ue.other>0?r.jsxs("div",{className:at.revenueGrid,children:[Ue.reception>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:ue(Ue.reception)})]}),Ue.pharmacy>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:ue(Ue.pharmacy)})]}),Ue.lab>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:ue(Ue.lab)})]}),Ue.dental>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:ue(Ue.dental)})]}),Ue.other>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Others"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:ue(Ue.other)})]}),r.jsxs("div",{className:at.revenueCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Total Revenue Lost"}),r.jsx("div",{className:at.statValue,style:{fontSize:"2rem",color:"var(--accent-danger)",marginBottom:"0"},children:ue(Ue.reception+Ue.pharmacy+Ue.lab+Ue.dental+Ue.other)})]})]}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No discounts applied in this period."})]}),Le&&Le.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(Ds,{style:{color:"var(--accent-primary)"},size:20}),r.jsx("h3",{children:"User Performance Breakdown"})]}),r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"User"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Revenue"}),r.jsx("th",{children:"Cash Collected"}),r.jsx("th",{children:"Discount Given"})]})}),r.jsx("tbody",{children:Le.map(Te=>r.jsxs("tr",{children:[r.jsx("td",{children:Te.name}),r.jsx("td",{style:{textTransform:"capitalize"},children:Te.role}),r.jsx("td",{style:{color:"var(--accent-success)"},children:ue(Te.revenue)}),r.jsx("td",{children:ue(Te.cashFlow)}),r.jsx("td",{style:{color:"var(--accent-warning)"},children:ue(Te.discount)})]},Te.id))})]})})]}),me&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(Ds,{style:{color:"var(--accent-primary)"},size:20}),r.jsx("h3",{children:"Patient Analytics"})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"New Patients"}),r.jsx("div",{className:at.statValue,children:me.newPatients}),r.jsxs("div",{className:at.statSubtitle,style:{color:"var(--accent-success)"},children:[ue(me.newPatientRevenue)," Rev"]})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Returning"}),r.jsx("div",{className:at.statValue,children:me.returningPatients}),r.jsxs("div",{className:at.statSubtitle,style:{color:"var(--accent-primary)"},children:[ue(me.returningPatientRevenue)," Rev"]})]})]})]}),Ce.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(ud,{style:{color:"var(--accent-warning)"},size:20}),r.jsx("h3",{children:"Top Performing Items"})]}),r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Quantity Sold"}),r.jsx("th",{children:"Revenue Generated"})]})}),r.jsx("tbody",{children:Ce.map((Te,Fe)=>r.jsxs("tr",{children:[r.jsx("td",{children:Te.name}),r.jsx("td",{children:Te.count}),r.jsx("td",{style:{color:"var(--accent-success)"},children:ue(Te.revenue)})]},Fe))})]})})]})]}),r.jsxs("section",{className:at.section,id:"analysis-inventory",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(ud,{style:{color:"var(--accent-success)"},size:24}),r.jsx("h2",{children:"Inventory Movement"})]}),K&&K.pharmacyAnalysis.length>0?r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Stock In"}),r.jsx("th",{children:"Stock Out"}),r.jsx("th",{children:"Net Change"}),r.jsx("th",{className:at.textRight,children:"Est. Revenue"}),r.jsx("th",{className:at.textRight,children:"Est. Profit"})]})}),r.jsx("tbody",{children:K.pharmacyAnalysis.map(Te=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:600},children:Te.name}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:Te.supplier})]}),r.jsxs("td",{className:at.textGreen,children:["+",Te.quantity_in,Object.entries(Te.quantity_in_by_reason).map(([Fe,xe])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[Fe,": ",xe]},Fe))]}),r.jsxs("td",{className:at.textRed,children:["-",Te.quantity_out,Object.entries(Te.quantity_out_by_reason).map(([Fe,xe])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[Fe,": ",xe]},Fe))]}),r.jsx("td",{children:r.jsxs("span",{style:{fontWeight:600},className:Te.net_change>=0?at.textGreen:at.textRed,children:[Te.net_change>0?"+":"",Te.net_change]})}),r.jsx("td",{className:at.textRight,children:ue(Te.revenue)}),r.jsx("td",{className:`${at.textRight} ${Te.profit>=0?at.textGreen:at.textRed}`,children:ue(Te.profit)})]},Te.drug_id))})]})}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No inventory movement recorded for this period."})]})]}),f&&r.jsxs("div",{className:at.loadingContainer,style:{display:"block"},children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(te,{variant:"circular",width:24,height:24}),r.jsx(te,{width:200,height:24})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"80%",height:32}),r.jsx(te,{width:"40%",height:16})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"80%",height:32}),r.jsx(te,{width:"40%",height:16})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx(te,{width:"60%",height:20}),r.jsx(te,{width:"80%",height:32}),r.jsx(te,{width:"40%",height:16})]})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsxs("div",{className:at.chartsGrid,children:[r.jsxs("div",{className:at.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx(te,{width:180,height:24,className:"mb-4"}),r.jsx(te,{width:"100%",height:250})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx(te,{width:180,height:24,className:"mb-4"}),r.jsx(te,{width:"100%",height:200,variant:"circular",style:{margin:"0 auto"}})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx(te,{width:180,height:24,className:"mb-4"}),r.jsx(te,{width:"100%",height:250})]})]})})]})]})},P4e=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState({name:"",description:"",columns:[]}),g=async()=>{i(!0);try{const C=await se("/api/custom-tables");if(!C.ok)throw new Error("Failed to fetch tables");const P=await C.json();n(P)}catch(C){s(C.message)}finally{i(!1)}};v.useEffect(()=>{g()},[]);const x=C=>{C?(d(C),p({name:C.name,description:C.description,columns:[...C.columns]})):(d(null),p({name:"",description:"",columns:[]})),l(!0)},b=async()=>{try{const C=c?`/api/custom-tables/${c.id}`:"/api/custom-tables";if(!(await se(C,{method:c?"PUT":"POST",body:JSON.stringify(f)})).ok)throw new Error("Failed to save table");l(!1),g()}catch(C){alert(C.message)}},j=async C=>{if(confirm("Are you sure? This will delete all data in this table!"))try{await se(`/api/custom-tables/${C}`,{method:"DELETE"}),g()}catch(P){alert(P.message)}},S=()=>{p(C=>({...C,columns:[...C.columns,{key:`col_${Date.now()}`,label:"New Column",type:"text"}]}))},_=(C,P,k)=>{const E=[...f.columns];E[C]={...E[C],[P]:k},P==="label"&&(E[C].key=k.toLowerCase().replace(/[^a-z0-9]/g,"_")),p(I=>({...I,columns:E}))},T=C=>{p(P=>({...P,columns:P.columns.filter((k,E)=>E!==C)}))};return r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("h1",{children:[r.jsx(Eb,{size:24})," Custom Tables Manager"]}),r.jsxs("button",{className:"primary-button",onClick:()=>x(),children:[r.jsx(Hn,{size:16})," Create New Table"]})]}),a?r.jsx("p",{children:"Loading..."}):r.jsx("div",{className:"tables-grid",children:e.map(C=>r.jsxs("div",{className:"table-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:C.name}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>x(C),children:r.jsx($i,{size:16})}),r.jsx("button",{onClick:()=>j(C.id),className:"danger",children:r.jsx(Vn,{size:16})})]})]}),r.jsx("p",{className:"description",children:C.description||"No description"}),r.jsxs("div",{className:"column-preview",children:[C.columns.length," columns defined"]}),r.jsx("button",{className:"secondary-button",onClick:()=>t(`/custom-tables/${C.id}`),children:"View Data & Records"})]},C.id))}),o&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:c?"Edit Table":"Create New Table"}),r.jsx("button",{onClick:()=>l(!1),children:r.jsx(Ft,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Table Name"}),r.jsx("input",{value:f.name,onChange:C=>p({...f,name:C.target.value}),placeholder:"e.g., Equipment Log"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("textarea",{value:f.description,onChange:C=>p({...f,description:C.target.value})})]}),r.jsxs("div",{className:"columns-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h3",{children:"Columns"}),r.jsx("button",{onClick:S,className:"icon-button",children:r.jsx(Hn,{size:16})})]}),f.columns.map((C,P)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{value:C.label,onChange:k=>_(P,"label",k.target.value),placeholder:"Column Name"}),r.jsxs("select",{value:C.type,onChange:k=>_(P,"type",k.target.value),children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>T(P),className:"danger",children:r.jsx(Vn,{size:14})})]},P))]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:b,className:"primary-button",children:"Save Table"})})]})})]})},D4e=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState(!1),[b,j]=v.useState(null),[S,_]=v.useState({});v.useEffect(()=>{t&&T()},[t]);const T=async()=>{l(!0);try{const I=await se(`/api/custom-tables/${t}`);if(!I.ok)throw new Error("Failed to fetch table definition");const L=await I.json();a(L);const $=await se(`/api/custom-tables/${t}/records`);if(!$.ok)throw new Error("Failed to fetch records");const q=await $.json();s(q)}catch(I){d(I.message)}finally{l(!1)}},C=I=>{I?(j(I),_({...I.data})):(j(null),_({})),x(!0)},P=async()=>{try{const I=b?`/api/custom-tables/records/${b.id}`:`/api/custom-tables/${t}/records`;if(!(await se(I,{method:b?"PUT":"POST",body:JSON.stringify({data:S})})).ok)throw new Error("Failed to save record");x(!1),T()}catch(I){alert(I.message)}},k=async I=>{if(confirm("Delete this record?"))try{await se(`/api/custom-tables/records/${I}`,{method:"DELETE"}),T()}catch(L){alert(L.message)}},E=I=>{const L=S[I.key]||"";switch(I.type){case"boolean":return r.jsxs("select",{value:L,onChange:$=>_({...S,[I.key]:$.target.value}),children:[r.jsx("option",{value:"",children:"Select..."}),r.jsx("option",{value:"true",children:"Yes"}),r.jsx("option",{value:"false",children:"No"})]});case"number":return r.jsx("input",{type:"number",value:L,onChange:$=>_({...S,[I.key]:$.target.value})});case"date":return r.jsx("input",{type:"date",value:L,onChange:$=>_({...S,[I.key]:$.target.value})});default:return r.jsx("input",{type:"text",value:L,onChange:$=>_({...S,[I.key]:$.target.value})})}};return o?r.jsx("div",{className:"p-4",children:"Loading..."}):c||!n?r.jsxs("div",{className:"p-4 error",children:["Error: ",c||"Table not found"]}):r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[r.jsx("button",{onClick:()=>e("/custom-tables"),className:"icon-button",children:r.jsx(on,{size:20})}),r.jsx("h1",{children:n.name})]}),r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>p(!1),className:`view-mode-btn ${f?"":"active"}`,title:"List View",children:[r.jsx(Ab,{size:18})," List"]}),r.jsxs("button",{onClick:()=>p(!0),className:`view-mode-btn ${f?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(xf,{size:18})," Excel"]})]}),r.jsxs("button",{className:"primary-button",onClick:()=>C(),children:[r.jsx(Hn,{size:16})," Add Record"]})]}),r.jsx("div",{className:"table-wrapper",style:{background:"var(--bg-card)",borderRadius:"12px",padding:"20px",overflowX:"auto"},children:f?r.jsx(Rb,{columns:n.columns.map(I=>({key:I.key,label:I.label,editable:!0,type:I.type})),data:i.map(I=>({...I.data,id:I.id})),editable:!0,showRowNumbers:!0,title:n.name,onSave:async I=>{const L=I.map(async $=>{const q=i.find(F=>F.id===$.id);if(q&&JSON.stringify(q.data)!==JSON.stringify($)){const{id:F,...H}=$;if(JSON.stringify(q.data)!==JSON.stringify(H))return se(`/api/custom-tables/records/${$.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:H})})}});try{await Promise.all(L),T()}catch($){alert("Error saving changes"),console.error($)}}}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[n.columns.map(I=>r.jsx("th",{style:{textAlign:"left",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:I.label},I.key)),r.jsx("th",{style:{width:"100px",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:n.columns.length+1,style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"No records yet"})}):i.map(I=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.columns.map(L=>r.jsx("td",{style:{padding:"12px"},children:L.type==="boolean"?I.data[L.key]==="true"?"Yes":"No":String(I.data[L.key]||"-")},L.key)),r.jsx("td",{style:{padding:"12px"},children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>C(I),className:"icon-button",children:r.jsx($i,{size:16})}),r.jsx("button",{onClick:()=>k(I.id),className:"icon-button",style:{color:"#dc3545"},children:r.jsx(Vn,{size:16})})]})})]},I.id))})]})}),g&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:b?"Edit Record":"Add New Record"}),r.jsx("button",{onClick:()=>x(!1),children:r.jsx(Ft,{size:20})})]}),r.jsx("div",{className:"modal-body",children:n.columns.map(I=>r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:I.label}),E(I)]},I.key))}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:P,className:"primary-button",children:"Save Record"})})]})})]})},O4e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(""),o=Lt();v.useEffect(()=>{l()},[]);const l=async()=>{try{const p=await se("/api/dashboards");if(p.ok){const g=await p.json();e(g)}}catch(p){console.error("Error fetching dashboards:",p)}finally{a(!1)}},c=async(p,g)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this dashboard?"))try{await se(`/api/dashboards/${g}`,{method:"DELETE"}),e(t.filter(x=>x.id!==g))}catch(x){console.error("Error deleting dashboard:",x)}},d=p=>{try{const g=new Date(p);return g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:g.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}},f=t.filter(p=>p.name.toLowerCase().includes(i.toLowerCase())||p.description&&p.description.toLowerCase().includes(i.toLowerCase()));return r.jsxs("div",{className:"custom-dashboards-container",children:[r.jsxs("div",{className:"cdp-header",children:[r.jsxs("div",{className:"cdp-title-row",children:[r.jsxs("div",{className:"cdp-title",children:[r.jsx("div",{className:"cdp-icon",children:r.jsx(xf,{size:20})}),r.jsxs("div",{children:[r.jsx("h1",{children:"Custom Dashboards"}),r.jsxs("span",{className:"cdp-subtitle",children:[t.length," dashboard",t.length!==1?"s":""]})]})]}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(Hn,{size:16}),r.jsx("span",{className:"cdp-btn-text",children:"Create"})]})]}),t.length>0&&r.jsxs("div",{className:"cdp-search",children:[r.jsx(In,{size:16}),r.jsx("input",{type:"text",placeholder:"Search dashboards...",value:i,onChange:p=>s(p.target.value)})]})]}),r.jsx("div",{className:"cdp-content",children:n?r.jsx("div",{className:"cdp-grid",children:[1,2,3,4,5,6].map(p=>r.jsxs("div",{className:"cdp-card",style:{cursor:"default"},children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx(te,{width:18,height:18,variant:"circular"}),r.jsx(te,{width:80,height:12})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx(te,{width:"70%",height:24,style:{marginBottom:"8px"}}),r.jsx(te,{width:"90%",height:16})]}),r.jsxs("div",{className:"cdp-card-footer",style:{borderTop:"none"},children:[r.jsx(te,{width:60,height:32}),r.jsx(te,{width:60,height:32}),r.jsx(te,{width:32,height:32})]})]},p))}):f.length===0?r.jsxs("div",{className:"cdp-empty",children:[r.jsx("div",{className:"cdp-empty-icon",children:r.jsx(eg,{size:48})}),i?r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No results found"}),r.jsx("p",{children:"Try a different search term"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No dashboards yet"}),r.jsx("p",{children:"Create your first custom dashboard to get started"}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(Hn,{size:16})," Create Dashboard"]})]})]}):r.jsx("div",{className:"cdp-grid",children:f.map(p=>r.jsxs("div",{className:"cdp-card",onClick:()=>o(`/dashboards/${p.id}`),children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx("div",{className:"cdp-card-icon",children:r.jsx(eg,{size:18})}),r.jsx("div",{className:"cdp-card-meta",children:p.created_at&&r.jsxs("span",{className:"cdp-card-date",children:[r.jsx(ua,{size:12}),d(p.created_at)]})})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx("h3",{children:p.name}),r.jsx("p",{children:p.description||"No description"})]}),r.jsxs("div",{className:"cdp-card-footer",children:[r.jsxs("button",{className:"cdp-action-btn cdp-view-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}`)},children:[r.jsx(Im,{size:14}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{className:"cdp-action-btn cdp-edit-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}/edit`)},children:[r.jsx($i,{size:14}),r.jsx("span",{children:"Edit"})]}),r.jsx("button",{className:"cdp-action-btn cdp-delete-btn",onClick:g=>c(g,p.id),children:r.jsx(Vn,{size:14})})]})]},p.id))})})]})},M4e=({isOpen:t,onClose:e,onConfirm:n})=>{const[a,i]=v.useState({}),[s,o]=v.useState(""),[l,c]=v.useState(""),[d,f]=v.useState([]),[p,g]=v.useState([]),[x,b]=v.useState(!1);v.useEffect(()=>{t&&j()},[t]);const j=async()=>{b(!0);try{const I=await se("/api/dashboards/table-relations");if(I.ok){const L=await I.json();i(L);const $=Object.keys(L);$.length>0&&o($[0])}}catch(I){console.error("Error fetching table relations:",I)}finally{b(!1)}},S=I=>{o(I),c(""),f([]),g([])},_=I=>{c(I),g([])},T=(I,L,$)=>{I.includes($)?L(I.filter(q=>q!==$)):L([...I,$])},C=()=>{var I,L;if(!s||!l){alert("Please select both primary and related tables");return}if(d.length===0&&p.length===0){alert("Please select at least one column");return}n({primary:s,related:l,primaryColumns:d,relatedColumns:p,primaryLabel:((I=a[s])==null?void 0:I.label)||s,relatedLabel:((L=a[l])==null?void 0:L.label)||l}),e()};if(!t)return null;const P=a[s],k=(P==null?void 0:P.relations)||{},E=a[l];return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content join-builder-modal",children:[r.jsxs("div",{className:"modal-header-compact",children:[r.jsxs("h3",{children:[r.jsx(Vz,{size:18,style:{marginRight:"6px"}})," Join Tables Builder"]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(Ft,{size:18})})]}),r.jsx("div",{className:"join-builder-body",children:x?r.jsx("div",{style:{textAlign:"center",padding:"1rem",color:"var(--text-secondary, #64748b)"},children:"Loading tables..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"join-step-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 1:"})," Select Primary Table"]}),r.jsx("select",{value:s,onChange:I=>S(I.target.value),className:"join-select",children:Object.entries(a).filter(([I,L])=>Object.keys(L.relations).length>0).map(([I,L])=>r.jsx("option",{value:I,children:L.label},I))})]}),s&&Object.keys(k).length>0&&r.jsxs("div",{className:"join-step-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 2:"})," Select Related Table"]}),r.jsxs("select",{value:l,onChange:I=>_(I.target.value),className:"join-select",children:[r.jsx("option",{value:"",children:"-- Select --"}),Object.entries(k).map(([I,L])=>r.jsxs("option",{value:I,children:[L.label," (via ",L.foreignKey,")"]},I))]})]}),s&&P&&r.jsxs("div",{className:"join-step-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",P.label,":"]})}),r.jsx("div",{className:"columns-chip-container",children:P.columns.map(I=>r.jsxs("label",{className:`column-chip-label ${d.includes(I)?"primary-selected":"unselected"}`,children:[r.jsx("input",{type:"checkbox",checked:d.includes(I),onChange:()=>T(d,f,I),style:{display:"none"}}),I]},I))})]}),l&&E&&r.jsxs("div",{className:"join-step-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",E.label,":"]})}),r.jsx("div",{className:"columns-chip-container",children:E.columns.map(I=>r.jsxs("label",{className:`column-chip-label ${p.includes(I)?"related-selected":"unselected"}`,children:[r.jsx("input",{type:"checkbox",checked:p.includes(I),onChange:()=>T(p,g,I),style:{display:"none"}}),I]},I))})]}),(d.length>0||p.length>0)&&r.jsxs("div",{className:"join-preview-box",children:[r.jsx("span",{className:"join-preview-title",children:"Preview Columns:"}),r.jsxs("div",{className:"join-preview-content",children:[d.map(I=>r.jsxs("span",{className:"join-preview-primary",children:[P==null?void 0:P.label,".",I]},I)),p.map(I=>r.jsxs("span",{className:"join-preview-related",children:[E==null?void 0:E.label,".",I]},I))]})]})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{className:"join-btn join-btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{className:"join-btn join-btn-primary",onClick:C,disabled:!l||x,children:"Create Joined Widget"})]})]})})},I4e=({isOpen:t,onClose:e,onCreated:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([{key:"name",label:"Name",type:"text"}]),[d,f]=v.useState(!1),p=()=>{c([...l,{key:"",label:"",type:"text"}])},g=j=>{c(l.filter((S,_)=>_!==j))},x=(j,S,_)=>{const T=[...l];T[j]={...T[j],[S]:_},S==="label"&&!T[j].key&&(T[j].key=_.toLowerCase().replace(/\s+/g,"_")),c(T)},b=async()=>{if(!a.trim()){alert("Table name is required");return}if(l.length===0||l.some(j=>!j.key||!j.label)){alert("All columns must have a key and label");return}f(!0);try{(await se("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,description:s,columns:l})})).ok?(n(),e(),i(""),o(""),c([{key:"name",label:"Name",type:"text"}])):alert("Failed to create table")}catch(j){console.error("Error creating table:",j),alert("Error creating table")}finally{f(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content create-table-modal-content",children:[r.jsxs("div",{className:"create-table-header",children:[r.jsxs("h3",{children:[r.jsx(Eb,{size:20})," Create Custom Table"]}),r.jsx("button",{onClick:e,className:"close-btn",children:r.jsx(Ft,{size:20})})]}),r.jsxs("div",{className:"form-content",children:[r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Table Name *"}),r.jsx("input",{type:"text",value:a,onChange:j=>i(j.target.value),placeholder:"e.g., Patient Notes, Appointments",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:s,onChange:j=>o(j.target.value),placeholder:"Optional description",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Columns"}),r.jsx("div",{className:"columns-container",children:l.map((j,S)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{type:"text",value:j.label,onChange:_=>x(S,"label",_.target.value),placeholder:"Column label",className:"modal-input column-label-input"}),r.jsx("input",{type:"text",value:j.key,onChange:_=>x(S,"key",_.target.value),placeholder:"key",className:"modal-input column-key-input"}),r.jsxs("select",{value:j.type,onChange:_=>x(S,"type",_.target.value),className:"column-type-select",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>g(S),className:"remove-col-btn",disabled:l.length<=1,children:r.jsx(Vn,{size:16})})]},S))}),r.jsxs("button",{onClick:p,className:"add-col-btn",children:[r.jsx(Hn,{size:14})," Add Column"]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:b,disabled:d,className:"create-button",children:d?"Creating...":"Create Table"})]})]})}):null},LB=()=>{const{id:t}=Fa(),e=Lt(),n=!!t,[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([]),[d,f]=v.useState(!1),[p,g]=v.useState([]),[x,b]=v.useState(!1),[j,S]=v.useState("stat"),[_,T]=v.useState(""),[C,P]=v.useState("api:patients"),[k,E]=v.useState([]),[I,L]=v.useState(!1),[$,q]=v.useState(!1);v.useEffect(()=>{F(),n&&H()},[t]);const F=async()=>{try{const W=await se("/api/dashboards/data-sources");if(W.ok){const B=await W.json();g(B),B.length>0&&P(B[0].key)}}catch(W){console.error("Error fetching data sources:",W)}},H=async()=>{try{const W=await se(`/api/dashboards/${t}`);if(W.ok){const B=await W.json();i(B.name),o(B.description),c(B.widgets||[])}}catch(W){console.error("Error fetching dashboard:",W)}},V=async()=>{if(!a.trim())return alert("Name is required");f(!0);try{const W={name:a,description:s,widgets:l},B=n?`/api/dashboards/${t}`:"/api/dashboards";(await se(B,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).ok?e("/dashboards"):alert("Failed to save dashboard")}catch(W){console.error("Error saving dashboard:",W)}finally{f(!1)}},X=()=>{var ce;const W=p.find(je=>je.key===C),B={id:Date.now().toString(),type:j,title:_||(W==null?void 0:W.label)||"New Widget",dataSource:C,config:{columns:k.length>0?k:((ce=W==null?void 0:W.columns)==null?void 0:ce.slice(0,3))||[]}};c([...l,B]),b(!1),T(""),E([])},Y=W=>{c(l.filter(B=>B.id!==W))},z=W=>{P(W),E([])},G=p.find(W=>W.key===C),ie=W=>{const B={id:Date.now().toString(),type:"table",title:`${W.primaryLabel} + ${W.relatedLabel}`,dataSource:`dynamic:${W.primary}:${W.related}`,config:{primaryColumns:W.primaryColumns,relatedColumns:W.relatedColumns}};c([...l,B])};return r.jsxs("div",{className:"dashboard-builder-container",children:[r.jsxs("div",{className:"builder-header",children:[r.jsxs("button",{className:"back-btn",onClick:()=>e("/dashboards"),children:[r.jsx(on,{size:16})," Back"]}),r.jsxs("div",{className:"title-inputs",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:a,onChange:W=>i(W.target.value),className:"dashboard-name-input"}),r.jsx("input",{type:"text",placeholder:"Description (Optional)",value:s,onChange:W=>o(W.target.value),className:"dashboard-desc-input"})]}),r.jsxs("button",{className:"primary-button",onClick:V,disabled:d,children:[r.jsx(cs,{size:16})," ",d?"Saving...":"Save Dashboard"]})]}),r.jsx("div",{className:"widgets-area",children:l.length===0?r.jsxs("div",{className:"empty-canvas",children:[r.jsx("p",{children:"Canvas is empty. Add a widget to start."}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"},children:[r.jsxs("button",{onClick:()=>b(!0),className:"add-widget-btn",children:[r.jsx(Hn,{size:16})," Add Widget"]}),r.jsxs("button",{onClick:()=>L(!0),className:"add-widget-btn",style:{background:"#2196F3"},children:[r.jsx(Vz,{size:16})," Create Joined Widget"]}),r.jsxs("button",{onClick:()=>q(!0),className:"add-widget-btn",style:{background:"#4CAF50"},children:[r.jsx(Eb,{size:16})," Create Custom Table"]})]})]}):r.jsxs("div",{className:"widgets-grid",children:[l.map(W=>r.jsxs("div",{className:"widget-wrapper",children:[r.jsx("div",{className:"widget-actions-overlay",children:r.jsx("button",{onClick:()=>Y(W.id),className:"remove-widget-btn",children:r.jsx(Vn,{size:14})})}),r.jsx(AM,{widget:W})]},W.id)),r.jsxs("div",{className:"add-more-card",onClick:()=>b(!0),children:[r.jsx(Hn,{size:24}),r.jsx("span",{children:"Add Widget"})]})]})}),x&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("h3",{children:"Add Widget"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title (Optional)"}),r.jsx("input",{type:"text",placeholder:"Leave blank for auto-title",value:_,onChange:W=>T(W.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type"}),r.jsxs("select",{value:j,onChange:W=>S(W.target.value),children:[r.jsx("option",{value:"stat",children:"Statistic (Count)"}),r.jsx("option",{value:"table",children:"Table (List)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Data Source"}),r.jsxs("select",{value:C,onChange:W=>z(W.target.value),children:[r.jsx("optgroup",{label:"Single Tables",children:p.filter(W=>!W.isCustom&&!W.isJoin).map(W=>r.jsx("option",{value:W.key,children:W.label},W.key))}),p.some(W=>W.isJoin)&&r.jsx("optgroup",{label:"Joined Tables (Multi-Table)",children:p.filter(W=>W.isJoin).map(W=>r.jsx("option",{value:W.key,children:W.label},W.key))}),p.some(W=>W.isCustom)&&r.jsx("optgroup",{label:"Custom Tables",children:p.filter(W=>W.isCustom).map(W=>r.jsx("option",{value:W.key,children:W.label},W.key))})]}),G&&r.jsx("small",{style:{color:"#666"},children:G.description})]}),j==="table"&&(G==null?void 0:G.columns)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Columns to Display (select multiple)"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:G.columns.map(W=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:k.includes(W),onChange:B=>{B.target.checked?E([...k,W]):E(k.filter(ce=>ce!==W))}}),W]},W))})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>b(!1),children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:X,children:"Add"})]})]})}),r.jsx(M4e,{isOpen:I,onClose:()=>L(!1),onConfirm:ie}),r.jsx(I4e,{isOpen:$,onClose:()=>q(!1),onCreated:()=>F()})]})},R4e=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState(null);if(v.useEffect(()=>{(async()=>{try{const o=await se(`/api/dashboards/${t}`);if(o.ok){const l=await o.json();a(l)}}catch(o){console.error("Error fetching dashboard:",o)}})()},[t]),!n)return r.jsx("div",{className:"temp-dash-empty",children:"Loading..."});const i=n.widgets||[];return r.jsxs("div",{className:"saved-dash-container",children:[r.jsxs("div",{className:"saved-dash-header",children:[r.jsxs("div",{className:"saved-dash-title-group",children:[r.jsx("button",{className:"saved-dash-back-btn",onClick:()=>e("/dashboards"),children:r.jsx(on,{size:16})}),r.jsx("div",{className:"saved-dash-icon",children:r.jsx(eg,{size:16})}),r.jsxs("div",{className:"saved-dash-title-text",children:[r.jsx("h2",{children:n.name}),n.description&&r.jsx("span",{className:"saved-dash-description",children:n.description})]})]}),r.jsx("div",{className:"saved-dash-actions",children:r.jsxs("button",{className:"saved-dash-edit-btn",onClick:()=>e(`/dashboards/${t}/edit`),children:[r.jsx($i,{size:12})," Edit"]})})]}),r.jsx("div",{className:"saved-dash-body",children:i.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets in this dashboard. Click Edit to add some!"}):r.jsx("div",{className:"temp-dash-grid",children:i.map((s,o)=>r.jsx(AM,{widget:s,autoHideEmptyColumns:!0},s.id||`view-widget-${o}`))})})]})},KA=["#8b5cf6","#3b82f6","#06b6d4","#10b981","#22c55e","#f59e0b","#f97316","#ef4444","#ec4899","#a855f7"],L4e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState({name:"",key:"",color:"#6b7280",description:""}),[g,x]=v.useState(!1),b=async()=>{a(!0),s(null);try{const $=await se("/api/clinic-roles");if($.ok){const q=await $.json();e(q)}else s("Failed to load roles")}catch{s("Failed to connect to server")}finally{a(!1)}};v.useEffect(()=>{b()},[]);const j=$=>$.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),S=$=>{p(q=>({...q,name:$,key:o?q.key:j($)}))},_=async()=>{if(f.name.trim()){x(!0);try{const $=await se("/api/clinic-roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),key:f.key||j(f.name),color:f.color,description:f.description.trim()||null})});if($.ok)await b(),d(!1),p({name:"",key:"",color:"#6b7280",description:""});else{const q=await $.json();s(q.message||"Failed to create role")}}catch{s("Failed to create role")}finally{x(!1)}}},T=async()=>{if(!(!o||!f.name.trim())){x(!0);try{const $=await se(`/api/clinic-roles/${o.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),color:f.color,description:f.description.trim()||null})});if($.ok)await b(),l(null),p({name:"",key:"",color:"#6b7280",description:""});else{const q=await $.json();s(q.message||"Failed to update role")}}catch{s("Failed to update role")}finally{x(!1)}}},C=async $=>{if(!$.isSystem&&window.confirm(`Delete role "${$.name}"? This cannot be undone.`))try{const q=await se(`/api/clinic-roles/${$.id}`,{method:"DELETE"});if(q.ok)await b();else{const F=await q.json();s(F.message||"Failed to delete role")}}catch{s("Failed to delete role")}},P=$=>{l($),p({name:$.name,key:$.key,color:$.color,description:$.description||""}),d(!1)},k=()=>{d(!0),l(null),p({name:"",key:"",color:KA[Math.floor(Math.random()*KA.length)],description:""})},E=()=>{d(!1),l(null),p({name:"",key:"",color:"#6b7280",description:""})},I=t.filter($=>$.isSystem),L=t.filter($=>!$.isSystem);return r.jsxs("div",{className:"role-management-page",children:[r.jsxs("div",{className:"role-management-header",children:[r.jsxs("div",{className:"header-title",children:[r.jsx(ng,{size:28}),r.jsxs("div",{children:[r.jsx("h1",{children:"Role Management"}),r.jsx("p",{children:"Manage custom roles for your clinic staff"})]})]}),r.jsxs("button",{className:"create-role-btn",onClick:k,disabled:c,children:[r.jsx(Hn,{size:18}),"Create Custom Role"]})]}),i&&r.jsxs("div",{className:"role-error-banner",children:[r.jsx(Wr,{size:18}),i,r.jsx("button",{onClick:()=>s(null),children:r.jsx(Ft,{size:16})})]}),(c||o)&&r.jsxs("div",{className:"role-form-card",children:[r.jsx("h3",{children:o?"Edit Role":"Create New Role"}),r.jsxs("div",{className:"role-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Name *"}),r.jsx("input",{type:"text",value:f.name,onChange:$=>S($.target.value),placeholder:"e.g., Senior Doctor, Ward Nurse"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Key"}),r.jsx("input",{type:"text",value:f.key,onChange:$=>p(q=>({...q,key:$.target.value})),placeholder:"auto-generated",disabled:!!o})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:f.description,onChange:$=>p(q=>({...q,description:$.target.value})),placeholder:"Brief description of role responsibilities"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx(lJ,{size:14}),"Color"]}),r.jsxs("div",{className:"color-picker",children:[KA.map($=>r.jsx("button",{className:`color-option ${f.color===$?"selected":""}`,style:{background:$},onClick:()=>p(q=>({...q,color:$}))},$)),r.jsx("input",{type:"color",value:f.color,onChange:$=>p(q=>({...q,color:$.target.value})),className:"custom-color-input"})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"cancel-btn",onClick:E,children:"Cancel"}),r.jsxs("button",{className:"save-btn",onClick:o?T:_,disabled:g||!f.name.trim(),children:[r.jsx(Fo,{size:16}),g?"Saving...":o?"Update Role":"Create Role"]})]})]})]}),r.jsxs("div",{className:"roles-container",children:[r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"System Roles"}),r.jsx("p",{className:"section-desc",children:"Default roles - can be customized but not deleted"}),n?r.jsx("div",{className:"roles-grid",children:[1,2,3].map($=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",style:{marginBottom:"10px"},children:[r.jsx(te,{variant:"circular",width:12,height:12,style:{marginRight:"8px"}}),r.jsx(te,{width:100,height:20})]}),r.jsx(te,{width:80,height:16,style:{marginBottom:"10px"}}),r.jsx(te,{width:"100%",height:20}),r.jsx("div",{className:"role-actions",style:{marginTop:"15px"},children:r.jsx(te,{width:60,height:24})})]},$))}):r.jsx("div",{className:"roles-grid",children:I.map($=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:$.color}}),r.jsx("span",{className:"role-name",children:$.name}),r.jsx("span",{className:"system-badge",children:"System"})]}),r.jsx("div",{className:"role-key",children:$.key}),$.description&&r.jsx("div",{className:"role-description",children:$.description}),r.jsx("div",{className:"role-actions",children:r.jsxs("button",{className:"edit-role-btn",onClick:()=>P($),children:[r.jsx(ro,{size:14}),"Edit"]})})]},$.id))})]}),r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"Custom Roles"}),r.jsx("p",{className:"section-desc",children:"Roles created for your clinic"}),L.length===0?r.jsxs("div",{className:"no-roles",children:[r.jsx(ng,{size:32}),r.jsx("p",{children:"No custom roles created yet"}),r.jsxs("button",{onClick:k,children:[r.jsx(Hn,{size:16}),"Create your first custom role"]})]}):r.jsx("div",{className:"roles-grid",children:L.map($=>r.jsxs("div",{className:"role-card custom",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:$.color}}),r.jsx("span",{className:"role-name",children:$.name})]}),r.jsx("div",{className:"role-key",children:$.key}),$.description&&r.jsx("div",{className:"role-description",children:$.description}),r.jsxs("div",{className:"role-actions",children:[r.jsxs("button",{className:"edit-role-btn",onClick:()=>P($),children:[r.jsx(ro,{size:14}),"Edit"]}),r.jsxs("button",{className:"delete-role-btn",onClick:()=>C($),children:[r.jsx(Vn,{size:14}),"Delete"]})]})]},$.id))})]})]})]})},F4e="_container_16815_47",$4e="_progressBar_16815_67",B4e="_sidebar_16815_97",z4e="_sidebarTitle_16815_161",q4e="_searchBox_16815_193",U4e="_searchInput_16815_203",V4e="_searchIcon_16815_237",H4e="_navSection_16815_255",G4e="_navSectionTitle_16815_263",W4e="_navLink_16815_287",K4e="_activeNavLink_16815_367",Y4e="_navLinkIcon_16815_387",Q4e="_content_16815_409",X4e="_header_16815_425",J4e="_headerContent_16815_493",Z4e="_title_16815_503",e3e="_subtitle_16815_563",t3e="_headerBadges_16815_575",n3e="_headerBadge_16815_575",r3e="_section_16815_625",a3e="_sectionTitle_16815_665",i3e="_sectionTitleIcon_16815_689",s3e="_sectionContent_16815_713",o3e="_featureList_16815_751",l3e="_featureItem_16815_767",c3e="_featureIcon_16815_799",u3e="_featureText_16815_813",d3e="_infoBox_16815_839",h3e="_infoBoxTitle_16815_881",f3e="_infoBoxContent_16815_903",p3e="_workflowList_16815_917",m3e="_kbd_16815_959",g3e="_moduleLinkBtn_16815_1179",y3e="_uiGrid_16815_1231",x3e="_uiCard_16815_1245",v3e="_uiLabel_16815_1277",b3e="_demoBtn_16815_1301",j3e="_demoBtnPrimary_16815_1323",w3e="_demoBtnSecondary_16815_1335",N3e="_demoBtnDanger_16815_1347",S3e="_demoBadge_16815_1361",_3e="_demoBadgeSuccess_16815_1385",C3e="_demoBadgeWarning_16815_1397",T3e="_demoBadgeError_16815_1409",k3e="_iconRow_16815_1421",A3e="_faqList_16815_1455",E3e="_faqItem_16815_1469",P3e="_faqQuestion_16815_1493",D3e="_faqIcon_16815_1523",O3e="_faqIconOpen_16815_1533",M3e="_faqAnswer_16815_1541",I3e="_footer_16815_1587",R3e="_footerText_16815_1605",L3e="_footerBrand_16815_1617",F3e="_floatingParticles_16815_1641",$3e="_particle_16815_1663",B3e="_headerLabel_16815_1817",z3e="_waveEmoji_16815_1845",q3e="_headerActions_16815_1857",U3e="_headerBtn_16815_1871",V3e="_headerBtnSecondary_16815_1913",H3e="_statsSection_16815_1963",G3e="_statCard_16815_1977",W3e="_statIcon_16815_2009",K3e="_statValue_16815_2039",Y3e="_statLabel_16815_2053",Q3e="_quickTipsSection_16815_2073",X3e="_quickTipsHeader_16815_2089",J3e="_tipNav_16815_2123",Z3e="_tipCard_16815_2185",e5e="_tipIcon_16815_2231",t5e="_tipContent_16815_2251",n5e="_tipIndicators_16815_2279",r5e="_tipIndicator_16815_2279",a5e="_tipIndicatorActive_16815_2323",i5e="_shortcutsGrid_16815_2343",s5e="_shortcutCard_16815_2357",o5e="_shortcutCardActive_16815_2383",l5e="_shortcutKeys_16815_2397",c5e="_kbdPlus_16815_2411",u5e="_kbdActive_16815_2423",d5e="_shortcutInfo_16815_2437",h5e="_shortcutAction_16815_2445",f5e="_shortcutDesc_16815_2459",p5e="_fabContainer_16815_3077",m5e="_fabButton_16815_3099",g5e="_fabContent_16815_3141",y5e="_contactRow_16815_3195",x5e="_contactIcon_16815_3213",v5e="_copyBtn_16815_3223",Me={container:F4e,progressBar:$4e,sidebar:B4e,sidebarTitle:z4e,searchBox:q4e,searchInput:U4e,searchIcon:V4e,navSection:H4e,navSectionTitle:G4e,navLink:W4e,activeNavLink:K4e,navLinkIcon:Y4e,content:Q4e,header:X4e,headerContent:J4e,title:Z4e,subtitle:e3e,headerBadges:t3e,headerBadge:n3e,section:r3e,sectionTitle:a3e,sectionTitleIcon:i3e,sectionContent:s3e,featureList:o3e,featureItem:l3e,featureIcon:c3e,featureText:u3e,infoBox:d3e,infoBoxTitle:h3e,infoBoxContent:f3e,workflowList:p3e,kbd:m3e,moduleLinkBtn:g3e,uiGrid:y3e,uiCard:x3e,uiLabel:v3e,demoBtn:b3e,demoBtnPrimary:j3e,demoBtnSecondary:w3e,demoBtnDanger:N3e,demoBadge:S3e,demoBadgeSuccess:_3e,demoBadgeWarning:C3e,demoBadgeError:T3e,iconRow:k3e,faqList:A3e,faqItem:E3e,faqQuestion:P3e,faqIcon:D3e,faqIconOpen:O3e,faqAnswer:M3e,footer:I3e,footerText:R3e,footerBrand:L3e,floatingParticles:F3e,particle:$3e,headerLabel:B3e,waveEmoji:z3e,headerActions:q3e,headerBtn:U3e,headerBtnSecondary:V3e,statsSection:H3e,statCard:G3e,statIcon:W3e,statValue:K3e,statLabel:Y3e,quickTipsSection:Q3e,quickTipsHeader:X3e,tipNav:J3e,tipCard:Z3e,tipIcon:e5e,tipContent:t5e,tipIndicators:n5e,tipIndicator:r5e,tipIndicatorActive:a5e,shortcutsGrid:i5e,shortcutCard:s5e,shortcutCardActive:o5e,shortcutKeys:l5e,kbdPlus:c5e,kbdActive:u5e,shortcutInfo:d5e,shortcutAction:h5e,shortcutDesc:f5e,fabContainer:p5e,fabButton:m5e,fabContent:g5e,contactRow:y5e,contactIcon:x5e,copyBtn:v5e},b5e=(t,e=2e3)=>{const[n,a]=v.useState(0),[i,s]=v.useState(!1),o=v.useRef(null);return v.useEffect(()=>{const l=new IntersectionObserver(([c])=>{c.isIntersecting&&s(!0)},{threshold:.3});return o.current&&l.observe(o.current),()=>l.disconnect()},[]),v.useEffect(()=>{if(!i)return;let l=null;const c=d=>{l||(l=d);const f=Math.min((d-l)/e,1);a(Math.floor(f*t)),f<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[i,t,e]),{count:n,ref:o}},j5e=()=>{const[t,e]=v.useState("getting-started"),[n,a]=v.useState(""),[i,s]=v.useState(0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(0),[g,x]=v.useState(null),b=v.useRef(null),j=v.useCallback(()=>{const L=document.documentElement.scrollHeight-window.innerHeight,$=window.scrollY/L*100;s(Math.min($,100))},[]);v.useEffect(()=>{const L=()=>{const $=document.querySelectorAll("section[id]");let q="";$.forEach(F=>{const H=F.offsetTop;window.scrollY>=H-120&&(q=F.getAttribute("id")||"")}),q&&e(q),j()};return window.addEventListener("scroll",L),()=>window.removeEventListener("scroll",L)},[j]);const S=L=>{const $=document.getElementById(L);$&&window.scrollTo({top:$.offsetTop-80,behavior:"smooth"})},_={navigation:[{id:"getting-started",label:"Getting Started",icon:EI},{id:"clinical-workflow",label:"Doctor Workflow",icon:Zm},{id:"financial-mgmt",label:"Financial Control",icon:cd},{id:"analytics",label:"Analytics & Insights",icon:vE},{id:"pharmacy-inventory",label:"Pharmacy & Stock",icon:ud},{id:"advanced-lab",label:"Advanced Lab Mgmt",icon:ls},{id:"ipd-admission",label:"IPD & Admission",icon:bf},{id:"custom-data",label:"System Customization",icon:xf},{id:"admin",label:"Administration",icon:dd}],reference:[{id:"ui-reference",label:"Interface & UI",icon:Im},{id:"troubleshooting",label:"Troubleshooting",icon:pj}]},T=L=>n?L.filter($=>$.label.toLowerCase().includes(n.toLowerCase())):L,C=({id:L,label:$,Icon:q})=>r.jsxs("a",{className:`${Me.navLink} ${t===L?Me.activeNavLink:""}`,onClick:()=>S(L),children:[r.jsx(q,{className:Me.navLinkIcon,size:18}),$]}),P=[{question:"Bill not printing correctly?",answer:"Ensure pop-ups are not blocked in your browser. Also, check if your printer is properly configured in system settings. For thermal printers, verify the paper size matches the bill format."},{question:"Sync issues with data?",answer:"Make sure your internet connection is stable. The system auto-syncs when online. You can also manually trigger sync from the settings menu. If issues persist, try clearing browser cache."},{question:"How to reset my password?",answer:"Contact your clinic administrator who can reset your password from the Staff Management section. For security reasons, passwords cannot be self-reset without admin approval."},{question:"AI suggestions not appearing?",answer:'AI features require an active internet connection. Also ensure AI features are enabled in Clinic Settings under the "AI & Automation" tab.'},{question:"How do I record a partial payment for patient debt?",answer:"Navigate to Financial Control -> Patient Debts. Click on a patient's name to view their full transaction history. Use the payment recording form at the bottom to enter the amount paid and save."},{question:"How can I set up normal ranges for Lab tests?",answer:"Go to Advanced Lab Management -> Test Master. Click 'Edit' on a test, then go to the 'Parameters' tab. Here you can define min/max values, units, and default results."}],k=[{icon:CI,title:"Pro Tip: Voice Commands",description:'Use the AI Command Bar to speak naturally. Say "Create prescription for John" to get started instantly!',color:"#f59e0b"},{icon:OI,title:"Speed Boost",description:"Double-click any patient name in the queue to instantly open their full history.",color:"#8b5cf6"},{icon:XJ,title:"Smart Billing",description:"The system auto-suggests medicine quantities based on prescription duration!",color:"#10b981"},{icon:DI,title:"Favorites",description:"Star frequently prescribed medicines to access them from your quick-add panel.",color:"#ef4444"}];v.useEffect(()=>{const L=setInterval(()=>{p($=>($+1)%k.length)},5e3);return()=>clearInterval(L)},[k.length]);const E=[{icon:Ds,value:1e4,suffix:"+",label:"Patients Managed",color:"#6366f1"},{icon:kb,value:75,suffix:"%",label:"Time Saved",color:"#10b981"},{icon:eZ,value:99,suffix:".9%",label:"Uptime",color:"#f59e0b"},{icon:AX,value:50,suffix:"+",label:"Happy Clinics",color:"#ef4444"}],I=[{keys:["Ctrl","K"],action:"Open Command Bar",description:"Quick access to AI assistant and navigation"},{keys:["Ctrl","P"],action:"Quick Print",description:"Print current document or bill"},{keys:["Ctrl","S"],action:"Save Record",description:"Save current form or entry"},{keys:["Esc"],action:"Close Modal",description:"Close any open dialog or panel"}];return r.jsxs("div",{className:Me.container,children:[r.jsx("div",{className:Me.progressBar,style:{width:`${i}%`}}),r.jsxs("aside",{className:Me.sidebar,children:[r.jsxs("h2",{className:Me.sidebarTitle,children:[r.jsx(jI,{size:22}),"User Guide"]}),r.jsxs("div",{className:Me.searchBox,children:[r.jsx(In,{className:Me.searchIcon,size:16}),r.jsx("input",{type:"text",className:Me.searchInput,placeholder:"Search topics...",value:n,onChange:L=>a(L.target.value)})]}),r.jsxs("div",{className:Me.navSection,children:[r.jsxs("span",{className:Me.navSectionTitle,children:[r.jsx(Ta,{size:12}),"Navigation"]}),T(_.navigation).map(L=>r.jsx(C,{id:L.id,label:L.label,Icon:L.icon},L.id))]}),r.jsxs("div",{className:Me.navSection,children:[r.jsxs("span",{className:Me.navSectionTitle,children:[r.jsx(DI,{size:12}),"Reference"]}),T(_.reference).map(L=>r.jsx(C,{id:L.id,label:L.label,Icon:L.icon},L.id))]})]}),r.jsxs("main",{className:Me.content,ref:b,children:[r.jsxs("header",{className:Me.header,children:[r.jsxs("div",{className:Me.floatingParticles,children:[r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle})]}),r.jsxs("div",{className:Me.headerContent,children:[r.jsxs("div",{className:Me.headerLabel,children:[r.jsx(jI,{size:16}),"Complete Documentation"]}),r.jsxs("h1",{className:Me.title,children:["Master Newtons Ai HMS ",r.jsx("span",{className:Me.waveEmoji,children:""})]}),r.jsx("p",{className:Me.subtitle,children:"Your comprehensive guide to maximizing efficiency with the AI-Powered Health Management System. Master every feature and transform your clinical workflow."}),r.jsxs("div",{className:Me.headerBadges,children:[r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(ng,{size:14}),"HIPAA Compliant"]}),r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(fw,{size:14}),"AI Powered"]}),r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(bE,{size:14}),"Multi-Language"]})]}),r.jsxs("div",{className:Me.headerActions,children:[r.jsxs("button",{className:Me.headerBtn,onClick:()=>S("getting-started"),children:[r.jsx(Wz,{size:16}),"Get Started"]}),r.jsxs("button",{className:Me.headerBtnSecondary,onClick:()=>S("troubleshooting"),children:[r.jsx(pj,{size:16}),"Need Help?"]})]})]})]}),r.jsx("section",{className:Me.statsSection,children:E.map((L,$)=>{const{count:q,ref:F}=b5e(L.value);return r.jsxs("div",{className:Me.statCard,ref:F,children:[r.jsx("div",{className:Me.statIcon,style:{backgroundColor:`${L.color}15`,color:L.color},children:r.jsx(L.icon,{size:24})}),r.jsxs("div",{className:Me.statValue,style:{color:L.color},children:[q,L.suffix]}),r.jsx("div",{className:Me.statLabel,children:L.label})]},$)})}),r.jsxs("section",{className:Me.quickTipsSection,children:[r.jsxs("div",{className:Me.quickTipsHeader,children:[r.jsxs("h3",{children:[r.jsx(CI,{size:20})," Quick Tips"]}),r.jsxs("div",{className:Me.tipNav,children:[r.jsx("button",{onClick:()=>p(L=>(L-1+k.length)%k.length),children:r.jsx(Tb,{size:18})}),r.jsxs("span",{children:[f+1," / ",k.length]}),r.jsx("button",{onClick:()=>p(L=>(L+1)%k.length),children:r.jsx(pd,{size:18})})]})]}),r.jsxs("div",{className:Me.tipCard,children:[r.jsx("div",{className:Me.tipIcon,style:{backgroundColor:`${k[f].color}15`,color:k[f].color},children:Se.createElement(k[f].icon,{size:28})}),r.jsxs("div",{className:Me.tipContent,children:[r.jsx("h4",{children:k[f].title}),r.jsx("p",{children:k[f].description})]})]},f),r.jsx("div",{className:Me.tipIndicators,children:k.map((L,$)=>r.jsx("button",{className:`${Me.tipIndicator} ${f===$?Me.tipIndicatorActive:""}`,onClick:()=>p($)},$))})]}),r.jsxs("section",{id:"getting-started",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(EI,{size:18})}),"Getting Started"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Welcome to the Newtons Ai HMS. This guide will help you navigate and master the system's features, from clinical workflows to advanced financial analytics."}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(fw,{size:18}),"Multi-Platform Accessibility"]}),r.jsx("div",{className:Me.infoBoxContent,children:"Newtons Ai is a PWA (Progressive Web App). You can install it on your Desktop, Android, or iOS device for a native-like experience with faster performance and offline support."})]}),r.jsx("div",{className:Me.shortcutsGrid,children:I.map((L,$)=>r.jsxs("div",{className:`${Me.shortcutCard} ${g===L.action?Me.shortcutCardActive:""}`,onMouseEnter:()=>x(L.action),onMouseLeave:()=>x(null),children:[r.jsx("div",{className:Me.shortcutKeys,children:L.keys.map((q,F)=>r.jsxs(Se.Fragment,{children:[r.jsx("kbd",{className:`${Me.kbd} ${g===L.action?Me.kbdActive:""}`,children:q}),F<L.keys.length-1&&r.jsx("span",{className:Me.kbdPlus,children:"+"})]},F))}),r.jsxs("div",{className:Me.shortcutInfo,children:[r.jsx("div",{className:Me.shortcutAction,children:L.action}),r.jsx("div",{className:Me.shortcutDesc,children:L.description})]})]},$))}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(lX,{size:14})," Smart Navigation"]}),r.jsxs("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:["Press ",r.jsx("kbd",{className:Me.kbd,children:"Ctrl"})," + ",r.jsx("kbd",{className:Me.kbd,children:"K"})," anywhere to open the Command Bar. Instantly jump to patients, bills, or settings."]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Ds,{size:14})," Multi-Role Access"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"The system adapts to your role: Doctor, Receptionist, Pharmacist, or Lab Technician."})]})]})]})]}),r.jsxs("section",{id:"clinical-workflow",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(Zm,{size:18})}),"Doctor Workflow & Live Queue"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"The Doctor Consultation Panel is optimized for speed and clarity, providing all necessary patient context at a single glance."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Nc,{size:14})," Live Queue Control"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:'Use the "Call Next" buttons to manage the patient flow. The system automatically marks seen patients and updates the waiting list.'}),r.jsx(_r,{to:"/dashboard/doctor",className:Me.moduleLinkBtn,children:"Consultation Panel"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Ev,{size:14})," AI Patient Briefs"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:`" AI Brief" provides a summarized snapshot of the patient's current complaint and relevant history saving valuable consultation time.`})]})]}),r.jsx("h3",{children:"Comprehensive History"}),r.jsxs("ul",{className:Me.featureList,children:[r.jsxs("li",{className:Me.featureItem,children:[r.jsx(dv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Unified Timeline:"})," View past complaints, lab reports, and medications in a single, chronologically grouped view."]})]}),r.jsxs("li",{className:Me.featureItem,children:[r.jsx(mX,{size:16,className:Me.featureIcon,style:{color:"var(--guide-primary)"}}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"One-Click Action:"})," From the history view, copy past medications to new prescriptions or quickly re-order tests."]})]})]})]})]}),r.jsxs("section",{id:"financial-mgmt",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(cd,{size:18})}),"Financial Control & Debt Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Keep your clinic's finances healthy with precise billing and proactive debt management."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(pw,{size:14})," Debt Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Monitor all outstanding balances in the Patent Debt module. View individual transaction histories and record settlements."}),r.jsx(_r,{to:"/dashboard/admin/patient-debts",className:Me.moduleLinkBtn,children:"Manage Debt"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Ta,{size:14})," Custom Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Need to bill for something non-standard? Use the Custom Bill tool to create items on-the-fly."}),r.jsx(_r,{to:"/create-custom-bill",className:Me.moduleLinkBtn,children:"Custom Bill"})]})]}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(ng,{size:18}),"Payment Verification"]}),r.jsx("div",{className:Me.infoBoxContent,children:'The system tracks payment modes (Cash, UPI, Card, Credit). "Credit" sales are automatically added to the Patient Debt list for later follow-up.'})]})]})]}),r.jsxs("section",{id:"analytics",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(vE,{size:18})}),"Analytics & Insights"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Transition from simply managing data to understanding it. The Analysis Dashboard provides deep insights into your operations."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Nc,{size:14})," Revenue vs Cash Flow"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Compare Sales (Accrual) against actual Cash Collected (Cash Basis) to understand your true liquidity."}),r.jsx(_r,{to:"/dashboard/analysis",className:Me.moduleLinkBtn,children:"Open Analysis"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(AI,{size:14})," Dept. Analysis"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"See exactly which departments (Pharmacy, Lab, OPD) are driving your clinic's growth."})]})]}),r.jsx("h3",{children:"Advanced Metrics"}),r.jsxs("ul",{className:Me.featureList,children:[r.jsxs("li",{className:Me.featureItem,children:[r.jsx(dv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Inventory Movement:"})," Analyze stock inflow vs outflow to predict future procurement needs."]})]}),r.jsxs("li",{className:Me.featureItem,children:[r.jsx(dv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Profit Estimation:"})," View estimated profits based on cost of goods sold (COGS) vs revenue generated."]})]})]})]})]}),r.jsxs("section",{id:"pharmacy-inventory",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(ud,{size:18})}),"Pharmacy & Inventory Tracking"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Maintain optimal stock levels and manage supplier relationships effortlessly."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(GD,{size:14})," Distributor Mgmt"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep a directory of suppliers, track payments made to them, and manage purchase entries."}),r.jsx(_r,{to:"/dashboard/distributors",className:Me.moduleLinkBtn,children:"Distributors"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(AQ,{size:14})," Refill Reminders"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automatically notify patients when their chronic medication stock is about to run out."}),r.jsx(_r,{to:"/refill-reminders",className:Me.moduleLinkBtn,children:"Refill Alerts"})]})]}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(Nc,{size:18}),"Stock-Out Alerts"]}),r.jsx("div",{className:Me.infoBoxContent,children:"High-demand items are highlighted when stock falls below your defined threshold, ensuring you never run out of critical medicines."})]})]})]}),r.jsxs("section",{id:"advanced-lab",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(ls,{size:18})}),"Advanced Lab Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Go beyond simple test lists. Configure complex diagnostic parameters with automated clinical validation."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(In,{size:14})," Multi-Parameter Search"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Find reports by Patient Name, ID, Token, or even specific Test Name. The intelligent search uses fuzzy matching."}),r.jsx(_r,{to:"/lab/search-report",className:Me.moduleLinkBtn,children:"Find Reports"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(ls,{size:14})," Test Master"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define parametric data, normal ranges, and automated formatting for your reports."}),r.jsx(_r,{to:"/lab-inventory",className:Me.moduleLinkBtn,children:"Configure Tests"})]})]})]})]}),r.jsxs("section",{id:"ipd-admission",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(bf,{size:18})}),"IPD & Admission Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Manage the full lifecycle of in-patient care, from the moment of admission to final discharge and billing."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Jn,{size:14})," In-Patient Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep track of all currently admitted patients, their ward assignments, and duration of stay."}),r.jsx(_r,{to:"/manage-admission",className:Me.moduleLinkBtn,children:"Admission Mgmt"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(pw,{size:14})," Cumulative Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automated daily room charges combined with services and medications consumed during the stay."})]})]}),r.jsx("h3",{children:"Workflow Steps"}),r.jsxs("ol",{className:Me.workflowList,children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Admit:"})," Register the patient and set the admission date and bed details."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Manage:"})," Record observations and clinical notes throughout the stay."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Discharge:"})," Finalize all pending charges and generate the discharge summary."]})]})]})]}),r.jsxs("section",{id:"custom-data",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(xf,{size:18})}),"System Customization"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Newtons Ai HMS is designed to be extensible. Create your own data structures and visualization tools."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Eb,{size:14})," Custom Tables"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define new data types (e.g., Equipment Logs, Consent Forms). Support for text, number, date, and boolean."}),r.jsx(_r,{to:"/custom-tables",className:Me.moduleLinkBtn,children:"Data Tables"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(AI,{size:14})," Custom Dashboards"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Build your own reporting views. Drag and drop widgets to visualize your performance."}),r.jsx(_r,{to:"/dashboards",className:Me.moduleLinkBtn,children:"Manage Dashboards"})]})]})]})]}),r.jsxs("section",{id:"admin",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(dd,{size:18})}),"Administration"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Central command for clinic owners. Access critical functions and manage staff permissions."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Ds,{size:14})," Staff & Permissions"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Add/edit staff and define exactly what each role can see and do in the system."}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[r.jsx(_r,{to:"/dashboard/staff",className:Me.moduleLinkBtn,children:"Staff"}),r.jsx(_r,{to:"/dashboard/roles",className:Me.moduleLinkBtn,children:"Roles"})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(ua,{size:14})," Subscription Plans"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Manage your patients' subscription plans, billing cycles, and membership statuses."}),r.jsx(_r,{to:"/dashboard/subscriptions",className:Me.moduleLinkBtn,children:"Subscriptions"})]})]})]})]}),r.jsxs("section",{id:"ui-reference",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(Im,{size:18})}),"Interface & UI Reference"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Familiarize yourself with the common UI elements used throughout the application."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Action Buttons"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnPrimary}`,children:"Primary / Save"}),r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnSecondary}`,children:"Secondary"}),r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnDanger}`,children:"Danger / Delete"})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Status Indicators"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeSuccess}`,children:[r.jsx(dv,{size:12}),"Paid / Completed"]}),r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeWarning}`,children:[r.jsx(OI,{size:12}),"Pending / Due"]}),r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeError}`,children:[r.jsx(pj,{size:12}),"Overdue / Failed"]})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Common Icons"}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx($i,{size:16})," ",r.jsx("span",{children:"Edit Record"})]}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Vn,{size:16})," ",r.jsx("span",{children:"Delete Item"})]}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Im,{size:16})," ",r.jsx("span",{children:"View Details"})]})]})]})]})]}),r.jsxs("section",{id:"troubleshooting",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(pj,{size:18})}),"Troubleshooting & Support"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(bE,{size:18}),"Offline Support (PWA)"]}),r.jsxs("div",{className:Me.infoBoxContent,children:["Newtons Ai HMS is a ",r.jsx("strong",{children:"Progressive Web App (PWA)"}),'. Install it on your desktop or mobile home screen using the "Install" button in the header for faster loading and offline syncing of critical data.']})]}),r.jsxs("div",{className:Me.infoBox,style:{borderLeftColor:"var(--guide-accent)"},children:[r.jsxs("span",{className:Me.infoBoxTitle,style:{color:"var(--guide-accent)"},children:[r.jsx(rC,{size:18}),"Need Direct Support?"]}),r.jsx("div",{className:Me.infoBoxContent,children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(tg,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"+91 63631 11328"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(TI,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"shiva@newtons.in"})]})]})})]}),r.jsx("h3",{children:"Frequently Asked Questions"}),r.jsx("div",{className:Me.faqList,children:P.map((L,$)=>r.jsxs("div",{className:Me.faqItem,children:[r.jsxs("div",{className:Me.faqQuestion,onClick:()=>l(o===$?null:$),children:[r.jsx("span",{children:L.question}),r.jsx(Bz,{size:18,className:`${Me.faqIcon} ${o===$?Me.faqIconOpen:""}`})]}),o===$&&r.jsx("div",{className:Me.faqAnswer,children:L.answer})]},$))})]})]}),r.jsx("footer",{className:Me.footer,children:r.jsxs("p",{className:Me.footerText,children:[" ",new Date().getFullYear()," ",r.jsx("span",{className:Me.footerBrand,children:"Newtons Ai"}),". Empowering Healthcare through Intelligence."]})})]}),r.jsxs("div",{className:Me.fabContainer,children:[c&&r.jsxs("div",{className:Me.fabContent,children:[r.jsxs("h4",{children:[r.jsx(rC,{size:18}),"Customer Care"]}),r.jsxs("div",{className:Me.contactRow,children:[r.jsx(tg,{size:16,className:Me.contactIcon}),r.jsx("span",{children:"+91 63631 11328"}),r.jsx("button",{className:Me.copyBtn,onClick:()=>navigator.clipboard.writeText("+916363111328"),title:"Copy Phone",children:r.jsx(SI,{size:14})})]}),r.jsxs("div",{className:Me.contactRow,children:[r.jsx(TI,{size:16,className:Me.contactIcon}),r.jsx("span",{children:"shiva@newtons.in"}),r.jsx("button",{className:Me.copyBtn,onClick:()=>navigator.clipboard.writeText("shiva@newtons.in"),title:"Copy Email",children:r.jsx(SI,{size:14})})]})]}),r.jsx("button",{className:Me.fabButton,onClick:()=>d(!c),title:"Customer Support",children:c?r.jsx(Ft,{size:24}):r.jsx(rC,{size:24})})]})]})},w5e=t=>[1,2,3,14,15,16,17,18,19,30,31,32].includes(t)?{type:"molar",roots:2}:[4,5,12,13,20,21,28,29].includes(t)?{type:"premolar",roots:1}:[6,11,22,27].includes(t)?{type:"canine",roots:1}:t>=1&&t<=32?{type:"incisor",roots:1}:[41,42,49,50,51,52,59,60].includes(t)?{type:"molar",roots:2}:[43,48,53,58].includes(t)?{type:"canine",roots:1}:[44,45,46,47,54,55,56,57].includes(t)?{type:"incisor",roots:1}:{type:"incisor",roots:1},gc=({toothNumber:t,conditions:e=[],className:n,style:a,isSelected:i,bridgeConnectPrevious:s})=>{const{type:o}=w5e(t),l=t<=16||t>=41&&t<=50,c="M5,20 Q5,5 18,5 Q31,5 31,20 L29,25 Q18,28 7,25 Z",d="M7,25 Q5,40 10,44 Q14,40 14,26",f="M29,25 Q31,40 26,44 Q22,40 22,26",p="M8,20 Q8,8 18,8 Q28,8 28,20 L26,24 Q18,27 10,24 Z",g="M10,24 Q16,44 18,45 Q20,44 26,24",x="M8,22 Q18,2 28,22 L26,25 Q18,28 10,25 Z",b="M10,25 Q18,48 26,25",j="M10,22 L10,12 Q18,12 26,12 L26,22 L24,25 Q18,27 12,25 Z",S="M12,25 Q18,46 24,25";let _=c,T=[d,f];o==="incisor"?(_=j,T=[S]):o==="canine"?(_=x,T=[b]):o==="premolar"&&(_=p,T=[g]);const C=e.includes("condition-rct"),P=e.includes("condition-filling"),k=e.includes("condition-crown"),E=e.includes("condition-bridge"),I=e.includes("condition-extraction"),L=e.includes("condition-implant"),$=e.includes("condition-others"),q=C?"#e9d5ff":"#f3f4f6",F=I?"#fee2e2":"#ffffff",H=I?"#ef4444":E?"#0891b2":L?"#475569":$?"#f97316":k?"#b45309":i?"#3b82f6":"#6b7280",V=i||E||k||L||$?2:1.5,X=l?"M20,15 L56,15 L56,22 L20,22 Z":"M16,15 L-20,15 L-20,22 L16,22 Z";return r.jsxs("svg",{viewBox:"0 0 36 50",className:n,style:{width:"100%",height:"100%",overflow:"visible",...a},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"goldGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),r.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),r.jsxs("linearGradient",{id:"bridgeGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),r.jsx("stop",{offset:"100%",stopColor:"#0891b2"})]}),r.jsxs("linearGradient",{id:"titaniumGradient",x1:"0",x2:"1",y1:"0",y2:"0",children:[r.jsx("stop",{offset:"0%",stopColor:"#475569"}),r.jsx("stop",{offset:"30%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"50%",stopColor:"#f8fafc"}),r.jsx("stop",{offset:"70%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"100%",stopColor:"#475569"})]})]}),s&&r.jsx("path",{d:X,fill:"url(#bridgeGradient)",stroke:"#0891b2",strokeWidth:"1.5"}),L?r.jsxs("g",{children:[r.jsx("path",{d:"M13,25 L23,25 L22,28 L23,29 L22,30 L22,33 L23,34 L22,35 L22,38 L23,39 L22,40 L19,46 Q18,48 17,46 L14,40 L13,39 L14,38 L14,35 L13,34 L14,33 L14,30 L13,29 L14,28 Z",fill:"url(#titaniumGradient)",stroke:H,strokeWidth:"1"}),r.jsxs("g",{stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",children:[r.jsx("line",{x1:"14",y1:"29",x2:"22",y2:"29"}),r.jsx("line",{x1:"14",y1:"34",x2:"22",y2:"34"}),r.jsx("line",{x1:"14",y1:"39",x2:"22",y2:"39"})]}),r.jsx("rect",{x:"15",y:"22",width:"6",height:"4",fill:"#64748b",stroke:H,strokeWidth:"1",rx:"1"})]}):r.jsx("g",{fill:q,stroke:H,strokeWidth:V,strokeLinejoin:"round",children:T.map((Y,z)=>r.jsx("path",{d:Y},z))}),C&&!L&&r.jsx("g",{fill:"none",stroke:"#9333ea",strokeWidth:"2.5",strokeLinecap:"round",children:o==="molar"?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M12,28 L11,42"}),r.jsx("path",{d:"M24,28 L25,42"})]}):r.jsx("path",{d:"M18,25 L18,44"})}),r.jsx("path",{d:_,fill:E?"url(#bridgeGradient)":k?"url(#goldGradient)":F,stroke:H,strokeWidth:V,strokeLinejoin:"round"}),P&&!k&&!E&&!L&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"1"}),$&&!k&&!E&&!L&&!P&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#f97316",stroke:"#ea580c",strokeWidth:"1"}),I&&r.jsxs("g",{stroke:"#ef4444",strokeWidth:"3",strokeLinecap:"round",children:[r.jsx("line",{x1:"8",y1:"8",x2:"28",y2:"42"}),r.jsx("line",{x1:"28",y1:"8",x2:"8",y2:"42"})]})]})},vb=(t,e="fdi")=>e==="universal"?t<=32?t.toString():t>=41&&t<=50?String.fromCharCode(65+(t-41)):t>=51&&t<=60?String.fromCharCode(75+(t-51)):t.toString():e==="fdi"?t>=1&&t<=8?(18-(t-1)).toString():t>=9&&t<=16?(21+(t-9)).toString():t>=17&&t<=24?(38-(t-17)).toString():t>=25&&t<=32?(41+(t-25)).toString():t>=41&&t<=45?(55-(t-41)).toString():t>=46&&t<=50?(61+(t-46)).toString():t>=51&&t<=55?(75-(t-51)).toString():t>=56&&t<=60?(81+(t-56)).toString():t.toString():t.toString(),_G=({selectedTeeth:t,toothConditions:e={},toothDetails:n={},onToothClick:a,onEditPastRecord:i,onPrint:s,numberingSystem:o="fdi"})=>{const[l,c]=Se.useState("permanent"),d=Array.from({length:16},(_,T)=>T+1),f=Array.from({length:16},(_,T)=>32-T),p=Array.from({length:10},(_,T)=>41+T),g=Array.from({length:10},(_,T)=>60-T),[x,b]=Se.useState(null),j=_=>{const T=e[_]||[],C=t.includes(_);let P=[],k="#9ca3af",E;const I=T.includes("condition-extraction");return C&&(k="#3b82f6"),T.includes("condition-filling")&&P.push("#60a5fa"),T.includes("condition-rct")&&P.push("#c084fc"),T.includes("condition-crown")&&(P.push("#fcd34d"),k="#d97706"),T.includes("condition-bridge")&&(P.push("#22d3ee"),k="#0891b2"),T.includes("condition-implant")&&(P.push("#94a3b8"),k="#475569"),T.includes("condition-extraction")&&(P.push("#fee2e2"),k="#ef4444"),T.includes("condition-others")&&(P.push("#ffedd5"),k="#f97316"),P.length===0&&C&&P.push("#eff6ff"),P.length===0&&P.push("#ffffff"),{fillColors:P,borderColor:k,overlayColor:E,isSelected:C,hasExtraction:I}},S=_=>{const{isSelected:T}=j(_),C=e[_]||[],P=n[_],k=_<=16||_>=41&&_<=50,E=C.includes("condition-bridge");let I=!1;if(E){let $=null;k?(_>1&&_<=16&&($=_-1),_>41&&_<=50&&($=_-1)):(_<32&&_>=17&&($=_+1),_<60&&_>=51&&($=_+1)),$!==null&&(e[$]||[]).includes("condition-bridge")&&(I=!0)}const L=vb(_,o);return r.jsxs("div",{onClick:()=>a(_),onMouseEnter:()=>b(_),onMouseLeave:()=>b(null),className:`tooth-item-container ${T?"selected":""}`,title:"",children:[r.jsx("div",{className:"tooth-number-label",children:L}),r.jsx("div",{className:"tooth-svg-wrapper",style:{transform:k?"rotate(180deg)":"none"},children:r.jsx(gc,{toothNumber:_,conditions:C,isSelected:T,bridgeConnectPrevious:I})}),x===_&&P&&P.length>0&&r.jsxs("div",{className:"tooth-tooltip-window",children:[r.jsxs("div",{className:"tooltip-header",children:["Tooth ",L]}),r.jsx("ul",{className:"tooltip-list",children:P.map(($,q)=>r.jsxs("li",{className:"tooltip-detail-item",children:[r.jsxs("span",{className:"detail-text",children:[$.name," ",r.jsxs("small",{children:["(",$.date,")"]})]}),$.isPast&&i&&r.jsx("button",{className:"tooltip-edit-btn",onClick:F=>{F.stopPropagation(),i($.recordId)},title:"Edit this record",children:r.jsx(ro,{size:12})})]},q))})]})]},_)};return r.jsxs("div",{className:"chart-container-inner",style:{position:"relative"},children:[r.jsxs("div",{className:"chart-header-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[r.jsxs("div",{className:"view-toggle-container",style:{display:"flex",gap:4,background:"#f3f4f6",padding:4,borderRadius:8},children:[r.jsx("button",{className:`view-toggle-btn ${l==="permanent"?"active":""}`,onClick:()=>c("permanent"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="permanent"?"#fff":"transparent",boxShadow:l==="permanent"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="permanent"?"#111827":"#6b7280"},children:"Permanent"}),r.jsx("button",{className:`view-toggle-btn ${l==="primary"?"active":""}`,onClick:()=>c("primary"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="primary"?"#fff":"transparent",boxShadow:l==="primary"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="primary"?"#111827":"#6b7280"},children:"Primary"})]}),s&&r.jsxs("button",{onClick:_=>{_.stopPropagation(),s()},className:"chart-print-btn no-print",title:"Print Report",children:[r.jsx(vf,{size:16}),r.jsx("span",{children:"Print Report"})]})]}),r.jsx("div",{className:"arch-label",children:"Maxillary (Upper)"}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?d.slice(0,8).map(_=>S(_)):p.slice(0,5).map(_=>S(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?d.slice(8).map(_=>S(_)):p.slice(5).map(_=>S(_))})]}),r.jsxs("div",{className:"midline-divider",children:[r.jsx("div",{className:"divider-line"}),r.jsx("span",{className:"chart-label",children:"Midline"}),r.jsx("div",{className:"divider-line"})]}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(0,8).map(_=>S(_)):g.slice(0,5).map(_=>S(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(8).map(_=>S(_)):g.slice(5).map(_=>S(_))})]}),r.jsx("div",{className:"arch-label",children:"Mandibular (Lower)"}),r.jsxs("div",{className:"chart-legend",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(gc,{toothNumber:1,conditions:[],style:{width:16,height:22}})}),r.jsx("span",{children:"Healthy"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(gc,{toothNumber:1,conditions:["condition-filling"],style:{width:16,height:22}})}),r.jsx("span",{children:"Filling (Dot)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(gc,{toothNumber:1,conditions:["condition-rct"],style:{width:16,height:22}})}),r.jsx("span",{children:"RCT (Root Lines)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(gc,{toothNumber:1,conditions:["condition-crown"],style:{width:16,height:22}})}),r.jsx("span",{children:"Crown"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(gc,{toothNumber:1,conditions:["condition-bridge"],style:{width:16,height:22}})}),r.jsx("span",{children:"Bridge"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(gc,{toothNumber:1,conditions:["condition-implant"],style:{width:16,height:22}})}),r.jsx("span",{children:"Implant"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(gc,{toothNumber:1,conditions:["condition-extraction"],style:{width:16,height:22}})}),r.jsx("span",{children:"Extraction (X)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(gc,{toothNumber:1,conditions:["condition-others"],style:{width:16,height:22}})}),r.jsx("span",{children:"Others"})]})]}),r.jsxs("div",{className:"print-only-details-summary print-only",children:[r.jsx("h3",{children:"Tooth Procedure Details"}),Object.keys(n).length===0?r.jsx("p",{className:"no-details",children:"No specific tooth procedures recorded."}):r.jsxs("table",{className:"print-details-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Tooth"}),r.jsx("th",{children:"Procedure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:Object.entries(n).sort(([_],[T])=>parseInt(_)-parseInt(T)).map(([_,T])=>r.jsx(Se.Fragment,{children:T.map((C,P)=>r.jsxs("tr",{children:[P===0?r.jsxs("td",{rowSpan:T.length,className:"tooth-cell",children:["Tooth ",vb(parseInt(_),o)]}):null,r.jsx("td",{children:C.name}),r.jsx("td",{children:C.date})]},`${_}-${P}`))},_))})]})]})]})},N5e=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState({}),[f,p]=v.useState(!1),[g,x]=v.useState({name:"",cost:0,type:"general"}),[b,j]=v.useState(""),S=n.filter(E=>E.name.toLowerCase().includes(b.toLowerCase()));v.useEffect(()=>{_()},[]);const _=async()=>{s(!0);try{const E=await se("/api/dental/procedures");if(E.ok){const I=await E.json();a(I)}}catch(E){console.error(E)}finally{s(!1)}},T=async()=>{if(!(!g.name||!g.cost))try{(await se("/api/dental/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,type:"general"}),_(),e())}catch(E){console.error(E)}},C=async E=>{try{(await se(`/api/dental/procedures/${E}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),d({}),_(),e())}catch(I){console.error(I)}},P=async E=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await se(`/api/dental/procedures/${E}`,{method:"DELETE"})).ok&&(_(),e())}catch(I){console.error(I)}},k=E=>{l(E.id),d({name:E.name,cost:E.cost,type:E.type})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Procedures"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await se("/api/dental/procedures/import-defaults",{method:"POST"}),_(),e()}catch(E){console.error(E)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(Ft,{size:20})})]})]}),r.jsx("div",{className:"mpm-search-container",children:r.jsxs("div",{className:"mpm-search-wrapper",children:[r.jsx(In,{className:"mpm-search-icon",size:18}),r.jsx("input",{type:"text",className:"mpm-search-input",placeholder:"Search procedures...",value:b,onChange:E=>j(E.target.value)}),b&&r.jsx("button",{className:"mpm-search-clear",onClick:()=>j(""),children:r.jsx(Ft,{size:16})})]})}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40%"},children:"Name"}),r.jsx("th",{style:{width:"20%"},children:"Type"}),r.jsx("th",{style:{width:"20%"},children:"Cost ()"}),r.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),r.jsx("tbody",{children:S.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):S.map(E=>r.jsx("tr",{children:o===E.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:I=>d({...c,name:I.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsxs("select",{className:"edit-select",value:c.type||"general",onChange:I=>d({...c,type:I.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"}),r.jsx("option",{value:"others",children:"Others"})]})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:I=>d({...c,cost:parseFloat(I.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>C(E.id),className:"action-btn btn-save",title:"Save",children:r.jsx(cs,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Ft,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:E.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${E.type}`,children:E.type})}),r.jsxs("td",{style:{fontWeight:500},children:["",E.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>k(E),className:"action-btn btn-edit",title:"Edit",children:r.jsx(ro,{size:18})}),r.jsx("button",{onClick:()=>P(E.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Vn,{size:18})})]})]})},E.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:E=>x({...g,name:E.target.value})}),r.jsxs("select",{className:"form-select",value:g.type||"general",onChange:E=>x({...g,type:E.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"}),r.jsx("option",{value:"others",children:"Others"})]}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:E=>x({...g,cost:parseFloat(E.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:T,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(Hn,{size:18})," Add New Procedure"]})})]})})},S5e=({toothNumber:t,procedures:e,history:n=[],onSelect:a,onClose:i,onManageProcedures:s,numberingSystem:o="universal"})=>{const[l,c]=v.useState(""),[d,f]=v.useState(n.length>0?"history":"add"),p=vb(t,o),g=v.useMemo(()=>e.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())),[e,l]);return r.jsx("div",{className:"tooth-modal-overlay",children:r.jsxs("div",{className:"tooth-modal-content",children:[r.jsxs("div",{className:"tooth-modal-header",children:[r.jsxs("h3",{className:"tooth-modal-title",children:["Tooth ",p]}),r.jsx("button",{onClick:i,className:"tooth-modal-close-btn",children:r.jsx(Ft,{size:20})})]}),n.length>0&&r.jsxs("div",{className:"tooth-modal-tabs",children:[r.jsx("button",{className:`tooth-modal-tab ${d==="add"?"active":""}`,onClick:()=>f("add"),children:"Add Procedure"}),r.jsxs("button",{className:`tooth-modal-tab ${d==="history"?"active":""}`,onClick:()=>f("history"),children:["History (",n.length,")"]})]}),d==="add"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"tooth-modal-search-box",style:{display:"flex",gap:"8px",alignItems:"center"},children:[r.jsxs("div",{className:"tooth-modal-search-wrapper",style:{flex:1},children:[r.jsx(In,{size:16,className:"tooth-modal-search-icon"}),r.jsx("input",{type:"text",placeholder:"Search procedures...",value:l,onChange:x=>c(x.target.value),className:"tooth-modal-search-input",autoFocus:!0})]}),s&&r.jsxs("button",{onClick:s,className:"modal-manage-btn",title:"Manage Procedures",children:[r.jsx(Zm,{size:16}),r.jsx("span",{children:"Manage"})]})]}),r.jsx("div",{className:"tooth-modal-list",children:g.length===0?r.jsx("div",{className:"tooth-modal-empty",children:"No procedures found."}):r.jsx("div",{className:"flex-col",children:g.map(x=>r.jsxs("button",{onClick:()=>a(x),className:"tooth-modal-item",children:[r.jsxs("div",{children:[r.jsx("div",{className:"tooth-modal-item-name",children:x.name}),r.jsx("div",{className:"tooth-modal-item-type",children:x.type})]}),r.jsxs("div",{className:"tooth-modal-item-cost-group",children:[r.jsxs("span",{children:["",x.cost]}),r.jsx(Hn,{size:16})]})]},x.id))})})]}),d==="history"&&r.jsx("div",{className:"tooth-modal-list",children:n.map((x,b)=>r.jsxs("div",{className:"tooth-modal-history-item",children:[r.jsx("div",{className:"tooth-modal-history-name",children:x.name}),r.jsxs("div",{className:"tooth-modal-history-date",children:[x.date," ",x.isPast?"(Past)":"(Current)"]})]},b))})]})})},_5e=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var ee,Ne,Te,Fe,xe,ne,oe,_e,De;const[i,s]=v.useState(null),[o,l]=v.useState([]),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(!1),[b,j]=v.useState("cash"),[S,_]=v.useState(""),[T,C]=v.useState(""),[P,k]=v.useState(""),[E,I]=v.useState(""),[L,$]=v.useState(""),[q,F]=v.useState(!1),[H,V]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[X,Y]=v.useState(0),z=v.useRef(!1),[G,ie]=v.useState(null),[W,B]=v.useState(!1),ce=()=>{const Q=H.map(de=>de.method),ge=["cash","upi","card","no_cash_insurance","credit"].filter(de=>!Q.includes(de));ge.length>0&&V([...H,{id:crypto.randomUUID(),method:ge[0],amount:0}])},je=Q=>{H.length>2&&V(H.filter(ge=>ge.id!==Q))},K=(Q,ge,de)=>{V(fe=>{const Ee=fe.map(Ye=>Ye.id===Q?ge==="method"?{...Ye,method:de}:{...Ye,amount:Math.max(0,de)}:Ye);if(ge==="amount"&&Ee.length===2){const $e=Ee.findIndex(wt=>wt.id===Q)===0?1:0,We=Math.max(0,de),it=le-We;Ee[$e]={...Ee[$e],amount:Math.max(0,it)}}return Ee})},Ie=Q=>{const ge=H.filter(fe=>fe.id!==Q).reduce((fe,Ee)=>fe+Ee.amount,0),de=Math.max(0,le-ge);K(Q,"amount",de)},Ue=v.useMemo(()=>H.reduce((Q,ge)=>Q+ge.amount,0),[H]),ze=Q=>{const ge=Math.max(0,Math.min(100,isNaN(Q)?0:Q));z.current=!0,Y(ge);const de=o.map(fe=>({...fe,discount_percentage:ge}));l(de)},Le=(Q,ge)=>{const de=[...o];de[Q].discount_percentage=isNaN(ge)?0:ge,l(de)};v.useEffect(()=>{if(z.current){z.current=!1;return}const Q=o.reduce((fe,Ee)=>fe+(Ee.price??0),0);if(Q===0){Y(0);return}const de=o.reduce((fe,Ee)=>{const $e=(Ee.price??0)*((Ee.discount_percentage??0)/100);return fe+$e},0)/Q*100;Y(fe=>Math.abs(fe-de)>.01?de:fe)},[o]);const be=async()=>{var Q,ge;if(!i)return p("No record data available to bill."),null;if(o.length===0)return p("Cannot bill an empty procedure list."),null;x(!0),p(null);try{const de=o.map(we=>{const Xe=we.price,Je=Xe*((we.discount_percentage??0)/100),ct=Xe-Je;return{name:we.name,price:we.price,quantity:1,total:ct,item_id:we.id||`proc_${Date.now()}`,type:"service",discount_percentage:we.discount_percentage??0}}),fe=q?((Q=H[0])==null?void 0:Q.method)||"cash":b,Ee=q?H.map(we=>({method:we.method,amount:we.amount})):void 0,Ye={patientId:i.patientId.id,items:de,amount:le,paymentMode:fe,splitPayments:Ee,type:"dental",related_id:i.id,status:"paid",discountPercentage:X},$e=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ye)}),We=await $e.json();if(!$e.ok||!We.id)throw new Error(We.message||"Failed to create bill.");(await se(`/api/dental/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:We.id})})).ok||console.error("Failed to update dental record status"),s(we=>we?{...we,status:"billed",billId:We.id}:null);const wt=q?((ge=H.find(we=>we.method==="credit"))==null?void 0:ge.amount)||0:b==="credit"?le:0;if(wt>0)try{await se(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:wt,related_bill_id:We.id,notes:`Dental Bill #${We.id}${q?" (Split Payment - Credit portion)":""}`})})}catch(we){console.error("Failed to create debt entry:",we)}return a&&a(),We.id}catch(de){return console.error("Billing process failed:",de),p(de.message||"Failed to create bill."),null}finally{x(!1)}},Ce=()=>{window.print()},Ae=async()=>{await be()&&setTimeout(()=>window.print(),800)};v.useEffect(()=>{t&&n&&(async()=>{d(!0);try{const[ge,de]=await Promise.all([se(`/api/dental/${n}`),se("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!ge.ok)throw new Error("Failed to fetch dental record");const fe=await ge.json(),Ee={...fe,patientId:fe.Patient||fe.patientId};if(s(Ee),de.ok){const We=await de.json();C(We.upi_id||""),k(We.name||""),I(We.address||""),$(We.notes||"")}const $e=(Ee.selected_procedures||Ee.selectedProcedures||[]).map(We=>({...We,price:We.cost,discount_percentage:0}));l($e)}catch(ge){console.error("Failed to fetch data:",ge),p(ge.message)}finally{d(!1)}})()},[t,n]);const me=v.useMemo(()=>o.reduce((Q,ge)=>Q+(ge.price??0),0),[o]),ye=v.useMemo(()=>o.reduce((Q,ge)=>{const fe=(ge.price??0)*(ge.discount_percentage??0)/100;return Q+fe},0),[o]),le=v.useMemo(()=>me-ye,[me,ye]),J=v.useMemo(()=>le-Ue,[le,Ue]),ae=v.useMemo(()=>Math.abs(J)<.01,[J]);v.useEffect(()=>{if(q&&H.length>=1&&Ue===0){const Q=[...H];Q[0].amount=le,V(Q)}},[q,le]),v.useEffect(()=>{if(le>0&&T){const Q=`upi://pay?pa=${T}&pn=${encodeURIComponent(P)}&am=${le.toFixed(2)}&cu=INR`;_(Q)}else _("")},[le,T,P]);const ue=v.useMemo(()=>q?H.some(Q=>Q.method==="credit"):b==="credit",[q,H,b]);return v.useEffect(()=>{(async()=>{var ge;if(ue&&((ge=i==null?void 0:i.patientId)!=null&&ge.id)){B(!0);try{const de=await se(`/api/patient-debts/${i.patientId.id}/balance`);if(de.ok){const fe=await de.json();ie(fe.netDebt||0)}else ie(0)}catch{ie(0)}finally{B(!1)}}})()},[ue,(ee=i==null?void 0:i.patientId)==null?void 0:ee.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Dental Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(Ft,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:c?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:30,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3].map(Q=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:20,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:90,height:20})})]},Q))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:28}),r.jsx(te,{width:100,height:28})]})]})]})})]})})}):f?r.jsxs("div",{className:"error-message-box",children:["Error: ",f]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:P||"Clinic Name"}),(E||L)&&r.jsxs("div",{className:"clinic-details-print",children:[E&&r.jsx("span",{className:"small-text clinic-address",children:E}),L&&r.jsx("span",{className:"small-text clinic-notes",children:L})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Ne=i.patientId)==null?void 0:Ne.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",((Te=i.patientId)==null?void 0:Te.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Fe=i.patientId)==null?void 0:Fe.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",((xe=i.patientId)==null?void 0:xe.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ta,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"dental-chart-section-modal",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Dental Chart"})}),r.jsx("div",{className:"chart-wrapper-modal",children:r.jsx(_G,{selectedTeeth:[],onToothClick:()=>{},toothConditions:(()=>{const Q={};return i.teeth&&i.teeth.forEach(ge=>{ge.procedures.forEach(de=>{var Ee,Ye;const fe=((Ee=i.selected_procedures)==null?void 0:Ee.find($e=>$e.id===de))||((Ye=i.selectedProcedures)==null?void 0:Ye.find($e=>$e.id===de));if(fe&&fe.type&&fe.type!=="general"){Q[ge.toothNumber]||(Q[ge.toothNumber]=[]);const $e=`condition-${fe.type}`;Q[ge.toothNumber].includes($e)||Q[ge.toothNumber].push($e)}})}),Q})(),toothDetails:(()=>{const Q={};return i.teeth&&i.teeth.forEach(ge=>{Q[ge.toothNumber]||(Q[ge.toothNumber]=[]),ge.procedures.forEach(de=>{var Ee,Ye;const fe=((Ee=i.selected_procedures)==null?void 0:Ee.find($e=>$e.id===de))||((Ye=i.selectedProcedures)==null?void 0:Ye.find($e=>$e.id===de));fe&&Q[ge.toothNumber].push({name:fe.name,date:new Date(i.date||i.createdAt).toLocaleDateString()})})}),Q})()})})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),o.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:o.map((Q,ge)=>{const de=Q.price??0,fe=de*(Q.discount_percentage??0)/100,Ee=de-fe;return r.jsxs("tr",{children:[r.jsx("td",{children:ge+1}),r.jsx("td",{children:Q.name}),r.jsx("td",{children:Q.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:Q.discount_percentage===0?"":Q.discount_percentage,onChange:Ye=>Le(ge,parseFloat(Ye.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Ee.toFixed(2)})]},ge)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",me.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",X.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ye.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",le.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"12px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px"},children:"Payment Details:"}),q?r.jsx("div",{className:"split-payment-details-print",children:H.map(Q=>r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:Q.method.toUpperCase()}),r.jsxs("span",{children:["",Q.amount.toFixed(2)]})]},Q.id))}):r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Mode"}),r.jsx("span",{children:b.toUpperCase()})]})]}),(b==="credit"||q&&H.some(Q=>Q.method==="credit"))&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px",color:"#e53e3e"},children:"Credit/Debt Information:"}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Credit Amount"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",q?(((ne=H.find(Q=>Q.method==="credit"))==null?void 0:ne.amount)||0).toFixed(2):le.toFixed(2)]})]}),(G??0)>0&&r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(G??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px",fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((G??0)+(q?((oe=H.find(Q=>Q.method==="credit"))==null?void 0:oe.amount)||0:le)).toFixed(2)]})]})]})]}),S&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!(q&&H.some(Q=>Q.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(La,{value:S,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",me.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ye.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:X===0?"":X,onChange:Q=>ze(parseFloat(Q.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:g||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",le.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:S?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:S,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${q?"active":""}`,onClick:()=>F(!q),disabled:g||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:q?"2px solid #4facfe":"1px solid #ddd",background:q?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:q?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:q?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(zo,{size:14}),"Split Pay"]})]}),q?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(zo,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",le.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:H.map((Q,ge)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ge+1}),r.jsxs("select",{value:Q.method,onChange:de=>K(Q.id,"method",de.target.value),className:`split-payment-select ${Q.method==="credit"?"is-credit":""}`,disabled:g||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:Q.amount===0?"":Q.amount,onChange:de=>K(Q.id,"amount",parseFloat(de.target.value)||0),placeholder:"0",className:`split-payment-input ${Q.method==="credit"?"is-credit":""}`,disabled:g||i.status==="billed"})]}),H.length>2&&r.jsx("button",{type:"button",onClick:()=>Ie(Q.id),className:"split-payment-btn split-payment-btn-fill",disabled:g||i.status==="billed",children:"Fill"}),H.length>2&&r.jsx("button",{type:"button",onClick:()=>je(Q.id),className:"split-payment-btn split-payment-btn-remove",disabled:g||i.status==="billed",children:r.jsx(Vn,{size:12})})]},Q.id))}),H.length<5&&r.jsxs("button",{type:"button",onClick:ce,className:"split-payment-add-btn",disabled:g||i.status==="billed",children:[r.jsx(Hn,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ue.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(J)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(J)<.01?"":J>0?"":"",Math.abs(J)<.01?"Balanced":J>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(J).toFixed(2)]})]}),!ae&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",le.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:Q=>j(Q.target.value),className:"payment-mode-select",disabled:g||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),ue&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),W?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:G&&G>0?"#dc3545":"#28a745"},children:["",(G||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:q?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",(q?((_e=H.find(Q=>Q.method==="credit"))==null?void 0:_e.amount)||0:le).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((G||0)+(q?((De=H.find(Q=>Q.method==="credit"))==null?void 0:De.amount)||0:le)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Ce,className:"secondary-button print-preview-button no-print",disabled:g,children:"Print Preview"}),r.jsx("button",{onClick:Ae,className:"primary-button",disabled:g||q&&!ae,children:g?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Fo,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:Ce,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},FB=/^\+?[0-9\s\-().]{7,20}$/,C5e=/^[a-zA-Z\s'-]{2,}$/,T5e=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState([]),[_,T]=v.useState(!0),[C,P]=v.useState(()=>{const de=localStorage.getItem("dentalNumberingSystem");return de==="fdi"||de==="universal"?de:"fdi"});v.useEffect(()=>{localStorage.setItem("dentalNumberingSystem",C)},[C]);const k=$r();v.useEffect(()=>{k.state&&k.state.patient&&le(k.state.patient)},[k.state]);const[E,I]=v.useState([]),[L,$]=v.useState([]),[q,F]=v.useState({}),[H,V]=v.useState(""),[X,Y]=v.useState(!1),[z,G]=v.useState("plan"),[ie,W]=v.useState([]),[B,ce]=v.useState([]),[je,K]=v.useState(!1),[Ie,Ue]=v.useState(!1),[ze,Le]=v.useState(null);v.useEffect(()=>{Ce(),be()},[]);const be=async()=>{try{const de=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),fe=await se(`/api/patients?${de.toString()}`);if(fe.ok){const Ee=await fe.json();S(Ee.patients||[])}}catch(de){console.error("Error fetching recent patients",de)}finally{T(!1)}},Ce=async()=>{try{const de=await se("/api/dental/procedures");if(de.ok){const fe=await de.json();ce(fe)}}catch(de){console.error("Error fetching procedures",de)}};v.useEffect(()=>{(async()=>{if(!l){W([]),Le(null),V(""),$([]),F({}),I([]);return}try{const fe=await se(`/api/dental/patient/${l.id}`);if(fe.ok){const Ee=await fe.json();W(Ee);const Ye=new Date().toDateString(),$e=Ee.find(We=>We.status==="draft"&&new Date(We.date||We.createdAt||Date.now()).toDateString()===Ye);if($e){Le($e.id),V($e.notes||"");const We=$e.selected_procedures.filter(we=>!$e.teeth.some(Xe=>Xe.procedures.includes(we.id)));$(We.map(we=>({instanceId:crypto.randomUUID(),procedureId:we.id,name:we.name,price:we.cost,type:we.type})));const it={},wt=[];$e.teeth.forEach(we=>{const Xe=we.procedures.map(Je=>{const ct=$e.selected_procedures.find(Ct=>Ct.id===Je)||B.find(Ct=>Ct.id===Je);return{instanceId:crypto.randomUUID(),procedureId:Je,name:ct?ct.name:Je,price:ct?ct.cost:0,type:ct?ct.type:"general"}});Xe.length>0&&(it[we.toothNumber]=Xe,wt.push(we.toothNumber))}),F(it),I(wt)}else Le(null),V(""),$([]),F({}),I([])}}catch(fe){console.error("Error fetching history",fe)}})()},[l,B]);const Ae=v.useMemo(()=>Uc(async de=>{if(!de.trim()||de.length<2){i([]),o(!1);return}o(!0);try{const fe=await se(`/api/patients?search=${encodeURIComponent(de)}&limit=10`);if(fe.ok){const Ee=await fe.json();i(Ee.patients||[])}}catch(fe){console.error("Search error:",fe)}finally{o(!1)}},300),[]);v.useEffect(()=>{Ae(e)},[e,Ae]);const me=de=>{const fe=de.target.value;n(fe),g(FB.test(fe)),b(C5e.test(fe)&&!FB.test(fe))},ye=async de=>{if(!(!e||de==="phone"&&!p||de==="name"&&!x)){o(!0);try{const Ee=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:de==="name"?e:"direct dental",phone:de==="phone"?e:null,age:null,gender:null,token:null})});if(Ee.ok){const Ye=await Ee.json();le({id:Ye.id,name:Ye.name,token:Ye.token??null,age:Ye.age??null,gender:Ye.gender??null,phone:Ye.phone})}else alert("Failed to create patient")}catch(fe){console.error("Error creating patient:",fe),alert("Error creating patient")}finally{o(!1)}}},le=de=>{c(de),n(""),i([])},J=()=>{c(null),I([]),$([]),F({}),V("")},ae=async de=>{if(!l)return;const fe=await se(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)});if(fe.ok)await fe.json(),c(Ee=>Ee?{...Ee,...de}:null);else throw new Error("Failed to update")},[ue,ee]=v.useState(null),Ne=de=>{ee(de)},Te=de=>{if(!ue)return;const fe={instanceId:crypto.randomUUID(),procedureId:de.id,name:de.name,price:de.cost,type:de.type};F(Ee=>{const Ye=Ee[ue]||[];return{...Ee,[ue]:[...Ye,fe]}}),I(Ee=>Ee.includes(ue)?Ee:[...Ee,ue]),ee(null)},Fe=()=>{const de={},fe={},Ee=(We,it)=>{de[We]||(de[We]=[]);const wt=`condition-${it}`;de[We].includes(wt)||de[We].push(wt)},Ye=(We,it)=>{fe[We]||(fe[We]=[]),fe[We].push(it)};return[...ie].sort((We,it)=>new Date(We.date).getTime()-new Date(it.date).getTime()).forEach(We=>{We.teeth&&Array.isArray(We.teeth)&&We.teeth.forEach(it=>{it.procedures.forEach(wt=>{var Xe;let we=(Xe=We.selected_procedures)==null?void 0:Xe.find(Je=>Je.id===wt);we||(we=B.find(Je=>Je.id===wt)),we&&we.type!=="general"?(Ee(it.toothNumber,we.type),Ye(it.toothNumber,{name:we.name,date:new Date(We.date||We.createdAt||0).toLocaleDateString(),recordId:We.id,isPast:!0})):wt&&Ye(it.toothNumber,{name:`Procedure: ${wt}`,date:new Date(We.date||We.createdAt||0).toLocaleDateString(),recordId:We.id,isPast:!0})})})}),Object.keys(q).forEach(We=>{const it=parseInt(We),wt=q[it];wt&&wt.length>0&&wt.forEach(we=>{we.type!=="general"&&(Ee(it,we.type),Ye(it,{name:we.name,date:"Current",isPast:!1}))})}),{conditions:de,details:fe}},{conditions:xe,details:ne}=v.useMemo(()=>Fe(),[ie,q,B]),oe=de=>{const fe=ie.find(We=>We.id===de);if(!fe)return;V(fe.notes||"");const Ee=fe.selected_procedures.filter(We=>!fe.teeth.some(it=>it.procedures.includes(We.id)));$(Ee.map(We=>({instanceId:crypto.randomUUID(),procedureId:We.id,name:We.name,price:We.cost,type:We.type})));const Ye={},$e=[];fe.teeth.forEach(We=>{const it=We.procedures.map(wt=>{const we=fe.selected_procedures.find(Xe=>Xe.id===wt)||B.find(Xe=>Xe.id===wt);return{instanceId:crypto.randomUUID(),procedureId:wt,name:we?we.name:wt,price:we?we.cost:0,type:we?we.type:"general"}});it.length>0&&(Ye[We.toothNumber]=it,$e.push(We.toothNumber))}),F(Ye),I($e),G("plan")},_e=(de,fe)=>{fe?(F(Ee=>{const Ye={...Ee};return Ye[fe]=(Ee[fe]||[]).filter($e=>$e.instanceId!==de),Ye[fe].length===0&&delete Ye[fe],Ye}),I(Ee=>Ee)):$(Ee=>Ee.filter(Ye=>Ye.instanceId!==de))},De=(de,fe,Ee)=>{Ee?F(Ye=>({...Ye,[Ee]:(Ye[Ee]||[]).map($e=>$e.instanceId===de?{...$e,price:fe}:$e)})):$(Ye=>Ye.map($e=>$e.instanceId===de?{...$e,price:fe}:$e))},Q=()=>{window.print()},ge=async(de=!0)=>{var fe;if(l){Y(!0);try{const Ye=[...L,...Object.values(q).flat()].map(we=>({id:we.procedureId,name:we.name,cost:we.price,type:we.type})),We=Object.keys(q).map(Number).map(we=>({toothNumber:we,procedures:(q[we]||[]).map(Xe=>Xe.procedureId),notes:H})),it={patientId:l.id,teeth:We,selectedProcedures:Ye,notes:H};let wt;if(ze?((fe=ie.find(Xe=>Xe.id===ze))==null?void 0:fe.status)==="draft"?wt=await se(`/api/dental/${ze}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}):wt=await se("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}):wt=await se("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}),wt.ok){const we=await wt.json();Le(we.id);const Xe=await se(`/api/dental/patient/${l.id}`);if(Xe.ok){const Je=await Xe.json();W(Je)}de?Ue(!0):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save dental record.")}catch(Ee){console.error(Ee),alert("Error saving record.")}finally{Y(!1)}}};return r.jsxs("div",{className:"dental-page-container printable-section",children:[r.jsxs("header",{className:"dental-header",children:[r.jsxs("div",{className:"dental-title-group",children:[r.jsx(Ta,{className:"dental-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"dental-title",children:"Dental Report"}),r.jsx("p",{className:"dental-subtitle",children:"Create new dental records and bills"})]}),r.jsxs("div",{className:"numbering-toggle",style:{marginLeft:"auto",marginRight:"16px",display:"flex",gap:"4px",background:"var(--dp-bg-sec)",padding:"4px",borderRadius:"8px"},children:[r.jsx("button",{onClick:()=>P("universal"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="universal"?"var(--dp-card-bg)":"transparent",boxShadow:C==="universal"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="universal"?"var(--dp-text)":"var(--dp-text-sec)"},children:"Universal"}),r.jsx("button",{onClick:()=>P("fdi"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="fdi"?"var(--dp-card-bg)":"transparent",boxShadow:C==="fdi"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="fdi"?"var(--dp-text)":"var(--dp-text-sec)"},children:"FDI"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(ro,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:J,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Ft,{size:16})})]}),r.jsxs("button",{onClick:()=>K(!0),className:"header-manage-procs-btn no-print",title:"Manage Dental Procedures",children:[r.jsx(Zm,{size:16}),r.jsx("span",{children:"Manage Procedures"})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(In,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"dental-search-input header-input",value:e,onChange:me}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(de=>r.jsxs("div",{onClick:()=>le(de),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:de.name}),r.jsxs("div",{className:"patient-meta",children:[de.age," yrs / ",de.gender,"  ",de.phone]})]}),r.jsx(Jn,{size:16,color:"var(--dp-text-sec)"})]},de.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>ye(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"dental-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container",children:[!l&&r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--dp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(In,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"dental-search-input",value:e,onChange:me,autoFocus:!0}),s&&r.jsx("div",{className:"search-spinner"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(de=>r.jsxs("div",{onClick:()=>le(de),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:de.name}),r.jsxs("div",{className:"patient-meta",children:[de.age," yrs / ",de.gender,"  ",de.phone]})]}),r.jsx(Jn,{size:18,color:"var(--dp-text-sec)"})]},de.id))})]}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{style:{color:"var(--dp-text-sec)",marginBottom:"15px"},children:['No patients found matching "',e,'".']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:(p||x)&&r.jsxs("button",{type:"button",onClick:()=>ye(p?"phone":"name"),className:"register-new-btn",style:{backgroundColor:"var(--dp-card-bg)",border:"1px solid var(--dp-primary)",padding:"8px 16px",borderRadius:"8px"},children:['Create "',e,'"']})})]}),!l&&r.jsx("div",{style:{marginTop:"32px"},children:r.jsx("button",{onClick:()=>K(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage Procedures"})}),!l&&(_||j.length>0)&&r.jsxs("div",{className:"recent-registered-section",children:[r.jsx("div",{className:"recent-registered-label",children:"Recent Patients"}),r.jsx("div",{className:"recent-list",children:_?[1,2,3].map(de=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(te,{width:100,height:18}),r.jsx(te,{width:30,height:20})]}),r.jsx("div",{className:"recent-info",children:r.jsx(te,{width:80,height:14})})]},de)):j.map(de=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>le(de),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:de.name||"New Patient"}),de.token&&r.jsxs("span",{className:"recent-token",children:["#",de.token]})]}),r.jsxs("div",{className:"recent-info",children:[de.age?`${de.age} yrs`:"",de.age&&de.gender?" / ":"",de.gender||""]})]},de.id))})]})]}),l&&r.jsx("div",{className:"dental-workspace",children:r.jsxs("div",{className:"dental-grid",children:[r.jsxs("div",{className:"chart-section",children:[r.jsx("div",{className:"dental-card chart-card-scroll",children:r.jsx(_G,{selectedTeeth:E,toothConditions:xe,toothDetails:ne,onToothClick:Ne,onEditPastRecord:oe,onPrint:Q,numberingSystem:C})}),r.jsxs("div",{className:"dental-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("h4",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>ge(!1),disabled:X,title:"Save notes and procedures without billing",children:[r.jsx(cs,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:H,onChange:de=>V(de.target.value)})]})]}),r.jsx("div",{className:"dental-card procedures-section",children:r.jsxs("div",{className:"treatment-plan-container",style:{borderTop:"none"},children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{onClick:()=>G("plan"),className:z==="plan"?"active":"",children:"Treatment Plan"}),r.jsx("button",{onClick:()=>G("history"),className:z==="history"?"active":"",children:"Visit History"})]}),r.jsx("div",{className:"treatment-plan-list custom-scrollbar",children:z==="plan"?r.jsx(r.Fragment,{children:L.length===0&&Object.keys(q).length===0?r.jsx("div",{className:"no-print",style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"Select a tooth to add procedures."}):r.jsxs(r.Fragment,{children:[L.length>0&&r.jsxs("div",{className:"plan-group",children:[r.jsx("h4",{children:"General"}),L.map(de=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:de.name,children:de.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:de.price,onChange:fe=>De(de.instanceId,parseFloat(fe.target.value)||0),className:"cost-input"}),r.jsx("button",{onClick:()=>_e(de.instanceId),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Ft,{size:14})})]})]},de.instanceId))]}),Object.entries(q).map(([de,fe])=>fe.length===0?null:r.jsxs("div",{className:"plan-group",children:[r.jsxs("h4",{children:["Tooth ",vb(parseInt(de),C)]}),fe.map(Ee=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:Ee.name,children:Ee.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:Ee.price,onChange:Ye=>De(Ee.instanceId,parseFloat(Ye.target.value)||0,parseInt(de)),className:"cost-input"}),r.jsx("button",{onClick:()=>_e(Ee.instanceId,parseInt(de)),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Ft,{size:14})})]})]},Ee.instanceId))]},de))]})}):r.jsx("div",{className:"history-list",children:ie.length===0?r.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"No past visits found."}):ie.map(de=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(de.date).toLocaleDateString()}),r.jsx("span",{className:"record-status",children:de.status})]}),r.jsxs("div",{className:"history-record-body",children:[de.teeth.map(fe=>r.jsxs("div",{className:"history-tooth-group",children:[r.jsxs("strong",{children:["Tooth ",vb(fe.toothNumber,C),":"]})," ",fe.procedures.map(Ee=>{const Ye=de.selected_procedures.find($e=>$e.id===Ee)||B.find($e=>$e.id===Ee);return Ye?Ye.name:Ee}).join(", ")]},fe.toothNumber)),de.notes&&r.jsx("p",{className:"history-notes",children:r.jsxs("em",{children:["Notes: ",de.notes]})}),de.status==="billed"&&r.jsx("div",{className:"history-record-actions mt-3",children:r.jsxs("button",{onClick:()=>{Le(de.id),Ue(!0)},className:"view-bill-btn",children:[r.jsx(Ta,{size:14})," View Bill"]})})]})]},de.id))})}),r.jsx("div",{className:"action-footer",children:r.jsx("button",{onClick:()=>ge(!0),className:"save-btn",disabled:X||L.length===0&&Object.keys(q).length===0,children:X?"Saving...":"Save & Bill"})})]})})]})}),d&&l&&r.jsx(eG,{patient:l,onClose:()=>f(!1),onSave:ae}),je&&r.jsx(N5e,{onClose:()=>K(!1),onUpdate:Ce}),ue!==null&&r.jsx(S5e,{toothNumber:ue,procedures:B.map(de=>({id:de.id,name:de.name,cost:de.cost,type:de.type})),history:ne[ue]||[],onSelect:Te,onManageProcedures:()=>{ee(null),K(!0)},onClose:()=>ee(null),numberingSystem:C}),r.jsx(_5e,{isOpen:Ie,recordId:ze,onClose:()=>{Ue(!1),J()},onBillingComplete:()=>{}})]})},k5e=()=>{var ue,ee,Ne,Te,Fe;const t=Lt(),e=$r(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState("cash"),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(""),[P,k]=v.useState(""),[E,I]=v.useState(""),[L,$]=v.useState(!1),[q,F]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),H=()=>{q.length<5&&F(xe=>[...xe,{id:Date.now().toString(),method:"cash",amount:0}])},V=xe=>{q.length>2&&F(ne=>ne.filter(oe=>oe.id!==xe))},X=(xe,ne,oe)=>{F(_e=>{const De=_e.map(Q=>Q.id===xe?ne==="method"?{...Q,method:oe}:{...Q,amount:Math.max(0,oe)}:Q);if(ne==="amount"&&De.length===2){const ge=De.findIndex(Ee=>Ee.id===xe)===0?1:0,de=Math.max(0,oe),fe=Ae-de;De[ge]={...De[ge],amount:Math.max(0,fe)}}return De})},Y=(xe,ne)=>{const oe=q.filter(De=>De.id!==xe).reduce((De,Q)=>De+Q.amount,0),_e=Math.max(0,ne-oe);F(De=>De.map(Q=>Q.id===xe?{...Q,amount:_e}:Q))},[z,G]=v.useState(0),ie=v.useRef(!1),[W,B]=v.useState(null),[ce,je]=v.useState(!1),K=xe=>{const ne=Math.max(0,Math.min(100,isNaN(xe)?0:xe));ie.current=!0,G(ne);const oe=i.map(_e=>({..._e,discount_percentage:ne}));s(oe)},Ie=(xe,ne)=>{const oe=[...i];oe[xe].discount_percentage=isNaN(ne)?0:ne,s(oe)};v.useEffect(()=>{if(ie.current){ie.current=!1;return}const xe=i.reduce((_e,De)=>_e+(De.price??0),0);if(xe===0){G(0);return}const oe=i.reduce((_e,De)=>{const ge=(De.price??0)*((De.discount_percentage??0)/100);return _e+ge},0)/xe*100;G(_e=>Math.abs(_e-oe)>.01?oe:_e)},[i]);const Ue=async()=>{if(!n)return d("No record data available to bill."),null;if(i.length===0)return d("Cannot bill an empty procedure list."),null;p(!0),d(null);try{const xe=i.map(ge=>{const de=ge.price,fe=de*((ge.discount_percentage??0)/100),Ee=de-fe;return{name:ge.name,price:ge.price,quantity:1,total:Ee,item_id:ge.id||`proc_${Date.now()}`,type:"service",discount_percentage:ge.discount_percentage??0}}),ne={patientId:n.patientId.id,items:xe,amount:Ae,paymentMode:L?"split":g,type:"dental",related_id:n.id,status:"paid",discountPercentage:z};L&&(ne.splitPayments=q.map(ge=>({method:ge.method,amount:ge.amount})));const oe=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)}),_e=await oe.json();if(!oe.ok||!_e.id)throw new Error(_e.message||"Failed to create bill.");(await se(`/api/dental/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:_e.id})})).ok||console.error("Failed to update dental record status"),a(ge=>ge?{...ge,status:"billed",billId:_e.id}:null);const Q=L?q.filter(ge=>ge.method==="credit").reduce((ge,de)=>ge+de.amount,0):g==="credit"?Ae:0;if(Q>0)try{await se(`/api/patient-debts/${n.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Q,related_bill_id:_e.id,notes:`Dental Bill #${_e.id}`})})}catch(ge){console.error("Failed to create debt entry:",ge)}return _e.id}catch(xe){return console.error("Billing process failed:",xe),d(xe.message||"Failed to create bill."),null}finally{p(!1)}},ze=()=>{window.print()},Le=async()=>{await Ue()&&setTimeout(()=>window.print(),500)};v.useEffect(()=>{const xe=e.pathname.split("/"),ne=xe[xe.length-1];ne?(async()=>{l(!0);try{const[_e,De]=await Promise.all([se(`/api/dental/${ne}`),se("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!_e.ok)throw new Error("Failed to fetch dental record");const Q=await _e.json(),ge={...Q,patientId:Q.Patient||Q.patientId};if(a(ge),De.ok){const Ee=await De.json();_(Ee.upi_id||""),C(Ee.name||""),k(Ee.address||""),I(Ee.notes||"")}const fe=(ge.selected_procedures||ge.selectedProcedures||[]).map(Ee=>({...Ee,price:Ee.cost,discount_percentage:0}));s(fe)}catch(_e){console.error("Failed to fetch data:",_e),d(_e.message)}finally{l(!1)}})():(d("No record ID provided."),l(!1))},[e.pathname]);const be=v.useMemo(()=>i.reduce((xe,ne)=>xe+(ne.price??0),0),[i]),Ce=v.useMemo(()=>i.reduce((xe,ne)=>{const _e=(ne.price??0)*(ne.discount_percentage??0)/100;return xe+_e},0),[i]),Ae=v.useMemo(()=>be-Ce,[be,Ce]),me=v.useMemo(()=>q.reduce((xe,ne)=>xe+ne.amount,0),[q]),ye=v.useMemo(()=>Ae-me,[Ae,me]),le=v.useMemo(()=>Math.abs(ye)<.01,[ye]),J=v.useMemo(()=>L?q.some(xe=>xe.method==="credit"&&xe.amount>0):g==="credit",[L,q,g]),ae=v.useMemo(()=>L?q.filter(xe=>xe.method==="credit").reduce((xe,ne)=>xe+ne.amount,0):g==="credit"?Ae:0,[L,q,g,Ae]);return v.useEffect(()=>{if(Ae>0&&S){const xe=`upi://pay?pa=${S}&pn=${encodeURIComponent(T)}&am=${Ae.toFixed(2)}&cu=INR`;j(xe)}else j("")},[Ae,S,T]),v.useEffect(()=>{(async()=>{var ne;if(J&&((ne=n==null?void 0:n.patientId)!=null&&ne.id)){je(!0);try{const oe=await se(`/api/patient-debts/${n.patientId.id}/balance`);if(oe.ok){const _e=await oe.json();B(_e.netDebt||0)}else B(0)}catch{B(0)}finally{je(!1)}}})()},[J,(ue=n==null?void 0:n.patientId)==null?void 0:ue.id]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(te,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(te,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(te,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(te,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(te,{width:30,height:20})}),r.jsx("th",{children:r.jsx(te,{width:150,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:80,height:20})}),r.jsx("th",{children:r.jsx(te,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(xe=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(te,{width:20,height:20})}),r.jsx("td",{children:r.jsx(te,{width:180,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:70,height:20})}),r.jsx("td",{children:r.jsx(te,{width:90,height:20})})]},xe))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(te,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:100,height:20}),r.jsx(te,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(te,{width:120,height:28}),r.jsx(te,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(te,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(te,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T||"Clinic Name"}),(P||E)&&r.jsxs("div",{className:"clinic-details-print",children:[P&&r.jsx("span",{className:"small-text clinic-address",children:P}),E&&r.jsx("span",{className:"small-text clinic-notes",children:E})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((ee=n.patientId)==null?void 0:ee.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",((Ne=n.patientId)==null?void 0:Ne.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(n.date||n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Dental Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Te=n.patientId)==null?void 0:Te.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ka,{size:16})," Token"]})," ",((Fe=n.patientId)==null?void 0:Fe.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ta,{size:16})," Record ID"]})," ",n.id.substring(n.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((xe,ne)=>{const oe=xe.price??0,_e=oe*(xe.discount_percentage??0)/100,De=oe-_e;return r.jsxs("tr",{children:[r.jsx("td",{children:ne+1}),r.jsx("td",{children:xe.name}),r.jsx("td",{children:xe.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:xe.discount_percentage===0?"":xe.discount_percentage,onChange:Q=>Ie(ne,parseFloat(Q.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:De.toFixed(2)})]},ne)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",z.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Ce.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ae.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:L?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),L&&q.map((xe,ne)=>xe.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:xe.method==="cash"?"Cash":xe.method==="upi"?"UPI":xe.method==="card"?"Card":xe.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",xe.amount.toFixed(2)]})]},ne))]}),W!==null&&(W>0||J)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(W??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(W??0).toFixed(2)]})]}),J&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((W??0)+(J?ae:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(La,{value:b,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:z===0?"":z,onChange:xe=>K(parseFloat(xe.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ae.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>$(!L),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:L?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:L?"rgba(79, 172, 254, 0.1)":"transparent",color:L?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(zo,{size:14}),"Split"]})]}),L?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Ae.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:q.map((xe,ne)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ne+1}),r.jsxs("select",{value:xe.method,onChange:oe=>X(xe.id,"method",oe.target.value),className:`split-payment-select ${xe.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:xe.amount||"",onChange:oe=>X(xe.id,"amount",parseFloat(oe.target.value)||0),className:`split-payment-input ${xe.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),q.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>Y(xe.id,Ae),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>V(xe.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Vn,{size:12})})]})]},xe.id))}),q.length<5&&r.jsxs("button",{type:"button",onClick:H,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(Hn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",me.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${le?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[le?"":ye>0?"":"",le?"Balanced":ye>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ye).toFixed(2)]})]}),!le&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",Ae.toFixed(2)]})]})]}):r.jsxs("select",{value:g,onChange:xe=>x(xe.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),J&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),ce?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:W&&W>0?"#dc3545":"#28a745"},children:["",(W||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ae.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((W||0)+ae).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:n.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ze,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:Le,className:"primary-button",disabled:f,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Fo,{size:20})," Bill Generated"]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})]}):r.jsx("div",{className:"error-message-box",children:"No record found."})},CD=v.lazy(()=>MN(()=>import("./AddPatientPage-DDCX6wUa.js"),__vite__mapDeps([2,3]))),$B=v.lazy(()=>MN(()=>import("./EditComplaintPage-DhMYwAZL.js"),__vite__mapDeps([0,1])));function A5e(){const[t,e]=v.useState(!1),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),f=P=>{a(P),e(!0),P.role==="admin"&&!P.has_seen_tutorial&&d(!0)},p=()=>{e(!1),a(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};v.useEffect(()=>{const P=localStorage.getItem("authToken"),k=localStorage.getItem("currentUser");if(P&&k)try{const E=JSON.parse(k);a(E),e(!0),E.role==="admin"&&!E.has_seen_tutorial&&d(!0)}catch(E){console.error("Error parsing stored user data:",E),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}s(!1)},[]);const{data:g}=aDe(t&&!!n);v.useEffect(()=>{g?l(g):t||l(null)},[g,t]);const[x,b]=v.useState(null),[j,S]=v.useState(!1);v.useEffect(()=>{const P=k=>{k.preventDefault(),b(k),S(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",P),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),S(!1)),()=>{window.removeEventListener("beforeinstallprompt",P)}},[]),v.useEffect(()=>{const P=window.matchMedia("(prefers-color-scheme: dark)"),k=()=>{P.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return k(),P.addEventListener("change",k),()=>{P.removeEventListener("change",k),document.body.classList.remove("dark-mode")}},[]);const _=v.useCallback(async()=>{if(!x){console.log("Install prompt event not available.");return}const P=x;P.prompt();const{outcome:k}=await P.userChoice;console.log(`User response to the install prompt: ${k}`),b(null),S(!1)},[x]),T=async()=>{if(n)try{(await se(`/api/users/${n.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(a(k=>k?{...k,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...n,has_seen_tutorial:!0})),d(!1)):console.error("Failed to update tutorial status on backend.")}catch(P){console.error("Error marking tutorial as seen:",P)}};return i?r.jsx(km,{}):r.jsx(WW,{clientId:"277898779560-33obduhn8r758rini4qagetdrupvisri.apps.googleusercontent.com",children:r.jsx(_Y,{children:r.jsx(NY,{children:r.jsx(SY,{children:r.jsxs(hY,{children:[r.jsx(wY,{children:r.jsxs(_m,{children:[r.jsx(xt,{path:"/login",element:t?r.jsx(tn,{to:"/dashboard"}):r.jsx(EDe,{onLoginSuccess:f})}),r.jsx(xt,{path:"/register",element:t?r.jsx(tn,{to:"/dashboard"}):r.jsx(PDe,{})}),r.jsx(xt,{path:"/handle-complaint-url",element:t?r.jsx(cRe,{}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/live-api",element:t?r.jsx(Xme,{}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/create-lab-order",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(ZH,{currentUser:n})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/manage-admission",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(PM,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/lab/report/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(DB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/lab/enter-report/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(DB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/add-patient",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(v.Suspense,{fallback:r.jsx(km,{}),children:r.jsx(CD,{})})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/billing",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(lIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-complaint/:recordId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(km,{}),children:r.jsx($B,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-complaint/patient/:patientId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(km,{}),children:r.jsx($B,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-pharmacy-order/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(NG,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/guide",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(j5e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/*",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:E5e(n.role,n,se)}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/lab/view-report/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(xIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/lab/search-report",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(vIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/lab-reports",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(bIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/pharmacy-orders",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(cIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(SG,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/patient-debt",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(PN,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory/add",element:t&&n?r.jsx(tn,{to:"/dashboard/purchase",replace:!0}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/dental",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(T5e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/medical",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(hG,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/dental-billing/:id",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(k5e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory/edit/:id",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(wG,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/lab-inventory",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(OM,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/complaints",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(aIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/admission-bill/:billId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(OB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/admission-billing",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(OB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/start-subscription/:patientId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(IIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/start-clinic-subscription",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx($Ie,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/refill-reminders",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(lRe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/create-custom-bill",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(JH,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/pharmacy-billing/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(WRe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/lab-billing/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(KRe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/doctor-billing/:queueId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(QRe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/custom-tables",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(P4e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/custom-tables/:id",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(D4e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(O4e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/new",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(LB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/:id",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(R4e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/:id/edit",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(LB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/analysis",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(E4e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/clinic-hub",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(ZRe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/files",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(fG,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"*",element:r.jsx(tn,{to:t?"/dashboard":"/login"})})]})}),c&&(n==null?void 0:n.role)==="admin"&&r.jsx(sRe,{onClose:()=>d(!1),onMarkAsSeen:T}),t&&n&&r.jsx(P5e,{user:n}),t&&n&&r.jsx($Pe,{user:n})]})})})})})}const E5e=(t,e,n)=>{switch(t){case"superadmin":return r.jsxs(_m,{children:[r.jsx(xt,{index:!0,element:r.jsx(nRe,{})}),r.jsx(xt,{path:"clinic-subscriptions",element:r.jsx(RIe,{})}),r.jsx(xt,{path:"clinic-subscriptions/add",element:r.jsx(LIe,{})}),r.jsx(xt,{path:"clinic-subscriptions/edit/:id",element:r.jsx(FIe,{})}),r.jsx(xt,{path:"users",element:r.jsx(BIe,{})})," ",r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return r.jsxs(_m,{children:[r.jsx(xt,{index:!0,element:r.jsx(lOe,{})}),r.jsx(xt,{path:"search-patient",element:r.jsx(yv,{})}),r.jsx(xt,{path:"patients",element:r.jsx(wD,{})}),r.jsx(xt,{path:"doctor",element:r.jsx(Hj,{})}),r.jsx(xt,{path:"staff",element:r.jsx(NIe,{fetchWithAuth:n})}),r.jsx(xt,{path:"staff/add",element:r.jsx(nIe,{clinicId:e==null?void 0:e.clinic_id})}),r.jsx(xt,{path:"staff/edit/:id",element:r.jsx(rIe,{})}),r.jsx(xt,{path:"roles",element:r.jsx(L4e,{})}),r.jsx(xt,{path:"patients/add",element:r.jsx(v.Suspense,{fallback:r.jsx(km,{}),children:r.jsx(CD,{})})}),r.jsx(xt,{path:"inventory",element:r.jsx(jG,{})}),r.jsx(xt,{path:"inventory/edit/:id",element:r.jsx(wG,{})}),r.jsx(xt,{path:"distributors",element:r.jsx(MB,{})}),r.jsx(xt,{path:"patient-debts",element:r.jsx(PN,{})})," ",r.jsx(xt,{path:"purchase",element:r.jsx(IB,{})})," ",r.jsx(xt,{path:"queue",element:r.jsx(Hj,{})}),r.jsx(xt,{path:"subscriptions",element:r.jsx(DIe,{})}),r.jsx(xt,{path:"subscriptions/add",element:r.jsx(OIe,{})}),r.jsx(xt,{path:"subscriptions/edit/:id",element:r.jsx(MIe,{})}),r.jsx(xt,{path:"manage-admission",element:r.jsx(PM,{})}),r.jsx(xt,{path:"reception",element:r.jsx(FA,{currentUser:e})}),r.jsx(xt,{path:"lab",element:r.jsx(EB,{})}),r.jsx(xt,{path:"pharmacy-queue",element:r.jsx(qA,{})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return r.jsxs(_m,{children:[r.jsx(xt,{index:!0,element:r.jsx(tn,{to:"search-patient",replace:!0})}),r.jsx(xt,{path:"search-patient",element:r.jsx(yv,{})}),r.jsx(xt,{path:"queue",element:r.jsx(Hj,{})}),r.jsx(xt,{path:":patientId",element:r.jsx(Hj,{})}),r.jsx(xt,{path:"add-patient",element:r.jsx(v.Suspense,{fallback:r.jsx(km,{}),children:r.jsx(CD,{})})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return r.jsxs(_m,{children:[r.jsx(xt,{index:!0,element:r.jsx(FA,{currentUser:e})}),r.jsx(xt,{path:"reception",element:r.jsx(FA,{currentUser:e})})," ",r.jsx(xt,{path:"all-patients",element:r.jsx(wD,{})}),r.jsx(xt,{path:"search-patient",element:r.jsx(yv,{})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return r.jsx(EB,{});case"pharmacy":return r.jsxs(_m,{children:[r.jsx(xt,{index:!0,element:r.jsx(qA,{})}),r.jsx(xt,{path:"pharmacy-queue",element:r.jsx(qA,{})})," ",r.jsx(xt,{path:"inventory",element:r.jsx(SG,{})}),r.jsx(xt,{path:"settings",element:r.jsx(tIe,{})}),r.jsx(xt,{path:"add-order",element:r.jsx(uIe,{})}),r.jsx(xt,{path:"edit-pharmacy-order/:orderId",element:r.jsx(NG,{})}),r.jsx(xt,{path:"orders/:orderId",element:r.jsx(_Ie,{})}),r.jsx(xt,{path:"search-patient-records",element:r.jsx(yv,{})}),r.jsx(xt,{path:"distributors",element:r.jsx(MB,{})}),r.jsx(xt,{path:"patient-debts",element:r.jsx(PN,{})})," ",r.jsx(xt,{path:"purchase",element:r.jsx(IB,{})})," ",r.jsx(xt,{path:"*",element:r.jsx(tn,{to:"/dashboard",replace:!0})})]});default:return r.jsxs("div",{children:["Unknown role (",t,") or dashboard not implemented."]},t)}},Cn=({user:t,onLogout:e,children:n,showInstallPrompt:a,onInstallClick:i,clinicProPlanStatus:s})=>{const o=Lt(),[l,c]=v.useState(!1),[d,f]=v.useState(window.innerWidth<=768),[p,g]=v.useState(null),[x,b]=v.useState(!1);v.useEffect(()=>VE.subscribe(T=>{b(T)}),[]),v.useEffect(()=>{const T=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const C=await se("/api/clinics/settings");if(C.ok){const P=await C.json();g(P.logoUrl)}else console.error("Failed to fetch clinic details for display:",C.statusText),g(null)}catch(C){console.error("Error fetching clinic details for display:",C),g(null)}else g(null)})()},[t==null?void 0:t.clinic_id]);const j=()=>{c(!l)},{toggleCommandBar:S,isOpen:_}=Ic();return r.jsxs("div",{className:"dashboard-layout",children:[" ",r.jsxs("nav",{className:"app-header no-print",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),o("/dashboard")},className:"logo-container",children:r.jsx("img",{src:p||"/logo.png",alt:"App Logo",className:"logo-image"})}),r.jsxs("div",{className:"title-section",children:[r.jsx("span",{className:"app-title-link",children:"Newtons Ai"}),r.jsxs("span",{className:"user-role-panel",children:["(",t.role.charAt(0).toUpperCase()+t.role.slice(1)," Panel)"]})]})]}),r.jsxs("div",{className:"header-right",children:[a&&r.jsxs("button",{onClick:i,className:"install-button",title:"Install App",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{children:"Install"})]}),r.jsxs("a",{href:"https://store.newtons.in",target:"_blank",rel:"noopener noreferrer",className:"shop-button",title:"Visit Store",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),r.jsx("span",{children:"Shop"})]}),!d&&r.jsxs("button",{onClick:()=>o("/dashboard/guide"),className:"guide-button",title:"User Guide",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),r.jsx("span",{children:"Guide"})]}),s&&(s.hasProPlan?r.jsx("span",{className:"pro-badge",children:"PRO"}):r.jsx("button",{onClick:()=>o("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),!_&&r.jsx("button",{onClick:S,className:"command-bar-button",title:"Search & Commands (Ctrl+K)",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("path",{d:"m21 21-4.3-4.3"})]})}),r.jsx("button",{className:"hamburger-icon",onClick:j,"aria-label":"Open navigation",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),x&&r.jsx("div",{className:"global-loading-bar"})]}),r.jsxs("main",{className:"main-content",children:[r.jsx(IDe,{}),n]}),d?r.jsx(ODe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j,roleNavigation:GH}):r.jsx(DDe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j}),!d&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j}),!d&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j})]})},P5e=({user:t})=>{const{isOpen:e,closeAssistant:n}=LN(),a=Lt(),[i,s]=v.useState(null),[o,l]=v.useState([]);return v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const[d,f]=await Promise.all([se("/api/clinics/settings"),se("/api/staff")]);d.ok&&s(await d.json()),f.ok&&l(await f.json())}catch(d){console.error("Failed to fetch initial AI context",d)}})()},[t.clinic_id]),e?r.jsx("div",{className:"ai-assistant-wrapper",children:r.jsx(WH,{onClose:n,settings:i,staffList:o,onSettingsUpdate:()=>{},onStaffUpdate:()=>{},onHighlight:c=>{c.forEach(d=>{if(d.startsWith("navigate_")){const f=d.replace("navigate_","");a(`/dashboard/analysis?section=${f}`)}else{const f=document.getElementById(d);f&&(f.scrollIntoView({behavior:"smooth",block:"center"}),f.classList.add("ai-highlight-glow"),setTimeout(()=>f.classList.remove("ai-highlight-glow"),2e3))}})}})}):null};iW.createRoot(document.getElementById("root")).render(r.jsx(v.StrictMode,{children:r.jsx(EW,{client:UW,children:r.jsx(A5e,{})})}));export{bI as $,on as A,Bz as B,kb as C,cd as D,Im as E,lo as F,x9 as G,Ka as H,COe as I,TOe as J,gc as K,nS as L,wf as M,bf as N,In as O,mJ as P,La as Q,Se as R,te as S,Vn as T,BN as U,SI as V,_G as W,Ft as X,dd as Y,HD as Z,FN as _,Yc as a,oRe as a0,Qz as b,dt as c,vf as d,cs as e,se as f,Wn as g,v9 as h,uRe as i,r as j,ua as k,Hn as l,Jn as m,zD as n,Nf as o,ON as p,Gt as q,v as r,Ic as s,Fa as t,Lt as u,ds as v,$r as w,Ta as x,Go as y,YQ as z};

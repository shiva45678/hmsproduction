import{v as B,j as e,M,o as A}from"./index-DpOfI1um.js";import{r}from"./react-vendor-Cc0P4_ZX.js";import{B as u,R as P,X as p,n as z,o as E,aw as G,d as U}from"./ui-vendor-SmiJk_kJ.js";import"./utils-vendor-azd6ta8e.js";import"./ai-vendor-CB5T-uN5.js";import"./chart-vendor-BcjzKorn.js";const F="_container_c9bhr_3",L="_header_c9bhr_21",$="_titleGroup_c9bhr_41",T="_title_c9bhr_41",q="_closeButton_c9bhr_59",H="_messageList_c9bhr_79",Q="_emptyState_c9bhr_108",X="_emptyStateIcon_c9bhr_119",D="_exampleContainer_c9bhr_145",K="_exampleChip_c9bhr_153",O="_messageRow_c9bhr_176",V="_messageRowUser_c9bhr_194",J="_messageRowModel_c9bhr_198",W="_messageRowSystem_c9bhr_202",Y="_bubble_c9bhr_208",Z="_bubbleUser_c9bhr_224",ee="_bubbleModel_c9bhr_234",se="_bubbleSystem_c9bhr_247",te="_processingIndicator_c9bhr_330",ne="_spin_c9bhr_343",oe="_inputArea_c9bhr_358",ae="_imagePreviewContainer_c9bhr_365",ie="_inputContainer_c9bhr_376",re="_inputField_c9bhr_393",le="_sendButton_c9bhr_407",s={container:F,header:L,titleGroup:$,title:T,closeButton:q,messageList:H,emptyState:Q,emptyStateIcon:X,exampleContainer:D,exampleChip:K,messageRow:O,messageRowUser:V,messageRowModel:J,messageRowSystem:W,bubble:Y,bubbleUser:Z,bubbleModel:ee,bubbleSystem:se,processingIndicator:te,spin:ne,inputArea:oe,imagePreviewContainer:ae,inputContainer:ie,inputField:re,sendButton:le},pe=({onClose:_,settings:x,staffList:g,onSettingsUpdate:y,onStaffUpdate:j,onHighlight:C})=>{const{chatQuery:l,setChatQuery:c,chatHistory:a,isProcessing:n,handleSendMessage:d,refreshChat:w,stopGeneration:R,selectedImage:i,handleImageSelect:f,clearImage:v}=B({settings:x,staffList:g,onSettingsUpdate:y,onStaffUpdate:j,onHighlight:C}),m=r.useRef(null),h=r.useRef(null),S=()=>{var t;(t=m.current)==null||t.scrollIntoView({behavior:"smooth"})};r.useEffect(()=>{S()},[a,n]);const N=t=>{var b;const o=(b=t.target.files)==null?void 0:b[0];o&&f(o)},k=["Check Paracetamol stock","Go to Pharmacy","Analysis for last month","Add nurse Sarah"],I=t=>{c(t)};return e.jsxs("div",{className:s.container,children:[e.jsxs("header",{className:s.header,children:[e.jsxs("div",{className:s.titleGroup,children:[e.jsx(u,{size:20,className:"text-violet-600"}),e.jsx("h3",{className:s.title,children:"Clinic Assistant"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:w,className:s.closeButton,title:"Refresh Chat",children:e.jsx(P,{size:18})}),e.jsx("button",{onClick:_,className:s.closeButton,title:"Close",children:e.jsx(p,{size:20})})]})]}),e.jsxs("div",{className:s.messageList,children:[a.length===0&&e.jsxs("div",{className:s.emptyState,children:[e.jsx(u,{size:48,className:s.emptyStateIcon}),e.jsx("p",{children:"How can I help you manage the clinic today?"}),e.jsx("div",{className:s.exampleContainer,children:k.map((t,o)=>e.jsx("button",{className:s.exampleChip,onClick:()=>I(t),children:t},o))})]}),a.map((t,o)=>e.jsx("div",{className:`${s.messageRow} ${t.role==="user"?s.messageRowUser:t.role==="model"?s.messageRowModel:s.messageRowSystem}`,children:e.jsx("div",{className:`${s.bubble} ${t.role==="user"?s.bubbleUser:t.role==="model"?s.bubbleModel:s.bubbleSystem}`,children:t.role==="user"||t.role==="system"?t.text:e.jsx(M,{remarkPlugins:[A],children:t.text})})},o)),n&&e.jsx("div",{className:`${s.messageRow} ${s.messageRowModel}`,children:e.jsxs("div",{className:s.processingIndicator,children:[e.jsx(z,{size:14,className:s.spin}),"Thinking..."]})}),e.jsx("div",{ref:m})]}),e.jsxs("div",{className:s.inputArea,children:[i&&e.jsxs("div",{className:s.imagePreviewContainer,style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",overflow:"hidden"},children:[e.jsx("img",{src:i,alt:"Selected",style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx("button",{onClick:v,style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.5)",color:"white",border:"none",cursor:"pointer",padding:"1px"},children:e.jsx(p,{size:12})})]}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Image attached"})]}),e.jsxs("div",{className:s.inputContainer,children:[e.jsx("input",{type:"file",ref:h,onChange:N,accept:"image/*",style:{display:"none"}}),e.jsx("button",{className:s.sendButton,onClick:()=>{var t;return(t=h.current)==null?void 0:t.click()},disabled:n,title:"Attach Image",style:{marginRight:"0.5rem",color:"#6b7280"},children:e.jsx(E,{size:18})}),e.jsx("input",{type:"text",className:s.inputField,placeholder:"Type your request...",value:l,onChange:t=>c(t.target.value),onKeyDown:t=>t.key==="Enter"&&!n&&d(),disabled:n,autoFocus:!0}),n?e.jsx("button",{className:s.sendButton,onClick:R,title:"Stop Generating",style:{color:"#ef4444"},children:e.jsx(G,{size:18,fill:"currentColor"})}):e.jsx("button",{className:s.sendButton,onClick:()=>d(),disabled:!l.trim()&&!i,children:e.jsx(U,{size:18})})]})]})]})};export{pe as default};

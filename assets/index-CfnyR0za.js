const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditComplaintPage-D5HRWji7.js","assets/EditComplaintPage-CcMBOQ67.css","assets/AddPatientPage-DUwF_Rqh.js","assets/AddPatientPage-CvaX_3Vg.css"])))=>i.map(i=>d[i]);
var uK=Object.defineProperty;var xI=e=>{throw TypeError(e)};var dK=(e,t,n)=>t in e?uK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xr=(e,t,n)=>dK(e,typeof t!="symbol"?t+"":t,n),yC=(e,t,n)=>t.has(e)||xI("Cannot "+n);var De=(e,t,n)=>(yC(e,t,"read from private field"),n?n.call(e):t.get(e)),zt=(e,t,n)=>t.has(e)?xI("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Pt=(e,t,n,i)=>(yC(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),bn=(e,t,n)=>(yC(e,t,"access private method"),n);var Cj=(e,t,n,i)=>({set _(a){Pt(e,t,a,n)},get _(){return De(e,t,i)}});function hK(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xC={exports:{}},Xx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vI;function fK(){if(vI)return Xx;vI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:e,type:i,key:o,ref:a!==void 0?a:null,props:s}}return Xx.Fragment=t,Xx.jsx=n,Xx.jsxs=n,Xx}var bI;function pK(){return bI||(bI=1,xC.exports=fK()),xC.exports}var r=pK(),vC={exports:{}},gn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jI;function mK(){if(jI)return gn;jI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,j={};function w(z,le,je){this.props=z,this.context=le,this.refs=j,this.updater=je||x}w.prototype.isReactComponent={},w.prototype.setState=function(z,le){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,le,"setState")},w.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function _(){}_.prototype=w.prototype;function T(z,le,je){this.props=z,this.context=le,this.refs=j,this.updater=je||x}var C=T.prototype=new _;C.constructor=T,v(C,w.prototype),C.isPureReactComponent=!0;var O=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function I(z,le,je,Y,Oe,Ke){return je=Ke.ref,{$$typeof:e,type:z,key:le,ref:je!==void 0?je:null,props:Ke}}function F(z,le){return I(z.type,le,void 0,void 0,void 0,z.props)}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function $(z){var le={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(je){return le[je]})}var L=/\/+/g;function V(z,le){return typeof z=="object"&&z!==null&&z.key!=null?$(""+z.key):le.toString(36)}function H(){}function te(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(H,H):(z.status="pending",z.then(function(le){z.status==="pending"&&(z.status="fulfilled",z.value=le)},function(le){z.status==="pending"&&(z.status="rejected",z.reason=le)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function X(z,le,je,Y,Oe){var Ke=typeof z;(Ke==="undefined"||Ke==="boolean")&&(z=null);var Me=!1;if(z===null)Me=!0;else switch(Ke){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(z.$$typeof){case e:case t:Me=!0;break;case f:return Me=z._init,X(Me(z._payload),le,je,Y,Oe)}}if(Me)return Oe=Oe(z),Me=Y===""?"."+V(z,0):Y,O(Oe)?(je="",Me!=null&&(je=Me.replace(L,"$&/")+"/"),X(Oe,le,je,"",function(re){return re})):Oe!=null&&(B(Oe)&&(Oe=F(Oe,je+(Oe.key==null||z&&z.key===Oe.key?"":(""+Oe.key).replace(L,"$&/")+"/")+Me)),le.push(Oe)),1;Me=0;var Ie=Y===""?".":Y+":";if(O(z))for(var be=0;be<z.length;be++)Y=z[be],Ke=Ie+V(Y,be),Me+=X(Y,le,je,Ke,Oe);else if(be=g(z),typeof be=="function")for(z=be.call(z),be=0;!(Y=z.next()).done;)Y=Y.value,Ke=Ie+V(Y,be++),Me+=X(Y,le,je,Ke,Oe);else if(Ke==="object"){if(typeof z.then=="function")return X(te(z),le,je,Y,Oe);throw le=String(z),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Me}function q(z,le,je){if(z==null)return z;var Y=[],Oe=0;return X(z,Y,"","",function(Ke){return le.call(je,Ke,Oe++)}),Y}function W(z){if(z._status===-1){var le=z._result;le=le(),le.then(function(je){(z._status===0||z._status===-1)&&(z._status=1,z._result=je)},function(je){(z._status===0||z._status===-1)&&(z._status=2,z._result=je)}),z._status===-1&&(z._status=0,z._result=le)}if(z._status===1)return z._result.default;throw z._result}var ae=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function G(){}return gn.Children={map:q,forEach:function(z,le,je){q(z,function(){le.apply(this,arguments)},je)},count:function(z){var le=0;return q(z,function(){le++}),le},toArray:function(z){return q(z,function(le){return le})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},gn.Component=w,gn.Fragment=n,gn.Profiler=a,gn.PureComponent=T,gn.StrictMode=i,gn.Suspense=c,gn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,gn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return A.H.useMemoCache(z)}},gn.cache=function(z){return function(){return z.apply(null,arguments)}},gn.cloneElement=function(z,le,je){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Y=v({},z.props),Oe=z.key,Ke=void 0;if(le!=null)for(Me in le.ref!==void 0&&(Ke=void 0),le.key!==void 0&&(Oe=""+le.key),le)!P.call(le,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&le.ref===void 0||(Y[Me]=le[Me]);var Me=arguments.length-2;if(Me===1)Y.children=je;else if(1<Me){for(var Ie=Array(Me),be=0;be<Me;be++)Ie[be]=arguments[be+2];Y.children=Ie}return I(z.type,Oe,void 0,void 0,Ke,Y)},gn.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},gn.createElement=function(z,le,je){var Y,Oe={},Ke=null;if(le!=null)for(Y in le.key!==void 0&&(Ke=""+le.key),le)P.call(le,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(Oe[Y]=le[Y]);var Me=arguments.length-2;if(Me===1)Oe.children=je;else if(1<Me){for(var Ie=Array(Me),be=0;be<Me;be++)Ie[be]=arguments[be+2];Oe.children=Ie}if(z&&z.defaultProps)for(Y in Me=z.defaultProps,Me)Oe[Y]===void 0&&(Oe[Y]=Me[Y]);return I(z,Ke,void 0,void 0,null,Oe)},gn.createRef=function(){return{current:null}},gn.forwardRef=function(z){return{$$typeof:l,render:z}},gn.isValidElement=B,gn.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:W}},gn.memo=function(z,le){return{$$typeof:u,type:z,compare:le===void 0?null:le}},gn.startTransition=function(z){var le=A.T,je={};A.T=je;try{var Y=z(),Oe=A.S;Oe!==null&&Oe(je,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(G,ae)}catch(Ke){ae(Ke)}finally{A.T=le}},gn.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},gn.use=function(z){return A.H.use(z)},gn.useActionState=function(z,le,je){return A.H.useActionState(z,le,je)},gn.useCallback=function(z,le){return A.H.useCallback(z,le)},gn.useContext=function(z){return A.H.useContext(z)},gn.useDebugValue=function(){},gn.useDeferredValue=function(z,le){return A.H.useDeferredValue(z,le)},gn.useEffect=function(z,le,je){var Y=A.H;if(typeof je=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(z,le)},gn.useId=function(){return A.H.useId()},gn.useImperativeHandle=function(z,le,je){return A.H.useImperativeHandle(z,le,je)},gn.useInsertionEffect=function(z,le){return A.H.useInsertionEffect(z,le)},gn.useLayoutEffect=function(z,le){return A.H.useLayoutEffect(z,le)},gn.useMemo=function(z,le){return A.H.useMemo(z,le)},gn.useOptimistic=function(z,le){return A.H.useOptimistic(z,le)},gn.useReducer=function(z,le,je){return A.H.useReducer(z,le,je)},gn.useRef=function(z){return A.H.useRef(z)},gn.useState=function(z){return A.H.useState(z)},gn.useSyncExternalStore=function(z,le,je){return A.H.useSyncExternalStore(z,le,je)},gn.useTransition=function(){return A.H.useTransition()},gn.version="19.1.0",gn}var wI;function oD(){return wI||(wI=1,vC.exports=mK()),vC.exports}var b=oD();const Se=qn(b),SI=hK({__proto__:null,default:Se},[b]);var bC={exports:{}},Jx={},jC={exports:{}},wC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NI;function gK(){return NI||(NI=1,function(e){function t(q,W){var ae=q.length;q.push(W);e:for(;0<ae;){var G=ae-1>>>1,z=q[G];if(0<a(z,W))q[G]=W,q[ae]=z,ae=G;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var W=q[0],ae=q.pop();if(ae!==W){q[0]=ae;e:for(var G=0,z=q.length,le=z>>>1;G<le;){var je=2*(G+1)-1,Y=q[je],Oe=je+1,Ke=q[Oe];if(0>a(Y,ae))Oe<z&&0>a(Ke,Y)?(q[G]=Ke,q[Oe]=ae,G=Oe):(q[G]=Y,q[je]=ae,G=je);else if(Oe<z&&0>a(Ke,ae))q[G]=Ke,q[Oe]=ae,G=Oe;else break e}}return W}function a(q,W){var ae=q.sortIndex-W.sortIndex;return ae!==0?ae:q.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,p=null,g=3,x=!1,v=!1,j=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(q){for(var W=n(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=q)i(u),W.sortIndex=W.expirationTime,t(c,W);else break;W=n(u)}}function A(q){if(j=!1,O(q),!v)if(n(c)!==null)v=!0,P||(P=!0,V());else{var W=n(u);W!==null&&X(A,W.startTime-q)}}var P=!1,I=-1,F=5,B=-1;function $(){return w?!0:!(e.unstable_now()-B<F)}function L(){if(w=!1,P){var q=e.unstable_now();B=q;var W=!0;try{e:{v=!1,j&&(j=!1,T(I),I=-1),x=!0;var ae=g;try{t:{for(O(q),p=n(c);p!==null&&!(p.expirationTime>q&&$());){var G=p.callback;if(typeof G=="function"){p.callback=null,g=p.priorityLevel;var z=G(p.expirationTime<=q);if(q=e.unstable_now(),typeof z=="function"){p.callback=z,O(q),W=!0;break t}p===n(c)&&i(c),O(q)}else i(c);p=n(c)}if(p!==null)W=!0;else{var le=n(u);le!==null&&X(A,le.startTime-q),W=!1}}break e}finally{p=null,g=ae,x=!1}W=void 0}}finally{W?V():P=!1}}}var V;if(typeof C=="function")V=function(){C(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,te=H.port2;H.port1.onmessage=L,V=function(){te.postMessage(null)}}else V=function(){_(L,0)};function X(q,W){I=_(function(){q(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(q){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var ae=g;g=W;try{return q()}finally{g=ae}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ae=g;g=q;try{return W()}finally{g=ae}},e.unstable_scheduleCallback=function(q,W,ae){var G=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?G+ae:G):ae=G,q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ae+z,q={id:f++,callback:W,priorityLevel:q,startTime:ae,expirationTime:z,sortIndex:-1},ae>G?(q.sortIndex=ae,t(u,q),n(c)===null&&q===n(u)&&(j?(T(I),I=-1):j=!0,X(A,ae-G))):(q.sortIndex=z,t(c,q),v||x||(v=!0,P||(P=!0,V()))),q},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(q){var W=g;return function(){var ae=g;g=W;try{return q.apply(this,arguments)}finally{g=ae}}}}(wC)),wC}var _I;function yK(){return _I||(_I=1,jC.exports=gK()),jC.exports}var SC={exports:{}},aa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CI;function xK(){if(CI)return aa;CI=1;var e=oD();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:u,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return aa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,aa.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,f)},aa.flushSync=function(c){var u=o.T,f=i.p;try{if(o.T=null,i.p=2,c)return c()}finally{o.T=u,i.p=f,i.d.f()}},aa.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(c,u))},aa.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},aa.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,p=l(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?i.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:x}):f==="script"&&i.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},aa.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=l(u.as,u.crossOrigin);i.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(c)},aa.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,p=l(f,u.crossOrigin);i.d.L(c,f,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},aa.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=l(u.as,u.crossOrigin);i.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(c)},aa.requestFormReset=function(c){i.d.r(c)},aa.unstable_batchedUpdates=function(c,u){return c(u)},aa.useFormState=function(c,u,f){return o.H.useFormState(c,u,f)},aa.useFormStatus=function(){return o.H.useHostTransitionStatus()},aa.version="19.1.0",aa}var TI;function Wz(){if(TI)return SC.exports;TI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),SC.exports=xK(),SC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AI;function vK(){if(AI)return Jx;AI=1;var e=yK(),t=oD(),n=Wz();function i(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function s(d){var h=d,m=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(m=h.return),d=h.return;while(d)}return h.tag===3?m:null}function o(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function l(d){if(s(d)!==d)throw Error(i(188))}function c(d){var h=d.alternate;if(!h){if(h=s(d),h===null)throw Error(i(188));return h!==d?null:d}for(var m=d,N=h;;){var E=m.return;if(E===null)break;var R=E.alternate;if(R===null){if(N=E.return,N!==null){m=N;continue}break}if(E.child===R.child){for(R=E.child;R;){if(R===m)return l(E),d;if(R===N)return l(E),h;R=R.sibling}throw Error(i(188))}if(m.return!==N.return)m=E,N=R;else{for(var J=!1,he=E.child;he;){if(he===m){J=!0,m=E,N=R;break}if(he===N){J=!0,N=E,m=R;break}he=he.sibling}if(!J){for(he=R.child;he;){if(he===m){J=!0,m=R,N=E;break}if(he===N){J=!0,N=R,m=E;break}he=he.sibling}if(!J)throw Error(i(189))}}if(m.alternate!==N)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?d:h}function u(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d;for(d=d.child;d!==null;){if(h=u(d),h!==null)return h;d=d.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function V(d){return d===null||typeof d!="object"?null:(d=L&&d[L]||d["@@iterator"],typeof d=="function"?d:null)}var H=Symbol.for("react.client.reference");function te(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===H?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case v:return"Fragment";case w:return"Profiler";case j:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList";case B:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case x:return"Portal";case C:return(d.displayName||"Context")+".Provider";case T:return(d._context.displayName||"Context")+".Consumer";case O:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case I:return h=d.displayName||null,h!==null?h:te(d.type)||"Memo";case F:h=d._payload,d=d._init;try{return te(d(h))}catch{}}return null}var X=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},G=[],z=-1;function le(d){return{current:d}}function je(d){0>z||(d.current=G[z],G[z]=null,z--)}function Y(d,h){z++,G[z]=d.current,d.current=h}var Oe=le(null),Ke=le(null),Me=le(null),Ie=le(null);function be(d,h){switch(Y(Me,h),Y(Ke,d),Y(Oe,null),h.nodeType){case 9:case 11:d=(d=h.documentElement)&&(d=d.namespaceURI)?Or(d):0;break;default:if(d=h.tagName,h=h.namespaceURI)h=Or(h),d=Lr(h,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}je(Oe),Y(Oe,d)}function re(){je(Oe),je(Ke),je(Me)}function ve(d){d.memoizedState!==null&&Y(Ie,d);var h=Oe.current,m=Lr(h,d.type);h!==m&&(Y(Ke,d),Y(Oe,m))}function ce(d){Ke.current===d&&(je(Oe),je(Ke)),Ie.current===d&&(je(Ie),Hu._currentValue=ae)}var fe=Object.prototype.hasOwnProperty,se=e.unstable_scheduleCallback,Q=e.unstable_cancelCallback,ie=e.unstable_shouldYield,ge=e.unstable_requestPaint,ee=e.unstable_now,we=e.unstable_getCurrentPriorityLevel,Ue=e.unstable_ImmediatePriority,Ge=e.unstable_UserBlockingPriority,Le=e.unstable_NormalPriority,oe=e.unstable_LowPriority,_e=e.unstable_IdlePriority,$e=e.log,ze=e.unstable_setDisableYieldValue,K=null,ye=null;function pe(d){if(typeof $e=="function"&&ze(d),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(K,d)}catch{}}var me=Math.clz32?Math.clz32:ke,Ne=Math.log,Be=Math.LN2;function ke(d){return d>>>=0,d===0?32:31-(Ne(d)/Be|0)|0}var Ye=256,rt=4194304;function gt(d){var h=d&42;if(h!==0)return h;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function Pe(d,h,m){var N=d.pendingLanes;if(N===0)return 0;var E=0,R=d.suspendedLanes,J=d.pingedLanes;d=d.warmLanes;var he=N&134217727;return he!==0?(N=he&~R,N!==0?E=gt(N):(J&=he,J!==0?E=gt(J):m||(m=he&~d,m!==0&&(E=gt(m))))):(he=N&~R,he!==0?E=gt(he):J!==0?E=gt(J):m||(m=N&~d,m!==0&&(E=gt(m)))),E===0?0:h!==0&&h!==E&&(h&R)===0&&(R=E&-E,m=h&-h,R>=m||R===32&&(m&4194048)!==0)?h:E}function Je(d,h){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&h)===0}function et(d,h){switch(d){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dt(){var d=Ye;return Ye<<=1,(Ye&4194048)===0&&(Ye=256),d}function Ct(){var d=rt;return rt<<=1,(rt&62914560)===0&&(rt=4194304),d}function bt(d){for(var h=[],m=0;31>m;m++)h.push(d);return h}function Ce(d,h){d.pendingLanes|=h,h!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function ct(d,h,m,N,E,R){var J=d.pendingLanes;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=m,d.entangledLanes&=m,d.errorRecoveryDisabledLanes&=m,d.shellSuspendCounter=0;var he=d.entanglements,Ae=d.expirationTimes,Xe=d.hiddenUpdates;for(m=J&~m;0<m;){var lt=31-me(m),pt=1<<lt;he[lt]=0,Ae[lt]=-1;var tt=Xe[lt];if(tt!==null)for(Xe[lt]=null,lt=0;lt<tt.length;lt++){var Ze=tt[lt];Ze!==null&&(Ze.lane&=-536870913)}m&=~pt}N!==0&&At(d,N,0),R!==0&&E===0&&d.tag!==0&&(d.suspendedLanes|=R&~(J&~h))}function At(d,h,m){d.pendingLanes|=h,d.suspendedLanes&=~h;var N=31-me(h);d.entangledLanes|=h,d.entanglements[N]=d.entanglements[N]|1073741824|m&4194090}function qe(d,h){var m=d.entangledLanes|=h;for(d=d.entanglements;m;){var N=31-me(m),E=1<<N;E&h|d[N]&h&&(d[N]|=h),m&=~E}}function wt(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function Tt(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Xn(){var d=W.p;return d!==0?d:(d=window.event,d===void 0?32:bj(d.type))}function wr(d,h){var m=W.p;try{return W.p=d,h()}finally{W.p=m}}var Un=Math.random().toString(36).slice(2),Tn="__reactFiber$"+Un,Nn="__reactProps$"+Un,ui="__reactContainer$"+Un,Vn="__reactEvents$"+Un,Hi="__reactListeners$"+Un,Hl="__reactHandles$"+Un,Ho="__reactResources$"+Un,Gl="__reactMarker$"+Un;function Od(d){delete d[Tn],delete d[Nn],delete d[Vn],delete d[Hi],delete d[Hl]}function Go(d){var h=d[Tn];if(h)return h;for(var m=d.parentNode;m;){if(h=m[ui]||m[Tn]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(d=lj(d);d!==null;){if(m=d[Tn])return m;d=lj(d)}return h}d=m,m=d.parentNode}return null}function at(d){if(d=d[Tn]||d[ui]){var h=d.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return d}return null}function Nt(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d.stateNode;throw Error(i(33))}function _t(d){var h=d[Ho];return h||(h=d[Ho]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Rt(d){d[Gl]=!0}var jn=new Set,Mn={};function bi(d,h){ga(d,h),ga(d+"Capture",h)}function ga(d,h){for(Mn[d]=h,d=0;d<h.length;d++)jn.add(h[d])}var lo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dd={},Md={};function h_(d){return fe.call(Md,d)?!0:fe.call(Dd,d)?!1:lo.test(d)?Md[d]=!0:(Dd[d]=!0,!1)}function Wf(d,h,m){if(h_(h))if(m===null)d.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":d.removeAttribute(h);return;case"boolean":var N=h.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){d.removeAttribute(h);return}}d.setAttribute(h,""+m)}}function Kf(d,h,m){if(m===null)d.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(h);return}d.setAttribute(h,""+m)}}function Rs(d,h,m,N){if(N===null)d.removeAttribute(m);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(m);return}d.setAttributeNS(h,m,""+N)}}var Yf,sy;function tu(d){if(Yf===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);Yf=h&&h[1]||"",sy=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yf+d+sy}var oy=!1;function ly(d,h){if(!d||oy)return"";oy=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(h){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(Ze){var tt=Ze}Reflect.construct(d,[],pt)}else{try{pt.call()}catch(Ze){tt=Ze}d.call(pt.prototype)}}else{try{throw Error()}catch(Ze){tt=Ze}(pt=d())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(Ze){if(Ze&&tt&&typeof Ze.stack=="string")return[Ze.stack,tt.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=N.DetermineComponentFrameRoot(),J=R[0],he=R[1];if(J&&he){var Ae=J.split(`
`),Xe=he.split(`
`);for(E=N=0;N<Ae.length&&!Ae[N].includes("DetermineComponentFrameRoot");)N++;for(;E<Xe.length&&!Xe[E].includes("DetermineComponentFrameRoot");)E++;if(N===Ae.length||E===Xe.length)for(N=Ae.length-1,E=Xe.length-1;1<=N&&0<=E&&Ae[N]!==Xe[E];)E--;for(;1<=N&&0<=E;N--,E--)if(Ae[N]!==Xe[E]){if(N!==1||E!==1)do if(N--,E--,0>E||Ae[N]!==Xe[E]){var lt=`
`+Ae[N].replace(" at new "," at ");return d.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",d.displayName)),lt}while(1<=N&&0<=E);break}}}finally{oy=!1,Error.prepareStackTrace=m}return(m=d?d.displayName||d.name:"")?tu(m):""}function f_(d){switch(d.tag){case 26:case 27:case 5:return tu(d.type);case 16:return tu("Lazy");case 13:return tu("Suspense");case 19:return tu("SuspenseList");case 0:case 15:return ly(d.type,!1);case 11:return ly(d.type.render,!1);case 1:return ly(d.type,!0);case 31:return tu("Activity");default:return""}}function cy(d){try{var h="";do h+=f_(d),d=d.return;while(d);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function ya(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function uy(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function dy(d){var h=uy(d)?"checked":"value",m=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),N=""+d[h];if(!d.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,R=m.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return E.call(this)},set:function(J){N=""+J,R.call(this,J)}}),Object.defineProperty(d,h,{enumerable:m.enumerable}),{getValue:function(){return N},setValue:function(J){N=""+J},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function Qf(d){d._valueTracker||(d._valueTracker=dy(d))}function hy(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var m=h.getValue(),N="";return d&&(N=uy(d)?d.checked?"true":"false":d.value),d=N,d!==m?(h.setValue(d),!0):!1}function Wl(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var c0=/[\n"\\]/g;function za(d){return d.replace(c0,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Xf(d,h,m,N,E,R,J,he){d.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?d.type=J:d.removeAttribute("type"),h!=null?J==="number"?(h===0&&d.value===""||d.value!=h)&&(d.value=""+ya(h)):d.value!==""+ya(h)&&(d.value=""+ya(h)):J!=="submit"&&J!=="reset"||d.removeAttribute("value"),h!=null?Id(d,J,ya(h)):m!=null?Id(d,J,ya(m)):N!=null&&d.removeAttribute("value"),E==null&&R!=null&&(d.defaultChecked=!!R),E!=null&&(d.checked=E&&typeof E!="function"&&typeof E!="symbol"),he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?d.name=""+ya(he):d.removeAttribute("name")}function fy(d,h,m,N,E,R,J,he){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(d.type=R),h!=null||m!=null){if(!(R!=="submit"&&R!=="reset"||h!=null))return;m=m!=null?""+ya(m):"",h=h!=null?""+ya(h):m,he||h===d.value||(d.value=h),d.defaultValue=h}N=N??E,N=typeof N!="function"&&typeof N!="symbol"&&!!N,d.checked=he?d.checked:!!N,d.defaultChecked=!!N,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(d.name=J)}function Id(d,h,m){h==="number"&&Wl(d.ownerDocument)===d||d.defaultValue===""+m||(d.defaultValue=""+m)}function nu(d,h,m,N){if(d=d.options,h){h={};for(var E=0;E<m.length;E++)h["$"+m[E]]=!0;for(m=0;m<d.length;m++)E=h.hasOwnProperty("$"+d[m].value),d[m].selected!==E&&(d[m].selected=E),E&&N&&(d[m].defaultSelected=!0)}else{for(m=""+ya(m),h=null,E=0;E<d.length;E++){if(d[E].value===m){d[E].selected=!0,N&&(d[E].defaultSelected=!0);return}h!==null||d[E].disabled||(h=d[E])}h!==null&&(h.selected=!0)}}function py(d,h,m){if(h!=null&&(h=""+ya(h),h!==d.value&&(d.value=h),m==null)){d.defaultValue!==h&&(d.defaultValue=h);return}d.defaultValue=m!=null?""+ya(m):""}function Jf(d,h,m,N){if(h==null){if(N!=null){if(m!=null)throw Error(i(92));if(X(N)){if(1<N.length)throw Error(i(93));N=N[0]}m=N}m==null&&(m=""),h=m}m=ya(h),d.defaultValue=m,N=d.textContent,N===m&&N!==""&&N!==null&&(d.value=N)}function Wo(d,h){if(h){var m=d.firstChild;if(m&&m===d.lastChild&&m.nodeType===3){m.nodeValue=h;return}}d.textContent=h}var ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function my(d,h,m){var N=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?N?d.setProperty(h,""):h==="float"?d.cssFloat="":d[h]="":N?d.setProperty(h,m):typeof m!="number"||m===0||ru.has(h)?h==="float"?d.cssFloat=m:d[h]=(""+m).trim():d[h]=m+"px"}function gy(d,h,m){if(h!=null&&typeof h!="object")throw Error(i(62));if(d=d.style,m!=null){for(var N in m)!m.hasOwnProperty(N)||h!=null&&h.hasOwnProperty(N)||(N.indexOf("--")===0?d.setProperty(N,""):N==="float"?d.cssFloat="":d[N]="");for(var E in h)N=h[E],h.hasOwnProperty(E)&&m[E]!==N&&my(d,E,N)}else for(var R in h)h.hasOwnProperty(R)&&my(d,R,h[R])}function yy(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),d0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rd(d){return d0.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var Zf=null;function xy(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var iu=null,au=null;function vy(d){var h=at(d);if(h&&(d=h.stateNode)){var m=d[Nn]||null;e:switch(d=h.stateNode,h.type){case"input":if(Xf(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=d;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+za(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var N=m[h];if(N!==d&&N.form===d.form){var E=N[Nn]||null;if(!E)throw Error(i(90));Xf(N,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(h=0;h<m.length;h++)N=m[h],N.form===d.form&&hy(N)}break e;case"textarea":py(d,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&nu(d,!!m.multiple,h,!1)}}}var by=!1;function h0(d,h,m){if(by)return d(h,m);by=!0;try{var N=d(h);return N}finally{if(by=!1,(iu!==null||au!==null)&&(Zp(),iu&&(h=iu,d=au,au=iu=null,vy(h),d)))for(h=0;h<d.length;h++)vy(d[h])}}function Ld(d,h){var m=d.stateNode;if(m===null)return null;var N=m[Nn]||null;if(N===null)return null;m=N[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(d=d.type,N=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!N;break e;default:d=!1}if(d)return null;if(m&&typeof m!="function")throw Error(i(231,h,typeof m));return m}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fd=!1;if(co)try{var $d={};Object.defineProperty($d,"passive",{get:function(){Fd=!0}}),window.addEventListener("test",$d,$d),window.removeEventListener("test",$d,$d)}catch{Fd=!1}var Ko=null,jy=null,ep=null;function f0(){if(ep)return ep;var d,h=jy,m=h.length,N,E="value"in Ko?Ko.value:Ko.textContent,R=E.length;for(d=0;d<m&&h[d]===E[d];d++);var J=m-d;for(N=1;N<=J&&h[m-N]===E[R-N];N++);return ep=E.slice(d,1<N?1-N:void 0)}function ir(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function Jn(){return!0}function p0(){return!1}function Gi(d){function h(m,N,E,R,J){this._reactName=m,this._targetInst=E,this.type=N,this.nativeEvent=R,this.target=J,this.currentTarget=null;for(var he in d)d.hasOwnProperty(he)&&(m=d[he],this[he]=m?m(R):R[he]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Jn:p0,this.isPropagationStopped=p0,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),h}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=Gi(Kl),Bd=f({},Kl,{view:0,detail:0}),p_=Gi(Bd),np,wy,Wr,su=f({},Bd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Wr&&(Wr&&d.type==="mousemove"?(np=d.screenX-Wr.screenX,wy=d.screenY-Wr.screenY):wy=np=0,Wr=d),np)},movementY:function(d){return"movementY"in d?d.movementY:wy}}),Yo=Gi(su),m0=f({},su,{dataTransfer:0}),Sy=Gi(m0),qa=f({},Bd,{relatedTarget:0}),rp=Gi(qa),g0=f({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),y0=Gi(g0),x0=f({},Kl,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),v0=Gi(x0),b0=f({},Kl,{data:0}),Wi=Gi(b0),m_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ua={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j0(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=g_[d])?!!h[d]:!1}function Ls(){return j0}var ip=f({},Bd,{key:function(d){if(d.key){var h=m_[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=ir(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Ua[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(d){return d.type==="keypress"?ir(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?ir(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Ny=Gi(ip),Ar=f({},su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uo=Gi(Ar),_y=f({},Bd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),y_=Gi(_y),Cy=f({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),x_=Gi(Cy),v_=f({},su,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),b_=Gi(v_),w0=f({},Kl,{newState:0,oldState:0}),ap=Gi(w0),ou=[9,13,27,32],Ty=co&&"CompositionEvent"in window,lu=null;co&&"documentMode"in document&&(lu=document.documentMode);var S0=co&&"TextEvent"in window&&!lu,sp=co&&(!Ty||lu&&8<lu&&11>=lu),op=" ",Ay=!1;function N0(d,h){switch(d){case"keyup":return ou.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lp(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Qo=!1;function j_(d,h){switch(d){case"compositionend":return lp(h);case"keypress":return h.which!==32?null:(Ay=!0,op);case"textInput":return d=h.data,d===op&&Ay?null:d;default:return null}}function _0(d,h){if(Qo)return d==="compositionend"||!Ty&&N0(d,h)?(d=f0(),ep=jy=Ko=null,Qo=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return sp&&h.locale!=="ko"?null:h.data;default:return null}}var xa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cp(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!xa[d.type]:h==="textarea"}function cu(d,h,m,N){iu?au?au.push(N):au=[N]:iu=N,h=sm(h,"onChange"),0<h.length&&(m=new tp("onChange","change",null,m,N),d.push({event:m,listeners:h}))}var uu=null,du=null;function w_(d){ej(d,0)}function up(d){var h=Nt(d);if(hy(h))return d}function C0(d,h){if(d==="change")return h}var T0=!1;if(co){var Ey;if(co){var Xo="oninput"in document;if(!Xo){var A0=document.createElement("div");A0.setAttribute("oninput","return;"),Xo=typeof A0.oninput=="function"}Ey=Xo}else Ey=!1;T0=Ey&&(!document.documentMode||9<document.documentMode)}function E0(){uu&&(uu.detachEvent("onpropertychange",dp),du=uu=null)}function dp(d){if(d.propertyName==="value"&&up(du)){var h=[];cu(h,du,d,xy(d)),h0(w_,h)}}function k0(d,h,m){d==="focusin"?(E0(),uu=h,du=m,uu.attachEvent("onpropertychange",dp)):d==="focusout"&&E0()}function Jo(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return up(du)}function hp(d,h){if(d==="click")return up(h)}function S_(d,h){if(d==="input"||d==="change")return up(h)}function N_(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var va=typeof Object.is=="function"?Object.is:N_;function Fs(d,h){if(va(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var m=Object.keys(d),N=Object.keys(h);if(m.length!==N.length)return!1;for(N=0;N<m.length;N++){var E=m[N];if(!fe.call(h,E)||!va(d[E],h[E]))return!1}return!0}function Va(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function ky(d,h){var m=Va(d);d=0;for(var N;m;){if(m.nodeType===3){if(N=d+m.textContent.length,d<=h&&N>=h)return{node:m,offset:h-d};d=N}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Va(m)}}function P0(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?P0(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function O0(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var h=Wl(d.document);h instanceof d.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)d=h.contentWindow;else break;h=Wl(d.document)}return h}function Py(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}var __=co&&"documentMode"in document&&11>=document.documentMode,hu=null,Zo=null,Ve=null,st=!1;function nt(d,h,m){var N=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;st||hu==null||hu!==Wl(N)||(N=hu,"selectionStart"in N&&Py(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Ve&&Fs(Ve,N)||(Ve=N,N=sm(Zo,"onSelect"),0<N.length&&(h=new tp("onSelect","select",null,h,m),d.push({event:h,listeners:N}),h.target=hu)))}function Et(d,h){var m={};return m[d.toLowerCase()]=h.toLowerCase(),m["Webkit"+d]="webkit"+h,m["Moz"+d]="moz"+h,m}var Qt={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionrun:Et("Transition","TransitionRun"),transitionstart:Et("Transition","TransitionStart"),transitioncancel:Et("Transition","TransitionCancel"),transitionend:Et("Transition","TransitionEnd")},Rn={},Kr={};co&&(Kr=document.createElement("div").style,"AnimationEvent"in window||(delete Qt.animationend.animation,delete Qt.animationiteration.animation,delete Qt.animationstart.animation),"TransitionEvent"in window||delete Qt.transitionend.transition);function Ln(d){if(Rn[d])return Rn[d];if(!Qt[d])return d;var h=Qt[d],m;for(m in h)if(h.hasOwnProperty(m)&&m in Kr)return Rn[d]=h[m];return d}var fp=Ln("animationend"),D0=Ln("animationiteration"),ba=Ln("animationstart"),pp=Ln("transitionrun"),C_=Ln("transitionstart"),fu=Ln("transitioncancel"),zd=Ln("transitionend"),qd=new Map,Hn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hn.push("scrollEnd");function fs(d,h){qd.set(d,h),bi(h,[d])}var Oy=new WeakMap;function Li(d,h){if(typeof d=="object"&&d!==null){var m=Oy.get(d);return m!==void 0?m:(h={value:d,source:h,stack:cy(h)},Oy.set(d,h),h)}return{value:d,source:h,stack:cy(h)}}var Ha=[],pu=0,Dy=0;function Yl(){for(var d=pu,h=Dy=pu=0;h<d;){var m=Ha[h];Ha[h++]=null;var N=Ha[h];Ha[h++]=null;var E=Ha[h];Ha[h++]=null;var R=Ha[h];if(Ha[h++]=null,N!==null&&E!==null){var J=N.pending;J===null?E.next=E:(E.next=J.next,J.next=E),N.pending=E}R!==0&&Ud(m,E,R)}}function ps(d,h,m,N){Ha[pu++]=d,Ha[pu++]=h,Ha[pu++]=m,Ha[pu++]=N,Dy|=N,d.lanes|=N,d=d.alternate,d!==null&&(d.lanes|=N)}function mu(d,h,m,N){return ps(d,h,m,N),Vd(d)}function Ql(d,h){return ps(d,null,null,h),Vd(d)}function Ud(d,h,m){d.lanes|=m;var N=d.alternate;N!==null&&(N.lanes|=m);for(var E=!1,R=d.return;R!==null;)R.childLanes|=m,N=R.alternate,N!==null&&(N.childLanes|=m),R.tag===22&&(d=R.stateNode,d===null||d._visibility&1||(E=!0)),d=R,R=R.return;return d.tag===3?(R=d.stateNode,E&&h!==null&&(E=31-me(m),d=R.hiddenUpdates,N=d[E],N===null?d[E]=[h]:N.push(h),h.lane=m|536870912),R):null}function Vd(d){if(50<Lu)throw Lu=0,Tx=null,Error(i(185));for(var h=d.return;h!==null;)d=h,h=d.return;return d.tag===3?d.stateNode:null}var Xl={};function mp(d,h,m,N){this.tag=d,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(d,h,m,N){return new mp(d,h,m,N)}function Jl(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Fi(d,h){var m=d.alternate;return m===null?(m=Ki(d.tag,h,d.key,d.mode),m.elementType=d.elementType,m.type=d.type,m.stateNode=d.stateNode,m.alternate=d,d.alternate=m):(m.pendingProps=h,m.type=d.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=d.flags&65011712,m.childLanes=d.childLanes,m.lanes=d.lanes,m.child=d.child,m.memoizedProps=d.memoizedProps,m.memoizedState=d.memoizedState,m.updateQueue=d.updateQueue,h=d.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=d.sibling,m.index=d.index,m.ref=d.ref,m.refCleanup=d.refCleanup,m}function Hd(d,h){d.flags&=65011714;var m=d.alternate;return m===null?(d.childLanes=0,d.lanes=h,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type,h=m.dependencies,d.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),d}function gp(d,h,m,N,E,R){var J=0;if(N=d,typeof d=="function")Jl(d)&&(J=1);else if(typeof d=="string")J=rC(d,m,Oe.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case B:return d=Ki(31,m,h,E),d.elementType=B,d.lanes=R,d;case v:return Zl(m.children,E,R,h);case j:J=8,E|=24;break;case w:return d=Ki(12,m,h,E|2),d.elementType=w,d.lanes=R,d;case A:return d=Ki(13,m,h,E),d.elementType=A,d.lanes=R,d;case P:return d=Ki(19,m,h,E),d.elementType=P,d.lanes=R,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case _:case C:J=10;break e;case T:J=9;break e;case O:J=11;break e;case I:J=14;break e;case F:J=16,N=null;break e}J=29,m=Error(i(130,d===null?"null":typeof d,"")),N=null}return h=Ki(J,m,h,E),h.elementType=d,h.type=N,h.lanes=R,h}function Zl(d,h,m,N){return d=Ki(7,d,N,h),d.lanes=m,d}function My(d,h,m){return d=Ki(6,d,null,h),d.lanes=m,d}function gu(d,h,m){return h=Ki(4,d.children!==null?d.children:[],d.key,h),h.lanes=m,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}var ho=[],el=0,yp=null,Gd=0,Ga=[],Wa=0,Sr=null,Er=1,fo="";function ec(d,h){ho[el++]=Gd,ho[el++]=yp,yp=d,Gd=h}function Iy(d,h,m){Ga[Wa++]=Er,Ga[Wa++]=fo,Ga[Wa++]=Sr,Sr=d;var N=Er;d=fo;var E=32-me(N)-1;N&=~(1<<E),m+=1;var R=32-me(h)+E;if(30<R){var J=E-E%5;R=(N&(1<<J)-1).toString(32),N>>=J,E-=J,Er=1<<32-me(h)+E|m<<E|N,fo=R+d}else Er=1<<R|m<<E|N,fo=d}function Ry(d){d.return!==null&&(ec(d,1),Iy(d,1,0))}function Wd(d){for(;d===yp;)yp=ho[--el],ho[el]=null,Gd=ho[--el],ho[el]=null;for(;d===Sr;)Sr=Ga[--Wa],Ga[Wa]=null,fo=Ga[--Wa],Ga[Wa]=null,Er=Ga[--Wa],Ga[Wa]=null}var ti=null,kr=null,_n=!1,ms=null,Yi=!1,yu=Error(i(519));function Ka(d){var h=Error(i(418,""));throw tl(Li(h,d)),yu}function M0(d){var h=d.stateNode,m=d.type,N=d.memoizedProps;switch(h[Tn]=d,h[Nn]=N,m){case"dialog":Sn("cancel",h),Sn("close",h);break;case"iframe":case"object":case"embed":Sn("load",h);break;case"video":case"audio":for(m=0;m<Ih.length;m++)Sn(Ih[m],h);break;case"source":Sn("error",h);break;case"img":case"image":case"link":Sn("error",h),Sn("load",h);break;case"details":Sn("toggle",h);break;case"input":Sn("invalid",h),fy(h,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0),Qf(h);break;case"select":Sn("invalid",h);break;case"textarea":Sn("invalid",h),Jf(h,N.value,N.defaultValue,N.children),Qf(h)}m=N.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||N.suppressHydrationWarning===!0||rj(h.textContent,m)?(N.popover!=null&&(Sn("beforetoggle",h),Sn("toggle",h)),N.onScroll!=null&&Sn("scroll",h),N.onScrollEnd!=null&&Sn("scrollend",h),N.onClick!=null&&(h.onclick=om),h=!0):h=!1,h||Ka(d)}function I0(d){for(ti=d.return;ti;)switch(ti.tag){case 5:case 13:Yi=!1;return;case 27:case 3:Yi=!0;return;default:ti=ti.return}}function Kd(d){if(d!==ti)return!1;if(!_n)return I0(d),_n=!0,!1;var h=d.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=d.type,m=!(m!=="form"&&m!=="button")||cm(d.type,d.memoizedProps)),m=!m),m&&kr&&Ka(d),I0(d),h===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8)if(m=d.data,m==="/$"){if(h===0){kr=js(d.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;d=d.nextSibling}kr=null}}else h===27?(h=kr,es(d.type)?(d=zx,zx=null,kr=d):kr=h):kr=ti?js(d.stateNode.nextSibling):null;return!0}function Yd(){kr=ti=null,_n=!1}function R0(){var d=ms;return d!==null&&(ra===null?ra=d:ra.push.apply(ra,d),ms=null),d}function tl(d){ms===null?ms=[d]:ms.push(d)}var tc=le(null),nl=null,de=null;function ja(d,h,m){Y(tc,h._currentValue),h._currentValue=m}function Ya(d){d._currentValue=tc.current,je(tc)}function Qi(d,h,m){for(;d!==null;){var N=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,N!==null&&(N.childLanes|=h)):N!==null&&(N.childLanes&h)!==h&&(N.childLanes|=h),d===m)break;d=d.return}}function yn(d,h,m,N){var E=d.child;for(E!==null&&(E.return=d);E!==null;){var R=E.dependencies;if(R!==null){var J=E.child;R=R.firstContext;e:for(;R!==null;){var he=R;R=E;for(var Ae=0;Ae<h.length;Ae++)if(he.context===h[Ae]){R.lanes|=m,he=R.alternate,he!==null&&(he.lanes|=m),Qi(R.return,m,d),N||(J=null);break e}R=he.next}}else if(E.tag===18){if(J=E.return,J===null)throw Error(i(341));J.lanes|=m,R=J.alternate,R!==null&&(R.lanes|=m),Qi(J,m,d),J=null}else J=E.child;if(J!==null)J.return=E;else for(J=E;J!==null;){if(J===d){J=null;break}if(E=J.sibling,E!==null){E.return=J.return,J=E;break}J=J.return}E=J}}function Qd(d,h,m,N){d=null;for(var E=h,R=!1;E!==null;){if(!R){if((E.flags&524288)!==0)R=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var J=E.alternate;if(J===null)throw Error(i(387));if(J=J.memoizedProps,J!==null){var he=E.type;va(E.pendingProps.value,J.value)||(d!==null?d.push(he):d=[he])}}else if(E===Ie.current){if(J=E.alternate,J===null)throw Error(i(387));J.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(d!==null?d.push(Hu):d=[Hu])}E=E.return}d!==null&&yn(h,d,m,N),h.flags|=262144}function xp(d){for(d=d.firstContext;d!==null;){if(!va(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function nc(d){nl=d,de=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function $r(d){return L0(nl,d)}function vp(d,h){return nl===null&&nc(d),L0(d,h)}function L0(d,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},de===null){if(d===null)throw Error(i(308));de=h,d.dependencies={lanes:0,firstContext:h},d.flags|=524288}else de=de.next=h;return m}var T_=typeof AbortController<"u"?AbortController:function(){var d=[],h=this.signal={aborted:!1,addEventListener:function(m,N){d.push(N)}};this.abort=function(){h.aborted=!0,d.forEach(function(m){return m()})}},A_=e.unstable_scheduleCallback,E_=e.unstable_NormalPriority,fr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ly(){return{controller:new T_,data:new Map,refCount:0}}function Xd(d){d.refCount--,d.refCount===0&&A_(E_,function(){d.controller.abort()})}var Jd=null,Fy=0,xu=0,Xi=null;function k_(d,h){if(Jd===null){var m=Jd=[];Fy=0,xu=am(),Xi={status:"pending",value:void 0,then:function(N){m.push(N)}}}return Fy++,h.then(F0,F0),h}function F0(){if(--Fy===0&&Jd!==null){Xi!==null&&(Xi.status="fulfilled");var d=Jd;Jd=null,xu=0,Xi=null;for(var h=0;h<d.length;h++)(0,d[h])()}}function P_(d,h){var m=[],N={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return d.then(function(){N.status="fulfilled",N.value=h;for(var E=0;E<m.length;E++)(0,m[E])(h)},function(E){for(N.status="rejected",N.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),N}var $0=q.S;q.S=function(d,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&k_(d,h),$0!==null&&$0(d,h)};var rc=le(null);function po(){var d=rc.current;return d!==null?d:yr.pooledCache}function bp(d,h){h===null?Y(rc,rc.current):Y(rc,h.pool)}function B0(){var d=po();return d===null?null:{parent:fr._currentValue,pool:d}}var $i=Error(i(460)),z0=Error(i(474)),jp=Error(i(542)),$y={then:function(){}};function q0(d){return d=d.status,d==="fulfilled"||d==="rejected"}function wp(){}function By(d,h,m){switch(m=d[m],m===void 0?d.push(h):m!==h&&(h.then(wp,wp),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,V0(d),d;default:if(typeof h.status=="string")h.then(wp,wp);else{if(d=yr,d!==null&&100<d.shellSuspendCounter)throw Error(i(482));d=h,d.status="pending",d.then(function(N){if(h.status==="pending"){var E=h;E.status="fulfilled",E.value=N}},function(N){if(h.status==="pending"){var E=h;E.status="rejected",E.reason=N}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,V0(d),d}throw vu=h,$i}}var vu=null;function U0(){if(vu===null)throw Error(i(459));var d=vu;return vu=null,d}function V0(d){if(d===$i||d===jp)throw Error(i(483))}var $s=!1;function ic(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bu(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function rl(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function mo(d,h,m){var N=d.updateQueue;if(N===null)return null;if(N=N.shared,(er&2)!==0){var E=N.pending;return E===null?h.next=h:(h.next=E.next,E.next=h),N.pending=h,h=Vd(d),Ud(d,null,m),h}return ps(d,N,h,m),Vd(d)}function Zd(d,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var N=h.lanes;N&=d.pendingLanes,m|=N,h.lanes=m,qe(d,m)}}function gs(d,h){var m=d.updateQueue,N=d.alternate;if(N!==null&&(N=N.updateQueue,m===N)){var E=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var J={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};R===null?E=R=J:R=R.next=J,m=m.next}while(m!==null);R===null?E=R=h:R=R.next=h}else E=R=h;m={baseState:N.baseState,firstBaseUpdate:E,lastBaseUpdate:R,shared:N.shared,callbacks:N.callbacks},d.updateQueue=m;return}d=m.lastBaseUpdate,d===null?m.firstBaseUpdate=h:d.next=h,m.lastBaseUpdate=h}var eh=!1;function ys(){if(eh){var d=Xi;if(d!==null)throw d}}function Ai(d,h,m,N){eh=!1;var E=d.updateQueue;$s=!1;var R=E.firstBaseUpdate,J=E.lastBaseUpdate,he=E.shared.pending;if(he!==null){E.shared.pending=null;var Ae=he,Xe=Ae.next;Ae.next=null,J===null?R=Xe:J.next=Xe,J=Ae;var lt=d.alternate;lt!==null&&(lt=lt.updateQueue,he=lt.lastBaseUpdate,he!==J&&(he===null?lt.firstBaseUpdate=Xe:he.next=Xe,lt.lastBaseUpdate=Ae))}if(R!==null){var pt=E.baseState;J=0,lt=Xe=Ae=null,he=R;do{var tt=he.lane&-536870913,Ze=tt!==he.lane;if(Ze?(In&tt)===tt:(N&tt)===tt){tt!==0&&tt===xu&&(eh=!0),lt!==null&&(lt=lt.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var Gt=d,Ht=he;tt=h;var sr=m;switch(Ht.tag){case 1:if(Gt=Ht.payload,typeof Gt=="function"){pt=Gt.call(sr,pt,tt);break e}pt=Gt;break e;case 3:Gt.flags=Gt.flags&-65537|128;case 0:if(Gt=Ht.payload,tt=typeof Gt=="function"?Gt.call(sr,pt,tt):Gt,tt==null)break e;pt=f({},pt,tt);break e;case 2:$s=!0}}tt=he.callback,tt!==null&&(d.flags|=64,Ze&&(d.flags|=8192),Ze=E.callbacks,Ze===null?E.callbacks=[tt]:Ze.push(tt))}else Ze={lane:tt,tag:he.tag,payload:he.payload,callback:he.callback,next:null},lt===null?(Xe=lt=Ze,Ae=pt):lt=lt.next=Ze,J|=tt;if(he=he.next,he===null){if(he=E.shared.pending,he===null)break;Ze=he,he=Ze.next,Ze.next=null,E.lastBaseUpdate=Ze,E.shared.pending=null}}while(!0);lt===null&&(Ae=pt),E.baseState=Ae,E.firstBaseUpdate=Xe,E.lastBaseUpdate=lt,R===null&&(E.shared.lanes=0),hl|=J,d.lanes=J,d.memoizedState=pt}}function H0(d,h){if(typeof d!="function")throw Error(i(191,d));d.call(h)}function zy(d,h){var m=d.callbacks;if(m!==null)for(d.callbacks=null,d=0;d<m.length;d++)H0(m[d],h)}var ac=le(null),il=le(0);function go(d,h){d=_o,Y(il,d),Y(ac,h),_o=d|h.baseLanes}function Sp(){Y(il,_o),Y(ac,ac.current)}function qy(){_o=il.current,je(ac),je(il)}var xs=0,mn=null,Zn=null,Cn=null,ju=!1,sc=!1,Ei=!1,wu=0,al=0,Qa=null,G0=0;function An(){throw Error(i(321))}function th(d,h){if(h===null)return!1;for(var m=0;m<h.length&&m<d.length;m++)if(!va(d[m],h[m]))return!1;return!0}function Uy(d,h,m,N,E,R){return xs=R,mn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,q.H=d===null||d.memoizedState===null?a1:ox,Ei=!1,R=m(N,E),Ei=!1,sc&&(R=K0(h,m,N,E)),W0(d),R}function W0(d){q.H=hh;var h=Zn!==null&&Zn.next!==null;if(xs=0,Cn=Zn=mn=null,ju=!1,al=0,Qa=null,h)throw Error(i(300));d===null||di||(d=d.dependencies,d!==null&&xp(d)&&(di=!0))}function K0(d,h,m,N){mn=d;var E=0;do{if(sc&&(Qa=null),al=0,sc=!1,25<=E)throw Error(i(301));if(E+=1,Cn=Zn=null,d.updateQueue!=null){var R=d.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}q.H=s1,R=h(m,N)}while(sc);return R}function Vy(){var d=q.H,h=d.useState()[0];return h=typeof h.then=="function"?nh(h):h,d=d.useState()[0],(Zn!==null?Zn.memoizedState:null)!==d&&(mn.flags|=1024),h}function Hy(){var d=wu!==0;return wu=0,d}function oc(d,h,m){h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~m}function Np(d){if(ju){for(d=d.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}ju=!1}xs=0,Cn=Zn=mn=null,sc=!1,al=wu=0,Qa=null}function Ji(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?mn.memoizedState=Cn=d:Cn=Cn.next=d,Cn}function Yr(){if(Zn===null){var d=mn.alternate;d=d!==null?d.memoizedState:null}else d=Zn.next;var h=Cn===null?mn.memoizedState:Cn.next;if(h!==null)Cn=h,Zn=d;else{if(d===null)throw mn.alternate===null?Error(i(467)):Error(i(310));Zn=d,d={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},Cn===null?mn.memoizedState=Cn=d:Cn=Cn.next=d}return Cn}function lc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nh(d){var h=al;return al+=1,Qa===null&&(Qa=[]),d=By(Qa,d,h),h=mn,(Cn===null?h.memoizedState:Cn.next)===null&&(h=h.alternate,q.H=h===null||h.memoizedState===null?a1:ox),d}function _p(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return nh(d);if(d.$$typeof===C)return $r(d)}throw Error(i(438,String(d)))}function rh(d){var h=null,m=mn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var N=mn.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(h={data:N.data.map(function(E){return E.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=lc(),mn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(d),N=0;N<d;N++)m[N]=$;return h.index++,m}function Bs(d,h){return typeof h=="function"?h(d):h}function Cp(d){var h=Yr();return Gy(h,Zn,d)}function Gy(d,h,m){var N=d.queue;if(N===null)throw Error(i(311));N.lastRenderedReducer=m;var E=d.baseQueue,R=N.pending;if(R!==null){if(E!==null){var J=E.next;E.next=R.next,R.next=J}h.baseQueue=E=R,N.pending=null}if(R=d.baseState,E===null)d.memoizedState=R;else{h=E.next;var he=J=null,Ae=null,Xe=h,lt=!1;do{var pt=Xe.lane&-536870913;if(pt!==Xe.lane?(In&pt)===pt:(xs&pt)===pt){var tt=Xe.revertLane;if(tt===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),pt===xu&&(lt=!0);else if((xs&tt)===tt){Xe=Xe.next,tt===xu&&(lt=!0);continue}else pt={lane:0,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Ae===null?(he=Ae=pt,J=R):Ae=Ae.next=pt,mn.lanes|=tt,hl|=tt;pt=Xe.action,Ei&&m(R,pt),R=Xe.hasEagerState?Xe.eagerState:m(R,pt)}else tt={lane:pt,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Ae===null?(he=Ae=tt,J=R):Ae=Ae.next=tt,mn.lanes|=pt,hl|=pt;Xe=Xe.next}while(Xe!==null&&Xe!==h);if(Ae===null?J=R:Ae.next=he,!va(R,d.memoizedState)&&(di=!0,lt&&(m=Xi,m!==null)))throw m;d.memoizedState=R,d.baseState=J,d.baseQueue=Ae,N.lastRenderedState=R}return E===null&&(N.lanes=0),[d.memoizedState,N.dispatch]}function Wy(d){var h=Yr(),m=h.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=d;var N=m.dispatch,E=m.pending,R=h.memoizedState;if(E!==null){m.pending=null;var J=E=E.next;do R=d(R,J.action),J=J.next;while(J!==E);va(R,h.memoizedState)||(di=!0),h.memoizedState=R,h.baseQueue===null&&(h.baseState=R),m.lastRenderedState=R}return[R,N]}function Ky(d,h,m){var N=mn,E=Yr(),R=_n;if(R){if(m===void 0)throw Error(i(407));m=m()}else m=h();var J=!va((Zn||E).memoizedState,m);J&&(E.memoizedState=m,di=!0),E=E.queue;var he=Ap.bind(null,N,E,d);if(sh(2048,8,he,[d]),E.getSnapshot!==h||J||Cn!==null&&Cn.memoizedState.tag&1){if(N.flags|=2048,Su(9,Dp(),Y0.bind(null,N,E,m,h),null),yr===null)throw Error(i(349));R||(xs&124)!==0||Tp(N,h,m)}return m}function Tp(d,h,m){d.flags|=16384,d={getSnapshot:h,value:m},h=mn.updateQueue,h===null?(h=lc(),mn.updateQueue=h,h.stores=[d]):(m=h.stores,m===null?h.stores=[d]:m.push(d))}function Y0(d,h,m,N){h.value=m,h.getSnapshot=N,Yy(h)&&Qy(d)}function Ap(d,h,m){return m(function(){Yy(h)&&Qy(d)})}function Yy(d){var h=d.getSnapshot;d=d.value;try{var m=h();return!va(d,m)}catch{return!0}}function Qy(d){var h=Ql(d,2);h!==null&&Ca(h,d,2)}function Ep(d){var h=Ji();if(typeof d=="function"){var m=d;if(d=m(),Ei){pe(!0);try{m()}finally{pe(!1)}}}return h.memoizedState=h.baseState=d,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:d},h}function ih(d,h,m,N){return d.baseState=m,Gy(d,Zn,typeof N=="function"?N:Bs)}function O_(d,h,m,N,E){if(Lp(d))throw Error(i(485));if(d=h.action,d!==null){var R={payload:E,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){R.listeners.push(J)}};q.T!==null?m(!0):R.isTransition=!1,N(R),m=h.pending,m===null?(R.next=h.pending=R,Xy(h,R)):(R.next=m.next,h.pending=m.next=R)}}function Xy(d,h){var m=h.action,N=h.payload,E=d.state;if(h.isTransition){var R=q.T,J={};q.T=J;try{var he=m(E,N),Ae=q.S;Ae!==null&&Ae(J,he),Jy(d,h,he)}catch(Xe){kp(d,h,Xe)}finally{q.T=R}}else try{R=m(E,N),Jy(d,h,R)}catch(Xe){kp(d,h,Xe)}}function Jy(d,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(N){Q0(d,h,N)},function(N){return kp(d,h,N)}):Q0(d,h,m)}function Q0(d,h,m){h.status="fulfilled",h.value=m,X0(h),d.state=m,h=d.pending,h!==null&&(m=h.next,m===h?d.pending=null:(m=m.next,h.next=m,Xy(d,m)))}function kp(d,h,m){var N=d.pending;if(d.pending=null,N!==null){N=N.next;do h.status="rejected",h.reason=m,X0(h),h=h.next;while(h!==N)}d.action=null}function X0(d){d=d.listeners;for(var h=0;h<d.length;h++)(0,d[h])()}function Pp(d,h){return h}function Zy(d,h){if(_n){var m=yr.formState;if(m!==null){e:{var N=mn;if(_n){if(kr){t:{for(var E=kr,R=Yi;E.nodeType!==8;){if(!R){E=null;break t}if(E=js(E.nextSibling),E===null){E=null;break t}}R=E.data,E=R==="F!"||R==="F"?E:null}if(E){kr=js(E.nextSibling),N=E.data==="F!";break e}}Ka(N)}N=!1}N&&(h=m[0])}}return m=Ji(),m.memoizedState=m.baseState=h,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pp,lastRenderedState:h},m.queue=N,m=ix.bind(null,mn,N),N.dispatch=m,N=Ep(!1),R=ax.bind(null,mn,!1,N.queue),N=Ji(),E={state:h,dispatch:null,action:d,pending:null},N.queue=E,m=O_.bind(null,mn,E,R,m),E.dispatch=m,N.memoizedState=d,[h,m,!1]}function Op(d){var h=Yr();return J0(h,Zn,d)}function J0(d,h,m){if(h=Gy(d,h,Pp)[0],d=Cp(Bs)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var N=nh(h)}catch(J){throw J===$i?jp:J}else N=h;h=Yr();var E=h.queue,R=E.dispatch;return m!==h.memoizedState&&(mn.flags|=2048,Su(9,Dp(),ex.bind(null,E,m),null)),[N,R,d]}function ex(d,h){d.action=h}function hn(d){var h=Yr(),m=Zn;if(m!==null)return J0(h,m,d);Yr(),h=h.memoizedState,m=Yr();var N=m.queue.dispatch;return m.memoizedState=d,[h,N,!1]}function Su(d,h,m,N){return d={tag:d,create:m,deps:N,inst:h,next:null},h=mn.updateQueue,h===null&&(h=lc(),mn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=d.next=d:(N=m.next,m.next=d,d.next=N,h.lastEffect=d),d}function Dp(){return{destroy:void 0,resource:void 0}}function Nu(){return Yr().memoizedState}function ah(d,h,m,N){var E=Ji();N=N===void 0?null:N,mn.flags|=d,E.memoizedState=Su(1|h,Dp(),m,N)}function sh(d,h,m,N){var E=Yr();N=N===void 0?null:N;var R=E.memoizedState.inst;Zn!==null&&N!==null&&th(N,Zn.memoizedState.deps)?E.memoizedState=Su(h,R,m,N):(mn.flags|=d,E.memoizedState=Su(1|h,R,m,N))}function Z0(d,h){ah(8390656,8,d,h)}function wa(d,h){sh(2048,8,d,h)}function e1(d,h){return sh(4,2,d,h)}function oh(d,h){return sh(4,4,d,h)}function Mp(d,h){if(typeof h=="function"){d=d();var m=h(d);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function tx(d,h,m){m=m!=null?m.concat([d]):null,sh(4,4,Mp.bind(null,h,d),m)}function Ip(){}function Zi(d,h){var m=Yr();h=h===void 0?null:h;var N=m.memoizedState;return h!==null&&th(h,N[1])?N[0]:(m.memoizedState=[d,h],d)}function yo(d,h){var m=Yr();h=h===void 0?null:h;var N=m.memoizedState;if(h!==null&&th(h,N[1]))return N[0];if(N=d(),Ei){pe(!0);try{d()}finally{pe(!1)}}return m.memoizedState=[N,h],N}function lh(d,h,m){return m===void 0||(xs&1073741824)!==0?d.memoizedState=h:(d.memoizedState=m,d=D1(),mn.lanes|=d,hl|=d,m)}function nx(d,h,m,N){return va(m,h)?m:ac.current!==null?(d=lh(d,m,N),va(d,h)||(di=!0),d):(xs&42)===0?(di=!0,d.memoizedState=m):(d=D1(),mn.lanes|=d,hl|=d,h)}function ch(d,h,m,N,E){var R=W.p;W.p=R!==0&&8>R?R:8;var J=q.T,he={};q.T=he,ax(d,!1,h,m);try{var Ae=E(),Xe=q.S;if(Xe!==null&&Xe(he,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var lt=P_(Ae,N);cc(d,h,lt,Pi(d))}else cc(d,h,N,Pi(d))}catch(pt){cc(d,h,{then:function(){},status:"rejected",reason:pt},Pi())}finally{W.p=R,q.T=J}}function t1(){}function uh(d,h,m,N){if(d.tag!==5)throw Error(i(476));var E=rx(d).queue;ch(d,E,h,ae,m===null?t1:function(){return Rp(d),m(N)})}function rx(d){var h=d.memoizedState;if(h!==null)return h;h={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:ae},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:m},next:null},d.memoizedState=h,d=d.alternate,d!==null&&(d.memoizedState=h),h}function Rp(d){var h=rx(d).next.queue;cc(d,h,{},Pi())}function dh(){return $r(Hu)}function xo(){return Yr().memoizedState}function n1(){return Yr().memoizedState}function sl(d){for(var h=d.return;h!==null;){switch(h.tag){case 24:case 3:var m=Pi();d=rl(m);var N=mo(h,d,m);N!==null&&(Ca(N,h,m),Zd(N,h,m)),h={cache:Ly()},d.payload=h;return}h=h.return}}function r1(d,h,m){var N=Pi();m={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Lp(d)?i1(h,m):(m=mu(d,h,m,N),m!==null&&(Ca(m,d,N),sx(m,h,N)))}function ix(d,h,m){var N=Pi();cc(d,h,m,N)}function cc(d,h,m,N){var E={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Lp(d))i1(h,E);else{var R=d.alternate;if(d.lanes===0&&(R===null||R.lanes===0)&&(R=h.lastRenderedReducer,R!==null))try{var J=h.lastRenderedState,he=R(J,m);if(E.hasEagerState=!0,E.eagerState=he,va(he,J))return ps(d,h,E,0),yr===null&&Yl(),!1}catch{}finally{}if(m=mu(d,h,E,N),m!==null)return Ca(m,d,N),sx(m,h,N),!0}return!1}function ax(d,h,m,N){if(N={lane:2,revertLane:am(),action:N,hasEagerState:!1,eagerState:null,next:null},Lp(d)){if(h)throw Error(i(479))}else h=mu(d,m,N,2),h!==null&&Ca(h,d,2)}function Lp(d){var h=d.alternate;return d===mn||h!==null&&h===mn}function i1(d,h){sc=ju=!0;var m=d.pending;m===null?h.next=h:(h.next=m.next,m.next=h),d.pending=h}function sx(d,h,m){if((m&4194048)!==0){var N=h.lanes;N&=d.pendingLanes,m|=N,h.lanes=m,qe(d,m)}}var hh={readContext:$r,use:_p,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useLayoutEffect:An,useInsertionEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useSyncExternalStore:An,useId:An,useHostTransitionStatus:An,useFormState:An,useActionState:An,useOptimistic:An,useMemoCache:An,useCacheRefresh:An},a1={readContext:$r,use:_p,useCallback:function(d,h){return Ji().memoizedState=[d,h===void 0?null:h],d},useContext:$r,useEffect:Z0,useImperativeHandle:function(d,h,m){m=m!=null?m.concat([d]):null,ah(4194308,4,Mp.bind(null,h,d),m)},useLayoutEffect:function(d,h){return ah(4194308,4,d,h)},useInsertionEffect:function(d,h){ah(4,2,d,h)},useMemo:function(d,h){var m=Ji();h=h===void 0?null:h;var N=d();if(Ei){pe(!0);try{d()}finally{pe(!1)}}return m.memoizedState=[N,h],N},useReducer:function(d,h,m){var N=Ji();if(m!==void 0){var E=m(h);if(Ei){pe(!0);try{m(h)}finally{pe(!1)}}}else E=h;return N.memoizedState=N.baseState=E,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:E},N.queue=d,d=d.dispatch=r1.bind(null,mn,d),[N.memoizedState,d]},useRef:function(d){var h=Ji();return d={current:d},h.memoizedState=d},useState:function(d){d=Ep(d);var h=d.queue,m=ix.bind(null,mn,h);return h.dispatch=m,[d.memoizedState,m]},useDebugValue:Ip,useDeferredValue:function(d,h){var m=Ji();return lh(m,d,h)},useTransition:function(){var d=Ep(!1);return d=ch.bind(null,mn,d.queue,!0,!1),Ji().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,h,m){var N=mn,E=Ji();if(_n){if(m===void 0)throw Error(i(407));m=m()}else{if(m=h(),yr===null)throw Error(i(349));(In&124)!==0||Tp(N,h,m)}E.memoizedState=m;var R={value:m,getSnapshot:h};return E.queue=R,Z0(Ap.bind(null,N,R,d),[d]),N.flags|=2048,Su(9,Dp(),Y0.bind(null,N,R,m,h),null),m},useId:function(){var d=Ji(),h=yr.identifierPrefix;if(_n){var m=fo,N=Er;m=(N&~(1<<32-me(N)-1)).toString(32)+m,h=""+h+"R"+m,m=wu++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=G0++,h=""+h+"r"+m.toString(32)+"";return d.memoizedState=h},useHostTransitionStatus:dh,useFormState:Zy,useActionState:Zy,useOptimistic:function(d){var h=Ji();h.memoizedState=h.baseState=d;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=ax.bind(null,mn,!0,m),m.dispatch=h,[d,h]},useMemoCache:rh,useCacheRefresh:function(){return Ji().memoizedState=sl.bind(null,mn)}},ox={readContext:$r,use:_p,useCallback:Zi,useContext:$r,useEffect:wa,useImperativeHandle:tx,useInsertionEffect:e1,useLayoutEffect:oh,useMemo:yo,useReducer:Cp,useRef:Nu,useState:function(){return Cp(Bs)},useDebugValue:Ip,useDeferredValue:function(d,h){var m=Yr();return nx(m,Zn.memoizedState,d,h)},useTransition:function(){var d=Cp(Bs)[0],h=Yr().memoizedState;return[typeof d=="boolean"?d:nh(d),h]},useSyncExternalStore:Ky,useId:xo,useHostTransitionStatus:dh,useFormState:Op,useActionState:Op,useOptimistic:function(d,h){var m=Yr();return ih(m,Zn,d,h)},useMemoCache:rh,useCacheRefresh:n1},s1={readContext:$r,use:_p,useCallback:Zi,useContext:$r,useEffect:wa,useImperativeHandle:tx,useInsertionEffect:e1,useLayoutEffect:oh,useMemo:yo,useReducer:Wy,useRef:Nu,useState:function(){return Wy(Bs)},useDebugValue:Ip,useDeferredValue:function(d,h){var m=Yr();return Zn===null?lh(m,d,h):nx(m,Zn.memoizedState,d,h)},useTransition:function(){var d=Wy(Bs)[0],h=Yr().memoizedState;return[typeof d=="boolean"?d:nh(d),h]},useSyncExternalStore:Ky,useId:xo,useHostTransitionStatus:dh,useFormState:hn,useActionState:hn,useOptimistic:function(d,h){var m=Yr();return Zn!==null?ih(m,Zn,d,h):(m.baseState=d,[d,m.queue.dispatch])},useMemoCache:rh,useCacheRefresh:n1},ni=null,ea=0;function Fp(d){var h=ea;return ea+=1,ni===null&&(ni=[]),By(ni,d,h)}function fh(d,h){h=h.props.ref,d.ref=h!==void 0?h:null}function uc(d,h){throw h.$$typeof===p?Error(i(525)):(d=Object.prototype.toString.call(h),Error(i(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d)))}function dc(d){var h=d._init;return h(d._payload)}function lx(d){function h(He,Fe){if(d){var Qe=He.deletions;Qe===null?(He.deletions=[Fe],He.flags|=16):Qe.push(Fe)}}function m(He,Fe){if(!d)return null;for(;Fe!==null;)h(He,Fe),Fe=Fe.sibling;return null}function N(He){for(var Fe=new Map;He!==null;)He.key!==null?Fe.set(He.key,He):Fe.set(He.index,He),He=He.sibling;return Fe}function E(He,Fe){return He=Fi(He,Fe),He.index=0,He.sibling=null,He}function R(He,Fe,Qe){return He.index=Qe,d?(Qe=He.alternate,Qe!==null?(Qe=Qe.index,Qe<Fe?(He.flags|=67108866,Fe):Qe):(He.flags|=67108866,Fe)):(He.flags|=1048576,Fe)}function J(He){return d&&He.alternate===null&&(He.flags|=67108866),He}function he(He,Fe,Qe,ht){return Fe===null||Fe.tag!==6?(Fe=My(Qe,He.mode,ht),Fe.return=He,Fe):(Fe=E(Fe,Qe),Fe.return=He,Fe)}function Ae(He,Fe,Qe,ht){var Ot=Qe.type;return Ot===v?lt(He,Fe,Qe.props.children,ht,Qe.key):Fe!==null&&(Fe.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===F&&dc(Ot)===Fe.type)?(Fe=E(Fe,Qe.props),fh(Fe,Qe),Fe.return=He,Fe):(Fe=gp(Qe.type,Qe.key,Qe.props,null,He.mode,ht),fh(Fe,Qe),Fe.return=He,Fe)}function Xe(He,Fe,Qe,ht){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==Qe.containerInfo||Fe.stateNode.implementation!==Qe.implementation?(Fe=gu(Qe,He.mode,ht),Fe.return=He,Fe):(Fe=E(Fe,Qe.children||[]),Fe.return=He,Fe)}function lt(He,Fe,Qe,ht,Ot){return Fe===null||Fe.tag!==7?(Fe=Zl(Qe,He.mode,ht,Ot),Fe.return=He,Fe):(Fe=E(Fe,Qe),Fe.return=He,Fe)}function pt(He,Fe,Qe){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Fe=My(""+Fe,He.mode,Qe),Fe.return=He,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case g:return Qe=gp(Fe.type,Fe.key,Fe.props,null,He.mode,Qe),fh(Qe,Fe),Qe.return=He,Qe;case x:return Fe=gu(Fe,He.mode,Qe),Fe.return=He,Fe;case F:var ht=Fe._init;return Fe=ht(Fe._payload),pt(He,Fe,Qe)}if(X(Fe)||V(Fe))return Fe=Zl(Fe,He.mode,Qe,null),Fe.return=He,Fe;if(typeof Fe.then=="function")return pt(He,Fp(Fe),Qe);if(Fe.$$typeof===C)return pt(He,vp(He,Fe),Qe);uc(He,Fe)}return null}function tt(He,Fe,Qe,ht){var Ot=Fe!==null?Fe.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Ot!==null?null:he(He,Fe,""+Qe,ht);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:return Qe.key===Ot?Ae(He,Fe,Qe,ht):null;case x:return Qe.key===Ot?Xe(He,Fe,Qe,ht):null;case F:return Ot=Qe._init,Qe=Ot(Qe._payload),tt(He,Fe,Qe,ht)}if(X(Qe)||V(Qe))return Ot!==null?null:lt(He,Fe,Qe,ht,null);if(typeof Qe.then=="function")return tt(He,Fe,Fp(Qe),ht);if(Qe.$$typeof===C)return tt(He,Fe,vp(He,Qe),ht);uc(He,Qe)}return null}function Ze(He,Fe,Qe,ht,Ot){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return He=He.get(Qe)||null,he(Fe,He,""+ht,Ot);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case g:return He=He.get(ht.key===null?Qe:ht.key)||null,Ae(Fe,He,ht,Ot);case x:return He=He.get(ht.key===null?Qe:ht.key)||null,Xe(Fe,He,ht,Ot);case F:var xn=ht._init;return ht=xn(ht._payload),Ze(He,Fe,Qe,ht,Ot)}if(X(ht)||V(ht))return He=He.get(Qe)||null,lt(Fe,He,ht,Ot,null);if(typeof ht.then=="function")return Ze(He,Fe,Qe,Fp(ht),Ot);if(ht.$$typeof===C)return Ze(He,Fe,Qe,vp(Fe,ht),Ot);uc(Fe,ht)}return null}function Gt(He,Fe,Qe,ht){for(var Ot=null,xn=null,Ft=Fe,Wt=Fe=0,pi=null;Ft!==null&&Wt<Qe.length;Wt++){Ft.index>Wt?(pi=Ft,Ft=null):pi=Ft.sibling;var Fn=tt(He,Ft,Qe[Wt],ht);if(Fn===null){Ft===null&&(Ft=pi);break}d&&Ft&&Fn.alternate===null&&h(He,Ft),Fe=R(Fn,Fe,Wt),xn===null?Ot=Fn:xn.sibling=Fn,xn=Fn,Ft=pi}if(Wt===Qe.length)return m(He,Ft),_n&&ec(He,Wt),Ot;if(Ft===null){for(;Wt<Qe.length;Wt++)Ft=pt(He,Qe[Wt],ht),Ft!==null&&(Fe=R(Ft,Fe,Wt),xn===null?Ot=Ft:xn.sibling=Ft,xn=Ft);return _n&&ec(He,Wt),Ot}for(Ft=N(Ft);Wt<Qe.length;Wt++)pi=Ze(Ft,He,Wt,Qe[Wt],ht),pi!==null&&(d&&pi.alternate!==null&&Ft.delete(pi.key===null?Wt:pi.key),Fe=R(pi,Fe,Wt),xn===null?Ot=pi:xn.sibling=pi,xn=pi);return d&&Ft.forEach(function(wl){return h(He,wl)}),_n&&ec(He,Wt),Ot}function Ht(He,Fe,Qe,ht){if(Qe==null)throw Error(i(151));for(var Ot=null,xn=null,Ft=Fe,Wt=Fe=0,pi=null,Fn=Qe.next();Ft!==null&&!Fn.done;Wt++,Fn=Qe.next()){Ft.index>Wt?(pi=Ft,Ft=null):pi=Ft.sibling;var wl=tt(He,Ft,Fn.value,ht);if(wl===null){Ft===null&&(Ft=pi);break}d&&Ft&&wl.alternate===null&&h(He,Ft),Fe=R(wl,Fe,Wt),xn===null?Ot=wl:xn.sibling=wl,xn=wl,Ft=pi}if(Fn.done)return m(He,Ft),_n&&ec(He,Wt),Ot;if(Ft===null){for(;!Fn.done;Wt++,Fn=Qe.next())Fn=pt(He,Fn.value,ht),Fn!==null&&(Fe=R(Fn,Fe,Wt),xn===null?Ot=Fn:xn.sibling=Fn,xn=Fn);return _n&&ec(He,Wt),Ot}for(Ft=N(Ft);!Fn.done;Wt++,Fn=Qe.next())Fn=Ze(Ft,He,Wt,Fn.value,ht),Fn!==null&&(d&&Fn.alternate!==null&&Ft.delete(Fn.key===null?Wt:Fn.key),Fe=R(Fn,Fe,Wt),xn===null?Ot=Fn:xn.sibling=Fn,xn=Fn);return d&&Ft.forEach(function(pC){return h(He,pC)}),_n&&ec(He,Wt),Ot}function sr(He,Fe,Qe,ht){if(typeof Qe=="object"&&Qe!==null&&Qe.type===v&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:e:{for(var Ot=Qe.key;Fe!==null;){if(Fe.key===Ot){if(Ot=Qe.type,Ot===v){if(Fe.tag===7){m(He,Fe.sibling),ht=E(Fe,Qe.props.children),ht.return=He,He=ht;break e}}else if(Fe.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===F&&dc(Ot)===Fe.type){m(He,Fe.sibling),ht=E(Fe,Qe.props),fh(ht,Qe),ht.return=He,He=ht;break e}m(He,Fe);break}else h(He,Fe);Fe=Fe.sibling}Qe.type===v?(ht=Zl(Qe.props.children,He.mode,ht,Qe.key),ht.return=He,He=ht):(ht=gp(Qe.type,Qe.key,Qe.props,null,He.mode,ht),fh(ht,Qe),ht.return=He,He=ht)}return J(He);case x:e:{for(Ot=Qe.key;Fe!==null;){if(Fe.key===Ot)if(Fe.tag===4&&Fe.stateNode.containerInfo===Qe.containerInfo&&Fe.stateNode.implementation===Qe.implementation){m(He,Fe.sibling),ht=E(Fe,Qe.children||[]),ht.return=He,He=ht;break e}else{m(He,Fe);break}else h(He,Fe);Fe=Fe.sibling}ht=gu(Qe,He.mode,ht),ht.return=He,He=ht}return J(He);case F:return Ot=Qe._init,Qe=Ot(Qe._payload),sr(He,Fe,Qe,ht)}if(X(Qe))return Gt(He,Fe,Qe,ht);if(V(Qe)){if(Ot=V(Qe),typeof Ot!="function")throw Error(i(150));return Qe=Ot.call(Qe),Ht(He,Fe,Qe,ht)}if(typeof Qe.then=="function")return sr(He,Fe,Fp(Qe),ht);if(Qe.$$typeof===C)return sr(He,Fe,vp(He,Qe),ht);uc(He,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint"?(Qe=""+Qe,Fe!==null&&Fe.tag===6?(m(He,Fe.sibling),ht=E(Fe,Qe),ht.return=He,He=ht):(m(He,Fe),ht=My(Qe,He.mode,ht),ht.return=He,He=ht),J(He)):m(He,Fe)}return function(He,Fe,Qe,ht){try{ea=0;var Ot=sr(He,Fe,Qe,ht);return ni=null,Ot}catch(Ft){if(Ft===$i||Ft===jp)throw Ft;var xn=Ki(29,Ft,null,He.mode);return xn.lanes=ht,xn.return=He,xn}finally{}}}var hc=lx(!0),o1=lx(!1),Sa=le(null),Bi=null;function Xa(d){var h=d.alternate;Y(Br,Br.current&1),Y(Sa,d),Bi===null&&(h===null||ac.current!==null||h.memoizedState!==null)&&(Bi=d)}function l1(d){if(d.tag===22){if(Y(Br,Br.current),Y(Sa,d),Bi===null){var h=d.alternate;h!==null&&h.memoizedState!==null&&(Bi=d)}}else vo()}function vo(){Y(Br,Br.current),Y(Sa,Sa.current)}function zs(d){je(Sa),Bi===d&&(Bi=null),je(Br)}var Br=le(0);function ph(d){for(var h=d;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||qi(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function _u(d,h,m,N){h=d.memoizedState,m=m(N,h),m=m==null?h:f({},h,m),d.memoizedState=m,d.lanes===0&&(d.updateQueue.baseState=m)}var mh={enqueueSetState:function(d,h,m){d=d._reactInternals;var N=Pi(),E=rl(N);E.payload=h,m!=null&&(E.callback=m),h=mo(d,E,N),h!==null&&(Ca(h,d,N),Zd(h,d,N))},enqueueReplaceState:function(d,h,m){d=d._reactInternals;var N=Pi(),E=rl(N);E.tag=1,E.payload=h,m!=null&&(E.callback=m),h=mo(d,E,N),h!==null&&(Ca(h,d,N),Zd(h,d,N))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var m=Pi(),N=rl(m);N.tag=2,h!=null&&(N.callback=h),h=mo(d,N,m),h!==null&&(Ca(h,d,m),Zd(h,d,m))}};function gh(d,h,m,N,E,R,J){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(N,R,J):h.prototype&&h.prototype.isPureReactComponent?!Fs(m,N)||!Fs(E,R):!0}function c1(d,h,m,N){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,N),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,N),h.state!==d&&mh.enqueueReplaceState(h,h.state,null)}function ol(d,h){var m=h;if("ref"in h){m={};for(var N in h)N!=="ref"&&(m[N]=h[N])}if(d=d.defaultProps){m===h&&(m=f({},m));for(var E in d)m[E]===void 0&&(m[E]=d[E])}return m}var fc=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function cx(d){fc(d)}function $p(d){console.error(d)}function u1(d){fc(d)}function yh(d,h){try{var m=d.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(N){setTimeout(function(){throw N})}}function qs(d,h,m){try{var N=d.onCaughtError;N(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Bp(d,h,m){return m=rl(m),m.tag=3,m.payload={element:null},m.callback=function(){yh(d,h)},m}function ux(d){return d=rl(d),d.tag=3,d}function d1(d,h,m,N){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var R=N.value;d.payload=function(){return E(R)},d.callback=function(){qs(h,m,N)}}var J=m.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(d.callback=function(){qs(h,m,N),typeof E!="function"&&(fl===null?fl=new Set([this]):fl.add(this));var he=N.stack;this.componentDidCatch(N.value,{componentStack:he!==null?he:""})})}function h1(d,h,m,N,E){if(m.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(h=m.alternate,h!==null&&Qd(h,m,E,!0),m=Sa.current,m!==null){switch(m.tag){case 13:return Bi===null?Ex():m.alternate===null&&zr===0&&(zr=3),m.flags&=-257,m.flags|=65536,m.lanes=E,N===$y?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([N]):h.add(N),Ox(d,N,E)),!1;case 22:return m.flags|=65536,N===$y?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([N])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([N]):m.add(N)),Ox(d,N,E)),!1}throw Error(i(435,m.tag))}return Ox(d,N,E),Ex(),!1}if(_n)return h=Sa.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=E,N!==yu&&(d=Error(i(422),{cause:N}),tl(Li(d,m)))):(N!==yu&&(h=Error(i(423),{cause:N}),tl(Li(h,m))),d=d.current.alternate,d.flags|=65536,E&=-E,d.lanes|=E,N=Li(N,m),E=Bp(d.stateNode,N,E),gs(d,E),zr!==4&&(zr=2)),!1;var R=Error(i(520),{cause:N});if(R=Li(R,m),Th===null?Th=[R]:Th.push(R),zr!==4&&(zr=2),h===null)return!0;N=Li(N,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,d=E&-E,m.lanes|=d,d=Bp(m.stateNode,N,d),gs(m,d),!1;case 1:if(h=m.type,R=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(fl===null||!fl.has(R))))return m.flags|=65536,E&=-E,m.lanes|=E,E=ux(E),d1(E,d,m,N),gs(m,E),!1}m=m.return}while(m!==null);return!1}var f1=Error(i(461)),di=!1;function Nr(d,h,m,N){h.child=d===null?o1(h,null,m,N):hc(h,d.child,m,N)}function zp(d,h,m,N,E){m=m.render;var R=h.ref;if("ref"in N){var J={};for(var he in N)he!=="ref"&&(J[he]=N[he])}else J=N;return nc(h),N=Uy(d,h,m,J,R,E),he=Hy(),d!==null&&!di?(oc(d,h,E),bo(d,h,E)):(_n&&he&&Ry(h),h.flags|=1,Nr(d,h,N,E),h.child)}function qp(d,h,m,N,E){if(d===null){var R=m.type;return typeof R=="function"&&!Jl(R)&&R.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=R,Up(d,h,R,N,E)):(d=gp(m.type,null,N,h,h.mode,E),d.ref=h.ref,d.return=h,h.child=d)}if(R=d.child,!vs(d,E)){var J=R.memoizedProps;if(m=m.compare,m=m!==null?m:Fs,m(J,N)&&d.ref===h.ref)return bo(d,h,E)}return h.flags|=1,d=Fi(R,N),d.ref=h.ref,d.return=h,h.child=d}function Up(d,h,m,N,E){if(d!==null){var R=d.memoizedProps;if(Fs(R,N)&&d.ref===h.ref)if(di=!1,h.pendingProps=N=R,vs(d,E))(d.flags&131072)!==0&&(di=!0);else return h.lanes=d.lanes,bo(d,h,E)}return Cu(d,h,m,N,E)}function xh(d,h,m){var N=h.pendingProps,E=N.children,R=d!==null?d.memoizedState:null;if(N.mode==="hidden"){if((h.flags&128)!==0){if(N=R!==null?R.baseLanes|m:m,d!==null){for(E=h.child=d.child,R=0;E!==null;)R=R|E.lanes|E.childLanes,E=E.sibling;h.childLanes=R&~N}else h.childLanes=0,h.child=null;return pc(d,h,N,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},d!==null&&bp(h,R!==null?R.cachePool:null),R!==null?go(h,R):Sp(),l1(h);else return h.lanes=h.childLanes=536870912,pc(d,h,R!==null?R.baseLanes|m:m,m)}else R!==null?(bp(h,R.cachePool),go(h,R),vo(),h.memoizedState=null):(d!==null&&bp(h,null),Sp(),vo());return Nr(d,h,E,m),h.child}function pc(d,h,m,N){var E=po();return E=E===null?null:{parent:fr._currentValue,pool:E},h.memoizedState={baseLanes:m,cachePool:E},d!==null&&bp(h,null),Sp(),l1(h),d!==null&&Qd(d,h,N,!0),null}function Bt(d,h){var m=h.ref;if(m===null)d!==null&&d.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(d===null||d.ref!==m)&&(h.flags|=4194816)}}function Cu(d,h,m,N,E){return nc(h),m=Uy(d,h,m,N,void 0,E),N=Hy(),d!==null&&!di?(oc(d,h,E),bo(d,h,E)):(_n&&N&&Ry(h),h.flags|=1,Nr(d,h,m,E),h.child)}function Vp(d,h,m,N,E,R){return nc(h),h.updateQueue=null,m=K0(h,N,m,E),W0(d),N=Hy(),d!==null&&!di?(oc(d,h,R),bo(d,h,R)):(_n&&N&&Ry(h),h.flags|=1,Nr(d,h,m,R),h.child)}function ll(d,h,m,N,E){if(nc(h),h.stateNode===null){var R=Xl,J=m.contextType;typeof J=="object"&&J!==null&&(R=$r(J)),R=new m(N,R),h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=mh,h.stateNode=R,R._reactInternals=h,R=h.stateNode,R.props=N,R.state=h.memoizedState,R.refs={},ic(h),J=m.contextType,R.context=typeof J=="object"&&J!==null?$r(J):Xl,R.state=h.memoizedState,J=m.getDerivedStateFromProps,typeof J=="function"&&(_u(h,m,J,N),R.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(J=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),J!==R.state&&mh.enqueueReplaceState(R,R.state,null),Ai(h,N,R,E),ys(),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308),N=!0}else if(d===null){R=h.stateNode;var he=h.memoizedProps,Ae=ol(m,he);R.props=Ae;var Xe=R.context,lt=m.contextType;J=Xl,typeof lt=="object"&&lt!==null&&(J=$r(lt));var pt=m.getDerivedStateFromProps;lt=typeof pt=="function"||typeof R.getSnapshotBeforeUpdate=="function",he=h.pendingProps!==he,lt||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(he||Xe!==J)&&c1(h,R,N,J),$s=!1;var tt=h.memoizedState;R.state=tt,Ai(h,N,R,E),ys(),Xe=h.memoizedState,he||tt!==Xe||$s?(typeof pt=="function"&&(_u(h,m,pt,N),Xe=h.memoizedState),(Ae=$s||gh(h,m,Ae,N,tt,Xe,J))?(lt||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(h.flags|=4194308)):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=N,h.memoizedState=Xe),R.props=N,R.state=Xe,R.context=J,N=Ae):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),N=!1)}else{R=h.stateNode,bu(d,h),J=h.memoizedProps,lt=ol(m,J),R.props=lt,pt=h.pendingProps,tt=R.context,Xe=m.contextType,Ae=Xl,typeof Xe=="object"&&Xe!==null&&(Ae=$r(Xe)),he=m.getDerivedStateFromProps,(Xe=typeof he=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(J!==pt||tt!==Ae)&&c1(h,R,N,Ae),$s=!1,tt=h.memoizedState,R.state=tt,Ai(h,N,R,E),ys();var Ze=h.memoizedState;J!==pt||tt!==Ze||$s||d!==null&&d.dependencies!==null&&xp(d.dependencies)?(typeof he=="function"&&(_u(h,m,he,N),Ze=h.memoizedState),(lt=$s||gh(h,m,lt,N,tt,Ze,Ae)||d!==null&&d.dependencies!==null&&xp(d.dependencies))?(Xe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(N,Ze,Ae),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(N,Ze,Ae)),typeof R.componentDidUpdate=="function"&&(h.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof R.componentDidUpdate!="function"||J===d.memoizedProps&&tt===d.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===d.memoizedProps&&tt===d.memoizedState||(h.flags|=1024),h.memoizedProps=N,h.memoizedState=Ze),R.props=N,R.state=Ze,R.context=Ae,N=lt):(typeof R.componentDidUpdate!="function"||J===d.memoizedProps&&tt===d.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===d.memoizedProps&&tt===d.memoizedState||(h.flags|=1024),N=!1)}return R=N,Bt(d,h),N=(h.flags&128)!==0,R||N?(R=h.stateNode,m=N&&typeof m.getDerivedStateFromError!="function"?null:R.render(),h.flags|=1,d!==null&&N?(h.child=hc(h,d.child,null,E),h.child=hc(h,null,m,E)):Nr(d,h,m,E),h.memoizedState=R.state,d=h.child):d=bo(d,h,E),d}function p1(d,h,m,N){return Yd(),h.flags|=256,Nr(d,h,m,N),h.child}var vh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hp(d){return{baseLanes:d,cachePool:B0()}}function hi(d,h,m){return d=d!==null?d.childLanes&~m:0,h&&(d|=Za),d}function m1(d,h,m){var N=h.pendingProps,E=!1,R=(h.flags&128)!==0,J;if((J=R)||(J=d!==null&&d.memoizedState===null?!1:(Br.current&2)!==0),J&&(E=!0,h.flags&=-129),J=(h.flags&32)!==0,h.flags&=-33,d===null){if(_n){if(E?Xa(h):vo(),_n){var he=kr,Ae;if(Ae=he){e:{for(Ae=he,he=Yi;Ae.nodeType!==8;){if(!he){he=null;break e}if(Ae=js(Ae.nextSibling),Ae===null){he=null;break e}}he=Ae}he!==null?(h.memoizedState={dehydrated:he,treeContext:Sr!==null?{id:Er,overflow:fo}:null,retryLane:536870912,hydrationErrors:null},Ae=Ki(18,null,null,0),Ae.stateNode=he,Ae.return=h,h.child=Ae,ti=h,kr=null,Ae=!0):Ae=!1}Ae||Ka(h)}if(he=h.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return qi(he)?h.lanes=32:h.lanes=536870912,null;zs(h)}return he=N.children,N=N.fallback,E?(vo(),E=h.mode,he=bh({mode:"hidden",children:he},E),N=Zl(N,E,m,null),he.return=h,N.return=h,he.sibling=N,h.child=he,E=h.child,E.memoizedState=Hp(m),E.childLanes=hi(d,J,m),h.memoizedState=vh,N):(Xa(h),dx(h,he))}if(Ae=d.memoizedState,Ae!==null&&(he=Ae.dehydrated,he!==null)){if(R)h.flags&256?(Xa(h),h.flags&=-257,h=hx(d,h,m)):h.memoizedState!==null?(vo(),h.child=d.child,h.flags|=128,h=null):(vo(),E=N.fallback,he=h.mode,N=bh({mode:"visible",children:N.children},he),E=Zl(E,he,m,null),E.flags|=2,N.return=h,E.return=h,N.sibling=E,h.child=N,hc(h,d.child,null,m),N=h.child,N.memoizedState=Hp(m),N.childLanes=hi(d,J,m),h.memoizedState=vh,h=E);else if(Xa(h),qi(he)){if(J=he.nextSibling&&he.nextSibling.dataset,J)var Xe=J.dgst;J=Xe,N=Error(i(419)),N.stack="",N.digest=J,tl({value:N,source:null,stack:null}),h=hx(d,h,m)}else if(di||Qd(d,h,m,!1),J=(m&d.childLanes)!==0,di||J){if(J=yr,J!==null&&(N=m&-m,N=(N&42)!==0?1:wt(N),N=(N&(J.suspendedLanes|m))!==0?0:N,N!==0&&N!==Ae.retryLane))throw Ae.retryLane=N,Ql(d,N),Ca(J,d,N),f1;he.data==="$?"||Ex(),h=hx(d,h,m)}else he.data==="$?"?(h.flags|=192,h.child=d.child,h=null):(d=Ae.treeContext,kr=js(he.nextSibling),ti=h,_n=!0,ms=null,Yi=!1,d!==null&&(Ga[Wa++]=Er,Ga[Wa++]=fo,Ga[Wa++]=Sr,Er=d.id,fo=d.overflow,Sr=h),h=dx(h,N.children),h.flags|=4096);return h}return E?(vo(),E=N.fallback,he=h.mode,Ae=d.child,Xe=Ae.sibling,N=Fi(Ae,{mode:"hidden",children:N.children}),N.subtreeFlags=Ae.subtreeFlags&65011712,Xe!==null?E=Fi(Xe,E):(E=Zl(E,he,m,null),E.flags|=2),E.return=h,N.return=h,N.sibling=E,h.child=N,N=E,E=h.child,he=d.child.memoizedState,he===null?he=Hp(m):(Ae=he.cachePool,Ae!==null?(Xe=fr._currentValue,Ae=Ae.parent!==Xe?{parent:Xe,pool:Xe}:Ae):Ae=B0(),he={baseLanes:he.baseLanes|m,cachePool:Ae}),E.memoizedState=he,E.childLanes=hi(d,J,m),h.memoizedState=vh,N):(Xa(h),m=d.child,d=m.sibling,m=Fi(m,{mode:"visible",children:N.children}),m.return=h,m.sibling=null,d!==null&&(J=h.deletions,J===null?(h.deletions=[d],h.flags|=16):J.push(d)),h.child=m,h.memoizedState=null,m)}function dx(d,h){return h=bh({mode:"visible",children:h},d.mode),h.return=d,d.child=h}function bh(d,h){return d=Ki(22,d,null,h),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function hx(d,h,m){return hc(h,d.child,null,m),d=dx(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function fx(d,h,m){d.lanes|=h;var N=d.alternate;N!==null&&(N.lanes|=h),Qi(d.return,h,m)}function px(d,h,m,N,E){var R=d.memoizedState;R===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:N,tail:m,tailMode:E}:(R.isBackwards=h,R.rendering=null,R.renderingStartTime=0,R.last=N,R.tail=m,R.tailMode=E)}function g1(d,h,m){var N=h.pendingProps,E=N.revealOrder,R=N.tail;if(Nr(d,h,N.children,m),N=Br.current,(N&2)!==0)N=N&1|2,h.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&fx(d,m,h);else if(d.tag===19)fx(d,m,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}N&=1}switch(Y(Br,N),E){case"forwards":for(m=h.child,E=null;m!==null;)d=m.alternate,d!==null&&ph(d)===null&&(E=m),m=m.sibling;m=E,m===null?(E=h.child,h.child=null):(E=m.sibling,m.sibling=null),px(h,!1,E,m,R);break;case"backwards":for(m=null,E=h.child,h.child=null;E!==null;){if(d=E.alternate,d!==null&&ph(d)===null){h.child=E;break}d=E.sibling,E.sibling=m,m=E,E=d}px(h,!0,m,null,R);break;case"together":px(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function bo(d,h,m){if(d!==null&&(h.dependencies=d.dependencies),hl|=h.lanes,(m&h.childLanes)===0)if(d!==null){if(Qd(d,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(d!==null&&h.child!==d.child)throw Error(i(153));if(h.child!==null){for(d=h.child,m=Fi(d,d.pendingProps),h.child=m,m.return=h;d.sibling!==null;)d=d.sibling,m=m.sibling=Fi(d,d.pendingProps),m.return=h;m.sibling=null}return h.child}function vs(d,h){return(d.lanes&h)!==0?!0:(d=d.dependencies,!!(d!==null&&xp(d)))}function zi(d,h,m){switch(h.tag){case 3:be(h,h.stateNode.containerInfo),ja(h,fr,d.memoizedState.cache),Yd();break;case 27:case 5:ve(h);break;case 4:be(h,h.stateNode.containerInfo);break;case 10:ja(h,h.type,h.memoizedProps.value);break;case 13:var N=h.memoizedState;if(N!==null)return N.dehydrated!==null?(Xa(h),h.flags|=128,null):(m&h.child.childLanes)!==0?m1(d,h,m):(Xa(h),d=bo(d,h,m),d!==null?d.sibling:null);Xa(h);break;case 19:var E=(d.flags&128)!==0;if(N=(m&h.childLanes)!==0,N||(Qd(d,h,m,!1),N=(m&h.childLanes)!==0),E){if(N)return g1(d,h,m);h.flags|=128}if(E=h.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Y(Br,Br.current),N)break;return null;case 22:case 23:return h.lanes=0,xh(d,h,m);case 24:ja(h,fr,d.memoizedState.cache)}return bo(d,h,m)}function Gp(d,h,m){if(d!==null)if(d.memoizedProps!==h.pendingProps)di=!0;else{if(!vs(d,m)&&(h.flags&128)===0)return di=!1,zi(d,h,m);di=(d.flags&131072)!==0}else di=!1,_n&&(h.flags&1048576)!==0&&Iy(h,Gd,h.index);switch(h.lanes=0,h.tag){case 16:e:{d=h.pendingProps;var N=h.elementType,E=N._init;if(N=E(N._payload),h.type=N,typeof N=="function")Jl(N)?(d=ol(N,d),h.tag=1,h=ll(null,h,N,d,m)):(h.tag=0,h=Cu(null,h,N,d,m));else{if(N!=null){if(E=N.$$typeof,E===O){h.tag=11,h=zp(null,h,N,d,m);break e}else if(E===I){h.tag=14,h=qp(null,h,N,d,m);break e}}throw h=te(N)||N,Error(i(306,h,""))}}return h;case 0:return Cu(d,h,h.type,h.pendingProps,m);case 1:return N=h.type,E=ol(N,h.pendingProps),ll(d,h,N,E,m);case 3:e:{if(be(h,h.stateNode.containerInfo),d===null)throw Error(i(387));N=h.pendingProps;var R=h.memoizedState;E=R.element,bu(d,h),Ai(h,N,null,m);var J=h.memoizedState;if(N=J.cache,ja(h,fr,N),N!==R.cache&&yn(h,[fr],m,!0),ys(),N=J.element,R.isDehydrated)if(R={element:N,isDehydrated:!1,cache:J.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=p1(d,h,N,m);break e}else if(N!==E){E=Li(Error(i(424)),h),tl(E),h=p1(d,h,N,m);break e}else{switch(d=h.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(kr=js(d.firstChild),ti=h,_n=!0,ms=null,Yi=!0,m=o1(h,null,N,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Yd(),N===E){h=bo(d,h,m);break e}Nr(d,h,N,m)}h=h.child}return h;case 26:return Bt(d,h),d===null?(m=hj(h.type,null,h.pendingProps,null))?h.memoizedState=m:_n||(m=h.type,d=h.pendingProps,N=yc(Me.current).createElement(m),N[Tn]=h,N[Nn]=d,ai(N,m,d),Rt(N),h.stateNode=N):h.memoizedState=hj(h.type,d.memoizedProps,h.pendingProps,d.memoizedState),null;case 27:return ve(h),d===null&&_n&&(N=h.stateNode=cj(h.type,h.pendingProps,Me.current),ti=h,Yi=!0,E=kr,es(h.type)?(zx=E,kr=js(N.firstChild)):kr=E),Nr(d,h,h.pendingProps.children,m),Bt(d,h),d===null&&(h.flags|=4194304),h.child;case 5:return d===null&&_n&&((E=N=kr)&&(N=oj(N,h.type,h.pendingProps,Yi),N!==null?(h.stateNode=N,ti=h,kr=js(N.firstChild),Yi=!1,E=!0):E=!1),E||Ka(h)),ve(h),E=h.type,R=h.pendingProps,J=d!==null?d.memoizedProps:null,N=R.children,cm(E,R)?N=null:J!==null&&cm(E,J)&&(h.flags|=32),h.memoizedState!==null&&(E=Uy(d,h,Vy,null,null,m),Hu._currentValue=E),Bt(d,h),Nr(d,h,N,m),h.child;case 6:return d===null&&_n&&((d=m=kr)&&(m=dm(m,h.pendingProps,Yi),m!==null?(h.stateNode=m,ti=h,kr=null,d=!0):d=!1),d||Ka(h)),null;case 13:return m1(d,h,m);case 4:return be(h,h.stateNode.containerInfo),N=h.pendingProps,d===null?h.child=hc(h,null,N,m):Nr(d,h,N,m),h.child;case 11:return zp(d,h,h.type,h.pendingProps,m);case 7:return Nr(d,h,h.pendingProps,m),h.child;case 8:return Nr(d,h,h.pendingProps.children,m),h.child;case 12:return Nr(d,h,h.pendingProps.children,m),h.child;case 10:return N=h.pendingProps,ja(h,h.type,N.value),Nr(d,h,N.children,m),h.child;case 9:return E=h.type._context,N=h.pendingProps.children,nc(h),E=$r(E),N=N(E),h.flags|=1,Nr(d,h,N,m),h.child;case 14:return qp(d,h,h.type,h.pendingProps,m);case 15:return Up(d,h,h.type,h.pendingProps,m);case 19:return g1(d,h,m);case 31:return N=h.pendingProps,m=h.mode,N={mode:N.mode,children:N.children},d===null?(m=bh(N,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=Fi(d.child,N),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return xh(d,h,m);case 24:return nc(h),N=$r(fr),d===null?(E=po(),E===null&&(E=yr,R=Ly(),E.pooledCache=R,R.refCount++,R!==null&&(E.pooledCacheLanes|=m),E=R),h.memoizedState={parent:N,cache:E},ic(h),ja(h,fr,E)):((d.lanes&m)!==0&&(bu(d,h),Ai(h,null,null,m),ys()),E=d.memoizedState,R=h.memoizedState,E.parent!==N?(E={parent:N,cache:N},h.memoizedState=E,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=E),ja(h,fr,N)):(N=R.cache,ja(h,fr,N),N!==E.cache&&yn(h,[fr],m,!0))),Nr(d,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(i(156,h.tag))}function jo(d){d.flags|=4}function Wp(d,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!si(h)){if(h=Sa.current,h!==null&&((In&4194048)===In?Bi!==null:(In&62914560)!==In&&(In&536870912)===0||h!==Bi))throw vu=$y,z0;d.flags|=8192}}function Kp(d,h){h!==null&&(d.flags|=4),d.flags&16384&&(h=d.tag!==22?Ct():536870912,d.lanes|=h,Du|=h)}function jh(d,h){if(!_n)switch(d.tailMode){case"hidden":h=d.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?d.tail=null:m.sibling=null;break;case"collapsed":m=d.tail;for(var N=null;m!==null;)m.alternate!==null&&(N=m),m=m.sibling;N===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:N.sibling=null}}function pr(d){var h=d.alternate!==null&&d.alternate.child===d.child,m=0,N=0;if(h)for(var E=d.child;E!==null;)m|=E.lanes|E.childLanes,N|=E.subtreeFlags&65011712,N|=E.flags&65011712,E.return=d,E=E.sibling;else for(E=d.child;E!==null;)m|=E.lanes|E.childLanes,N|=E.subtreeFlags,N|=E.flags,E.return=d,E=E.sibling;return d.subtreeFlags|=N,d.childLanes=m,h}function y1(d,h,m){var N=h.pendingProps;switch(Wd(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(h),null;case 1:return pr(h),null;case 3:return m=h.stateNode,N=null,d!==null&&(N=d.memoizedState.cache),h.memoizedState.cache!==N&&(h.flags|=2048),Ya(fr),re(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(d===null||d.child===null)&&(Kd(h)?jo(h):d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,R0())),pr(h),null;case 26:return m=h.memoizedState,d===null?(jo(h),m!==null?(pr(h),Wp(h,m)):(pr(h),h.flags&=-16777217)):m?m!==d.memoizedState?(jo(h),pr(h),Wp(h,m)):(pr(h),h.flags&=-16777217):(d.memoizedProps!==N&&jo(h),pr(h),h.flags&=-16777217),null;case 27:ce(h),m=Me.current;var E=h.type;if(d!==null&&h.stateNode!=null)d.memoizedProps!==N&&jo(h);else{if(!N){if(h.stateNode===null)throw Error(i(166));return pr(h),null}d=Oe.current,Kd(h)?M0(h):(d=cj(E,N,m),h.stateNode=d,jo(h))}return pr(h),null;case 5:if(ce(h),m=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==N&&jo(h);else{if(!N){if(h.stateNode===null)throw Error(i(166));return pr(h),null}if(d=Oe.current,Kd(h))M0(h);else{switch(E=yc(Me.current),d){case 1:d=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:d=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":d=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":d=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":d=E.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof N.is=="string"?E.createElement("select",{is:N.is}):E.createElement("select"),N.multiple?d.multiple=!0:N.size&&(d.size=N.size);break;default:d=typeof N.is=="string"?E.createElement(m,{is:N.is}):E.createElement(m)}}d[Tn]=h,d[Nn]=N;e:for(E=h.child;E!==null;){if(E.tag===5||E.tag===6)d.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===h)break e;for(;E.sibling===null;){if(E.return===null||E.return===h)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}h.stateNode=d;e:switch(ai(d,m,N),m){case"button":case"input":case"select":case"textarea":d=!!N.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&jo(h)}}return pr(h),h.flags&=-16777217,null;case 6:if(d&&h.stateNode!=null)d.memoizedProps!==N&&jo(h);else{if(typeof N!="string"&&h.stateNode===null)throw Error(i(166));if(d=Me.current,Kd(h)){if(d=h.stateNode,m=h.memoizedProps,N=null,E=ti,E!==null)switch(E.tag){case 27:case 5:N=E.memoizedProps}d[Tn]=h,d=!!(d.nodeValue===m||N!==null&&N.suppressHydrationWarning===!0||rj(d.nodeValue,m)),d||Ka(h)}else d=yc(d).createTextNode(N),d[Tn]=h,h.stateNode=d}return pr(h),null;case 13:if(N=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(E=Kd(h),N!==null&&N.dehydrated!==null){if(d===null){if(!E)throw Error(i(318));if(E=h.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[Tn]=h}else Yd(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;pr(h),E=!1}else E=R0(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=E),E=!0;if(!E)return h.flags&256?(zs(h),h):(zs(h),null)}if(zs(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=N!==null,d=d!==null&&d.memoizedState!==null,m){N=h.child,E=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(E=N.alternate.memoizedState.cachePool.pool);var R=null;N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(R=N.memoizedState.cachePool.pool),R!==E&&(N.flags|=2048)}return m!==d&&m&&(h.child.flags|=8192),Kp(h,h.updateQueue),pr(h),null;case 4:return re(),d===null&&Lx(h.stateNode.containerInfo),pr(h),null;case 10:return Ya(h.type),pr(h),null;case 19:if(je(Br),E=h.memoizedState,E===null)return pr(h),null;if(N=(h.flags&128)!==0,R=E.rendering,R===null)if(N)jh(E,!1);else{if(zr!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(R=ph(d),R!==null){for(h.flags|=128,jh(E,!1),d=R.updateQueue,h.updateQueue=d,Kp(h,d),h.subtreeFlags=0,d=m,m=h.child;m!==null;)Hd(m,d),m=m.sibling;return Y(Br,Br.current&1|2),h.child}d=d.sibling}E.tail!==null&&ee()>Mu&&(h.flags|=128,N=!0,jh(E,!1),h.lanes=4194304)}else{if(!N)if(d=ph(R),d!==null){if(h.flags|=128,N=!0,d=d.updateQueue,h.updateQueue=d,Kp(h,d),jh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!R.alternate&&!_n)return pr(h),null}else 2*ee()-E.renderingStartTime>Mu&&m!==536870912&&(h.flags|=128,N=!0,jh(E,!1),h.lanes=4194304);E.isBackwards?(R.sibling=h.child,h.child=R):(d=E.last,d!==null?d.sibling=R:h.child=R,E.last=R)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.renderingStartTime=ee(),h.sibling=null,d=Br.current,Y(Br,N?d&1|2:d&1),h):(pr(h),null);case 22:case 23:return zs(h),qy(),N=h.memoizedState!==null,d!==null?d.memoizedState!==null!==N&&(h.flags|=8192):N&&(h.flags|=8192),N?(m&536870912)!==0&&(h.flags&128)===0&&(pr(h),h.subtreeFlags&6&&(h.flags|=8192)):pr(h),m=h.updateQueue,m!==null&&Kp(h,m.retryQueue),m=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(m=d.memoizedState.cachePool.pool),N=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(N=h.memoizedState.cachePool.pool),N!==m&&(h.flags|=2048),d!==null&&je(rc),null;case 24:return m=null,d!==null&&(m=d.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Ya(fr),pr(h),null;case 25:return null;case 30:return null}throw Error(i(156,h.tag))}function x1(d,h){switch(Wd(h),h.tag){case 1:return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return Ya(fr),re(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 26:case 27:case 5:return ce(h),null;case 13:if(zs(h),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(i(340));Yd()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return je(Br),null;case 4:return re(),null;case 10:return Ya(h.type),null;case 22:case 23:return zs(h),qy(),d!==null&&je(rc),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 24:return Ya(fr),null;case 25:return null;default:return null}}function v1(d,h){switch(Wd(h),h.tag){case 3:Ya(fr),re();break;case 26:case 27:case 5:ce(h);break;case 4:re();break;case 13:zs(h);break;case 19:je(Br);break;case 10:Ya(h.type);break;case 22:case 23:zs(h),qy(),d!==null&&je(rc);break;case 24:Ya(fr)}}function wh(d,h){try{var m=h.updateQueue,N=m!==null?m.lastEffect:null;if(N!==null){var E=N.next;m=E;do{if((m.tag&d)===d){N=void 0;var R=m.create,J=m.inst;N=R(),J.destroy=N}m=m.next}while(m!==E)}}catch(he){mr(h,h.return,he)}}function cl(d,h,m){try{var N=h.updateQueue,E=N!==null?N.lastEffect:null;if(E!==null){var R=E.next;N=R;do{if((N.tag&d)===d){var J=N.inst,he=J.destroy;if(he!==void 0){J.destroy=void 0,E=h;var Ae=m,Xe=he;try{Xe()}catch(lt){mr(E,Ae,lt)}}}N=N.next}while(N!==R)}}catch(lt){mr(h,h.return,lt)}}function b1(d){var h=d.updateQueue;if(h!==null){var m=d.stateNode;try{zy(h,m)}catch(N){mr(d,d.return,N)}}}function mx(d,h,m){m.props=ol(d.type,d.memoizedProps),m.state=d.memoizedState;try{m.componentWillUnmount()}catch(N){mr(d,h,N)}}function Tu(d,h){try{var m=d.ref;if(m!==null){switch(d.tag){case 26:case 27:case 5:var N=d.stateNode;break;case 30:N=d.stateNode;break;default:N=d.stateNode}typeof m=="function"?d.refCleanup=m(N):m.current=N}}catch(E){mr(d,h,E)}}function Us(d,h){var m=d.ref,N=d.refCleanup;if(m!==null)if(typeof N=="function")try{N()}catch(E){mr(d,h,E)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){mr(d,h,E)}else m.current=null}function Yp(d){var h=d.type,m=d.memoizedProps,N=d.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&N.focus();break e;case"img":m.src?N.src=m.src:m.srcSet&&(N.srcset=m.srcSet)}}catch(E){mr(d,d.return,E)}}function Qp(d,h,m){try{var N=d.stateNode;W_(N,d.type,m,h),N[Nn]=h}catch(E){mr(d,d.return,E)}}function Au(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&es(d.type)||d.tag===4}function Sh(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Au(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&es(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Xp(d,h,m){var N=d.tag;if(N===5||N===6)d=d.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(d,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(d),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=om));else if(N!==4&&(N===27&&es(d.type)&&(m=d.stateNode,h=null),d=d.child,d!==null))for(Xp(d,h,m),d=d.sibling;d!==null;)Xp(d,h,m),d=d.sibling}function Nh(d,h,m){var N=d.tag;if(N===5||N===6)d=d.stateNode,h?m.insertBefore(d,h):m.appendChild(d);else if(N!==4&&(N===27&&es(d.type)&&(m=d.stateNode),d=d.child,d!==null))for(Nh(d,h,m),d=d.sibling;d!==null;)Nh(d,h,m),d=d.sibling}function _h(d){var h=d.stateNode,m=d.memoizedProps;try{for(var N=d.type,E=h.attributes;E.length;)h.removeAttributeNode(E[0]);ai(h,N,m),h[Tn]=d,h[Nn]=m}catch(R){mr(d,d.return,R)}}var Vs=!1,Kn=!1,wo=!1,j1=typeof WeakSet=="function"?WeakSet:Set,ri=null;function D_(d,h){if(d=d.containerInfo,bs=mm,d=O0(d),Py(d)){if("selectionStart"in d)var m={start:d.selectionStart,end:d.selectionEnd};else e:{m=(m=d.ownerDocument)&&m.defaultView||window;var N=m.getSelection&&m.getSelection();if(N&&N.rangeCount!==0){m=N.anchorNode;var E=N.anchorOffset,R=N.focusNode;N=N.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var J=0,he=-1,Ae=-1,Xe=0,lt=0,pt=d,tt=null;t:for(;;){for(var Ze;pt!==m||E!==0&&pt.nodeType!==3||(he=J+E),pt!==R||N!==0&&pt.nodeType!==3||(Ae=J+N),pt.nodeType===3&&(J+=pt.nodeValue.length),(Ze=pt.firstChild)!==null;)tt=pt,pt=Ze;for(;;){if(pt===d)break t;if(tt===m&&++Xe===E&&(he=J),tt===R&&++lt===N&&(Ae=J),(Ze=pt.nextSibling)!==null)break;pt=tt,tt=pt.parentNode}pt=Ze}m=he===-1||Ae===-1?null:{start:he,end:Ae}}else m=null}m=m||{start:0,end:0}}else m=null;for(lm={focusedElem:d,selectionRange:m},mm=!1,ri=h;ri!==null;)if(h=ri,d=h.child,(h.subtreeFlags&1024)!==0&&d!==null)d.return=h,ri=d;else for(;ri!==null;){switch(h=ri,R=h.alternate,d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&R!==null){d=void 0,m=h,E=R.memoizedProps,R=R.memoizedState,N=m.stateNode;try{var Gt=ol(m.type,E,m.elementType===m.type);d=N.getSnapshotBeforeUpdate(Gt,R),N.__reactInternalSnapshotBeforeUpdate=d}catch(Ht){mr(m,m.return,Ht)}}break;case 3:if((d&1024)!==0){if(d=h.stateNode.containerInfo,m=d.nodeType,m===9)Bx(d);else if(m===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":Bx(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(i(163))}if(d=h.sibling,d!==null){d.return=h.return,ri=d;break}ri=h.return}}function w1(d,h,m){var N=m.flags;switch(m.tag){case 0:case 11:case 15:ul(d,m),N&4&&wh(5,m);break;case 1:if(ul(d,m),N&4)if(d=m.stateNode,h===null)try{d.componentDidMount()}catch(J){mr(m,m.return,J)}else{var E=ol(m.type,h.memoizedProps);h=h.memoizedState;try{d.componentDidUpdate(E,h,d.__reactInternalSnapshotBeforeUpdate)}catch(J){mr(m,m.return,J)}}N&64&&b1(m),N&512&&Tu(m,m.return);break;case 3:if(ul(d,m),N&64&&(d=m.updateQueue,d!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{zy(d,h)}catch(J){mr(m,m.return,J)}}break;case 27:h===null&&N&4&&_h(m);case 26:case 5:ul(d,m),h===null&&N&4&&Yp(m),N&512&&Tu(m,m.return);break;case 12:ul(d,m);break;case 13:ul(d,m),N&4&&_1(d,m),N&64&&(d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(m=nm.bind(null,m),Bu(d,m))));break;case 22:if(N=m.memoizedState!==null||Vs,!N){h=h!==null&&h.memoizedState!==null||Kn,E=Vs;var R=Kn;Vs=N,(Kn=h)&&!R?No(d,m,(m.subtreeFlags&8772)!==0):ul(d,m),Vs=E,Kn=R}break;case 30:break;default:ul(d,m)}}function S1(d){var h=d.alternate;h!==null&&(d.alternate=null,S1(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&Od(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Pr=null,ta=!1;function So(d,h,m){for(m=m.child;m!==null;)N1(d,h,m),m=m.sibling}function N1(d,h,m){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(K,m)}catch{}switch(m.tag){case 26:Kn||Us(m,h),So(d,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Kn||Us(m,h);var N=Pr,E=ta;es(m.type)&&(Pr=m.stateNode,ta=!1),So(d,h,m),Rh(m.stateNode),Pr=N,ta=E;break;case 5:Kn||Us(m,h);case 6:if(N=Pr,E=ta,Pr=null,So(d,h,m),Pr=N,ta=E,Pr!==null)if(ta)try{(Pr.nodeType===9?Pr.body:Pr.nodeName==="HTML"?Pr.ownerDocument.body:Pr).removeChild(m.stateNode)}catch(R){mr(m,h,R)}else try{Pr.removeChild(m.stateNode)}catch(R){mr(m,h,R)}break;case 18:Pr!==null&&(ta?(d=Pr,um(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,m.stateNode),Vh(d)):um(Pr,m.stateNode));break;case 4:N=Pr,E=ta,Pr=m.stateNode.containerInfo,ta=!0,So(d,h,m),Pr=N,ta=E;break;case 0:case 11:case 14:case 15:Kn||cl(2,m,h),Kn||cl(4,m,h),So(d,h,m);break;case 1:Kn||(Us(m,h),N=m.stateNode,typeof N.componentWillUnmount=="function"&&mx(m,h,N)),So(d,h,m);break;case 21:So(d,h,m);break;case 22:Kn=(N=Kn)||m.memoizedState!==null,So(d,h,m),Kn=N;break;default:So(d,h,m)}}function _1(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Vh(d)}catch(m){mr(h,h.return,m)}}function M_(d){switch(d.tag){case 13:case 19:var h=d.stateNode;return h===null&&(h=d.stateNode=new j1),h;case 22:return d=d.stateNode,h=d._retryCache,h===null&&(h=d._retryCache=new j1),h;default:throw Error(i(435,d.tag))}}function gx(d,h){var m=M_(d);h.forEach(function(N){var E=B_.bind(null,d,N);m.has(N)||(m.add(N),N.then(E,E))})}function Na(d,h){var m=h.deletions;if(m!==null)for(var N=0;N<m.length;N++){var E=m[N],R=d,J=h,he=J;e:for(;he!==null;){switch(he.tag){case 27:if(es(he.type)){Pr=he.stateNode,ta=!1;break e}break;case 5:Pr=he.stateNode,ta=!1;break e;case 3:case 4:Pr=he.stateNode.containerInfo,ta=!0;break e}he=he.return}if(Pr===null)throw Error(i(160));N1(R,J,E),Pr=null,ta=!1,R=E.alternate,R!==null&&(R.return=null),E.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)yx(h,d),h=h.sibling}var Ja=null;function yx(d,h){var m=d.alternate,N=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Na(h,d),na(d),N&4&&(cl(3,d,d.return),wh(3,d),cl(5,d,d.return));break;case 1:Na(h,d),na(d),N&512&&(Kn||m===null||Us(m,m.return)),N&64&&Vs&&(d=d.updateQueue,d!==null&&(N=d.callbacks,N!==null&&(m=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=m===null?N:m.concat(N))));break;case 26:var E=Ja;if(Na(h,d),na(d),N&512&&(Kn||m===null||Us(m,m.return)),N&4){var R=m!==null?m.memoizedState:null;if(N=d.memoizedState,m===null)if(N===null)if(d.stateNode===null){e:{N=d.type,m=d.memoizedProps,E=E.ownerDocument||E;t:switch(N){case"title":R=E.getElementsByTagName("title")[0],(!R||R[Gl]||R[Tn]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=E.createElement(N),E.head.insertBefore(R,E.querySelector("head > title"))),ai(R,N,m),R[Tn]=d,Rt(R),N=R;break e;case"link":var J=mj("link","href",E).get(N+(m.href||""));if(J){for(var he=0;he<J.length;he++)if(R=J[he],R.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&R.getAttribute("rel")===(m.rel==null?null:m.rel)&&R.getAttribute("title")===(m.title==null?null:m.title)&&R.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){J.splice(he,1);break t}}R=E.createElement(N),ai(R,N,m),E.head.appendChild(R);break;case"meta":if(J=mj("meta","content",E).get(N+(m.content||""))){for(he=0;he<J.length;he++)if(R=J[he],R.getAttribute("content")===(m.content==null?null:""+m.content)&&R.getAttribute("name")===(m.name==null?null:m.name)&&R.getAttribute("property")===(m.property==null?null:m.property)&&R.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&R.getAttribute("charset")===(m.charSet==null?null:m.charSet)){J.splice(he,1);break t}}R=E.createElement(N),ai(R,N,m),E.head.appendChild(R);break;default:throw Error(i(468,N))}R[Tn]=d,Rt(R),N=R}d.stateNode=N}else gj(E,d.type,d.stateNode);else d.stateNode=pj(E,N,d.memoizedProps);else R!==N?(R===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):R.count--,N===null?gj(E,d.type,d.stateNode):pj(E,N,d.memoizedProps)):N===null&&d.stateNode!==null&&Qp(d,d.memoizedProps,m.memoizedProps)}break;case 27:Na(h,d),na(d),N&512&&(Kn||m===null||Us(m,m.return)),m!==null&&N&4&&Qp(d,d.memoizedProps,m.memoizedProps);break;case 5:if(Na(h,d),na(d),N&512&&(Kn||m===null||Us(m,m.return)),d.flags&32){E=d.stateNode;try{Wo(E,"")}catch(Ze){mr(d,d.return,Ze)}}N&4&&d.stateNode!=null&&(E=d.memoizedProps,Qp(d,E,m!==null?m.memoizedProps:E)),N&1024&&(wo=!0);break;case 6:if(Na(h,d),na(d),N&4){if(d.stateNode===null)throw Error(i(162));N=d.memoizedProps,m=d.stateNode;try{m.nodeValue=N}catch(Ze){mr(d,d.return,Ze)}}break;case 3:if(Vu=null,E=Ja,Ja=ln(h.containerInfo),Na(h,d),Ja=E,na(d),N&4&&m!==null&&m.memoizedState.isDehydrated)try{Vh(h.containerInfo)}catch(Ze){mr(d,d.return,Ze)}wo&&(wo=!1,C1(d));break;case 4:N=Ja,Ja=ln(d.stateNode.containerInfo),Na(h,d),na(d),Ja=N;break;case 12:Na(h,d),na(d);break;case 13:Na(h,d),na(d),d.child.flags&8192&&d.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Nx=ee()),N&4&&(N=d.updateQueue,N!==null&&(d.updateQueue=null,gx(d,N)));break;case 22:E=d.memoizedState!==null;var Ae=m!==null&&m.memoizedState!==null,Xe=Vs,lt=Kn;if(Vs=Xe||E,Kn=lt||Ae,Na(h,d),Kn=lt,Vs=Xe,na(d),N&8192)e:for(h=d.stateNode,h._visibility=E?h._visibility&-2:h._visibility|1,E&&(m===null||Ae||Vs||Kn||mc(d)),m=null,h=d;;){if(h.tag===5||h.tag===26){if(m===null){Ae=m=h;try{if(R=Ae.stateNode,E)J=R.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{he=Ae.stateNode;var pt=Ae.memoizedProps.style,tt=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;he.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Ze){mr(Ae,Ae.return,Ze)}}}else if(h.tag===6){if(m===null){Ae=h;try{Ae.stateNode.nodeValue=E?"":Ae.memoizedProps}catch(Ze){mr(Ae,Ae.return,Ze)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===d)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}N&4&&(N=d.updateQueue,N!==null&&(m=N.retryQueue,m!==null&&(N.retryQueue=null,gx(d,m))));break;case 19:Na(h,d),na(d),N&4&&(N=d.updateQueue,N!==null&&(d.updateQueue=null,gx(d,N)));break;case 30:break;case 21:break;default:Na(h,d),na(d)}}function na(d){var h=d.flags;if(h&2){try{for(var m,N=d.return;N!==null;){if(Au(N)){m=N;break}N=N.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var E=m.stateNode,R=Sh(d);Nh(d,R,E);break;case 5:var J=m.stateNode;m.flags&32&&(Wo(J,""),m.flags&=-33);var he=Sh(d);Nh(d,he,J);break;case 3:case 4:var Ae=m.stateNode.containerInfo,Xe=Sh(d);Xp(d,Xe,Ae);break;default:throw Error(i(161))}}catch(lt){mr(d,d.return,lt)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function C1(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var h=d;C1(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),d=d.sibling}}function ul(d,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)w1(d,h.alternate,h),h=h.sibling}function mc(d){for(d=d.child;d!==null;){var h=d;switch(h.tag){case 0:case 11:case 14:case 15:cl(4,h,h.return),mc(h);break;case 1:Us(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&mx(h,h.return,m),mc(h);break;case 27:Rh(h.stateNode);case 26:case 5:Us(h,h.return),mc(h);break;case 22:h.memoizedState===null&&mc(h);break;case 30:mc(h);break;default:mc(h)}d=d.sibling}}function No(d,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var N=h.alternate,E=d,R=h,J=R.flags;switch(R.tag){case 0:case 11:case 15:No(E,R,m),wh(4,R);break;case 1:if(No(E,R,m),N=R,E=N.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Xe){mr(N,N.return,Xe)}if(N=R,E=N.updateQueue,E!==null){var he=N.stateNode;try{var Ae=E.shared.hiddenCallbacks;if(Ae!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Ae.length;E++)H0(Ae[E],he)}catch(Xe){mr(N,N.return,Xe)}}m&&J&64&&b1(R),Tu(R,R.return);break;case 27:_h(R);case 26:case 5:No(E,R,m),m&&N===null&&J&4&&Yp(R),Tu(R,R.return);break;case 12:No(E,R,m);break;case 13:No(E,R,m),m&&J&4&&_1(E,R);break;case 22:R.memoizedState===null&&No(E,R,m),Tu(R,R.return);break;case 30:break;default:No(E,R,m)}h=h.sibling}}function xx(d,h){var m=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(m=d.memoizedState.cachePool.pool),d=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(d=h.memoizedState.cachePool.pool),d!==m&&(d!=null&&d.refCount++,m!=null&&Xd(m))}function vx(d,h){d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&Xd(d))}function Hs(d,h,m,N){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)T1(d,h,m,N),h=h.sibling}function T1(d,h,m,N){var E=h.flags;switch(h.tag){case 0:case 11:case 15:Hs(d,h,m,N),E&2048&&wh(9,h);break;case 1:Hs(d,h,m,N);break;case 3:Hs(d,h,m,N),E&2048&&(d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&Xd(d)));break;case 12:if(E&2048){Hs(d,h,m,N),d=h.stateNode;try{var R=h.memoizedProps,J=R.id,he=R.onPostCommit;typeof he=="function"&&he(J,h.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(Ae){mr(h,h.return,Ae)}}else Hs(d,h,m,N);break;case 13:Hs(d,h,m,N);break;case 23:break;case 22:R=h.stateNode,J=h.alternate,h.memoizedState!==null?R._visibility&2?Hs(d,h,m,N):Ch(d,h):R._visibility&2?Hs(d,h,m,N):(R._visibility|=2,Eu(d,h,m,N,(h.subtreeFlags&10256)!==0)),E&2048&&xx(J,h);break;case 24:Hs(d,h,m,N),E&2048&&vx(h.alternate,h);break;default:Hs(d,h,m,N)}}function Eu(d,h,m,N,E){for(E=E&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var R=d,J=h,he=m,Ae=N,Xe=J.flags;switch(J.tag){case 0:case 11:case 15:Eu(R,J,he,Ae,E),wh(8,J);break;case 23:break;case 22:var lt=J.stateNode;J.memoizedState!==null?lt._visibility&2?Eu(R,J,he,Ae,E):Ch(R,J):(lt._visibility|=2,Eu(R,J,he,Ae,E)),E&&Xe&2048&&xx(J.alternate,J);break;case 24:Eu(R,J,he,Ae,E),E&&Xe&2048&&vx(J.alternate,J);break;default:Eu(R,J,he,Ae,E)}h=h.sibling}}function Ch(d,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=d,N=h,E=N.flags;switch(N.tag){case 22:Ch(m,N),E&2048&&xx(N.alternate,N);break;case 24:Ch(m,N),E&2048&&vx(N.alternate,N);break;default:Ch(m,N)}h=h.sibling}}var ki=8192;function ku(d){if(d.subtreeFlags&ki)for(d=d.child;d!==null;)A1(d),d=d.sibling}function A1(d){switch(d.tag){case 26:ku(d),d.flags&ki&&d.memoizedState!==null&&aC(Ja,d.memoizedState,d.memoizedProps);break;case 5:ku(d);break;case 3:case 4:var h=Ja;Ja=ln(d.stateNode.containerInfo),ku(d),Ja=h;break;case 22:d.memoizedState===null&&(h=d.alternate,h!==null&&h.memoizedState!==null?(h=ki,ki=16777216,ku(d),ki=h):ku(d));break;default:ku(d)}}function E1(d){var h=d.alternate;if(h!==null&&(d=h.child,d!==null)){h.child=null;do h=d.sibling,d.sibling=null,d=h;while(d!==null)}}function Pu(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];ri=N,P1(N,d)}E1(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)k1(d),d=d.sibling}function k1(d){switch(d.tag){case 0:case 11:case 15:Pu(d),d.flags&2048&&cl(9,d,d.return);break;case 3:Pu(d);break;case 12:Pu(d);break;case 22:var h=d.stateNode;d.memoizedState!==null&&h._visibility&2&&(d.return===null||d.return.tag!==13)?(h._visibility&=-3,Jp(d)):Pu(d);break;default:Pu(d)}}function Jp(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];ri=N,P1(N,d)}E1(d)}for(d=d.child;d!==null;){switch(h=d,h.tag){case 0:case 11:case 15:cl(8,h,h.return),Jp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,Jp(h));break;default:Jp(h)}d=d.sibling}}function P1(d,h){for(;ri!==null;){var m=ri;switch(m.tag){case 0:case 11:case 15:cl(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var N=m.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:Xd(m.memoizedState.cache)}if(N=m.child,N!==null)N.return=m,ri=N;else e:for(m=d;ri!==null;){N=ri;var E=N.sibling,R=N.return;if(S1(N),N===m){ri=null;break e}if(E!==null){E.return=R,ri=E;break e}ri=R}}}var I_={getCacheForType:function(d){var h=$r(fr),m=h.data.get(d);return m===void 0&&(m=d(),h.data.set(d,m)),m}},bx=typeof WeakMap=="function"?WeakMap:Map,er=0,yr=null,wn=null,In=0,tr=0,_a=null,dl=!1,Ou=!1,jx=!1,_o=0,zr=0,hl=0,gc=0,wx=0,Za=0,Du=0,Th=null,ra=null,Sx=!1,Nx=0,Mu=1/0,Ah=null,fl=null,ji=0,pl=null,Iu=null,Ru=0,_x=0,Cx=null,O1=null,Lu=0,Tx=null;function Pi(){if((er&2)!==0&&In!==0)return In&-In;if(q.T!==null){var d=xu;return d!==0?d:am()}return Xn()}function D1(){Za===0&&(Za=(In&536870912)===0||_n?dt():536870912);var d=Sa.current;return d!==null&&(d.flags|=32),Za}function Ca(d,h,m){(d===yr&&(tr===2||tr===9)||d.cancelPendingCommit!==null)&&(Fu(d,0),ml(d,In,Za,!1)),Ce(d,m),((er&2)===0||d!==yr)&&(d===yr&&((er&2)===0&&(gc|=m),zr===4&&ml(d,In,Za,!1)),Gs(d))}function M1(d,h,m){if((er&6)!==0)throw Error(i(327));var N=!m&&(h&124)===0&&(h&d.expiredLanes)===0||Je(d,h),E=N?F_(d,h):kx(d,h,!0),R=N;do{if(E===0){Ou&&!N&&ml(d,h,0,!1);break}else{if(m=d.current.alternate,R&&!R_(m)){E=kx(d,h,!1),R=!1;continue}if(E===2){if(R=h,d.errorRecoveryDisabledLanes&R)var J=0;else J=d.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){h=J;e:{var he=d;E=Th;var Ae=he.current.memoizedState.isDehydrated;if(Ae&&(Fu(he,J).flags|=256),J=kx(he,J,!1),J!==2){if(jx&&!Ae){he.errorRecoveryDisabledLanes|=R,gc|=R,E=4;break e}R=ra,ra=E,R!==null&&(ra===null?ra=R:ra.push.apply(ra,R))}E=J}if(R=!1,E!==2)continue}}if(E===1){Fu(d,0),ml(d,h,0,!0);break}e:{switch(N=d,R=E,R){case 0:case 1:throw Error(i(345));case 4:if((h&4194048)!==h)break;case 6:ml(N,h,Za,!dl);break e;case 2:ra=null;break;case 3:case 5:break;default:throw Error(i(329))}if((h&62914560)===h&&(E=Nx+300-ee(),10<E)){if(ml(N,h,Za,!dl),Pe(N,0,!0)!==0)break e;N.timeoutHandle=ij(I1.bind(null,N,m,ra,Ah,Sx,h,Za,gc,Du,dl,R,2,-0,0),E);break e}I1(N,m,ra,Ah,Sx,h,Za,gc,Du,dl,R,0,-0,0)}}break}while(!0);Gs(d)}function I1(d,h,m,N,E,R,J,he,Ae,Xe,lt,pt,tt,Ze){if(d.timeoutHandle=-1,pt=h.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(fi={stylesheets:null,count:0,unsuspend:iC},A1(h),pt=sC(),pt!==null)){d.cancelPendingCommit=pt(Eh.bind(null,d,h,R,m,N,E,J,he,Ae,lt,1,tt,Ze)),ml(d,R,J,!Xe);return}Eh(d,h,R,m,N,E,J,he,Ae)}function R_(d){for(var h=d;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var N=0;N<m.length;N++){var E=m[N],R=E.getSnapshot;E=E.value;try{if(!va(R(),E))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ml(d,h,m,N){h&=~wx,h&=~gc,d.suspendedLanes|=h,d.pingedLanes&=~h,N&&(d.warmLanes|=h),N=d.expirationTimes;for(var E=h;0<E;){var R=31-me(E),J=1<<R;N[R]=-1,E&=~J}m!==0&&At(d,m,h)}function Zp(){return(er&6)===0?(Oh(0),!1):!0}function Ax(){if(wn!==null){if(tr===0)var d=wn.return;else d=wn,de=nl=null,Np(d),ni=null,ea=0,d=wn;for(;d!==null;)v1(d.alternate,d),d=d.return;wn=null}}function Fu(d,h){var m=d.timeoutHandle;m!==-1&&(d.timeoutHandle=-1,Y_(m)),m=d.cancelPendingCommit,m!==null&&(d.cancelPendingCommit=null,m()),Ax(),yr=d,wn=m=Fi(d.current,null),In=h,tr=0,_a=null,dl=!1,Ou=Je(d,h),jx=!1,Du=Za=wx=gc=hl=zr=0,ra=Th=null,Sx=!1,(h&8)!==0&&(h|=h&32);var N=d.entangledLanes;if(N!==0)for(d=d.entanglements,N&=h;0<N;){var E=31-me(N),R=1<<E;h|=d[E],N&=~R}return _o=h,Yl(),m}function R1(d,h){mn=null,q.H=hh,h===$i||h===jp?(h=U0(),tr=3):h===z0?(h=U0(),tr=4):tr=h===f1?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,_a=h,wn===null&&(zr=1,yh(d,Li(h,d.current)))}function L1(){var d=q.H;return q.H=hh,d===null?hh:d}function F1(){var d=q.A;return q.A=I_,d}function Ex(){zr=4,dl||(In&4194048)!==In&&Sa.current!==null||(Ou=!0),(hl&134217727)===0&&(gc&134217727)===0||yr===null||ml(yr,In,Za,!1)}function kx(d,h,m){var N=er;er|=2;var E=L1(),R=F1();(yr!==d||In!==h)&&(Ah=null,Fu(d,h)),h=!1;var J=zr;e:do try{if(tr!==0&&wn!==null){var he=wn,Ae=_a;switch(tr){case 8:Ax(),J=6;break e;case 3:case 2:case 9:case 6:Sa.current===null&&(h=!0);var Xe=tr;if(tr=0,_a=null,$u(d,he,Ae,Xe),m&&Ou){J=0;break e}break;default:Xe=tr,tr=0,_a=null,$u(d,he,Ae,Xe)}}L_(),J=zr;break}catch(lt){R1(d,lt)}while(!0);return h&&d.shellSuspendCounter++,de=nl=null,er=N,q.H=E,q.A=R,wn===null&&(yr=null,In=0,Yl()),J}function L_(){for(;wn!==null;)Px(wn)}function F_(d,h){var m=er;er|=2;var N=L1(),E=F1();yr!==d||In!==h?(Ah=null,Mu=ee()+500,Fu(d,h)):Ou=Je(d,h);e:do try{if(tr!==0&&wn!==null){h=wn;var R=_a;t:switch(tr){case 1:tr=0,_a=null,$u(d,h,R,1);break;case 2:case 9:if(q0(R)){tr=0,_a=null,B1(h);break}h=function(){tr!==2&&tr!==9||yr!==d||(tr=7),Gs(d)},R.then(h,h);break e;case 3:tr=7;break e;case 4:tr=5;break e;case 7:q0(R)?(tr=0,_a=null,B1(h)):(tr=0,_a=null,$u(d,h,R,7));break;case 5:var J=null;switch(wn.tag){case 26:J=wn.memoizedState;case 5:case 27:var he=wn;if(!J||si(J)){tr=0,_a=null;var Ae=he.sibling;if(Ae!==null)wn=Ae;else{var Xe=he.return;Xe!==null?(wn=Xe,em(Xe)):wn=null}break t}}tr=0,_a=null,$u(d,h,R,5);break;case 6:tr=0,_a=null,$u(d,h,R,6);break;case 8:Ax(),zr=6;break e;default:throw Error(i(462))}}$1();break}catch(lt){R1(d,lt)}while(!0);return de=nl=null,q.H=N,q.A=E,er=m,wn!==null?0:(yr=null,In=0,Yl(),zr)}function $1(){for(;wn!==null&&!ie();)Px(wn)}function Px(d){var h=Gp(d.alternate,d,_o);d.memoizedProps=d.pendingProps,h===null?em(d):wn=h}function B1(d){var h=d,m=h.alternate;switch(h.tag){case 15:case 0:h=Vp(m,h,h.pendingProps,h.type,void 0,In);break;case 11:h=Vp(m,h,h.pendingProps,h.type.render,h.ref,In);break;case 5:Np(h);default:v1(m,h),h=wn=Hd(h,_o),h=Gp(m,h,_o)}d.memoizedProps=d.pendingProps,h===null?em(d):wn=h}function $u(d,h,m,N){de=nl=null,Np(h),ni=null,ea=0;var E=h.return;try{if(h1(d,E,h,m,In)){zr=1,yh(d,Li(m,d.current)),wn=null;return}}catch(R){if(E!==null)throw wn=E,R;zr=1,yh(d,Li(m,d.current)),wn=null;return}h.flags&32768?(_n||N===1?d=!0:Ou||(In&536870912)!==0?d=!1:(dl=d=!0,(N===2||N===9||N===3||N===6)&&(N=Sa.current,N!==null&&N.tag===13&&(N.flags|=16384))),z1(h,d)):em(h)}function em(d){var h=d;do{if((h.flags&32768)!==0){z1(h,dl);return}d=h.return;var m=y1(h.alternate,h,_o);if(m!==null){wn=m;return}if(h=h.sibling,h!==null){wn=h;return}wn=h=d}while(h!==null);zr===0&&(zr=5)}function z1(d,h){do{var m=x1(d.alternate,d);if(m!==null){m.flags&=32767,wn=m;return}if(m=d.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(d=d.sibling,d!==null)){wn=d;return}wn=d=m}while(d!==null);zr=6,wn=null}function Eh(d,h,m,N,E,R,J,he,Ae){d.cancelPendingCommit=null;do tm();while(ji!==0);if((er&6)!==0)throw Error(i(327));if(h!==null){if(h===d.current)throw Error(i(177));if(R=h.lanes|h.childLanes,R|=Dy,ct(d,m,R,J,he,Ae),d===yr&&(wn=yr=null,In=0),Iu=h,pl=d,Ru=m,_x=R,Cx=E,O1=N,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Y1(Le,function(){return G1(),null})):(d.callbackNode=null,d.callbackPriority=0),N=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||N){N=q.T,q.T=null,E=W.p,W.p=2,J=er,er|=4;try{D_(d,h,m)}finally{er=J,W.p=E,q.T=N}}ji=1,q1(),U1(),V1()}}function q1(){if(ji===1){ji=0;var d=pl,h=Iu,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=q.T,q.T=null;var N=W.p;W.p=2;var E=er;er|=4;try{yx(h,d);var R=lm,J=O0(d.containerInfo),he=R.focusedElem,Ae=R.selectionRange;if(J!==he&&he&&he.ownerDocument&&P0(he.ownerDocument.documentElement,he)){if(Ae!==null&&Py(he)){var Xe=Ae.start,lt=Ae.end;if(lt===void 0&&(lt=Xe),"selectionStart"in he)he.selectionStart=Xe,he.selectionEnd=Math.min(lt,he.value.length);else{var pt=he.ownerDocument||document,tt=pt&&pt.defaultView||window;if(tt.getSelection){var Ze=tt.getSelection(),Gt=he.textContent.length,Ht=Math.min(Ae.start,Gt),sr=Ae.end===void 0?Ht:Math.min(Ae.end,Gt);!Ze.extend&&Ht>sr&&(J=sr,sr=Ht,Ht=J);var He=ky(he,Ht),Fe=ky(he,sr);if(He&&Fe&&(Ze.rangeCount!==1||Ze.anchorNode!==He.node||Ze.anchorOffset!==He.offset||Ze.focusNode!==Fe.node||Ze.focusOffset!==Fe.offset)){var Qe=pt.createRange();Qe.setStart(He.node,He.offset),Ze.removeAllRanges(),Ht>sr?(Ze.addRange(Qe),Ze.extend(Fe.node,Fe.offset)):(Qe.setEnd(Fe.node,Fe.offset),Ze.addRange(Qe))}}}}for(pt=[],Ze=he;Ze=Ze.parentNode;)Ze.nodeType===1&&pt.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof he.focus=="function"&&he.focus(),he=0;he<pt.length;he++){var ht=pt[he];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}mm=!!bs,lm=bs=null}finally{er=E,W.p=N,q.T=m}}d.current=h,ji=2}}function U1(){if(ji===2){ji=0;var d=pl,h=Iu,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=q.T,q.T=null;var N=W.p;W.p=2;var E=er;er|=4;try{w1(d,h.alternate,h)}finally{er=E,W.p=N,q.T=m}}ji=3}}function V1(){if(ji===4||ji===3){ji=0,ge();var d=pl,h=Iu,m=Ru,N=O1;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?ji=5:(ji=0,Iu=pl=null,H1(d,d.pendingLanes));var E=d.pendingLanes;if(E===0&&(fl=null),Tt(m),h=h.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(K,h,void 0,(h.current.flags&128)===128)}catch{}if(N!==null){h=q.T,E=W.p,W.p=2,q.T=null;try{for(var R=d.onRecoverableError,J=0;J<N.length;J++){var he=N[J];R(he.value,{componentStack:he.stack})}}finally{q.T=h,W.p=E}}(Ru&3)!==0&&tm(),Gs(d),E=d.pendingLanes,(m&4194090)!==0&&(E&42)!==0?d===Tx?Lu++:(Lu=0,Tx=d):Lu=0,Oh(0)}}function H1(d,h){(d.pooledCacheLanes&=h)===0&&(h=d.pooledCache,h!=null&&(d.pooledCache=null,Xd(h)))}function tm(d){return q1(),U1(),V1(),G1()}function G1(){if(ji!==5)return!1;var d=pl,h=_x;_x=0;var m=Tt(Ru),N=q.T,E=W.p;try{W.p=32>m?32:m,q.T=null,m=Cx,Cx=null;var R=pl,J=Ru;if(ji=0,Iu=pl=null,Ru=0,(er&6)!==0)throw Error(i(331));var he=er;if(er|=4,k1(R.current),T1(R,R.current,J,m),er=he,Oh(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(K,R)}catch{}return!0}finally{W.p=E,q.T=N,H1(d,h)}}function W1(d,h,m){h=Li(m,h),h=Bp(d.stateNode,h,2),d=mo(d,h,2),d!==null&&(Ce(d,2),Gs(d))}function mr(d,h,m){if(d.tag===3)W1(d,d,m);else for(;h!==null;){if(h.tag===3){W1(h,d,m);break}else if(h.tag===1){var N=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(fl===null||!fl.has(N))){d=Li(m,d),m=ux(2),N=mo(h,m,2),N!==null&&(d1(m,N,h,d),Ce(N,2),Gs(N));break}}h=h.return}}function Ox(d,h,m){var N=d.pingCache;if(N===null){N=d.pingCache=new bx;var E=new Set;N.set(h,E)}else E=N.get(h),E===void 0&&(E=new Set,N.set(h,E));E.has(m)||(jx=!0,E.add(m),d=$_.bind(null,d,h,m),h.then(d,d))}function $_(d,h,m){var N=d.pingCache;N!==null&&N.delete(h),d.pingedLanes|=d.suspendedLanes&m,d.warmLanes&=~m,yr===d&&(In&m)===m&&(zr===4||zr===3&&(In&62914560)===In&&300>ee()-Nx?(er&2)===0&&Fu(d,0):wx|=m,Du===In&&(Du=0)),Gs(d)}function K1(d,h){h===0&&(h=Ct()),d=Ql(d,h),d!==null&&(Ce(d,h),Gs(d))}function nm(d){var h=d.memoizedState,m=0;h!==null&&(m=h.retryLane),K1(d,m)}function B_(d,h){var m=0;switch(d.tag){case 13:var N=d.stateNode,E=d.memoizedState;E!==null&&(m=E.retryLane);break;case 19:N=d.stateNode;break;case 22:N=d.stateNode._retryCache;break;default:throw Error(i(314))}N!==null&&N.delete(h),K1(d,m)}function Y1(d,h){return se(d,h)}var kh=null,gl=null,rm=!1,Ph=!1,im=!1,yl=0;function Gs(d){d!==gl&&d.next===null&&(gl===null?kh=gl=d:gl=gl.next=d),Ph=!0,rm||(rm=!0,Dx())}function Oh(d,h){if(!im&&Ph){im=!0;do for(var m=!1,N=kh;N!==null;){if(d!==0){var E=N.pendingLanes;if(E===0)var R=0;else{var J=N.suspendedLanes,he=N.pingedLanes;R=(1<<31-me(42|d)+1)-1,R&=E&~(J&~he),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(m=!0,X1(N,R))}else R=In,R=Pe(N,N===yr?R:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(R&3)===0||Je(N,R)||(m=!0,X1(N,R));N=N.next}while(m);im=!1}}function z_(){Dh()}function Dh(){Ph=rm=!1;var d=0;yl!==0&&(K_()&&(d=yl),yl=0);for(var h=ee(),m=null,N=kh;N!==null;){var E=N.next,R=Mh(N,h);R===0?(N.next=null,m===null?kh=E:m.next=E,E===null&&(gl=m)):(m=N,(d!==0||(R&3)!==0)&&(Ph=!0)),N=E}Oh(d)}function Mh(d,h){for(var m=d.suspendedLanes,N=d.pingedLanes,E=d.expirationTimes,R=d.pendingLanes&-62914561;0<R;){var J=31-me(R),he=1<<J,Ae=E[J];Ae===-1?((he&m)===0||(he&N)!==0)&&(E[J]=et(he,h)):Ae<=h&&(d.expiredLanes|=he),R&=~he}if(h=yr,m=In,m=Pe(d,d===h?m:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),N=d.callbackNode,m===0||d===h&&(tr===2||tr===9)||d.cancelPendingCommit!==null)return N!==null&&N!==null&&Q(N),d.callbackNode=null,d.callbackPriority=0;if((m&3)===0||Je(d,m)){if(h=m&-m,h===d.callbackPriority)return h;switch(N!==null&&Q(N),Tt(m)){case 2:case 8:m=Ge;break;case 32:m=Le;break;case 268435456:m=_e;break;default:m=Le}return N=Q1.bind(null,d),m=se(m,N),d.callbackPriority=h,d.callbackNode=m,h}return N!==null&&N!==null&&Q(N),d.callbackPriority=2,d.callbackNode=null,2}function Q1(d,h){if(ji!==0&&ji!==5)return d.callbackNode=null,d.callbackPriority=0,null;var m=d.callbackNode;if(tm()&&d.callbackNode!==m)return null;var N=In;return N=Pe(d,d===yr?N:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),N===0?null:(M1(d,N,h),Mh(d,ee()),d.callbackNode!=null&&d.callbackNode===m?Q1.bind(null,d):null)}function X1(d,h){if(tm())return null;M1(d,h,!0)}function Dx(){Q_(function(){(er&6)!==0?se(Ue,z_):Dh()})}function am(){return yl===0&&(yl=dt()),yl}function J1(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Rd(""+d)}function Z1(d,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,d.id&&m.setAttribute("form",d.id),h.parentNode.insertBefore(m,h),d=new FormData(d),m.parentNode.removeChild(m),d}function q_(d,h,m,N,E){if(h==="submit"&&m&&m.stateNode===E){var R=J1((E[Nn]||null).action),J=N.submitter;J&&(h=(h=J[Nn]||null)?J1(h.formAction):J.getAttribute("formAction"),h!==null&&(R=h,J=null));var he=new tp("action","action",null,N,E);d.push({event:he,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(yl!==0){var Ae=J?Z1(E,J):new FormData(E);uh(m,{pending:!0,data:Ae,method:E.method,action:R},null,Ae)}}else typeof R=="function"&&(he.preventDefault(),Ae=J?Z1(E,J):new FormData(E),uh(m,{pending:!0,data:Ae,method:E.method,action:R},R,Ae))},currentTarget:E}]})}}for(var Mx=0;Mx<Hn.length;Mx++){var Ix=Hn[Mx],U_=Ix.toLowerCase(),V_=Ix[0].toUpperCase()+Ix.slice(1);fs(U_,"on"+V_)}fs(fp,"onAnimationEnd"),fs(D0,"onAnimationIteration"),fs(ba,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(pp,"onTransitionRun"),fs(C_,"onTransitionStart"),fs(fu,"onTransitionCancel"),fs(zd,"onTransitionEnd"),ga("onMouseEnter",["mouseout","mouseover"]),ga("onMouseLeave",["mouseout","mouseover"]),ga("onPointerEnter",["pointerout","pointerover"]),ga("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ih));function ej(d,h){h=(h&4)!==0;for(var m=0;m<d.length;m++){var N=d[m],E=N.event;N=N.listeners;e:{var R=void 0;if(h)for(var J=N.length-1;0<=J;J--){var he=N[J],Ae=he.instance,Xe=he.currentTarget;if(he=he.listener,Ae!==R&&E.isPropagationStopped())break e;R=he,E.currentTarget=Xe;try{R(E)}catch(lt){fc(lt)}E.currentTarget=null,R=Ae}else for(J=0;J<N.length;J++){if(he=N[J],Ae=he.instance,Xe=he.currentTarget,he=he.listener,Ae!==R&&E.isPropagationStopped())break e;R=he,E.currentTarget=Xe;try{R(E)}catch(lt){fc(lt)}E.currentTarget=null,R=Ae}}}}function Sn(d,h){var m=h[Vn];m===void 0&&(m=h[Vn]=new Set);var N=d+"__bubble";m.has(N)||(tj(h,d,2,!1),m.add(N))}function Rx(d,h,m){var N=0;h&&(N|=4),tj(m,d,N,h)}var ia="_reactListening"+Math.random().toString(36).slice(2);function Lx(d){if(!d[ia]){d[ia]=!0,jn.forEach(function(m){m!=="selectionchange"&&(H_.has(m)||Rx(m,!1,d),Rx(m,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[ia]||(h[ia]=!0,Rx("selectionchange",!1,h))}}function tj(d,h,m,N){switch(bj(h)){case 2:var E=cC;break;case 8:E=Gu;break;default:E=Wx}m=E.bind(null,h,m,d),E=void 0,!Fd||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(E=!0),N?E!==void 0?d.addEventListener(h,m,{capture:!0,passive:E}):d.addEventListener(h,m,!0):E!==void 0?d.addEventListener(h,m,{passive:E}):d.addEventListener(h,m,!1)}function Co(d,h,m,N,E){var R=N;if((h&1)===0&&(h&2)===0&&N!==null)e:for(;;){if(N===null)return;var J=N.tag;if(J===3||J===4){var he=N.stateNode.containerInfo;if(he===E)break;if(J===4)for(J=N.return;J!==null;){var Ae=J.tag;if((Ae===3||Ae===4)&&J.stateNode.containerInfo===E)return;J=J.return}for(;he!==null;){if(J=Go(he),J===null)return;if(Ae=J.tag,Ae===5||Ae===6||Ae===26||Ae===27){N=R=J;continue e}he=he.parentNode}}N=N.return}h0(function(){var Xe=R,lt=xy(m),pt=[];e:{var tt=qd.get(d);if(tt!==void 0){var Ze=tp,Gt=d;switch(d){case"keypress":if(ir(m)===0)break e;case"keydown":case"keyup":Ze=Ny;break;case"focusin":Gt="focus",Ze=rp;break;case"focusout":Gt="blur",Ze=rp;break;case"beforeblur":case"afterblur":Ze=rp;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=Sy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=y_;break;case fp:case D0:case ba:Ze=y0;break;case zd:Ze=x_;break;case"scroll":case"scrollend":Ze=p_;break;case"wheel":Ze=b_;break;case"copy":case"cut":case"paste":Ze=v0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=uo;break;case"toggle":case"beforetoggle":Ze=ap}var Ht=(h&4)!==0,sr=!Ht&&(d==="scroll"||d==="scrollend"),He=Ht?tt!==null?tt+"Capture":null:tt;Ht=[];for(var Fe=Xe,Qe;Fe!==null;){var ht=Fe;if(Qe=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Qe===null||He===null||(ht=Ld(Fe,He),ht!=null&&Ht.push(nn(Fe,ht,Qe))),sr)break;Fe=Fe.return}0<Ht.length&&(tt=new Ze(tt,Gt,null,m,lt),pt.push({event:tt,listeners:Ht}))}}if((h&7)===0){e:{if(tt=d==="mouseover"||d==="pointerover",Ze=d==="mouseout"||d==="pointerout",tt&&m!==Zf&&(Gt=m.relatedTarget||m.fromElement)&&(Go(Gt)||Gt[ui]))break e;if((Ze||tt)&&(tt=lt.window===lt?lt:(tt=lt.ownerDocument)?tt.defaultView||tt.parentWindow:window,Ze?(Gt=m.relatedTarget||m.toElement,Ze=Xe,Gt=Gt?Go(Gt):null,Gt!==null&&(sr=s(Gt),Ht=Gt.tag,Gt!==sr||Ht!==5&&Ht!==27&&Ht!==6)&&(Gt=null)):(Ze=null,Gt=Xe),Ze!==Gt)){if(Ht=Yo,ht="onMouseLeave",He="onMouseEnter",Fe="mouse",(d==="pointerout"||d==="pointerover")&&(Ht=uo,ht="onPointerLeave",He="onPointerEnter",Fe="pointer"),sr=Ze==null?tt:Nt(Ze),Qe=Gt==null?tt:Nt(Gt),tt=new Ht(ht,Fe+"leave",Ze,m,lt),tt.target=sr,tt.relatedTarget=Qe,ht=null,Go(lt)===Xe&&(Ht=new Ht(He,Fe+"enter",Gt,m,lt),Ht.target=Qe,Ht.relatedTarget=sr,ht=Ht),sr=ht,Ze&&Gt)t:{for(Ht=Ze,He=Gt,Fe=0,Qe=Ht;Qe;Qe=ii(Qe))Fe++;for(Qe=0,ht=He;ht;ht=ii(ht))Qe++;for(;0<Fe-Qe;)Ht=ii(Ht),Fe--;for(;0<Qe-Fe;)He=ii(He),Qe--;for(;Fe--;){if(Ht===He||He!==null&&Ht===He.alternate)break t;Ht=ii(Ht),He=ii(He)}Ht=null}else Ht=null;Ze!==null&&qr(pt,tt,Ze,Ht,!1),Gt!==null&&sr!==null&&qr(pt,sr,Gt,Ht,!0)}}e:{if(tt=Xe?Nt(Xe):window,Ze=tt.nodeName&&tt.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&tt.type==="file")var Ot=C0;else if(cp(tt))if(T0)Ot=S_;else{Ot=Jo;var xn=k0}else Ze=tt.nodeName,!Ze||Ze.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Xe&&yy(Xe.elementType)&&(Ot=C0):Ot=hp;if(Ot&&(Ot=Ot(d,Xe))){cu(pt,Ot,m,lt);break e}xn&&xn(d,tt,Xe),d==="focusout"&&Xe&&tt.type==="number"&&Xe.memoizedProps.value!=null&&Id(tt,"number",tt.value)}switch(xn=Xe?Nt(Xe):window,d){case"focusin":(cp(xn)||xn.contentEditable==="true")&&(hu=xn,Zo=Xe,Ve=null);break;case"focusout":Ve=Zo=hu=null;break;case"mousedown":st=!0;break;case"contextmenu":case"mouseup":case"dragend":st=!1,nt(pt,m,lt);break;case"selectionchange":if(__)break;case"keydown":case"keyup":nt(pt,m,lt)}var Ft;if(Ty)e:{switch(d){case"compositionstart":var Wt="onCompositionStart";break e;case"compositionend":Wt="onCompositionEnd";break e;case"compositionupdate":Wt="onCompositionUpdate";break e}Wt=void 0}else Qo?N0(d,m)&&(Wt="onCompositionEnd"):d==="keydown"&&m.keyCode===229&&(Wt="onCompositionStart");Wt&&(sp&&m.locale!=="ko"&&(Qo||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&Qo&&(Ft=f0()):(Ko=lt,jy="value"in Ko?Ko.value:Ko.textContent,Qo=!0)),xn=sm(Xe,Wt),0<xn.length&&(Wt=new Wi(Wt,d,null,m,lt),pt.push({event:Wt,listeners:xn}),Ft?Wt.data=Ft:(Ft=lp(m),Ft!==null&&(Wt.data=Ft)))),(Ft=S0?j_(d,m):_0(d,m))&&(Wt=sm(Xe,"onBeforeInput"),0<Wt.length&&(xn=new Wi("onBeforeInput","beforeinput",null,m,lt),pt.push({event:xn,listeners:Wt}),xn.data=Ft)),q_(pt,d,Xe,m,lt)}ej(pt,h)})}function nn(d,h,m){return{instance:d,listener:h,currentTarget:m}}function sm(d,h){for(var m=h+"Capture",N=[];d!==null;){var E=d,R=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||R===null||(E=Ld(d,m),E!=null&&N.unshift(nn(d,E,R)),E=Ld(d,h),E!=null&&N.push(nn(d,E,R))),d.tag===3)return N;d=d.return}return[]}function ii(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function qr(d,h,m,N,E){for(var R=h._reactName,J=[];m!==null&&m!==N;){var he=m,Ae=he.alternate,Xe=he.stateNode;if(he=he.tag,Ae!==null&&Ae===N)break;he!==5&&he!==26&&he!==27||Xe===null||(Ae=Xe,E?(Xe=Ld(m,R),Xe!=null&&J.unshift(nn(m,Xe,Ae))):E||(Xe=Ld(m,R),Xe!=null&&J.push(nn(m,Xe,Ae)))),m=m.return}J.length!==0&&d.push({event:h,listeners:J})}var G_=/\r\n?/g,xl=/\u0000|\uFFFD/g;function nj(d){return(typeof d=="string"?d:""+d).replace(G_,`
`).replace(xl,"")}function rj(d,h){return h=nj(h),nj(d)===h}function om(){}function ar(d,h,m,N,E,R){switch(m){case"children":typeof N=="string"?h==="body"||h==="textarea"&&N===""||Wo(d,N):(typeof N=="number"||typeof N=="bigint")&&h!=="body"&&Wo(d,""+N);break;case"className":Kf(d,"class",N);break;case"tabIndex":Kf(d,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":Kf(d,m,N);break;case"style":gy(d,N,R);break;case"data":if(h!=="object"){Kf(d,"data",N);break}case"src":case"href":if(N===""&&(h!=="a"||m!=="href")){d.removeAttribute(m);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){d.removeAttribute(m);break}N=Rd(""+N),d.setAttribute(m,N);break;case"action":case"formAction":if(typeof N=="function"){d.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(m==="formAction"?(h!=="input"&&ar(d,h,"name",E.name,E,null),ar(d,h,"formEncType",E.formEncType,E,null),ar(d,h,"formMethod",E.formMethod,E,null),ar(d,h,"formTarget",E.formTarget,E,null)):(ar(d,h,"encType",E.encType,E,null),ar(d,h,"method",E.method,E,null),ar(d,h,"target",E.target,E,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){d.removeAttribute(m);break}N=Rd(""+N),d.setAttribute(m,N);break;case"onClick":N!=null&&(d.onclick=om);break;case"onScroll":N!=null&&Sn("scroll",d);break;case"onScrollEnd":N!=null&&Sn("scrollend",d);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(i(61));if(m=N.__html,m!=null){if(E.children!=null)throw Error(i(60));d.innerHTML=m}}break;case"multiple":d.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":d.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){d.removeAttribute("xlink:href");break}m=Rd(""+N),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?d.setAttribute(m,""+N):d.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?d.setAttribute(m,""):d.removeAttribute(m);break;case"capture":case"download":N===!0?d.setAttribute(m,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?d.setAttribute(m,N):d.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?d.setAttribute(m,N):d.removeAttribute(m);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?d.removeAttribute(m):d.setAttribute(m,N);break;case"popover":Sn("beforetoggle",d),Sn("toggle",d),Wf(d,"popover",N);break;case"xlinkActuate":Rs(d,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":Rs(d,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":Rs(d,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":Rs(d,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":Rs(d,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":Rs(d,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":Rs(d,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":Rs(d,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":Rs(d,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":Wf(d,"is",N);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=u0.get(m)||m,Wf(d,m,N))}}function Fx(d,h,m,N,E,R){switch(m){case"style":gy(d,N,R);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(i(61));if(m=N.__html,m!=null){if(E.children!=null)throw Error(i(60));d.innerHTML=m}}break;case"children":typeof N=="string"?Wo(d,N):(typeof N=="number"||typeof N=="bigint")&&Wo(d,""+N);break;case"onScroll":N!=null&&Sn("scroll",d);break;case"onScrollEnd":N!=null&&Sn("scrollend",d);break;case"onClick":N!=null&&(d.onclick=om);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mn.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),h=m.slice(2,E?m.length-7:void 0),R=d[Nn]||null,R=R!=null?R[m]:null,typeof R=="function"&&d.removeEventListener(h,R,E),typeof N=="function")){typeof R!="function"&&R!==null&&(m in d?d[m]=null:d.hasAttribute(m)&&d.removeAttribute(m)),d.addEventListener(h,N,E);break e}m in d?d[m]=N:N===!0?d.setAttribute(m,""):Wf(d,m,N)}}}function ai(d,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Sn("error",d),Sn("load",d);var N=!1,E=!1,R;for(R in m)if(m.hasOwnProperty(R)){var J=m[R];if(J!=null)switch(R){case"src":N=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:ar(d,h,R,J,m,null)}}E&&ar(d,h,"srcSet",m.srcSet,m,null),N&&ar(d,h,"src",m.src,m,null);return;case"input":Sn("invalid",d);var he=R=J=E=null,Ae=null,Xe=null;for(N in m)if(m.hasOwnProperty(N)){var lt=m[N];if(lt!=null)switch(N){case"name":E=lt;break;case"type":J=lt;break;case"checked":Ae=lt;break;case"defaultChecked":Xe=lt;break;case"value":R=lt;break;case"defaultValue":he=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(i(137,h));break;default:ar(d,h,N,lt,m,null)}}fy(d,R,he,Ae,Xe,J,E,!1),Qf(d);return;case"select":Sn("invalid",d),N=J=R=null;for(E in m)if(m.hasOwnProperty(E)&&(he=m[E],he!=null))switch(E){case"value":R=he;break;case"defaultValue":J=he;break;case"multiple":N=he;default:ar(d,h,E,he,m,null)}h=R,m=J,d.multiple=!!N,h!=null?nu(d,!!N,h,!1):m!=null&&nu(d,!!N,m,!0);return;case"textarea":Sn("invalid",d),R=E=N=null;for(J in m)if(m.hasOwnProperty(J)&&(he=m[J],he!=null))switch(J){case"value":N=he;break;case"defaultValue":E=he;break;case"children":R=he;break;case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(91));break;default:ar(d,h,J,he,m,null)}Jf(d,N,E,R),Qf(d);return;case"option":for(Ae in m)if(m.hasOwnProperty(Ae)&&(N=m[Ae],N!=null))switch(Ae){case"selected":d.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:ar(d,h,Ae,N,m,null)}return;case"dialog":Sn("beforetoggle",d),Sn("toggle",d),Sn("cancel",d),Sn("close",d);break;case"iframe":case"object":Sn("load",d);break;case"video":case"audio":for(N=0;N<Ih.length;N++)Sn(Ih[N],d);break;case"image":Sn("error",d),Sn("load",d);break;case"details":Sn("toggle",d);break;case"embed":case"source":case"link":Sn("error",d),Sn("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Xe in m)if(m.hasOwnProperty(Xe)&&(N=m[Xe],N!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:ar(d,h,Xe,N,m,null)}return;default:if(yy(h)){for(lt in m)m.hasOwnProperty(lt)&&(N=m[lt],N!==void 0&&Fx(d,h,lt,N,m,void 0));return}}for(he in m)m.hasOwnProperty(he)&&(N=m[he],N!=null&&ar(d,h,he,N,m,null))}function W_(d,h,m,N){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,R=null,J=null,he=null,Ae=null,Xe=null,lt=null;for(Ze in m){var pt=m[Ze];if(m.hasOwnProperty(Ze)&&pt!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":Ae=pt;default:N.hasOwnProperty(Ze)||ar(d,h,Ze,null,N,pt)}}for(var tt in N){var Ze=N[tt];if(pt=m[tt],N.hasOwnProperty(tt)&&(Ze!=null||pt!=null))switch(tt){case"type":R=Ze;break;case"name":E=Ze;break;case"checked":Xe=Ze;break;case"defaultChecked":lt=Ze;break;case"value":J=Ze;break;case"defaultValue":he=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(i(137,h));break;default:Ze!==pt&&ar(d,h,tt,Ze,N,pt)}}Xf(d,J,he,Ae,Xe,lt,R,E);return;case"select":Ze=J=he=tt=null;for(R in m)if(Ae=m[R],m.hasOwnProperty(R)&&Ae!=null)switch(R){case"value":break;case"multiple":Ze=Ae;default:N.hasOwnProperty(R)||ar(d,h,R,null,N,Ae)}for(E in N)if(R=N[E],Ae=m[E],N.hasOwnProperty(E)&&(R!=null||Ae!=null))switch(E){case"value":tt=R;break;case"defaultValue":he=R;break;case"multiple":J=R;default:R!==Ae&&ar(d,h,E,R,N,Ae)}h=he,m=J,N=Ze,tt!=null?nu(d,!!m,tt,!1):!!N!=!!m&&(h!=null?nu(d,!!m,h,!0):nu(d,!!m,m?[]:"",!1));return;case"textarea":Ze=tt=null;for(he in m)if(E=m[he],m.hasOwnProperty(he)&&E!=null&&!N.hasOwnProperty(he))switch(he){case"value":break;case"children":break;default:ar(d,h,he,null,N,E)}for(J in N)if(E=N[J],R=m[J],N.hasOwnProperty(J)&&(E!=null||R!=null))switch(J){case"value":tt=E;break;case"defaultValue":Ze=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:E!==R&&ar(d,h,J,E,N,R)}py(d,tt,Ze);return;case"option":for(var Gt in m)if(tt=m[Gt],m.hasOwnProperty(Gt)&&tt!=null&&!N.hasOwnProperty(Gt))switch(Gt){case"selected":d.selected=!1;break;default:ar(d,h,Gt,null,N,tt)}for(Ae in N)if(tt=N[Ae],Ze=m[Ae],N.hasOwnProperty(Ae)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Ae){case"selected":d.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:ar(d,h,Ae,tt,N,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in m)tt=m[Ht],m.hasOwnProperty(Ht)&&tt!=null&&!N.hasOwnProperty(Ht)&&ar(d,h,Ht,null,N,tt);for(Xe in N)if(tt=N[Xe],Ze=m[Xe],N.hasOwnProperty(Xe)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(i(137,h));break;default:ar(d,h,Xe,tt,N,Ze)}return;default:if(yy(h)){for(var sr in m)tt=m[sr],m.hasOwnProperty(sr)&&tt!==void 0&&!N.hasOwnProperty(sr)&&Fx(d,h,sr,void 0,N,tt);for(lt in N)tt=N[lt],Ze=m[lt],!N.hasOwnProperty(lt)||tt===Ze||tt===void 0&&Ze===void 0||Fx(d,h,lt,tt,N,Ze);return}}for(var He in m)tt=m[He],m.hasOwnProperty(He)&&tt!=null&&!N.hasOwnProperty(He)&&ar(d,h,He,null,N,tt);for(pt in N)tt=N[pt],Ze=m[pt],!N.hasOwnProperty(pt)||tt===Ze||tt==null&&Ze==null||ar(d,h,pt,tt,N,Ze)}var bs=null,lm=null;function yc(d){return d.nodeType===9?d:d.ownerDocument}function Or(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lr(d,h){if(d===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&h==="foreignObject"?0:d}function cm(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var $x=null;function K_(){var d=window.event;return d&&d.type==="popstate"?d===$x?!1:($x=d,!0):($x=null,!1)}var ij=typeof setTimeout=="function"?setTimeout:void 0,Y_=typeof clearTimeout=="function"?clearTimeout:void 0,aj=typeof Promise=="function"?Promise:void 0,Q_=typeof queueMicrotask=="function"?queueMicrotask:typeof aj<"u"?function(d){return aj.resolve(null).then(d).catch(sj)}:ij;function sj(d){setTimeout(function(){throw d})}function es(d){return d==="head"}function um(d,h){var m=h,N=0,E=0;do{var R=m.nextSibling;if(d.removeChild(m),R&&R.nodeType===8)if(m=R.data,m==="/$"){if(0<N&&8>N){m=N;var J=d.ownerDocument;if(m&1&&Rh(J.documentElement),m&2&&Rh(J.body),m&4)for(m=J.head,Rh(m),J=m.firstChild;J;){var he=J.nextSibling,Ae=J.nodeName;J[Gl]||Ae==="SCRIPT"||Ae==="STYLE"||Ae==="LINK"&&J.rel.toLowerCase()==="stylesheet"||m.removeChild(J),J=he}}if(E===0){d.removeChild(R),Vh(h);return}E--}else m==="$"||m==="$?"||m==="$!"?E++:N=m.charCodeAt(0)-48;else N=0;m=R}while(m);Vh(h)}function Bx(d){var h=d.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Bx(m),Od(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}d.removeChild(m)}}function oj(d,h,m,N){for(;d.nodeType===1;){var E=m;if(d.nodeName.toLowerCase()!==h.toLowerCase()){if(!N&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(N){if(!d[Gl])switch(h){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(R=d.getAttribute("rel"),R==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(R!==E.rel||d.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||d.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||d.getAttribute("title")!==(E.title==null?null:E.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(R=d.getAttribute("src"),(R!==(E.src==null?null:E.src)||d.getAttribute("type")!==(E.type==null?null:E.type)||d.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&R&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(h==="input"&&d.type==="hidden"){var R=E.name==null?null:""+E.name;if(E.type==="hidden"&&d.getAttribute("name")===R)return d}else return d;if(d=js(d.nextSibling),d===null)break}return null}function dm(d,h,m){if(h==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!m||(d=js(d.nextSibling),d===null))return null;return d}function qi(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function Bu(d,h){var m=d.ownerDocument;if(d.data!=="$?"||m.readyState==="complete")h();else{var N=function(){h(),m.removeEventListener("DOMContentLoaded",N)};m.addEventListener("DOMContentLoaded",N),d._reactRetry=N}}function js(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return d}var zx=null;function lj(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var m=d.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return d;h--}else m==="/$"&&h++}d=d.previousSibling}return null}function cj(d,h,m){switch(h=yc(m),d){case"html":if(d=h.documentElement,!d)throw Error(i(452));return d;case"head":if(d=h.head,!d)throw Error(i(453));return d;case"body":if(d=h.body,!d)throw Error(i(454));return d;default:throw Error(i(451))}}function Rh(d){for(var h=d.attributes;h.length;)d.removeAttributeNode(h[0]);Od(d)}var Ta=new Map,Ws=new Set;function ln(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var Ks=W.d;W.d={f:ts,r:uj,D:X_,C:dj,L:hm,m:J_,X:eC,S:Z_,M:tC};function ts(){var d=Ks.f(),h=Zp();return d||h}function uj(d){var h=at(d);h!==null&&h.tag===5&&h.type==="form"?Rp(h):Ks.r(d)}var zu=typeof document>"u"?null:document;function Gn(d,h,m){var N=zu;if(N&&typeof h=="string"&&h){var E=za(h);E='link[rel="'+d+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),Ws.has(E)||(Ws.add(E),d={rel:d,crossOrigin:m,href:h},N.querySelector(E)===null&&(h=N.createElement("link"),ai(h,"link",d),Rt(h),N.head.appendChild(h)))}}function X_(d){Ks.D(d),Gn("dns-prefetch",d,null)}function dj(d,h){Ks.C(d,h),Gn("preconnect",d,h)}function hm(d,h,m){Ks.L(d,h,m);var N=zu;if(N&&d&&h){var E='link[rel="preload"][as="'+za(h)+'"]';h==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+za(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+za(m.imageSizes)+'"]')):E+='[href="'+za(d)+'"]';var R=E;switch(h){case"style":R=qu(d);break;case"script":R=Uu(d)}Ta.has(R)||(d=f({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:d,as:h},m),Ta.set(R,d),N.querySelector(E)!==null||h==="style"&&N.querySelector(Lh(R))||h==="script"&&N.querySelector(Fh(R))||(h=N.createElement("link"),ai(h,"link",d),Rt(h),N.head.appendChild(h)))}}function J_(d,h){Ks.m(d,h);var m=zu;if(m&&d){var N=h&&typeof h.as=="string"?h.as:"script",E='link[rel="modulepreload"][as="'+za(N)+'"][href="'+za(d)+'"]',R=E;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=Uu(d)}if(!Ta.has(R)&&(d=f({rel:"modulepreload",href:d},h),Ta.set(R,d),m.querySelector(E)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Fh(R)))return}N=m.createElement("link"),ai(N,"link",d),Rt(N),m.head.appendChild(N)}}}function Z_(d,h,m){Ks.S(d,h,m);var N=zu;if(N&&d){var E=_t(N).hoistableStyles,R=qu(d);h=h||"default";var J=E.get(R);if(!J){var he={loading:0,preload:null};if(J=N.querySelector(Lh(R)))he.loading=5;else{d=f({rel:"stylesheet",href:d,"data-precedence":h},m),(m=Ta.get(R))&&$h(d,m);var Ae=J=N.createElement("link");Rt(Ae),ai(Ae,"link",d),Ae._p=new Promise(function(Xe,lt){Ae.onload=Xe,Ae.onerror=lt}),Ae.addEventListener("load",function(){he.loading|=1}),Ae.addEventListener("error",function(){he.loading|=2}),he.loading|=4,fm(J,h,N)}J={type:"stylesheet",instance:J,count:1,state:he},E.set(R,J)}}}function eC(d,h){Ks.X(d,h);var m=zu;if(m&&d){var N=_t(m).hoistableScripts,E=Uu(d),R=N.get(E);R||(R=m.querySelector(Fh(E)),R||(d=f({src:d,async:!0},h),(h=Ta.get(E))&&qx(d,h),R=m.createElement("script"),Rt(R),ai(R,"link",d),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},N.set(E,R))}}function tC(d,h){Ks.M(d,h);var m=zu;if(m&&d){var N=_t(m).hoistableScripts,E=Uu(d),R=N.get(E);R||(R=m.querySelector(Fh(E)),R||(d=f({src:d,async:!0,type:"module"},h),(h=Ta.get(E))&&qx(d,h),R=m.createElement("script"),Rt(R),ai(R,"link",d),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},N.set(E,R))}}function hj(d,h,m,N){var E=(E=Me.current)?ln(E):null;if(!E)throw Error(i(446));switch(d){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=qu(m.href),m=_t(E).hoistableStyles,N=m.get(h),N||(N={type:"style",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){d=qu(m.href);var R=_t(E).hoistableStyles,J=R.get(d);if(J||(E=E.ownerDocument||E,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(d,J),(R=E.querySelector(Lh(d)))&&!R._p&&(J.instance=R,J.state.loading=5),Ta.has(d)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ta.set(d,m),R||nC(E,d,m,J.state))),h&&N===null)throw Error(i(528,""));return J}if(h&&N!==null)throw Error(i(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Uu(m),m=_t(E).hoistableScripts,N=m.get(h),N||(N={type:"script",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,d))}}function qu(d){return'href="'+za(d)+'"'}function Lh(d){return'link[rel="stylesheet"]['+d+"]"}function fj(d){return f({},d,{"data-precedence":d.precedence,precedence:null})}function nC(d,h,m,N){d.querySelector('link[rel="preload"][as="style"]['+h+"]")?N.loading=1:(h=d.createElement("link"),N.preload=h,h.addEventListener("load",function(){return N.loading|=1}),h.addEventListener("error",function(){return N.loading|=2}),ai(h,"link",m),Rt(h),d.head.appendChild(h))}function Uu(d){return'[src="'+za(d)+'"]'}function Fh(d){return"script[async]"+d}function pj(d,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var N=d.querySelector('style[data-href~="'+za(m.href)+'"]');if(N)return h.instance=N,Rt(N),N;var E=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return N=(d.ownerDocument||d).createElement("style"),Rt(N),ai(N,"style",E),fm(N,m.precedence,d),h.instance=N;case"stylesheet":E=qu(m.href);var R=d.querySelector(Lh(E));if(R)return h.state.loading|=4,h.instance=R,Rt(R),R;N=fj(m),(E=Ta.get(E))&&$h(N,E),R=(d.ownerDocument||d).createElement("link"),Rt(R);var J=R;return J._p=new Promise(function(he,Ae){J.onload=he,J.onerror=Ae}),ai(R,"link",N),h.state.loading|=4,fm(R,m.precedence,d),h.instance=R;case"script":return R=Uu(m.src),(E=d.querySelector(Fh(R)))?(h.instance=E,Rt(E),E):(N=m,(E=Ta.get(R))&&(N=f({},m),qx(N,E)),d=d.ownerDocument||d,E=d.createElement("script"),Rt(E),ai(E,"link",N),d.head.appendChild(E),h.instance=E);case"void":return null;default:throw Error(i(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(N=h.instance,h.state.loading|=4,fm(N,m.precedence,d));return h.instance}function fm(d,h,m){for(var N=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=N.length?N[N.length-1]:null,R=E,J=0;J<N.length;J++){var he=N[J];if(he.dataset.precedence===h)R=he;else if(R!==E)break}R?R.parentNode.insertBefore(d,R.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(d,h.firstChild))}function $h(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.title==null&&(d.title=h.title)}function qx(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.integrity==null&&(d.integrity=h.integrity)}var Vu=null;function mj(d,h,m){if(Vu===null){var N=new Map,E=Vu=new Map;E.set(m,N)}else E=Vu,N=E.get(m),N||(N=new Map,E.set(m,N));if(N.has(d))return N;for(N.set(d,null),m=m.getElementsByTagName(d),E=0;E<m.length;E++){var R=m[E];if(!(R[Gl]||R[Tn]||d==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var J=R.getAttribute(h)||"";J=d+J;var he=N.get(J);he?he.push(R):N.set(J,[R])}}return N}function gj(d,h,m){d=d.ownerDocument||d,d.head.insertBefore(m,h==="title"?d.querySelector("head > title"):null)}function rC(d,h,m){if(m===1||h.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return d=h.disabled,typeof h.precedence=="string"&&d==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function si(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var fi=null;function iC(){}function aC(d,h,m){if(fi===null)throw Error(i(475));var N=fi;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var E=qu(m.href),R=d.querySelector(Lh(E));if(R){d=R._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(N.count++,N=Bh.bind(N),d.then(N,N)),h.state.loading|=4,h.instance=R,Rt(R);return}R=d.ownerDocument||d,m=fj(m),(E=Ta.get(E))&&$h(m,E),R=R.createElement("link"),Rt(R);var J=R;J._p=new Promise(function(he,Ae){J.onload=he,J.onerror=Ae}),ai(R,"link",m),h.instance=R}N.stylesheets===null&&(N.stylesheets=new Map),N.stylesheets.set(h,d),(d=h.state.preload)&&(h.state.loading&3)===0&&(N.count++,h=Bh.bind(N),d.addEventListener("load",h),d.addEventListener("error",h))}}function sC(){if(fi===null)throw Error(i(475));var d=fi;return d.stylesheets&&d.count===0&&Ux(d,d.stylesheets),0<d.count?function(h){var m=setTimeout(function(){if(d.stylesheets&&Ux(d,d.stylesheets),d.unsuspend){var N=d.unsuspend;d.unsuspend=null,N()}},6e4);return d.unsuspend=h,function(){d.unsuspend=null,clearTimeout(m)}}:null}function Bh(){if(this.count--,this.count===0){if(this.stylesheets)Ux(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var pm=null;function Ux(d,h){d.stylesheets=null,d.unsuspend!==null&&(d.count++,pm=new Map,h.forEach(oC,d),pm=null,Bh.call(d))}function oC(d,h){if(!(h.state.loading&4)){var m=pm.get(d);if(m)var N=m.get(null);else{m=new Map,pm.set(d,m);for(var E=d.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<E.length;R++){var J=E[R];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(m.set(J.dataset.precedence,J),N=J)}N&&m.set(null,N)}E=h.instance,J=E.getAttribute("data-precedence"),R=m.get(J)||N,R===N&&m.set(null,E),m.set(J,E),this.count++,N=Bh.bind(this),E.addEventListener("load",N),E.addEventListener("error",N),R?R.parentNode.insertBefore(E,R.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(E,d.firstChild)),h.state.loading|=4}}var Hu={$$typeof:C,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function lC(d,h,m,N,E,R,J,he){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=N,this.onUncaughtError=E,this.onCaughtError=R,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function yj(d,h,m,N,E,R,J,he,Ae,Xe,lt,pt){return d=new lC(d,h,m,J,he,Ae,Xe,pt),h=1,R===!0&&(h|=24),R=Ki(3,null,null,h),d.current=R,R.stateNode=d,h=Ly(),h.refCount++,d.pooledCache=h,h.refCount++,R.memoizedState={element:N,isDehydrated:m,cache:h},ic(R),d}function xj(d){return d?(d=Xl,d):Xl}function Vx(d,h,m,N,E,R){E=xj(E),N.context===null?N.context=E:N.pendingContext=E,N=rl(h),N.payload={element:m},R=R===void 0?null:R,R!==null&&(N.callback=R),m=mo(d,N,h),m!==null&&(Ca(m,d,h),Zd(m,d,h))}function Hx(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var m=d.retryLane;d.retryLane=m!==0&&m<h?m:h}}function Gx(d,h){Hx(d,h),(d=d.alternate)&&Hx(d,h)}function vj(d){if(d.tag===13){var h=Ql(d,67108864);h!==null&&Ca(h,d,67108864),Gx(d,67108864)}}var mm=!0;function cC(d,h,m,N){var E=q.T;q.T=null;var R=W.p;try{W.p=2,Wx(d,h,m,N)}finally{W.p=R,q.T=E}}function Gu(d,h,m,N){var E=q.T;q.T=null;var R=W.p;try{W.p=8,Wx(d,h,m,N)}finally{W.p=R,q.T=E}}function Wx(d,h,m,N){if(mm){var E=Kx(N);if(E===null)Co(d,h,N,gm,m),jj(d,N);else if(dC(E,d,h,m,N))N.stopPropagation();else if(jj(d,N),h&4&&-1<uC.indexOf(d)){for(;E!==null;){var R=at(E);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var J=gt(R.pendingLanes);if(J!==0){var he=R;for(he.pendingLanes|=2,he.entangledLanes|=2;J;){var Ae=1<<31-me(J);he.entanglements[1]|=Ae,J&=~Ae}Gs(R),(er&6)===0&&(Mu=ee()+500,Oh(0))}}break;case 13:he=Ql(R,2),he!==null&&Ca(he,R,2),Zp(),Gx(R,2)}if(R=Kx(N),R===null&&Co(d,h,N,gm,m),R===E)break;E=R}E!==null&&N.stopPropagation()}else Co(d,h,N,null,m)}}function Kx(d){return d=xy(d),Yx(d)}var gm=null;function Yx(d){if(gm=null,d=Go(d),d!==null){var h=s(d);if(h===null)d=null;else{var m=h.tag;if(m===13){if(d=o(h),d!==null)return d;d=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null)}}return gm=d,null}function bj(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(we()){case Ue:return 2;case Ge:return 8;case Le:case oe:return 32;case _e:return 268435456;default:return 32}default:return 32}}var ym=!1,To=null,vl=null,bl=null,zh=new Map,qh=new Map,jl=[],uC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jj(d,h){switch(d){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":vl=null;break;case"mouseover":case"mouseout":bl=null;break;case"pointerover":case"pointerout":zh.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":qh.delete(h.pointerId)}}function Uh(d,h,m,N,E,R){return d===null||d.nativeEvent!==R?(d={blockedOn:h,domEventName:m,eventSystemFlags:N,nativeEvent:R,targetContainers:[E]},h!==null&&(h=at(h),h!==null&&vj(h)),d):(d.eventSystemFlags|=N,h=d.targetContainers,E!==null&&h.indexOf(E)===-1&&h.push(E),d)}function dC(d,h,m,N,E){switch(h){case"focusin":return To=Uh(To,d,h,m,N,E),!0;case"dragenter":return vl=Uh(vl,d,h,m,N,E),!0;case"mouseover":return bl=Uh(bl,d,h,m,N,E),!0;case"pointerover":var R=E.pointerId;return zh.set(R,Uh(zh.get(R)||null,d,h,m,N,E)),!0;case"gotpointercapture":return R=E.pointerId,qh.set(R,Uh(qh.get(R)||null,d,h,m,N,E)),!0}return!1}function wj(d){var h=Go(d.target);if(h!==null){var m=s(h);if(m!==null){if(h=m.tag,h===13){if(h=o(m),h!==null){d.blockedOn=h,wr(d.priority,function(){if(m.tag===13){var N=Pi();N=wt(N);var E=Ql(m,N);E!==null&&Ca(E,m,N),Gx(m,N)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){d.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}d.blockedOn=null}function xm(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var m=Kx(d.nativeEvent);if(m===null){m=d.nativeEvent;var N=new m.constructor(m.type,m);Zf=N,m.target.dispatchEvent(N),Zf=null}else return h=at(m),h!==null&&vj(h),d.blockedOn=m,!1;h.shift()}return!0}function Sj(d,h,m){xm(d)&&m.delete(h)}function hC(){ym=!1,To!==null&&xm(To)&&(To=null),vl!==null&&xm(vl)&&(vl=null),bl!==null&&xm(bl)&&(bl=null),zh.forEach(Sj),qh.forEach(Sj)}function vm(d,h){d.blockedOn===h&&(d.blockedOn=null,ym||(ym=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hC)))}var bm=null;function Nj(d){bm!==d&&(bm=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){bm===d&&(bm=null);for(var h=0;h<d.length;h+=3){var m=d[h],N=d[h+1],E=d[h+2];if(typeof N!="function"){if(Yx(N||m)===null)continue;break}var R=at(m);R!==null&&(d.splice(h,3),h-=3,uh(R,{pending:!0,data:E,method:m.method,action:N},N,E))}}))}function Vh(d){function h(Ae){return vm(Ae,d)}To!==null&&vm(To,d),vl!==null&&vm(vl,d),bl!==null&&vm(bl,d),zh.forEach(h),qh.forEach(h);for(var m=0;m<jl.length;m++){var N=jl[m];N.blockedOn===d&&(N.blockedOn=null)}for(;0<jl.length&&(m=jl[0],m.blockedOn===null);)wj(m),m.blockedOn===null&&jl.shift();if(m=(d.ownerDocument||d).$$reactFormReplay,m!=null)for(N=0;N<m.length;N+=3){var E=m[N],R=m[N+1],J=E[Nn]||null;if(typeof R=="function")J||Nj(m);else if(J){var he=null;if(R&&R.hasAttribute("formAction")){if(E=R,J=R[Nn]||null)he=J.formAction;else if(Yx(E)!==null)continue}else he=J.action;typeof he=="function"?m[N+1]=he:(m.splice(N,3),N-=3),Nj(m)}}}function Qx(d){this._internalRoot=d}jm.prototype.render=Qx.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(i(409));var m=h.current,N=Pi();Vx(m,N,d,h,null,null)},jm.prototype.unmount=Qx.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Vx(d.current,2,null,d,null,null),Zp(),h[ui]=null}};function jm(d){this._internalRoot=d}jm.prototype.unstable_scheduleHydration=function(d){if(d){var h=Xn();d={blockedOn:null,target:d,priority:h};for(var m=0;m<jl.length&&h!==0&&h<jl[m].priority;m++);jl.splice(m,0,d),m===0&&wj(d)}};var _j=t.version;if(_j!=="19.1.0")throw Error(i(527,_j,"19.1.0"));W.findDOMNode=function(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(i(188)):(d=Object.keys(d).join(","),Error(i(268,d)));return d=c(h),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var fC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wm.isDisabled&&wm.supportsFiber)try{K=wm.inject(fC),ye=wm}catch{}}return Jx.createRoot=function(d,h){if(!a(d))throw Error(i(299));var m=!1,N="",E=cx,R=$p,J=u1,he=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(R=h.onCaughtError),h.onRecoverableError!==void 0&&(J=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(he=h.unstable_transitionCallbacks)),h=yj(d,1,!1,null,null,m,N,E,R,J,he,null),d[ui]=h.current,Lx(d),new Qx(h)},Jx.hydrateRoot=function(d,h,m){if(!a(d))throw Error(i(299));var N=!1,E="",R=cx,J=$p,he=u1,Ae=null,Xe=null;return m!=null&&(m.unstable_strictMode===!0&&(N=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(J=m.onCaughtError),m.onRecoverableError!==void 0&&(he=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Ae=m.unstable_transitionCallbacks),m.formState!==void 0&&(Xe=m.formState)),h=yj(d,1,!0,h,m??null,N,E,R,J,he,Ae,Xe),h.context=xj(null),m=h.current,N=Pi(),N=wt(N),E=rl(N),E.callback=null,mo(m,E,N),m=N,h.current.lanes=m,Ce(h,m),Gs(h),d[ui]=h.current,Lx(d),new jm(h)},Jx.version="19.1.0",Jx}var EI;function bK(){if(EI)return bC.exports;EI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),bC.exports=vK(),bC.exports}var jK=bK(),qg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wK={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},td,sD,Rz,SK=(Rz=class{constructor(){zt(this,td,wK);zt(this,sD,!1)}setTimeoutProvider(e){Pt(this,td,e)}setTimeout(e,t){return De(this,td).setTimeout(e,t)}clearTimeout(e){De(this,td).clearTimeout(e)}setInterval(e,t){return De(this,td).setInterval(e,t)}clearInterval(e){De(this,td).clearInterval(e)}},td=new WeakMap,sD=new WeakMap,Rz),tf=new SK;function NK(e){setTimeout(e,0)}var Sf=typeof window>"u"||"Deno"in globalThis;function Oa(){}function _K(e,t){return typeof e=="function"?e(t):e}function wk(e){return typeof e=="number"&&e>=0&&e!==1/0}function Kz(e,t){return Math.max(e+(t||0)-Date.now(),0)}function fd(e,t){return typeof e=="function"?e(t):e}function Js(e,t){return typeof e=="function"?e(t):e}function kI(e,t){const{type:n="all",exact:i,fetchStatus:a,predicate:s,queryKey:o,stale:l}=e;if(o){if(i){if(t.queryHash!==lD(o,t.options))return!1}else if(!Bv(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||s&&!s(t))}function PI(e,t){const{exact:n,status:i,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(Nf(t.options.mutationKey)!==Nf(s))return!1}else if(!Bv(t.options.mutationKey,s))return!1}return!(i&&t.state.status!==i||a&&!a(t))}function lD(e,t){return((t==null?void 0:t.queryKeyHashFn)||Nf)(e)}function Nf(e){return JSON.stringify(e,(t,n)=>Sk(n)?Object.keys(n).sort().reduce((i,a)=>(i[a]=n[a],i),{}):n)}function Bv(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Bv(e[n],t[n])):!1}var CK=Object.prototype.hasOwnProperty;function Yz(e,t,n=0){if(e===t)return e;if(n>500)return t;const i=OI(e)&&OI(t);if(!i&&!(Sk(e)&&Sk(t)))return t;const s=(i?e:Object.keys(e)).length,o=i?t:Object.keys(t),l=o.length,c=i?new Array(l):{};let u=0;for(let f=0;f<l;f++){const p=i?f:o[f],g=e[p],x=t[p];if(g===x){c[p]=g,(i?f<s:CK.call(e,p))&&u++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){c[p]=x;continue}const v=Yz(g,x,n+1);c[p]=v,v===g&&u++}return s===l&&u===s?e:c}function Cw(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function OI(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Sk(e){if(!DI(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!DI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function DI(e){return Object.prototype.toString.call(e)==="[object Object]"}function TK(e){return new Promise(t=>{tf.setTimeout(t,e)})}function Nk(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Yz(e,t):t}function AK(e,t,n=0){const i=[...e,t];return n&&i.length>n?i.slice(1):i}function EK(e,t,n=0){const i=[t,...e];return n&&i.length>n?i.slice(0,-1):i}var cD=Symbol();function Qz(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===cD?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function uD(e,t){return typeof e=="function"?e(...t):!!e}function kK(e,t,n){let i=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=t()),i||(i=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)}),e}var cf,nd,Qm,Lz,PK=(Lz=class extends qg{constructor(){super();zt(this,cf);zt(this,nd);zt(this,Qm);Pt(this,Qm,t=>{if(!Sf&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){De(this,nd)||this.setEventListener(De(this,Qm))}onUnsubscribe(){var t;this.hasListeners()||((t=De(this,nd))==null||t.call(this),Pt(this,nd,void 0))}setEventListener(t){var n;Pt(this,Qm,t),(n=De(this,nd))==null||n.call(this),Pt(this,nd,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){De(this,cf)!==t&&(Pt(this,cf,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof De(this,cf)=="boolean"?De(this,cf):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},cf=new WeakMap,nd=new WeakMap,Qm=new WeakMap,Lz),dD=new PK;function _k(){let e,t;const n=new Promise((a,s)=>{e=a,t=s});n.status="pending",n.catch(()=>{});function i(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{i({status:"fulfilled",value:a}),e(a)},n.reject=a=>{i({status:"rejected",reason:a}),t(a)},n}var OK=NK;function DK(){let e=[],t=0,n=l=>{l()},i=l=>{l()},a=OK;const s=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{i(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{i=l},setScheduler:l=>{a=l}}}var Ni=DK(),Xm,rd,Jm,Fz,MK=(Fz=class extends qg{constructor(){super();zt(this,Xm,!0);zt(this,rd);zt(this,Jm);Pt(this,Jm,t=>{if(!Sf&&window.addEventListener){const n=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}})}onSubscribe(){De(this,rd)||this.setEventListener(De(this,Jm))}onUnsubscribe(){var t;this.hasListeners()||((t=De(this,rd))==null||t.call(this),Pt(this,rd,void 0))}setEventListener(t){var n;Pt(this,Jm,t),(n=De(this,rd))==null||n.call(this),Pt(this,rd,t(this.setOnline.bind(this)))}setOnline(t){De(this,Xm)!==t&&(Pt(this,Xm,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return De(this,Xm)}},Xm=new WeakMap,rd=new WeakMap,Jm=new WeakMap,Fz),Tw=new MK;function IK(e){return Math.min(1e3*2**e,3e4)}function Xz(e){return(e??"online")==="online"?Tw.isOnline():!0}var Ck=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Jz(e){let t=!1,n=0,i;const a=_k(),s=()=>a.status!=="pending",o=j=>{var w;if(!s()){const _=new Ck(j);g(_),(w=e.onCancel)==null||w.call(e,_)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>dD.isFocused()&&(e.networkMode==="always"||Tw.isOnline())&&e.canRun(),f=()=>Xz(e.networkMode)&&e.canRun(),p=j=>{s()||(i==null||i(),a.resolve(j))},g=j=>{s()||(i==null||i(),a.reject(j))},x=()=>new Promise(j=>{var w;i=_=>{(s()||u())&&j(_)},(w=e.onPause)==null||w.call(e)}).then(()=>{var j;i=void 0,s()||(j=e.onContinue)==null||j.call(e)}),v=()=>{if(s())return;let j;const w=n===0?e.initialPromise:void 0;try{j=w??e.fn()}catch(_){j=Promise.reject(_)}Promise.resolve(j).then(p).catch(_=>{var P;if(s())return;const T=e.retry??(Sf?0:3),C=e.retryDelay??IK,O=typeof C=="function"?C(n,_):C,A=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,_);if(t||!A){g(_);return}n++,(P=e.onFail)==null||P.call(e,n,_),TK(O).then(()=>u()?void 0:x()).then(()=>{t?g(_):v()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?v():x().then(v),a)}}var uf,$z,Zz=($z=class{constructor(){zt(this,uf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wk(this.gcTime)&&Pt(this,uf,tf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Sf?1/0:5*60*1e3))}clearGcTimeout(){De(this,uf)&&(tf.clearTimeout(De(this,uf)),Pt(this,uf,void 0))}},uf=new WeakMap,$z),df,Zm,Xs,hf,Oi,Mb,ff,Po,bc,Bz,RK=(Bz=class extends Zz{constructor(t){super();zt(this,Po);zt(this,df);zt(this,Zm);zt(this,Xs);zt(this,hf);zt(this,Oi);zt(this,Mb);zt(this,ff);Pt(this,ff,!1),Pt(this,Mb,t.defaultOptions),this.setOptions(t.options),this.observers=[],Pt(this,hf,t.client),Pt(this,Xs,De(this,hf).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Pt(this,df,II(this.options)),this.state=t.state??De(this,df),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=De(this,Oi))==null?void 0:t.promise}setOptions(t){if(this.options={...De(this,Mb),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=II(this.options);n.data!==void 0&&(this.setState(MI(n.data,n.dataUpdatedAt)),Pt(this,df,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&De(this,Xs).remove(this)}setData(t,n){const i=Nk(this.state.data,t,this.options);return bn(this,Po,bc).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(t,n){bn(this,Po,bc).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var i,a;const n=(i=De(this,Oi))==null?void 0:i.promise;return(a=De(this,Oi))==null||a.cancel(t),n?n.then(Oa).catch(Oa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(De(this,df))}isActive(){return this.observers.some(t=>Js(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===cD||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>fd(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Kz(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=De(this,Oi))==null||n.continue()}onOnline(){var n;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=De(this,Oi))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),De(this,Xs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(De(this,Oi)&&(De(this,ff)?De(this,Oi).cancel({revert:!0}):De(this,Oi).cancelRetry()),this.scheduleGc()),De(this,Xs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||bn(this,Po,bc).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,f,p,g,x,v,j,w,_,T,C;if(this.state.fetchStatus!=="idle"&&((c=De(this,Oi))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(De(this,Oi))return De(this,Oi).continueRetry(),De(this,Oi).promise}if(t&&this.setOptions(t),!this.options.queryFn){const O=this.observers.find(A=>A.options.queryFn);O&&this.setOptions(O.options)}const i=new AbortController,a=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(Pt(this,ff,!0),i.signal)})},s=()=>{const O=Qz(this.options,n),P=(()=>{const I={client:De(this,hf),queryKey:this.queryKey,meta:this.meta};return a(I),I})();return Pt(this,ff,!1),this.options.persister?this.options.persister(O,P,this):O(P)},l=(()=>{const O={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:De(this,hf),state:this.state,fetchFn:s};return a(O),O})();(u=this.options.behavior)==null||u.onFetch(l,this),Pt(this,Zm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&bn(this,Po,bc).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Pt(this,Oi,Jz({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:O=>{O instanceof Ck&&O.revert&&this.setState({...De(this,Zm),fetchStatus:"idle"}),i.abort()},onFail:(O,A)=>{bn(this,Po,bc).call(this,{type:"failed",failureCount:O,error:A})},onPause:()=>{bn(this,Po,bc).call(this,{type:"pause"})},onContinue:()=>{bn(this,Po,bc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const O=await De(this,Oi).start();if(O===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(O),(x=(g=De(this,Xs).config).onSuccess)==null||x.call(g,O,this),(j=(v=De(this,Xs).config).onSettled)==null||j.call(v,O,this.state.error,this),O}catch(O){if(O instanceof Ck){if(O.silent)return De(this,Oi).promise;if(O.revert){if(this.state.data===void 0)throw O;return this.state.data}}throw bn(this,Po,bc).call(this,{type:"error",error:O}),(_=(w=De(this,Xs).config).onError)==null||_.call(w,O,this),(C=(T=De(this,Xs).config).onSettled)==null||C.call(T,this.state.data,O,this),O}finally{this.scheduleGc()}}},df=new WeakMap,Zm=new WeakMap,Xs=new WeakMap,hf=new WeakMap,Oi=new WeakMap,Mb=new WeakMap,ff=new WeakMap,Po=new WeakSet,bc=function(t){const n=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...eq(i.data,this.options),fetchMeta:t.meta??null};case"success":const a={...i,...MI(t.data,t.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Pt(this,Zm,t.manual?a:void 0),a;case"error":const s=t.error;return{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=n(this.state),Ni.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),De(this,Xs).notify({query:this,type:"updated",action:t})})},Bz);function eq(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xz(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function MI(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function II(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,i=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rs,Bn,Ib,ka,pf,eg,wc,id,Rb,tg,ng,mf,gf,ad,rg,dr,wv,Tk,Ak,Ek,kk,Pk,Ok,Dk,tq,zz,LK=(zz=class extends qg{constructor(t,n){super();zt(this,dr);zt(this,rs);zt(this,Bn);zt(this,Ib);zt(this,ka);zt(this,pf);zt(this,eg);zt(this,wc);zt(this,id);zt(this,Rb);zt(this,tg);zt(this,ng);zt(this,mf);zt(this,gf);zt(this,ad);zt(this,rg,new Set);this.options=n,Pt(this,rs,t),Pt(this,id,null),Pt(this,wc,_k()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(De(this,Bn).addObserver(this),RI(De(this,Bn),this.options)?bn(this,dr,wv).call(this):this.updateResult(),bn(this,dr,kk).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Mk(De(this,Bn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Mk(De(this,Bn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,bn(this,dr,Pk).call(this),bn(this,dr,Ok).call(this),De(this,Bn).removeObserver(this)}setOptions(t){const n=this.options,i=De(this,Bn);if(this.options=De(this,rs).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Js(this.options.enabled,De(this,Bn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");bn(this,dr,Dk).call(this),De(this,Bn).setOptions(this.options),n._defaulted&&!Cw(this.options,n)&&De(this,rs).getQueryCache().notify({type:"observerOptionsUpdated",query:De(this,Bn),observer:this});const a=this.hasListeners();a&&LI(De(this,Bn),i,this.options,n)&&bn(this,dr,wv).call(this),this.updateResult(),a&&(De(this,Bn)!==i||Js(this.options.enabled,De(this,Bn))!==Js(n.enabled,De(this,Bn))||fd(this.options.staleTime,De(this,Bn))!==fd(n.staleTime,De(this,Bn)))&&bn(this,dr,Tk).call(this);const s=bn(this,dr,Ak).call(this);a&&(De(this,Bn)!==i||Js(this.options.enabled,De(this,Bn))!==Js(n.enabled,De(this,Bn))||s!==De(this,ad))&&bn(this,dr,Ek).call(this,s)}getOptimisticResult(t){const n=De(this,rs).getQueryCache().build(De(this,rs),t),i=this.createResult(n,t);return $K(this,i)&&(Pt(this,ka,i),Pt(this,eg,this.options),Pt(this,pf,De(this,Bn).state)),i}getCurrentResult(){return De(this,ka)}trackResult(t,n){return new Proxy(t,{get:(i,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&De(this,wc).status==="pending"&&De(this,wc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(i,a))})}trackProp(t){De(this,rg).add(t)}getCurrentQuery(){return De(this,Bn)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=De(this,rs).defaultQueryOptions(t),i=De(this,rs).getQueryCache().build(De(this,rs),n);return i.fetch().then(()=>this.createResult(i,n))}fetch(t){return bn(this,dr,wv).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),De(this,ka)))}createResult(t,n){var B;const i=De(this,Bn),a=this.options,s=De(this,ka),o=De(this,pf),l=De(this,eg),u=t!==i?t.state:De(this,Ib),{state:f}=t;let p={...f},g=!1,x;if(n._optimisticResults){const $=this.hasListeners(),L=!$&&RI(t,n),V=$&&LI(t,i,n,a);(L||V)&&(p={...p,...eq(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:v,errorUpdatedAt:j,status:w}=p;x=p.data;let _=!1;if(n.placeholderData!==void 0&&x===void 0&&w==="pending"){let $;s!=null&&s.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?($=s.data,_=!0):$=typeof n.placeholderData=="function"?n.placeholderData((B=De(this,ng))==null?void 0:B.state.data,De(this,ng)):n.placeholderData,$!==void 0&&(w="success",x=Nk(s==null?void 0:s.data,$,n),g=!0)}if(n.select&&x!==void 0&&!_)if(s&&x===(o==null?void 0:o.data)&&n.select===De(this,Rb))x=De(this,tg);else try{Pt(this,Rb,n.select),x=n.select(x),x=Nk(s==null?void 0:s.data,x,n),Pt(this,tg,x),Pt(this,id,null)}catch($){Pt(this,id,$)}De(this,id)&&(v=De(this,id),x=De(this,tg),j=Date.now(),w="error");const T=p.fetchStatus==="fetching",C=w==="pending",O=w==="error",A=C&&T,P=x!==void 0,F={status:w,fetchStatus:p.fetchStatus,isPending:C,isSuccess:w==="success",isError:O,isInitialLoading:A,isLoading:A,data:x,dataUpdatedAt:p.dataUpdatedAt,error:v,errorUpdatedAt:j,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:O&&!P,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:O&&P,isStale:hD(t,n),refetch:this.refetch,promise:De(this,wc),isEnabled:Js(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const $=F.data!==void 0,L=F.status==="error"&&!$,V=X=>{L?X.reject(F.error):$&&X.resolve(F.data)},H=()=>{const X=Pt(this,wc,F.promise=_k());V(X)},te=De(this,wc);switch(te.status){case"pending":t.queryHash===i.queryHash&&V(te);break;case"fulfilled":(L||F.data!==te.value)&&H();break;case"rejected":(!L||F.error!==te.reason)&&H();break}}return F}updateResult(){const t=De(this,ka),n=this.createResult(De(this,Bn),this.options);if(Pt(this,pf,De(this,Bn).state),Pt(this,eg,this.options),De(this,pf).data!==void 0&&Pt(this,ng,De(this,Bn)),Cw(n,t))return;Pt(this,ka,n);const i=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!De(this,rg).size)return!0;const o=new Set(s??De(this,rg));return this.options.throwOnError&&o.add("error"),Object.keys(De(this,ka)).some(l=>{const c=l;return De(this,ka)[c]!==t[c]&&o.has(c)})};bn(this,dr,tq).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&bn(this,dr,kk).call(this)}},rs=new WeakMap,Bn=new WeakMap,Ib=new WeakMap,ka=new WeakMap,pf=new WeakMap,eg=new WeakMap,wc=new WeakMap,id=new WeakMap,Rb=new WeakMap,tg=new WeakMap,ng=new WeakMap,mf=new WeakMap,gf=new WeakMap,ad=new WeakMap,rg=new WeakMap,dr=new WeakSet,wv=function(t){bn(this,dr,Dk).call(this);let n=De(this,Bn).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Oa)),n},Tk=function(){bn(this,dr,Pk).call(this);const t=fd(this.options.staleTime,De(this,Bn));if(Sf||De(this,ka).isStale||!wk(t))return;const i=Kz(De(this,ka).dataUpdatedAt,t)+1;Pt(this,mf,tf.setTimeout(()=>{De(this,ka).isStale||this.updateResult()},i))},Ak=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(De(this,Bn)):this.options.refetchInterval)??!1},Ek=function(t){bn(this,dr,Ok).call(this),Pt(this,ad,t),!(Sf||Js(this.options.enabled,De(this,Bn))===!1||!wk(De(this,ad))||De(this,ad)===0)&&Pt(this,gf,tf.setInterval(()=>{(this.options.refetchIntervalInBackground||dD.isFocused())&&bn(this,dr,wv).call(this)},De(this,ad)))},kk=function(){bn(this,dr,Tk).call(this),bn(this,dr,Ek).call(this,bn(this,dr,Ak).call(this))},Pk=function(){De(this,mf)&&(tf.clearTimeout(De(this,mf)),Pt(this,mf,void 0))},Ok=function(){De(this,gf)&&(tf.clearInterval(De(this,gf)),Pt(this,gf,void 0))},Dk=function(){const t=De(this,rs).getQueryCache().build(De(this,rs),this.options);if(t===De(this,Bn))return;const n=De(this,Bn);Pt(this,Bn,t),Pt(this,Ib,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},tq=function(t){Ni.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(De(this,ka))}),De(this,rs).getQueryCache().notify({query:De(this,Bn),type:"observerResultsUpdated"})})},zz);function FK(e,t){return Js(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function RI(e,t){return FK(e,t)||e.state.data!==void 0&&Mk(e,t,t.refetchOnMount)}function Mk(e,t,n){if(Js(t.enabled,e)!==!1&&fd(t.staleTime,e)!=="static"){const i=typeof n=="function"?n(e):n;return i==="always"||i!==!1&&hD(e,t)}return!1}function LI(e,t,n,i){return(e!==t||Js(i.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&hD(e,n)}function hD(e,t){return Js(t.enabled,e)!==!1&&e.isStaleByTime(fd(t.staleTime,e))}function $K(e,t){return!Cw(e.getCurrentResult(),t)}function FI(e){return{onFetch:(t,n)=>{var f,p,g,x,v;const i=t.options,a=(g=(p=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,s=((x=t.state.data)==null?void 0:x.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let j=!1;const w=C=>{kK(C,()=>t.signal,()=>j=!0)},_=Qz(t.options,t.fetchOptions),T=async(C,O,A)=>{if(j)return Promise.reject();if(O==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const L={client:t.client,queryKey:t.queryKey,pageParam:O,direction:A?"backward":"forward",meta:t.options.meta};return w(L),L})(),F=await _(I),{maxPages:B}=t.options,$=A?EK:AK;return{pages:$(C.pages,F,B),pageParams:$(C.pageParams,O,B)}};if(a&&s.length){const C=a==="backward",O=C?BK:$I,A={pages:s,pageParams:o},P=O(i,A);l=await T(A,P,C)}else{const C=e??s.length;do{const O=c===0?o[0]??i.initialPageParam:$I(i,l);if(c>0&&O==null)break;l=await T(l,O),c++}while(c<C)}return l};t.options.persister?t.fetchFn=()=>{var j,w;return(w=(j=t.options).persister)==null?void 0:w.call(j,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function $I(e,{pages:t,pageParams:n}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,n[i],n):void 0}function BK(e,{pages:t,pageParams:n}){var i;return t.length>0?(i=e.getPreviousPageParam)==null?void 0:i.call(e,t[0],t,n[0],n):void 0}var Lb,_l,Pa,yf,Cl,Xu,qz,zK=(qz=class extends Zz{constructor(t){super();zt(this,Cl);zt(this,Lb);zt(this,_l);zt(this,Pa);zt(this,yf);Pt(this,Lb,t.client),this.mutationId=t.mutationId,Pt(this,Pa,t.mutationCache),Pt(this,_l,[]),this.state=t.state||nq(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){De(this,_l).includes(t)||(De(this,_l).push(t),this.clearGcTimeout(),De(this,Pa).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Pt(this,_l,De(this,_l).filter(n=>n!==t)),this.scheduleGc(),De(this,Pa).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){De(this,_l).length||(this.state.status==="pending"?this.scheduleGc():De(this,Pa).remove(this))}continue(){var t;return((t=De(this,yf))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,f,p,g,x,v,j,w,_,T,C,O,A,P,I,F,B;const n=()=>{bn(this,Cl,Xu).call(this,{type:"continue"})},i={client:De(this,Lb),meta:this.options.meta,mutationKey:this.options.mutationKey};Pt(this,yf,Jz({fn:()=>this.options.mutationFn?this.options.mutationFn(t,i):Promise.reject(new Error("No mutationFn found")),onFail:($,L)=>{bn(this,Cl,Xu).call(this,{type:"failed",failureCount:$,error:L})},onPause:()=>{bn(this,Cl,Xu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>De(this,Pa).canRun(this)}));const a=this.state.status==="pending",s=!De(this,yf).canStart();try{if(a)n();else{bn(this,Cl,Xu).call(this,{type:"pending",variables:t,isPaused:s}),await((l=(o=De(this,Pa).config).onMutate)==null?void 0:l.call(o,t,this,i));const L=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,i));L!==this.state.context&&bn(this,Cl,Xu).call(this,{type:"pending",context:L,variables:t,isPaused:s})}const $=await De(this,yf).start();return await((p=(f=De(this,Pa).config).onSuccess)==null?void 0:p.call(f,$,t,this.state.context,this,i)),await((x=(g=this.options).onSuccess)==null?void 0:x.call(g,$,t,this.state.context,i)),await((j=(v=De(this,Pa).config).onSettled)==null?void 0:j.call(v,$,null,this.state.variables,this.state.context,this,i)),await((_=(w=this.options).onSettled)==null?void 0:_.call(w,$,null,t,this.state.context,i)),bn(this,Cl,Xu).call(this,{type:"success",data:$}),$}catch($){try{await((C=(T=De(this,Pa).config).onError)==null?void 0:C.call(T,$,t,this.state.context,this,i))}catch(L){Promise.reject(L)}try{await((A=(O=this.options).onError)==null?void 0:A.call(O,$,t,this.state.context,i))}catch(L){Promise.reject(L)}try{await((I=(P=De(this,Pa).config).onSettled)==null?void 0:I.call(P,void 0,$,this.state.variables,this.state.context,this,i))}catch(L){Promise.reject(L)}try{await((B=(F=this.options).onSettled)==null?void 0:B.call(F,void 0,$,t,this.state.context,i))}catch(L){Promise.reject(L)}throw bn(this,Cl,Xu).call(this,{type:"error",error:$}),$}finally{De(this,Pa).runNext(this)}}},Lb=new WeakMap,_l=new WeakMap,Pa=new WeakMap,yf=new WeakMap,Cl=new WeakSet,Xu=function(t){const n=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ni.batch(()=>{De(this,_l).forEach(i=>{i.onMutationUpdate(t)}),De(this,Pa).notify({mutation:this,type:"updated",action:t})})},qz);function nq(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Sc,Oo,Fb,Uz,qK=(Uz=class extends qg{constructor(t={}){super();zt(this,Sc);zt(this,Oo);zt(this,Fb);this.config=t,Pt(this,Sc,new Set),Pt(this,Oo,new Map),Pt(this,Fb,0)}build(t,n,i){const a=new zK({client:t,mutationCache:this,mutationId:++Cj(this,Fb)._,options:t.defaultMutationOptions(n),state:i});return this.add(a),a}add(t){De(this,Sc).add(t);const n=Tj(t);if(typeof n=="string"){const i=De(this,Oo).get(n);i?i.push(t):De(this,Oo).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(De(this,Sc).delete(t)){const n=Tj(t);if(typeof n=="string"){const i=De(this,Oo).get(n);if(i)if(i.length>1){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}else i[0]===t&&De(this,Oo).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Tj(t);if(typeof n=="string"){const i=De(this,Oo).get(n),a=i==null?void 0:i.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var i;const n=Tj(t);if(typeof n=="string"){const a=(i=De(this,Oo).get(n))==null?void 0:i.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ni.batch(()=>{De(this,Sc).forEach(t=>{this.notify({type:"removed",mutation:t})}),De(this,Sc).clear(),De(this,Oo).clear()})}getAll(){return Array.from(De(this,Sc))}find(t){const n={exact:!0,...t};return this.getAll().find(i=>PI(n,i))}findAll(t={}){return this.getAll().filter(n=>PI(t,n))}notify(t){Ni.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ni.batch(()=>Promise.all(t.map(n=>n.continue().catch(Oa))))}},Sc=new WeakMap,Oo=new WeakMap,Fb=new WeakMap,Uz);function Tj(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Nc,sd,is,_c,Lc,uw,Ik,Vz,UK=(Vz=class extends qg{constructor(n,i){super();zt(this,Lc);zt(this,Nc);zt(this,sd);zt(this,is);zt(this,_c);Pt(this,Nc,n),this.setOptions(i),this.bindMethods(),bn(this,Lc,uw).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const i=this.options;this.options=De(this,Nc).defaultMutationOptions(n),Cw(this.options,i)||De(this,Nc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:De(this,is),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&Nf(i.mutationKey)!==Nf(this.options.mutationKey)?this.reset():((a=De(this,is))==null?void 0:a.state.status)==="pending"&&De(this,is).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=De(this,is))==null||n.removeObserver(this)}onMutationUpdate(n){bn(this,Lc,uw).call(this),bn(this,Lc,Ik).call(this,n)}getCurrentResult(){return De(this,sd)}reset(){var n;(n=De(this,is))==null||n.removeObserver(this),Pt(this,is,void 0),bn(this,Lc,uw).call(this),bn(this,Lc,Ik).call(this)}mutate(n,i){var a;return Pt(this,_c,i),(a=De(this,is))==null||a.removeObserver(this),Pt(this,is,De(this,Nc).getMutationCache().build(De(this,Nc),this.options)),De(this,is).addObserver(this),De(this,is).execute(n)}},Nc=new WeakMap,sd=new WeakMap,is=new WeakMap,_c=new WeakMap,Lc=new WeakSet,uw=function(){var i;const n=((i=De(this,is))==null?void 0:i.state)??nq();Pt(this,sd,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Ik=function(n){Ni.batch(()=>{var i,a,s,o,l,c,u,f;if(De(this,_c)&&this.hasListeners()){const p=De(this,sd).variables,g=De(this,sd).context,x={client:De(this,Nc),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(a=(i=De(this,_c)).onSuccess)==null||a.call(i,n.data,p,g,x)}catch(v){Promise.reject(v)}try{(o=(s=De(this,_c)).onSettled)==null||o.call(s,n.data,null,p,g,x)}catch(v){Promise.reject(v)}}else if((n==null?void 0:n.type)==="error"){try{(c=(l=De(this,_c)).onError)==null||c.call(l,n.error,p,g,x)}catch(v){Promise.reject(v)}try{(f=(u=De(this,_c)).onSettled)==null||f.call(u,void 0,n.error,p,g,x)}catch(v){Promise.reject(v)}}}this.listeners.forEach(p=>{p(De(this,sd))})})},Vz),Tl,Hz,VK=(Hz=class extends qg{constructor(t={}){super();zt(this,Tl);this.config=t,Pt(this,Tl,new Map)}build(t,n,i){const a=n.queryKey,s=n.queryHash??lD(a,n);let o=this.get(s);return o||(o=new RK({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(n),state:i,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){De(this,Tl).has(t.queryHash)||(De(this,Tl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=De(this,Tl).get(t.queryHash);n&&(t.destroy(),n===t&&De(this,Tl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ni.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return De(this,Tl).get(t)}getAll(){return[...De(this,Tl).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(i=>kI(n,i))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(i=>kI(t,i)):n}notify(t){Ni.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ni.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ni.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Tl=new WeakMap,Hz),Xr,od,ld,ig,ag,cd,sg,og,Gz,HK=(Gz=class{constructor(e={}){zt(this,Xr);zt(this,od);zt(this,ld);zt(this,ig);zt(this,ag);zt(this,cd);zt(this,sg);zt(this,og);Pt(this,Xr,e.queryCache||new VK),Pt(this,od,e.mutationCache||new qK),Pt(this,ld,e.defaultOptions||{}),Pt(this,ig,new Map),Pt(this,ag,new Map),Pt(this,cd,0)}mount(){Cj(this,cd)._++,De(this,cd)===1&&(Pt(this,sg,dD.subscribe(async e=>{e&&(await this.resumePausedMutations(),De(this,Xr).onFocus())})),Pt(this,og,Tw.subscribe(async e=>{e&&(await this.resumePausedMutations(),De(this,Xr).onOnline())})))}unmount(){var e,t;Cj(this,cd)._--,De(this,cd)===0&&((e=De(this,sg))==null||e.call(this),Pt(this,sg,void 0),(t=De(this,og))==null||t.call(this),Pt(this,og,void 0))}isFetching(e){return De(this,Xr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return De(this,od).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=De(this,Xr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=De(this,Xr).build(this,t),i=n.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(fd(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return De(this,Xr).findAll(e).map(({queryKey:t,state:n})=>{const i=n.data;return[t,i]})}setQueryData(e,t,n){const i=this.defaultQueryOptions({queryKey:e}),a=De(this,Xr).get(i.queryHash),s=a==null?void 0:a.state.data,o=_K(t,s);if(o!==void 0)return De(this,Xr).build(this,i).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ni.batch(()=>De(this,Xr).findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=De(this,Xr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=De(this,Xr);Ni.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=De(this,Xr);return Ni.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},i=Ni.batch(()=>De(this,Xr).findAll(e).map(a=>a.cancel(n)));return Promise.all(i).then(Oa).catch(Oa)}invalidateQueries(e,t={}){return Ni.batch(()=>(De(this,Xr).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},i=Ni.batch(()=>De(this,Xr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(Oa)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(Oa)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=De(this,Xr).build(this,t);return n.isStaleByTime(fd(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Oa).catch(Oa)}fetchInfiniteQuery(e){return e.behavior=FI(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Oa).catch(Oa)}ensureInfiniteQueryData(e){return e.behavior=FI(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Tw.isOnline()?De(this,od).resumePausedMutations():Promise.resolve()}getQueryCache(){return De(this,Xr)}getMutationCache(){return De(this,od)}getDefaultOptions(){return De(this,ld)}setDefaultOptions(e){Pt(this,ld,e)}setQueryDefaults(e,t){De(this,ig).set(Nf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...De(this,ig).values()],n={};return t.forEach(i=>{Bv(e,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(e,t){De(this,ag).set(Nf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...De(this,ag).values()],n={};return t.forEach(i=>{Bv(e,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...De(this,ld).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=lD(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===cD&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...De(this,ld).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){De(this,Xr).clear(),De(this,od).clear()}},Xr=new WeakMap,od=new WeakMap,ld=new WeakMap,ig=new WeakMap,ag=new WeakMap,cd=new WeakMap,sg=new WeakMap,og=new WeakMap,Gz),rq=b.createContext(void 0),us=e=>{const t=b.useContext(rq);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},GK=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(rq.Provider,{value:e,children:t})),iq=b.createContext(!1),WK=()=>b.useContext(iq);iq.Provider;function KK(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var YK=b.createContext(KK()),QK=()=>b.useContext(YK),XK=(e,t,n)=>{const i=n!=null&&n.state.error&&typeof e.throwOnError=="function"?uD(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||i)&&(t.isReset()||(e.retryOnMount=!1))},JK=e=>{b.useEffect(()=>{e.clearReset()},[e])},ZK=({result:e,errorResetBoundary:t,throwOnError:n,query:i,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(a&&e.data===void 0||uD(n,[e.error,i])),eY=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...a)=>n(i(...a)):n(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},tY=(e,t)=>e.isLoading&&e.isFetching&&!t,nY=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,BI=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function rY(e,t,n){var g,x,v,j;const i=WK(),a=QK(),s=us(),o=s.defaultQueryOptions(e);(x=(g=s.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||x.call(g,o);const l=s.getQueryCache().get(o.queryHash);o._optimisticResults=i?"isRestoring":"optimistic",eY(o),XK(o,a,l),JK(a);const c=!s.getQueryCache().get(o.queryHash),[u]=b.useState(()=>new t(s,o)),f=u.getOptimisticResult(o),p=!i&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(w=>{const _=p?u.subscribe(Ni.batchCalls(w)):Oa;return u.updateResult(),_},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),b.useEffect(()=>{u.setOptions(o)},[o,u]),nY(o,f))throw BI(o,u,a);if(ZK({result:f,errorResetBoundary:a,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;if((j=(v=s.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||j.call(v,o,f),o.experimental_prefetchInRender&&!Sf&&tY(f,i)){const w=c?BI(o,u,a):l==null?void 0:l.promise;w==null||w.catch(Oa).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?f:u.trackResult(f)}function ZS(e,t){return rY(e,LK)}function iY(e,t){const n=us(),[i]=b.useState(()=>new UK(n,e));b.useEffect(()=>{i.setOptions(e)},[i,e]);const a=b.useSyncExternalStore(b.useCallback(o=>i.subscribe(Ni.batchCalls(o)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),s=b.useCallback((o,l)=>{i.mutate(o,l).catch(Oa)},[i]);if(a.error&&uD(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const aY=new HK({defaultOptions:{queries:{staleTime:0,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!1}}}),Vt={clinicSettings:["clinicSettings"],clinicSubscription:["clinicSubscription"],patients:{all:["patients"],list:e=>["patients","list",e],detail:e=>["patients","detail",e],context:e=>["patients","context",e]},queue:{all:["queue"],today:["queue","today"],entry:e=>["queue","entry",e],latest:e=>["queue","patient",e,"latest"]},staff:{all:["staff"],list:["staff","list"],detail:e=>["staff","detail",e]},pharmacyOrders:{all:["pharmacyOrders"],detail:e=>["pharmacyOrders","detail",e],byPatient:e=>["pharmacyOrders","patient",e]},labOrders:{all:["labOrders"],detail:e=>["labOrders","detail",e],byPatient:e=>["labOrders","patient",e]},drugs:{all:["drugs"],list:["drugs","list"],detail:e=>["drugs","detail",e]},labTests:{all:["labTests"],list:["labTests","list"]},patientDebts:{balance:e=>["patientDebts","balance",e]},dental:{records:e=>["dental","records",e]}},sY="modulepreload",oY=function(e){return"/"+e},zI={},eN=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(n.map(u=>{if(u=oY(u),u in zI)return;zI[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":sY,f||(g.as="script"),g.crossOrigin="",g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((x,v)=>{g.addEventListener("load",x),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},Lm=({message:e="Newtons Ai HMS",fullScreen:t=!1})=>r.jsx("div",{className:`loading-container ${t?"fullscreen":""}`,children:r.jsxs("div",{className:"loading-content",children:[r.jsxs("div",{className:"spinner-ring",children:[r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{})]}),r.jsx("div",{className:"loading-title",children:e}),t&&r.jsx("div",{className:"loading-subtitle",children:"Optimizing your experience..."})]})});function lY(e={}){const{nonce:t,locale:n,onScriptLoadSuccess:i,onScriptLoadError:a}=e,[s,o]=b.useState(!1),l=b.useRef(i);l.current=i;const c=b.useRef(a);return c.current=a,b.useEffect(()=>{const u=document.createElement("script");return u.src="https://accounts.google.com/gsi/client",n&&(u.src+=`?hl=${n}`),u.async=!0,u.defer=!0,u.nonce=t,u.onload=()=>{var f;o(!0),(f=l.current)===null||f===void 0||f.call(l)},u.onerror=()=>{var f;o(!1),(f=c.current)===null||f===void 0||f.call(c)},document.body.appendChild(u),()=>{document.body.removeChild(u)}},[t]),s}const aq=b.createContext(null);function cY({clientId:e,nonce:t,locale:n,onScriptLoadSuccess:i,onScriptLoadError:a,children:s}){const o=lY({nonce:t,onScriptLoadSuccess:i,onScriptLoadError:a,locale:n}),l=b.useMemo(()=>({locale:n,clientId:e,scriptLoadedSuccessfully:o}),[e,o]);return Se.createElement(aq.Provider,{value:l},s)}function uY(){const e=b.useContext(aq);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function dY(e){var t;return(t=e==null?void 0:e.clientId)!==null&&t!==void 0?t:e==null?void 0:e.client_id}const hY={large:40,medium:32,small:20};function fY({onSuccess:e,onError:t,useOneTap:n,promptMomentNotification:i,type:a="standard",theme:s="outline",size:o="large",text:l,shape:c,logo_alignment:u,width:f,click_listener:p,state:g,containerProps:x,...v}){const j=b.useRef(null),{clientId:w,locale:_,scriptLoadedSuccessfully:T}=uY(),C=b.useRef(e);C.current=e;const O=b.useRef(t);O.current=t;const A=b.useRef(i);return A.current=i,b.useEffect(()=>{var P,I,F,B,$,L,V,H,te;if(T)return(F=(I=(P=window==null?void 0:window.google)===null||P===void 0?void 0:P.accounts)===null||I===void 0?void 0:I.id)===null||F===void 0||F.initialize({client_id:w,callback:X=>{var q;if(!(X!=null&&X.credential))return(q=O.current)===null||q===void 0?void 0:q.call(O);const{credential:W,select_by:ae}=X;C.current({credential:W,clientId:dY(X),select_by:ae})},...v}),(L=($=(B=window==null?void 0:window.google)===null||B===void 0?void 0:B.accounts)===null||$===void 0?void 0:$.id)===null||L===void 0||L.renderButton(j.current,{type:a,theme:s,size:o,text:l,shape:c,logo_alignment:u,width:f,locale:_,click_listener:p,state:g}),n&&((te=(H=(V=window==null?void 0:window.google)===null||V===void 0?void 0:V.accounts)===null||H===void 0?void 0:H.id)===null||te===void 0||te.prompt(A.current)),()=>{var X,q,W;n&&((W=(q=(X=window==null?void 0:window.google)===null||X===void 0?void 0:X.accounts)===null||q===void 0?void 0:q.id)===null||W===void 0||W.cancel())}},[w,T,n,a,s,o,l,c,u,f,_]),Se.createElement("div",{...x,ref:j,style:{height:hY[o],...x==null?void 0:x.style}})}var Zx={},qI;function pY(){if(qI)return Zx;qI=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.parse=o,Zx.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,x){const v=new s,j=g.length;if(j<2)return v;const w=(x==null?void 0:x.decode)||f;let _=0;do{const T=g.indexOf("=",_);if(T===-1)break;const C=g.indexOf(";",_),O=C===-1?j:C;if(T>O){_=g.lastIndexOf(";",T-1)+1;continue}const A=l(g,_,T),P=c(g,T,A),I=g.slice(A,P);if(v[I]===void 0){let F=l(g,T+1,O),B=c(g,O,F);const $=w(g.slice(F,B));v[I]=$}_=O+1}while(_<j);return v}function l(g,x,v){do{const j=g.charCodeAt(x);if(j!==32&&j!==9)return x}while(++x<v);return v}function c(g,x,v){for(;x>v;){const j=g.charCodeAt(--x);if(j!==32&&j!==9)return x+1}return v}function u(g,x,v){const j=(v==null?void 0:v.encode)||encodeURIComponent;if(!e.test(g))throw new TypeError(`argument name is invalid: ${g}`);const w=j(x);if(!t.test(w))throw new TypeError(`argument val is invalid: ${x}`);let _=g+"="+w;if(!v)return _;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);_+="; Max-Age="+v.maxAge}if(v.domain){if(!n.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);_+="; Domain="+v.domain}if(v.path){if(!i.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);_+="; Path="+v.path}if(v.expires){if(!p(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);_+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(_+="; HttpOnly"),v.secure&&(_+="; Secure"),v.partitioned&&(_+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return _}function f(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return a.call(g)==="[object Date]"}return Zx}pY();var UI="popstate";function mY(e={}){function t(i,a){let{pathname:s,search:o,hash:l}=i.location;return Rk("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:zv(a)}return yY(t,n,null,e)}function Vr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ro(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gY(){return Math.random().toString(36).substring(2,10)}function VI(e,t){return{usr:e.state,key:e.key,idx:t}}function Rk(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ug(t):t,state:n,key:t&&t.key||i||gY()}}function zv({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ug(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function yY(e,t,n,i={}){let{window:a=document.defaultView,v5Compat:s=!1}=i,o=a.history,l="POP",c=null,u=f();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let w=f(),_=w==null?null:w-u;u=w,c&&c({action:l,location:j.location,delta:_})}function g(w,_){l="PUSH";let T=Rk(j.location,w,_);u=f()+1;let C=VI(T,u),O=j.createHref(T);try{o.pushState(C,"",O)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;a.location.assign(O)}s&&c&&c({action:l,location:j.location,delta:1})}function x(w,_){l="REPLACE";let T=Rk(j.location,w,_);u=f();let C=VI(T,u),O=j.createHref(T);o.replaceState(C,"",O),s&&c&&c({action:l,location:j.location,delta:0})}function v(w){return xY(w)}let j={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(UI,p),c=w,()=>{a.removeEventListener(UI,p),c=null}},createHref(w){return t(a,w)},createURL:v,encodeLocation(w){let _=v(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:x,go(w){return o.go(w)}};return j}function xY(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Vr(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:zv(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function sq(e,t,n="/"){return vY(e,t,n,!1)}function vY(e,t,n,i){let a=typeof t=="string"?Ug(t):t,s=Fc(a.pathname||"/",n);if(s==null)return null;let o=oq(e);bY(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=PY(s);l=EY(o[c],u,i)}return l}function oq(e,t=[],n=[],i=""){let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Vr(c.relativePath.startsWith(i),`Absolute route path "${c.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(i.length));let u=Pc([i,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(Vr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),oq(s.children,t,f,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:TY(u,s.index),routesMeta:f})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of lq(s.path))a(s,o,c)}),t}function lq(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return a?[s,""]:[s];let o=lq(i.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function bY(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:AY(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var jY=/^:[\w-]+$/,wY=3,SY=2,NY=1,_Y=10,CY=-2,HI=e=>e==="*";function TY(e,t){let n=e.split("/"),i=n.length;return n.some(HI)&&(i+=CY),t&&(i+=SY),n.filter(a=>!HI(a)).reduce((a,s)=>a+(jY.test(s)?wY:s===""?NY:_Y),i)}function AY(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function EY(e,t,n=!1){let{routesMeta:i}=e,a={},s="/",o=[];for(let l=0;l<i.length;++l){let c=i[l],u=l===i.length-1,f=s==="/"?t:t.slice(s.length)||"/",p=Aw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!p&&u&&n&&!i[i.length-1].route.index&&(p=Aw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Pc([s,p.pathname]),pathnameBase:IY(Pc([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Pc([s,p.pathnameBase]))}return o}function Aw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=kY(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:i.reduce((u,{paramName:f,isOptional:p},g)=>{if(f==="*"){let v=l[g]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const x=l[g];return p&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function kY(e,t=!1,n=!0){ro(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function PY(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ro(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Fc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function OY(e,t="/"){let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?Ug(e):e;return{pathname:n?n.startsWith("/")?n:DY(n,t):t,search:RY(i),hash:LY(a)}}function DY(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function NC(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MY(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function fD(e){let t=MY(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function pD(e,t,n,i=!1){let a;typeof e=="string"?a=Ug(e):(a={...e},Vr(!a.pathname||!a.pathname.includes("?"),NC("?","pathname","search",a)),Vr(!a.pathname||!a.pathname.includes("#"),NC("#","pathname","hash",a)),Vr(!a.search||!a.search.includes("#"),NC("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!i&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;a.pathname=g.join("/")}l=p>=0?t[p]:"/"}let c=OY(a,l),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var Pc=e=>e.join("/").replace(/\/\/+/g,"/"),IY=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),RY=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,LY=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FY(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var cq=["POST","PUT","PATCH","DELETE"];new Set(cq);var $Y=["GET",...cq];new Set($Y);var Vg=b.createContext(null);Vg.displayName="DataRouter";var tN=b.createContext(null);tN.displayName="DataRouterState";var uq=b.createContext({isTransitioning:!1});uq.displayName="ViewTransition";var BY=b.createContext(new Map);BY.displayName="Fetchers";var zY=b.createContext(null);zY.displayName="Await";var zo=b.createContext(null);zo.displayName="Navigation";var $b=b.createContext(null);$b.displayName="Location";var qo=b.createContext({outlet:null,matches:[],isDataRoute:!1});qo.displayName="Route";var mD=b.createContext(null);mD.displayName="RouteError";function qY(e,{relative:t}={}){Vr(Hg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=b.useContext(zo),{hash:a,pathname:s,search:o}=Bb(e,{relative:t}),l=s;return n!=="/"&&(l=s==="/"?n:Pc([n,s])),i.createHref({pathname:l,search:o,hash:a})}function Hg(){return b.useContext($b)!=null}function Gr(){return Vr(Hg(),"useLocation() may be used only in the context of a <Router> component."),b.useContext($b).location}var dq="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hq(e){b.useContext(zo).static||b.useLayoutEffect(e)}function It(){let{isDataRoute:e}=b.useContext(qo);return e?tQ():UY()}function UY(){Vr(Hg(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(Vg),{basename:t,navigator:n}=b.useContext(zo),{matches:i}=b.useContext(qo),{pathname:a}=Gr(),s=JSON.stringify(fD(i)),o=b.useRef(!1);return hq(()=>{o.current=!0}),b.useCallback((c,u={})=>{if(ro(o.current,dq),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=pD(c,JSON.parse(s),a,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Pc([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,s,a,e])}b.createContext(null);function Ii(){let{matches:e}=b.useContext(qo),t=e[e.length-1];return t?t.params:{}}function Bb(e,{relative:t}={}){let{matches:n}=b.useContext(qo),{pathname:i}=Gr(),a=JSON.stringify(fD(n));return b.useMemo(()=>pD(e,JSON.parse(a),i,t==="path"),[e,a,i,t])}function VY(e,t){return fq(e,t)}function fq(e,t,n,i){var T;Vr(Hg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:s}=b.useContext(zo),{matches:o}=b.useContext(qo),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";pq(u,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=Gr(),x;if(t){let C=typeof t=="string"?Ug(t):t;Vr(f==="/"||((T=C.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=g;let v=x.pathname||"/",j=v;if(f!=="/"){let C=f.replace(/^\//,"").split("/");j="/"+v.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=!s&&n&&n.matches&&n.matches.length>0?n.matches:sq(e,{pathname:j});ro(p||w!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ro(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=YY(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Pc([f,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Pc([f,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,i);return t&&_?b.createElement($b.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function HY(){let e=eQ(),t=FY(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:s},"ErrorBoundary")," or"," ",b.createElement("code",{style:s},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:a},n):null,o)}var GY=b.createElement(HY,null),WY=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(qo.Provider,{value:this.props.routeContext},b.createElement(mD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KY({routeContext:e,match:t,children:n}){let i=b.useContext(Vg);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(qo.Provider,{value:e},n)}function YY(e,t=[],n=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,s=n==null?void 0:n.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Vr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:f,errors:p}=n,g=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!p||p[u.route.id]===void 0);if(u.route.lazy||g){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,f)=>{let p,g=!1,x=null,v=null;n&&(p=s&&u.route.id?s[u.route.id]:void 0,x=u.route.errorElement||GY,o&&(l<0&&f===0?(pq("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):l===f&&(g=!0,v=u.route.hydrateFallbackElement||null)));let j=t.concat(a.slice(0,f+1)),w=()=>{let _;return p?_=x:g?_=v:u.route.Component?_=b.createElement(u.route.Component,null):u.route.element?_=u.route.element:_=c,b.createElement(KY,{match:u,routeContext:{outlet:c,matches:j,isDataRoute:n!=null},children:_})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?b.createElement(WY,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:w(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):w()},null)}function gD(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QY(e){let t=b.useContext(Vg);return Vr(t,gD(e)),t}function XY(e){let t=b.useContext(tN);return Vr(t,gD(e)),t}function JY(e){let t=b.useContext(qo);return Vr(t,gD(e)),t}function yD(e){let t=JY(e),n=t.matches[t.matches.length-1];return Vr(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ZY(){return yD("useRouteId")}function eQ(){var i;let e=b.useContext(mD),t=XY("useRouteError"),n=yD("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function tQ(){let{router:e}=QY("useNavigate"),t=yD("useNavigate"),n=b.useRef(!1);return hq(()=>{n.current=!0}),b.useCallback(async(a,s={})=>{ro(n.current,dq),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var GI={};function pq(e,t,n){!t&&!GI[e]&&(GI[e]=!0,ro(!1,n))}b.memo(nQ);function nQ({routes:e,future:t,state:n}){return fq(e,void 0,n,t)}function an({to:e,replace:t,state:n,relative:i}){Vr(Hg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=b.useContext(zo);ro(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=b.useContext(qo),{pathname:o}=Gr(),l=It(),c=pD(e,fD(s),o,i==="path"),u=JSON.stringify(c);return b.useEffect(()=>{l(JSON.parse(u),{replace:t,state:n,relative:i})},[l,u,i,t,n]),null}function vt(e){Vr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rQ({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:a,static:s=!1}){Vr(!Hg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=b.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof n=="string"&&(n=Ug(n));let{pathname:c="/",search:u="",hash:f="",state:p=null,key:g="default"}=n,x=b.useMemo(()=>{let v=Fc(c,o);return v==null?null:{location:{pathname:v,search:u,hash:f,state:p,key:g},navigationType:i}},[o,c,u,f,p,g,i]);return ro(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:b.createElement(zo.Provider,{value:l},b.createElement($b.Provider,{children:t,value:x}))}function Mm({children:e,location:t}){return VY(Lk(e),t)}function Lk(e,t=[]){let n=[];return b.Children.forEach(e,(i,a)=>{if(!b.isValidElement(i))return;let s=[...t,a];if(i.type===b.Fragment){n.push.apply(n,Lk(i.props.children,s));return}Vr(i.type===vt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vr(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Lk(i.props.children,s)),n.push(o)}),n}var dw="get",hw="application/x-www-form-urlencoded";function nN(e){return e!=null&&typeof e.tagName=="string"}function iQ(e){return nN(e)&&e.tagName.toLowerCase()==="button"}function aQ(e){return nN(e)&&e.tagName.toLowerCase()==="form"}function sQ(e){return nN(e)&&e.tagName.toLowerCase()==="input"}function oQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function lQ(e,t){return e.button===0&&(!t||t==="_self")&&!oQ(e)}function Fk(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let i=e[n];return t.concat(Array.isArray(i)?i.map(a=>[n,a]):[[n,i]])},[]))}function cQ(e,t){let n=Fk(e);return t&&t.forEach((i,a)=>{n.has(a)||t.getAll(a).forEach(s=>{n.append(a,s)})}),n}var Aj=null;function uQ(){if(Aj===null)try{new FormData(document.createElement("form"),0),Aj=!1}catch{Aj=!0}return Aj}var dQ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _C(e){return e!=null&&!dQ.has(e)?(ro(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hw}"`),null):e}function hQ(e,t){let n,i,a,s,o;if(aQ(e)){let l=e.getAttribute("action");i=l?Fc(l,t):null,n=e.getAttribute("method")||dw,a=_C(e.getAttribute("enctype"))||hw,s=new FormData(e)}else if(iQ(e)||sQ(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(i=c?Fc(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||dw,a=_C(e.getAttribute("formenctype"))||_C(l.getAttribute("enctype"))||hw,s=new FormData(l,e),!uQ()){let{name:u,type:f,value:p}=e;if(f==="image"){let g=u?`${u}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else u&&s.append(u,p)}}else{if(nN(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=dw,i=null,a=hw,o=e}return s&&a==="text/plain"&&(o=s,s=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:s,body:o}}function xD(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function fQ(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pQ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function mQ(e,t,n){let i=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let o=await fQ(s,n);return o.links?o.links():[]}return[]}));return vQ(i.flat(1).filter(pQ).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function WI(e,t,n,i,a,s){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var f;return n[u].pathname!==c.pathname||((f=n[u].route.path)==null?void 0:f.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return s==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):s==="data"?t.filter((c,u)=>{var p;let f=i.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function gQ(e,t,{includeHydrateFallback:n}={}){return yQ(e.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function yQ(e){return[...new Set(e)]}function xQ(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function vQ(e,t){let n=new Set;return new Set(t),e.reduce((i,a)=>{let s=JSON.stringify(xQ(a));return n.has(s)||(n.add(s),i.push({key:s,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var bQ=new Set([100,101,204,205]);function jQ(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Fc(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function mq(){let e=b.useContext(Vg);return xD(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function wQ(){let e=b.useContext(tN);return xD(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var vD=b.createContext(void 0);vD.displayName="FrameworkContext";function gq(){let e=b.useContext(vD);return xD(e,"You must render this element inside a <HydratedRouter> element"),e}function SQ(e,t){let n=b.useContext(vD),[i,a]=b.useState(!1),[s,o]=b.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:p}=t,g=b.useRef(null);b.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let j=_=>{_.forEach(T=>{o(T.isIntersecting)})},w=new IntersectionObserver(j,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[e]),b.useEffect(()=>{if(i){let j=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(j)}}},[i]);let x=()=>{a(!0)},v=()=>{a(!1),o(!1)};return n?e!=="intent"?[s,g,{}]:[s,g,{onFocus:ev(l,x),onBlur:ev(c,v),onMouseEnter:ev(u,x),onMouseLeave:ev(f,v),onTouchStart:ev(p,x)}]:[!1,g,{}]}function ev(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function NQ({page:e,...t}){let{router:n}=mq(),i=b.useMemo(()=>sq(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?b.createElement(CQ,{page:e,matches:i,...t}):null}function _Q(e){let{manifest:t,routeModules:n}=gq(),[i,a]=b.useState([]);return b.useEffect(()=>{let s=!1;return mQ(e,t,n).then(o=>{s||a(o)}),()=>{s=!0}},[e,t,n]),i}function CQ({page:e,matches:t,...n}){let i=Gr(),{manifest:a,routeModules:s}=gq(),{basename:o}=mq(),{loaderData:l,matches:c}=wQ(),u=b.useMemo(()=>WI(e,t,c,a,i,"data"),[e,t,c,a,i]),f=b.useMemo(()=>WI(e,t,c,a,i,"assets"),[e,t,c,a,i]),p=b.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let v=new Set,j=!1;if(t.forEach(_=>{var C;let T=a.routes[_.route.id];!T||!T.hasLoader||(!u.some(O=>O.route.id===_.route.id)&&_.route.id in l&&((C=s[_.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?j=!0:v.add(_.route.id))}),v.size===0)return[];let w=jQ(e,o);return j&&v.size>0&&w.searchParams.set("_routes",t.filter(_=>v.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[o,l,i,a,u,t,e,s]),g=b.useMemo(()=>gQ(f,a),[f,a]),x=_Q(f);return b.createElement(b.Fragment,null,p.map(v=>b.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),g.map(v=>b.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),x.map(({key:v,link:j})=>b.createElement("link",{key:v,...j})))}function TQ(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var yq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yq&&(window.__reactRouterVersion="7.6.0")}catch{}function AQ({basename:e,children:t,window:n}){let i=b.useRef();i.current==null&&(i.current=mY({window:n,v5Compat:!0}));let a=i.current,[s,o]=b.useState({action:a.action,location:a.location}),l=b.useCallback(c=>{b.startTransition(()=>o(c))},[o]);return b.useLayoutEffect(()=>a.listen(l),[a,l]),b.createElement(rQ,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a})}var xq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_r=b.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:p,...g},x){let{basename:v}=b.useContext(zo),j=typeof u=="string"&&xq.test(u),w,_=!1;if(typeof u=="string"&&j&&(w=u,yq))try{let B=new URL(window.location.href),$=u.startsWith("//")?new URL(B.protocol+u):new URL(u),L=Fc($.pathname,v);$.origin===B.origin&&L!=null?u=L+$.search+$.hash:_=!0}catch{ro(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=qY(u,{relative:a}),[C,O,A]=SQ(i,g),P=OQ(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:a,viewTransition:p});function I(B){t&&t(B),B.defaultPrevented||P(B)}let F=b.createElement("a",{...g,...A,href:w||T,onClick:_||s?t:I,ref:TQ(x,O),target:c,"data-discover":!j&&n==="render"?"true":void 0});return C&&!j?b.createElement(b.Fragment,null,F,b.createElement(NQ,{page:T})):F});_r.displayName="Link";var EQ=b.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:a=!1,style:s,to:o,viewTransition:l,children:c,...u},f){let p=Bb(o,{relative:u.relative}),g=Gr(),x=b.useContext(tN),{navigator:v,basename:j}=b.useContext(zo),w=x!=null&&LQ(p)&&l===!0,_=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,T=g.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&j&&(C=Fc(C,j)||C);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=T===_||!a&&T.startsWith(_)&&T.charAt(O)==="/",P=C!=null&&(C===_||!a&&C.startsWith(_)&&C.charAt(_.length)==="/"),I={isActive:A,isPending:P,isTransitioning:w},F=A?t:void 0,B;typeof i=="function"?B=i(I):B=[i,A?"active":null,P?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let $=typeof s=="function"?s(I):s;return b.createElement(_r,{...u,"aria-current":F,className:B,ref:f,style:$,to:o,viewTransition:l},typeof c=="function"?c(I):c)});EQ.displayName="NavLink";var kQ=b.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:a,state:s,method:o=dw,action:l,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:p,...g},x)=>{let v=IQ(),j=RQ(l,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&xq.test(l),T=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,A=(O==null?void 0:O.getAttribute("formmethod"))||o;v(O||C.currentTarget,{fetcherKey:t,method:A,navigate:n,replace:a,state:s,relative:u,preventScrollReset:f,viewTransition:p})};return b.createElement("form",{ref:x,method:w,action:j,onSubmit:i?c:T,...g,"data-discover":!_&&e==="render"?"true":void 0})});kQ.displayName="Form";function PQ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vq(e){let t=b.useContext(Vg);return Vr(t,PQ(e)),t}function OQ(e,{target:t,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=It(),c=Gr(),u=Bb(e,{relative:s});return b.useCallback(f=>{if(lQ(f,t)){f.preventDefault();let p=n!==void 0?n:zv(c)===zv(u);l(e,{replace:p,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,u,n,i,t,e,a,s,o])}function bq(e){ro(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=b.useRef(Fk(e)),n=b.useRef(!1),i=Gr(),a=b.useMemo(()=>cQ(i.search,n.current?null:t.current),[i.search]),s=It(),o=b.useCallback((l,c)=>{const u=Fk(typeof l=="function"?l(a):l);n.current=!0,s("?"+u,c)},[s,a]);return[a,o]}var DQ=0,MQ=()=>`__${String(++DQ)}__`;function IQ(){let{router:e}=vq("useSubmit"),{basename:t}=b.useContext(zo),n=ZY();return b.useCallback(async(i,a={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=hQ(i,t);if(a.navigate===!1){let f=a.fetcherKey||MQ();await e.fetch(f,n,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function RQ(e,{relative:t}={}){let{basename:n}=b.useContext(zo),i=b.useContext(qo);Vr(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),s={...Bb(e||".",{relative:t})},o=Gr();if(e==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(f=>f==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Pc([n,s.pathname])),zv(s)}function LQ(e,t={}){let n=b.useContext(uq);Vr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=vq("useViewTransitionState"),a=Bb(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=Fc(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Fc(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Aw(a.pathname,o)!=null||Aw(a.pathname,s)!=null}[...bQ];var FQ=Wz();class $Q extends b.Component{constructor(){super(...arguments);xr(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,i){console.error("Uncaught error:",n,i)}render(){return this.state.hasError?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"5px"},children:[r.jsx("h1",{children:"Something went wrong."}),r.jsx("p",{children:"We are sorry for the inconvenience. Please try again later."})]}):this.props.children}}const jq=b.createContext(void 0),BQ=({children:e})=>{const[t,n]=b.useState(!1),[i,a]=b.useState({startDate:null,endDate:null}),[s,o]=b.useState(null),[l,c]=b.useState(null),[u,f]=b.useState(null),p=b.useCallback(()=>n(!0),[]),g=b.useCallback(()=>n(!1),[]),x=b.useCallback(()=>n(O=>!O),[]),v=b.useCallback(O=>{f(()=>O)},[]),j=b.useCallback(O=>{u?u(O):console.warn("Analysis navigator not registered")},[u]),[w,_]=b.useState(null),T=b.useCallback(O=>{_(()=>O)},[]),C=b.useCallback(async()=>w?await w():(console.warn("Analysis refresher not registered"),null),[w]);return r.jsx(jq.Provider,{value:{isOpen:t,openAssistant:p,closeAssistant:g,toggleAssistant:x,analysisDateRange:i,setAnalysisDateRange:a,analysisData:s,setAnalysisData:o,analysisNavigate:j,registerAnalysisNavigator:v,refreshAnalysis:C,registerAnalysisRefresher:T,pageContext:l,setPageContext:c},children:e})},rN=()=>{const e=b.useContext(jq);if(e===void 0)throw new Error("useClinicAssistantContext must be used within a ClinicAssistantProvider");return e},wq=b.createContext(void 0),zQ=({children:e})=>{const[t,n]=b.useState([]),[i,a]=b.useState(null),[s,o]=b.useState(""),[l,c]=b.useState(0),[u,f]=b.useState([]),p=b.useCallback(j=>{n(w=>[...w,j])},[]),g=b.useCallback((j,w)=>{n(_=>_.map(T=>T.id===j?{...T,...w}:T))},[]),x=b.useCallback(j=>{n(w=>w.filter(_=>_.id!==j))},[]),v=b.useCallback(()=>{n([]),a(null),o(""),c(0),f([])},[]);return r.jsx(wq.Provider,{value:{purchaseRows:t,setPurchaseRows:n,selectedDistributor:i,setSelectedDistributor:a,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:u,setDistributors:f,addPurchaseRow:p,updatePurchaseRow:g,removePurchaseRow:x,resetPurchase:v},children:e})},Sq=()=>{const e=b.useContext(wq);if(!e)throw new Error("usePurchaseContext must be used within a PurchaseProvider");return e},Nq=b.createContext(void 0),qQ=({children:e})=>{const[t,n]=b.useState(!1),[i,a]=b.useState(""),s=b.useCallback(()=>n(!0),[]),o=b.useCallback(()=>n(!1),[]),l=b.useCallback(()=>n(c=>!c),[]);return b.useEffect(()=>{const c=u=>{(u.ctrlKey||u.metaKey)&&u.key==="k"&&(u.preventDefault(),l()),u.key==="Escape"&&t&&o()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[t,l,o]),r.jsx(Nq.Provider,{value:{isOpen:t,openCommandBar:s,closeCommandBar:o,toggleCommandBar:l,preFilledQuery:i,setPreFilledQuery:a},children:e})},$c=()=>{const e=b.useContext(Nq);if(e===void 0)throw new Error("useCommandBar must be used within a CommandBarProvider");return e};function Bc(e){return Array.isArray?Array.isArray(e):Tq(e)==="[object Array]"}function UQ(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function VQ(e){return e==null?"":UQ(e)}function kl(e){return typeof e=="string"}function _q(e){return typeof e=="number"}function HQ(e){return e===!0||e===!1||GQ(e)&&Tq(e)=="[object Boolean]"}function Cq(e){return typeof e=="object"}function GQ(e){return Cq(e)&&e!==null}function As(e){return e!=null}function CC(e){return!e.trim().length}function Tq(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const WQ="Incorrect 'index' type",KQ=e=>`Invalid value for key ${e}`,YQ=e=>`Pattern length exceeds max of ${e}.`,QQ=e=>`Missing ${e} property in key`,XQ=e=>`Property 'weight' in key '${e}' must be a positive integer`,KI=Object.prototype.hasOwnProperty;class JQ{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(i=>{let a=Aq(i);this._keys.push(a),this._keyMap[a.id]=a,n+=a.weight}),this._keys.forEach(i=>{i.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Aq(e){let t=null,n=null,i=null,a=1,s=null;if(kl(e)||Bc(e))i=e,t=YI(e),n=$k(e);else{if(!KI.call(e,"name"))throw new Error(QQ("name"));const o=e.name;if(i=o,KI.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(XQ(o));t=YI(o),n=$k(o),s=e.getFn}return{path:t,id:n,weight:a,src:i,getFn:s}}function YI(e){return Bc(e)?e:e.split(".")}function $k(e){return Bc(e)?e.join("."):e}function ZQ(e,t){let n=[],i=!1;const a=(s,o,l)=>{if(As(s))if(!o[l])n.push(s);else{let c=o[l];const u=s[c];if(!As(u))return;if(l===o.length-1&&(kl(u)||_q(u)||HQ(u)))n.push(VQ(u));else if(Bc(u)){i=!0;for(let f=0,p=u.length;f<p;f+=1)a(u[f],o,l+1)}else o.length&&a(u,o,l+1)}};return a(e,kl(t)?t.split("."):t,0),i?n:n[0]}const eX={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},tX={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},nX={location:0,threshold:.6,distance:100},rX={useExtendedSearch:!1,getFn:ZQ,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var sn={...tX,...eX,...nX,...rX};const iX=/[^ ]+/g;function aX(e=1,t=3){const n=new Map,i=Math.pow(10,t);return{get(a){const s=a.match(iX).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*i)/i);return n.set(s,l),l},clear(){n.clear()}}}class bD{constructor({getFn:t=sn.getFn,fieldNormWeight:n=sn.fieldNormWeight}={}){this.norm=aX(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,i)=>{this._keysMap[n.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,kl(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();kl(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,i=this.size();n<i;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!As(t)||CC(t))return;let i={v:t,i:n,n:this.norm.get(t)};this.records.push(i)}_addObject(t,n){let i={i:n,$:{}};this.keys.forEach((a,s)=>{let o=a.getFn?a.getFn(t):this.getFn(t,a.path);if(As(o)){if(Bc(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:f}=c.pop();if(As(f))if(kl(f)&&!CC(f)){let p={v:f,i:u,n:this.norm.get(f)};l.push(p)}else Bc(f)&&f.forEach((p,g)=>{c.push({nestedArrIndex:g,value:p})})}i.$[s]=l}else if(kl(o)&&!CC(o)){let l={v:o,n:this.norm.get(o)};i.$[s]=l}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function Eq(e,t,{getFn:n=sn.getFn,fieldNormWeight:i=sn.fieldNormWeight}={}){const a=new bD({getFn:n,fieldNormWeight:i});return a.setKeys(e.map(Aq)),a.setSources(t),a.create(),a}function sX(e,{getFn:t=sn.getFn,fieldNormWeight:n=sn.fieldNormWeight}={}){const{keys:i,records:a}=e,s=new bD({getFn:t,fieldNormWeight:n});return s.setKeys(i),s.setIndexRecords(a),s}function Ej(e,{errors:t=0,currentLocation:n=0,expectedLocation:i=0,distance:a=sn.distance,ignoreLocation:s=sn.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(i-n);return a?o+l/a:l?1:o}function oX(e=[],t=sn.minMatchCharLength){let n=[],i=-1,a=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&i===-1?i=s:!l&&i!==-1&&(a=s-1,a-i+1>=t&&n.push([i,a]),i=-1)}return e[s-1]&&s-i>=t&&n.push([i,s-1]),n}const Zh=32;function lX(e,t,n,{location:i=sn.location,distance:a=sn.distance,threshold:s=sn.threshold,findAllMatches:o=sn.findAllMatches,minMatchCharLength:l=sn.minMatchCharLength,includeMatches:c=sn.includeMatches,ignoreLocation:u=sn.ignoreLocation}={}){if(t.length>Zh)throw new Error(YQ(Zh));const f=t.length,p=e.length,g=Math.max(0,Math.min(i,p));let x=s,v=g;const j=l>1||c,w=j?Array(p):[];let _;for(;(_=e.indexOf(t,v))>-1;){let I=Ej(t,{currentLocation:_,expectedLocation:g,distance:a,ignoreLocation:u});if(x=Math.min(I,x),v=_+f,j){let F=0;for(;F<f;)w[_+F]=1,F+=1}}v=-1;let T=[],C=1,O=f+p;const A=1<<f-1;for(let I=0;I<f;I+=1){let F=0,B=O;for(;F<B;)Ej(t,{errors:I,currentLocation:g+B,expectedLocation:g,distance:a,ignoreLocation:u})<=x?F=B:O=B,B=Math.floor((O-F)/2+F);O=B;let $=Math.max(1,g-B+1),L=o?p:Math.min(g+B,p)+f,V=Array(L+2);V[L+1]=(1<<I)-1;for(let te=L;te>=$;te-=1){let X=te-1,q=n[e.charAt(X)];if(j&&(w[X]=+!!q),V[te]=(V[te+1]<<1|1)&q,I&&(V[te]|=(T[te+1]|T[te])<<1|1|T[te+1]),V[te]&A&&(C=Ej(t,{errors:I,currentLocation:X,expectedLocation:g,distance:a,ignoreLocation:u}),C<=x)){if(x=C,v=X,v<=g)break;$=Math.max(1,2*g-v)}}if(Ej(t,{errors:I+1,currentLocation:g,expectedLocation:g,distance:a,ignoreLocation:u})>x)break;T=V}const P={isMatch:v>=0,score:Math.max(.001,C)};if(j){const I=oX(w,l);I.length?c&&(P.indices=I):P.isMatch=!1}return P}function cX(e){let t={};for(let n=0,i=e.length;n<i;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<i-n-1}return t}const Ew=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class kq{constructor(t,{location:n=sn.location,threshold:i=sn.threshold,distance:a=sn.distance,includeMatches:s=sn.includeMatches,findAllMatches:o=sn.findAllMatches,minMatchCharLength:l=sn.minMatchCharLength,isCaseSensitive:c=sn.isCaseSensitive,ignoreDiacritics:u=sn.ignoreDiacritics,ignoreLocation:f=sn.ignoreLocation}={}){if(this.options={location:n,threshold:i,distance:a,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:f},t=c?t:t.toLowerCase(),t=u?Ew(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(x,v)=>{this.chunks.push({pattern:x,alphabet:cX(x),startIndex:v})},g=this.pattern.length;if(g>Zh){let x=0;const v=g%Zh,j=g-v;for(;x<j;)p(this.pattern.substr(x,Zh),x),x+=Zh;if(v){const w=g-Zh;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:i,includeMatches:a}=this.options;if(t=n?t:t.toLowerCase(),t=i?Ew(t):t,this.pattern===t){let j={isMatch:!0,score:0};return a&&(j.indices=[[0,t.length-1]]),j}const{location:s,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:f}=this.options;let p=[],g=0,x=!1;this.chunks.forEach(({pattern:j,alphabet:w,startIndex:_})=>{const{isMatch:T,score:C,indices:O}=lX(t,j,w,{location:s+_,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:a,ignoreLocation:f});T&&(x=!0),g+=C,T&&O&&(p=[...p,...O])});let v={isMatch:x,score:x?g/this.chunks.length:1};return x&&a&&(v.indices=p),v}}class yd{constructor(t){this.pattern=t}static isMultiMatch(t){return QI(t,this.multiRegex)}static isSingleMatch(t){return QI(t,this.singleRegex)}search(){}}function QI(e,t){const n=e.match(t);return n?n[1]:null}class uX extends yd{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class dX extends yd{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const i=t.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,t.length-1]}}}class hX extends yd{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class fX extends yd{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class pX extends yd{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class mX extends yd{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Pq extends yd{constructor(t,{location:n=sn.location,threshold:i=sn.threshold,distance:a=sn.distance,includeMatches:s=sn.includeMatches,findAllMatches:o=sn.findAllMatches,minMatchCharLength:l=sn.minMatchCharLength,isCaseSensitive:c=sn.isCaseSensitive,ignoreDiacritics:u=sn.ignoreDiacritics,ignoreLocation:f=sn.ignoreLocation}={}){super(t),this._bitapSearch=new kq(t,{location:n,threshold:i,distance:a,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Oq extends yd{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,i;const a=[],s=this.pattern.length;for(;(i=t.indexOf(this.pattern,n))>-1;)n=i+s,a.push([i,n-1]);const o=!!a.length;return{isMatch:o,score:o?0:1,indices:a}}}const Bk=[uX,Oq,hX,fX,mX,pX,dX,Pq],XI=Bk.length,gX=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,yX="|";function xX(e,t={}){return e.split(yX).map(n=>{let i=n.trim().split(gX).filter(s=>s&&!!s.trim()),a=[];for(let s=0,o=i.length;s<o;s+=1){const l=i[s];let c=!1,u=-1;for(;!c&&++u<XI;){const f=Bk[u];let p=f.isMultiMatch(l);p&&(a.push(new f(p,t)),c=!0)}if(!c)for(u=-1;++u<XI;){const f=Bk[u];let p=f.isSingleMatch(l);if(p){a.push(new f(p,t));break}}}return a})}const vX=new Set([Pq.type,Oq.type]);class bX{constructor(t,{isCaseSensitive:n=sn.isCaseSensitive,ignoreDiacritics:i=sn.ignoreDiacritics,includeMatches:a=sn.includeMatches,minMatchCharLength:s=sn.minMatchCharLength,ignoreLocation:o=sn.ignoreLocation,findAllMatches:l=sn.findAllMatches,location:c=sn.location,threshold:u=sn.threshold,distance:f=sn.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:i,includeMatches:a,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:c,threshold:u,distance:f},t=n?t:t.toLowerCase(),t=i?Ew(t):t,this.pattern=t,this.query=xX(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:a,ignoreDiacritics:s}=this.options;t=a?t:t.toLowerCase(),t=s?Ew(t):t;let o=0,l=[],c=0;for(let u=0,f=n.length;u<f;u+=1){const p=n[u];l.length=0,o=0;for(let g=0,x=p.length;g<x;g+=1){const v=p[g],{isMatch:j,indices:w,score:_}=v.search(t);if(j){if(o+=1,c+=_,i){const T=v.constructor.type;vX.has(T)?l=[...l,...w]:l.push(w)}}else{c=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:c/o};return i&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const zk=[];function jX(...e){zk.push(...e)}function qk(e,t){for(let n=0,i=zk.length;n<i;n+=1){let a=zk[n];if(a.condition(e,t))return new a(e,t)}return new kq(e,t)}const kw={AND:"$and",OR:"$or"},Uk={PATH:"$path",PATTERN:"$val"},Vk=e=>!!(e[kw.AND]||e[kw.OR]),wX=e=>!!e[Uk.PATH],SX=e=>!Bc(e)&&Cq(e)&&!Vk(e),JI=e=>({[kw.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Dq(e,t,{auto:n=!0}={}){const i=a=>{let s=Object.keys(a);const o=wX(a);if(!o&&s.length>1&&!Vk(a))return i(JI(a));if(SX(a)){const c=o?a[Uk.PATH]:s[0],u=o?a[Uk.PATTERN]:a[c];if(!kl(u))throw new Error(KQ(c));const f={keyId:$k(c),pattern:u};return n&&(f.searcher=qk(u,t)),f}let l={children:[],operator:s[0]};return s.forEach(c=>{const u=a[c];Bc(u)&&u.forEach(f=>{l.children.push(i(f))})}),l};return Vk(e)||(e=JI(e)),i(e)}function NX(e,{ignoreFieldNorm:t=sn.ignoreFieldNorm}){e.forEach(n=>{let i=1;n.matches.forEach(({key:a,norm:s,score:o})=>{const l=a?a.weight:null;i*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=i})}function _X(e,t){const n=e.matches;t.matches=[],As(n)&&n.forEach(i=>{if(!As(i.indices)||!i.indices.length)return;const{indices:a,value:s}=i;let o={indices:a,value:s};i.key&&(o.key=i.key.src),i.idx>-1&&(o.refIndex=i.idx),t.matches.push(o)})}function CX(e,t){t.score=e.score}function TX(e,t,{includeMatches:n=sn.includeMatches,includeScore:i=sn.includeScore}={}){const a=[];return n&&a.push(_X),i&&a.push(CX),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return a.length&&a.forEach(c=>{c(s,l)}),l})}class so{constructor(t,n={},i){this.options={...sn,...n},this.options.useExtendedSearch,this._keyStore=new JQ(this.options.keys),this.setCollection(t,i)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof bD))throw new Error(WQ);this._myIndex=n||Eq(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){As(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let i=0,a=this._docs.length;i<a;i+=1){const s=this._docs[i];t(s,i)&&(this.removeAt(i),i-=1,a-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:i,includeScore:a,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let c=kl(t)?kl(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return NX(c,{ignoreFieldNorm:l}),s&&c.sort(o),_q(n)&&n>-1&&(c=c.slice(0,n)),TX(c,this._docs,{includeMatches:i,includeScore:a})}_searchStringList(t){const n=qk(t,this.options),{records:i}=this._myIndex,a=[];return i.forEach(({v:s,i:o,n:l})=>{if(!As(s))return;const{isMatch:c,score:u,indices:f}=n.searchIn(s);c&&a.push({item:s,idx:o,matches:[{score:u,value:s,norm:l,indices:f}]})}),a}_searchLogical(t){const n=Dq(t,this.options),i=(l,c,u)=>{if(!l.children){const{keyId:p,searcher:g}=l,x=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:g});return x&&x.length?[{idx:u,item:c,matches:x}]:[]}const f=[];for(let p=0,g=l.children.length;p<g;p+=1){const x=l.children[p],v=i(x,c,u);if(v.length)f.push(...v);else if(l.operator===kw.AND)return[]}return f},a=this._myIndex.records,s={},o=[];return a.forEach(({$:l,i:c})=>{if(As(l)){let u=i(n,l,c);u.length&&(s[c]||(s[c]={idx:c,item:l,matches:[]},o.push(s[c])),u.forEach(({matches:f})=>{s[c].matches.push(...f)}))}}),o}_searchObjectList(t){const n=qk(t,this.options),{keys:i,records:a}=this._myIndex,s=[];return a.forEach(({$:o,i:l})=>{if(!As(o))return;let c=[];i.forEach((u,f)=>{c.push(...this._findMatches({key:u,value:o[f],searcher:n}))}),c.length&&s.push({idx:l,item:o,matches:c})}),s}_findMatches({key:t,value:n,searcher:i}){if(!As(n))return[];let a=[];if(Bc(n))n.forEach(({v:s,i:o,n:l})=>{if(!As(s))return;const{isMatch:c,score:u,indices:f}=i.searchIn(s);c&&a.push({score:u,key:t,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:c,indices:u}=i.searchIn(s);l&&a.push({score:c,key:t,value:s,norm:o,indices:u})}return a}}so.version="7.1.0";so.createIndex=Eq;so.parseIndex=sX;so.config=sn;so.parseQuery=Dq;jX(bX);var TC,ZI;function AX(){if(ZI)return TC;ZI=1;var e="Expected a function",t=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof to=="object"&&to&&to.Object===Object&&to,u=typeof self=="object"&&self&&self.Object===Object&&self,f=c||u||Function("return this")(),p=Object.prototype,g=p.toString,x=Math.max,v=Math.min,j=function(){return f.Date.now()};function w(A,P,I){var F,B,$,L,V,H,te=0,X=!1,q=!1,W=!0;if(typeof A!="function")throw new TypeError(e);P=O(P)||0,_(I)&&(X=!!I.leading,q="maxWait"in I,$=q?x(O(I.maxWait)||0,P):$,W="trailing"in I?!!I.trailing:W);function ae(Ie){var be=F,re=B;return F=B=void 0,te=Ie,L=A.apply(re,be),L}function G(Ie){return te=Ie,V=setTimeout(je,P),X?ae(Ie):L}function z(Ie){var be=Ie-H,re=Ie-te,ve=P-be;return q?v(ve,$-re):ve}function le(Ie){var be=Ie-H,re=Ie-te;return H===void 0||be>=P||be<0||q&&re>=$}function je(){var Ie=j();if(le(Ie))return Y(Ie);V=setTimeout(je,z(Ie))}function Y(Ie){return V=void 0,W&&F?ae(Ie):(F=B=void 0,L)}function Oe(){V!==void 0&&clearTimeout(V),te=0,F=H=B=V=void 0}function Ke(){return V===void 0?L:Y(j())}function Me(){var Ie=j(),be=le(Ie);if(F=arguments,B=this,H=Ie,be){if(V===void 0)return G(H);if(q)return V=setTimeout(je,P),ae(H)}return V===void 0&&(V=setTimeout(je,P)),L}return Me.cancel=Oe,Me.flush=Ke,Me}function _(A){var P=typeof A;return!!A&&(P=="object"||P=="function")}function T(A){return!!A&&typeof A=="object"}function C(A){return typeof A=="symbol"||T(A)&&g.call(A)==n}function O(A){if(typeof A=="number")return A;if(C(A))return t;if(_(A)){var P=typeof A.valueOf=="function"?A.valueOf():A;A=_(P)?P+"":P}if(typeof A!="string")return A===0?A:+A;A=A.replace(i,"");var I=s.test(A);return I||o.test(A)?l(A.slice(2),I?2:8):a.test(A)?t:+A}return TC=w,TC}var EX=AX();const xd=qn(EX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PX=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),eR=e=>{const t=PX(e);return t.charAt(0).toUpperCase()+t.slice(1)},Mq=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:s,iconNode:o,...l},c)=>b.createElement("svg",{ref:c,...OX,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:Mq("lucide",a),...l},[...o.map(([u,f])=>b.createElement(u,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(e,t)=>{const n=b.forwardRef(({className:i,...a},s)=>b.createElement(DX,{ref:s,iconNode:t,className:Mq(`lucide-${kX(eR(e))}`,`lucide-${e}`,i),...a}));return n.displayName=eR(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Cc=ut("activity",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],Iq=ut("align-justify",IX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],tR=ut("arrow-down",RX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rn=ut("arrow-left",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],nR=ut("arrow-up",FX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],BX=ut("beaker",$X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],qX=ut("bed-double",zX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],VX=ut("bed",UX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],GX=ut("bell",HX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],rR=ut("book-open",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],qv=ut("bot",KX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],QX=ut("brain-circuit",YX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],jD=ut("brain",XX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M12 11v4",key:"a6ujw6"}],["path",{d:"M14 13h-4",key:"1pl8zg"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M18 6v14",key:"1mu4gy"}],["path",{d:"M6 6v14",key:"1s15cj"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ZX=ut("briefcase-medical",JX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eJ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],tJ=ut("building",eJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],iR=ut("calendar-check-2",nJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],wD=ut("calendar-days",rJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],vi=ut("calendar",iJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Hk=ut("camera",aJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sJ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Gk=ut("chart-pie",sJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ml=ut("check",oJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Rq=ut("chevron-down",lJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],zb=ut("chevron-left",cJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uJ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vd=ut("chevron-right",uJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],hJ=ut("chevron-up",dJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Zr=ut("circle-alert",fJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bl=ut("circle-check-big",pJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Sv=ut("circle-check",mJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kj=ut("circle-help",gJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],aR=ut("circle-minus",yJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ks=ut("circle-plus",xJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],bJ=ut("circle-user",vJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Pw=ut("clipboard-list",jJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],fw=ut("clipboard",wJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],qb=ut("clock",SJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],_J=ut("command",NJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],sR=ut("copy",CJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],SD=ut("credit-card",TJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],_f=ut("dollar-sign",AJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Lq=ut("download",EJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vm=ut("eye",kJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],OJ=ut("file-check",PJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ha=ut("file-text",DJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],AC=ut("file",MJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],RJ=ut("film",IJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],os=ut("flask-conical",LJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$J=ut("funnel",FJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Wk=ut("globe",BJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Cf=ut("grid-3x3",zJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Fa=ut("hash",qJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],VJ=ut("heart",UJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Kk=ut("house",HJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],oR=ut("image",GJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Pl=ut("info",WJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Fq=ut("key",KJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],lg=ut("layout-dashboard",YJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],$q=ut("layout-grid",QJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],lR=ut("lightbulb",XJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Bq=ut("link",JJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Ub=ut("list",ZJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zc=ut("loader-circle",eZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],nZ=ut("loader",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],iZ=ut("lock",rZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],sZ=ut("log-out",aZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],cR=ut("mail",oZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],zq=ut("map-pin",lZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],qq=ut("maximize-2",cZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],EC=ut("message-circle",uZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],hZ=ut("mic-off",dZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],iN=ut("mic",fZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],mZ=ut("minimize-2",pZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],yZ=ut("monitor",gZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],vZ=ut("music",xZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],uR=ut("package-open",bZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Tf=ut("package",jZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],SZ=ut("palette",wZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],dR=ut("panels-top-left",NZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Z=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],ND=ut("paperclip",_Z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],TZ=ut("pause",CZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AZ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Tc=ut("pen",AZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],kZ=ut("pencil",EZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],cg=ut("phone",PZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Oc=ut("pill",OZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Uq=ut("play",DZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hr=ut("plus",MZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IZ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Uv=ut("printer",IZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RZ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Yk=ut("refresh-cw",RZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],hR=ut("rocket",LZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],$Z=ut("rotate-ccw",FZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Vq=ut("rotate-cw",BZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],io=ut("save",zZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qZ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Wn=ut("search",qZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],aN=ut("send",UZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],fR=ut("server-crash",VZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],md=ut("settings",HZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Hq=ut("share-2",GZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],KZ=ut("shield-check",WZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ug=ut("shield",YZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Qk=ut("shopping-cart",QZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],JZ=ut("smile",XZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZZ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Ow=ut("sparkles",ZZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eee=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],qc=ut("split",eee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],$a=ut("square-pen",tee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ree=ut("square",nee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],pR=ut("star",iee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aee=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],dg=ut("stethoscope",aee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Vb=ut("table",see);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],lee=ut("tag",oee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],uee=ut("target",cee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Yn=ut("trash-2",dee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hee=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],fee=ut("trending-up",hee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],mee=ut("triangle-alert",pee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],_D=ut("truck",gee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Xk=ut("upload",yee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xee=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Gq=ut("user-check",xee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vee=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sN=ut("user-plus",vee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jr=ut("user",bee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ro=ut("users",jee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wee=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],See=ut("video",wee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nee=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Dw=ut("wallet",Nee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ee=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ut=ut("x",_ee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cee=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],mR=ut("zap",Cee);function Tee(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Aee=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Eee=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,kee={};function gR(e,t){return(kee.jsx?Eee:Aee).test(e)}const Pee=/[ \t\n\f\r]/g;function Oee(e){return typeof e=="object"?e.type==="text"?yR(e.value):!1:yR(e)}function yR(e){return e.replace(Pee,"")===""}class Hb{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}Hb.prototype.normal={};Hb.prototype.property={};Hb.prototype.space=void 0;function Wq(e,t){const n={},i={};for(const a of e)Object.assign(n,a.property),Object.assign(i,a.normal);return new Hb(n,i,t)}function Jk(e){return e.toLowerCase()}class ds{constructor(t,n){this.attribute=n,this.property=t}}ds.prototype.attribute="";ds.prototype.booleanish=!1;ds.prototype.boolean=!1;ds.prototype.commaOrSpaceSeparated=!1;ds.prototype.commaSeparated=!1;ds.prototype.defined=!1;ds.prototype.mustUseProperty=!1;ds.prototype.number=!1;ds.prototype.overloadedBoolean=!1;ds.prototype.property="";ds.prototype.spaceSeparated=!1;ds.prototype.space=void 0;let Dee=0;const fn=zf(),mi=zf(),Kq=zf(),St=zf(),Dr=zf(),Hm=zf(),Ns=zf();function zf(){return 2**++Dee}const Zk=Object.freeze(Object.defineProperty({__proto__:null,boolean:fn,booleanish:mi,commaOrSpaceSeparated:Ns,commaSeparated:Hm,number:St,overloadedBoolean:Kq,spaceSeparated:Dr},Symbol.toStringTag,{value:"Module"})),kC=Object.keys(Zk);class CD extends ds{constructor(t,n,i,a){let s=-1;if(super(t,n),xR(this,"space",a),typeof i=="number")for(;++s<kC.length;){const o=kC[s];xR(this,kC[s],(i&Zk[o])===Zk[o])}}}CD.prototype.defined=!0;function xR(e,t,n){n&&(e[t]=n)}function Gg(e){const t={},n={};for(const[i,a]of Object.entries(e.properties)){const s=new CD(i,e.transform(e.attributes||{},i),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),t[i]=s,n[Jk(i)]=i,n[Jk(s.attribute)]=i}return new Hb(t,n,e.space)}const Yq=Gg({properties:{ariaActiveDescendant:null,ariaAtomic:mi,ariaAutoComplete:null,ariaBusy:mi,ariaChecked:mi,ariaColCount:St,ariaColIndex:St,ariaColSpan:St,ariaControls:Dr,ariaCurrent:null,ariaDescribedBy:Dr,ariaDetails:null,ariaDisabled:mi,ariaDropEffect:Dr,ariaErrorMessage:null,ariaExpanded:mi,ariaFlowTo:Dr,ariaGrabbed:mi,ariaHasPopup:null,ariaHidden:mi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Dr,ariaLevel:St,ariaLive:null,ariaModal:mi,ariaMultiLine:mi,ariaMultiSelectable:mi,ariaOrientation:null,ariaOwns:Dr,ariaPlaceholder:null,ariaPosInSet:St,ariaPressed:mi,ariaReadOnly:mi,ariaRelevant:null,ariaRequired:mi,ariaRoleDescription:Dr,ariaRowCount:St,ariaRowIndex:St,ariaRowSpan:St,ariaSelected:mi,ariaSetSize:St,ariaSort:null,ariaValueMax:St,ariaValueMin:St,ariaValueNow:St,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Qq(e,t){return t in e?e[t]:t}function Xq(e,t){return Qq(e,t.toLowerCase())}const Mee=Gg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Hm,acceptCharset:Dr,accessKey:Dr,action:null,allow:null,allowFullScreen:fn,allowPaymentRequest:fn,allowUserMedia:fn,alt:null,as:null,async:fn,autoCapitalize:null,autoComplete:Dr,autoFocus:fn,autoPlay:fn,blocking:Dr,capture:null,charSet:null,checked:fn,cite:null,className:Dr,cols:St,colSpan:null,content:null,contentEditable:mi,controls:fn,controlsList:Dr,coords:St|Hm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:fn,defer:fn,dir:null,dirName:null,disabled:fn,download:Kq,draggable:mi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:fn,formTarget:null,headers:Dr,height:St,hidden:fn,high:St,href:null,hrefLang:null,htmlFor:Dr,httpEquiv:Dr,id:null,imageSizes:null,imageSrcSet:null,inert:fn,inputMode:null,integrity:null,is:null,isMap:fn,itemId:null,itemProp:Dr,itemRef:Dr,itemScope:fn,itemType:Dr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:fn,low:St,manifest:null,max:null,maxLength:St,media:null,method:null,min:null,minLength:St,multiple:fn,muted:fn,name:null,nonce:null,noModule:fn,noValidate:fn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:fn,optimum:St,pattern:null,ping:Dr,placeholder:null,playsInline:fn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:fn,referrerPolicy:null,rel:Dr,required:fn,reversed:fn,rows:St,rowSpan:St,sandbox:Dr,scope:null,scoped:fn,seamless:fn,selected:fn,shadowRootClonable:fn,shadowRootDelegatesFocus:fn,shadowRootMode:null,shape:null,size:St,sizes:null,slot:null,span:St,spellCheck:mi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:St,step:null,style:null,tabIndex:St,target:null,title:null,translate:null,type:null,typeMustMatch:fn,useMap:null,value:mi,width:St,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Dr,axis:null,background:null,bgColor:null,border:St,borderColor:null,bottomMargin:St,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:fn,declare:fn,event:null,face:null,frame:null,frameBorder:null,hSpace:St,leftMargin:St,link:null,longDesc:null,lowSrc:null,marginHeight:St,marginWidth:St,noResize:fn,noHref:fn,noShade:fn,noWrap:fn,object:null,profile:null,prompt:null,rev:null,rightMargin:St,rules:null,scheme:null,scrolling:mi,standby:null,summary:null,text:null,topMargin:St,valueType:null,version:null,vAlign:null,vLink:null,vSpace:St,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:fn,disableRemotePlayback:fn,prefix:null,property:null,results:St,security:null,unselectable:null},space:"html",transform:Xq}),Iee=Gg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ns,accentHeight:St,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:St,amplitude:St,arabicForm:null,ascent:St,attributeName:null,attributeType:null,azimuth:St,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:St,by:null,calcMode:null,capHeight:St,className:Dr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:St,diffuseConstant:St,direction:null,display:null,dur:null,divisor:St,dominantBaseline:null,download:fn,dx:null,dy:null,edgeMode:null,editable:null,elevation:St,enableBackground:null,end:null,event:null,exponent:St,externalResourcesRequired:null,fill:null,fillOpacity:St,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Hm,g2:Hm,glyphName:Hm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:St,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:St,horizOriginX:St,horizOriginY:St,id:null,ideographic:St,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:St,k:St,k1:St,k2:St,k3:St,k4:St,kernelMatrix:Ns,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:St,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:St,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:St,overlineThickness:St,paintOrder:null,panose1:null,path:null,pathLength:St,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Dr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:St,pointsAtY:St,pointsAtZ:St,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ns,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ns,rev:Ns,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ns,requiredFeatures:Ns,requiredFonts:Ns,requiredFormats:Ns,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:St,specularExponent:St,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:St,strikethroughThickness:St,string:null,stroke:null,strokeDashArray:Ns,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:St,strokeOpacity:St,strokeWidth:null,style:null,surfaceScale:St,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ns,tabIndex:St,tableValues:null,target:null,targetX:St,targetY:St,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ns,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:St,underlineThickness:St,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:St,values:null,vAlphabetic:St,vMathematical:St,vectorEffect:null,vHanging:St,vIdeographic:St,version:null,vertAdvY:St,vertOriginX:St,vertOriginY:St,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:St,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Qq}),Jq=Gg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Zq=Gg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Xq}),eU=Gg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Ree={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Lee=/[A-Z]/g,vR=/-[a-z]/g,Fee=/^data[-\w.:]+$/i;function $ee(e,t){const n=Jk(t);let i=t,a=ds;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Fee.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(vR,zee);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!vR.test(s)){let o=s.replace(Lee,Bee);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=CD}return new a(i,t)}function Bee(e){return"-"+e.toLowerCase()}function zee(e){return e.charAt(1).toUpperCase()}const qee=Wq([Yq,Mee,Jq,Zq,eU],"html"),TD=Wq([Yq,Iee,Jq,Zq,eU],"svg");function Uee(e){return e.join(" ").trim()}var Sm={},PC,bR;function Vee(){if(bR)return PC;bR=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,u="/",f="*",p="",g="comment",x="declaration";PC=function(j,w){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];w=w||{};var _=1,T=1;function C(H){var te=H.match(t);te&&(_+=te.length);var X=H.lastIndexOf(c);T=~X?H.length-X:T+H.length}function O(){var H={line:_,column:T};return function(te){return te.position=new A(H),F(),te}}function A(H){this.start=H,this.end={line:_,column:T},this.source=w.source}A.prototype.content=j;function P(H){var te=new Error(w.source+":"+_+":"+T+": "+H);if(te.reason=H,te.filename=w.source,te.line=_,te.column=T,te.source=j,!w.silent)throw te}function I(H){var te=H.exec(j);if(te){var X=te[0];return C(X),j=j.slice(X.length),te}}function F(){I(n)}function B(H){var te;for(H=H||[];te=$();)te!==!1&&H.push(te);return H}function $(){var H=O();if(!(u!=j.charAt(0)||f!=j.charAt(1))){for(var te=2;p!=j.charAt(te)&&(f!=j.charAt(te)||u!=j.charAt(te+1));)++te;if(te+=2,p===j.charAt(te-1))return P("End of comment missing");var X=j.slice(2,te-2);return T+=2,C(X),j=j.slice(te),T+=2,H({type:g,comment:X})}}function L(){var H=O(),te=I(i);if(te){if($(),!I(a))return P("property missing ':'");var X=I(s),q=H({type:x,property:v(te[0].replace(e,p)),value:X?v(X[0].replace(e,p)):p});return I(o),q}}function V(){var H=[];B(H);for(var te;te=L();)te!==!1&&(H.push(te),B(H));return H}return F(),V()};function v(j){return j?j.replace(l,p):p}return PC}var jR;function Hee(){if(jR)return Sm;jR=1;var e=Sm&&Sm.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.default=n;var t=e(Vee());function n(i,a){var s=null;if(!i||typeof i!="string")return s;var o=(0,t.default)(i),l=typeof a=="function";return o.forEach(function(c){if(c.type==="declaration"){var u=c.property,f=c.value;l?a(u,f,c):f&&(s=s||{},s[u]=f)}}),s}return Sm}var tv={},wR;function Gee(){if(wR)return tv;wR=1,Object.defineProperty(tv,"__esModule",{value:!0}),tv.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,s=function(u){return!u||n.test(u)||e.test(u)},o=function(u,f){return f.toUpperCase()},l=function(u,f){return"".concat(f,"-")},c=function(u,f){return f===void 0&&(f={}),s(u)?u:(u=u.toLowerCase(),f.reactCompat?u=u.replace(a,l):u=u.replace(i,l),u.replace(t,o))};return tv.camelCase=c,tv}var nv,SR;function Wee(){if(SR)return nv;SR=1;var e=nv&&nv.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(Hee()),n=Gee();function i(a,s){var o={};return!a||typeof a!="string"||(0,t.default)(a,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return i.default=i,nv=i,nv}var Kee=Wee();const Yee=qn(Kee),tU=nU("end"),AD=nU("start");function nU(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function Qee(e){const t=AD(e),n=tU(e);if(t&&n)return{start:t,end:n}}function kv(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?NR(e.position):"start"in e||"end"in e?NR(e):"line"in e||"column"in e?eP(e):""}function eP(e){return _R(e&&e.line)+":"+_R(e&&e.column)}function NR(e){return eP(e&&e.start)+"-"+eP(e&&e.end)}function _R(e){return e&&typeof e=="number"?e:1}class ma extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let a="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?a=t:!s.cause&&t&&(o=!0,a=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?s.ruleId=i:(s.source=i.slice(0,c),s.ruleId=i.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=a,this.line=l?l.line:void 0,this.name=kv(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}ma.prototype.file="";ma.prototype.name="";ma.prototype.reason="";ma.prototype.message="";ma.prototype.stack="";ma.prototype.column=void 0;ma.prototype.line=void 0;ma.prototype.ancestors=void 0;ma.prototype.cause=void 0;ma.prototype.fatal=void 0;ma.prototype.place=void 0;ma.prototype.ruleId=void 0;ma.prototype.source=void 0;const ED={}.hasOwnProperty,Xee=new Map,Jee=/[A-Z]/g,Zee=new Set(["table","tbody","thead","tfoot","tr"]),ete=new Set(["td","th"]),rU="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function tte(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=cte(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=lte(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?TD:qee,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=iU(a,e,void 0);return s&&typeof s!="string"?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}function iU(e,t,n){if(t.type==="element")return nte(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return rte(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return ate(e,t,n);if(t.type==="mdxjsEsm")return ite(e,t);if(t.type==="root")return ste(e,t,n);if(t.type==="text")return ote(e,t)}function nte(e,t,n){const i=e.schema;let a=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(a=TD,e.schema=a),e.ancestors.push(t);const s=sU(e,t.tagName,!1),o=ute(e,t);let l=PD(e,t);return Zee.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!Oee(c):!0})),aU(e,o,s,t),kD(o,l),e.ancestors.pop(),e.schema=i,e.create(t,s,o,n)}function rte(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}Vv(e,t.position)}function ite(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Vv(e,t.position)}function ate(e,t,n){const i=e.schema;let a=i;t.name==="svg"&&i.space==="html"&&(a=TD,e.schema=a),e.ancestors.push(t);const s=t.name===null?e.Fragment:sU(e,t.name,!0),o=dte(e,t),l=PD(e,t);return aU(e,o,s,t),kD(o,l),e.ancestors.pop(),e.schema=i,e.create(t,s,o,n)}function ste(e,t,n){const i={};return kD(i,PD(e,t)),e.create(t,e.Fragment,i,n)}function ote(e,t){return t.value}function aU(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function kD(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function lte(e,t,n){return i;function i(a,s,o,l){const u=Array.isArray(o.children)?n:t;return l?u(s,o,l):u(s,o)}}function cte(e,t){return n;function n(i,a,s,o){const l=Array.isArray(s.children),c=AD(i);return t(a,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function ute(e,t){const n={};let i,a;for(a in t.properties)if(a!=="children"&&ED.call(t.properties,a)){const s=hte(e,a,t.properties[a]);if(s){const[o,l]=s;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&ete.has(t.tagName)?i=l:n[o]=l}}if(i){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function dte(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const s=i.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Vv(e,t.position);else{const a=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const l=i.value.data.estree.body[0];l.type,s=e.evaluater.evaluateExpression(l.expression)}else Vv(e,t.position);else s=i.value===null?!0:i.value;n[a]=s}return n}function PD(e,t){const n=[];let i=-1;const a=e.passKeys?new Map:Xee;for(;++i<t.children.length;){const s=t.children[i];let o;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=a.get(c)||0;o=c+"-"+u,a.set(c,u+1)}}const l=iU(e,s,o);l!==void 0&&n.push(l)}return n}function hte(e,t,n){const i=$ee(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?Tee(n):Uee(n)),i.property==="style"){let a=typeof n=="object"?n:fte(e,String(n));return e.stylePropertyNameCase==="css"&&(a=pte(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&i.space?Ree[i.property]||i.property:i.attribute,n]}}function fte(e,t){try{return Yee(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,a=new ma("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=rU+"#cannot-parse-style-attribute",a}}function sU(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let s=-1,o;for(;++s<a.length;){const l=gR(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}i=o}else i=gR(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const a=i.value;return ED.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(i);Vv(e)}function Vv(e,t){const n=new ma("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=rU+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pte(e){const t={};let n;for(n in e)ED.call(e,n)&&(t[mte(n)]=e[n]);return t}function mte(e){let t=e.replace(Jee,gte);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function gte(e){return"-"+e.toLowerCase()}const OC={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},yte={};function OD(e,t){const n=yte,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return oU(e,i,a)}function oU(e,t,n){if(xte(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return CR(e.children,t,n)}return Array.isArray(e)?CR(e,t,n):""}function CR(e,t,n){const i=[];let a=-1;for(;++a<e.length;)i[a]=oU(e[a],t,n);return i.join("")}function xte(e){return!!(e&&typeof e=="object")}const TR=document.createElement("i");function DD(e){const t="&"+e+";";TR.innerHTML=t;const n=TR.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ps(e,t,n,i){const a=e.length;let s=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,i.length<1e4)o=Array.from(i),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<i.length;)o=i.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Zs(e,t){return e.length>0?(Ps(e,e.length,0,t),e):t}const AR={}.hasOwnProperty;function lU(e){const t={};let n=-1;for(;++n<e.length;)vte(t,e[n]);return t}function vte(e,t){let n;for(n in t){const a=(AR.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){AR.call(a,o)||(a[o]=[]);const l=s[o];bte(a[o],Array.isArray(l)?l:l?[l]:[])}}}function bte(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);Ps(e,0,0,i)}function cU(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Lo(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ma=bd(/[A-Za-z]/),da=bd(/[\dA-Za-z]/),jte=bd(/[#-'*+\--9=?A-Z^-~]/);function Mw(e){return e!==null&&(e<32||e===127)}const tP=bd(/\d/),wte=bd(/[\dA-Fa-f]/),Ste=bd(/[!-/:-@[-`{-~]/);function Kt(e){return e!==null&&e<-2}function Tr(e){return e!==null&&(e<0||e===32)}function On(e){return e===-2||e===-1||e===32}const oN=bd(new RegExp("\\p{P}|\\p{S}","u")),Af=bd(/\s/);function bd(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Wg(e){const t=[];let n=-1,i=0,a=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&da(e.charCodeAt(n+1))&&da(e.charCodeAt(n+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=e.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),a=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(i,n),encodeURIComponent(o)),i=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(i)}function zn(e,t,n,i){const a=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return On(c)?(e.enter(n),l(c)):t(c)}function l(c){return On(c)&&s++<a?(e.consume(c),l):(e.exit(n),t(c))}}const Nte={tokenize:_te};function _te(e){const t=e.attempt(this.parser.constructs.contentInitial,i,a);let n;return t;function i(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),zn(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),s(l)}function s(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return Kt(l)?(e.consume(l),e.exit("chunkText"),s):(e.consume(l),o)}}const Cte={tokenize:Tte},ER={tokenize:Ate};function Tte(e){const t=this,n=[];let i=0,a,s,o;return l;function l(C){if(i<n.length){const O=n[i];return t.containerState=O[1],e.attempt(O[0].continuation,c,u)(C)}return u(C)}function c(C){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&T();const O=t.events.length;let A=O,P;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){P=t.events[A][1].end;break}_(i);let I=O;for(;I<t.events.length;)t.events[I][1].end={...P},I++;return Ps(t.events,A+1,0,t.events.slice(O)),t.events.length=I,u(C)}return l(C)}function u(C){if(i===n.length){if(!a)return g(C);if(a.currentConstruct&&a.currentConstruct.concrete)return v(C);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ER,f,p)(C)}function f(C){return a&&T(),_(i),g(C)}function p(C){return t.parser.lazy[t.now().line]=i!==n.length,o=t.now().offset,v(C)}function g(C){return t.containerState={},e.attempt(ER,x,v)(C)}function x(C){return i++,n.push([t.currentConstruct,t.containerState]),g(C)}function v(C){if(C===null){a&&T(),_(0),e.consume(C);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),j(C)}function j(C){if(C===null){w(e.exit("chunkFlow"),!0),_(0),e.consume(C);return}return Kt(C)?(e.consume(C),w(e.exit("chunkFlow")),i=0,t.interrupt=void 0,l):(e.consume(C),j)}function w(C,O){const A=t.sliceStream(C);if(O&&A.push(null),C.previous=s,s&&(s.next=C),s=C,a.defineSkip(C.start),a.write(A),t.parser.lazy[C.start.line]){let P=a.events.length;for(;P--;)if(a.events[P][1].start.offset<o&&(!a.events[P][1].end||a.events[P][1].end.offset>o))return;const I=t.events.length;let F=I,B,$;for(;F--;)if(t.events[F][0]==="exit"&&t.events[F][1].type==="chunkFlow"){if(B){$=t.events[F][1].end;break}B=!0}for(_(i),P=I;P<t.events.length;)t.events[P][1].end={...$},P++;Ps(t.events,F+1,0,t.events.slice(I)),t.events.length=P}}function _(C){let O=n.length;for(;O-- >C;){const A=n[O];t.containerState=A[1],A[0].exit.call(t,e)}n.length=C}function T(){a.write([null]),s=void 0,a=void 0,t.containerState._closeFlow=void 0}}function Ate(e,t,n){return zn(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function hg(e){if(e===null||Tr(e)||Af(e))return 1;if(oN(e))return 2}function lN(e,t,n){const i=[];let a=-1;for(;++a<e.length;){const s=e[a].resolveAll;s&&!i.includes(s)&&(t=s(t,n),i.push(s))}return t}const nP={name:"attention",resolveAll:Ete,tokenize:kte};function Ete(e,t){let n=-1,i,a,s,o,l,c,u,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[i][1].end},g={...e[n][1].start};kR(p,-c),kR(g,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[i][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},s={type:c>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[i][1].end={...o.start},e[n][1].start={...l.end},u=[],e[i][1].end.offset-e[i][1].start.offset&&(u=Zs(u,[["enter",e[i][1],t],["exit",e[i][1],t]])),u=Zs(u,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=Zs(u,lN(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),u=Zs(u,[["exit",s,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,u=Zs(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,Ps(e,i-1,n-i+3,u),n=i+u.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function kte(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,a=hg(i);let s;return o;function o(c){return s=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===s)return e.consume(c),l;const u=e.exit("attentionSequence"),f=hg(c),p=!f||f===2&&a||n.includes(c),g=!a||a===2&&f||n.includes(i);return u._open=!!(s===42?p:p&&(a||!g)),u._close=!!(s===42?g:g&&(f||!p)),t(c)}}function kR(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Pte={name:"autolink",tokenize:Ote};function Ote(e,t,n){let i=0;return a;function a(x){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(x){return Ma(x)?(e.consume(x),o):x===64?n(x):u(x)}function o(x){return x===43||x===45||x===46||da(x)?(i=1,l(x)):u(x)}function l(x){return x===58?(e.consume(x),i=0,c):(x===43||x===45||x===46||da(x))&&i++<32?(e.consume(x),l):(i=0,u(x))}function c(x){return x===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.exit("autolink"),t):x===null||x===32||x===60||Mw(x)?n(x):(e.consume(x),c)}function u(x){return x===64?(e.consume(x),f):jte(x)?(e.consume(x),u):n(x)}function f(x){return da(x)?p(x):n(x)}function p(x){return x===46?(e.consume(x),i=0,f):x===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(x),e.exit("autolinkMarker"),e.exit("autolink"),t):g(x)}function g(x){if((x===45||da(x))&&i++<63){const v=x===45?g:p;return e.consume(x),v}return n(x)}}const Gb={partial:!0,tokenize:Dte};function Dte(e,t,n){return i;function i(s){return On(s)?zn(e,a,"linePrefix")(s):a(s)}function a(s){return s===null||Kt(s)?t(s):n(s)}}const uU={continuation:{tokenize:Ite},exit:Rte,name:"blockQuote",tokenize:Mte};function Mte(e,t,n){const i=this;return a;function a(o){if(o===62){const l=i.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return On(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Ite(e,t,n){const i=this;return a;function a(o){return On(o)?zn(e,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(uU,t,n)(o)}}function Rte(e){e.exit("blockQuote")}const dU={name:"characterEscape",tokenize:Lte};function Lte(e,t,n){return i;function i(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),a}function a(s){return Ste(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const hU={name:"characterReference",tokenize:Fte};function Fte(e,t,n){const i=this;let a=0,s,o;return l;function l(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=da,f(p))}function u(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=wte,f):(e.enter("characterReferenceValue"),s=7,o=tP,f(p))}function f(p){if(p===59&&a){const g=e.exit("characterReferenceValue");return o===da&&!DD(i.sliceSerialize(g))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(p)&&a++<s?(e.consume(p),f):n(p)}}const PR={partial:!0,tokenize:Bte},OR={concrete:!0,name:"codeFenced",tokenize:$te};function $te(e,t,n){const i=this,a={partial:!0,tokenize:A};let s=0,o=0,l;return c;function c(P){return u(P)}function u(P){const I=i.events[i.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=P,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(P)}function f(P){return P===l?(o++,e.consume(P),f):o<3?n(P):(e.exit("codeFencedFenceSequence"),On(P)?zn(e,p,"whitespace")(P):p(P))}function p(P){return P===null||Kt(P)?(e.exit("codeFencedFence"),i.interrupt?t(P):e.check(PR,j,O)(P)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(P))}function g(P){return P===null||Kt(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(P)):On(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),zn(e,x,"whitespace")(P)):P===96&&P===l?n(P):(e.consume(P),g)}function x(P){return P===null||Kt(P)?p(P):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),v(P))}function v(P){return P===null||Kt(P)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(P)):P===96&&P===l?n(P):(e.consume(P),v)}function j(P){return e.attempt(a,O,w)(P)}function w(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),_}function _(P){return s>0&&On(P)?zn(e,T,"linePrefix",s+1)(P):T(P)}function T(P){return P===null||Kt(P)?e.check(PR,j,O)(P):(e.enter("codeFlowValue"),C(P))}function C(P){return P===null||Kt(P)?(e.exit("codeFlowValue"),T(P)):(e.consume(P),C)}function O(P){return e.exit("codeFenced"),t(P)}function A(P,I,F){let B=0;return $;function $(X){return P.enter("lineEnding"),P.consume(X),P.exit("lineEnding"),L}function L(X){return P.enter("codeFencedFence"),On(X)?zn(P,V,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):V(X)}function V(X){return X===l?(P.enter("codeFencedFenceSequence"),H(X)):F(X)}function H(X){return X===l?(B++,P.consume(X),H):B>=o?(P.exit("codeFencedFenceSequence"),On(X)?zn(P,te,"whitespace")(X):te(X)):F(X)}function te(X){return X===null||Kt(X)?(P.exit("codeFencedFence"),I(X)):F(X)}}}function Bte(e,t,n){const i=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?n(o):t(o)}}const DC={name:"codeIndented",tokenize:qte},zte={partial:!0,tokenize:Ute};function qte(e,t,n){const i=this;return a;function a(u){return e.enter("codeIndented"),zn(e,s,"linePrefix",5)(u)}function s(u){const f=i.events[i.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):Kt(u)?e.attempt(zte,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||Kt(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function Ute(e,t,n){const i=this;return a;function a(o){return i.parser.lazy[i.now().line]?n(o):Kt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):zn(e,s,"linePrefix",5)(o)}function s(o){const l=i.events[i.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):Kt(o)?a(o):n(o)}}const Vte={name:"codeText",previous:Gte,resolve:Hte,tokenize:Wte};function Hte(e){let t=e.length-4,n=3,i,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)a===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(a=i):(i===t||e[i][1].type==="lineEnding")&&(e[a][1].type="codeTextData",i!==a+2&&(e[a][1].end=e[i-1][1].end,e.splice(a+2,i-a-2),t-=i-a-2,i=a+2),a=void 0);return e}function Gte(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Wte(e,t,n){let i=0,a,s;return o;function o(p){return e.enter("codeText"),e.enter("codeTextSequence"),l(p)}function l(p){return p===96?(e.consume(p),i++,l):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(s=e.enter("codeTextSequence"),a=0,f(p)):Kt(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(p))}function u(p){return p===null||p===32||p===96||Kt(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),u)}function f(p){return p===96?(e.consume(p),a++,f):a===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(s.type="codeTextData",u(p))}}class Kte{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const a=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return i&&rv(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),rv(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),rv(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);rv(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);rv(this.left,n.reverse())}}}function rv(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function fU(e){const t={};let n=-1,i,a,s,o,l,c,u;const f=new Kte(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(i=f.get(n),n&&i[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,Yte(f,n)),n=t[n],u=!0);else if(i[1]._container){for(s=n,a=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(i[1].end={...f.get(a)[1].start},l=f.slice(a,n),l.unshift(i),f.splice(a,n-a+1,l))}}return Ps(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function Yte(e,t){const n=e.get(t)[1],i=e.get(t)[2];let a=t-1;const s=[];let o=n._tokenizer;o||(o=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let f,p,g=-1,x=n,v=0,j=0;const w=[j];for(;x;){for(;e.get(++a)[1]!==x;);s.push(a),x._tokenizer||(f=i.sliceStream(x),x.next||f.push(null),p&&o.defineSkip(x.start),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=x,x=x.next}for(x=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(j=g+1,w.push(j),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(o.events=[],x?(x._tokenizer=void 0,x.previous=void 0):w.pop(),g=w.length;g--;){const _=l.slice(w[g],w[g+1]),T=s.pop();c.push([T,T+_.length-1]),e.splice(T,2,_)}for(c.reverse(),g=-1;++g<c.length;)u[v+c[g][0]]=v+c[g][1],v+=c[g][1]-c[g][0]-1;return u}const Qte={resolve:Jte,tokenize:Zte},Xte={partial:!0,tokenize:ene};function Jte(e){return fU(e),e}function Zte(e,t){let n;return i;function i(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?s(l):Kt(l)?e.check(Xte,o,s)(l):(e.consume(l),a)}function s(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function ene(e,t,n){const i=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),zn(e,s,"linePrefix")}function s(o){if(o===null||Kt(o))return n(o);const l=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(i.parser.constructs.flow,n,t)(o)}}function pU(e,t,n,i,a,s,o,l,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(_){return _===60?(e.enter(i),e.enter(a),e.enter(s),e.consume(_),e.exit(s),g):_===null||_===32||_===41||Mw(_)?n(_):(e.enter(i),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),j(_))}function g(_){return _===62?(e.enter(s),e.consume(_),e.exit(s),e.exit(a),e.exit(i),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),x(_))}function x(_){return _===62?(e.exit("chunkString"),e.exit(l),g(_)):_===null||_===60||Kt(_)?n(_):(e.consume(_),_===92?v:x)}function v(_){return _===60||_===62||_===92?(e.consume(_),x):x(_)}function j(_){return!f&&(_===null||_===41||Tr(_))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(i),t(_)):f<u&&_===40?(e.consume(_),f++,j):_===41?(e.consume(_),f--,j):_===null||_===32||_===40||Mw(_)?n(_):(e.consume(_),_===92?w:j)}function w(_){return _===40||_===41||_===92?(e.consume(_),j):j(_)}}function mU(e,t,n,i,a,s){const o=this;let l=0,c;return u;function u(x){return e.enter(i),e.enter(a),e.consume(x),e.exit(a),e.enter(s),f}function f(x){return l>999||x===null||x===91||x===93&&!c||x===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(x):x===93?(e.exit(s),e.enter(a),e.consume(x),e.exit(a),e.exit(i),t):Kt(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||x===91||x===93||Kt(x)||l++>999?(e.exit("chunkString"),f(x)):(e.consume(x),c||(c=!On(x)),x===92?g:p)}function g(x){return x===91||x===92||x===93?(e.consume(x),l++,p):p(x)}}function gU(e,t,n,i,a,s){let o;return l;function l(g){return g===34||g===39||g===40?(e.enter(i),e.enter(a),e.consume(g),e.exit(a),o=g===40?41:g,c):n(g)}function c(g){return g===o?(e.enter(a),e.consume(g),e.exit(a),e.exit(i),t):(e.enter(s),u(g))}function u(g){return g===o?(e.exit(s),c(o)):g===null?n(g):Kt(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),zn(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===o||g===null||Kt(g)?(e.exit("chunkString"),u(g)):(e.consume(g),g===92?p:f)}function p(g){return g===o||g===92?(e.consume(g),f):f(g)}}function Pv(e,t){let n;return i;function i(a){return Kt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,i):On(a)?zn(e,i,n?"linePrefix":"lineSuffix")(a):t(a)}}const tne={name:"definition",tokenize:rne},nne={partial:!0,tokenize:ine};function rne(e,t,n){const i=this;let a;return s;function s(x){return e.enter("definition"),o(x)}function o(x){return mU.call(i,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return a=Lo(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),c):n(x)}function c(x){return Tr(x)?Pv(e,u)(x):u(x)}function u(x){return pU(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function f(x){return e.attempt(nne,p,p)(x)}function p(x){return On(x)?zn(e,g,"whitespace")(x):g(x)}function g(x){return x===null||Kt(x)?(e.exit("definition"),i.parser.defined.push(a),t(x)):n(x)}}function ine(e,t,n){return i;function i(l){return Tr(l)?Pv(e,a)(l):n(l)}function a(l){return gU(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return On(l)?zn(e,o,"whitespace")(l):o(l)}function o(l){return l===null||Kt(l)?t(l):n(l)}}const ane={name:"hardBreakEscape",tokenize:sne};function sne(e,t,n){return i;function i(s){return e.enter("hardBreakEscape"),e.consume(s),a}function a(s){return Kt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const one={name:"headingAtx",resolve:lne,tokenize:cne};function lne(e,t){let n=e.length-2,i=3,a,s;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(a={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},s={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},Ps(e,i,n-i+1,[["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t]])),e}function cne(e,t,n){let i=0;return a;function a(f){return e.enter("atxHeading"),s(f)}function s(f){return e.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&i++<6?(e.consume(f),o):f===null||Tr(f)?(e.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(e.enter("atxHeadingSequence"),c(f)):f===null||Kt(f)?(e.exit("atxHeading"),t(f)):On(f)?zn(e,l,"whitespace")(f):(e.enter("atxHeadingText"),u(f))}function c(f){return f===35?(e.consume(f),c):(e.exit("atxHeadingSequence"),l(f))}function u(f){return f===null||f===35||Tr(f)?(e.exit("atxHeadingText"),l(f)):(e.consume(f),u)}}const une=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],DR=["pre","script","style","textarea"],dne={concrete:!0,name:"htmlFlow",resolveTo:pne,tokenize:mne},hne={partial:!0,tokenize:yne},fne={partial:!0,tokenize:gne};function pne(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function mne(e,t,n){const i=this;let a,s,o,l,c;return u;function u(Y){return f(Y)}function f(Y){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Y),p}function p(Y){return Y===33?(e.consume(Y),g):Y===47?(e.consume(Y),s=!0,j):Y===63?(e.consume(Y),a=3,i.interrupt?t:z):Ma(Y)?(e.consume(Y),o=String.fromCharCode(Y),w):n(Y)}function g(Y){return Y===45?(e.consume(Y),a=2,x):Y===91?(e.consume(Y),a=5,l=0,v):Ma(Y)?(e.consume(Y),a=4,i.interrupt?t:z):n(Y)}function x(Y){return Y===45?(e.consume(Y),i.interrupt?t:z):n(Y)}function v(Y){const Oe="CDATA[";return Y===Oe.charCodeAt(l++)?(e.consume(Y),l===Oe.length?i.interrupt?t:V:v):n(Y)}function j(Y){return Ma(Y)?(e.consume(Y),o=String.fromCharCode(Y),w):n(Y)}function w(Y){if(Y===null||Y===47||Y===62||Tr(Y)){const Oe=Y===47,Ke=o.toLowerCase();return!Oe&&!s&&DR.includes(Ke)?(a=1,i.interrupt?t(Y):V(Y)):une.includes(o.toLowerCase())?(a=6,Oe?(e.consume(Y),_):i.interrupt?t(Y):V(Y)):(a=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(Y):s?T(Y):C(Y))}return Y===45||da(Y)?(e.consume(Y),o+=String.fromCharCode(Y),w):n(Y)}function _(Y){return Y===62?(e.consume(Y),i.interrupt?t:V):n(Y)}function T(Y){return On(Y)?(e.consume(Y),T):$(Y)}function C(Y){return Y===47?(e.consume(Y),$):Y===58||Y===95||Ma(Y)?(e.consume(Y),O):On(Y)?(e.consume(Y),C):$(Y)}function O(Y){return Y===45||Y===46||Y===58||Y===95||da(Y)?(e.consume(Y),O):A(Y)}function A(Y){return Y===61?(e.consume(Y),P):On(Y)?(e.consume(Y),A):C(Y)}function P(Y){return Y===null||Y===60||Y===61||Y===62||Y===96?n(Y):Y===34||Y===39?(e.consume(Y),c=Y,I):On(Y)?(e.consume(Y),P):F(Y)}function I(Y){return Y===c?(e.consume(Y),c=null,B):Y===null||Kt(Y)?n(Y):(e.consume(Y),I)}function F(Y){return Y===null||Y===34||Y===39||Y===47||Y===60||Y===61||Y===62||Y===96||Tr(Y)?A(Y):(e.consume(Y),F)}function B(Y){return Y===47||Y===62||On(Y)?C(Y):n(Y)}function $(Y){return Y===62?(e.consume(Y),L):n(Y)}function L(Y){return Y===null||Kt(Y)?V(Y):On(Y)?(e.consume(Y),L):n(Y)}function V(Y){return Y===45&&a===2?(e.consume(Y),q):Y===60&&a===1?(e.consume(Y),W):Y===62&&a===4?(e.consume(Y),le):Y===63&&a===3?(e.consume(Y),z):Y===93&&a===5?(e.consume(Y),G):Kt(Y)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(hne,je,H)(Y)):Y===null||Kt(Y)?(e.exit("htmlFlowData"),H(Y)):(e.consume(Y),V)}function H(Y){return e.check(fne,te,je)(Y)}function te(Y){return e.enter("lineEnding"),e.consume(Y),e.exit("lineEnding"),X}function X(Y){return Y===null||Kt(Y)?H(Y):(e.enter("htmlFlowData"),V(Y))}function q(Y){return Y===45?(e.consume(Y),z):V(Y)}function W(Y){return Y===47?(e.consume(Y),o="",ae):V(Y)}function ae(Y){if(Y===62){const Oe=o.toLowerCase();return DR.includes(Oe)?(e.consume(Y),le):V(Y)}return Ma(Y)&&o.length<8?(e.consume(Y),o+=String.fromCharCode(Y),ae):V(Y)}function G(Y){return Y===93?(e.consume(Y),z):V(Y)}function z(Y){return Y===62?(e.consume(Y),le):Y===45&&a===2?(e.consume(Y),z):V(Y)}function le(Y){return Y===null||Kt(Y)?(e.exit("htmlFlowData"),je(Y)):(e.consume(Y),le)}function je(Y){return e.exit("htmlFlow"),t(Y)}}function gne(e,t,n){const i=this;return a;function a(o){return Kt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return i.parser.lazy[i.now().line]?n(o):t(o)}}function yne(e,t,n){return i;function i(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Gb,t,n)}}const xne={name:"htmlText",tokenize:vne};function vne(e,t,n){const i=this;let a,s,o;return l;function l(z){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(z),c}function c(z){return z===33?(e.consume(z),u):z===47?(e.consume(z),A):z===63?(e.consume(z),C):Ma(z)?(e.consume(z),F):n(z)}function u(z){return z===45?(e.consume(z),f):z===91?(e.consume(z),s=0,v):Ma(z)?(e.consume(z),T):n(z)}function f(z){return z===45?(e.consume(z),x):n(z)}function p(z){return z===null?n(z):z===45?(e.consume(z),g):Kt(z)?(o=p,W(z)):(e.consume(z),p)}function g(z){return z===45?(e.consume(z),x):p(z)}function x(z){return z===62?q(z):z===45?g(z):p(z)}function v(z){const le="CDATA[";return z===le.charCodeAt(s++)?(e.consume(z),s===le.length?j:v):n(z)}function j(z){return z===null?n(z):z===93?(e.consume(z),w):Kt(z)?(o=j,W(z)):(e.consume(z),j)}function w(z){return z===93?(e.consume(z),_):j(z)}function _(z){return z===62?q(z):z===93?(e.consume(z),_):j(z)}function T(z){return z===null||z===62?q(z):Kt(z)?(o=T,W(z)):(e.consume(z),T)}function C(z){return z===null?n(z):z===63?(e.consume(z),O):Kt(z)?(o=C,W(z)):(e.consume(z),C)}function O(z){return z===62?q(z):C(z)}function A(z){return Ma(z)?(e.consume(z),P):n(z)}function P(z){return z===45||da(z)?(e.consume(z),P):I(z)}function I(z){return Kt(z)?(o=I,W(z)):On(z)?(e.consume(z),I):q(z)}function F(z){return z===45||da(z)?(e.consume(z),F):z===47||z===62||Tr(z)?B(z):n(z)}function B(z){return z===47?(e.consume(z),q):z===58||z===95||Ma(z)?(e.consume(z),$):Kt(z)?(o=B,W(z)):On(z)?(e.consume(z),B):q(z)}function $(z){return z===45||z===46||z===58||z===95||da(z)?(e.consume(z),$):L(z)}function L(z){return z===61?(e.consume(z),V):Kt(z)?(o=L,W(z)):On(z)?(e.consume(z),L):B(z)}function V(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(e.consume(z),a=z,H):Kt(z)?(o=V,W(z)):On(z)?(e.consume(z),V):(e.consume(z),te)}function H(z){return z===a?(e.consume(z),a=void 0,X):z===null?n(z):Kt(z)?(o=H,W(z)):(e.consume(z),H)}function te(z){return z===null||z===34||z===39||z===60||z===61||z===96?n(z):z===47||z===62||Tr(z)?B(z):(e.consume(z),te)}function X(z){return z===47||z===62||Tr(z)?B(z):n(z)}function q(z){return z===62?(e.consume(z),e.exit("htmlTextData"),e.exit("htmlText"),t):n(z)}function W(z){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),ae}function ae(z){return On(z)?zn(e,G,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):G(z)}function G(z){return e.enter("htmlTextData"),o(z)}}const MD={name:"labelEnd",resolveAll:Sne,resolveTo:Nne,tokenize:_ne},bne={tokenize:Cne},jne={tokenize:Tne},wne={tokenize:Ane};function Sne(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const a=i.type==="labelImage"?4:2;i.type="data",t+=a}}return e.length!==n.length&&Ps(e,0,e.length,n),e}function Nne(e,t){let n=e.length,i=0,a,s,o,l;for(;n--;)if(a=e[n][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=n,a.type!=="labelLink")){i=2;break}}else a.type==="labelEnd"&&(o=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},f={type:"labelText",start:{...e[s+i+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=Zs(l,e.slice(s+1,s+i+3)),l=Zs(l,[["enter",f,t]]),l=Zs(l,lN(t.parser.constructs.insideSpan.null,e.slice(s+i+4,o-3),t)),l=Zs(l,[["exit",f,t],e[o-2],e[o-1],["exit",u,t]]),l=Zs(l,e.slice(o+1)),l=Zs(l,[["exit",c,t]]),Ps(e,s,e.length,l),e}function _ne(e,t,n){const i=this;let a=i.events.length,s,o;for(;a--;)if((i.events[a][1].type==="labelImage"||i.events[a][1].type==="labelLink")&&!i.events[a][1]._balanced){s=i.events[a][1];break}return l;function l(g){return s?s._inactive?p(g):(o=i.parser.defined.includes(Lo(i.sliceSerialize({start:s.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),c):n(g)}function c(g){return g===40?e.attempt(bne,f,o?f:p)(g):g===91?e.attempt(jne,f,o?u:p)(g):o?f(g):p(g)}function u(g){return e.attempt(wne,f,p)(g)}function f(g){return t(g)}function p(g){return s._balanced=!0,n(g)}}function Cne(e,t,n){return i;function i(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),a}function a(p){return Tr(p)?Pv(e,s)(p):s(p)}function s(p){return p===41?f(p):pU(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return Tr(p)?Pv(e,c)(p):f(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?gU(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function u(p){return Tr(p)?Pv(e,f)(p):f(p)}function f(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function Tne(e,t,n){const i=this;return a;function a(l){return mU.call(i,e,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return i.parser.defined.includes(Lo(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function Ane(e,t,n){return i;function i(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),a}function a(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Ene={name:"labelStartImage",resolveAll:MD.resolveAll,tokenize:kne};function kne(e,t,n){const i=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),s}function s(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):t(l)}}const Pne={name:"labelStartLink",resolveAll:MD.resolveAll,tokenize:One};function One(e,t,n){const i=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):t(o)}}const MC={name:"lineEnding",tokenize:Dne};function Dne(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),zn(e,t,"linePrefix")}}const pw={name:"thematicBreak",tokenize:Mne};function Mne(e,t,n){let i=0,a;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return a=u,l(u)}function l(u){return u===a?(e.enter("thematicBreakSequence"),c(u)):i>=3&&(u===null||Kt(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===a?(e.consume(u),i++,c):(e.exit("thematicBreakSequence"),On(u)?zn(e,l,"whitespace")(u):l(u))}}const ns={continuation:{tokenize:Fne},exit:Bne,name:"list",tokenize:Lne},Ine={partial:!0,tokenize:zne},Rne={partial:!0,tokenize:$ne};function Lne(e,t,n){const i=this,a=i.events[i.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(x){const v=i.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!i.containerState.marker||x===i.containerState.marker:tP(x)){if(i.containerState.type||(i.containerState.type=v,e.enter(v,{_container:!0})),v==="listUnordered")return e.enter("listItemPrefix"),x===42||x===45?e.check(pw,n,u)(x):u(x);if(!i.interrupt||x===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(x)}return n(x)}function c(x){return tP(x)&&++o<10?(e.consume(x),c):(!i.interrupt||o<2)&&(i.containerState.marker?x===i.containerState.marker:x===41||x===46)?(e.exit("listItemValue"),u(x)):n(x)}function u(x){return e.enter("listItemMarker"),e.consume(x),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||x,e.check(Gb,i.interrupt?n:f,e.attempt(Ine,g,p))}function f(x){return i.containerState.initialBlankLine=!0,s++,g(x)}function p(x){return On(x)?(e.enter("listItemPrefixWhitespace"),e.consume(x),e.exit("listItemPrefixWhitespace"),g):n(x)}function g(x){return i.containerState.size=s+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(x)}}function Fne(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(Gb,a,s);function a(l){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,zn(e,t,"listItemIndent",i.containerState.size+1)(l)}function s(l){return i.containerState.furtherBlankLines||!On(l)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(l)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(Rne,t,o)(l))}function o(l){return i.containerState._closeFlow=!0,i.interrupt=void 0,zn(e,e.attempt(ns,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function $ne(e,t,n){const i=this;return zn(e,a,"listItemIndent",i.containerState.size+1);function a(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?t(s):n(s)}}function Bne(e){e.exit(this.containerState.type)}function zne(e,t,n){const i=this;return zn(e,a,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const o=i.events[i.events.length-1];return!On(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const MR={name:"setextUnderline",resolveTo:qne,tokenize:Une};function qne(e,t){let n=e.length,i,a,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",s?(e.splice(a,0,["enter",o,t]),e.splice(s+1,0,["exit",e[i][1],t]),e[i][1].end={...e[s][1].end}):e[i][1]=o,e.push(["exit",o,t]),e}function Une(e,t,n){const i=this;let a;return s;function s(u){let f=i.events.length,p;for(;f--;)if(i.events[f][1].type!=="lineEnding"&&i.events[f][1].type!=="linePrefix"&&i.events[f][1].type!=="content"){p=i.events[f][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||p)?(e.enter("setextHeadingLine"),a=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===a?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),On(u)?zn(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||Kt(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const Vne={tokenize:Hne};function Hne(e){const t=this,n=e.attempt(Gb,i,e.attempt(this.parser.constructs.flowInitial,a,zn(e,e.attempt(this.parser.constructs.flow,a,e.attempt(Qte,a)),"linePrefix")));return n;function i(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Gne={resolveAll:xU()},Wne=yU("string"),Kne=yU("text");function yU(e){return{resolveAll:xU(e==="text"?Yne:void 0),tokenize:t};function t(n){const i=this,a=this.parser.constructs[e],s=n.attempt(a,o,l);return o;function o(f){return u(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return u(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function u(f){if(f===null)return!0;const p=a[f];let g=-1;if(p)for(;++g<p.length;){const x=p[g];if(!x.previous||x.previous.call(i,i.previous))return!0}return!1}}}function xU(e){return t;function t(n,i){let a=-1,s;for(;++a<=n.length;)s===void 0?n[a]&&n[a][1].type==="data"&&(s=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==s+2&&(n[s][1].end=n[a-1][1].end,n.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(n,i):n}}function Yne(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],a=t.sliceStream(i);let s=a.length,o=-1,l=0,c;for(;s--;){const u=a[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const Qne={42:ns,43:ns,45:ns,48:ns,49:ns,50:ns,51:ns,52:ns,53:ns,54:ns,55:ns,56:ns,57:ns,62:uU},Xne={91:tne},Jne={[-2]:DC,[-1]:DC,32:DC},Zne={35:one,42:pw,45:[MR,pw],60:dne,61:MR,95:pw,96:OR,126:OR},ere={38:hU,92:dU},tre={[-5]:MC,[-4]:MC,[-3]:MC,33:Ene,38:hU,42:nP,60:[Pte,xne],91:Pne,92:[ane,dU],93:MD,95:nP,96:Vte},nre={null:[nP,Gne]},rre={null:[42,95]},ire={null:[]},are=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:rre,contentInitial:Xne,disable:ire,document:Qne,flow:Zne,flowInitial:Jne,insideSpan:nre,string:ere,text:tre},Symbol.toStringTag,{value:"Module"}));function sre(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},s=[];let o=[],l=[];const c={attempt:I(A),check:I(P),consume:T,enter:C,exit:O,interrupt:I(P,{interrupt:!0})},u={code:null,containerState:{},defineSkip:j,events:[],now:v,parser:e,previous:null,sliceSerialize:g,sliceStream:x,write:p};let f=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function p(L){return o=Zs(o,L),w(),o[o.length-1]!==null?[]:(F(t,0),u.events=lN(s,u.events,u),u.events)}function g(L,V){return lre(x(L),V)}function x(L){return ore(o,L)}function v(){const{_bufferIndex:L,_index:V,line:H,column:te,offset:X}=i;return{_bufferIndex:L,_index:V,line:H,column:te,offset:X}}function j(L){a[L.line]=L.column,$()}function w(){let L;for(;i._index<o.length;){const V=o[i._index];if(typeof V=="string")for(L=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===L&&i._bufferIndex<V.length;)_(V.charCodeAt(i._bufferIndex));else _(V)}}function _(L){f=f(L)}function T(L){Kt(L)?(i.line++,i.column=1,i.offset+=L===-3?2:1,$()):L!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=L}function C(L,V){const H=V||{};return H.type=L,H.start=v(),u.events.push(["enter",H,u]),l.push(H),H}function O(L){const V=l.pop();return V.end=v(),u.events.push(["exit",V,u]),V}function A(L,V){F(L,V.from)}function P(L,V){V.restore()}function I(L,V){return H;function H(te,X,q){let W,ae,G,z;return Array.isArray(te)?je(te):"tokenize"in te?je([te]):le(te);function le(Me){return Ie;function Ie(be){const re=be!==null&&Me[be],ve=be!==null&&Me.null,ce=[...Array.isArray(re)?re:re?[re]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return je(ce)(be)}}function je(Me){return W=Me,ae=0,Me.length===0?q:Y(Me[ae])}function Y(Me){return Ie;function Ie(be){return z=B(),G=Me,Me.partial||(u.currentConstruct=Me),Me.name&&u.parser.constructs.disable.null.includes(Me.name)?Ke():Me.tokenize.call(V?Object.assign(Object.create(u),V):u,c,Oe,Ke)(be)}}function Oe(Me){return L(G,z),X}function Ke(Me){return z.restore(),++ae<W.length?Y(W[ae]):q}}}function F(L,V){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&Ps(u.events,V,u.events.length-V,L.resolve(u.events.slice(V),u)),L.resolveTo&&(u.events=L.resolveTo(u.events,u))}function B(){const L=v(),V=u.previous,H=u.currentConstruct,te=u.events.length,X=Array.from(l);return{from:te,restore:q};function q(){i=L,u.previous=V,u.currentConstruct=H,u.events.length=te,l=X,$()}}function $(){i.line in a&&i.column<2&&(i.column=a[i.line],i.offset+=a[i.line]-1)}}function ore(e,t){const n=t.start._index,i=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(i,s)];else{if(o=e.slice(n,a),i>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(i):o.shift()}s>0&&o.push(e[a].slice(0,s))}return o}function lre(e,t){let n=-1;const i=[];let a;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(s)}a=s===-2,i.push(o)}return i.join("")}function cre(e){const i={constructs:lU([are,...(e||{}).extensions||[]]),content:a(Nte),defined:[],document:a(Cte),flow:a(Vne),lazy:{},string:a(Wne),text:a(Kne)};return i;function a(s){return o;function o(l){return sre(i,s,l)}}}function ure(e){for(;!fU(e););return e}const IR=/[\0\t\n\r]/g;function dre(){let e=1,t="",n=!0,i;return a;function a(s,o,l){const c=[];let u,f,p,g,x;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),p=0,t="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(IR.lastIndex=p,u=IR.exec(s),g=u&&u.index!==void 0?u.index:s.length,x=s.charCodeAt(g),!u){t=s.slice(p);break}if(x===10&&p===g&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),p<g&&(c.push(s.slice(p,g)),e+=g-p),x){case 0:{c.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,c.push(-2);e++<f;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:i=!0,e=1}p=g+1}return l&&(i&&c.push(-5),t&&c.push(t),c.push(null)),c}}const hre=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function fre(e){return e.replace(hre,pre)}function pre(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),s=a===120||a===88;return cU(n.slice(s?2:1),s?16:10)}return DD(n)||e}const vU={}.hasOwnProperty;function mre(e,t,n){return typeof t!="string"&&(n=t,t=void 0),gre(n)(ure(cre(n).document().write(dre()(e,t,!0))))}function gre(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ue),autolinkProtocol:B,autolinkEmail:B,atxHeading:s(ie),blockQuote:s(ve),characterEscape:B,characterReference:B,codeFenced:s(ce),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ce,o),codeText:s(fe,o),codeTextData:B,data:B,codeFlowValue:B,definition:s(se),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Q),hardBreakEscape:s(ge),hardBreakTrailing:s(ge),htmlFlow:s(ee,o),htmlFlowData:B,htmlText:s(ee,o),htmlTextData:B,image:s(we),label:o,link:s(Ue),listItem:s(Le),listItemValue:g,listOrdered:s(Ge,p),listUnordered:s(Ge),paragraph:s(oe),reference:Y,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ie),strong:s(_e),thematicBreak:s(ze)},exit:{atxHeading:c(),atxHeadingSequence:A,autolink:c(),autolinkEmail:re,autolinkProtocol:be,blockQuote:c(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:Ke,characterReferenceMarkerNumeric:Ke,characterReferenceValue:Me,characterReference:Ie,codeFenced:c(w),codeFencedFence:j,codeFencedFenceInfo:x,codeFencedFenceMeta:v,codeFlowValue:$,codeIndented:c(_),codeText:c(X),codeTextData:$,data:$,definition:c(),definitionDestinationString:O,definitionLabelString:T,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(V),hardBreakTrailing:c(V),htmlFlow:c(H),htmlFlowData:$,htmlText:c(te),htmlTextData:$,image:c(W),label:G,labelText:ae,lineEnding:L,link:c(q),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Oe,resourceDestinationString:z,resourceTitleString:le,resource:je,setextHeading:c(F),setextHeadingLineSequence:I,setextHeadingText:P,strong:c(),thematicBreak:c()}};bU(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(K){let ye={type:"root",children:[]};const pe={stack:[ye],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:f,data:n},me=[];let Ne=-1;for(;++Ne<K.length;)if(K[Ne][1].type==="listOrdered"||K[Ne][1].type==="listUnordered")if(K[Ne][0]==="enter")me.push(Ne);else{const Be=me.pop();Ne=a(K,Be,Ne)}for(Ne=-1;++Ne<K.length;){const Be=t[K[Ne][0]];vU.call(Be,K[Ne][1].type)&&Be[K[Ne][1].type].call(Object.assign({sliceSerialize:K[Ne][2].sliceSerialize},pe),K[Ne][1])}if(pe.tokenStack.length>0){const Be=pe.tokenStack[pe.tokenStack.length-1];(Be[1]||RR).call(pe,void 0,Be[0])}for(ye.position={start:Wu(K.length>0?K[0][1].start:{line:1,column:1,offset:0}),end:Wu(K.length>0?K[K.length-2][1].end:{line:1,column:1,offset:0})},Ne=-1;++Ne<t.transforms.length;)ye=t.transforms[Ne](ye)||ye;return ye}function a(K,ye,pe){let me=ye-1,Ne=-1,Be=!1,ke,Ye,rt,gt;for(;++me<=pe;){const Pe=K[me];switch(Pe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Pe[0]==="enter"?Ne++:Ne--,gt=void 0;break}case"lineEndingBlank":{Pe[0]==="enter"&&(ke&&!gt&&!Ne&&!rt&&(rt=me),gt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:gt=void 0}if(!Ne&&Pe[0]==="enter"&&Pe[1].type==="listItemPrefix"||Ne===-1&&Pe[0]==="exit"&&(Pe[1].type==="listUnordered"||Pe[1].type==="listOrdered")){if(ke){let Je=me;for(Ye=void 0;Je--;){const et=K[Je];if(et[1].type==="lineEnding"||et[1].type==="lineEndingBlank"){if(et[0]==="exit")continue;Ye&&(K[Ye][1].type="lineEndingBlank",Be=!0),et[1].type="lineEnding",Ye=Je}else if(!(et[1].type==="linePrefix"||et[1].type==="blockQuotePrefix"||et[1].type==="blockQuotePrefixWhitespace"||et[1].type==="blockQuoteMarker"||et[1].type==="listItemIndent"))break}rt&&(!Ye||rt<Ye)&&(ke._spread=!0),ke.end=Object.assign({},Ye?K[Ye][1].start:Pe[1].end),K.splice(Ye||me,0,["exit",ke,Pe[2]]),me++,pe++}if(Pe[1].type==="listItemPrefix"){const Je={type:"listItem",_spread:!1,start:Object.assign({},Pe[1].start),end:void 0};ke=Je,K.splice(me,0,["enter",Je,Pe[2]]),me++,pe++,rt=void 0,gt=!0}}}return K[ye][1]._spread=Be,pe}function s(K,ye){return pe;function pe(me){l.call(this,K(me),me),ye&&ye.call(this,me)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(K,ye,pe){this.stack[this.stack.length-1].children.push(K),this.stack.push(K),this.tokenStack.push([ye,pe||void 0]),K.position={start:Wu(ye.start),end:void 0}}function c(K){return ye;function ye(pe){K&&K.call(this,pe),u.call(this,pe)}}function u(K,ye){const pe=this.stack.pop(),me=this.tokenStack.pop();if(me)me[0].type!==K.type&&(ye?ye.call(this,K,me[0]):(me[1]||RR).call(this,K,me[0]));else throw new Error("Cannot close `"+K.type+"` ("+kv({start:K.start,end:K.end})+"): its not open");pe.position.end=Wu(K.end)}function f(){return OD(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(K){if(this.data.expectingFirstListItemValue){const ye=this.stack[this.stack.length-2];ye.start=Number.parseInt(this.sliceSerialize(K),10),this.data.expectingFirstListItemValue=void 0}}function x(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.lang=K}function v(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.meta=K}function j(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.value=K.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.value=K.replace(/(\r?\n|\r)$/g,"")}function T(K){const ye=this.resume(),pe=this.stack[this.stack.length-1];pe.label=ye,pe.identifier=Lo(this.sliceSerialize(K)).toLowerCase()}function C(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.title=K}function O(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.url=K}function A(K){const ye=this.stack[this.stack.length-1];if(!ye.depth){const pe=this.sliceSerialize(K).length;ye.depth=pe}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function I(K){const ye=this.stack[this.stack.length-1];ye.depth=this.sliceSerialize(K).codePointAt(0)===61?1:2}function F(){this.data.setextHeadingSlurpLineEnding=void 0}function B(K){const pe=this.stack[this.stack.length-1].children;let me=pe[pe.length-1];(!me||me.type!=="text")&&(me=$e(),me.position={start:Wu(K.start),end:void 0},pe.push(me)),this.stack.push(me)}function $(K){const ye=this.stack.pop();ye.value+=this.sliceSerialize(K),ye.position.end=Wu(K.end)}function L(K){const ye=this.stack[this.stack.length-1];if(this.data.atHardBreak){const pe=ye.children[ye.children.length-1];pe.position.end=Wu(K.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ye.type)&&(B.call(this,K),$.call(this,K))}function V(){this.data.atHardBreak=!0}function H(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.value=K}function te(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.value=K}function X(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.value=K}function q(){const K=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";K.type+="Reference",K.referenceType=ye,delete K.url,delete K.title}else delete K.identifier,delete K.label;this.data.referenceType=void 0}function W(){const K=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";K.type+="Reference",K.referenceType=ye,delete K.url,delete K.title}else delete K.identifier,delete K.label;this.data.referenceType=void 0}function ae(K){const ye=this.sliceSerialize(K),pe=this.stack[this.stack.length-2];pe.label=fre(ye),pe.identifier=Lo(ye).toLowerCase()}function G(){const K=this.stack[this.stack.length-1],ye=this.resume(),pe=this.stack[this.stack.length-1];if(this.data.inReference=!0,pe.type==="link"){const me=K.children;pe.children=me}else pe.alt=ye}function z(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.url=K}function le(){const K=this.resume(),ye=this.stack[this.stack.length-1];ye.title=K}function je(){this.data.inReference=void 0}function Y(){this.data.referenceType="collapsed"}function Oe(K){const ye=this.resume(),pe=this.stack[this.stack.length-1];pe.label=ye,pe.identifier=Lo(this.sliceSerialize(K)).toLowerCase(),this.data.referenceType="full"}function Ke(K){this.data.characterReferenceType=K.type}function Me(K){const ye=this.sliceSerialize(K),pe=this.data.characterReferenceType;let me;pe?(me=cU(ye,pe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):me=DD(ye);const Ne=this.stack[this.stack.length-1];Ne.value+=me}function Ie(K){const ye=this.stack.pop();ye.position.end=Wu(K.end)}function be(K){$.call(this,K);const ye=this.stack[this.stack.length-1];ye.url=this.sliceSerialize(K)}function re(K){$.call(this,K);const ye=this.stack[this.stack.length-1];ye.url="mailto:"+this.sliceSerialize(K)}function ve(){return{type:"blockquote",children:[]}}function ce(){return{type:"code",lang:null,meta:null,value:""}}function fe(){return{type:"inlineCode",value:""}}function se(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Q(){return{type:"emphasis",children:[]}}function ie(){return{type:"heading",depth:0,children:[]}}function ge(){return{type:"break"}}function ee(){return{type:"html",value:""}}function we(){return{type:"image",title:null,url:"",alt:null}}function Ue(){return{type:"link",title:null,url:"",children:[]}}function Ge(K){return{type:"list",ordered:K.type==="listOrdered",start:null,spread:K._spread,children:[]}}function Le(K){return{type:"listItem",spread:K._spread,checked:null,children:[]}}function oe(){return{type:"paragraph",children:[]}}function _e(){return{type:"strong",children:[]}}function $e(){return{type:"text",value:""}}function ze(){return{type:"thematicBreak"}}}function Wu(e){return{line:e.line,column:e.column,offset:e.offset}}function bU(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?bU(e,i):yre(e,i)}}function yre(e,t){let n;for(n in t)if(vU.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function RR(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+kv({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+kv({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+kv({start:t.start,end:t.end})+") is still open")}function xre(e){const t=this;t.parser=n;function n(i){return mre(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function vre(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function bre(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function jre(e,t){const n=t.value?t.value+`
`:"",i={};t.lang&&(i.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function wre(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Sre(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Nre(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),a=Wg(i.toLowerCase()),s=e.footnoteOrder.indexOf(i);let o,l=e.footnoteCounts.get(i);l===void 0?(l=0,e.footnoteOrder.push(i),o=e.footnoteOrder.length):o=s+1,l+=1,e.footnoteCounts.set(i,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function _re(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Cre(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function jU(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const a=e.all(t),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=i:a.push({type:"text",value:i}),a}function Tre(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return jU(e,t);const a={src:Wg(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(a.title=i.title);const s={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,s),e.applyData(t,s)}function Are(e,t){const n={src:Wg(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function Ere(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function kre(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return jU(e,t);const a={href:Wg(i.url||"")};i.title!==null&&i.title!==void 0&&(a.title=i.title);const s={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Pre(e,t){const n={href:Wg(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Ore(e,t,n){const i=e.all(t),a=n?Dre(n):wU(t),s={},o=[];if(typeof t.checked=="boolean"){const f=i[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},i.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<i.length;){const f=i[l];(a||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?o.push(...f.children):o.push(f)}const c=i[i.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function Dre(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=wU(n[i])}return t}function wU(e){const t=e.spread;return t??e.children.length>1}function Mre(e,t){const n={},i=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<i.length;){const o=i[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Ire(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Rre(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Lre(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Fre(e,t){const n=e.all(t),i=n.shift(),a=[];if(i){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=AD(t.children[1]),c=tU(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)}function $re(e,t,n){const i=n?n.children:void 0,s=(i?i.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const p=t.children[c],g={},x=o?o[c]:void 0;x&&(g.align=x);let v={type:"element",tagName:s,properties:g,children:[]};p&&(v.children=e.all(p),e.patch(p,v),v=e.applyData(p,v)),u.push(v)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,f),e.applyData(t,f)}function Bre(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const LR=9,FR=32;function zre(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),a=0;const s=[];for(;i;)s.push($R(t.slice(a,i.index),a>0,!0),i[0]),a=i.index+i[0].length,i=n.exec(t);return s.push($R(t.slice(a),a>0,!1)),s.join("")}function $R(e,t,n){let i=0,a=e.length;if(t){let s=e.codePointAt(i);for(;s===LR||s===FR;)i++,s=e.codePointAt(i)}if(n){let s=e.codePointAt(a-1);for(;s===LR||s===FR;)a--,s=e.codePointAt(a-1)}return a>i?e.slice(i,a):""}function qre(e,t){const n={type:"text",value:zre(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Ure(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Vre={blockquote:vre,break:bre,code:jre,delete:wre,emphasis:Sre,footnoteReference:Nre,heading:_re,html:Cre,imageReference:Tre,image:Are,inlineCode:Ere,linkReference:kre,link:Pre,listItem:Ore,list:Mre,paragraph:Ire,root:Rre,strong:Lre,table:Fre,tableCell:Bre,tableRow:$re,text:qre,thematicBreak:Ure,toml:Pj,yaml:Pj,definition:Pj,footnoteDefinition:Pj};function Pj(){}const SU=-1,cN=0,Ov=1,Iw=2,ID=3,RD=4,LD=5,FD=6,NU=7,_U=8,BR=typeof self=="object"?self:globalThis,Hre=(e,t)=>{const n=(a,s)=>(e.set(s,a),a),i=a=>{if(e.has(a))return e.get(a);const[s,o]=t[a];switch(s){case cN:case SU:return n(o,a);case Ov:{const l=n([],a);for(const c of o)l.push(i(c));return l}case Iw:{const l=n({},a);for(const[c,u]of o)l[i(c)]=i(u);return l}case ID:return n(new Date(o),a);case RD:{const{source:l,flags:c}=o;return n(new RegExp(l,c),a)}case LD:{const l=n(new Map,a);for(const[c,u]of o)l.set(i(c),i(u));return l}case FD:{const l=n(new Set,a);for(const c of o)l.add(i(c));return l}case NU:{const{name:l,message:c}=o;return n(new BR[l](c),a)}case _U:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new BR[s](o),a)};return i},zR=e=>Hre(new Map,e)(0),Nm="",{toString:Gre}={},{keys:Wre}=Object,iv=e=>{const t=typeof e;if(t!=="object"||!e)return[cN,t];const n=Gre.call(e).slice(8,-1);switch(n){case"Array":return[Ov,Nm];case"Object":return[Iw,Nm];case"Date":return[ID,Nm];case"RegExp":return[RD,Nm];case"Map":return[LD,Nm];case"Set":return[FD,Nm];case"DataView":return[Ov,n]}return n.includes("Array")?[Ov,n]:n.includes("Error")?[NU,n]:[Iw,n]},Oj=([e,t])=>e===cN&&(t==="function"||t==="symbol"),Kre=(e,t,n,i)=>{const a=(o,l)=>{const c=i.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=iv(o);switch(l){case cN:{let f=o;switch(c){case"bigint":l=_U,f=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return a([SU],o)}return a([l,f],o)}case Ov:{if(c){let g=o;return c==="DataView"?g=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(g=new Uint8Array(o)),a([c,[...g]],o)}const f=[],p=a([l,f],o);for(const g of o)f.push(s(g));return p}case Iw:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const f=[],p=a([l,f],o);for(const g of Wre(o))(e||!Oj(iv(o[g])))&&f.push([s(g),s(o[g])]);return p}case ID:return a([l,o.toISOString()],o);case RD:{const{source:f,flags:p}=o;return a([l,{source:f,flags:p}],o)}case LD:{const f=[],p=a([l,f],o);for(const[g,x]of o)(e||!(Oj(iv(g))||Oj(iv(x))))&&f.push([s(g),s(x)]);return p}case FD:{const f=[],p=a([l,f],o);for(const g of o)(e||!Oj(iv(g)))&&f.push(s(g));return p}}const{message:u}=o;return a([l,{name:c,message:u}],o)};return s},qR=(e,{json:t,lossy:n}={})=>{const i=[];return Kre(!(t||n),!!t,new Map,i)(e),i},Rw=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?zR(qR(e,t)):structuredClone(e):(e,t)=>zR(qR(e,t));function Yre(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Qre(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Xre(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Yre,i=e.options.footnoteBackLabel||Qre,a=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const f=e.all(u),p=String(u.identifier).toUpperCase(),g=Wg(p.toLowerCase());let x=0;const v=[],j=e.footnoteCounts.get(p);for(;j!==void 0&&++x<=j;){v.length>0&&v.push({type:"text",value:" "});let T=typeof n=="string"?n:n(c,x);typeof T=="string"&&(T={type:"text",value:T}),v.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,x),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const w=f[f.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const T=w.children[w.children.length-1];T&&T.type==="text"?T.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...v)}else f.push(...v);const _={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(f,!0)};e.patch(u,_),l.push(_)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Rw(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const uN=function(e){if(e==null)return tie;if(typeof e=="function")return dN(e);if(typeof e=="object")return Array.isArray(e)?Jre(e):Zre(e);if(typeof e=="string")return eie(e);throw new Error("Expected function, string, or object as test")};function Jre(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=uN(e[n]);return dN(i);function i(...a){let s=-1;for(;++s<t.length;)if(t[s].apply(this,a))return!0;return!1}}function Zre(e){const t=e;return dN(n);function n(i){const a=i;let s;for(s in e)if(a[s]!==t[s])return!1;return!0}}function eie(e){return dN(t);function t(n){return n&&n.type===e}}function dN(e){return t;function t(n,i,a){return!!(nie(n)&&e.call(this,n,typeof i=="number"?i:void 0,a||void 0))}}function tie(){return!0}function nie(e){return e!==null&&typeof e=="object"&&"type"in e}const CU=[],rie=!0,rP=!1,iie="skip";function TU(e,t,n,i){let a;typeof t=="function"&&typeof n!="function"?(i=n,n=t):a=t;const s=uN(a),o=i?-1:1;l(e,void 0,[])();function l(c,u,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const x=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return g;function g(){let x=CU,v,j,w;if((!t||s(c,u,f[f.length-1]||void 0))&&(x=aie(n(c,f)),x[0]===rP))return x;if("children"in c&&c.children){const _=c;if(_.children&&x[0]!==iie)for(j=(i?_.children.length:-1)+o,w=f.concat(_);j>-1&&j<_.children.length;){const T=_.children[j];if(v=l(T,j,w)(),v[0]===rP)return v;j=typeof v[1]=="number"?v[1]:j+o}}return x}}}function aie(e){return Array.isArray(e)?e:typeof e=="number"?[rie,e]:e==null?CU:[e]}function $D(e,t,n,i){let a,s,o;typeof t=="function"?(s=void 0,o=t,a=n):(s=t,o=n,a=i),TU(e,s,l,a);function l(c,u){const f=u[u.length-1],p=f?f.children.indexOf(c):void 0;return o(c,p,f)}}const iP={}.hasOwnProperty,sie={};function oie(e,t){const n=t||sie,i=new Map,a=new Map,s=new Map,o={...Vre,...n.handlers},l={all:u,applyData:cie,definitionById:i,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:lie,wrap:die};return $D(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?i:a,g=String(f.identifier).toUpperCase();p.has(g)||p.set(g,f)}}),l;function c(f,p){const g=f.type,x=l.handlers[g];if(iP.call(l.handlers,g)&&x)return x(l,f,p);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in f){const{children:j,...w}=f,_=Rw(w);return _.children=l.all(f),_}return Rw(f)}return(l.options.unknownHandler||uie)(l,f,p)}function u(f){const p=[];if("children"in f){const g=f.children;let x=-1;for(;++x<g.length;){const v=l.one(g[x],f);if(v){if(x&&g[x-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=UR(v.value)),!Array.isArray(v)&&v.type==="element")){const j=v.children[0];j&&j.type==="text"&&(j.value=UR(j.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function lie(e,t){e.position&&(t.position=Qee(e))}function cie(e,t){let n=t;if(e&&e.data){const i=e.data.hName,a=e.data.hChildren,s=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const o="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Rw(s)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function uie(e,t){const n=t.data||{},i="value"in t&&!(iP.call(n,"hProperties")||iP.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function die(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function UR(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function VR(e,t){const n=oie(e,t),i=n.one(e,void 0),a=Xre(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function hie(e,t){return e&&"run"in e?async function(n,i){const a=VR(n,{file:i,...t});await e.run(a,i)}:function(n,i){return VR(n,{file:i,...e||t})}}function HR(e){if(e)throw e}var IC,GR;function fie(){if(GR)return IC;GR=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(u){return typeof Array.isArray=="function"?Array.isArray(u):t.call(u)==="[object Array]"},s=function(u){if(!u||t.call(u)!=="[object Object]")return!1;var f=e.call(u,"constructor"),p=u.constructor&&u.constructor.prototype&&e.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!f&&!p)return!1;var g;for(g in u);return typeof g>"u"||e.call(u,g)},o=function(u,f){n&&f.name==="__proto__"?n(u,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):u[f.name]=f.newValue},l=function(u,f){if(f==="__proto__")if(e.call(u,f)){if(i)return i(u,f).value}else return;return u[f]};return IC=function c(){var u,f,p,g,x,v,j=arguments[0],w=1,_=arguments.length,T=!1;for(typeof j=="boolean"&&(T=j,j=arguments[1]||{},w=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});w<_;++w)if(u=arguments[w],u!=null)for(f in u)p=l(j,f),g=l(u,f),j!==g&&(T&&g&&(s(g)||(x=a(g)))?(x?(x=!1,v=p&&a(p)?p:[]):v=p&&s(p)?p:{},o(j,{name:f,newValue:c(T,v,g)})):typeof g<"u"&&o(j,{name:f,newValue:g}));return j},IC}var pie=fie();const RC=qn(pie);function aP(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function mie(){const e=[],t={run:n,use:i};return t;function n(...a){let s=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...u){const f=e[++s];let p=-1;if(c){o(c);return}for(;++p<a.length;)(u[p]===null||u[p]===void 0)&&(u[p]=a[p]);a=u,f?gie(f,l)(...u):o(null,...u)}}function i(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function gie(e,t){let n;return i;function i(...o){const l=e.length>o.length;let c;l&&o.push(a);try{c=e.apply(this,o)}catch(u){const f=u;if(l&&n)throw f;return a(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,a):c instanceof Error?a(c):s(c))}function a(o,...l){n||(n=!0,t(o,...l))}function s(o){a(null,o)}}const Nl={basename:yie,dirname:xie,extname:vie,join:bie,sep:"/"};function yie(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Wb(e);let n=0,i=-1,a=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else i<0&&(s=!0,i=a+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let o=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else o<0&&(s=!0,o=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(i=a):(l=-1,i=o));return n===i?i=o:i<0&&(i=e.length),e.slice(n,i)}function xie(e){if(Wb(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function vie(e){Wb(e);let t=e.length,n=-1,i=0,a=-1,s=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){i=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?a<0?a=t:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||n<0||s===0||s===1&&a===n-1&&a===i+1?"":e.slice(a,n)}function bie(...e){let t=-1,n;for(;++t<e.length;)Wb(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":jie(n)}function jie(e){Wb(e);const t=e.codePointAt(0)===47;let n=wie(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function wie(e,t){let n="",i=0,a=-1,s=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||s===1))if(a!==o-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",i=0):(n=n.slice(0,c),i=n.length-1-n.lastIndexOf("/")),a=o,s=0;continue}}else if(n.length>0){n="",i=0,a=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),i=o-a-1;a=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Wb(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Sie={cwd:Nie};function Nie(){return"/"}function sP(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function _ie(e){if(typeof e=="string")e=new URL(e);else if(!sP(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Cie(e)}function Cie(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const LC=["history","path","basename","stem","extname","dirname"];class AU{constructor(t){let n;t?sP(t)?n={path:t}:typeof t=="string"||Tie(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Sie.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<LC.length;){const s=LC[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let a;for(a in n)LC.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?Nl.basename(this.path):void 0}set basename(t){$C(t,"basename"),FC(t,"basename"),this.path=Nl.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Nl.dirname(this.path):void 0}set dirname(t){WR(this.basename,"dirname"),this.path=Nl.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Nl.extname(this.path):void 0}set extname(t){if(FC(t,"extname"),WR(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Nl.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){sP(t)&&(t=_ie(t)),$C(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Nl.basename(this.path,this.extname):void 0}set stem(t){$C(t,"stem"),FC(t,"stem"),this.path=Nl.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const a=this.message(t,n,i);throw a.fatal=!0,a}info(t,n,i){const a=this.message(t,n,i);return a.fatal=void 0,a}message(t,n,i){const a=new ma(t,n,i);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function FC(e,t){if(e&&e.includes(Nl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Nl.sep+"`")}function $C(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function WR(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Tie(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Aie=function(e){const i=this.constructor.prototype,a=i[e],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},Eie={}.hasOwnProperty;class BD extends Aie{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=mie()}copy(){const t=new BD;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(RC(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(qC("data",this.frozen),this.namespace[t]=n,this):Eie.call(this.namespace,t)&&this.namespace[t]||void 0:t?(qC("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const a=n.call(t,...i);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Dj(t),i=this.parser||this.Parser;return BC("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),BC("process",this.parser||this.Parser),zC("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(s,o){const l=Dj(t),c=i.parse(l);i.run(c,l,function(f,p,g){if(f||!p||!g)return u(f);const x=p,v=i.stringify(x,g);Oie(v)?g.value=v:g.result=v,u(f,g)});function u(f,p){f||!p?o(f):s?s(p):n(void 0,p)}}}processSync(t){let n=!1,i;return this.freeze(),BC("processSync",this.parser||this.Parser),zC("processSync",this.compiler||this.Compiler),this.process(t,a),YR("processSync","process",n),i;function a(s,o){n=!0,HR(s),i=o}}run(t,n,i){KR(t),this.freeze();const a=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(o,l){const c=Dj(n);a.run(t,c,u);function u(f,p,g){const x=p||t;f?l(f):o?o(x):i(void 0,x,g)}}}runSync(t,n){let i=!1,a;return this.run(t,n,s),YR("runSync","run",i),a;function s(o,l){HR(o),a=l,i=!0}}stringify(t,n){this.freeze();const i=Dj(n),a=this.compiler||this.Compiler;return zC("stringify",a),KR(t),a(t,i)}use(t,...n){const i=this.attachers,a=this.namespace;if(qC("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...p]=u;c(f,p)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(a.settings=RC(!0,a.settings,u.settings))}function l(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const p=u[f];s(p)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let p=-1,g=-1;for(;++p<i.length;)if(i[p][0]===u){g=p;break}if(g===-1)i.push([u,...f]);else if(f.length>0){let[x,...v]=f;const j=i[g][1];aP(j)&&aP(x)&&(x=RC(!0,j,x)),i[g]=[u,x,...v]}}}}const kie=new BD().freeze();function BC(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function zC(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function qC(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function KR(e){if(!aP(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function YR(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Dj(e){return Pie(e)?e:new AU(e)}function Pie(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Oie(e){return typeof e=="string"||Die(e)}function Die(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Mie="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",QR=[],XR={allowDangerousHtml:!0},Iie=/^(https?|ircs?|mailto|xmpp)$/i,Rie=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Ef(e){const t=Lie(e),n=Fie(e);return $ie(t.runSync(t.parse(n),n),e)}function Lie(e){const t=e.rehypePlugins||QR,n=e.remarkPlugins||QR,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...XR}:XR;return kie().use(xre).use(n).use(hie,i).use(t)}function Fie(e){const t=e.children||"",n=new AU;return typeof t=="string"&&(n.value=t),n}function $ie(e,t){const n=t.allowedElements,i=t.allowElement,a=t.components,s=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||Bie;for(const f of Rie)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+Mie+f.id,void 0);return $D(e,u),tte(e,{Fragment:r.Fragment,components:a,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function u(f,p,g){if(f.type==="raw"&&g&&typeof p=="number")return o?g.children.splice(p,1):g.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let x;for(x in OC)if(Object.hasOwn(OC,x)&&Object.hasOwn(f.properties,x)){const v=f.properties[x],j=OC[x];(j===null||j.includes(f.tagName))&&(f.properties[x]=c(String(v||""),x,f))}}if(f.type==="element"){let x=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!x&&i&&typeof p=="number"&&(x=!i(f,p,g)),x&&g&&typeof p=="number")return l&&f.children?g.children.splice(p,1,...f.children):g.children.splice(p,1),p}}}function Bie(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||i!==-1&&t>i||Iie.test(e.slice(0,t))?e:""}function JR(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let i=0,a=n.indexOf(t);for(;a!==-1;)i++,a=n.indexOf(t,a+t.length);return i}function zie(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function qie(e,t,n){const a=uN((n||{}).ignore||[]),s=Uie(t);let o=-1;for(;++o<s.length;)TU(e,"text",l);function l(u,f){let p=-1,g;for(;++p<f.length;){const x=f[p],v=g?g.children:void 0;if(a(x,v?v.indexOf(x):void 0,g))return;g=x}if(g)return c(u,f)}function c(u,f){const p=f[f.length-1],g=s[o][0],x=s[o][1];let v=0;const w=p.children.indexOf(u);let _=!1,T=[];g.lastIndex=0;let C=g.exec(u.value);for(;C;){const O=C.index,A={index:C.index,input:C.input,stack:[...f,u]};let P=x(...C,A);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?g.lastIndex=O+1:(v!==O&&T.push({type:"text",value:u.value.slice(v,O)}),Array.isArray(P)?T.push(...P):P&&T.push(P),v=O+C[0].length,_=!0),!g.global)break;C=g.exec(u.value)}return _?(v<u.value.length&&T.push({type:"text",value:u.value.slice(v)}),p.children.splice(w,1,...T)):T=[u],w+T.length}}function Uie(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const a=n[i];t.push([Vie(a[0]),Hie(a[1])])}return t}function Vie(e){return typeof e=="string"?new RegExp(zie(e),"g"):e}function Hie(e){return typeof e=="function"?e:function(){return e}}const UC="phrasing",VC=["autolink","link","image","label"];function Gie(){return{transforms:[Zie],enter:{literalAutolink:Kie,literalAutolinkEmail:HC,literalAutolinkHttp:HC,literalAutolinkWww:HC},exit:{literalAutolink:Jie,literalAutolinkEmail:Xie,literalAutolinkHttp:Yie,literalAutolinkWww:Qie}}}function Wie(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:UC,notInConstruct:VC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:UC,notInConstruct:VC},{character:":",before:"[ps]",after:"\\/",inConstruct:UC,notInConstruct:VC}]}}function Kie(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function HC(e){this.config.enter.autolinkProtocol.call(this,e)}function Yie(e){this.config.exit.autolinkProtocol.call(this,e)}function Qie(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Xie(e){this.config.exit.autolinkEmail.call(this,e)}function Jie(e){this.exit(e)}function Zie(e){qie(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,eae],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),tae]],{ignore:["link","linkReference"]})}function eae(e,t,n,i,a){let s="";if(!EU(a)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!nae(n)))return!1;const o=rae(n+i);if(!o[0])return!1;const l={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function tae(e,t,n,i){return!EU(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function nae(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function rae(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const a=JR(e,"(");let s=JR(e,")");for(;i!==-1&&a>s;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[e,n]}function EU(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Af(n)||oN(n))&&(!t||n!==47)}kU.peek=hae;function iae(){this.buffer()}function aae(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function sae(){this.buffer()}function oae(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function lae(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Lo(this.sliceSerialize(e)).toLowerCase(),n.label=t}function cae(e){this.exit(e)}function uae(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Lo(this.sliceSerialize(e)).toLowerCase(),n.label=t}function dae(e){this.exit(e)}function hae(){return"["}function kU(e,t,n,i){const a=n.createTracker(i);let s=a.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=a.move(n.safe(n.associationId(e),{after:"]",before:s})),l(),o(),s+=a.move("]"),s}function fae(){return{enter:{gfmFootnoteCallString:iae,gfmFootnoteCall:aae,gfmFootnoteDefinitionLabelString:sae,gfmFootnoteDefinition:oae},exit:{gfmFootnoteCallString:lae,gfmFootnoteCall:cae,gfmFootnoteDefinitionLabelString:uae,gfmFootnoteDefinition:dae}}}function pae(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:kU},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,a,s,o){const l=s.createTracker(o);let c=l.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(i),{before:c,after:"]"})),f(),c+=l.move("]:"),i.children&&i.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+s.indentLines(s.containerFlow(i,l.current()),t?PU:mae))),u(),c}}function mae(e,t,n){return t===0?e:PU(e,t,n)}function PU(e,t,n){return(n?"":"    ")+e}const gae=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];OU.peek=jae;function yae(){return{canContainEols:["delete"],enter:{strikethrough:vae},exit:{strikethrough:bae}}}function xae(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:gae}],handlers:{delete:OU}}}function vae(e){this.enter({type:"delete",children:[]},e)}function bae(e){this.exit(e)}function OU(e,t,n,i){const a=n.createTracker(i),s=n.enter("strikethrough");let o=a.move("~~");return o+=n.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),s(),o}function jae(){return"~"}function wae(e){return e.length}function Sae(e,t){const n=t||{},i=(n.align||[]).concat(),a=n.stringLength||wae,s=[],o=[],l=[],c=[];let u=0,f=-1;for(;++f<e.length;){const j=[],w=[];let _=-1;for(e[f].length>u&&(u=e[f].length);++_<e[f].length;){const T=Nae(e[f][_]);if(n.alignDelimiters!==!1){const C=a(T);w[_]=C,(c[_]===void 0||C>c[_])&&(c[_]=C)}j.push(T)}o[f]=j,l[f]=w}let p=-1;if(typeof i=="object"&&"length"in i)for(;++p<u;)s[p]=ZR(i[p]);else{const j=ZR(i);for(;++p<u;)s[p]=j}p=-1;const g=[],x=[];for(;++p<u;){const j=s[p];let w="",_="";j===99?(w=":",_=":"):j===108?w=":":j===114&&(_=":");let T=n.alignDelimiters===!1?1:Math.max(1,c[p]-w.length-_.length);const C=w+"-".repeat(T)+_;n.alignDelimiters!==!1&&(T=w.length+T+_.length,T>c[p]&&(c[p]=T),x[p]=T),g[p]=C}o.splice(1,0,g),l.splice(1,0,x),f=-1;const v=[];for(;++f<o.length;){const j=o[f],w=l[f];p=-1;const _=[];for(;++p<u;){const T=j[p]||"";let C="",O="";if(n.alignDelimiters!==!1){const A=c[p]-(w[p]||0),P=s[p];P===114?C=" ".repeat(A):P===99?A%2?(C=" ".repeat(A/2+.5),O=" ".repeat(A/2-.5)):(C=" ".repeat(A/2),O=C):O=" ".repeat(A)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(C),_.push(T),n.alignDelimiters!==!1&&_.push(O),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==u-1)&&_.push("|")}v.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return v.join(`
`)}function Nae(e){return e==null?"":String(e)}function ZR(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function _ae(e,t,n,i){const a=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),Cae);return a(),o}function Cae(e,t,n){return">"+(n?"":" ")+e}function Tae(e,t){return e4(e,t.inConstruct,!0)&&!e4(e,t.notInConstruct,!1)}function e4(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function t4(e,t,n,i){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&Tae(n.stack,n.unsafe[a]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function Aae(e,t){const n=String(e);let i=n.indexOf(t),a=i,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===a?++s>o&&(o=s):s=1,a=i+t.length,i=n.indexOf(t,a);return o}function Eae(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function kae(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Pae(e,t,n,i){const a=kae(n),s=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if(Eae(e,n)){const p=n.enter("codeIndented"),g=n.indentLines(s,Oae);return p(),g}const l=n.createTracker(i),c=a.repeat(Math.max(Aae(s,a)+1,3)),u=n.enter("codeFenced");let f=l.move(c);if(e.lang){const p=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...l.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...l.current()})),p()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),u(),f}function Oae(e,t,n){return(n?"":"    ")+e}function zD(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Dae(e,t,n,i){const a=zD(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(i);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),o(),u}function Mae(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Hv(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Lw(e,t,n){const i=hg(e),a=hg(t);return i===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}DU.peek=Iae;function DU(e,t,n,i){const a=Mae(n),s=n.enter("emphasis"),o=n.createTracker(i),l=o.move(a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=Lw(i.before.charCodeAt(i.before.length-1),u,a);f.inside&&(c=Hv(u)+c.slice(1));const p=c.charCodeAt(c.length-1),g=Lw(i.after.charCodeAt(0),p,a);g.inside&&(c=c.slice(0,-1)+Hv(p));const x=o.move(a);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function Iae(e,t,n){return n.options.emphasis||"*"}function Rae(e,t){let n=!1;return $D(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,rP}),!!((!e.depth||e.depth<3)&&OD(e)&&(t.options.setext||n))}function Lae(e,t,n,i){const a=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(i);if(Rae(e,n)){const f=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return p(),f(),g+`
`+(a===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Hv(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}MU.peek=Fae;function MU(e){return e.value||""}function Fae(){return"<"}IU.peek=$ae;function IU(e,t,n,i){const a=zD(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(i);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),u+=c.move(")"),o(),u}function $ae(){return"!"}RU.peek=Bae;function RU(e,t,n,i){const a=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(i);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==p?c+=l.move(p+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Bae(){return"!"}LU.peek=zae;function LU(e,t,n){let i=e.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(i);)a+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(i);){let u=c.index;i.charCodeAt(u)===10&&i.charCodeAt(u-1)===13&&u--,i=i.slice(0,u)+" "+i.slice(c.index+1)}}return a+i+a}function zae(){return"`"}function FU(e,t){const n=OD(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}$U.peek=qae;function $U(e,t,n,i){const a=zD(n),s=a==='"'?"Quote":"Apostrophe",o=n.createTracker(i);let l,c;if(FU(e,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let p=o.move("<");return p+=o.move(n.containerPhrasing(e,{before:p,after:">",...o.current()})),p+=o.move(">"),l(),n.stack=f,p}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${s}`),u+=o.move(" "+a),u+=o.move(n.safe(e.title,{before:u,after:a,...o.current()})),u+=o.move(a),c()),u+=o.move(")"),l(),u}function qae(e,t,n){return FU(e,n)?"<":"["}BU.peek=Uae;function BU(e,t,n,i){const a=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(i);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==p?c+=l.move(p+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Uae(){return"["}function qD(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Vae(e){const t=qD(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Hae(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function zU(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Gae(e,t,n,i){const a=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?Hae(n):qD(n);const l=e.ordered?o==="."?")":".":Vae(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),zU(n)===o&&f){let p=-1;for(;++p<e.children.length;){const g=e.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,i);return n.bulletLastUsed=o,n.bulletCurrent=s,a(),u}function Wae(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Kae(e,t,n,i){const a=Wae(n);let s=n.bulletCurrent||qD(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(i);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),f);return c(),u;function f(p,g,x){return g?(x?"":" ".repeat(o))+p:(x?s:s+" ".repeat(o-s.length))+p}}function Yae(e,t,n,i){const a=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,i);return s(),a(),o}const Qae=uN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Xae(e,t,n,i){return(e.children.some(function(o){return Qae(o)})?n.containerPhrasing:n.containerFlow).call(n,e,i)}function Jae(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}qU.peek=Zae;function qU(e,t,n,i){const a=Jae(n),s=n.enter("strong"),o=n.createTracker(i),l=o.move(a+a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=Lw(i.before.charCodeAt(i.before.length-1),u,a);f.inside&&(c=Hv(u)+c.slice(1));const p=c.charCodeAt(c.length-1),g=Lw(i.after.charCodeAt(0),p,a);g.inside&&(c=c.slice(0,-1)+Hv(p));const x=o.move(a+a);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function Zae(e,t,n){return n.options.strong||"*"}function ese(e,t,n,i){return n.safe(e.value,i)}function tse(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function nse(e,t,n){const i=(zU(n)+(n.options.ruleSpaces?" ":"")).repeat(tse(n));return n.options.ruleSpaces?i.slice(0,-1):i}const UU={blockquote:_ae,break:t4,code:Pae,definition:Dae,emphasis:DU,hardBreak:t4,heading:Lae,html:MU,image:IU,imageReference:RU,inlineCode:LU,link:$U,linkReference:BU,list:Gae,listItem:Kae,paragraph:Yae,root:Xae,strong:qU,text:ese,thematicBreak:nse};function rse(){return{enter:{table:ise,tableData:n4,tableHeader:n4,tableRow:sse},exit:{codeText:ose,table:ase,tableData:GC,tableHeader:GC,tableRow:GC}}}function ise(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function ase(e){this.exit(e),this.data.inTable=void 0}function sse(e){this.enter({type:"tableRow",children:[]},e)}function GC(e){this.exit(e)}function n4(e){this.enter({type:"tableCell",children:[]},e)}function ose(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,lse));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function lse(e,t){return t==="|"?t:e}function cse(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,a=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:o,tableCell:c,tableRow:l}};function o(x,v,j,w){return u(f(x,j,w),x.align)}function l(x,v,j,w){const _=p(x,j,w),T=u([_]);return T.slice(0,T.indexOf(`
`))}function c(x,v,j,w){const _=j.enter("tableCell"),T=j.enter("phrasing"),C=j.containerPhrasing(x,{...w,before:s,after:s});return T(),_(),C}function u(x,v){return Sae(x,{align:v,alignDelimiters:i,padding:n,stringLength:a})}function f(x,v,j){const w=x.children;let _=-1;const T=[],C=v.enter("table");for(;++_<w.length;)T[_]=p(w[_],v,j);return C(),T}function p(x,v,j){const w=x.children;let _=-1;const T=[],C=v.enter("tableRow");for(;++_<w.length;)T[_]=c(w[_],x,v,j);return C(),T}function g(x,v,j){let w=UU.inlineCode(x,v,j);return j.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function use(){return{exit:{taskListCheckValueChecked:r4,taskListCheckValueUnchecked:r4,paragraph:hse}}}function dse(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:fse}}}function r4(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function hse(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const a=t.children;let s=-1,o;for(;++s<a.length;){const l=a[s];if(l.type==="paragraph"){o=l;break}}o===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function fse(e,t,n,i){const a=e.children[0],s=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(i);s&&l.move(o);let c=UU.listItem(e,t,n,{...i,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+o}}function pse(){return[Gie(),fae(),yae(),rse(),use()]}function mse(e){return{extensions:[Wie(),pae(e),xae(),cse(e),dse()]}}const gse={tokenize:wse,partial:!0},VU={tokenize:Sse,partial:!0},HU={tokenize:Nse,partial:!0},GU={tokenize:_se,partial:!0},yse={tokenize:Cse,partial:!0},WU={name:"wwwAutolink",tokenize:bse,previous:YU},KU={name:"protocolAutolink",tokenize:jse,previous:QU},Yc={name:"emailAutolink",tokenize:vse,previous:XU},zl={};function xse(){return{text:zl}}let Hh=48;for(;Hh<123;)zl[Hh]=Yc,Hh++,Hh===58?Hh=65:Hh===91&&(Hh=97);zl[43]=Yc;zl[45]=Yc;zl[46]=Yc;zl[95]=Yc;zl[72]=[Yc,KU];zl[104]=[Yc,KU];zl[87]=[Yc,WU];zl[119]=[Yc,WU];function vse(e,t,n){const i=this;let a,s;return o;function o(p){return!oP(p)||!XU.call(i,i.previous)||UD(i.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(p))}function l(p){return oP(p)?(e.consume(p),l):p===64?(e.consume(p),c):n(p)}function c(p){return p===46?e.check(yse,f,u)(p):p===45||p===95||da(p)?(s=!0,e.consume(p),c):f(p)}function u(p){return e.consume(p),a=!0,c}function f(p){return s&&a&&Ma(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function bse(e,t,n){const i=this;return a;function a(o){return o!==87&&o!==119||!YU.call(i,i.previous)||UD(i.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(gse,e.attempt(VU,e.attempt(HU,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function jse(e,t,n){const i=this;let a="",s=!1;return o;function o(p){return(p===72||p===104)&&QU.call(i,i.previous)&&!UD(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(p),e.consume(p),l):n(p)}function l(p){if(Ma(p)&&a.length<5)return a+=String.fromCodePoint(p),e.consume(p),l;if(p===58){const g=a.toLowerCase();if(g==="http"||g==="https")return e.consume(p),c}return n(p)}function c(p){return p===47?(e.consume(p),s?u:(s=!0,c)):n(p)}function u(p){return p===null||Mw(p)||Tr(p)||Af(p)||oN(p)?n(p):e.attempt(VU,e.attempt(HU,f),n)(p)}function f(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function wse(e,t,n){let i=0;return a;function a(o){return(o===87||o===119)&&i<3?(i++,e.consume(o),a):o===46&&i===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function Sse(e,t,n){let i,a,s;return o;function o(u){return u===46||u===95?e.check(GU,c,l)(u):u===null||Tr(u)||Af(u)||u!==45&&oN(u)?c(u):(s=!0,e.consume(u),o)}function l(u){return u===95?i=!0:(a=i,i=void 0),e.consume(u),o}function c(u){return a||i||!s?n(u):t(u)}}function Nse(e,t){let n=0,i=0;return a;function a(o){return o===40?(n++,e.consume(o),a):o===41&&i<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(GU,t,s)(o):o===null||Tr(o)||Af(o)?t(o):(e.consume(o),a)}function s(o){return o===41&&i++,e.consume(o),a}}function _se(e,t,n){return i;function i(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),i):l===38?(e.consume(l),s):l===93?(e.consume(l),a):l===60||l===null||Tr(l)||Af(l)?t(l):n(l)}function a(l){return l===null||l===40||l===91||Tr(l)||Af(l)?t(l):i(l)}function s(l){return Ma(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),i):Ma(l)?(e.consume(l),o):n(l)}}function Cse(e,t,n){return i;function i(s){return e.consume(s),a}function a(s){return da(s)?n(s):t(s)}}function YU(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Tr(e)}function QU(e){return!Ma(e)}function XU(e){return!(e===47||oP(e))}function oP(e){return e===43||e===45||e===46||e===95||da(e)}function UD(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Tse={tokenize:Ise,partial:!0};function Ase(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Ose,continuation:{tokenize:Dse},exit:Mse}},text:{91:{name:"gfmFootnoteCall",tokenize:Pse},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Ese,resolveTo:kse}}}}function Ese(e,t,n){const i=this;let a=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o;for(;a--;){const c=i.events[a][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=Lo(i.sliceSerialize({start:o.end,end:i.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function kse(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[e[n+1],e[n+2],["enter",i,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(n,e.length-n+1,...l),e}function Pse(e,t,n){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,o;return l;function l(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(p){if(s>999||p===93&&!o||p===null||p===91||Tr(p))return n(p);if(p===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return a.includes(Lo(i.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return Tr(p)||(o=!0),s++,e.consume(p),p===92?f:u}function f(p){return p===91||p===92||p===93?(e.consume(p),s++,u):u(p)}}function Ose(e,t,n){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(v){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(v),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(v){return v===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(v),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(v)}function f(v){if(o>999||v===93&&!l||v===null||v===91||Tr(v))return n(v);if(v===93){e.exit("chunkString");const j=e.exit("gfmFootnoteDefinitionLabelString");return s=Lo(i.sliceSerialize(j)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(v),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return Tr(v)||(l=!0),o++,e.consume(v),v===92?p:f}function p(v){return v===91||v===92||v===93?(e.consume(v),o++,f):f(v)}function g(v){return v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),a.includes(s)||a.push(s),zn(e,x,"gfmFootnoteDefinitionWhitespace")):n(v)}function x(v){return t(v)}}function Dse(e,t,n){return e.check(Gb,t,e.attempt(Tse,t,n))}function Mse(e){e.exit("gfmFootnoteDefinition")}function Ise(e,t,n){const i=this;return zn(e,a,"gfmFootnoteDefinitionIndent",5);function a(s){const o=i.events[i.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function Rse(e){let n=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:a};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function a(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},p={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},g=[["enter",f,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",p,l]],x=l.parser.constructs.insideSpan.null;x&&Ps(g,g.length,0,lN(x,o.slice(u+1,c),l)),Ps(g,g.length,0,[["exit",p,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),Ps(o,u-1,c-u+3,g),c=u+g.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const u=this.previous,f=this.events;let p=0;return g;function g(v){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(v):(o.enter("strikethroughSequenceTemporary"),x(v))}function x(v){const j=hg(u);if(v===126)return p>1?c(v):(o.consume(v),p++,x);if(p<2&&!n)return c(v);const w=o.exit("strikethroughSequenceTemporary"),_=hg(v);return w._open=!_||_===2&&!!j,w._close=!j||j===2&&!!_,l(v)}}}class Lse{constructor(){this.map=[]}add(t,n,i){Fse(this,t,n,i)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];i.push(t.slice()),t.length=0;let a=i.pop();for(;a;){for(const s of a)t.push(s);a=i.pop()}this.map.length=0}}function Fse(e,t,n,i){let a=0;if(!(n===0&&i.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...i);return}a+=1}e.map.push([t,n,i])}}function $se(e,t){let n=!1;const i=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&i.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return i}function Bse(){return{flow:{null:{name:"table",tokenize:zse,resolveAll:qse}}}}function zse(e,t,n){const i=this;let a=0,s=0,o;return l;function l($){let L=i.events.length-1;for(;L>-1;){const te=i.events[L][1].type;if(te==="lineEnding"||te==="linePrefix")L--;else break}const V=L>-1?i.events[L][1].type:null,H=V==="tableHead"||V==="tableRow"?P:c;return H===P&&i.parser.lazy[i.now().line]?n($):H($)}function c($){return e.enter("tableHead"),e.enter("tableRow"),u($)}function u($){return $===124||(o=!0,s+=1),f($)}function f($){return $===null?n($):Kt($)?s>1?(s=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),x):n($):On($)?zn(e,f,"whitespace")($):(s+=1,o&&(o=!1,a+=1),$===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),o=!0,f):(e.enter("data"),p($)))}function p($){return $===null||$===124||Tr($)?(e.exit("data"),f($)):(e.consume($),$===92?g:p)}function g($){return $===92||$===124?(e.consume($),p):p($)}function x($){return i.interrupt=!1,i.parser.lazy[i.now().line]?n($):(e.enter("tableDelimiterRow"),o=!1,On($)?zn(e,v,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):v($))}function v($){return $===45||$===58?w($):$===124?(o=!0,e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),j):A($)}function j($){return On($)?zn(e,w,"whitespace")($):w($)}function w($){return $===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),_):$===45?(s+=1,_($)):$===null||Kt($)?O($):A($)}function _($){return $===45?(e.enter("tableDelimiterFiller"),T($)):A($)}function T($){return $===45?(e.consume($),T):$===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),C):(e.exit("tableDelimiterFiller"),C($))}function C($){return On($)?zn(e,O,"whitespace")($):O($)}function O($){return $===124?v($):$===null||Kt($)?!o||a!==s?A($):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t($)):A($)}function A($){return n($)}function P($){return e.enter("tableRow"),I($)}function I($){return $===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),I):$===null||Kt($)?(e.exit("tableRow"),t($)):On($)?zn(e,I,"whitespace")($):(e.enter("data"),F($))}function F($){return $===null||$===124||Tr($)?(e.exit("data"),I($)):(e.consume($),$===92?B:F)}function B($){return $===92||$===124?(e.consume($),F):F($)}}function qse(e,t){let n=-1,i=!0,a=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,f,p;const g=new Lse;for(;++n<e.length;){const x=e[n],v=x[1];x[0]==="enter"?v.type==="tableHead"?(l=!1,c!==0&&(i4(g,t,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},g.add(n,0,[["enter",u,t]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(i=!0,p=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},g.add(n,0,[["enter",f,t]])),a=v.type==="tableDelimiterRow"?2:f?3:1):a&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(i=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],p=Mj(g,t,s,a,void 0,p),s=[0,0,0,0]),o[2]=n)):v.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(o[0]=o[1],p=Mj(g,t,s,a,void 0,p)),s=o,o=[s[1],n,0,0])):v.type==="tableHead"?(l=!0,c=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],p=Mj(g,t,s,a,n,p)):o[1]!==0&&(p=Mj(g,t,o,a,n,p)),a=0):a&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&i4(g,t,c,u,f),g.consume(t.events),n=-1;++n<t.events.length;){const x=t.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=$se(t.events,n))}return e}function Mj(e,t,n,i,a,s){const o=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Im(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=Im(t.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=Im(t.events,n[2]),f=Im(t.events,n[3]),p={type:l,start:Object.assign({},u),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",p,t]]),i!==2){const g=t.events[n[2]],x=t.events[n[3]];if(g[1].end=Object.assign({},x[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,j=n[3]-n[2]-1;e.add(v,j,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return a!==void 0&&(s.end=Object.assign({},Im(t.events,a)),e.add(a,0,[["exit",s,t]]),s=void 0),s}function i4(e,t,n,i,a){const s=[],o=Im(t.events,n);a&&(a.end=Object.assign({},o),s.push(["exit",a,t])),i.end=Object.assign({},o),s.push(["exit",i,t]),e.add(n+1,0,s)}function Im(e,t){const n=e[t],i=n[0]==="enter"?"start":"end";return n[1][i]}const Use={name:"tasklistCheck",tokenize:Hse};function Vse(){return{text:{91:Use}}}function Hse(e,t,n){const i=this;return a;function a(c){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return Tr(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return Kt(c)?t(c):On(c)?e.check({tokenize:Gse},t,n)(c):n(c)}}function Gse(e,t,n){return zn(e,i,"whitespace");function i(a){return a===null?n(a):t(a)}}function Wse(e){return lU([xse(),Ase(),Rse(e),Bse(),Vse()])}const Kse={};function kf(e){const t=this,n=e||Kse,i=t.data(),a=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),o=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);a.push(Wse(n)),s.push(pse()),o.push(mse(n))}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Yse,Qse;function Xse(){return{geminiUrl:Yse,vertexUrl:Qse}}function Jse(e,t,n){var i,a,s;if(!(!((i=e.httpOptions)===null||i===void 0)&&i.baseUrl)){const o=Xse();return e.vertexai?(a=o.vertexUrl)!==null&&a!==void 0?a:t:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return e.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kb{}function on(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,a)=>{if(Object.prototype.hasOwnProperty.call(t,a)){const s=t[a];return s!=null?String(s):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function D(e,t,n){for(let s=0;s<t.length-1;s++){const o=t[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in e))if(Array.isArray(n))e[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(e[l])){const c=e[l];if(Array.isArray(n))for(let u=0;u<c.length;u++){const f=c[u];D(f,t.slice(s+1),n[u])}else for(const u of c)D(u,t.slice(s+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in e||(e[l]=[{}]);const c=e[l];D(c[0],t.slice(s+1),n);return}(!e[o]||typeof e[o]!="object")&&(e[o]={}),e=e[o]}const i=t[t.length-1],a=e[i];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else e[i]=n}function k(e,t){try{if(t.length===1&&t[0]==="_self")return e;for(let n=0;n<t.length;n++){if(typeof e!="object"||e===null)return;const i=t[n];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in e){const s=e[a];return Array.isArray(s)?s.map(o=>k(o,t.slice(n+1))):void 0}else return}else e=e[i]}return e}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hr(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function JU(e,t){const n=Hr(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function ZU(e,t){return Array.isArray(t)?t.map(n=>Fw(e,n)):[Fw(e,t)]}function Fw(e,t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Zse(e,t){const n=Fw(e,t);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function eoe(e,t){const n=Fw(e,t);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function a4(e,t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function e9(e,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(n=>a4(e,n)):[a4(e,t)]}function lP(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function s4(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function o4(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function as(e,t){if(t==null)throw new Error("ContentUnion is required");return lP(t)?t:{role:"user",parts:e9(e,t)}}function t9(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=as(e,n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=as(e,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>as(e,n)):[as(e,t)]}function jd(e,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(s4(t)||o4(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[as(e,t)]}const n=[],i=[],a=lP(t[0]);for(const s of t){const o=lP(s);if(o!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)n.push(s);else{if(s4(s)||o4(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(s)}}return a||n.push({role:"user",parts:e9(e,i)}),n}function n9(e,t){return t}function r9(e,t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function hN(e,t){return t}function fN(e,t){if(!Array.isArray(t))throw new Error("tool is required and must be an array of Tools");return t}function toe(e,t,n,i=1){const a=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:a?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:a?`${n}/${t}`:t}function wd(e,t){if(typeof t!="string")throw new Error("name must be a string");return toe(e,t,"cachedContents")}function i9(e,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Sd(e,t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function noe(e){return e!=null&&typeof e=="object"&&"name"in e}function roe(e){return e!=null&&typeof e=="object"&&"video"in e}function ioe(e){return e!=null&&typeof e=="object"&&"uri"in e}function a9(e,t){var n;let i;if(noe(t)&&(i=t.name),!(ioe(t)&&(i=t.uri,i===void 0))&&!(roe(t)&&(i=(n=t.video)===null||n===void 0?void 0:n.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const s=i.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${i}`);i=s[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function s9(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function o9(e,t){for(const n of["models","tunedModels","publisherModels"])if(aoe(t,n))return t[n];return[]}function aoe(e,t){return e!==null&&typeof e=="object"&&t in e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function soe(e,t){const n={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=k(t,["data"]);i!=null&&D(n,["data"],i);const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function ooe(e,t){const n={};if(k(t,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=k(t,["thought"]);i!=null&&D(n,["thought"],i);const a=k(t,["inlineData"]);a!=null&&D(n,["inlineData"],soe(e,a));const s=k(t,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=k(t,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=k(t,["fileData"]);l!=null&&D(n,["fileData"],l);const c=k(t,["functionCall"]);c!=null&&D(n,["functionCall"],c);const u=k(t,["functionResponse"]);u!=null&&D(n,["functionResponse"],u);const f=k(t,["text"]);return f!=null&&D(n,["text"],f),n}function l4(e,t){const n={},i=k(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>ooe(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function loe(){return{}}function coe(e,t){const n={},i=k(t,["mode"]);i!=null&&D(n,["mode"],i);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function uoe(e,t){const n={},i=k(t,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],coe(e,i)),n}function doe(e,t){const n={};if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");k(t,["googleSearch"])!=null&&D(n,["googleSearch"],loe());const a=k(t,["googleSearchRetrieval"]);if(a!=null&&D(n,["googleSearchRetrieval"],uoe(e,a)),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(k(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=k(t,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=k(t,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function hoe(e,t){const n={},i=k(t,["mode"]);i!=null&&D(n,["mode"],i);const a=k(t,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function foe(e,t){const n={},i=k(t,["functionCallingConfig"]);if(i!=null&&D(n,["functionCallingConfig"],hoe(e,i)),k(t,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function poe(e,t,n){const i={},a=k(t,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=k(t,["expireTime"]);n!==void 0&&s!=null&&D(n,["expireTime"],s);const o=k(t,["displayName"]);n!==void 0&&o!=null&&D(n,["displayName"],o);const l=k(t,["contents"]);if(n!==void 0&&l!=null){let p=jd(e,l);Array.isArray(p)&&(p=p.map(g=>l4(e,g))),D(n,["contents"],p)}const c=k(t,["systemInstruction"]);n!==void 0&&c!=null&&D(n,["systemInstruction"],l4(e,as(e,c)));const u=k(t,["tools"]);if(n!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>doe(e,g))),D(n,["tools"],p)}const f=k(t,["toolConfig"]);return n!==void 0&&f!=null&&D(n,["toolConfig"],foe(e,f)),i}function moe(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["model"],JU(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],poe(e,a,n)),n}function goe(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["_url","name"],wd(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function yoe(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["_url","name"],wd(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function xoe(e,t,n){const i={},a=k(t,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=k(t,["expireTime"]);return n!==void 0&&s!=null&&D(n,["expireTime"],s),i}function voe(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["_url","name"],wd(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],xoe(e,a,n)),n}function boe(e,t,n){const i={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),i}function joe(e,t){const n={},i=k(t,["config"]);return i!=null&&D(n,["config"],boe(e,i,n)),n}function woe(e,t){const n={},i=k(t,["displayName"]);i!=null&&D(n,["displayName"],i);const a=k(t,["data"]);a!=null&&D(n,["data"],a);const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Soe(e,t){const n={},i=k(t,["videoMetadata"]);i!=null&&D(n,["videoMetadata"],i);const a=k(t,["thought"]);a!=null&&D(n,["thought"],a);const s=k(t,["inlineData"]);s!=null&&D(n,["inlineData"],woe(e,s));const o=k(t,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=k(t,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=k(t,["fileData"]);c!=null&&D(n,["fileData"],c);const u=k(t,["functionCall"]);u!=null&&D(n,["functionCall"],u);const f=k(t,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=k(t,["text"]);return p!=null&&D(n,["text"],p),n}function c4(e,t){const n={},i=k(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Soe(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function Noe(){return{}}function _oe(e,t){const n={},i=k(t,["mode"]);i!=null&&D(n,["mode"],i);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function Coe(e,t){const n={},i=k(t,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],_oe(e,i)),n}function Toe(){return{}}function Aoe(e,t){const n={},i=k(t,["apiKeyString"]);return i!=null&&D(n,["apiKeyString"],i),n}function Eoe(e,t){const n={},i=k(t,["apiKeyConfig"]);i!=null&&D(n,["apiKeyConfig"],Aoe(e,i));const a=k(t,["authType"]);a!=null&&D(n,["authType"],a);const s=k(t,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=k(t,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=k(t,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=k(t,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function koe(e,t){const n={},i=k(t,["authConfig"]);return i!=null&&D(n,["authConfig"],Eoe(e,i)),n}function Poe(e,t){const n={},i=k(t,["retrieval"]);i!=null&&D(n,["retrieval"],i),k(t,["googleSearch"])!=null&&D(n,["googleSearch"],Noe());const s=k(t,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],Coe(e,s)),k(t,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],Toe());const l=k(t,["googleMaps"]);l!=null&&D(n,["googleMaps"],koe(e,l));const c=k(t,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const u=k(t,["functionDeclarations"]);return u!=null&&D(n,["functionDeclarations"],u),n}function Ooe(e,t){const n={},i=k(t,["mode"]);i!=null&&D(n,["mode"],i);const a=k(t,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function Doe(e,t){const n={},i=k(t,["latitude"]);i!=null&&D(n,["latitude"],i);const a=k(t,["longitude"]);return a!=null&&D(n,["longitude"],a),n}function Moe(e,t){const n={},i=k(t,["latLng"]);return i!=null&&D(n,["latLng"],Doe(e,i)),n}function Ioe(e,t){const n={},i=k(t,["functionCallingConfig"]);i!=null&&D(n,["functionCallingConfig"],Ooe(e,i));const a=k(t,["retrievalConfig"]);return a!=null&&D(n,["retrievalConfig"],Moe(e,a)),n}function Roe(e,t,n){const i={},a=k(t,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=k(t,["expireTime"]);n!==void 0&&s!=null&&D(n,["expireTime"],s);const o=k(t,["displayName"]);n!==void 0&&o!=null&&D(n,["displayName"],o);const l=k(t,["contents"]);if(n!==void 0&&l!=null){let p=jd(e,l);Array.isArray(p)&&(p=p.map(g=>c4(e,g))),D(n,["contents"],p)}const c=k(t,["systemInstruction"]);n!==void 0&&c!=null&&D(n,["systemInstruction"],c4(e,as(e,c)));const u=k(t,["tools"]);if(n!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>Poe(e,g))),D(n,["tools"],p)}const f=k(t,["toolConfig"]);return n!==void 0&&f!=null&&D(n,["toolConfig"],Ioe(e,f)),i}function Loe(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["model"],JU(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],Roe(e,a,n)),n}function Foe(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["_url","name"],wd(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function $oe(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["_url","name"],wd(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Boe(e,t,n){const i={},a=k(t,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=k(t,["expireTime"]);return n!==void 0&&s!=null&&D(n,["expireTime"],s),i}function zoe(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["_url","name"],wd(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],Boe(e,a,n)),n}function qoe(e,t,n){const i={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),i}function Uoe(e,t){const n={},i=k(t,["config"]);return i!=null&&D(n,["config"],qoe(e,i,n)),n}function mw(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["model"]);s!=null&&D(n,["model"],s);const o=k(t,["createTime"]);o!=null&&D(n,["createTime"],o);const l=k(t,["updateTime"]);l!=null&&D(n,["updateTime"],l);const c=k(t,["expireTime"]);c!=null&&D(n,["expireTime"],c);const u=k(t,["usageMetadata"]);return u!=null&&D(n,["usageMetadata"],u),n}function Voe(){return{}}function Hoe(e,t){const n={},i=k(t,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=k(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>mw(e,o))),D(n,["cachedContents"],s)}return n}function gw(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["model"]);s!=null&&D(n,["model"],s);const o=k(t,["createTime"]);o!=null&&D(n,["createTime"],o);const l=k(t,["updateTime"]);l!=null&&D(n,["updateTime"],l);const c=k(t,["expireTime"]);c!=null&&D(n,["expireTime"],c);const u=k(t,["usageMetadata"]);return u!=null&&D(n,["usageMetadata"],u),n}function Goe(){return{}}function Woe(e,t){const n={},i=k(t,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=k(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>gw(e,o))),D(n,["cachedContents"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fg;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(fg||(fg={}));class pN{constructor(t,n,i,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,a)}init(t,n,i){var a,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};i?typeof i=="object"?o=Object.assign({},i):o=i:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(a=o.config)===null||a===void 0?void 0:a.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var u4;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(u4||(u4={}));var d4;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(d4||(d4={}));var h4;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(h4||(h4={}));var f4;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(f4||(f4={}));var p4;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(p4||(p4={}));var m4;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(m4||(m4={}));var g4;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(g4||(g4={}));var pg;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT"})(pg||(pg={}));var y4;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY"})(y4||(y4={}));var x4;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(x4||(x4={}));var v4;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(v4||(v4={}));var b4;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(b4||(b4={}));var j4;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(j4||(j4={}));var gd;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(gd||(gd={}));var w4;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(w4||(w4={}));var cP;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cP||(cP={}));var S4;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(S4||(S4={}));var N4;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(N4||(N4={}));var _4;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(_4||(_4={}));var C4;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(C4||(C4={}));var T4;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(T4||(T4={}));var A4;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(A4||(A4={}));var E4;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi"})(E4||(E4={}));var k4;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(k4||(k4={}));var P4;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(P4||(P4={}));var O4;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(O4||(O4={}));var D4;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(D4||(D4={}));var M4;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(M4||(M4={}));var I4;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(I4||(I4={}));var R4;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(R4||(R4={}));var L4;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(L4||(L4={}));var F4;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(F4||(F4={}));var $4;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})($4||($4={}));var B4;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(B4||(B4={}));class Ij{get text(){var t,n,i,a,s,o,l,c;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const p=[];for(const g of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,v]of Object.entries(g))x!=="text"&&x!=="thought"&&(v!==null||v!==void 0)&&p.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,u+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var t,n,i,a,s,o,l,c;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const p of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(p))g!=="inlineData"&&(x!==null||x!==void 0)&&f.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var t,n,i,a,s,o,l,c;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var t,n,i,a,s,o,l,c,u;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var t,n,i,a,s,o,l,c,u;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class z4{}class q4{}class Koe{}class Yoe{}class U4{}class V4{}class H4{}class Qoe{}class G4{}class W4{}class K4{}class Xoe{}class uP{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Joe{}class Zoe{}class ele{get text(){var t,n,i;let a="",s=!1;const o=[];for(const l of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,u]of Object.entries(l))c!=="text"&&c!=="thought"&&u!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,a+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?a:void 0}get data(){var t,n,i;let a="";const s=[];for(const o of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&s.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(a+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tle extends Kb{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new pN(fg.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Loe(this.apiClient,t);return l=on("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>gw(this.apiClient,f))}else{const u=moe(this.apiClient,t);return l=on("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>mw(this.apiClient,f))}}async get(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Foe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>gw(this.apiClient,f))}else{const u=goe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>mw(this.apiClient,f))}}async delete(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=$oe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Goe(),p=new W4;return Object.assign(p,f),p})}else{const u=yoe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Voe(),p=new W4;return Object.assign(p,f),p})}}async update(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=zoe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>gw(this.apiClient,f))}else{const u=voe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>mw(this.apiClient,f))}}async listInternal(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Uoe(this.apiClient,t);return l=on("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Woe(this.apiClient,f),g=new K4;return Object.assign(g,p),g})}else{const u=joe(this.apiClient,t);return l=on("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Hoe(this.apiClient,f),g=new K4;return Object.assign(g,p),g})}}}function Y4(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function la(e){return this instanceof la?(this.v=e,this):new la(e)}function $w(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(x){return function(v){return Promise.resolve(v).then(x,p)}}function l(x,v){i[x]&&(a[x]=function(j){return new Promise(function(w,_){s.push([x,j,w,_])>1||c(x,j)})},v&&(a[x]=v(a[x])))}function c(x,v){try{u(i[x](v))}catch(j){g(s[0][3],j)}}function u(x){x.value instanceof la?Promise.resolve(x.value.v).then(f,p):g(s[0][2],x)}function f(x){c("next",x)}function p(x){c("throw",x)}function g(x,v){x(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function dP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Y4=="function"?Y4(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(o){return new Promise(function(l,c){o=e[s](o),a(l,c,o.done,o.value)})}}function a(s,o,l,c){Promise.resolve(c).then(function(u){s({value:u,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nle(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:l9(n)}function l9(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0||t.text!==void 0&&t.text==="")return!1;return!0}function rle(e){if(e.length!==0){if(e[0].role!=="user")throw new Error("History must start with a user turn.");for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function ile(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0,a=e[0];for(;i<n;)if(e[i].role==="user")a=e[i],i++;else{const s=[];let o=!0;for(;i<n&&e[i].role==="model";)s.push(e[i]),o&&!l9(e[i])&&(o=!1),i++;o&&(t.push(a),t.push(...s))}return t}class ale{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new sle(this.apiClient,this.modelsModule,t.model,t.config,t.history)}}class sle{constructor(t,n,i,a={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=a,this.history=s,this.sendPromise=Promise.resolve(),rle(s)}async sendMessage(t){var n;await this.sendPromise;const i=as(this.apiClient,t.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o;const c=(o=(s=(await a).candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=c?[c]:[];this.recordHistory(i,u)})(),await this.sendPromise,a}async sendMessageStream(t){var n;await this.sendPromise;const i=as(this.apiClient,t.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const s=await a;return this.processStreamResponse(s,i)}getHistory(t=!1){return t?ile(this.history):this.history}processStreamResponse(t,n){var i,a;return $w(this,arguments,function*(){var o,l,c,u;const f=[];try{for(var p=!0,g=dP(t),x;x=yield la(g.next()),o=x.done,!o;p=!0){u=x.value,p=!1;const v=u;if(nle(v)){const j=(a=(i=v.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content;j!==void 0&&f.push(j)}yield yield la(v)}}catch(v){l={error:v}}finally{try{!p&&!o&&(c=g.return)&&(yield la(c.call(g)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(t,n){let i=[];n.length>0&&n.every(a=>a.role==="model")?i=n:i.push({role:"model",parts:[]}),this.history.push(t),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ole(e,t,n){const i={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),i}function lle(e,t){const n={},i=k(t,["config"]);return i!=null&&D(n,["config"],ole(e,i,n)),n}function cle(e,t){const n={},i=k(t,["details"]);i!=null&&D(n,["details"],i);const a=k(t,["message"]);a!=null&&D(n,["message"],a);const s=k(t,["code"]);return s!=null&&D(n,["code"],s),n}function ule(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["mimeType"]);s!=null&&D(n,["mimeType"],s);const o=k(t,["sizeBytes"]);o!=null&&D(n,["sizeBytes"],o);const l=k(t,["createTime"]);l!=null&&D(n,["createTime"],l);const c=k(t,["expirationTime"]);c!=null&&D(n,["expirationTime"],c);const u=k(t,["updateTime"]);u!=null&&D(n,["updateTime"],u);const f=k(t,["sha256Hash"]);f!=null&&D(n,["sha256Hash"],f);const p=k(t,["uri"]);p!=null&&D(n,["uri"],p);const g=k(t,["downloadUri"]);g!=null&&D(n,["downloadUri"],g);const x=k(t,["state"]);x!=null&&D(n,["state"],x);const v=k(t,["source"]);v!=null&&D(n,["source"],v);const j=k(t,["videoMetadata"]);j!=null&&D(n,["videoMetadata"],j);const w=k(t,["error"]);return w!=null&&D(n,["error"],cle(e,w)),n}function dle(e,t){const n={},i=k(t,["file"]);i!=null&&D(n,["file"],ule(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function hle(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["_url","file"],a9(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function fle(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["_url","file"],a9(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function ple(e,t){const n={},i=k(t,["details"]);i!=null&&D(n,["details"],i);const a=k(t,["message"]);a!=null&&D(n,["message"],a);const s=k(t,["code"]);return s!=null&&D(n,["code"],s),n}function hP(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["mimeType"]);s!=null&&D(n,["mimeType"],s);const o=k(t,["sizeBytes"]);o!=null&&D(n,["sizeBytes"],o);const l=k(t,["createTime"]);l!=null&&D(n,["createTime"],l);const c=k(t,["expirationTime"]);c!=null&&D(n,["expirationTime"],c);const u=k(t,["updateTime"]);u!=null&&D(n,["updateTime"],u);const f=k(t,["sha256Hash"]);f!=null&&D(n,["sha256Hash"],f);const p=k(t,["uri"]);p!=null&&D(n,["uri"],p);const g=k(t,["downloadUri"]);g!=null&&D(n,["downloadUri"],g);const x=k(t,["state"]);x!=null&&D(n,["state"],x);const v=k(t,["source"]);v!=null&&D(n,["source"],v);const j=k(t,["videoMetadata"]);j!=null&&D(n,["videoMetadata"],j);const w=k(t,["error"]);return w!=null&&D(n,["error"],ple(e,w)),n}function mle(e,t){const n={},i=k(t,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=k(t,["files"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>hP(e,o))),D(n,["files"],s)}return n}function gle(){return{}}function yle(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xle extends Kb{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new pN(fg.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>hP(this.apiClient,n))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=lle(this.apiClient,t);return s=on("files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const u=mle(this.apiClient,c),f=new Xoe;return Object.assign(f,u),f})}}async createInternal(t){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=dle(this.apiClient,t);return s=on("upload/v1beta/files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(()=>{const c=gle(),u=new Joe;return Object.assign(u,c),u})}}async get(t){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hle(this.apiClient,t);return s=on("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>hP(this.apiClient,c))}}async delete(t){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=fle(this.apiClient,t);return s=on("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(()=>{const c=yle(),u=new Zoe;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vle(e,t){const n={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=k(t,["data"]);i!=null&&D(n,["data"],i);const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function ble(e,t){const n={},i=k(t,["displayName"]);i!=null&&D(n,["displayName"],i);const a=k(t,["data"]);a!=null&&D(n,["data"],a);const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function jle(e,t){const n={};if(k(t,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=k(t,["thought"]);i!=null&&D(n,["thought"],i);const a=k(t,["inlineData"]);a!=null&&D(n,["inlineData"],vle(e,a));const s=k(t,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=k(t,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=k(t,["fileData"]);l!=null&&D(n,["fileData"],l);const c=k(t,["functionCall"]);c!=null&&D(n,["functionCall"],c);const u=k(t,["functionResponse"]);u!=null&&D(n,["functionResponse"],u);const f=k(t,["text"]);return f!=null&&D(n,["text"],f),n}function wle(e,t){const n={},i=k(t,["videoMetadata"]);i!=null&&D(n,["videoMetadata"],i);const a=k(t,["thought"]);a!=null&&D(n,["thought"],a);const s=k(t,["inlineData"]);s!=null&&D(n,["inlineData"],ble(e,s));const o=k(t,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=k(t,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=k(t,["fileData"]);c!=null&&D(n,["fileData"],c);const u=k(t,["functionCall"]);u!=null&&D(n,["functionCall"],u);const f=k(t,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=k(t,["text"]);return p!=null&&D(n,["text"],p),n}function Sle(e,t){const n={},i=k(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>jle(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function Nle(e,t){const n={},i=k(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>wle(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function _le(){return{}}function Cle(){return{}}function Tle(e,t){const n={},i=k(t,["mode"]);i!=null&&D(n,["mode"],i);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function Ale(e,t){const n={},i=k(t,["mode"]);i!=null&&D(n,["mode"],i);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function Ele(e,t){const n={},i=k(t,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],Tle(e,i)),n}function kle(e,t){const n={},i=k(t,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],Ale(e,i)),n}function Ple(){return{}}function Ole(e,t){const n={},i=k(t,["apiKeyString"]);return i!=null&&D(n,["apiKeyString"],i),n}function Dle(e,t){const n={},i=k(t,["apiKeyConfig"]);i!=null&&D(n,["apiKeyConfig"],Ole(e,i));const a=k(t,["authType"]);a!=null&&D(n,["authType"],a);const s=k(t,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=k(t,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=k(t,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=k(t,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function Mle(e,t){const n={},i=k(t,["authConfig"]);return i!=null&&D(n,["authConfig"],Dle(e,i)),n}function Ile(e,t){const n={};if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");k(t,["googleSearch"])!=null&&D(n,["googleSearch"],_le());const a=k(t,["googleSearchRetrieval"]);if(a!=null&&D(n,["googleSearchRetrieval"],Ele(e,a)),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(k(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=k(t,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=k(t,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function Rle(e,t){const n={},i=k(t,["retrieval"]);i!=null&&D(n,["retrieval"],i),k(t,["googleSearch"])!=null&&D(n,["googleSearch"],Cle());const s=k(t,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],kle(e,s)),k(t,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],Ple());const l=k(t,["googleMaps"]);l!=null&&D(n,["googleMaps"],Mle(e,l));const c=k(t,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const u=k(t,["functionDeclarations"]);return u!=null&&D(n,["functionDeclarations"],u),n}function Lle(e,t){const n={},i=k(t,["handle"]);if(i!=null&&D(n,["handle"],i),k(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function Fle(e,t){const n={},i=k(t,["handle"]);i!=null&&D(n,["handle"],i);const a=k(t,["transparent"]);return a!=null&&D(n,["transparent"],a),n}function Q4(){return{}}function X4(){return{}}function $le(e,t){const n={},i=k(t,["disabled"]);i!=null&&D(n,["disabled"],i);const a=k(t,["startOfSpeechSensitivity"]);a!=null&&D(n,["startOfSpeechSensitivity"],a);const s=k(t,["endOfSpeechSensitivity"]);s!=null&&D(n,["endOfSpeechSensitivity"],s);const o=k(t,["prefixPaddingMs"]);o!=null&&D(n,["prefixPaddingMs"],o);const l=k(t,["silenceDurationMs"]);return l!=null&&D(n,["silenceDurationMs"],l),n}function Ble(e,t){const n={},i=k(t,["disabled"]);i!=null&&D(n,["disabled"],i);const a=k(t,["startOfSpeechSensitivity"]);a!=null&&D(n,["startOfSpeechSensitivity"],a);const s=k(t,["endOfSpeechSensitivity"]);s!=null&&D(n,["endOfSpeechSensitivity"],s);const o=k(t,["prefixPaddingMs"]);o!=null&&D(n,["prefixPaddingMs"],o);const l=k(t,["silenceDurationMs"]);return l!=null&&D(n,["silenceDurationMs"],l),n}function zle(e,t){const n={},i=k(t,["automaticActivityDetection"]);i!=null&&D(n,["automaticActivityDetection"],$le(e,i));const a=k(t,["activityHandling"]);a!=null&&D(n,["activityHandling"],a);const s=k(t,["turnCoverage"]);return s!=null&&D(n,["turnCoverage"],s),n}function qle(e,t){const n={},i=k(t,["automaticActivityDetection"]);i!=null&&D(n,["automaticActivityDetection"],Ble(e,i));const a=k(t,["activityHandling"]);a!=null&&D(n,["activityHandling"],a);const s=k(t,["turnCoverage"]);return s!=null&&D(n,["turnCoverage"],s),n}function Ule(e,t){const n={},i=k(t,["targetTokens"]);return i!=null&&D(n,["targetTokens"],i),n}function Vle(e,t){const n={},i=k(t,["targetTokens"]);return i!=null&&D(n,["targetTokens"],i),n}function Hle(e,t){const n={},i=k(t,["triggerTokens"]);i!=null&&D(n,["triggerTokens"],i);const a=k(t,["slidingWindow"]);return a!=null&&D(n,["slidingWindow"],Ule(e,a)),n}function Gle(e,t){const n={},i=k(t,["triggerTokens"]);i!=null&&D(n,["triggerTokens"],i);const a=k(t,["slidingWindow"]);return a!=null&&D(n,["slidingWindow"],Vle(e,a)),n}function Wle(e,t,n){const i={},a=k(t,["generationConfig"]);n!==void 0&&a!=null&&D(n,["setup","generationConfig"],a);const s=k(t,["responseModalities"]);n!==void 0&&s!=null&&D(n,["setup","generationConfig","responseModalities"],s);const o=k(t,["temperature"]);n!==void 0&&o!=null&&D(n,["setup","generationConfig","temperature"],o);const l=k(t,["topP"]);n!==void 0&&l!=null&&D(n,["setup","generationConfig","topP"],l);const c=k(t,["topK"]);n!==void 0&&c!=null&&D(n,["setup","generationConfig","topK"],c);const u=k(t,["maxOutputTokens"]);n!==void 0&&u!=null&&D(n,["setup","generationConfig","maxOutputTokens"],u);const f=k(t,["mediaResolution"]);n!==void 0&&f!=null&&D(n,["setup","generationConfig","mediaResolution"],f);const p=k(t,["seed"]);n!==void 0&&p!=null&&D(n,["setup","generationConfig","seed"],p);const g=k(t,["speechConfig"]);n!==void 0&&g!=null&&D(n,["setup","generationConfig","speechConfig"],g);const x=k(t,["systemInstruction"]);n!==void 0&&x!=null&&D(n,["setup","systemInstruction"],Sle(e,as(e,x)));const v=k(t,["tools"]);if(n!==void 0&&v!=null){let O=fN(e,v);Array.isArray(O)&&(O=O.map(A=>Ile(e,hN(e,A)))),D(n,["setup","tools"],O)}const j=k(t,["sessionResumption"]);n!==void 0&&j!=null&&D(n,["setup","sessionResumption"],Lle(e,j));const w=k(t,["inputAudioTranscription"]);n!==void 0&&w!=null&&D(n,["setup","inputAudioTranscription"],Q4());const _=k(t,["outputAudioTranscription"]);n!==void 0&&_!=null&&D(n,["setup","outputAudioTranscription"],Q4());const T=k(t,["realtimeInputConfig"]);n!==void 0&&T!=null&&D(n,["setup","realtimeInputConfig"],zle(e,T));const C=k(t,["contextWindowCompression"]);return n!==void 0&&C!=null&&D(n,["setup","contextWindowCompression"],Hle(e,C)),i}function Kle(e,t,n){const i={},a=k(t,["generationConfig"]);n!==void 0&&a!=null&&D(n,["setup","generationConfig"],a);const s=k(t,["responseModalities"]);n!==void 0&&s!=null&&D(n,["setup","generationConfig","responseModalities"],s);const o=k(t,["temperature"]);n!==void 0&&o!=null&&D(n,["setup","generationConfig","temperature"],o);const l=k(t,["topP"]);n!==void 0&&l!=null&&D(n,["setup","generationConfig","topP"],l);const c=k(t,["topK"]);n!==void 0&&c!=null&&D(n,["setup","generationConfig","topK"],c);const u=k(t,["maxOutputTokens"]);n!==void 0&&u!=null&&D(n,["setup","generationConfig","maxOutputTokens"],u);const f=k(t,["mediaResolution"]);n!==void 0&&f!=null&&D(n,["setup","generationConfig","mediaResolution"],f);const p=k(t,["seed"]);n!==void 0&&p!=null&&D(n,["setup","generationConfig","seed"],p);const g=k(t,["speechConfig"]);n!==void 0&&g!=null&&D(n,["setup","generationConfig","speechConfig"],g);const x=k(t,["systemInstruction"]);n!==void 0&&x!=null&&D(n,["setup","systemInstruction"],Nle(e,as(e,x)));const v=k(t,["tools"]);if(n!==void 0&&v!=null){let O=fN(e,v);Array.isArray(O)&&(O=O.map(A=>Rle(e,hN(e,A)))),D(n,["setup","tools"],O)}const j=k(t,["sessionResumption"]);n!==void 0&&j!=null&&D(n,["setup","sessionResumption"],Fle(e,j));const w=k(t,["inputAudioTranscription"]);n!==void 0&&w!=null&&D(n,["setup","inputAudioTranscription"],X4());const _=k(t,["outputAudioTranscription"]);n!==void 0&&_!=null&&D(n,["setup","outputAudioTranscription"],X4());const T=k(t,["realtimeInputConfig"]);n!==void 0&&T!=null&&D(n,["setup","realtimeInputConfig"],qle(e,T));const C=k(t,["contextWindowCompression"]);return n!==void 0&&C!=null&&D(n,["setup","contextWindowCompression"],Gle(e,C)),i}function Yle(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["setup","model"],Hr(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],Wle(e,a,n)),n}function Qle(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["setup","model"],Hr(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],Kle(e,a,n)),n}function Xle(){return{}}function Jle(){return{}}function Zle(){return{}}function ece(){return{}}function tce(e,t){const n={},i=k(t,["media"]);i!=null&&D(n,["mediaChunks"],ZU(e,i));const a=k(t,["audio"]);a!=null&&D(n,["audio"],eoe(e,a));const s=k(t,["audioStreamEnd"]);s!=null&&D(n,["audioStreamEnd"],s);const o=k(t,["video"]);o!=null&&D(n,["video"],Zse(e,o));const l=k(t,["text"]);return l!=null&&D(n,["text"],l),k(t,["activityStart"])!=null&&D(n,["activityStart"],Xle()),k(t,["activityEnd"])!=null&&D(n,["activityEnd"],Zle()),n}function nce(e,t){const n={},i=k(t,["media"]);if(i!=null&&D(n,["mediaChunks"],ZU(e,i)),k(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const a=k(t,["audioStreamEnd"]);if(a!=null&&D(n,["audioStreamEnd"],a),k(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(k(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return k(t,["activityStart"])!=null&&D(n,["activityStart"],Jle()),k(t,["activityEnd"])!=null&&D(n,["activityEnd"],ece()),n}function rce(){return{}}function ice(){return{}}function ace(e,t){const n={},i=k(t,["data"]);i!=null&&D(n,["data"],i);const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function sce(e,t){const n={},i=k(t,["displayName"]);i!=null&&D(n,["displayName"],i);const a=k(t,["data"]);a!=null&&D(n,["data"],a);const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function oce(e,t){const n={},i=k(t,["thought"]);i!=null&&D(n,["thought"],i);const a=k(t,["inlineData"]);a!=null&&D(n,["inlineData"],ace(e,a));const s=k(t,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=k(t,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=k(t,["fileData"]);l!=null&&D(n,["fileData"],l);const c=k(t,["functionCall"]);c!=null&&D(n,["functionCall"],c);const u=k(t,["functionResponse"]);u!=null&&D(n,["functionResponse"],u);const f=k(t,["text"]);return f!=null&&D(n,["text"],f),n}function lce(e,t){const n={},i=k(t,["videoMetadata"]);i!=null&&D(n,["videoMetadata"],i);const a=k(t,["thought"]);a!=null&&D(n,["thought"],a);const s=k(t,["inlineData"]);s!=null&&D(n,["inlineData"],sce(e,s));const o=k(t,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=k(t,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=k(t,["fileData"]);c!=null&&D(n,["fileData"],c);const u=k(t,["functionCall"]);u!=null&&D(n,["functionCall"],u);const f=k(t,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=k(t,["text"]);return p!=null&&D(n,["text"],p),n}function cce(e,t){const n={},i=k(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>oce(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function uce(e,t){const n={},i=k(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>lce(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function J4(e,t){const n={},i=k(t,["text"]);i!=null&&D(n,["text"],i);const a=k(t,["finished"]);return a!=null&&D(n,["finished"],a),n}function Z4(e,t){const n={},i=k(t,["text"]);i!=null&&D(n,["text"],i);const a=k(t,["finished"]);return a!=null&&D(n,["finished"],a),n}function dce(e,t){const n={},i=k(t,["modelTurn"]);i!=null&&D(n,["modelTurn"],cce(e,i));const a=k(t,["turnComplete"]);a!=null&&D(n,["turnComplete"],a);const s=k(t,["interrupted"]);s!=null&&D(n,["interrupted"],s);const o=k(t,["groundingMetadata"]);o!=null&&D(n,["groundingMetadata"],o);const l=k(t,["generationComplete"]);l!=null&&D(n,["generationComplete"],l);const c=k(t,["inputTranscription"]);c!=null&&D(n,["inputTranscription"],J4(e,c));const u=k(t,["outputTranscription"]);return u!=null&&D(n,["outputTranscription"],J4(e,u)),n}function hce(e,t){const n={},i=k(t,["modelTurn"]);i!=null&&D(n,["modelTurn"],uce(e,i));const a=k(t,["turnComplete"]);a!=null&&D(n,["turnComplete"],a);const s=k(t,["interrupted"]);s!=null&&D(n,["interrupted"],s);const o=k(t,["groundingMetadata"]);o!=null&&D(n,["groundingMetadata"],o);const l=k(t,["generationComplete"]);l!=null&&D(n,["generationComplete"],l);const c=k(t,["inputTranscription"]);c!=null&&D(n,["inputTranscription"],Z4(e,c));const u=k(t,["outputTranscription"]);return u!=null&&D(n,["outputTranscription"],Z4(e,u)),n}function fce(e,t){const n={},i=k(t,["id"]);i!=null&&D(n,["id"],i);const a=k(t,["args"]);a!=null&&D(n,["args"],a);const s=k(t,["name"]);return s!=null&&D(n,["name"],s),n}function pce(e,t){const n={},i=k(t,["args"]);i!=null&&D(n,["args"],i);const a=k(t,["name"]);return a!=null&&D(n,["name"],a),n}function mce(e,t){const n={},i=k(t,["functionCalls"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>fce(e,s))),D(n,["functionCalls"],a)}return n}function gce(e,t){const n={},i=k(t,["functionCalls"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>pce(e,s))),D(n,["functionCalls"],a)}return n}function yce(e,t){const n={},i=k(t,["ids"]);return i!=null&&D(n,["ids"],i),n}function xce(e,t){const n={},i=k(t,["ids"]);return i!=null&&D(n,["ids"],i),n}function Rj(e,t){const n={},i=k(t,["modality"]);i!=null&&D(n,["modality"],i);const a=k(t,["tokenCount"]);return a!=null&&D(n,["tokenCount"],a),n}function Lj(e,t){const n={},i=k(t,["modality"]);i!=null&&D(n,["modality"],i);const a=k(t,["tokenCount"]);return a!=null&&D(n,["tokenCount"],a),n}function vce(e,t){const n={},i=k(t,["promptTokenCount"]);i!=null&&D(n,["promptTokenCount"],i);const a=k(t,["cachedContentTokenCount"]);a!=null&&D(n,["cachedContentTokenCount"],a);const s=k(t,["responseTokenCount"]);s!=null&&D(n,["responseTokenCount"],s);const o=k(t,["toolUsePromptTokenCount"]);o!=null&&D(n,["toolUsePromptTokenCount"],o);const l=k(t,["thoughtsTokenCount"]);l!=null&&D(n,["thoughtsTokenCount"],l);const c=k(t,["totalTokenCount"]);c!=null&&D(n,["totalTokenCount"],c);const u=k(t,["promptTokensDetails"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(v=>Rj(e,v))),D(n,["promptTokensDetails"],x)}const f=k(t,["cacheTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(v=>Rj(e,v))),D(n,["cacheTokensDetails"],x)}const p=k(t,["responseTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(v=>Rj(e,v))),D(n,["responseTokensDetails"],x)}const g=k(t,["toolUsePromptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(v=>Rj(e,v))),D(n,["toolUsePromptTokensDetails"],x)}return n}function bce(e,t){const n={},i=k(t,["promptTokenCount"]);i!=null&&D(n,["promptTokenCount"],i);const a=k(t,["cachedContentTokenCount"]);a!=null&&D(n,["cachedContentTokenCount"],a);const s=k(t,["candidatesTokenCount"]);s!=null&&D(n,["responseTokenCount"],s);const o=k(t,["toolUsePromptTokenCount"]);o!=null&&D(n,["toolUsePromptTokenCount"],o);const l=k(t,["thoughtsTokenCount"]);l!=null&&D(n,["thoughtsTokenCount"],l);const c=k(t,["totalTokenCount"]);c!=null&&D(n,["totalTokenCount"],c);const u=k(t,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(j=>Lj(e,j))),D(n,["promptTokensDetails"],v)}const f=k(t,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(j=>Lj(e,j))),D(n,["cacheTokensDetails"],v)}const p=k(t,["candidatesTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(j=>Lj(e,j))),D(n,["responseTokensDetails"],v)}const g=k(t,["toolUsePromptTokensDetails"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(j=>Lj(e,j))),D(n,["toolUsePromptTokensDetails"],v)}const x=k(t,["trafficType"]);return x!=null&&D(n,["trafficType"],x),n}function jce(e,t){const n={},i=k(t,["timeLeft"]);return i!=null&&D(n,["timeLeft"],i),n}function wce(e,t){const n={},i=k(t,["timeLeft"]);return i!=null&&D(n,["timeLeft"],i),n}function Sce(e,t){const n={},i=k(t,["newHandle"]);i!=null&&D(n,["newHandle"],i);const a=k(t,["resumable"]);a!=null&&D(n,["resumable"],a);const s=k(t,["lastConsumedClientMessageIndex"]);return s!=null&&D(n,["lastConsumedClientMessageIndex"],s),n}function Nce(e,t){const n={},i=k(t,["newHandle"]);i!=null&&D(n,["newHandle"],i);const a=k(t,["resumable"]);a!=null&&D(n,["resumable"],a);const s=k(t,["lastConsumedClientMessageIndex"]);return s!=null&&D(n,["lastConsumedClientMessageIndex"],s),n}function _ce(e,t){const n={};k(t,["setupComplete"])!=null&&D(n,["setupComplete"],rce());const a=k(t,["serverContent"]);a!=null&&D(n,["serverContent"],dce(e,a));const s=k(t,["toolCall"]);s!=null&&D(n,["toolCall"],mce(e,s));const o=k(t,["toolCallCancellation"]);o!=null&&D(n,["toolCallCancellation"],yce(e,o));const l=k(t,["usageMetadata"]);l!=null&&D(n,["usageMetadata"],vce(e,l));const c=k(t,["goAway"]);c!=null&&D(n,["goAway"],jce(e,c));const u=k(t,["sessionResumptionUpdate"]);return u!=null&&D(n,["sessionResumptionUpdate"],Sce(e,u)),n}function Cce(e,t){const n={};k(t,["setupComplete"])!=null&&D(n,["setupComplete"],ice());const a=k(t,["serverContent"]);a!=null&&D(n,["serverContent"],hce(e,a));const s=k(t,["toolCall"]);s!=null&&D(n,["toolCall"],gce(e,s));const o=k(t,["toolCallCancellation"]);o!=null&&D(n,["toolCallCancellation"],xce(e,o));const l=k(t,["usageMetadata"]);l!=null&&D(n,["usageMetadata"],bce(e,l));const c=k(t,["goAway"]);c!=null&&D(n,["goAway"],wce(e,c));const u=k(t,["sessionResumptionUpdate"]);return u!=null&&D(n,["sessionResumptionUpdate"],Nce(e,u)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tce(e,t){const n={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=k(t,["data"]);i!=null&&D(n,["data"],i);const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function Ace(e,t){const n={};if(k(t,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=k(t,["thought"]);i!=null&&D(n,["thought"],i);const a=k(t,["inlineData"]);a!=null&&D(n,["inlineData"],Tce(e,a));const s=k(t,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=k(t,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=k(t,["fileData"]);l!=null&&D(n,["fileData"],l);const c=k(t,["functionCall"]);c!=null&&D(n,["functionCall"],c);const u=k(t,["functionResponse"]);u!=null&&D(n,["functionResponse"],u);const f=k(t,["text"]);return f!=null&&D(n,["text"],f),n}function mN(e,t){const n={},i=k(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Ace(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function Ece(e,t){const n={};if(k(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=k(t,["category"]);i!=null&&D(n,["category"],i);const a=k(t,["threshold"]);return a!=null&&D(n,["threshold"],a),n}function kce(){return{}}function Pce(e,t){const n={},i=k(t,["mode"]);i!=null&&D(n,["mode"],i);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function Oce(e,t){const n={},i=k(t,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],Pce(e,i)),n}function Dce(e,t){const n={};if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");k(t,["googleSearch"])!=null&&D(n,["googleSearch"],kce());const a=k(t,["googleSearchRetrieval"]);if(a!=null&&D(n,["googleSearchRetrieval"],Oce(e,a)),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(k(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=k(t,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=k(t,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function Mce(e,t){const n={},i=k(t,["mode"]);i!=null&&D(n,["mode"],i);const a=k(t,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function Ice(e,t){const n={},i=k(t,["functionCallingConfig"]);if(i!=null&&D(n,["functionCallingConfig"],Mce(e,i)),k(t,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function Rce(e,t){const n={},i=k(t,["voiceName"]);return i!=null&&D(n,["voiceName"],i),n}function Lce(e,t){const n={},i=k(t,["prebuiltVoiceConfig"]);return i!=null&&D(n,["prebuiltVoiceConfig"],Rce(e,i)),n}function Fce(e,t){const n={},i=k(t,["voiceConfig"]);i!=null&&D(n,["voiceConfig"],Lce(e,i));const a=k(t,["languageCode"]);return a!=null&&D(n,["languageCode"],a),n}function $ce(e,t){const n={},i=k(t,["includeThoughts"]);i!=null&&D(n,["includeThoughts"],i);const a=k(t,["thinkingBudget"]);return a!=null&&D(n,["thinkingBudget"],a),n}function Bce(e,t,n){const i={},a=k(t,["systemInstruction"]);n!==void 0&&a!=null&&D(n,["systemInstruction"],mN(e,as(e,a)));const s=k(t,["temperature"]);s!=null&&D(i,["temperature"],s);const o=k(t,["topP"]);o!=null&&D(i,["topP"],o);const l=k(t,["topK"]);l!=null&&D(i,["topK"],l);const c=k(t,["candidateCount"]);c!=null&&D(i,["candidateCount"],c);const u=k(t,["maxOutputTokens"]);u!=null&&D(i,["maxOutputTokens"],u);const f=k(t,["stopSequences"]);f!=null&&D(i,["stopSequences"],f);const p=k(t,["responseLogprobs"]);p!=null&&D(i,["responseLogprobs"],p);const g=k(t,["logprobs"]);g!=null&&D(i,["logprobs"],g);const x=k(t,["presencePenalty"]);x!=null&&D(i,["presencePenalty"],x);const v=k(t,["frequencyPenalty"]);v!=null&&D(i,["frequencyPenalty"],v);const j=k(t,["seed"]);j!=null&&D(i,["seed"],j);const w=k(t,["responseMimeType"]);w!=null&&D(i,["responseMimeType"],w);const _=k(t,["responseSchema"]);if(_!=null&&D(i,["responseSchema"],n9(e,_)),k(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(k(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=k(t,["safetySettings"]);if(n!==void 0&&T!=null){let $=T;Array.isArray($)&&($=$.map(L=>Ece(e,L))),D(n,["safetySettings"],$)}const C=k(t,["tools"]);if(n!==void 0&&C!=null){let $=fN(e,C);Array.isArray($)&&($=$.map(L=>Dce(e,hN(e,L)))),D(n,["tools"],$)}const O=k(t,["toolConfig"]);if(n!==void 0&&O!=null&&D(n,["toolConfig"],Ice(e,O)),k(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=k(t,["cachedContent"]);n!==void 0&&A!=null&&D(n,["cachedContent"],wd(e,A));const P=k(t,["responseModalities"]);P!=null&&D(i,["responseModalities"],P);const I=k(t,["mediaResolution"]);I!=null&&D(i,["mediaResolution"],I);const F=k(t,["speechConfig"]);if(F!=null&&D(i,["speechConfig"],Fce(e,r9(e,F))),k(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=k(t,["thinkingConfig"]);return B!=null&&D(i,["thinkingConfig"],$ce(e,B)),i}function e3(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["contents"]);if(a!=null){let o=jd(e,a);Array.isArray(o)&&(o=o.map(l=>mN(e,l))),D(n,["contents"],o)}const s=k(t,["config"]);return s!=null&&D(n,["generationConfig"],Bce(e,s,n)),n}function zce(e,t,n){const i={},a=k(t,["taskType"]);n!==void 0&&a!=null&&D(n,["requests[]","taskType"],a);const s=k(t,["title"]);n!==void 0&&s!=null&&D(n,["requests[]","title"],s);const o=k(t,["outputDimensionality"]);if(n!==void 0&&o!=null&&D(n,["requests[]","outputDimensionality"],o),k(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(k(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function qce(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["contents"]);a!=null&&D(n,["requests[]","content"],t9(e,a));const s=k(t,["config"]);s!=null&&D(n,["config"],zce(e,s,n));const o=k(t,["model"]);return o!==void 0&&D(n,["requests[]","model"],Hr(e,o)),n}function Uce(e,t,n){const i={};if(k(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(k(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=k(t,["numberOfImages"]);n!==void 0&&a!=null&&D(n,["parameters","sampleCount"],a);const s=k(t,["aspectRatio"]);n!==void 0&&s!=null&&D(n,["parameters","aspectRatio"],s);const o=k(t,["guidanceScale"]);if(n!==void 0&&o!=null&&D(n,["parameters","guidanceScale"],o),k(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=k(t,["safetyFilterLevel"]);n!==void 0&&l!=null&&D(n,["parameters","safetySetting"],l);const c=k(t,["personGeneration"]);n!==void 0&&c!=null&&D(n,["parameters","personGeneration"],c);const u=k(t,["includeSafetyAttributes"]);n!==void 0&&u!=null&&D(n,["parameters","includeSafetyAttributes"],u);const f=k(t,["includeRaiReason"]);n!==void 0&&f!=null&&D(n,["parameters","includeRaiReason"],f);const p=k(t,["language"]);n!==void 0&&p!=null&&D(n,["parameters","language"],p);const g=k(t,["outputMimeType"]);n!==void 0&&g!=null&&D(n,["parameters","outputOptions","mimeType"],g);const x=k(t,["outputCompressionQuality"]);if(n!==void 0&&x!=null&&D(n,["parameters","outputOptions","compressionQuality"],x),k(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(k(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function Vce(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=k(t,["config"]);return s!=null&&D(n,["config"],Uce(e,s,n)),n}function Hce(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","name"],Hr(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Gce(e,t,n){const i={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=k(t,["filter"]);n!==void 0&&o!=null&&D(n,["_query","filter"],o);const l=k(t,["queryBase"]);return n!==void 0&&l!=null&&D(n,["_url","models_url"],s9(e,l)),i}function Wce(e,t){const n={},i=k(t,["config"]);return i!=null&&D(n,["config"],Gce(e,i,n)),n}function Kce(e,t,n){const i={},a=k(t,["displayName"]);n!==void 0&&a!=null&&D(n,["displayName"],a);const s=k(t,["description"]);n!==void 0&&s!=null&&D(n,["description"],s);const o=k(t,["defaultCheckpointId"]);return n!==void 0&&o!=null&&D(n,["defaultCheckpointId"],o),i}function Yce(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","name"],Hr(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],Kce(e,a,n)),n}function Qce(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","name"],Hr(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Xce(e,t){const n={};if(k(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(k(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(k(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Jce(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["contents"]);if(a!=null){let o=jd(e,a);Array.isArray(o)&&(o=o.map(l=>mN(e,l))),D(n,["contents"],o)}const s=k(t,["config"]);return s!=null&&D(n,["config"],Xce(e,s)),n}function Zce(e,t){const n={};if(k(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=k(t,["imageBytes"]);i!=null&&D(n,["bytesBase64Encoded"],Sd(e,i));const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function eue(e,t,n){const i={},a=k(t,["numberOfVideos"]);if(n!==void 0&&a!=null&&D(n,["parameters","sampleCount"],a),k(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(k(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=k(t,["durationSeconds"]);if(n!==void 0&&s!=null&&D(n,["parameters","durationSeconds"],s),k(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=k(t,["aspectRatio"]);if(n!==void 0&&o!=null&&D(n,["parameters","aspectRatio"],o),k(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=k(t,["personGeneration"]);if(n!==void 0&&l!=null&&D(n,["parameters","personGeneration"],l),k(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=k(t,["negativePrompt"]);if(n!==void 0&&c!=null&&D(n,["parameters","negativePrompt"],c),k(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function tue(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=k(t,["image"]);s!=null&&D(n,["instances[0]","image"],Zce(e,s));const o=k(t,["config"]);return o!=null&&D(n,["config"],eue(e,o,n)),n}function nue(e,t){const n={},i=k(t,["displayName"]);i!=null&&D(n,["displayName"],i);const a=k(t,["data"]);a!=null&&D(n,["data"],a);const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function rue(e,t){const n={},i=k(t,["videoMetadata"]);i!=null&&D(n,["videoMetadata"],i);const a=k(t,["thought"]);a!=null&&D(n,["thought"],a);const s=k(t,["inlineData"]);s!=null&&D(n,["inlineData"],nue(e,s));const o=k(t,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=k(t,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=k(t,["fileData"]);c!=null&&D(n,["fileData"],c);const u=k(t,["functionCall"]);u!=null&&D(n,["functionCall"],u);const f=k(t,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=k(t,["text"]);return p!=null&&D(n,["text"],p),n}function Kg(e,t){const n={},i=k(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>rue(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function iue(e,t){const n={},i=k(t,["featureSelectionPreference"]);return i!=null&&D(n,["featureSelectionPreference"],i),n}function aue(e,t){const n={},i=k(t,["method"]);i!=null&&D(n,["method"],i);const a=k(t,["category"]);a!=null&&D(n,["category"],a);const s=k(t,["threshold"]);return s!=null&&D(n,["threshold"],s),n}function sue(){return{}}function oue(e,t){const n={},i=k(t,["mode"]);i!=null&&D(n,["mode"],i);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function lue(e,t){const n={},i=k(t,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],oue(e,i)),n}function cue(){return{}}function uue(e,t){const n={},i=k(t,["apiKeyString"]);return i!=null&&D(n,["apiKeyString"],i),n}function due(e,t){const n={},i=k(t,["apiKeyConfig"]);i!=null&&D(n,["apiKeyConfig"],uue(e,i));const a=k(t,["authType"]);a!=null&&D(n,["authType"],a);const s=k(t,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=k(t,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=k(t,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=k(t,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function hue(e,t){const n={},i=k(t,["authConfig"]);return i!=null&&D(n,["authConfig"],due(e,i)),n}function c9(e,t){const n={},i=k(t,["retrieval"]);i!=null&&D(n,["retrieval"],i),k(t,["googleSearch"])!=null&&D(n,["googleSearch"],sue());const s=k(t,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],lue(e,s)),k(t,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],cue());const l=k(t,["googleMaps"]);l!=null&&D(n,["googleMaps"],hue(e,l));const c=k(t,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const u=k(t,["functionDeclarations"]);return u!=null&&D(n,["functionDeclarations"],u),n}function fue(e,t){const n={},i=k(t,["mode"]);i!=null&&D(n,["mode"],i);const a=k(t,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function pue(e,t){const n={},i=k(t,["latitude"]);i!=null&&D(n,["latitude"],i);const a=k(t,["longitude"]);return a!=null&&D(n,["longitude"],a),n}function mue(e,t){const n={},i=k(t,["latLng"]);return i!=null&&D(n,["latLng"],pue(e,i)),n}function gue(e,t){const n={},i=k(t,["functionCallingConfig"]);i!=null&&D(n,["functionCallingConfig"],fue(e,i));const a=k(t,["retrievalConfig"]);return a!=null&&D(n,["retrievalConfig"],mue(e,a)),n}function yue(e,t){const n={},i=k(t,["voiceName"]);return i!=null&&D(n,["voiceName"],i),n}function xue(e,t){const n={},i=k(t,["prebuiltVoiceConfig"]);return i!=null&&D(n,["prebuiltVoiceConfig"],yue(e,i)),n}function vue(e,t){const n={},i=k(t,["voiceConfig"]);i!=null&&D(n,["voiceConfig"],xue(e,i));const a=k(t,["languageCode"]);return a!=null&&D(n,["languageCode"],a),n}function bue(e,t){const n={},i=k(t,["includeThoughts"]);i!=null&&D(n,["includeThoughts"],i);const a=k(t,["thinkingBudget"]);return a!=null&&D(n,["thinkingBudget"],a),n}function jue(e,t,n){const i={},a=k(t,["systemInstruction"]);n!==void 0&&a!=null&&D(n,["systemInstruction"],Kg(e,as(e,a)));const s=k(t,["temperature"]);s!=null&&D(i,["temperature"],s);const o=k(t,["topP"]);o!=null&&D(i,["topP"],o);const l=k(t,["topK"]);l!=null&&D(i,["topK"],l);const c=k(t,["candidateCount"]);c!=null&&D(i,["candidateCount"],c);const u=k(t,["maxOutputTokens"]);u!=null&&D(i,["maxOutputTokens"],u);const f=k(t,["stopSequences"]);f!=null&&D(i,["stopSequences"],f);const p=k(t,["responseLogprobs"]);p!=null&&D(i,["responseLogprobs"],p);const g=k(t,["logprobs"]);g!=null&&D(i,["logprobs"],g);const x=k(t,["presencePenalty"]);x!=null&&D(i,["presencePenalty"],x);const v=k(t,["frequencyPenalty"]);v!=null&&D(i,["frequencyPenalty"],v);const j=k(t,["seed"]);j!=null&&D(i,["seed"],j);const w=k(t,["responseMimeType"]);w!=null&&D(i,["responseMimeType"],w);const _=k(t,["responseSchema"]);_!=null&&D(i,["responseSchema"],n9(e,_));const T=k(t,["routingConfig"]);T!=null&&D(i,["routingConfig"],T);const C=k(t,["modelSelectionConfig"]);C!=null&&D(i,["modelConfig"],iue(e,C));const O=k(t,["safetySettings"]);if(n!==void 0&&O!=null){let te=O;Array.isArray(te)&&(te=te.map(X=>aue(e,X))),D(n,["safetySettings"],te)}const A=k(t,["tools"]);if(n!==void 0&&A!=null){let te=fN(e,A);Array.isArray(te)&&(te=te.map(X=>c9(e,hN(e,X)))),D(n,["tools"],te)}const P=k(t,["toolConfig"]);n!==void 0&&P!=null&&D(n,["toolConfig"],gue(e,P));const I=k(t,["labels"]);n!==void 0&&I!=null&&D(n,["labels"],I);const F=k(t,["cachedContent"]);n!==void 0&&F!=null&&D(n,["cachedContent"],wd(e,F));const B=k(t,["responseModalities"]);B!=null&&D(i,["responseModalities"],B);const $=k(t,["mediaResolution"]);$!=null&&D(i,["mediaResolution"],$);const L=k(t,["speechConfig"]);L!=null&&D(i,["speechConfig"],vue(e,r9(e,L)));const V=k(t,["audioTimestamp"]);V!=null&&D(i,["audioTimestamp"],V);const H=k(t,["thinkingConfig"]);return H!=null&&D(i,["thinkingConfig"],bue(e,H)),i}function t3(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["contents"]);if(a!=null){let o=jd(e,a);Array.isArray(o)&&(o=o.map(l=>Kg(e,l))),D(n,["contents"],o)}const s=k(t,["config"]);return s!=null&&D(n,["generationConfig"],jue(e,s,n)),n}function wue(e,t,n){const i={},a=k(t,["taskType"]);n!==void 0&&a!=null&&D(n,["instances[]","task_type"],a);const s=k(t,["title"]);n!==void 0&&s!=null&&D(n,["instances[]","title"],s);const o=k(t,["outputDimensionality"]);n!==void 0&&o!=null&&D(n,["parameters","outputDimensionality"],o);const l=k(t,["mimeType"]);n!==void 0&&l!=null&&D(n,["instances[]","mimeType"],l);const c=k(t,["autoTruncate"]);return n!==void 0&&c!=null&&D(n,["parameters","autoTruncate"],c),i}function Sue(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["contents"]);a!=null&&D(n,["instances[]","content"],t9(e,a));const s=k(t,["config"]);return s!=null&&D(n,["config"],wue(e,s,n)),n}function Nue(e,t,n){const i={},a=k(t,["outputGcsUri"]);n!==void 0&&a!=null&&D(n,["parameters","storageUri"],a);const s=k(t,["negativePrompt"]);n!==void 0&&s!=null&&D(n,["parameters","negativePrompt"],s);const o=k(t,["numberOfImages"]);n!==void 0&&o!=null&&D(n,["parameters","sampleCount"],o);const l=k(t,["aspectRatio"]);n!==void 0&&l!=null&&D(n,["parameters","aspectRatio"],l);const c=k(t,["guidanceScale"]);n!==void 0&&c!=null&&D(n,["parameters","guidanceScale"],c);const u=k(t,["seed"]);n!==void 0&&u!=null&&D(n,["parameters","seed"],u);const f=k(t,["safetyFilterLevel"]);n!==void 0&&f!=null&&D(n,["parameters","safetySetting"],f);const p=k(t,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const g=k(t,["includeSafetyAttributes"]);n!==void 0&&g!=null&&D(n,["parameters","includeSafetyAttributes"],g);const x=k(t,["includeRaiReason"]);n!==void 0&&x!=null&&D(n,["parameters","includeRaiReason"],x);const v=k(t,["language"]);n!==void 0&&v!=null&&D(n,["parameters","language"],v);const j=k(t,["outputMimeType"]);n!==void 0&&j!=null&&D(n,["parameters","outputOptions","mimeType"],j);const w=k(t,["outputCompressionQuality"]);n!==void 0&&w!=null&&D(n,["parameters","outputOptions","compressionQuality"],w);const _=k(t,["addWatermark"]);n!==void 0&&_!=null&&D(n,["parameters","addWatermark"],_);const T=k(t,["enhancePrompt"]);return n!==void 0&&T!=null&&D(n,["parameters","enhancePrompt"],T),i}function _ue(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=k(t,["config"]);return s!=null&&D(n,["config"],Nue(e,s,n)),n}function VD(e,t){const n={},i=k(t,["gcsUri"]);i!=null&&D(n,["gcsUri"],i);const a=k(t,["imageBytes"]);a!=null&&D(n,["bytesBase64Encoded"],Sd(e,a));const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Cue(e,t){const n={},i=k(t,["maskMode"]);i!=null&&D(n,["maskMode"],i);const a=k(t,["segmentationClasses"]);a!=null&&D(n,["maskClasses"],a);const s=k(t,["maskDilation"]);return s!=null&&D(n,["dilation"],s),n}function Tue(e,t){const n={},i=k(t,["controlType"]);i!=null&&D(n,["controlType"],i);const a=k(t,["enableControlImageComputation"]);return a!=null&&D(n,["computeControl"],a),n}function Aue(e,t){const n={},i=k(t,["styleDescription"]);return i!=null&&D(n,["styleDescription"],i),n}function Eue(e,t){const n={},i=k(t,["subjectType"]);i!=null&&D(n,["subjectType"],i);const a=k(t,["subjectDescription"]);return a!=null&&D(n,["subjectDescription"],a),n}function kue(e,t){const n={},i=k(t,["referenceImage"]);i!=null&&D(n,["referenceImage"],VD(e,i));const a=k(t,["referenceId"]);a!=null&&D(n,["referenceId"],a);const s=k(t,["referenceType"]);s!=null&&D(n,["referenceType"],s);const o=k(t,["maskImageConfig"]);o!=null&&D(n,["maskImageConfig"],Cue(e,o));const l=k(t,["controlImageConfig"]);l!=null&&D(n,["controlImageConfig"],Tue(e,l));const c=k(t,["styleImageConfig"]);c!=null&&D(n,["styleImageConfig"],Aue(e,c));const u=k(t,["subjectImageConfig"]);return u!=null&&D(n,["subjectImageConfig"],Eue(e,u)),n}function Pue(e,t,n){const i={},a=k(t,["outputGcsUri"]);n!==void 0&&a!=null&&D(n,["parameters","storageUri"],a);const s=k(t,["negativePrompt"]);n!==void 0&&s!=null&&D(n,["parameters","negativePrompt"],s);const o=k(t,["numberOfImages"]);n!==void 0&&o!=null&&D(n,["parameters","sampleCount"],o);const l=k(t,["aspectRatio"]);n!==void 0&&l!=null&&D(n,["parameters","aspectRatio"],l);const c=k(t,["guidanceScale"]);n!==void 0&&c!=null&&D(n,["parameters","guidanceScale"],c);const u=k(t,["seed"]);n!==void 0&&u!=null&&D(n,["parameters","seed"],u);const f=k(t,["safetyFilterLevel"]);n!==void 0&&f!=null&&D(n,["parameters","safetySetting"],f);const p=k(t,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const g=k(t,["includeSafetyAttributes"]);n!==void 0&&g!=null&&D(n,["parameters","includeSafetyAttributes"],g);const x=k(t,["includeRaiReason"]);n!==void 0&&x!=null&&D(n,["parameters","includeRaiReason"],x);const v=k(t,["language"]);n!==void 0&&v!=null&&D(n,["parameters","language"],v);const j=k(t,["outputMimeType"]);n!==void 0&&j!=null&&D(n,["parameters","outputOptions","mimeType"],j);const w=k(t,["outputCompressionQuality"]);n!==void 0&&w!=null&&D(n,["parameters","outputOptions","compressionQuality"],w);const _=k(t,["editMode"]);n!==void 0&&_!=null&&D(n,["parameters","editMode"],_);const T=k(t,["baseSteps"]);return n!==void 0&&T!=null&&D(n,["parameters","editConfig","baseSteps"],T),i}function Oue(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=k(t,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>kue(e,c))),D(n,["instances[0]","referenceImages"],l)}const o=k(t,["config"]);return o!=null&&D(n,["config"],Pue(e,o,n)),n}function Due(e,t,n){const i={},a=k(t,["includeRaiReason"]);n!==void 0&&a!=null&&D(n,["parameters","includeRaiReason"],a);const s=k(t,["outputMimeType"]);n!==void 0&&s!=null&&D(n,["parameters","outputOptions","mimeType"],s);const o=k(t,["outputCompressionQuality"]);n!==void 0&&o!=null&&D(n,["parameters","outputOptions","compressionQuality"],o);const l=k(t,["numberOfImages"]);n!==void 0&&l!=null&&D(n,["parameters","sampleCount"],l);const c=k(t,["mode"]);return n!==void 0&&c!=null&&D(n,["parameters","mode"],c),i}function Mue(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["image"]);a!=null&&D(n,["instances[0]","image"],VD(e,a));const s=k(t,["upscaleFactor"]);s!=null&&D(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=k(t,["config"]);return o!=null&&D(n,["config"],Due(e,o,n)),n}function Iue(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","name"],Hr(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Rue(e,t,n){const i={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=k(t,["filter"]);n!==void 0&&o!=null&&D(n,["_query","filter"],o);const l=k(t,["queryBase"]);return n!==void 0&&l!=null&&D(n,["_url","models_url"],s9(e,l)),i}function Lue(e,t){const n={},i=k(t,["config"]);return i!=null&&D(n,["config"],Rue(e,i,n)),n}function Fue(e,t,n){const i={},a=k(t,["displayName"]);n!==void 0&&a!=null&&D(n,["displayName"],a);const s=k(t,["description"]);n!==void 0&&s!=null&&D(n,["description"],s);const o=k(t,["defaultCheckpointId"]);return n!==void 0&&o!=null&&D(n,["defaultCheckpointId"],o),i}function $ue(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],Fue(e,a,n)),n}function Bue(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","name"],Hr(e,i));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function zue(e,t,n){const i={},a=k(t,["systemInstruction"]);n!==void 0&&a!=null&&D(n,["systemInstruction"],Kg(e,as(e,a)));const s=k(t,["tools"]);if(n!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c9(e,c))),D(n,["tools"],l)}const o=k(t,["generationConfig"]);return n!==void 0&&o!=null&&D(n,["generationConfig"],o),i}function que(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["contents"]);if(a!=null){let o=jd(e,a);Array.isArray(o)&&(o=o.map(l=>Kg(e,l))),D(n,["contents"],o)}const s=k(t,["config"]);return s!=null&&D(n,["config"],zue(e,s,n)),n}function Uue(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["contents"]);if(a!=null){let o=jd(e,a);Array.isArray(o)&&(o=o.map(l=>Kg(e,l))),D(n,["contents"],o)}const s=k(t,["config"]);return s!=null&&D(n,["config"],s),n}function Vue(e,t,n){const i={},a=k(t,["numberOfVideos"]);n!==void 0&&a!=null&&D(n,["parameters","sampleCount"],a);const s=k(t,["outputGcsUri"]);n!==void 0&&s!=null&&D(n,["parameters","storageUri"],s);const o=k(t,["fps"]);n!==void 0&&o!=null&&D(n,["parameters","fps"],o);const l=k(t,["durationSeconds"]);n!==void 0&&l!=null&&D(n,["parameters","durationSeconds"],l);const c=k(t,["seed"]);n!==void 0&&c!=null&&D(n,["parameters","seed"],c);const u=k(t,["aspectRatio"]);n!==void 0&&u!=null&&D(n,["parameters","aspectRatio"],u);const f=k(t,["resolution"]);n!==void 0&&f!=null&&D(n,["parameters","resolution"],f);const p=k(t,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const g=k(t,["pubsubTopic"]);n!==void 0&&g!=null&&D(n,["parameters","pubsubTopic"],g);const x=k(t,["negativePrompt"]);n!==void 0&&x!=null&&D(n,["parameters","negativePrompt"],x);const v=k(t,["enhancePrompt"]);return n!==void 0&&v!=null&&D(n,["parameters","enhancePrompt"],v),i}function Hue(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["_url","model"],Hr(e,i));const a=k(t,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=k(t,["image"]);s!=null&&D(n,["instances[0]","image"],VD(e,s));const o=k(t,["config"]);return o!=null&&D(n,["config"],Vue(e,o,n)),n}function Gue(e,t){const n={},i=k(t,["data"]);i!=null&&D(n,["data"],i);const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function Wue(e,t){const n={},i=k(t,["thought"]);i!=null&&D(n,["thought"],i);const a=k(t,["inlineData"]);a!=null&&D(n,["inlineData"],Gue(e,a));const s=k(t,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=k(t,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=k(t,["fileData"]);l!=null&&D(n,["fileData"],l);const c=k(t,["functionCall"]);c!=null&&D(n,["functionCall"],c);const u=k(t,["functionResponse"]);u!=null&&D(n,["functionResponse"],u);const f=k(t,["text"]);return f!=null&&D(n,["text"],f),n}function Kue(e,t){const n={},i=k(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Wue(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function Yue(e,t){const n={},i=k(t,["citationSources"]);return i!=null&&D(n,["citations"],i),n}function Que(e,t){const n={},i=k(t,["content"]);i!=null&&D(n,["content"],Kue(e,i));const a=k(t,["citationMetadata"]);a!=null&&D(n,["citationMetadata"],Yue(e,a));const s=k(t,["tokenCount"]);s!=null&&D(n,["tokenCount"],s);const o=k(t,["finishReason"]);o!=null&&D(n,["finishReason"],o);const l=k(t,["avgLogprobs"]);l!=null&&D(n,["avgLogprobs"],l);const c=k(t,["groundingMetadata"]);c!=null&&D(n,["groundingMetadata"],c);const u=k(t,["index"]);u!=null&&D(n,["index"],u);const f=k(t,["logprobsResult"]);f!=null&&D(n,["logprobsResult"],f);const p=k(t,["safetyRatings"]);return p!=null&&D(n,["safetyRatings"],p),n}function n3(e,t){const n={},i=k(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Que(e,c))),D(n,["candidates"],l)}const a=k(t,["modelVersion"]);a!=null&&D(n,["modelVersion"],a);const s=k(t,["promptFeedback"]);s!=null&&D(n,["promptFeedback"],s);const o=k(t,["usageMetadata"]);return o!=null&&D(n,["usageMetadata"],o),n}function Xue(e,t){const n={},i=k(t,["values"]);return i!=null&&D(n,["values"],i),n}function Jue(){return{}}function Zue(e,t){const n={},i=k(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Xue(e,o))),D(n,["embeddings"],s)}return k(t,["metadata"])!=null&&D(n,["metadata"],Jue()),n}function ede(e,t){const n={},i=k(t,["bytesBase64Encoded"]);i!=null&&D(n,["imageBytes"],Sd(e,i));const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function u9(e,t){const n={},i=k(t,["safetyAttributes","categories"]);i!=null&&D(n,["categories"],i);const a=k(t,["safetyAttributes","scores"]);a!=null&&D(n,["scores"],a);const s=k(t,["contentType"]);return s!=null&&D(n,["contentType"],s),n}function tde(e,t){const n={},i=k(t,["_self"]);i!=null&&D(n,["image"],ede(e,i));const a=k(t,["raiFilteredReason"]);a!=null&&D(n,["raiFilteredReason"],a);const s=k(t,["_self"]);return s!=null&&D(n,["safetyAttributes"],u9(e,s)),n}function nde(e,t){const n={},i=k(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>tde(e,o))),D(n,["generatedImages"],s)}const a=k(t,["positivePromptSafetyAttributes"]);return a!=null&&D(n,["positivePromptSafetyAttributes"],u9(e,a)),n}function rde(e,t){const n={},i=k(t,["baseModel"]);i!=null&&D(n,["baseModel"],i);const a=k(t,["createTime"]);a!=null&&D(n,["createTime"],a);const s=k(t,["updateTime"]);return s!=null&&D(n,["updateTime"],s),n}function fP(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["description"]);s!=null&&D(n,["description"],s);const o=k(t,["version"]);o!=null&&D(n,["version"],o);const l=k(t,["_self"]);l!=null&&D(n,["tunedModelInfo"],rde(e,l));const c=k(t,["inputTokenLimit"]);c!=null&&D(n,["inputTokenLimit"],c);const u=k(t,["outputTokenLimit"]);u!=null&&D(n,["outputTokenLimit"],u);const f=k(t,["supportedGenerationMethods"]);return f!=null&&D(n,["supportedActions"],f),n}function ide(e,t){const n={},i=k(t,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=k(t,["_self"]);if(a!=null){let s=o9(e,a);Array.isArray(s)&&(s=s.map(o=>fP(e,o))),D(n,["models"],s)}return n}function ade(){return{}}function sde(e,t){const n={},i=k(t,["totalTokens"]);i!=null&&D(n,["totalTokens"],i);const a=k(t,["cachedContentTokenCount"]);return a!=null&&D(n,["cachedContentTokenCount"],a),n}function ode(e,t){const n={},i=k(t,["video","uri"]);i!=null&&D(n,["uri"],i);const a=k(t,["video","encodedVideo"]);a!=null&&D(n,["videoBytes"],Sd(e,a));const s=k(t,["encoding"]);return s!=null&&D(n,["mimeType"],s),n}function lde(e,t){const n={},i=k(t,["_self"]);return i!=null&&D(n,["video"],ode(e,i)),n}function cde(e,t){const n={},i=k(t,["generatedSamples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>lde(e,l))),D(n,["generatedVideos"],o)}const a=k(t,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=k(t,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function ude(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["metadata"]);a!=null&&D(n,["metadata"],a);const s=k(t,["done"]);s!=null&&D(n,["done"],s);const o=k(t,["error"]);o!=null&&D(n,["error"],o);const l=k(t,["response","generateVideoResponse"]);return l!=null&&D(n,["response"],cde(e,l)),n}function dde(e,t){const n={},i=k(t,["displayName"]);i!=null&&D(n,["displayName"],i);const a=k(t,["data"]);a!=null&&D(n,["data"],a);const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function hde(e,t){const n={},i=k(t,["videoMetadata"]);i!=null&&D(n,["videoMetadata"],i);const a=k(t,["thought"]);a!=null&&D(n,["thought"],a);const s=k(t,["inlineData"]);s!=null&&D(n,["inlineData"],dde(e,s));const o=k(t,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=k(t,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=k(t,["fileData"]);c!=null&&D(n,["fileData"],c);const u=k(t,["functionCall"]);u!=null&&D(n,["functionCall"],u);const f=k(t,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=k(t,["text"]);return p!=null&&D(n,["text"],p),n}function fde(e,t){const n={},i=k(t,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>hde(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function pde(e,t){const n={},i=k(t,["citations"]);return i!=null&&D(n,["citations"],i),n}function mde(e,t){const n={},i=k(t,["content"]);i!=null&&D(n,["content"],fde(e,i));const a=k(t,["citationMetadata"]);a!=null&&D(n,["citationMetadata"],pde(e,a));const s=k(t,["finishMessage"]);s!=null&&D(n,["finishMessage"],s);const o=k(t,["finishReason"]);o!=null&&D(n,["finishReason"],o);const l=k(t,["avgLogprobs"]);l!=null&&D(n,["avgLogprobs"],l);const c=k(t,["groundingMetadata"]);c!=null&&D(n,["groundingMetadata"],c);const u=k(t,["index"]);u!=null&&D(n,["index"],u);const f=k(t,["logprobsResult"]);f!=null&&D(n,["logprobsResult"],f);const p=k(t,["safetyRatings"]);return p!=null&&D(n,["safetyRatings"],p),n}function r3(e,t){const n={},i=k(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>mde(e,f))),D(n,["candidates"],u)}const a=k(t,["createTime"]);a!=null&&D(n,["createTime"],a);const s=k(t,["responseId"]);s!=null&&D(n,["responseId"],s);const o=k(t,["modelVersion"]);o!=null&&D(n,["modelVersion"],o);const l=k(t,["promptFeedback"]);l!=null&&D(n,["promptFeedback"],l);const c=k(t,["usageMetadata"]);return c!=null&&D(n,["usageMetadata"],c),n}function gde(e,t){const n={},i=k(t,["truncated"]);i!=null&&D(n,["truncated"],i);const a=k(t,["token_count"]);return a!=null&&D(n,["tokenCount"],a),n}function yde(e,t){const n={},i=k(t,["values"]);i!=null&&D(n,["values"],i);const a=k(t,["statistics"]);return a!=null&&D(n,["statistics"],gde(e,a)),n}function xde(e,t){const n={},i=k(t,["billableCharacterCount"]);return i!=null&&D(n,["billableCharacterCount"],i),n}function vde(e,t){const n={},i=k(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>yde(e,o))),D(n,["embeddings"],s)}const a=k(t,["metadata"]);return a!=null&&D(n,["metadata"],xde(e,a)),n}function bde(e,t){const n={},i=k(t,["gcsUri"]);i!=null&&D(n,["gcsUri"],i);const a=k(t,["bytesBase64Encoded"]);a!=null&&D(n,["imageBytes"],Sd(e,a));const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function d9(e,t){const n={},i=k(t,["safetyAttributes","categories"]);i!=null&&D(n,["categories"],i);const a=k(t,["safetyAttributes","scores"]);a!=null&&D(n,["scores"],a);const s=k(t,["contentType"]);return s!=null&&D(n,["contentType"],s),n}function HD(e,t){const n={},i=k(t,["_self"]);i!=null&&D(n,["image"],bde(e,i));const a=k(t,["raiFilteredReason"]);a!=null&&D(n,["raiFilteredReason"],a);const s=k(t,["_self"]);s!=null&&D(n,["safetyAttributes"],d9(e,s));const o=k(t,["prompt"]);return o!=null&&D(n,["enhancedPrompt"],o),n}function jde(e,t){const n={},i=k(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>HD(e,o))),D(n,["generatedImages"],s)}const a=k(t,["positivePromptSafetyAttributes"]);return a!=null&&D(n,["positivePromptSafetyAttributes"],d9(e,a)),n}function wde(e,t){const n={},i=k(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>HD(e,s))),D(n,["generatedImages"],a)}return n}function Sde(e,t){const n={},i=k(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>HD(e,s))),D(n,["generatedImages"],a)}return n}function Nde(e,t){const n={},i=k(t,["endpoint"]);i!=null&&D(n,["name"],i);const a=k(t,["deployedModelId"]);return a!=null&&D(n,["deployedModelId"],a),n}function _de(e,t){const n={},i=k(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&D(n,["baseModel"],i);const a=k(t,["createTime"]);a!=null&&D(n,["createTime"],a);const s=k(t,["updateTime"]);return s!=null&&D(n,["updateTime"],s),n}function Cde(e,t){const n={},i=k(t,["checkpointId"]);i!=null&&D(n,["checkpointId"],i);const a=k(t,["epoch"]);a!=null&&D(n,["epoch"],a);const s=k(t,["step"]);return s!=null&&D(n,["step"],s),n}function pP(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["description"]);s!=null&&D(n,["description"],s);const o=k(t,["versionId"]);o!=null&&D(n,["version"],o);const l=k(t,["deployedModels"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(x=>Nde(e,x))),D(n,["endpoints"],g)}const c=k(t,["labels"]);c!=null&&D(n,["labels"],c);const u=k(t,["_self"]);u!=null&&D(n,["tunedModelInfo"],_de(e,u));const f=k(t,["defaultCheckpointId"]);f!=null&&D(n,["defaultCheckpointId"],f);const p=k(t,["checkpoints"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>Cde(e,x))),D(n,["checkpoints"],g)}return n}function Tde(e,t){const n={},i=k(t,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=k(t,["_self"]);if(a!=null){let s=o9(e,a);Array.isArray(s)&&(s=s.map(o=>pP(e,o))),D(n,["models"],s)}return n}function Ade(){return{}}function Ede(e,t){const n={},i=k(t,["totalTokens"]);return i!=null&&D(n,["totalTokens"],i),n}function kde(e,t){const n={},i=k(t,["tokensInfo"]);return i!=null&&D(n,["tokensInfo"],i),n}function Pde(e,t){const n={},i=k(t,["gcsUri"]);i!=null&&D(n,["uri"],i);const a=k(t,["bytesBase64Encoded"]);a!=null&&D(n,["videoBytes"],Sd(e,a));const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Ode(e,t){const n={},i=k(t,["_self"]);return i!=null&&D(n,["video"],Pde(e,i)),n}function Dde(e,t){const n={},i=k(t,["videos"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Ode(e,l))),D(n,["generatedVideos"],o)}const a=k(t,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=k(t,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function Mde(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["metadata"]);a!=null&&D(n,["metadata"],a);const s=k(t,["done"]);s!=null&&D(n,["done"],s);const o=k(t,["error"]);o!=null&&D(n,["error"],o);const l=k(t,["response"]);return l!=null&&D(n,["response"],Dde(e,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ide="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Rde(e,t,n){const i=new ele;let a;if(n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),e.isVertexAI()){const s=Cce(e,a);Object.assign(i,s)}else{const s=_ce(e,a);Object.assign(i,s)}t(i)}class Lde{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i,a,s;const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const u=zde(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(u);else{const O=this.apiClient.getApiKey();c=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${O}`}let f=()=>{};const p=new Promise(O=>{f=O}),g=t.callbacks,x=function(){var O;(O=g==null?void 0:g.onopen)===null||O===void 0||O.call(g),f({})},v=this.apiClient,j={onopen:x,onmessage:O=>{Rde(v,g.onmessage,O)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(O){},onclose:(i=g==null?void 0:g.onclose)!==null&&i!==void 0?i:function(O){}},w=this.webSocketFactory.create(c,Bde(u),j);w.connect(),await p;let _=Hr(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const O=this.apiClient.getProject(),A=this.apiClient.getLocation();_=`projects/${O}/locations/${A}/`+_}let T={};this.apiClient.isVertexAI()&&((a=t.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[gd.AUDIO]}:t.config.responseModalities=[gd.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C={model:_,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?T=Qle(this.apiClient,C):T=Yle(this.apiClient,C),delete T.config,w.send(JSON.stringify(T)),new $de(w,this.apiClient)}}const Fde={turnComplete:!0};class $de{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=jd(t,n.turns),t.isVertexAI()?i=i.map(a=>Kg(t,a)):i=i.map(a=>mN(t,a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(Ide)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},Fde),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:nce(this.apiClient,t)}:n={realtimeInput:tce(this.apiClient,t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Bde(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function zde(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qde extends Kb{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var a;let s;const o=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((a=c==null?void 0:c.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let l;return s?l={generatedImages:o,positivePromptSafetyAttributes:s}:l={generatedImages:o},l}),this.list=async n=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new pN(fg.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(a)}}async generateContentInternal(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=t3(this.apiClient,t);return l=on("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=r3(this.apiClient,f),g=new Ij;return Object.assign(g,p),g})}else{const u=e3(this.apiClient,t);return l=on("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=n3(this.apiClient,f),g=new Ij;return Object.assign(g,p),g})}}async generateContentStreamInternal(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=t3(this.apiClient,t);l=on("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return $w(this,arguments,function*(){var g,x,v,j;try{for(var w=!0,_=dP(p),T;T=yield la(_.next()),g=T.done,!g;w=!0){j=T.value,w=!1;const O=r3(f,yield la(j.json())),A=new Ij;Object.assign(A,O),yield yield la(A)}}catch(C){x={error:C}}finally{try{!w&&!g&&(v=_.return)&&(yield la(v.call(_)))}finally{if(x)throw x.error}}})})}else{const u=e3(this.apiClient,t);l=on("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return $w(this,arguments,function*(){var g,x,v,j;try{for(var w=!0,_=dP(p),T;T=yield la(_.next()),g=T.done,!g;w=!0){j=T.value,w=!1;const O=n3(f,yield la(j.json())),A=new Ij;Object.assign(A,O),yield yield la(A)}}catch(C){x={error:C}}finally{try{!w&&!g&&(v=_.return)&&(yield la(v.call(_)))}finally{if(x)throw x.error}}})})}}async embedContent(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Sue(this.apiClient,t);return l=on("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=vde(this.apiClient,f),g=new z4;return Object.assign(g,p),g})}else{const u=qce(this.apiClient,t);return l=on("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Zue(this.apiClient,f),g=new z4;return Object.assign(g,p),g})}}async generateImagesInternal(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=_ue(this.apiClient,t);return l=on("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=jde(this.apiClient,f),g=new q4;return Object.assign(g,p),g})}else{const u=Vce(this.apiClient,t);return l=on("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=nde(this.apiClient,f),g=new q4;return Object.assign(g,p),g})}}async editImageInternal(t){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=Oue(this.apiClient,t);return s=on("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const u=wde(this.apiClient,c),f=new Koe;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=Mue(this.apiClient,t);return s=on("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const u=Sde(this.apiClient,c),f=new Yoe;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Iue(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>pP(this.apiClient,f))}else{const u=Hce(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>fP(this.apiClient,f))}}async listInternal(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Lue(this.apiClient,t);return l=on("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Tde(this.apiClient,f),g=new U4;return Object.assign(g,p),g})}else{const u=Wce(this.apiClient,t);return l=on("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=ide(this.apiClient,f),g=new U4;return Object.assign(g,p),g})}}async update(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=$ue(this.apiClient,t);return l=on("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>pP(this.apiClient,f))}else{const u=Yce(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>fP(this.apiClient,f))}}async delete(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Bue(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Ade(),p=new V4;return Object.assign(p,f),p})}else{const u=Qce(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=ade(),p=new V4;return Object.assign(p,f),p})}}async countTokens(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=que(this.apiClient,t);return l=on("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Ede(this.apiClient,f),g=new H4;return Object.assign(g,p),g})}else{const u=Jce(this.apiClient,t);return l=on("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=sde(this.apiClient,f),g=new H4;return Object.assign(g,p),g})}}async computeTokens(t){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=Uue(this.apiClient,t);return s=on("{model}:computeTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const u=kde(this.apiClient,c),f=new Qoe;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Hue(this.apiClient,t);return l=on("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Mde(this.apiClient,f))}else{const u=tue(this.apiClient,t);return l=on("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>ude(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ude(e,t){const n={},i=k(t,["operationName"]);i!=null&&D(n,["_url","operationName"],i);const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Vde(e,t){const n={},i=k(t,["operationName"]);i!=null&&D(n,["_url","operationName"],i);const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Hde(e,t){const n={},i=k(t,["operationName"]);i!=null&&D(n,["operationName"],i);const a=k(t,["resourceName"]);a!=null&&D(n,["_url","resourceName"],a);const s=k(t,["config"]);return s!=null&&D(n,["config"],s),n}function Gde(e,t){const n={},i=k(t,["video","uri"]);i!=null&&D(n,["uri"],i);const a=k(t,["video","encodedVideo"]);a!=null&&D(n,["videoBytes"],Sd(e,a));const s=k(t,["encoding"]);return s!=null&&D(n,["mimeType"],s),n}function Wde(e,t){const n={},i=k(t,["_self"]);return i!=null&&D(n,["video"],Gde(e,i)),n}function Kde(e,t){const n={},i=k(t,["generatedSamples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Wde(e,l))),D(n,["generatedVideos"],o)}const a=k(t,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=k(t,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function Yde(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["metadata"]);a!=null&&D(n,["metadata"],a);const s=k(t,["done"]);s!=null&&D(n,["done"],s);const o=k(t,["error"]);o!=null&&D(n,["error"],o);const l=k(t,["response","generateVideoResponse"]);return l!=null&&D(n,["response"],Kde(e,l)),n}function Qde(e,t){const n={},i=k(t,["gcsUri"]);i!=null&&D(n,["uri"],i);const a=k(t,["bytesBase64Encoded"]);a!=null&&D(n,["videoBytes"],Sd(e,a));const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Xde(e,t){const n={},i=k(t,["_self"]);return i!=null&&D(n,["video"],Qde(e,i)),n}function Jde(e,t){const n={},i=k(t,["videos"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Xde(e,l))),D(n,["generatedVideos"],o)}const a=k(t,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=k(t,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function i3(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["metadata"]);a!=null&&D(n,["metadata"],a);const s=k(t,["done"]);s!=null&&D(n,["done"],s);const o=k(t,["error"]);o!=null&&D(n,["error"],o);const l=k(t,["response"]);return l!=null&&D(n,["response"],Jde(e,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zde extends Kb{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let s;return i&&"httpOptions"in i&&(s=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Vde(this.apiClient,t);return l=on("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>i3(this.apiClient,f))}else{const u=Ude(this.apiClient,t);return l=on("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Yde(this.apiClient,f))}}async fetchPredictVideosOperationInternal(t){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=Hde(this.apiClient,t);return s=on("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>i3(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ehe="Content-Type",the="X-Server-Timeout",nhe="User-Agent",rhe="x-goog-api-client",ihe="0.14.1",ahe=`google-genai-sdk/${ihe}`,she="v1beta1",ohe="v1beta",a3=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class h9 extends Error{constructor(t,n){n?super(t,{cause:n}):super(t,{cause:new Error().stack}),this.message=t,this.name="ClientError"}}class mP extends Error{constructor(t,n){n?super(t,{cause:n}):super(t,{cause:new Error().stack}),this.message=t,this.name="ServerError"}}class lhe{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:she,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:ohe,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const a=[this.getRequestUrlInternal(n)];return i&&a.push(this.getBaseResourcePath()),t!==""&&a.push(t),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[o,l]of Object.entries(t.queryParams))a.searchParams.append(o,String(l));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,t.abortSignal),this.unaryApiCall(a,s,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[a,s]of Object.entries(n))typeof s=="object"?i[a]=Object.assign(Object.assign({},i[a]),s):s!==void 0&&(i[a]=s);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,n,i);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,t.abortSignal),this.streamApiCall(a,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i){if(n&&n.timeout||i){const a=new AbortController,s=a.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>a.abort(),n.timeout),i&&i.addEventListener("abort",()=>{a.abort()}),t.signal=s}return t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await s3(a),new uP(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await s3(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(t){var n;return $w(this,arguments,function*(){const a=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:c}=yield la(a.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(c);try{const p=JSON.parse(u);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),x=g.status,v=g.code,j=`got status: ${x}. ${JSON.stringify(p)}`;if(v>=400&&v<500)throw new h9(j);if(v>=500&&v<600)throw new mP(j)}}catch(p){const g=p;if(g.name==="ClientError"||g.name==="ServerError")throw p}o+=u;let f=o.match(a3);for(;f;){const p=f[1];try{const g=new Response(p,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield la(new uP(g)),o=o.slice(f[0].length),f=o.match(a3)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{a.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=ahe+" "+this.clientOptions.userAgentExtra;return t[nhe]=n,t[rhe]=n,t[ehe]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[i,a]of Object.entries(t.headers))n.append(i,a);t.timeout&&t.timeout>0&&n.append(the,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var i;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const s=this.clientOptions.uploader,o=await s.stat(t);a.sizeBytes=String(o.size);const l=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=l;const c=await this.fetchUploadUrl(a,n);return s.upload(t,c,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var i;let a={};n!=null&&n.httpOptions?a=n.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const s={file:t},o=await this.request({path:on("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:a});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(i=o==null?void 0:o.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function s3(e){var t;if(e===void 0)throw new mP("response is undefined");if(!e.ok){const n=e.status,i=e.statusText;let a;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?a=await e.json():a={error:{message:await e.text(),code:e.status,status:e.statusText}};const s=`got status: ${n} ${i}. ${JSON.stringify(a)}`;throw n>=400&&n<500?new h9(s):n>=500&&n<600?new mP(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function che(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["_url","name"],i);const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function uhe(e,t,n){const i={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=k(t,["filter"]);return n!==void 0&&o!=null&&D(n,["_query","filter"],o),i}function dhe(e,t){const n={},i=k(t,["config"]);return i!=null&&D(n,["config"],uhe(e,i,n)),n}function hhe(e,t){const n={},i=k(t,["textInput"]);i!=null&&D(n,["textInput"],i);const a=k(t,["output"]);return a!=null&&D(n,["output"],a),n}function fhe(e,t){const n={};if(k(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=k(t,["examples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>hhe(e,s))),D(n,["examples","examples"],a)}return n}function phe(e,t,n){const i={};if(k(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=k(t,["tunedModelDisplayName"]);if(n!==void 0&&a!=null&&D(n,["displayName"],a),k(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=k(t,["epochCount"]);n!==void 0&&s!=null&&D(n,["tuningTask","hyperparameters","epochCount"],s);const o=k(t,["learningRateMultiplier"]);if(o!=null&&D(i,["tuningTask","hyperparameters","learningRateMultiplier"],o),k(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(k(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=k(t,["batchSize"]);n!==void 0&&l!=null&&D(n,["tuningTask","hyperparameters","batchSize"],l);const c=k(t,["learningRate"]);return n!==void 0&&c!=null&&D(n,["tuningTask","hyperparameters","learningRate"],c),i}function mhe(e,t){const n={},i=k(t,["baseModel"]);i!=null&&D(n,["baseModel"],i);const a=k(t,["trainingDataset"]);a!=null&&D(n,["tuningTask","trainingData"],fhe(e,a));const s=k(t,["config"]);return s!=null&&D(n,["config"],phe(e,s,n)),n}function ghe(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["_url","name"],i);const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function yhe(e,t,n){const i={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=k(t,["filter"]);return n!==void 0&&o!=null&&D(n,["_query","filter"],o),i}function xhe(e,t){const n={},i=k(t,["config"]);return i!=null&&D(n,["config"],yhe(e,i,n)),n}function vhe(e,t,n){const i={},a=k(t,["gcsUri"]);if(n!==void 0&&a!=null&&D(n,["supervisedTuningSpec","trainingDatasetUri"],a),k(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function bhe(e,t){const n={},i=k(t,["gcsUri"]);return i!=null&&D(n,["validationDatasetUri"],i),n}function jhe(e,t,n){const i={},a=k(t,["validationDataset"]);n!==void 0&&a!=null&&D(n,["supervisedTuningSpec"],bhe(e,a));const s=k(t,["tunedModelDisplayName"]);n!==void 0&&s!=null&&D(n,["tunedModelDisplayName"],s);const o=k(t,["description"]);n!==void 0&&o!=null&&D(n,["description"],o);const l=k(t,["epochCount"]);n!==void 0&&l!=null&&D(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=k(t,["learningRateMultiplier"]);n!==void 0&&c!=null&&D(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const u=k(t,["exportLastCheckpointOnly"]);n!==void 0&&u!=null&&D(n,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const f=k(t,["adapterSize"]);if(n!==void 0&&f!=null&&D(n,["supervisedTuningSpec","hyperParameters","adapterSize"],f),k(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(k(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function whe(e,t){const n={},i=k(t,["baseModel"]);i!=null&&D(n,["baseModel"],i);const a=k(t,["trainingDataset"]);a!=null&&D(n,["supervisedTuningSpec","trainingDatasetUri"],vhe(e,a,n));const s=k(t,["config"]);return s!=null&&D(n,["config"],jhe(e,s,n)),n}function She(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["model"],i);const a=k(t,["name"]);return a!=null&&D(n,["endpoint"],a),n}function f9(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["state"]);a!=null&&D(n,["state"],i9(e,a));const s=k(t,["createTime"]);s!=null&&D(n,["createTime"],s);const o=k(t,["tuningTask","startTime"]);o!=null&&D(n,["startTime"],o);const l=k(t,["tuningTask","completeTime"]);l!=null&&D(n,["endTime"],l);const c=k(t,["updateTime"]);c!=null&&D(n,["updateTime"],c);const u=k(t,["description"]);u!=null&&D(n,["description"],u);const f=k(t,["baseModel"]);f!=null&&D(n,["baseModel"],f);const p=k(t,["_self"]);p!=null&&D(n,["tunedModel"],She(e,p));const g=k(t,["distillationSpec"]);g!=null&&D(n,["distillationSpec"],g);const x=k(t,["experiment"]);x!=null&&D(n,["experiment"],x);const v=k(t,["labels"]);v!=null&&D(n,["labels"],v);const j=k(t,["pipelineJob"]);j!=null&&D(n,["pipelineJob"],j);const w=k(t,["tunedModelDisplayName"]);return w!=null&&D(n,["tunedModelDisplayName"],w),n}function Nhe(e,t){const n={},i=k(t,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=k(t,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>f9(e,o))),D(n,["tuningJobs"],s)}return n}function _he(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["metadata"]);a!=null&&D(n,["metadata"],a);const s=k(t,["done"]);s!=null&&D(n,["done"],s);const o=k(t,["error"]);return o!=null&&D(n,["error"],o),n}function Che(e,t){const n={},i=k(t,["checkpointId"]);i!=null&&D(n,["checkpointId"],i);const a=k(t,["epoch"]);a!=null&&D(n,["epoch"],a);const s=k(t,["step"]);s!=null&&D(n,["step"],s);const o=k(t,["endpoint"]);return o!=null&&D(n,["endpoint"],o),n}function The(e,t){const n={},i=k(t,["model"]);i!=null&&D(n,["model"],i);const a=k(t,["endpoint"]);a!=null&&D(n,["endpoint"],a);const s=k(t,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Che(e,l))),D(n,["checkpoints"],o)}return n}function gP(e,t){const n={},i=k(t,["name"]);i!=null&&D(n,["name"],i);const a=k(t,["state"]);a!=null&&D(n,["state"],i9(e,a));const s=k(t,["createTime"]);s!=null&&D(n,["createTime"],s);const o=k(t,["startTime"]);o!=null&&D(n,["startTime"],o);const l=k(t,["endTime"]);l!=null&&D(n,["endTime"],l);const c=k(t,["updateTime"]);c!=null&&D(n,["updateTime"],c);const u=k(t,["error"]);u!=null&&D(n,["error"],u);const f=k(t,["description"]);f!=null&&D(n,["description"],f);const p=k(t,["baseModel"]);p!=null&&D(n,["baseModel"],p);const g=k(t,["tunedModel"]);g!=null&&D(n,["tunedModel"],The(e,g));const x=k(t,["supervisedTuningSpec"]);x!=null&&D(n,["supervisedTuningSpec"],x);const v=k(t,["tuningDataStats"]);v!=null&&D(n,["tuningDataStats"],v);const j=k(t,["encryptionSpec"]);j!=null&&D(n,["encryptionSpec"],j);const w=k(t,["partnerModelTuningSpec"]);w!=null&&D(n,["partnerModelTuningSpec"],w);const _=k(t,["distillationSpec"]);_!=null&&D(n,["distillationSpec"],_);const T=k(t,["experiment"]);T!=null&&D(n,["experiment"],T);const C=k(t,["labels"]);C!=null&&D(n,["labels"],C);const O=k(t,["pipelineJob"]);O!=null&&D(n,["pipelineJob"],O);const A=k(t,["tunedModelDisplayName"]);return A!=null&&D(n,["tunedModelDisplayName"],A),n}function Ahe(e,t){const n={},i=k(t,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=k(t,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>gP(e,o))),D(n,["tuningJobs"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ehe extends Kb{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new pN(fg.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let a="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?a=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(a=i.name.split("/operations/")[0]),{name:a,state:cP.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=ghe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>gP(this.apiClient,f))}else{const u=che(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f9(this.apiClient,f))}}async listInternal(t){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=xhe(this.apiClient,t);return l=on("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Ahe(this.apiClient,f),g=new G4;return Object.assign(g,p),g})}else{const u=dhe(this.apiClient,t);return l=on("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Nhe(this.apiClient,f),g=new G4;return Object.assign(g,p),g})}}async tuneInternal(t){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=whe(this.apiClient,t);return s=on("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>gP(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=mhe(this.apiClient,t);return s=on("tunedModels",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>_he(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class khe{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Phe=1024*1024*8,Ohe=3,Dhe=1e3,Mhe=2,WC="x-goog-upload-status";async function Ihe(e,t,n){var i,a,s;let o=0,l=0,c=new uP(new Response),u="upload";for(o=e.size;l<o;){const p=Math.min(Phe,o-l),g=e.slice(l,l+p);l+p>=o&&(u+=", finalize");let x=0,v=Dhe;for(;x<Ohe&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[WC]));)x++,await Lhe(v),v=v*Mhe;if(l+=p,((a=c==null?void 0:c.headers)===null||a===void 0?void 0:a[WC])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[WC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Rhe(e){return{size:e.size,type:e.type}}function Lhe(e){return new Promise(t=>setTimeout(t,e))}class Fhe{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Ihe(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Rhe(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $he{create(t,n,i){return new Bhe(t,n,i)}}class Bhe{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o3="x-goog-api-key";class zhe{constructor(t){this.apiKey=t}async addAuthHeaders(t){t.get(o3)===null&&t.append(o3,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qhe="gl-node/";class p9{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=Jse(t,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const a=new zhe(this.apiKey);this.apiClient=new lhe({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:qhe+"web",uploader:new Fhe,downloader:new khe}),this.models=new qde(this.apiClient),this.live=new Lde(this.apiClient,a,new $he),this.chats=new ale(this.models,this.apiClient),this.caches=new tle(this.apiClient),this.files=new xle(this.apiClient),this.operations=new Zde(this.apiClient),this.tunings=new Ehe(this.apiClient)}}const Uhe=()=>{const e=localStorage.getItem("currentClinicId");return e||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},m9=()=>localStorage.getItem("authToken");class Vhe{constructor(){xr(this,"listeners",[]);xr(this,"activeRequests",0)}subscribe(t){return this.listeners.push(t),t(this.activeRequests>0),()=>this.unsubscribe(t)}unsubscribe(t){this.listeners=this.listeners.filter(n=>n!==t)}notify(t){t?this.activeRequests++:this.activeRequests=Math.max(0,this.activeRequests-1);const n=this.activeRequests>0;this.listeners.forEach(i=>i(n))}}const yP=new Vhe,Hhe="https://backend.newtons.in",Ghe=()=>localStorage.getItem("authToken"),ue=async(e,t={})=>{const n=Ghe(),i={...t.headers};n&&(i.Authorization=`Bearer ${n}`),!(t.body instanceof FormData)&&!i["Content-Type"]&&(i["Content-Type"]="application/json");const a=i;let s=e.startsWith("/")?e:`/${e}`;s.startsWith("/api/")||(s=`/api${s}`);const o=`${Hhe}${s}`;yP.notify(!0);try{console.log(`Making API call to: ${o}`);const l=await fetch(o,{...t,headers:a});if(l.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!l.ok){let c=`HTTP error! status: ${l.status}`;try{const u=await l.json();c=(u==null?void 0:u.message)||(u==null?void 0:u.error)||c}catch{}throw console.error(`API Error: ${l.status} ${l.statusText} - ${c}`),new Error(c)}return l}catch(l){throw l instanceof TypeError&&l.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",l):console.error("API Fetch Error:",l),l}finally{yP.notify(!1)}},KC="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Whe="models/gemini-3-flash-preview",Khe=`You are an intelligent Clinic Hub Assistant for a Clinic Management System. Your role is to help the Clinic Administrator or Doctor manage their clinic ecosystem efficiently.

You have access to the current state of the clinic settings and the staff list. You can perform actions to update these settings or manage staff members.

**Capabilities:**
1.  **View Settings & Staff:** User can ask about current charges, clinic details, or staff members. Answer based on the provided context.
2.  **Update Settings:** Change fees, clinic name, address, etc.
3.  **Manage Staff:** Add new staff members or update existing ones.
4.  **Voice AI Settings:** Update the \`voice_ai_language\` for the Live API Assistant. Available codes:
    -   India: \`en-US\` (English), \`hi-IN\` (Hindi), \`te-IN\` (Telugu), \`bn-IN\` (Bengali), \`mr-IN\` (Marathi), \`ta-IN\` (Tamil), \`gu-IN\` (Gujarati), \`kn-IN\` (Kannada), \`ml-IN\` (Malayalam), \`pa-IN\` (Punjabi)
    -   Global: \`es-ES\` (Spanish), \`fr-FR\` (French), \`de-DE\` (German), \`it-IT\` (Italian), \`pt-PT\` (Portuguese), \`ru-RU\` (Russian), \`ja-JP\` (Japanese), \`ko-KR\` (Korean), \`zh-CN\` (Chinese), \`ar-SA\` (Arabic).
5.  **Analyze Financials & Inventory:** Access the Analysis Dashboard to view revenue, expenses, and inventory movement. Set date ranges to filter data.
6.  **Manage Inventory:** Update pharmacy tokens (drugs) and lab tests. You will reference items by their **Serial Number** as provided in the context.
7.  **Purchase Management:** Search for distributors, select one, and build a purchase order by adding items. You can add multiple items at once. Editing items uses Serial Numbers.
8.  **Looping & Reasoning:** You should think step-by-step. If a user request involves multiple steps or if you need to check something after an action, you can continue the loop.
9.  **Follow-up:** If critical information is missing, ask the user.
10.  **Manage Custom Columns:** You can add or remove custom columns/fields for various entities (patients, drugs, lab_tests). Use the \`manage_custom_columns\` action.
11.  **Custom Fields Data:** When searching or updating items (like drugs or patients), pay attention to their \`custom_fields\`. You can update these fields using the \`update_drug\` (or similar) action by passing a \`custom_fields\` object with key-value pairs. Keys must match the \`key\` defined in the Clinic Settings.
12.  **Custom Tables:** You can create entirely new tables to track anything (e.g., "Gym Members", "Diet Plans"). Use \`create_custom_table\`. You can then add rows to these tables using \`add_table_row\` (requires Table ID) and update them with \`update_table_row\`. meaningful descriptions are helpful.
13.  **Dashboards:** You can create persistent custom dashboards using \`create_custom_dashboard\` or show a specialized temporary view using \`render_temporary_dashboard\`.
     - Use \`render_temporary_dashboard\` when the user asks to "show", "view", or "see" data (e.g., "Show me John's meds").
     - Use \`create_custom_dashboard\` when the user explicitly asks to "create a dashboard" or "save a view".
     - **Data Sources:** Use the provided "Dashboard Data Sources" context to know valid keys (e.g., \`api:patients\`, \`table:123\`).
       - **Advanced Features:** You can add **Charts** (bar, line, pie) and **Filters** to widgets.
       - **Filters (SERVER-SIDE):** Use the \`filters\` array in config. Filters are applied on the server for efficiency.
         - **Supported Operators:**
           - \`equals\` or \`eq\`: Exact match
           - \`neq\` or \`not_equals\`: Not equal
           - \`contains\` or \`like\`: Case-insensitive substring match
           - \`starts_with\`: Value starts with
           - \`ends_with\`: Value ends with
           - \`gt\` or \`greater_than\`: Greater than
           - \`gte\`: Greater than or equal
           - \`lt\` or \`less_than\`: Less than
           - \`lte\`: Less than or equal
           - \`in\`: Value in array (value should be array)
           - \`not_in\`: Value not in array
           - \`is_null\`: Field is null
           - \`is_not_null\`: Field is not null
           - \`between\`: Value between two values (value should be [min, max])
         - **Filterable Fields:** The "Dashboard Data Sources" in context includes a \`filterableFields\` list for each source. You **MUST** use these fields.
           - **Mixed Tables:** Sources like \`api:pharmacy-orders\` or \`api:lab-orders\` support filtering by associated **Patient** data using \`patient_name\`, \`patient_phone\`, and \`token\`.
         - **Example 1:** User: "Show pharmacy orders for John" -> Action: \`render_temporary_dashboard\` with widget config: \`filters: [{ field: 'patient_name', operator: 'contains', value: 'John' }]\`
         - **Example 2:** User: "Show orders for Token 123" -> \`filters: [{ field: 'token', operator: 'equals', value: 123 }]\`
         - **Example 3:** \`filters: [{ field: 'expiry_date', operator: 'lt', value: '2024-01-01' }, { field: 'stock', operator: 'gt', value: 0 }]\`
         - Smartly infer dates for "expired" (lt today), "expiring this week" (between today and next week), etc.
       - **Charts:** Set \`type: 'chart'\`. Config requires \`chartType\`, \`xAxisKey\` (category), \`dataKey\` (value).

**Interpretation Rules:**
- **Analysis Dates:** When the user asks for analysis (financial or inventory) for a specific time range (e.g., "last month", "yesterday"), you **MUST** include \`startDate\` and \`endDate\` in the \`navigate_to\` action for \`/dashboard/analysis\`.
- If the user says "add drug", "buy medicine", or "new stock", they **usually mean "Add Item to Purchase Order"** (use \`add_purchase_items\` or navigate to \`/dashboard/purchase\`).
- **Prerequisite:** If you are using ANY purchase tools (\`add_purchase_items\`, \`search_distributor_purchase\`, \`set_distributor_purchase\`, \`edit_purchase_items\`), you **MUST** include a \`navigate_to\` action with \`page: "/dashboard/purchase"\` as the **FIRST** action in your list, unless you are already on that page.
- **ONLY** use \`update_drug\` (create) if the user explicitly says "create new drug definition" or "add to master inventory".
- The correct route for purchasing is \`/dashboard/purchase\`.

- **Drug Name & Brand Handling (CRITICAL):**
  - "Name" refers to the **Composition Name** (or Generic Name).
  - "Brand Name" refers to the **Brand Name**.
  - **Auto-Computation:** If the user provides a *Brand Name* (e.g., "Tab Dolo 650"), you **MUST** automatically:
    1.  Infer the **Composition** (e.g., "Tab Paracetamol 650mg") and use it for the "name" field.
    2.  Use the provided brand for the "brand_name" field (e.g., "Dolo 650").
    3.  Infer the **pack size** if implied (e.g., "1x10") and use it for the "pack" field.
  - If the user provides only a Brand Name and you cannot confidently infer the Composition, you **MUST** use \`ask_followup_question\` to ask the user for the composition.
  - Apply this logic to both \`add_purchase_items\` and \`update_drug\` actions.

- **Inventory Navigation:** If you execute "update_drug" or "search_pharmacy_inventory", you **MUST** include a "navigate_to" action for "/dashboard/inventory". If you searched for or updated a specific term, append it as "?search=Term" (e.g. "/dashboard/inventory?search=Paracetamol").
- **Lab Navigation:** If you execute "update_lab_test", you **MUST** include a "navigate_to" action for "/lab-inventory", unless you are already on that page.

**Action Tools:**
You can perform the following actions. Return a JSON array of actions.

\`\`\`json
[
    {
        "action": "update_clinic_settings",
        "updates": {
            "admissionCharge": "number string",
            "perDayCharge": "number string",
            "otherCharges": "number string",
            "name": "string",
            "address": "string",
            "notes": "string",
            "logoUrl": "string",
            "upi_id": "string",
            "low_stock_threshold": number,
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "gemini_api_key": "string",
            "voice_ai_language": "string (e.g. 'en-US', 'te-IN')"
        }
    },
    {
        "action": "create_staff_member",
        "staff": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null
        }
    },
    {
        "action": "update_staff_member",
        "id": "string | number",
        "updates": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null,
            "active": boolean
        }
    },
    {
        "action": "set_analysis_dates",
        "startDate": "YYYY-MM-DD",
        "endDate": "YYYY-MM-DD"
    },
    {
        "action": "navigate_to",
        "page": "/dashboard/inventory" | "/lab-inventory" | "/dashboard/queue" | "/dashboard/staff" | "/dashboard/purchase" | "/dashboard/analysis" | "/dashboard/clinic-hub" | "/billing" | "/dashboard/patients",
        "section": "financial" | "inventory" | "string (optional)",
        "startDate": "YYYY-MM-DD (optional, for analysis page)",
        "endDate": "YYYY-MM-DD (optional, for analysis page)"
    },
    {
        "action": "highlight_section",
        "elementId": "string"
    },
    {
        "action": "refresh_analysis"
    },
    {
        "action": "ask_followup_question",
        "question": "string"
    },
    {
        "action": "search_pharmacy_inventory",
        "query": "string (name, brand, or composition)"
    },
    {
        "action": "update_drug",
        "id": "number",
        "updates": {
            "name": "string",
            "brand_name": "string",
            "description": "string",
            "mrp": "number (MRP)",
            "stock": "number",
            "pack": "string (e.g. strip, bottle)",
            "supplier": "string",
            "expiry_date": "YYYY-MM-DD",
            "rate": "number",
            "box_number": "string",
            "gst": "number",
            "margin": "number",
            "discount": "number",
            "batch": "string",
            "hsn_code": "string",
            "mfg": "string",
            "mfg": "string",
            "loose": "number",
            "custom_fields": "object { key: value } (Optional: Update custom field values)"
        }
    },
    {
        "action": "update_lab_test",
        "serial_number": 1,
        "updates": {
            "name": "string",
            "price": "number",
            "description": "string",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit }"
        }
    },
    {
        "action": "search_lab_inventory",
        "query": "string (test name or description)"
    },
    {
        "action": "create_lab_test",
        "test": {
            "name": "string",
            "price": "number",
            "description": "string (optional)",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit } (optional)"
        }
    },
    {
        "action": "search_distributor_purchase",
        "query": "string"
    },
    {
        "action": "set_distributor_purchase",
        "distributorId": "string"
    },
    {
        "action": "add_purchase_items",
        "items": [
            {
                "name": "string (Composition Name)",
                "brand_name": "string",
                "stock": "number (quantity)",
                "rate": "number (buying price)",
                "mrp": "number",
                "pack": "string",
                "expiry_date": "YYYY-MM-DD",
                "batch": "string",
                "discount": "number",
                "gst": "number"
            }
        ]
    },
    {
        "action": "edit_purchase_items",
        "updates": [
            {
                "serial_number": "number (The Row # from context)",
                "field": "string (name, stock, rate, etc.)",
                "value": "string | number"
            }
        ]
    },
    {
        "action": "end_task",
        "summary": "string"
    },
    {
        "action": "open_new_case",
        "name": "string (Patient Name)",
        "age": "number (optional)",
        "gender": "M | F | O (optional)",
        "phone": "string (optional)",
        "complaint": "string (The medical complaint/reason)"
    },
    {
        "action": "manage_custom_columns",
        "entity": "patients" | "drugs" | "lab_tests",
        "operation": "add" | "remove",
        "column": {
            "label": "string",
            "type": "text" | "number" | "date" | "boolean",
            "required": boolean
        }
    },
    {
        "action": "create_custom_table",
        "name": "string",
        "description": "string (optional)",
        "columns": [
            {
                "label": "string",
                "type": "text" | "number" | "date" | "boolean",
                "required": boolean
            }
        ]
    },
    {
        "action": "add_table_row",
        "tableId": "string (The ID of the custom table)",
        "data": "object { key: value } (Keys must match column keys derived from labels)"
    },
    {
        "tableId": "string",
        "recordId": "string (The ID of the row/record to update)",
        "data": "object { key: value } (Updates to apply)"
    },
    {
        "action": "create_custom_dashboard",
        "name": "string",
        "description": "string (optional)",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string (one of the keys from Dashboard Data Sources, e.g. api:patients, table:xyz)",
                "config": "object { columns?: string[], label?: string, chartType?: 'bar'|'line'|'pie', xAxisKey?: string, dataKey?: string, filters?: Array<{field, operator, value}> }"
            }
        ]
    },
    {
        "action": "render_temporary_dashboard",
        "title": "string",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string",
                "config": "object { columns?: [], label?, chartType?, xAxisKey?, dataKey?, filters?: [] }"
            }
        ]
    }
]
\`\`\`

**Navigation Reference:**
- **Pharmacy Inventory:** \`/dashboard/inventory\`
- **Lab Inventory:** \`/lab-inventory\`
- **Doctor Queue:** \`/dashboard/queue\`
- **Staff Management:** \`/dashboard/staff\`
- **All Patients:** \`/dashboard/patients\`
- **Billing:** \`/billing\`
- **Purchase Page:** \`/dashboard/purchase\`
- **Analysis:** \`/dashboard/analysis\`
- **Clinic Hub:** \`/dashboard/clinic-hub\`
\`\`\`

**Rules:**
-   **Always** return a JSON array as the last part of your response.
-   If the user's request is satisfied, use the \`end_task\` action with a summary of what was done.
-   If you need more info, use \`ask_followup_question\`.
-   If you perform an action (like updating settings), and there's nothing else to do *immediately* but you want to confirm it's done, you can return the action. The system will execute it and call you back with the result. Then you can \`end_task\`.
-   For \`create_staff_member\`, if password is not provided by user, generate a secure random password and mention it in the summary.
-   Update numeric strings as strings (e.g., "500.00").
-   **CRITICAL DO's and DON'Ts:**
    -   **DO NOT** fill in empty fields (like \`gemini_api_key\`, \`logoUrl\`, \`upi_id\`, etc.) with fake, placeholder, or example data.
    -   **ONLY** update fields that the user *intentionally* asked to change.
    -   **PRESERVE** existing values for any fields not explicitly mentioned in the user's request.
    -   If a field is empty and the user didn't ask to set it, **leave it empty**.
    -   Do not invent values.
`;async function Yhe(){var n;if(!m9()&&KC)return KC;let t=null;try{const i=await ue("/api/clinics/settings");if(i.ok){const a=await i.json();(n=a.gemini_api_key)!=null&&n.trim()&&(t=a.gemini_api_key.trim())}}catch(i){console.warn("Error fetching updated key",i)}if(t)return t;try{const i=await ue("/api/global-settings/app_gemini_api_key");if(i.ok){const s=(await i.json()).value;if(s&&s.trim()!=="")return s.trim()}}catch(i){console.warn("Could not fetch global API key.",i)}return KC}async function Qhe(e,t,n=[],i){var f,p,g,x,v,j;let a=(f=t.settings)==null?void 0:f.gemini_api_key;if(!a||!a.trim())try{a=await Yhe()}catch(w){console.warn("Using fallback key or failing:",w)}if(!a)throw new Error("No Gemini API Key provided in settings or environment.");const s=new p9({apiKey:a}),o=[];o.push({role:"user",parts:[{text:Khe}]}),o.push({role:"model",parts:[{text:"Understood. I am ready to assist with Clinic Hub management."}]}),n.forEach(w=>{o.push({role:w.role,parts:[{text:w.text}]})});const u=[{text:`
    Context:
    ${`
    --- Current Clinic Context ---
    Settings: ${JSON.stringify(t.settings,null,2)}
    
    Custom Columns Configuration: ${JSON.stringify(t.settings.custom_columns_config||{},null,2)}

    Custom Tables (Available for adding/editing rows): ${JSON.stringify(t.customTables||[],null,2)}
    
    Dashboard Data Sources (Use these keys for widgets): ${JSON.stringify(t.dashboardDataSources||[],null,2)}

    --- DYNAMIC CONTEXT DATA (Configured tables with <200 rows) ---
    ${Object.entries(t.dynamicContextData||{}).map(([w,_])=>{const T=(_.data||[]).slice(0,50).map((C,O)=>({_sn:O+1,...C}));return`${_.label||w} (${_.count||0} records): ${JSON.stringify(T,null,2)}`}).join(`

`)}
    --- END DYNAMIC CONTEXT ---

    Staff List: ${JSON.stringify(t.staffList.map(w=>({id:w.id||w._id,name:w.name,role:w.role,email:w.email,active:w.active,opd_fee:w.opd_fee})),null,2)}
    
    Previous Action Results (if any): ${JSON.stringify(t.actionResults||[],null,2)}

    Analysis Data (if active): ${JSON.stringify(t.analysisData||{},null,2)}

    Pharmacy Inventory: ${t.pharmacyInventory?JSON.stringify(t.pharmacyInventory,null,2):"Not loaded. Use 'search_pharmacy_inventory' to find items."}

    Distributors List: ${JSON.stringify((t.distributors||[]).map(w=>({serial_number:w.serial_number,name:w.name,contact_person:w.contact_person,phone:w.phone,remainingBalance:w.remainingBalance})),null,2)}

    Lab Tests Inventory: ${JSON.stringify((t.labInventory||[]).map(w=>({serial:w.serial_number,name:w.name,price:w.price,description:w.description,default_parameters:w.default_parameters})),null,2)}

    Current Purchase Page Rows: ${JSON.stringify((t.purchaseRows||[]).map((w,_)=>({serial_number:_+1,name:w.name,stock:w.stock,rate:w.rate,mrp:w.mrp,net_value:(w.stock*w.rate).toFixed(2)})),null,2)}

    Current Application Page Context: ${t.pageContext?JSON.stringify(t.pageContext,null,2):"Unknown/General Dashboard"}
    `}

    User Query/Input:
    ${e}
    `}];if(i){const w=i.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"");u.push({inlineData:{data:w,mimeType:"image/jpeg"}})}o.push({role:"user",parts:u});try{const w={model:Whe,contents:o,generationConfig:{temperature:.7,maxOutputTokens:2048,responseMimeType:"text/plain"}},_=await s.models.generateContentStream(w);let T="";for await(const C of _){const O=C;O.text&&typeof O.text=="function"?T+=O.text():(j=(v=(x=(g=(p=O.candidates)==null?void 0:p[0])==null?void 0:g.content)==null?void 0:x.parts)==null?void 0:v[0])!=null&&j.text&&(T+=O.candidates[0].content.parts[0].text)}if(!T)throw new Error("Empty response from AI");return T}catch(w){throw console.error("Gemini Interaction Error:",w),new Error("Failed to communicate with AI Assistant.")}}const GD=({settings:e,staffList:t,onSettingsUpdate:n,onStaffUpdate:i,onHighlight:a,enableDynamicContext:s=!1})=>{const o=It(),l=us(),{setAnalysisDateRange:c,analysisData:u,analysisNavigate:f,refreshAnalysis:p,pageContext:g}=rN(),{setDistributors:x,setSelectedDistributor:v,setSearchTerm:j,addPurchaseRow:w,updatePurchaseRow:_,distributors:T,purchaseRows:C}=Sq(),[O,A]=b.useState(""),P=b.useRef(u),I=b.useRef(C);b.useEffect(()=>{P.current=u},[u]),b.useEffect(()=>{I.current=C},[C]);const[F,B]=b.useState([]),[$,L]=b.useState([]),[V,H]=b.useState([]),[te,X]=b.useState(!1),[q,W]=b.useState(null),ae=b.useRef(!1),G=b.useRef(0),z=5,le=()=>{ae.current=!1,X(!1),H(ce=>[...ce,{role:"system",text:" Task stopped by user."}])},je=ce=>{const fe=new FileReader;fe.onloadend=()=>{W(fe.result)},fe.readAsDataURL(ce)},Y=()=>{W(null)},[Oe,Ke]=b.useState(null),Me=()=>Ke(null),Ie=async(ce,fe)=>{if(!Oe)return;const se={name:ce,description:fe,widgets:Oe.widgets};if(!(await ue("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).ok)throw new Error("Failed to save dashboard");Ke(null)},be=async(ce,fe,se=[],Q)=>{var ie,ge,ee;if(ae.current){if(G.current+=1,G.current>z){H(we=>[...we,{role:"system",text:" Task limit reached. Stopping automatically."}]),X(!1),ae.current=!1;return}try{let we=e,Ue=t,Ge=[],Le=[],oe=[],_e=[],$e=[];try{const[Pe,Je]=await Promise.all([ue("/api/clinics/settings"),ue("/staff")]);if(Pe.ok&&Je.ok){const et=await Pe.json(),dt=await Je.json(),[Ct,bt,Ce,ct]=await Promise.all([ue("/api/drugs"),ue("/api/lab-tests"),ue("/api/distributors"),ue("/api/custom-tables"),ue("/api/dashboards/data-sources")]);if(Ct.ok){const At=await Ct.json();Ge=At.drugs||At||[]}if(bt.ok){const qe=(await bt.json()).map((wt,Tt)=>({...wt,serial_number:Tt+1}));Le=qe,B(qe)}if(Ce.ok&&(oe=(await Ce.json()||[]).map((qe,wt)=>({...qe,serial_number:wt+1}))),ct.ok){const At=await ct.json();_e=At,L(At)}try{const At=await ue("/api/dashboards/data-sources");At.ok&&($e=await At.json())}catch(At){console.warn("Failed to fetch dashboard sources",At)}we={...et,admissionCharge:parseFloat(et.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(et.perDayCharge||0).toFixed(2),otherCharges:parseFloat(et.otherCharges||0).toFixed(2),aiMemory:et.aiMemory||"",clinicWideSystemPrompt:et.clinicWideSystemPrompt||"",gemini_api_key:et.gemini_api_key||"",low_stock_threshold:et.low_stock_threshold!==void 0&&et.low_stock_threshold!==null?String(et.low_stock_threshold):"10",name:et.name||"",logoUrl:et.logoUrl||"",upi_id:et.upi_id||"",address:et.address||"",notes:et.notes||"",clinic_id:et.clinic_id},Ue=dt.map(At=>({...At,id:At._id||At.id}))}}catch(Pe){console.warn("Failed to fetch fresh context for AI loop, falling back to props",Pe)}let ze={};if(s)try{const Pe=await ue("/api/ai-context/data");Pe.ok&&(ze=await Pe.json())}catch(Pe){console.warn("Failed to fetch dynamic AI context",Pe)}const K={settings:we,staffList:Ue,analysisData:P.current,pharmacyInventory:Ge.length>50?void 0:Ge,labInventory:Le,distributors:oe,purchaseRows:I.current,actionResults:se,pageContext:g||void 0,customTables:_e,dashboardDataSources:$e,dynamicContextData:ze},ye=fe.filter(Pe=>Pe.role!=="system"),pe=await Qhe(ce,K,ye,Q);if(!ae.current)return;let me=[];try{const Pe=pe.match(/\[[\s\S]*\]/);if(Pe)me=JSON.parse(Pe[0]);else{H(Je=>[...Je,{role:"model",text:pe}]),X(!1),ae.current=!1;return}}catch(Pe){console.error("Failed to parse AI response",Pe),H(Je=>[...Je,{role:"model",text:"I'm having trouble processing that. Please try again."}]),X(!1),ae.current=!1;return}const Ne=[];let Be=[],ke=[];for(const Pe of me){if(!ae.current)break;if(Pe.action==="end_task"){H(Je=>[...Je,{role:"model",text:Pe.summary}]),X(!1),ae.current=!1;return}if(Pe.action==="ask_followup_question"){H(Je=>[...Je,{role:"model",text:Pe.question}]),X(!1),ae.current=!1;return}try{if(Pe.action==="update_clinic_settings"){const Je=Pe.updates;Object.keys(Je).forEach(Ct=>Be.push(`setting-${Ct}`));const et={...we,...Je},dt={...et,admissionCharge:parseFloat(et.admissionCharge),perDayCharge:parseFloat(et.perDayCharge),otherCharges:parseFloat(et.otherCharges),low_stock_threshold:parseInt(et.low_stock_threshold)};await ue("/api/clinics/settings",{method:"PUT",body:JSON.stringify(dt)}),n&&n(),Ne.push({action:"update_clinic_settings",status:"success"}),ke.push({role:"system",text:" Updated clinic settings"})}if(Pe.action==="create_staff_member"&&(await ue("/api/staff",{method:"POST",body:JSON.stringify({...Pe.staff,clinic_id:we.clinic_id})}),i&&i(),Ne.push({action:"create_staff_member",status:"success",name:Pe.staff.name}),ke.push({role:"system",text:` Created staff member: ${Pe.staff.name}`})),Pe.action==="update_staff_member"){const Je=Pe.id;await ue(`/api/staff/${Je}`,{method:"PUT",body:JSON.stringify(Pe.updates)}),i&&i(),Be.push(`staff-member-${Je}`),Ne.push({action:"update_staff_member",status:"success",id:Je}),ke.push({role:"system",text:" Updated staff member details"})}if(Pe.action==="set_analysis_dates"){const{startDate:Je,endDate:et}=Pe;c({startDate:new Date(Je),endDate:new Date(et)}),Ne.push({action:"set_analysis_dates",status:"success",startDate:Je,endDate:et}),ke.push({role:"system",text:` Set analysis dates: ${Je} to ${et}`})}if(Pe.action==="navigate_to"){let Je=Pe.page;if(Pe.page&&Pe.page.includes("analysis")&&Pe.startDate&&Pe.endDate){const et=Je.includes("?")?"&":"?";Je=`${Je}${et}startDate=${Pe.startDate}&endDate=${Pe.endDate}`}else Pe.page&&Pe.page.includes("analysis")&&((ie=P.current)!=null&&ie.startDate)&&((ge=P.current)!=null&&ge.endDate);o(Je),Pe.section&&setTimeout(()=>f(Pe.section),500),Ne.push({action:"navigate_to",status:"success",page:Je}),ke.push({role:"system",text:` Navigated to ${Je}`})}if(Pe.action==="highlight_section"&&(Be.push(Pe.elementId),Ne.push({action:"highlight_section",status:"success",id:Pe.elementId})),Pe.action==="refresh_analysis"){ke.push({role:"system",text:" Refreshing analysis data..."});const Je=await p();Je?(P.current=Je,Ne.push({action:"refresh_analysis",status:"success",summary:"Data refreshed successfully"}),ke.push({role:"system",text:" Analysis data refreshed"})):(Ne.push({action:"refresh_analysis",status:"error",error:"No data returned"}),ke.push({role:"system",text:" Failed to refresh analysis data"}))}if(Pe.action==="search_pharmacy_inventory"){const Je=Pe.query.toLowerCase(),et=Ge.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Je)||Ct.brand_name&&Ct.brand_name.toLowerCase().includes(Je)||Ct.description&&Ct.description.toLowerCase().includes(Je)),dt=et.slice(0,10);Ne.push({action:"search_pharmacy_inventory",status:"success",count:et.length,results:dt}),et.length>0?ke.push({role:"system",text:` Found ${et.length} matches for "${Pe.query}". Showing top ${dt.length}.`}):ke.push({role:"system",text:` No matches found for "${Pe.query}"`})}if(Pe.action==="update_drug"){const Je=Pe.id;try{const et=Ge.find(bt=>bt.id===Je);if(!et)throw new Error(`Drug with ID ${Je} not found.`);const dt={...Pe.updates};dt.custom_fields&&(dt.custom_fields={...et.custom_fields||{},...dt.custom_fields});const Ct={...et,...dt};await ue(`/api/drugs/${Je}`,{method:"PUT",body:JSON.stringify(Ct)}),Ne.push({action:"update_drug",status:"success",id:Je,updates:Pe.updates}),ke.push({role:"system",text:` Updated drug: ${et.name}`}),Ke({title:`Updated: ${et.name}`,widgets:[{id:"edited-drug",type:"table",title:`Drug Updated: ${et.name}`,dataSource:"api:drugs",config:{filters:[{field:"id",operator:"equals",value:Je}],columns:["name","brand_name","stock","mrp","expiry_date","pack"]},position:{x:0,y:0,w:12,h:4}}]})}catch(et){Ne.push({action:"update_drug",status:"error",error:et.message}),ke.push({role:"system",text:` Failed to update drug: ${et.message}`})}}if(Pe.action==="update_lab_test"){const Je=Le.find(et=>et.serial_number===Pe.serial_number);if(Je){const et={...Je,...Pe.updates};await ue(`/api/lab-tests/${Je.id}`,{method:"PUT",body:JSON.stringify(et)}),Ne.push({action:"update_lab_test",status:"success",item:Je.name}),ke.push({role:"system",text:` Updated lab test: ${Je.name}`}),Ke({title:`Updated: ${Je.name}`,widgets:[{id:"edited-lab-test",type:"table",title:`Lab Test Updated: ${Je.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Je.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}else Ne.push({action:"update_lab_test",status:"error",error:`Test with serial ${Pe.serial_number} not found`}),ke.push({role:"system",text:` Lab test with serial ${Pe.serial_number} not found`})}if(Pe.action==="search_lab_inventory"){const Je=Pe.query.toLowerCase(),et=Le.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Je)||Ct.description&&Ct.description.toLowerCase().includes(Je)),dt=et.slice(0,10);Ne.push({action:"search_lab_inventory",status:"success",count:et.length,results:dt.map(Ct=>({serial_number:Ct.serial_number,id:Ct.id,name:Ct.name,price:Ct.price,description:Ct.description}))}),et.length>0?ke.push({role:"system",text:` Found ${et.length} lab tests for "${Pe.query}". Showing top ${dt.length}.`}):ke.push({role:"system",text:` No lab tests found for "${Pe.query}"`})}if(Pe.action==="create_lab_test")try{const Je=Pe.test,et={name:Je.name,price:parseFloat(Je.price)||0,description:Je.description||"",default_parameters:Je.default_parameters||[]},dt=await ue("/api/lab-tests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(et)});if(!dt.ok){const bt=await dt.json();throw new Error(bt.message||"Failed to create lab test")}const Ct=await dt.json();Ne.push({action:"create_lab_test",status:"success",id:Ct.id,name:Je.name}),ke.push({role:"system",text:` Created lab test: ${Je.name}`}),Ke({title:`Created: ${Je.name}`,widgets:[{id:"created-lab-test",type:"table",title:`New Lab Test: ${Je.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Ct.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Je){Ne.push({action:"create_lab_test",status:"error",error:Je.message}),ke.push({role:"system",text:` Failed to create lab test: ${Je.message}`})}if(Pe.action==="search_distributor_purchase"){const Je=Pe.query,et=await ue(`/api/distributors?search=${encodeURIComponent(Je)}`);if(et.ok){const dt=await et.json();x(dt),j(Je),Ne.push({action:"search_distributor_purchase",status:"success",count:dt.length,results:dt}),ke.push({role:"system",text:` Found ${dt.length} distributors for "${Je}"`})}else Ne.push({action:"search_distributor_purchase",status:"error",error:et.statusText}),ke.push({role:"system",text:" Failed to search distributors"})}if(Pe.action==="set_distributor_purchase"){const Je=Pe.distributorId;let et=T.find(dt=>dt.id===Je);et?(v(et),j(et.name),Ne.push({action:"set_distributor_purchase",status:"success",distributor:et.name}),ke.push({role:"system",text:` Selected distributor: ${et.name}`})):(Ne.push({action:"set_distributor_purchase",status:"error",error:"Distributor not found in current search results. Please search first."}),ke.push({role:"system",text:" Distributor not found. Please search first."}))}if(Pe.action==="add_purchase_items"){const Je=Pe.items;let et=0;Je.forEach(dt=>{const bt={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:dt.name||"",composition:dt.composition||"",description:dt.description||"",mrp:dt.mrp||0,stock:dt.stock||0,pack:dt.pack||"",supplier:"",expiry_date:dt.expiry_date||"",rate:dt.rate||0,box_number:dt.box_number||"",gst:dt.gst||0,margin:dt.margin||0,discount:dt.discount||0,brand_name:dt.brand_name||"",batch:dt.batch||"",hsn_code:dt.hsn_code||"",mfg:dt.mfg||"",loose:dt.loose||0,last_updated:"",created_at:""};w(bt),et++}),Ne.push({action:"add_purchase_items",status:"success",count:et}),ke.push({role:"system",text:` Added ${et} items to purchase list`})}if(Pe.action==="edit_purchase_items"){const Je=Pe.updates;let et=0;const dt=I.current||[];Je.forEach(Ct=>{if(Ct.serial_number){const bt=Ct.serial_number-1,Ce=dt[bt];Ce&&Ce.id?(_(Ce.id,{[Ct.field]:Ct.value}),et++):(console.warn(`Row with serial number ${Ct.serial_number} not found.`),ke.push({role:"system",text:` Row #${Ct.serial_number} not found.`}))}}),Ne.push({action:"edit_purchase_items",status:"success",count:et}),ke.push({role:"system",text:` Updated ${et} items`})}if(Pe.action==="open_new_case"){const{name:Je,age:et,gender:dt,complaint:Ct,phone:bt}=Pe;try{const Ce=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Je||"New Patient",age:et||null,gender:dt||null,phone:bt||null,address:null})});if(!Ce.ok){const Tt=await Ce.json().catch(()=>({}));throw Ce.status===403&&((ee=Tt.message)!=null&&ee.includes("Patient limit"))?new Error(`Patient limit reached: ${Tt.message}`):new Error(Tt.message||"Failed to create patient")}const ct=await Ce.json();if(!ct||!ct.id)throw new Error("Created patient has no ID");const At=await ue("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:ct.id,complaint:Ct||"New Case"})});if(!At.ok)throw new Error("Failed to create queue entry");const qe=await At.json(),wt=ct.id;wt&&(l.prefetchQuery({queryKey:Vt.patients.context(wt),queryFn:()=>ue(`/api/patients/${wt}/context`).then(Tt=>Tt.json()),staleTime:1e3*60*5}),l.prefetchQuery({queryKey:Vt.patientDebts.balance(wt),queryFn:()=>ue(`/api/patient-debts/${wt}/balance`).then(Tt=>Tt.json()),staleTime:1e3*60}),l.prefetchQuery({queryKey:Vt.queue.latest(wt),queryFn:()=>ue(`/api/queue/patient/${wt}/latest`).then(Tt=>Tt.json()),staleTime:1e3*5})),o(`/dashboard/edit-complaint/${qe.id}`,{state:{initialComplaint:Ct}}),Ne.push({action:"open_new_case",status:"success",patientId:ct.id,queueId:qe.id}),ke.push({role:"system",text:` Opened new case for ${Je}`}),X(!1),ae.current=!1;return}catch(Ce){Ce.message.includes("Patient limit")&&(o("/start-clinic-subscription"),ke.push({role:"system",text:" Patient limit reached. Redirecting to subscription."})),Ne.push({action:"open_new_case",status:"error",error:Ce.message}),ke.push({role:"system",text:` Failed to open new case: ${Ce.message}`})}}if(Pe.action==="manage_custom_columns"){const{entity:Je,operation:et,column:dt}=Pe,Ct=we.custom_columns_config||{drugs:[],patients:[],lab_tests:[]};let Ce=[...Ct[Je]||[]];if(et==="add"){const At=dt.label.toLowerCase().replace(/[^a-z0-9]/g,"_");Ce.some(qe=>qe.key===At)||Ce.push({...dt,key:At})}else if(et==="remove"){const At=dt.label.toLowerCase().replace(/[^a-z0-9]/g,"_");Ce=Ce.filter(qe=>qe.key!==At&&qe.label!==dt.label)}const ct={...Ct,[Je]:Ce};await ue("/api/clinics/settings",{method:"PUT",body:JSON.stringify({...we,custom_columns_config:ct})}),n&&n(),Ne.push({action:"manage_custom_columns",status:"success",entity:Je,operation:et,column:dt.label}),ke.push({role:"system",text:` ${et==="add"?"Added":"Removed"} custom column '${dt.label}' for ${Je}`})}if(Pe.action==="create_custom_table"){const{name:Je,description:et,columns:dt}=Pe,Ct=dt.map(ct=>({...ct,key:ct.label.toLowerCase().replace(/[^a-z0-9]/g,"_")})),bt=await ue("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Je,description:et,columns:Ct})});if(!bt.ok)throw new Error("Failed to create table");const Ce=await bt.json();L(ct=>[...ct,Ce]),Ne.push({action:"create_custom_table",status:"success",tableId:Ce.id}),ke.push({role:"system",text:` Created custom table: ${Je}`})}if(Pe.action==="add_table_row"){const{tableId:Je,data:et}=Pe;if(!(await ue(`/api/custom-tables/${Je}/records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:et})})).ok)throw new Error("Failed to add row");Ne.push({action:"add_table_row",status:"success"}),ke.push({role:"system",text:" Added row to table"})}if(Pe.action==="update_table_row"){const{recordId:Je,data:et}=Pe;if(!(await ue(`/api/custom-tables/records/${Je}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:et})})).ok)throw new Error("Failed to update row");Ne.push({action:"update_table_row",status:"success"}),ke.push({role:"system",text:" Updated row"})}if(Pe.action==="create_custom_dashboard"){const{name:Je,description:et,widgets:dt}=Pe,Ct=await ue("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Je,description:et,widgets:dt})});if(!Ct.ok)throw new Error("Failed to create dashboard");const bt=await Ct.json();Ne.push({action:"create_custom_dashboard",status:"success",id:bt.id}),ke.push({role:"system",text:` Created dashboard: ${Je}`})}Pe.action==="render_temporary_dashboard"&&(Ke({title:Pe.title,widgets:Pe.widgets}),Ne.push({action:"render_temporary_dashboard",status:"success"}),ke.push({role:"system",text:` Showing temporary dashboard: ${Pe.title}`}))}catch(Je){console.error("Action execution failed",Pe,Je),Ne.push({action:Pe.action,status:"error",error:Je.message}),ke.push({role:"system",text:` Failed to execute action: ${Pe.action}`})}}Be.length>0&&a&&setTimeout(()=>a(Be),500),ke.length>0&&H(Pe=>[...Pe,...ke]);const Ye=[...se,...Ne],rt=`Reflecting on previous actions: ${JSON.stringify(Ne)}. What is the next step? If done, call end_task.`,gt=[...fe,...ke,{role:"model",text:pe},{role:"user",text:rt}];await be(rt,gt,Ye,void 0)}catch(we){console.error(we),H(Ue=>[...Ue,{role:"model",text:"Something went wrong."}]),X(!1),ae.current=!1}}},re=b.useCallback(()=>{H([]),A(""),X(!1),ae.current=!1,G.current=0,W(null)},[]);return{chatQuery:O,setChatQuery:A,chatHistory:V,isProcessing:te,handleSendMessage:ce=>{const fe=ce!==void 0?ce:O;if(!fe.trim()&&!q)return;ae.current=!0,X(!0),G.current=0;const se={role:"user",text:fe};q&&(se.text+=" [Image Attached]"),H(ie=>[...ie,se]);const Q=q||void 0;A(""),W(null),be(fe,V,[],Q)},refreshChat:re,stopGeneration:le,selectedImage:q,handleImageSelect:je,clearImage:Y,temporaryDashboard:Oe,closeTemporaryDashboard:Me,saveTemporaryDashboard:Ie}},Z=({className:e="",width:t,height:n,variant:i="rectangular",animate:a=!0,style:s={}})=>{const o={width:t,height:n,...s};return r.jsx("div",{className:`skeleton skeleton-${i} ${a?"skeleton-animate":""} ${e}`,style:o})};var YC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var l3;function Xhe(){return l3||(l3=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=a(s,i(l)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)t.call(s,l)&&s[l]&&(o=a(o,l));return o}function a(s,o){return o?s?s+" "+o:s+o:s}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(YC)),YC.exports}var Jhe=Xhe();const ud=qn(Jhe);function Pf(e){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(e)}function Zhe(e,t){if(Pf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Pf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g9(e){var t=Zhe(e,"string");return Pf(t)=="symbol"?t:t+""}function Nv(e,t,n){return(t=g9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c3(Object(n),!0).forEach(function(i){Nv(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function efe(e){if(Array.isArray(e))return e}function tfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function xP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function y9(e,t){if(e){if(typeof e=="string")return xP(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xP(e,t):void 0}}function nfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dc(e,t){return efe(e)||tfe(e,t)||y9(e,t)||nfe()}function rfe(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Qc(e,t){if(e==null)return{};var n,i,a=rfe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ife=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function afe(e){var t=e.defaultInputValue,n=t===void 0?"":t,i=e.defaultMenuIsOpen,a=i===void 0?!1:i,s=e.defaultValue,o=s===void 0?null:s,l=e.inputValue,c=e.menuIsOpen,u=e.onChange,f=e.onInputChange,p=e.onMenuClose,g=e.onMenuOpen,x=e.value,v=Qc(e,ife),j=b.useState(l!==void 0?l:n),w=Dc(j,2),_=w[0],T=w[1],C=b.useState(c!==void 0?c:a),O=Dc(C,2),A=O[0],P=O[1],I=b.useState(x!==void 0?x:o),F=Dc(I,2),B=F[0],$=F[1],L=b.useCallback(function(ae,G){typeof u=="function"&&u(ae,G),$(ae)},[u]),V=b.useCallback(function(ae,G){var z;typeof f=="function"&&(z=f(ae,G)),T(z!==void 0?z:ae)},[f]),H=b.useCallback(function(){typeof g=="function"&&g(),P(!0)},[g]),te=b.useCallback(function(){typeof p=="function"&&p(),P(!1)},[p]),X=l!==void 0?l:_,q=c!==void 0?c:A,W=x!==void 0?x:B;return Yt(Yt({},v),{},{inputValue:X,menuIsOpen:q,onChange:L,onInputChange:V,onMenuClose:te,onMenuOpen:H,value:W})}function en(){return en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},en.apply(null,arguments)}function sfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u3(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g9(i.key),i)}}function ofe(e,t,n){return t&&u3(e.prototype,t),n&&u3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vP(e,t){return vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},vP(e,t)}function lfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vP(e,t)}function Bw(e){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bw(e)}function x9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x9=function(){return!!e})()}function cfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ufe(e,t){if(t&&(Pf(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cfe(e)}function dfe(e){var t=x9();return function(){var n,i=Bw(e);if(t){var a=Bw(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return ufe(this,n)}}function hfe(e){if(Array.isArray(e))return xP(e)}function ffe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WD(e){return hfe(e)||ffe(e)||y9(e)||pfe()}function mfe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function gfe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var yfe=function(){function e(n){var i=this;this._insertTag=function(a){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(a,s),i.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(gfe(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var s=mfe(a);try{s.insertRule(i,s.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){var a;return(a=i.parentNode)==null?void 0:a.removeChild(i)}),this.tags=[],this.ctr=0},e}(),sa="-ms-",zw="-moz-",nr="-webkit-",v9="comm",KD="rule",YD="decl",xfe="@import",b9="@keyframes",vfe="@layer",bfe=Math.abs,gN=String.fromCharCode,jfe=Object.assign;function wfe(e,t){return Vi(e,0)^45?(((t<<2^Vi(e,0))<<2^Vi(e,1))<<2^Vi(e,2))<<2^Vi(e,3):0}function j9(e){return e.trim()}function Sfe(e,t){return(e=t.exec(e))?e[0]:e}function rr(e,t,n){return e.replace(t,n)}function bP(e,t){return e.indexOf(t)}function Vi(e,t){return e.charCodeAt(t)|0}function Gv(e,t,n){return e.slice(t,n)}function Al(e){return e.length}function QD(e){return e.length}function Fj(e,t){return t.push(e),e}function Nfe(e,t){return e.map(t).join("")}var yN=1,mg=1,w9=0,cs=0,yi=0,Yg="";function xN(e,t,n,i,a,s,o){return{value:e,root:t,parent:n,type:i,props:a,children:s,line:yN,column:mg,length:o,return:""}}function av(e,t){return jfe(xN("",null,null,"",null,null,0),e,{length:-e.length},t)}function _fe(){return yi}function Cfe(){return yi=cs>0?Vi(Yg,--cs):0,mg--,yi===10&&(mg=1,yN--),yi}function Os(){return yi=cs<w9?Vi(Yg,cs++):0,mg++,yi===10&&(mg=1,yN++),yi}function Il(){return Vi(Yg,cs)}function yw(){return cs}function Yb(e,t){return Gv(Yg,e,t)}function Wv(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function S9(e){return yN=mg=1,w9=Al(Yg=e),cs=0,[]}function N9(e){return Yg="",e}function xw(e){return j9(Yb(cs-1,jP(e===91?e+2:e===40?e+1:e)))}function Tfe(e){for(;(yi=Il())&&yi<33;)Os();return Wv(e)>2||Wv(yi)>3?"":" "}function Afe(e,t){for(;--t&&Os()&&!(yi<48||yi>102||yi>57&&yi<65||yi>70&&yi<97););return Yb(e,yw()+(t<6&&Il()==32&&Os()==32))}function jP(e){for(;Os();)switch(yi){case e:return cs;case 34:case 39:e!==34&&e!==39&&jP(yi);break;case 40:e===41&&jP(e);break;case 92:Os();break}return cs}function Efe(e,t){for(;Os()&&e+yi!==57;)if(e+yi===84&&Il()===47)break;return"/*"+Yb(t,cs-1)+"*"+gN(e===47?e:Os())}function kfe(e){for(;!Wv(Il());)Os();return Yb(e,cs)}function Pfe(e){return N9(vw("",null,null,null,[""],e=S9(e),0,[0],e))}function vw(e,t,n,i,a,s,o,l,c){for(var u=0,f=0,p=o,g=0,x=0,v=0,j=1,w=1,_=1,T=0,C="",O=a,A=s,P=i,I=C;w;)switch(v=T,T=Os()){case 40:if(v!=108&&Vi(I,p-1)==58){bP(I+=rr(xw(T),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=xw(T);break;case 9:case 10:case 13:case 32:I+=Tfe(v);break;case 92:I+=Afe(yw()-1,7);continue;case 47:switch(Il()){case 42:case 47:Fj(Ofe(Efe(Os(),yw()),t,n),c);break;default:I+="/"}break;case 123*j:l[u++]=Al(I)*_;case 125*j:case 59:case 0:switch(T){case 0:case 125:w=0;case 59+f:_==-1&&(I=rr(I,/\f/g,"")),x>0&&Al(I)-p&&Fj(x>32?h3(I+";",i,n,p-1):h3(rr(I," ","")+";",i,n,p-2),c);break;case 59:I+=";";default:if(Fj(P=d3(I,t,n,u,f,a,l,C,O=[],A=[],p),s),T===123)if(f===0)vw(I,t,P,P,O,s,p,l,A);else switch(g===99&&Vi(I,3)===110?100:g){case 100:case 108:case 109:case 115:vw(e,P,P,i&&Fj(d3(e,P,P,0,0,a,l,C,a,O=[],p),A),a,A,p,l,i?O:A);break;default:vw(I,P,P,P,[""],A,0,l,A)}}u=f=x=0,j=_=1,C=I="",p=o;break;case 58:p=1+Al(I),x=v;default:if(j<1){if(T==123)--j;else if(T==125&&j++==0&&Cfe()==125)continue}switch(I+=gN(T),T*j){case 38:_=f>0?1:(I+="\f",-1);break;case 44:l[u++]=(Al(I)-1)*_,_=1;break;case 64:Il()===45&&(I+=xw(Os())),g=Il(),f=p=Al(C=I+=kfe(yw())),T++;break;case 45:v===45&&Al(I)==2&&(j=0)}}return s}function d3(e,t,n,i,a,s,o,l,c,u,f){for(var p=a-1,g=a===0?s:[""],x=QD(g),v=0,j=0,w=0;v<i;++v)for(var _=0,T=Gv(e,p+1,p=bfe(j=o[v])),C=e;_<x;++_)(C=j9(j>0?g[_]+" "+T:rr(T,/&\f/g,g[_])))&&(c[w++]=C);return xN(e,t,n,a===0?KD:l,c,u,f)}function Ofe(e,t,n){return xN(e,t,n,v9,gN(_fe()),Gv(e,2,-2),0)}function h3(e,t,n,i){return xN(e,t,n,YD,Gv(e,0,i),Gv(e,i+1,-1),i)}function Gm(e,t){for(var n="",i=QD(e),a=0;a<i;a++)n+=t(e[a],a,e,t)||"";return n}function Dfe(e,t,n,i){switch(e.type){case vfe:if(e.children.length)break;case xfe:case YD:return e.return=e.return||e.value;case v9:return"";case b9:return e.return=e.value+"{"+Gm(e.children,i)+"}";case KD:e.value=e.props.join(",")}return Al(n=Gm(e.children,i))?e.return=e.value+"{"+n+"}":""}function Mfe(e){var t=QD(e);return function(n,i,a,s){for(var o="",l=0;l<t;l++)o+=e[l](n,i,a,s)||"";return o}}function Ife(e){return function(t){t.root||(t=t.return)&&e(t)}}function Rfe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Lfe=function(t,n,i){for(var a=0,s=0;a=s,s=Il(),a===38&&s===12&&(n[i]=1),!Wv(s);)Os();return Yb(t,cs)},Ffe=function(t,n){var i=-1,a=44;do switch(Wv(a)){case 0:a===38&&Il()===12&&(n[i]=1),t[i]+=Lfe(cs-1,n,i);break;case 2:t[i]+=xw(a);break;case 4:if(a===44){t[++i]=Il()===58?"&\f":"",n[i]=t[i].length;break}default:t[i]+=gN(a)}while(a=Os());return t},$fe=function(t,n){return N9(Ffe(S9(t),n))},f3=new WeakMap,Bfe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,i=t.parent,a=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!f3.get(i))&&!a){f3.set(t,!0);for(var s=[],o=$fe(n,s),l=i.props,c=0,u=0;c<o.length;c++)for(var f=0;f<l.length;f++,u++)t.props[u]=s[c]?o[c].replace(/&\f/g,l[f]):l[f]+" "+o[c]}}},zfe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function _9(e,t){switch(wfe(e,t)){case 5103:return nr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return nr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return nr+e+zw+e+sa+e+e;case 6828:case 4268:return nr+e+sa+e+e;case 6165:return nr+e+sa+"flex-"+e+e;case 5187:return nr+e+rr(e,/(\w+).+(:[^]+)/,nr+"box-$1$2"+sa+"flex-$1$2")+e;case 5443:return nr+e+sa+"flex-item-"+rr(e,/flex-|-self/,"")+e;case 4675:return nr+e+sa+"flex-line-pack"+rr(e,/align-content|flex-|-self/,"")+e;case 5548:return nr+e+sa+rr(e,"shrink","negative")+e;case 5292:return nr+e+sa+rr(e,"basis","preferred-size")+e;case 6060:return nr+"box-"+rr(e,"-grow","")+nr+e+sa+rr(e,"grow","positive")+e;case 4554:return nr+rr(e,/([^-])(transform)/g,"$1"+nr+"$2")+e;case 6187:return rr(rr(rr(e,/(zoom-|grab)/,nr+"$1"),/(image-set)/,nr+"$1"),e,"")+e;case 5495:case 3959:return rr(e,/(image-set\([^]*)/,nr+"$1$`$1");case 4968:return rr(rr(e,/(.+:)(flex-)?(.*)/,nr+"box-pack:$3"+sa+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+nr+e+e;case 4095:case 3583:case 4068:case 2532:return rr(e,/(.+)-inline(.+)/,nr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Al(e)-1-t>6)switch(Vi(e,t+1)){case 109:if(Vi(e,t+4)!==45)break;case 102:return rr(e,/(.+:)(.+)-([^]+)/,"$1"+nr+"$2-$3$1"+zw+(Vi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~bP(e,"stretch")?_9(rr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Vi(e,t+1)!==115)break;case 6444:switch(Vi(e,Al(e)-3-(~bP(e,"!important")&&10))){case 107:return rr(e,":",":"+nr)+e;case 101:return rr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+nr+(Vi(e,14)===45?"inline-":"")+"box$3$1"+nr+"$2$3$1"+sa+"$2box$3")+e}break;case 5936:switch(Vi(e,t+11)){case 114:return nr+e+sa+rr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return nr+e+sa+rr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return nr+e+sa+rr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return nr+e+sa+e+e}return e}var qfe=function(t,n,i,a){if(t.length>-1&&!t.return)switch(t.type){case YD:t.return=_9(t.value,t.length);break;case b9:return Gm([av(t,{value:rr(t.value,"@","@"+nr)})],a);case KD:if(t.length)return Nfe(t.props,function(s){switch(Sfe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Gm([av(t,{props:[rr(s,/:(read-\w+)/,":"+zw+"$1")]})],a);case"::placeholder":return Gm([av(t,{props:[rr(s,/:(plac\w+)/,":"+nr+"input-$1")]}),av(t,{props:[rr(s,/:(plac\w+)/,":"+zw+"$1")]}),av(t,{props:[rr(s,/:(plac\w+)/,sa+"input-$1")]})],a)}return""})}},Ufe=[qfe],Vfe=function(t){var n=t.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(j){var w=j.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var a=t.stylisPlugins||Ufe,s={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(j){for(var w=j.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)s[w[_]]=!0;l.push(j)});var c,u=[Bfe,zfe];{var f,p=[Dfe,Ife(function(j){f.insert(j)})],g=Mfe(u.concat(a,p)),x=function(w){return Gm(Pfe(w),g)};c=function(w,_,T,C){f=T,x(w?w+"{"+_.styles+"}":_.styles),C&&(v.inserted[_.name]=!0)}}var v={key:n,sheet:new yfe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:c};return v.sheet.hydrate(l),v},QC={exports:{}},or={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p3;function Hfe(){if(p3)return or;p3=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,g=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,j=e?Symbol.for("react.block"):60121,w=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,T=e?Symbol.for("react.scope"):60119;function C(A){if(typeof A=="object"&&A!==null){var P=A.$$typeof;switch(P){case t:switch(A=A.type,A){case c:case u:case i:case s:case a:case p:return A;default:switch(A=A&&A.$$typeof,A){case l:case f:case v:case x:case o:return A;default:return P}}case n:return P}}}function O(A){return C(A)===u}return or.AsyncMode=c,or.ConcurrentMode=u,or.ContextConsumer=l,or.ContextProvider=o,or.Element=t,or.ForwardRef=f,or.Fragment=i,or.Lazy=v,or.Memo=x,or.Portal=n,or.Profiler=s,or.StrictMode=a,or.Suspense=p,or.isAsyncMode=function(A){return O(A)||C(A)===c},or.isConcurrentMode=O,or.isContextConsumer=function(A){return C(A)===l},or.isContextProvider=function(A){return C(A)===o},or.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===t},or.isForwardRef=function(A){return C(A)===f},or.isFragment=function(A){return C(A)===i},or.isLazy=function(A){return C(A)===v},or.isMemo=function(A){return C(A)===x},or.isPortal=function(A){return C(A)===n},or.isProfiler=function(A){return C(A)===s},or.isStrictMode=function(A){return C(A)===a},or.isSuspense=function(A){return C(A)===p},or.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===i||A===u||A===s||A===a||A===p||A===g||typeof A=="object"&&A!==null&&(A.$$typeof===v||A.$$typeof===x||A.$$typeof===o||A.$$typeof===l||A.$$typeof===f||A.$$typeof===w||A.$$typeof===_||A.$$typeof===T||A.$$typeof===j)},or.typeOf=C,or}var m3;function Gfe(){return m3||(m3=1,QC.exports=Hfe()),QC.exports}var XC,g3;function Wfe(){if(g3)return XC;g3=1;var e=Gfe(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=i,s[e.Memo]=a;function o(v){return e.isMemo(v)?a:s[v.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;function x(v,j,w){if(typeof j!="string"){if(g){var _=p(j);_&&_!==g&&x(v,_,w)}var T=c(j);u&&(T=T.concat(u(j)));for(var C=o(v),O=o(j),A=0;A<T.length;++A){var P=T[A];if(!n[P]&&!(w&&w[P])&&!(O&&O[P])&&!(C&&C[P])){var I=f(j,P);try{l(v,P,I)}catch{}}}}return v}return XC=x,XC}Wfe();var Kfe=!0;function Yfe(e,t,n){var i="";return n.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):a&&(i+=a+" ")}),i}var C9=function(t,n,i){var a=t.key+"-"+n.name;(i===!1||Kfe===!1)&&t.registered[a]===void 0&&(t.registered[a]=n.styles)},Qfe=function(t,n,i){C9(t,n,i);var a=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+a:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function Xfe(e){for(var t=0,n,i=0,a=e.length;a>=4;++i,a-=4)n=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Jfe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Zfe=/[A-Z]|^ms/g,epe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,T9=function(t){return t.charCodeAt(1)===45},y3=function(t){return t!=null&&typeof t!="boolean"},JC=Rfe(function(e){return T9(e)?e:e.replace(Zfe,"-$&").toLowerCase()}),x3=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(epe,function(i,a,s){return El={name:a,styles:s,next:El},a})}return Jfe[t]!==1&&!T9(t)&&typeof n=="number"&&n!==0?n+"px":n};function Kv(e,t,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return El={name:a.name,styles:a.styles,next:El},a.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)El={name:o.name,styles:o.styles,next:El},o=o.next;var l=s.styles+";";return l}return tpe(e,t,n)}case"function":{if(e!==void 0){var c=El,u=n(e);return El=c,Kv(e,t,u)}break}}var f=n;return f}function tpe(e,t,n){var i="";if(Array.isArray(n))for(var a=0;a<n.length;a++)i+=Kv(e,t,n[a])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var l=o;y3(l)&&(i+=JC(s)+":"+x3(s,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&t==null)for(var c=0;c<o.length;c++)y3(o[c])&&(i+=JC(s)+":"+x3(s,o[c])+";");else{var u=Kv(e,t,o);switch(s){case"animation":case"animationName":{i+=JC(s)+":"+u+";";break}default:i+=s+"{"+u+"}"}}}return i}var v3=/label:\s*([^\s;{]+)\s*(;|$)/g,El;function A9(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,a="";El=void 0;var s=e[0];if(s==null||s.raw===void 0)i=!1,a+=Kv(n,t,s);else{var o=s;a+=o[0]}for(var l=1;l<e.length;l++)if(a+=Kv(n,t,e[l]),i){var c=s;a+=c[l]}v3.lastIndex=0;for(var u="",f;(f=v3.exec(a))!==null;)u+="-"+f[1];var p=Xfe(a)+u;return{name:p,styles:a,next:El}}var npe=function(t){return t()},rpe=SI.useInsertionEffect?SI.useInsertionEffect:!1,ipe=rpe||npe,E9=b.createContext(typeof HTMLElement<"u"?Vfe({key:"css"}):null);E9.Provider;var ape=function(t){return b.forwardRef(function(n,i){var a=b.useContext(E9);return t(n,a,i)})},spe=b.createContext({}),XD={}.hasOwnProperty,wP="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ope=function(t,n){var i={};for(var a in n)XD.call(n,a)&&(i[a]=n[a]);return i[wP]=t,i},lpe=function(t){var n=t.cache,i=t.serialized,a=t.isStringTag;return C9(n,i,a),ipe(function(){return Qfe(n,i,a)}),null},cpe=ape(function(e,t,n){var i=e.css;typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var a=e[wP],s=[i],o="";typeof e.className=="string"?o=Yfe(t.registered,s,e.className):e.className!=null&&(o=e.className+" ");var l=A9(s,void 0,b.useContext(spe));o+=t.key+"-"+l.name;var c={};for(var u in e)XD.call(e,u)&&u!=="css"&&u!==wP&&(c[u]=e[u]);return c.className=o,n&&(c.ref=n),b.createElement(b.Fragment,null,b.createElement(lpe,{cache:t,serialized:l,isStringTag:typeof a=="string"}),b.createElement(a,c))}),upe=cpe,qt=function(t,n){var i=arguments;if(n==null||!XD.call(n,"css"))return b.createElement.apply(void 0,i);var a=i.length,s=new Array(a);s[0]=upe,s[1]=ope(t,n);for(var o=2;o<a;o++)s[o]=i[o];return b.createElement.apply(null,s)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(qt||(qt={}));function JD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return A9(t)}function dpe(){var e=JD.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function hpe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const fpe=Math.min,ppe=Math.max,qw=Math.round,$j=Math.floor,Uw=e=>({x:e,y:e});function mpe(e){const{x:t,y:n,width:i,height:a}=e;return{width:i,height:a,top:n,left:t,right:t+i,bottom:n+a,x:t,y:n}}function vN(){return typeof window<"u"}function k9(e){return O9(e)?(e.nodeName||"").toLowerCase():"#document"}function Uc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function P9(e){var t;return(t=(O9(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function O9(e){return vN()?e instanceof Node||e instanceof Uc(e).Node:!1}function gpe(e){return vN()?e instanceof Element||e instanceof Uc(e).Element:!1}function ZD(e){return vN()?e instanceof HTMLElement||e instanceof Uc(e).HTMLElement:!1}function b3(e){return!vN()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Uc(e).ShadowRoot}const ype=new Set(["inline","contents"]);function D9(e){const{overflow:t,overflowX:n,overflowY:i,display:a}=eM(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!ype.has(a)}function xpe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vpe=new Set(["html","body","#document"]);function bpe(e){return vpe.has(k9(e))}function eM(e){return Uc(e).getComputedStyle(e)}function jpe(e){if(k9(e)==="html")return e;const t=e.assignedSlot||e.parentNode||b3(e)&&e.host||P9(e);return b3(t)?t.host:t}function M9(e){const t=jpe(e);return bpe(t)?e.ownerDocument?e.ownerDocument.body:e.body:ZD(t)&&D9(t)?t:M9(t)}function Vw(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=M9(e),s=a===((i=e.ownerDocument)==null?void 0:i.body),o=Uc(a);if(s){const l=SP(o);return t.concat(o,o.visualViewport||[],D9(a)?a:[],l&&n?Vw(l):[])}return t.concat(a,Vw(a,[],n))}function SP(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function wpe(e){const t=eM(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const a=ZD(e),s=a?e.offsetWidth:n,o=a?e.offsetHeight:i,l=qw(n)!==s||qw(i)!==o;return l&&(n=s,i=o),{width:n,height:i,$:l}}function tM(e){return gpe(e)?e:e.contextElement}function j3(e){const t=tM(e);if(!ZD(t))return Uw(1);const n=t.getBoundingClientRect(),{width:i,height:a,$:s}=wpe(t);let o=(s?qw(n.width):n.width)/i,l=(s?qw(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Spe=Uw(0);function Npe(e){const t=Uc(e);return!xpe()||!t.visualViewport?Spe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _pe(e,t,n){return!1}function w3(e,t,n,i){t===void 0&&(t=!1);const a=e.getBoundingClientRect(),s=tM(e);let o=Uw(1);t&&(o=j3(e));const l=_pe()?Npe(s):Uw(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,f=a.width/o.x,p=a.height/o.y;if(s){const g=Uc(s),x=i;let v=g,j=SP(v);for(;j&&i&&x!==v;){const w=j3(j),_=j.getBoundingClientRect(),T=eM(j),C=_.left+(j.clientLeft+parseFloat(T.paddingLeft))*w.x,O=_.top+(j.clientTop+parseFloat(T.paddingTop))*w.y;c*=w.x,u*=w.y,f*=w.x,p*=w.y,c+=C,u+=O,v=Uc(j),j=SP(v)}}return mpe({width:f,height:p,x:c,y:u})}function I9(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Cpe(e,t){let n=null,i;const a=P9(e);function s(){var l;clearTimeout(i),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:f,top:p,width:g,height:x}=u;if(l||t(),!g||!x)return;const v=$j(p),j=$j(a.clientWidth-(f+g)),w=$j(a.clientHeight-(p+x)),_=$j(f),C={rootMargin:-v+"px "+-j+"px "+-w+"px "+-_+"px",threshold:ppe(0,fpe(1,c))||1};let O=!0;function A(P){const I=P[0].intersectionRatio;if(I!==c){if(!O)return o();I?o(!1,I):i=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!I9(u,e.getBoundingClientRect())&&o(),O=!1}try{n=new IntersectionObserver(A,{...C,root:a.ownerDocument})}catch{n=new IntersectionObserver(A,C)}n.observe(e)}return o(!0),s}function Tpe(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=i,u=tM(e),f=a||s?[...u?Vw(u):[],...Vw(t)]:[];f.forEach(_=>{a&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const p=u&&l?Cpe(u,n):null;let g=-1,x=null;o&&(x=new ResizeObserver(_=>{let[T]=_;T&&T.target===u&&x&&(x.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(t)})),n()}),u&&!c&&x.observe(u),x.observe(t));let v,j=c?w3(e):null;c&&w();function w(){const _=w3(e);j&&!I9(j,_)&&n(),j=_,v=requestAnimationFrame(w)}return n(),()=>{var _;f.forEach(T=>{a&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),p==null||p(),(_=x)==null||_.disconnect(),x=null,c&&cancelAnimationFrame(v)}}var NP=b.useLayoutEffect,Ape=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Hw=function(){};function Epe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function kpe(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var s=[].concat(i);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(Epe(e,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var S3=function(t){return $pe(t)?t.filter(Boolean):Pf(t)==="object"&&t!==null?[t]:[]},R9=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var n=Qc(t,Ape);return Yt({},n)},ei=function(t,n,i){var a=t.cx,s=t.getStyles,o=t.getClassNames,l=t.className;return{css:s(n,t),className:a(i??{},o(n,t),l)}};function bN(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Ppe(e){return bN(e)?window.innerHeight:e.clientHeight}function L9(e){return bN(e)?window.pageYOffset:e.scrollTop}function Gw(e,t){if(bN(e)){window.scrollTo(0,t);return}e.scrollTop=t}function Ope(e){var t=getComputedStyle(e),n=t.position==="absolute",i=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var a=e;a=a.parentElement;)if(t=getComputedStyle(a),!(n&&t.position==="static")&&i.test(t.overflow+t.overflowY+t.overflowX))return a;return document.documentElement}function Dpe(e,t,n,i){return n*((e=e/i-1)*e*e+1)+t}function Bj(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Hw,a=L9(e),s=t-a,o=10,l=0;function c(){l+=o;var u=Dpe(l,a,s,n);Gw(e,u),l<n?window.requestAnimationFrame(c):i(e)}c()}function N3(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),a=t.offsetHeight/3;i.bottom+a>n.bottom?Gw(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):i.top-a<n.top&&Gw(e,Math.max(t.offsetTop-a,0))}function Mpe(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function _3(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Ipe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var F9=!1,Rpe={get passive(){return F9=!0}},zj=typeof window<"u"?window:{};zj.addEventListener&&zj.removeEventListener&&(zj.addEventListener("p",Hw,Rpe),zj.removeEventListener("p",Hw,!1));var Lpe=F9;function Fpe(e){return e!=null}function $pe(e){return Array.isArray(e)}function qj(e,t,n){return e?t:n}var Bpe=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=Object.entries(t).filter(function(o){var l=Dc(o,1),c=l[0];return!i.includes(c)});return s.reduce(function(o,l){var c=Dc(l,2),u=c[0],f=c[1];return o[u]=f,o},{})},zpe=["children","innerProps"],qpe=["children","innerProps"];function Upe(e){var t=e.maxHeight,n=e.menuEl,i=e.minHeight,a=e.placement,s=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=Ope(n),u={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return u;var f=c.getBoundingClientRect(),p=f.height,g=n.getBoundingClientRect(),x=g.bottom,v=g.height,j=g.top,w=n.offsetParent.getBoundingClientRect(),_=w.top,T=o?window.innerHeight:Ppe(c),C=L9(c),O=parseInt(getComputedStyle(n).marginBottom,10),A=parseInt(getComputedStyle(n).marginTop,10),P=_-A,I=T-j,F=P+C,B=p-C-j,$=x-T+C+O,L=C+j-A,V=160;switch(a){case"auto":case"bottom":if(I>=v)return{placement:"bottom",maxHeight:t};if(B>=v&&!o)return s&&Bj(c,$,V),{placement:"bottom",maxHeight:t};if(!o&&B>=i||o&&I>=i){s&&Bj(c,$,V);var H=o?I-O:B-O;return{placement:"bottom",maxHeight:H}}if(a==="auto"||o){var te=t,X=o?P:F;return X>=i&&(te=Math.min(X-O-l,t)),{placement:"top",maxHeight:te}}if(a==="bottom")return s&&Gw(c,$),{placement:"bottom",maxHeight:t};break;case"top":if(P>=v)return{placement:"top",maxHeight:t};if(F>=v&&!o)return s&&Bj(c,L,V),{placement:"top",maxHeight:t};if(!o&&F>=i||o&&P>=i){var q=t;return(!o&&F>=i||o&&P>=i)&&(q=o?P-A:F-A),s&&Bj(c,L,V),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}function Vpe(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var $9=function(t){return t==="auto"?"bottom":t},Hpe=function(t,n){var i,a=t.placement,s=t.theme,o=s.borderRadius,l=s.spacing,c=s.colors;return Yt((i={label:"menu"},Nv(i,Vpe(a),"100%"),Nv(i,"position","absolute"),Nv(i,"width","100%"),Nv(i,"zIndex",1),i),n?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},B9=b.createContext(null),Gpe=function(t){var n=t.children,i=t.minMenuHeight,a=t.maxMenuHeight,s=t.menuPlacement,o=t.menuPosition,l=t.menuShouldScrollIntoView,c=t.theme,u=b.useContext(B9)||{},f=u.setPortalPlacement,p=b.useRef(null),g=b.useState(a),x=Dc(g,2),v=x[0],j=x[1],w=b.useState(null),_=Dc(w,2),T=_[0],C=_[1],O=c.spacing.controlHeight;return NP(function(){var A=p.current;if(A){var P=o==="fixed",I=l&&!P,F=Upe({maxHeight:a,menuEl:A,minHeight:i,placement:s,shouldScroll:I,isFixedPosition:P,controlHeight:O});j(F.maxHeight),C(F.placement),f==null||f(F.placement)}},[a,s,o,l,i,f,O]),n({ref:p,placerProps:Yt(Yt({},t),{},{placement:T||$9(s),maxHeight:v})})},Wpe=function(t){var n=t.children,i=t.innerRef,a=t.innerProps;return qt("div",en({},ei(t,"menu",{menu:!0}),{ref:i},a),n)},Kpe=Wpe,Ype=function(t,n){var i=t.maxHeight,a=t.theme.spacing.baseUnit;return Yt({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:a,paddingTop:a})},Qpe=function(t){var n=t.children,i=t.innerProps,a=t.innerRef,s=t.isMulti;return qt("div",en({},ei(t,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:a},i),n)},z9=function(t,n){var i=t.theme,a=i.spacing.baseUnit,s=i.colors;return Yt({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},Xpe=z9,Jpe=z9,Zpe=function(t){var n=t.children,i=n===void 0?"No options":n,a=t.innerProps,s=Qc(t,zpe);return qt("div",en({},ei(Yt(Yt({},s),{},{children:i,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),i)},eme=function(t){var n=t.children,i=n===void 0?"Loading...":n,a=t.innerProps,s=Qc(t,qpe);return qt("div",en({},ei(Yt(Yt({},s),{},{children:i,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),i)},tme=function(t){var n=t.rect,i=t.offset,a=t.position;return{left:n.left,position:a,top:i,width:n.width,zIndex:1}},nme=function(t){var n=t.appendTo,i=t.children,a=t.controlElement,s=t.innerProps,o=t.menuPlacement,l=t.menuPosition,c=b.useRef(null),u=b.useRef(null),f=b.useState($9(o)),p=Dc(f,2),g=p[0],x=p[1],v=b.useMemo(function(){return{setPortalPlacement:x}},[]),j=b.useState(null),w=Dc(j,2),_=w[0],T=w[1],C=b.useCallback(function(){if(a){var I=Mpe(a),F=l==="fixed"?0:window.pageYOffset,B=I[g]+F;(B!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&T({offset:B,rect:I})}},[a,l,g,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);NP(function(){C()},[C]);var O=b.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),a&&c.current&&(u.current=Tpe(a,c.current,C,{elementResize:"ResizeObserver"in window}))},[a,C]);NP(function(){O()},[O]);var A=b.useCallback(function(I){c.current=I,O()},[O]);if(!n&&l!=="fixed"||!_)return null;var P=qt("div",en({ref:A},ei(Yt(Yt({},t),{},{offset:_.offset,position:l,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),i);return qt(B9.Provider,{value:v},n?FQ.createPortal(P,n):P)},rme=function(t){var n=t.isDisabled,i=t.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},ime=function(t){var n=t.children,i=t.innerProps,a=t.isDisabled,s=t.isRtl;return qt("div",en({},ei(t,"container",{"--is-disabled":a,"--is-rtl":s}),i),n)},ame=function(t,n){var i=t.theme.spacing,a=t.isMulti,s=t.hasValue,o=t.selectProps.controlShouldRenderValue;return Yt({alignItems:"center",display:a&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},sme=function(t){var n=t.children,i=t.innerProps,a=t.isMulti,s=t.hasValue;return qt("div",en({},ei(t,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":s}),i),n)},ome=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},lme=function(t){var n=t.children,i=t.innerProps;return qt("div",en({},ei(t,"indicatorsContainer",{indicators:!0}),i),n)},C3,cme=["size"],ume=["innerProps","isRtl","size"],dme={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},q9=function(t){var n=t.size,i=Qc(t,cme);return qt("svg",en({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:dme},i))},nM=function(t){return qt(q9,en({size:20},t),qt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},U9=function(t){return qt(q9,en({size:20},t),qt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},V9=function(t,n){var i=t.isFocused,a=t.theme,s=a.spacing.baseUnit,o=a.colors;return Yt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:i?o.neutral60:o.neutral20,padding:s*2,":hover":{color:i?o.neutral80:o.neutral40}})},hme=V9,fme=function(t){var n=t.children,i=t.innerProps;return qt("div",en({},ei(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),n||qt(U9,null))},pme=V9,mme=function(t){var n=t.children,i=t.innerProps;return qt("div",en({},ei(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),n||qt(nM,null))},gme=function(t,n){var i=t.isDisabled,a=t.theme,s=a.spacing.baseUnit,o=a.colors;return Yt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:i?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},yme=function(t){var n=t.innerProps;return qt("span",en({},n,ei(t,"indicatorSeparator",{"indicator-separator":!0})))},xme=dpe(C3||(C3=hpe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),vme=function(t,n){var i=t.isFocused,a=t.size,s=t.theme,o=s.colors,l=s.spacing.baseUnit;return Yt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},n?{}:{color:i?o.neutral60:o.neutral20,padding:l*2})},ZC=function(t){var n=t.delay,i=t.offset;return qt("span",{css:JD({animation:"".concat(xme," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},bme=function(t){var n=t.innerProps,i=t.isRtl,a=t.size,s=a===void 0?4:a,o=Qc(t,ume);return qt("div",en({},ei(Yt(Yt({},o),{},{innerProps:n,isRtl:i,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),qt(ZC,{delay:0,offset:i}),qt(ZC,{delay:160,offset:!0}),qt(ZC,{delay:320,offset:!i}))},jme=function(t,n){var i=t.isDisabled,a=t.isFocused,s=t.theme,o=s.colors,l=s.borderRadius,c=s.spacing;return Yt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:i?o.neutral5:o.neutral0,borderColor:i?o.neutral10:a?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:a?o.primary:o.neutral30}})},wme=function(t){var n=t.children,i=t.isDisabled,a=t.isFocused,s=t.innerRef,o=t.innerProps,l=t.menuIsOpen;return qt("div",en({ref:s},ei(t,"control",{control:!0,"control--is-disabled":i,"control--is-focused":a,"control--menu-is-open":l}),o,{"aria-disabled":i||void 0}),n)},Sme=wme,Nme=["data"],_me=function(t,n){var i=t.theme.spacing;return n?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},Cme=function(t){var n=t.children,i=t.cx,a=t.getStyles,s=t.getClassNames,o=t.Heading,l=t.headingProps,c=t.innerProps,u=t.label,f=t.theme,p=t.selectProps;return qt("div",en({},ei(t,"group",{group:!0}),c),qt(o,en({},l,{selectProps:p,theme:f,getStyles:a,getClassNames:s,cx:i}),u),qt("div",null,n))},Tme=function(t,n){var i=t.theme,a=i.colors,s=i.spacing;return Yt({label:"group",cursor:"default",display:"block"},n?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},Ame=function(t){var n=R9(t);n.data;var i=Qc(n,Nme);return qt("div",en({},ei(t,"groupHeading",{"group-heading":!0}),i))},Eme=Cme,kme=["innerRef","isDisabled","isHidden","inputClassName"],Pme=function(t,n){var i=t.isDisabled,a=t.value,s=t.theme,o=s.spacing,l=s.colors;return Yt(Yt({visibility:i?"hidden":"visible",transform:a?"translateZ(0)":""},Ome),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},H9={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Ome={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Yt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},H9)},Dme=function(t){return Yt({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},H9)},Mme=function(t){var n=t.cx,i=t.value,a=R9(t),s=a.innerRef,o=a.isDisabled,l=a.isHidden,c=a.inputClassName,u=Qc(a,kme);return qt("div",en({},ei(t,"input",{"input-container":!0}),{"data-value":i||""}),qt("input",en({className:n({input:!0},c),ref:s,style:Dme(l),disabled:o},u)))},Ime=Mme,Rme=function(t,n){var i=t.theme,a=i.spacing,s=i.borderRadius,o=i.colors;return Yt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:a.baseUnit/2})},Lme=function(t,n){var i=t.theme,a=i.borderRadius,s=i.colors,o=t.cropWithEllipsis;return Yt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:a/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Fme=function(t,n){var i=t.theme,a=i.spacing,s=i.borderRadius,o=i.colors,l=t.isFocused;return Yt({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},G9=function(t){var n=t.children,i=t.innerProps;return qt("div",i,n)},$me=G9,Bme=G9;function zme(e){var t=e.children,n=e.innerProps;return qt("div",en({role:"button"},n),t||qt(nM,{size:14}))}var qme=function(t){var n=t.children,i=t.components,a=t.data,s=t.innerProps,o=t.isDisabled,l=t.removeProps,c=t.selectProps,u=i.Container,f=i.Label,p=i.Remove;return qt(u,{data:a,innerProps:Yt(Yt({},ei(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:c},qt(f,{data:a,innerProps:Yt({},ei(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),qt(p,{data:a,innerProps:Yt(Yt({},ei(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:c}))},Ume=qme,Vme=function(t,n){var i=t.isDisabled,a=t.isFocused,s=t.isSelected,o=t.theme,l=o.spacing,c=o.colors;return Yt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?c.primary:a?c.primary25:"transparent",color:i?c.neutral20:s?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:s?c.primary:c.primary50}})},Hme=function(t){var n=t.children,i=t.isDisabled,a=t.isFocused,s=t.isSelected,o=t.innerRef,l=t.innerProps;return qt("div",en({},ei(t,"option",{option:!0,"option--is-disabled":i,"option--is-focused":a,"option--is-selected":s}),{ref:o,"aria-disabled":i},l),n)},Gme=Hme,Wme=function(t,n){var i=t.theme,a=i.spacing,s=i.colors;return Yt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},Kme=function(t){var n=t.children,i=t.innerProps;return qt("div",en({},ei(t,"placeholder",{placeholder:!0}),i),n)},Yme=Kme,Qme=function(t,n){var i=t.isDisabled,a=t.theme,s=a.spacing,o=a.colors;return Yt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:i?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Xme=function(t){var n=t.children,i=t.isDisabled,a=t.innerProps;return qt("div",en({},ei(t,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),a),n)},Jme=Xme,Zme={ClearIndicator:mme,Control:Sme,DropdownIndicator:fme,DownChevron:U9,CrossIcon:nM,Group:Eme,GroupHeading:Ame,IndicatorsContainer:lme,IndicatorSeparator:yme,Input:Ime,LoadingIndicator:bme,Menu:Kpe,MenuList:Qpe,MenuPortal:nme,LoadingMessage:eme,NoOptionsMessage:Zpe,MultiValue:Ume,MultiValueContainer:$me,MultiValueLabel:Bme,MultiValueRemove:zme,Option:Gme,Placeholder:Yme,SelectContainer:ime,SingleValue:Jme,ValueContainer:sme},ege=function(t){return Yt(Yt({},Zme),t.components)},T3=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function tge(e,t){return!!(e===t||T3(e)&&T3(t))}function nge(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!tge(e[n],t[n]))return!1;return!0}function rge(e,t){t===void 0&&(t=nge);var n=null;function i(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;var o=e.apply(this,a);return n={lastResult:o,lastArgs:a,lastThis:this},o}return i.clear=function(){n=null},i}var ige={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},age=function(t){return qt("span",en({css:ige},t))},A3=age,sge={guidance:function(t){var n=t.isSearchable,i=t.isMulti,a=t.tabSelectsValue,s=t.context,o=t.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(t["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var n=t.action,i=t.label,a=i===void 0?"":i,s=t.labels,o=t.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(t){var n=t.context,i=t.focused,a=t.options,s=t.label,o=s===void 0?"":s,l=t.selectValue,c=t.isDisabled,u=t.isSelected,f=t.isAppleDevice,p=function(j,w){return j&&j.length?"".concat(j.indexOf(w)+1," of ").concat(j.length):""};if(n==="value"&&l)return"value ".concat(o," focused, ").concat(p(l,i),".");if(n==="menu"&&f){var g=c?" disabled":"",x="".concat(u?" selected":"").concat(g);return"".concat(o).concat(x,", ").concat(p(a,i),".")}return""},onFilter:function(t){var n=t.inputValue,i=t.resultsMessage;return"".concat(i).concat(n?" for search term "+n:"",".")}},oge=function(t){var n=t.ariaSelection,i=t.focusedOption,a=t.focusedValue,s=t.focusableOptions,o=t.isFocused,l=t.selectValue,c=t.selectProps,u=t.id,f=t.isAppleDevice,p=c.ariaLiveMessages,g=c.getOptionLabel,x=c.inputValue,v=c.isMulti,j=c.isOptionDisabled,w=c.isSearchable,_=c.menuIsOpen,T=c.options,C=c.screenReaderStatus,O=c.tabSelectsValue,A=c.isLoading,P=c["aria-label"],I=c["aria-live"],F=b.useMemo(function(){return Yt(Yt({},sge),p||{})},[p]),B=b.useMemo(function(){var X="";if(n&&F.onChange){var q=n.option,W=n.options,ae=n.removedValue,G=n.removedValues,z=n.value,le=function(be){return Array.isArray(be)?null:be},je=ae||q||le(z),Y=je?g(je):"",Oe=W||G||void 0,Ke=Oe?Oe.map(g):[],Me=Yt({isDisabled:je&&j(je,l),label:Y,labels:Ke},n);X=F.onChange(Me)}return X},[n,F,j,l,g]),$=b.useMemo(function(){var X="",q=i||a,W=!!(i&&l&&l.includes(i));if(q&&F.onFocus){var ae={focused:q,label:g(q),isDisabled:j(q,l),isSelected:W,options:s,context:q===i?"menu":"value",selectValue:l,isAppleDevice:f};X=F.onFocus(ae)}return X},[i,a,g,j,F,s,l,f]),L=b.useMemo(function(){var X="";if(_&&T.length&&!A&&F.onFilter){var q=C({count:s.length});X=F.onFilter({inputValue:x,resultsMessage:q})}return X},[s,x,_,F,T,C,A]),V=(n==null?void 0:n.action)==="initial-input-focus",H=b.useMemo(function(){var X="";if(F.guidance){var q=a?"value":_?"menu":"input";X=F.guidance({"aria-label":P,context:q,isDisabled:i&&j(i,l),isMulti:v,isSearchable:w,tabSelectsValue:O,isInitialFocus:V})}return X},[P,i,a,v,j,w,_,F,l,O,V]),te=qt(b.Fragment,null,qt("span",{id:"aria-selection"},B),qt("span",{id:"aria-focused"},$),qt("span",{id:"aria-results"},L),qt("span",{id:"aria-guidance"},H));return qt(b.Fragment,null,qt(A3,{id:u},V&&te),qt(A3,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!V&&te))},lge=oge,_P=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],cge=new RegExp("["+_P.map(function(e){return e.letters}).join("")+"]","g"),W9={};for(var e2=0;e2<_P.length;e2++)for(var t2=_P[e2],n2=0;n2<t2.letters.length;n2++)W9[t2.letters[n2]]=t2.base;var K9=function(t){return t.replace(cge,function(n){return W9[n]})},uge=rge(K9),E3=function(t){return t.replace(/^\s+|\s+$/g,"")},dge=function(t){return"".concat(t.label," ").concat(t.value)},hge=function(t){return function(n,i){if(n.data.__isNew__)return!0;var a=Yt({ignoreCase:!0,ignoreAccents:!0,stringify:dge,trim:!0,matchFrom:"any"},t),s=a.ignoreCase,o=a.ignoreAccents,l=a.stringify,c=a.trim,u=a.matchFrom,f=c?E3(i):i,p=c?E3(l(n)):l(n);return s&&(f=f.toLowerCase(),p=p.toLowerCase()),o&&(f=uge(f),p=K9(p)),u==="start"?p.substr(0,f.length)===f:p.indexOf(f)>-1}},fge=["innerRef"];function pge(e){var t=e.innerRef,n=Qc(e,fge),i=Bpe(n,"onExited","in","enter","exit","appear");return qt("input",en({ref:t},i,{css:JD({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var mge=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function gge(e){var t=e.isEnabled,n=e.onBottomArrive,i=e.onBottomLeave,a=e.onTopArrive,s=e.onTopLeave,o=b.useRef(!1),l=b.useRef(!1),c=b.useRef(0),u=b.useRef(null),f=b.useCallback(function(w,_){if(u.current!==null){var T=u.current,C=T.scrollTop,O=T.scrollHeight,A=T.clientHeight,P=u.current,I=_>0,F=O-A-C,B=!1;F>_&&o.current&&(i&&i(w),o.current=!1),I&&l.current&&(s&&s(w),l.current=!1),I&&_>F?(n&&!o.current&&n(w),P.scrollTop=O,B=!0,o.current=!0):!I&&-_>C&&(a&&!l.current&&a(w),P.scrollTop=0,B=!0,l.current=!0),B&&mge(w)}},[n,i,a,s]),p=b.useCallback(function(w){f(w,w.deltaY)},[f]),g=b.useCallback(function(w){c.current=w.changedTouches[0].clientY},[]),x=b.useCallback(function(w){var _=c.current-w.changedTouches[0].clientY;f(w,_)},[f]),v=b.useCallback(function(w){if(w){var _=Lpe?{passive:!1}:!1;w.addEventListener("wheel",p,_),w.addEventListener("touchstart",g,_),w.addEventListener("touchmove",x,_)}},[x,g,p]),j=b.useCallback(function(w){w&&(w.removeEventListener("wheel",p,!1),w.removeEventListener("touchstart",g,!1),w.removeEventListener("touchmove",x,!1))},[x,g,p]);return b.useEffect(function(){if(t){var w=u.current;return v(w),function(){j(w)}}},[t,v,j]),function(w){u.current=w}}var k3=["boxSizing","height","overflow","paddingRight","position"],P3={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function O3(e){e.cancelable&&e.preventDefault()}function D3(e){e.stopPropagation()}function M3(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;e===0?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function I3(){return"ontouchstart"in window||navigator.maxTouchPoints}var R3=!!(typeof window<"u"&&window.document&&window.document.createElement),sv=0,_m={capture:!1,passive:!1};function yge(e){var t=e.isEnabled,n=e.accountForScrollbars,i=n===void 0?!0:n,a=b.useRef({}),s=b.useRef(null),o=b.useCallback(function(c){if(R3){var u=document.body,f=u&&u.style;if(i&&k3.forEach(function(v){var j=f&&f[v];a.current[v]=j}),i&&sv<1){var p=parseInt(a.current.paddingRight,10)||0,g=document.body?document.body.clientWidth:0,x=window.innerWidth-g+p||0;Object.keys(P3).forEach(function(v){var j=P3[v];f&&(f[v]=j)}),f&&(f.paddingRight="".concat(x,"px"))}u&&I3()&&(u.addEventListener("touchmove",O3,_m),c&&(c.addEventListener("touchstart",M3,_m),c.addEventListener("touchmove",D3,_m))),sv+=1}},[i]),l=b.useCallback(function(c){if(R3){var u=document.body,f=u&&u.style;sv=Math.max(sv-1,0),i&&sv<1&&k3.forEach(function(p){var g=a.current[p];f&&(f[p]=g)}),u&&I3()&&(u.removeEventListener("touchmove",O3,_m),c&&(c.removeEventListener("touchstart",M3,_m),c.removeEventListener("touchmove",D3,_m)))}},[i]);return b.useEffect(function(){if(t){var c=s.current;return o(c),function(){l(c)}}},[t,o,l]),function(c){s.current=c}}var xge=function(t){var n=t.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},vge={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function bge(e){var t=e.children,n=e.lockEnabled,i=e.captureEnabled,a=i===void 0?!0:i,s=e.onBottomArrive,o=e.onBottomLeave,l=e.onTopArrive,c=e.onTopLeave,u=gge({isEnabled:a,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),f=yge({isEnabled:n}),p=function(x){u(x),f(x)};return qt(b.Fragment,null,n&&qt("div",{onClick:xge,css:vge}),t(p))}var jge={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},wge=function(t){var n=t.name,i=t.onFocus;return qt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:jge,value:"",onChange:function(){}})},Sge=wge;function rM(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Nge(){return rM(/^iPhone/i)}function Y9(){return rM(/^Mac/i)}function _ge(){return rM(/^iPad/i)||Y9()&&navigator.maxTouchPoints>1}function Cge(){return Nge()||_ge()}function Tge(){return Y9()||Cge()}var Age=function(t){return t.label},Ege=function(t){return t.label},kge=function(t){return t.value},Pge=function(t){return!!t.isDisabled},Oge={clearIndicator:pme,container:rme,control:jme,dropdownIndicator:hme,group:_me,groupHeading:Tme,indicatorsContainer:ome,indicatorSeparator:gme,input:Pme,loadingIndicator:vme,loadingMessage:Jpe,menu:Hpe,menuList:Ype,menuPortal:tme,multiValue:Rme,multiValueLabel:Lme,multiValueRemove:Fme,noOptionsMessage:Xpe,option:Vme,placeholder:Wme,singleValue:Qme,valueContainer:ame},Dge={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Mge=4,Q9=4,Ige=38,Rge=Q9*2,Lge={baseUnit:Q9,controlHeight:Ige,menuGutter:Rge},r2={borderRadius:Mge,colors:Dge,spacing:Lge},Fge={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:_3(),captureMenuScroll:!_3(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:hge(),formatGroupLabel:Age,getOptionLabel:Ege,getOptionValue:kge,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Pge,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Ipe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var n=t.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function L3(e,t,n,i){var a=Z9(e,t,n),s=e7(e,t,n),o=J9(e,t),l=Ww(e,t);return{type:"option",data:t,isDisabled:a,isSelected:s,label:o,value:l,index:i}}function bw(e,t){return e.options.map(function(n,i){if("options"in n){var a=n.options.map(function(o,l){return L3(e,o,t,l)}).filter(function(o){return $3(e,o)});return a.length>0?{type:"group",data:n,options:a,index:i}:void 0}var s=L3(e,n,t,i);return $3(e,s)?s:void 0}).filter(Fpe)}function X9(e){return e.reduce(function(t,n){return n.type==="group"?t.push.apply(t,WD(n.options.map(function(i){return i.data}))):t.push(n.data),t},[])}function F3(e,t){return e.reduce(function(n,i){return i.type==="group"?n.push.apply(n,WD(i.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(i.index,"-").concat(a.index)}}))):n.push({data:i.data,id:"".concat(t,"-").concat(i.index)}),n},[])}function $ge(e,t){return X9(bw(e,t))}function $3(e,t){var n=e.inputValue,i=n===void 0?"":n,a=t.data,s=t.isSelected,o=t.label,l=t.value;return(!n7(e)||!s)&&t7(e,{label:o,value:l,data:a},i)}function Bge(e,t){var n=e.focusedValue,i=e.selectValue,a=i.indexOf(n);if(a>-1){var s=t.indexOf(n);if(s>-1)return n;if(a<t.length)return t[a]}return null}function zge(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}var i2=function(t,n){var i,a=(i=t.find(function(s){return s.data===n}))===null||i===void 0?void 0:i.id;return a||null},J9=function(t,n){return t.getOptionLabel(n)},Ww=function(t,n){return t.getOptionValue(n)};function Z9(e,t,n){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,n):!1}function e7(e,t,n){if(n.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,n);var i=Ww(e,t);return n.some(function(a){return Ww(e,a)===i})}function t7(e,t,n){return e.filterOption?e.filterOption(t,n):!0}var n7=function(t){var n=t.hideSelectedOptions,i=t.isMulti;return n===void 0?i:n},qge=1,r7=function(e){lfe(n,e);var t=dfe(n);function n(i){var a;if(sfe(this,n),a=t.call(this,i),a.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.controlRef=null,a.getControlRef=function(c){a.controlRef=c},a.focusedOptionRef=null,a.getFocusedOptionRef=function(c){a.focusedOptionRef=c},a.menuListRef=null,a.getMenuListRef=function(c){a.menuListRef=c},a.inputRef=null,a.getInputRef=function(c){a.inputRef=c},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(c,u){var f=a.props,p=f.onChange,g=f.name;u.name=g,a.ariaOnChange(c,u),p(c,u)},a.setValue=function(c,u,f){var p=a.props,g=p.closeMenuOnSelect,x=p.isMulti,v=p.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:v}),g&&(a.setState({inputIsHiddenAfterUpdate:!x}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(c,{action:u,option:f})},a.selectOption=function(c){var u=a.props,f=u.blurInputOnSelect,p=u.isMulti,g=u.name,x=a.state.selectValue,v=p&&a.isOptionSelected(c,x),j=a.isOptionDisabled(c,x);if(v){var w=a.getOptionValue(c);a.setValue(x.filter(function(_){return a.getOptionValue(_)!==w}),"deselect-option",c)}else if(!j)p?a.setValue([].concat(WD(x),[c]),"select-option",c):a.setValue(c,"select-option");else{a.ariaOnChange(c,{action:"select-option",option:c,name:g});return}f&&a.blurInput()},a.removeValue=function(c){var u=a.props.isMulti,f=a.state.selectValue,p=a.getOptionValue(c),g=f.filter(function(v){return a.getOptionValue(v)!==p}),x=qj(u,g,g[0]||null);a.onChange(x,{action:"remove-value",removedValue:c}),a.focusInput()},a.clearValue=function(){var c=a.state.selectValue;a.onChange(qj(a.props.isMulti,[],null),{action:"clear",removedValues:c})},a.popValue=function(){var c=a.props.isMulti,u=a.state.selectValue,f=u[u.length-1],p=u.slice(0,u.length-1),g=qj(c,p,p[0]||null);f&&a.onChange(g,{action:"pop-value",removedValue:f})},a.getFocusedOptionId=function(c){return i2(a.state.focusableOptionsWithIds,c)},a.getFocusableOptionsWithIds=function(){return F3(bw(a.props,a.state.selectValue),a.getElementId("option"))},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return kpe.apply(void 0,[a.props.classNamePrefix].concat(u))},a.getOptionLabel=function(c){return J9(a.props,c)},a.getOptionValue=function(c){return Ww(a.props,c)},a.getStyles=function(c,u){var f=a.props.unstyled,p=Oge[c](u,f);p.boxSizing="border-box";var g=a.props.styles[c];return g?g(p,u):p},a.getClassNames=function(c,u){var f,p;return(f=(p=a.props.classNames)[c])===null||f===void 0?void 0:f.call(p,u)},a.getElementId=function(c){return"".concat(a.state.instancePrefix,"-").concat(c)},a.getComponents=function(){return ege(a.props)},a.buildCategorizedOptions=function(){return bw(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return X9(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(c,u){a.setState({ariaSelection:Yt({value:c},u)})},a.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(c){a.blockOptionHover=!1},a.onControlMouseDown=function(c){if(!c.defaultPrevented){var u=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&a.onMenuClose():u&&a.openMenu("first"):(u&&(a.openAfterFocus=!0),a.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},a.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!a.props.isDisabled){var u=a.props,f=u.isMulti,p=u.menuIsOpen;a.focusInput(),p?(a.setState({inputIsHiddenAfterUpdate:!f}),a.onMenuClose()):a.openMenu("first"),c.preventDefault()}},a.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(a.clearValue(),c.preventDefault(),a.openAfterFocus=!1,c.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(c){typeof a.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&bN(c.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(c)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(c){var u=c.touches,f=u&&u.item(0);f&&(a.initialTouchX=f.clientX,a.initialTouchY=f.clientY,a.userIsDragging=!1)},a.onTouchMove=function(c){var u=c.touches,f=u&&u.item(0);if(f){var p=Math.abs(f.clientX-a.initialTouchX),g=Math.abs(f.clientY-a.initialTouchY),x=5;a.userIsDragging=p>x||g>x}},a.onTouchEnd=function(c){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(c.target)&&a.menuListRef&&!a.menuListRef.contains(c.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(c){a.userIsDragging||a.onControlMouseDown(c)},a.onClearIndicatorTouchEnd=function(c){a.userIsDragging||a.onClearIndicatorMouseDown(c)},a.onDropdownIndicatorTouchEnd=function(c){a.userIsDragging||a.onDropdownIndicatorMouseDown(c)},a.handleInputChange=function(c){var u=a.props.inputValue,f=c.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(f,{action:"input-change",prevInputValue:u}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(c){a.props.onFocus&&a.props.onFocus(c),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(c){var u=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(c),a.onInputChange("",{action:"input-blur",prevInputValue:u}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(c){if(!(a.blockOptionHover||a.state.focusedOption===c)){var u=a.getFocusableOptions(),f=u.indexOf(c);a.setState({focusedOption:c,focusedOptionId:f>-1?a.getFocusedOptionId(c):null})}},a.shouldHideSelectedOptions=function(){return n7(a.props)},a.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),a.focus()},a.onKeyDown=function(c){var u=a.props,f=u.isMulti,p=u.backspaceRemovesValue,g=u.escapeClearsValue,x=u.inputValue,v=u.isClearable,j=u.isDisabled,w=u.menuIsOpen,_=u.onKeyDown,T=u.tabSelectsValue,C=u.openMenuOnFocus,O=a.state,A=O.focusedOption,P=O.focusedValue,I=O.selectValue;if(!j&&!(typeof _=="function"&&(_(c),c.defaultPrevented))){switch(a.blockOptionHover=!0,c.key){case"ArrowLeft":if(!f||x)return;a.focusValue("previous");break;case"ArrowRight":if(!f||x)return;a.focusValue("next");break;case"Delete":case"Backspace":if(x)return;if(P)a.removeValue(P);else{if(!p)return;f?a.popValue():v&&a.clearValue()}break;case"Tab":if(a.isComposing||c.shiftKey||!w||!T||!A||C&&a.isOptionSelected(A,I))return;a.selectOption(A);break;case"Enter":if(c.keyCode===229)break;if(w){if(!A||a.isComposing)return;a.selectOption(A);break}return;case"Escape":w?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:x}),a.onMenuClose()):v&&g&&a.clearValue();break;case" ":if(x)return;if(!w){a.openMenu("first");break}if(!A)return;a.selectOption(A);break;case"ArrowUp":w?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":w?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!w)return;a.focusOption("pageup");break;case"PageDown":if(!w)return;a.focusOption("pagedown");break;case"Home":if(!w)return;a.focusOption("first");break;case"End":if(!w)return;a.focusOption("last");break;default:return}c.preventDefault()}},a.state.instancePrefix="react-select-"+(a.props.instanceId||++qge),a.state.selectValue=S3(i.value),i.menuIsOpen&&a.state.selectValue.length){var s=a.getFocusableOptionsWithIds(),o=a.buildFocusableOptions(),l=o.indexOf(a.state.selectValue[0]);a.state.focusableOptionsWithIds=s,a.state.focusedOption=o[l],a.state.focusedOptionId=i2(s,o[l])}return a}return ofe(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&N3(this.menuListRef,this.focusedOptionRef),Tge()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,c=this.state.isFocused;(c&&!o&&a.isDisabled||c&&l&&!a.menuIsOpen)&&this.focusInput(),c&&o&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(N3(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,s){this.props.onInputChange(a,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var s=this,o=this.state,l=o.selectValue,c=o.isFocused,u=this.buildFocusableOptions(),f=a==="first"?0:u.length-1;if(!this.props.isMulti){var p=u.indexOf(l[0]);p>-1&&(f=p)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[f],focusedOptionId:this.getFocusedOptionId(u[f])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(a){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var u=o.length-1,f=-1;if(o.length){switch(a){case"previous":c===0?f=0:c===-1?f=u:f=c-1;break;case"next":c>-1&&c<u&&(f=c+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:o[f]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,u=l.indexOf(o);o||(u=-1),a==="up"?c=u>0?u-1:l.length-1:a==="down"?c=(u+1)%l.length:a==="pageup"?(c=u-s,c<0&&(c=0)):a==="pagedown"?(c=u+s,c>l.length-1&&(c=l.length-1)):a==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(r2):Yt(Yt({},r2),this.props.theme):r2}},{key:"getCommonProps",value:function(){var a=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,u=this.selectOption,f=this.setValue,p=this.props,g=p.isMulti,x=p.isRtl,v=p.options,j=this.hasValue();return{clearValue:a,cx:s,getStyles:o,getClassNames:l,getValue:c,hasValue:j,isMulti:g,isRtl:x,options:v,selectOption:u,selectProps:p,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,s=a.isClearable,o=a.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(a,s){return Z9(this.props,a,s)}},{key:"isOptionSelected",value:function(a,s){return e7(this.props,a,s)}},{key:"filterOption",value:function(a,s){return t7(this.props,a,s)}},{key:"formatOptionLabel",value:function(a,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(a,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var a=this.props,s=a.isDisabled,o=a.isSearchable,l=a.inputId,c=a.inputValue,u=a.tabIndex,f=a.form,p=a.menuIsOpen,g=a.required,x=this.getComponents(),v=x.Input,j=this.state,w=j.inputIsHidden,_=j.ariaSelection,T=this.commonProps,C=l||this.getElementId("input"),O=Yt(Yt(Yt({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?b.createElement(v,en({},T,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:s,isHidden:w,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:f,type:"text",value:c},O)):b.createElement(pge,en({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Hw,onFocus:this.onInputFocus,disabled:s,tabIndex:u,inputMode:"none",form:f,value:""},O))}},{key:"renderPlaceholderOrValue",value:function(){var a=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,c=s.MultiValueLabel,u=s.MultiValueRemove,f=s.SingleValue,p=s.Placeholder,g=this.commonProps,x=this.props,v=x.controlShouldRenderValue,j=x.isDisabled,w=x.isMulti,_=x.inputValue,T=x.placeholder,C=this.state,O=C.selectValue,A=C.focusedValue,P=C.isFocused;if(!this.hasValue()||!v)return _?null:b.createElement(p,en({},g,{key:"placeholder",isDisabled:j,isFocused:P,innerProps:{id:this.getElementId("placeholder")}}),T);if(w)return O.map(function(F,B){var $=F===A,L="".concat(a.getOptionLabel(F),"-").concat(a.getOptionValue(F));return b.createElement(o,en({},g,{components:{Container:l,Label:c,Remove:u},isFocused:$,isDisabled:j,key:L,index:B,removeProps:{onClick:function(){return a.removeValue(F)},onTouchEnd:function(){return a.removeValue(F)},onMouseDown:function(H){H.preventDefault()}},data:F}),a.formatOptionLabel(F,"value"))});if(_)return null;var I=O[0];return b.createElement(f,en({},g,{data:I,isDisabled:j}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),s=a.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,u=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||u)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(s,en({},o,{innerProps:p,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),s=a.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,u=l.isLoading,f=this.state.isFocused;if(!s||!u)return null;var p={"aria-hidden":"true"};return b.createElement(s,en({},o,{innerProps:p,isDisabled:c,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),s=a.DropdownIndicator,o=a.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused;return b.createElement(o,en({},l,{isDisabled:c,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),s=a.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(s,en({},o,{innerProps:u,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var a=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,c=s.Menu,u=s.MenuList,f=s.MenuPortal,p=s.LoadingMessage,g=s.NoOptionsMessage,x=s.Option,v=this.commonProps,j=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,T=w.inputValue,C=w.isLoading,O=w.loadingMessage,A=w.minMenuHeight,P=w.maxMenuHeight,I=w.menuIsOpen,F=w.menuPlacement,B=w.menuPosition,$=w.menuPortalTarget,L=w.menuShouldBlockScroll,V=w.menuShouldScrollIntoView,H=w.noOptionsMessage,te=w.onMenuScrollToTop,X=w.onMenuScrollToBottom;if(!I)return null;var q=function(Y,Oe){var Ke=Y.type,Me=Y.data,Ie=Y.isDisabled,be=Y.isSelected,re=Y.label,ve=Y.value,ce=j===Me,fe=Ie?void 0:function(){return a.onOptionHover(Me)},se=Ie?void 0:function(){return a.selectOption(Me)},Q="".concat(a.getElementId("option"),"-").concat(Oe),ie={id:Q,onClick:se,onMouseMove:fe,onMouseOver:fe,tabIndex:-1,role:"option","aria-selected":a.state.isAppleDevice?void 0:be};return b.createElement(x,en({},v,{innerProps:ie,data:Me,isDisabled:Ie,isSelected:be,key:Q,label:re,type:Ke,value:ve,isFocused:ce,innerRef:ce?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(Y.data,"menu"))},W;if(this.hasOptions())W=this.getCategorizedOptions().map(function(je){if(je.type==="group"){var Y=je.data,Oe=je.options,Ke=je.index,Me="".concat(a.getElementId("group"),"-").concat(Ke),Ie="".concat(Me,"-heading");return b.createElement(o,en({},v,{key:Me,data:Y,options:Oe,Heading:l,headingProps:{id:Ie,data:je.data},label:a.formatGroupLabel(je.data)}),je.options.map(function(be){return q(be,"".concat(Ke,"-").concat(be.index))}))}else if(je.type==="option")return q(je,"".concat(je.index))});else if(C){var ae=O({inputValue:T});if(ae===null)return null;W=b.createElement(p,v,ae)}else{var G=H({inputValue:T});if(G===null)return null;W=b.createElement(g,v,G)}var z={minMenuHeight:A,maxMenuHeight:P,menuPlacement:F,menuPosition:B,menuShouldScrollIntoView:V},le=b.createElement(Gpe,en({},v,z),function(je){var Y=je.ref,Oe=je.placerProps,Ke=Oe.placement,Me=Oe.maxHeight;return b.createElement(c,en({},v,z,{innerRef:Y,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:C,placement:Ke}),b.createElement(bge,{captureEnabled:_,onTopArrive:te,onBottomArrive:X,lockEnabled:L},function(Ie){return b.createElement(u,en({},v,{innerRef:function(re){a.getMenuListRef(re),Ie(re)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:a.getElementId("listbox")},isLoading:C,maxHeight:Me,focusedOption:j}),W)}))});return $||B==="fixed"?b.createElement(f,en({},v,{appendTo:$,controlElement:this.controlRef,menuPlacement:F,menuPosition:B}),le):le}},{key:"renderFormField",value:function(){var a=this,s=this.props,o=s.delimiter,l=s.isDisabled,c=s.isMulti,u=s.name,f=s.required,p=this.state.selectValue;if(f&&!this.hasValue()&&!l)return b.createElement(Sge,{name:u,onFocus:this.onValueInputFocus});if(!(!u||l))if(c)if(o){var g=p.map(function(j){return a.getOptionValue(j)}).join(o);return b.createElement("input",{name:u,type:"hidden",value:g})}else{var x=p.length>0?p.map(function(j,w){return b.createElement("input",{key:"i-".concat(w),name:u,type:"hidden",value:a.getOptionValue(j)})}):b.createElement("input",{name:u,type:"hidden",value:""});return b.createElement("div",null,x)}else{var v=p[0]?this.getOptionValue(p[0]):"";return b.createElement("input",{name:u,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,c=s.focusedValue,u=s.isFocused,f=s.selectValue,p=this.getFocusableOptions();return b.createElement(lge,en({},a,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:u,selectValue:f,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var a=this.getComponents(),s=a.Control,o=a.IndicatorsContainer,l=a.SelectContainer,c=a.ValueContainer,u=this.props,f=u.className,p=u.id,g=u.isDisabled,x=u.menuIsOpen,v=this.state.isFocused,j=this.commonProps=this.getCommonProps();return b.createElement(l,en({},j,{className:f,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),b.createElement(s,en({},j,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:x}),b.createElement(c,en({},j,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),b.createElement(o,en({},j,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,c=s.inputIsHiddenAfterUpdate,u=s.ariaSelection,f=s.isFocused,p=s.prevWasFocused,g=s.instancePrefix,x=a.options,v=a.value,j=a.menuIsOpen,w=a.inputValue,_=a.isMulti,T=S3(v),C={};if(o&&(v!==o.value||x!==o.options||j!==o.menuIsOpen||w!==o.inputValue)){var O=j?$ge(a,T):[],A=j?F3(bw(a,T),"".concat(g,"-option")):[],P=l?Bge(s,T):null,I=zge(s,O),F=i2(A,I);C={selectValue:T,focusedOption:I,focusedOptionId:F,focusableOptionsWithIds:A,focusedValue:P,clearFocusValueOnUpdate:!1}}var B=c!=null&&a!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},$=u,L=f&&p;return f&&!L&&($={value:qj(_,T,T[0]||null),options:T,action:"initial-input-focus"},L=!p),(u==null?void 0:u.action)==="initial-input-focus"&&($=null),Yt(Yt(Yt({},C),B),{},{prevProps:a,ariaSelection:$,prevWasFocused:L})}}]),n}(b.Component);r7.defaultProps=Fge;var Uge=b.forwardRef(function(e,t){var n=afe(e);return b.createElement(r7,en({ref:t},n))}),i7=Uge;const Cm=new Map,a7=(()=>{const e=new Promise(t=>{window.addEventListener("pointerdown",t,{once:!0}),window.addEventListener("keydown",t,{once:!0})});return async t=>{try{const n=new Audio;if(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play(),t!=null&&t.id&&Cm.has(t.id)){const a=Cm.get(t.id);if(a)return a}const i=new AudioContext(t);return t!=null&&t.id&&Cm.set(t.id,i),i}catch{if(await e,t!=null&&t.id&&Cm.has(t.id)){const a=Cm.get(t.id);if(a)return a}const i=new AudioContext(t);return t!=null&&t.id&&Cm.set(t.id,i),i}}})();function Vge(e){var t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n.buffer}const Hge=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,s7=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,Uj=new Map,CP=(e,t)=>{const n=new Blob([`registerProcessor("${e}", ${t})`],{type:"application/javascript"});return URL.createObjectURL(n)};var a2={exports:{}},B3;function Gge(){return B3||(B3=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new a(f,p||c,g),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],x]:c._events[v].push(x):(c._events[v]=x,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new i:delete c._events[u]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)t.call(f,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,v=new Array(x);g<x;g++)v[g]=p[g].fn;return v},l.prototype.listenerCount=function(u){var f=n?n+u:u,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,f,p,g,x,v){var j=n?n+u:u;if(!this._events[j])return!1;var w=this._events[j],_=arguments.length,T,C;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,p),!0;case 4:return w.fn.call(w.context,f,p,g),!0;case 5:return w.fn.call(w.context,f,p,g,x),!0;case 6:return w.fn.call(w.context,f,p,g,x,v),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];w.fn.apply(w.context,T)}else{var O=w.length,A;for(C=0;C<O;C++)switch(w[C].once&&this.removeListener(u,w[C].fn,void 0,!0),_){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,f);break;case 3:w[C].fn.call(w[C].context,f,p);break;case 4:w[C].fn.call(w[C].context,f,p,g);break;default:if(!T)for(A=1,T=new Array(_-1);A<_;A++)T[A-1]=arguments[A];w[C].fn.apply(w[C].context,T)}}return!0},l.prototype.on=function(u,f,p){return s(this,u,f,p,!1)},l.prototype.once=function(u,f,p){return s(this,u,f,p,!0)},l.prototype.removeListener=function(u,f,p,g){var x=n?n+u:u;if(!this._events[x])return this;if(!f)return o(this,x),this;var v=this._events[x];if(v.fn)v.fn===f&&(!g||v.once)&&(!p||v.context===p)&&o(this,x);else{for(var j=0,w=[],_=v.length;j<_;j++)(v[j].fn!==f||g&&!v[j].once||p&&v[j].context!==p)&&w.push(v[j]);w.length?this._events[x]=w.length===1?w[0]:w:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}(a2)),a2.exports}var Wge=Gge();const o7=qn(Wge);function Kge(e){for(var t="",n=new Uint8Array(e),i=n.byteLength,a=0;a<i;a++)t+=String.fromCharCode(n[a]);return window.btoa(t)}class l7 extends o7{constructor(n=16e3){super();xr(this,"stream");xr(this,"audioContext");xr(this,"source");xr(this,"recording",!1);xr(this,"recordingWorklet");xr(this,"vuWorklet");xr(this,"starting",null);this.sampleRate=n}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async n=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await a7({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const i="audio-recorder-worklet",a=CP(i,Hge);await this.audioContext.audioWorklet.addModule(a),this.recordingWorklet=new AudioWorkletNode(this.audioContext,i),this.recordingWorklet.port.onmessage=async o=>{const l=o.data.data.int16arrayBuffer;if(l){const c=Kge(l);this.emit("data",c)}},this.source.connect(this.recordingWorklet);const s="vu-meter";await this.audioContext.audioWorklet.addModule(CP(s,s7)),this.vuWorklet=new AudioWorkletNode(this.audioContext,s),this.vuWorklet.port.onmessage=o=>{this.emit("volume",o.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,n(),this.starting=null})}stop(){const n=()=>{var i,a;(i=this.source)==null||i.disconnect(),(a=this.stream)==null||a.getTracks().forEach(s=>s.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(n);return}n()}}const Yge=3,Qge=({active:e,volume:t,hover:n})=>{const i=b.useRef([]);return b.useEffect(()=>{let a=null;const s=()=>{i.current.forEach((o,l)=>{o&&(o.style.height=`${Math.min(24,4+t*(l===1?400:60))}px`)}),a=window.setTimeout(s,100)};return s(),()=>clearTimeout(a)},[t]),r.jsx("div",{className:ud("audioPulse",{active:e,hover:n}),children:Array(Yge).fill(null).map((a,s)=>r.jsx("div",{ref:o=>{i.current[s]=o},style:{animationDelay:`${s*133}ms`}},s))})};var _v={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Xge=_v.exports,z3;function Jge(){return z3||(z3=1,function(e,t){(function(){var n,i="4.17.21",a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,f="__lodash_placeholder__",p=1,g=2,x=4,v=1,j=2,w=1,_=2,T=4,C=8,O=16,A=32,P=64,I=128,F=256,B=512,$=30,L="...",V=800,H=16,te=1,X=2,q=3,W=1/0,ae=9007199254740991,G=17976931348623157e292,z=NaN,le=4294967295,je=le-1,Y=le>>>1,Oe=[["ary",I],["bind",w],["bindKey",_],["curry",C],["curryRight",O],["flip",B],["partial",A],["partialRight",P],["rearg",F]],Ke="[object Arguments]",Me="[object Array]",Ie="[object AsyncFunction]",be="[object Boolean]",re="[object Date]",ve="[object DOMException]",ce="[object Error]",fe="[object Function]",se="[object GeneratorFunction]",Q="[object Map]",ie="[object Number]",ge="[object Null]",ee="[object Object]",we="[object Promise]",Ue="[object Proxy]",Ge="[object RegExp]",Le="[object Set]",oe="[object String]",_e="[object Symbol]",$e="[object Undefined]",ze="[object WeakMap]",K="[object WeakSet]",ye="[object ArrayBuffer]",pe="[object DataView]",me="[object Float32Array]",Ne="[object Float64Array]",Be="[object Int8Array]",ke="[object Int16Array]",Ye="[object Int32Array]",rt="[object Uint8Array]",gt="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Je="[object Uint32Array]",et=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,Ct=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,Ce=/[&<>"']/g,ct=RegExp(bt.source),At=RegExp(Ce.source),qe=/<%-([\s\S]+?)%>/g,wt=/<%([\s\S]+?)%>/g,Tt=/<%=([\s\S]+?)%>/g,Xn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wr=/^\w*$/,Un=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tn=/[\\^$.*+?()[\]{}|]/g,Nn=RegExp(Tn.source),ui=/^\s+/,Vn=/\s/,Hi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hl=/\{\n\/\* \[wrapped with (.+)\] \*/,Ho=/,? & /,Gl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Od=/[()=,{}\[\]\/\s]/,Go=/\\(\\)?/g,at=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nt=/\w*$/,_t=/^[-+]0x[0-9a-f]+$/i,Rt=/^0b[01]+$/i,jn=/^\[object .+?Constructor\]$/,Mn=/^0o[0-7]+$/i,bi=/^(?:0|[1-9]\d*)$/,ga=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lo=/($^)/,Dd=/['\n\r\u2028\u2029\\]/g,Md="\\ud800-\\udfff",h_="\\u0300-\\u036f",Wf="\\ufe20-\\ufe2f",Kf="\\u20d0-\\u20ff",Rs=h_+Wf+Kf,Yf="\\u2700-\\u27bf",sy="a-z\\xdf-\\xf6\\xf8-\\xff",tu="\\xac\\xb1\\xd7\\xf7",oy="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ly="\\u2000-\\u206f",f_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cy="A-Z\\xc0-\\xd6\\xd8-\\xde",ya="\\ufe0e\\ufe0f",uy=tu+oy+ly+f_,dy="[']",Qf="["+Md+"]",hy="["+uy+"]",Wl="["+Rs+"]",c0="\\d+",za="["+Yf+"]",Xf="["+sy+"]",fy="[^"+Md+uy+c0+Yf+sy+cy+"]",Id="\\ud83c[\\udffb-\\udfff]",nu="(?:"+Wl+"|"+Id+")",py="[^"+Md+"]",Jf="(?:\\ud83c[\\udde6-\\uddff]){2}",Wo="[\\ud800-\\udbff][\\udc00-\\udfff]",ru="["+cy+"]",my="\\u200d",gy="(?:"+Xf+"|"+fy+")",yy="(?:"+ru+"|"+fy+")",u0="(?:"+dy+"(?:d|ll|m|re|s|t|ve))?",d0="(?:"+dy+"(?:D|LL|M|RE|S|T|VE))?",Rd=nu+"?",Zf="["+ya+"]?",xy="(?:"+my+"(?:"+[py,Jf,Wo].join("|")+")"+Zf+Rd+")*",iu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",au="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vy=Zf+Rd+xy,by="(?:"+[za,Jf,Wo].join("|")+")"+vy,h0="(?:"+[py+Wl+"?",Wl,Jf,Wo,Qf].join("|")+")",Ld=RegExp(dy,"g"),co=RegExp(Wl,"g"),Fd=RegExp(Id+"(?="+Id+")|"+h0+vy,"g"),$d=RegExp([ru+"?"+Xf+"+"+u0+"(?="+[hy,ru,"$"].join("|")+")",yy+"+"+d0+"(?="+[hy,ru+gy,"$"].join("|")+")",ru+"?"+gy+"+"+u0,ru+"+"+d0,au,iu,c0,by].join("|"),"g"),Ko=RegExp("["+my+Md+Rs+ya+"]"),jy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ep=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],f0=-1,ir={};ir[me]=ir[Ne]=ir[Be]=ir[ke]=ir[Ye]=ir[rt]=ir[gt]=ir[Pe]=ir[Je]=!0,ir[Ke]=ir[Me]=ir[ye]=ir[be]=ir[pe]=ir[re]=ir[ce]=ir[fe]=ir[Q]=ir[ie]=ir[ee]=ir[Ge]=ir[Le]=ir[oe]=ir[ze]=!1;var Jn={};Jn[Ke]=Jn[Me]=Jn[ye]=Jn[pe]=Jn[be]=Jn[re]=Jn[me]=Jn[Ne]=Jn[Be]=Jn[ke]=Jn[Ye]=Jn[Q]=Jn[ie]=Jn[ee]=Jn[Ge]=Jn[Le]=Jn[oe]=Jn[_e]=Jn[rt]=Jn[gt]=Jn[Pe]=Jn[Je]=!0,Jn[ce]=Jn[fe]=Jn[ze]=!1;var p0={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Gi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bd=parseFloat,p_=parseInt,np=typeof to=="object"&&to&&to.Object===Object&&to,wy=typeof self=="object"&&self&&self.Object===Object&&self,Wr=np||wy||Function("return this")(),su=t&&!t.nodeType&&t,Yo=su&&!0&&e&&!e.nodeType&&e,m0=Yo&&Yo.exports===su,Sy=m0&&np.process,qa=function(){try{var Ve=Yo&&Yo.require&&Yo.require("util").types;return Ve||Sy&&Sy.binding&&Sy.binding("util")}catch{}}(),rp=qa&&qa.isArrayBuffer,g0=qa&&qa.isDate,y0=qa&&qa.isMap,x0=qa&&qa.isRegExp,v0=qa&&qa.isSet,b0=qa&&qa.isTypedArray;function Wi(Ve,st,nt){switch(nt.length){case 0:return Ve.call(st);case 1:return Ve.call(st,nt[0]);case 2:return Ve.call(st,nt[0],nt[1]);case 3:return Ve.call(st,nt[0],nt[1],nt[2])}return Ve.apply(st,nt)}function m_(Ve,st,nt,Et){for(var Qt=-1,Rn=Ve==null?0:Ve.length;++Qt<Rn;){var Kr=Ve[Qt];st(Et,Kr,nt(Kr),Ve)}return Et}function Ua(Ve,st){for(var nt=-1,Et=Ve==null?0:Ve.length;++nt<Et&&st(Ve[nt],nt,Ve)!==!1;);return Ve}function g_(Ve,st){for(var nt=Ve==null?0:Ve.length;nt--&&st(Ve[nt],nt,Ve)!==!1;);return Ve}function j0(Ve,st){for(var nt=-1,Et=Ve==null?0:Ve.length;++nt<Et;)if(!st(Ve[nt],nt,Ve))return!1;return!0}function Ls(Ve,st){for(var nt=-1,Et=Ve==null?0:Ve.length,Qt=0,Rn=[];++nt<Et;){var Kr=Ve[nt];st(Kr,nt,Ve)&&(Rn[Qt++]=Kr)}return Rn}function ip(Ve,st){var nt=Ve==null?0:Ve.length;return!!nt&&ou(Ve,st,0)>-1}function Ny(Ve,st,nt){for(var Et=-1,Qt=Ve==null?0:Ve.length;++Et<Qt;)if(nt(st,Ve[Et]))return!0;return!1}function Ar(Ve,st){for(var nt=-1,Et=Ve==null?0:Ve.length,Qt=Array(Et);++nt<Et;)Qt[nt]=st(Ve[nt],nt,Ve);return Qt}function uo(Ve,st){for(var nt=-1,Et=st.length,Qt=Ve.length;++nt<Et;)Ve[Qt+nt]=st[nt];return Ve}function _y(Ve,st,nt,Et){var Qt=-1,Rn=Ve==null?0:Ve.length;for(Et&&Rn&&(nt=Ve[++Qt]);++Qt<Rn;)nt=st(nt,Ve[Qt],Qt,Ve);return nt}function y_(Ve,st,nt,Et){var Qt=Ve==null?0:Ve.length;for(Et&&Qt&&(nt=Ve[--Qt]);Qt--;)nt=st(nt,Ve[Qt],Qt,Ve);return nt}function Cy(Ve,st){for(var nt=-1,Et=Ve==null?0:Ve.length;++nt<Et;)if(st(Ve[nt],nt,Ve))return!0;return!1}var x_=sp("length");function v_(Ve){return Ve.split("")}function b_(Ve){return Ve.match(Gl)||[]}function w0(Ve,st,nt){var Et;return nt(Ve,function(Qt,Rn,Kr){if(st(Qt,Rn,Kr))return Et=Rn,!1}),Et}function ap(Ve,st,nt,Et){for(var Qt=Ve.length,Rn=nt+(Et?1:-1);Et?Rn--:++Rn<Qt;)if(st(Ve[Rn],Rn,Ve))return Rn;return-1}function ou(Ve,st,nt){return st===st?N_(Ve,st,nt):ap(Ve,lu,nt)}function Ty(Ve,st,nt,Et){for(var Qt=nt-1,Rn=Ve.length;++Qt<Rn;)if(Et(Ve[Qt],st))return Qt;return-1}function lu(Ve){return Ve!==Ve}function S0(Ve,st){var nt=Ve==null?0:Ve.length;return nt?lp(Ve,st)/nt:z}function sp(Ve){return function(st){return st==null?n:st[Ve]}}function op(Ve){return function(st){return Ve==null?n:Ve[st]}}function Ay(Ve,st,nt,Et,Qt){return Qt(Ve,function(Rn,Kr,Ln){nt=Et?(Et=!1,Rn):st(nt,Rn,Kr,Ln)}),nt}function N0(Ve,st){var nt=Ve.length;for(Ve.sort(st);nt--;)Ve[nt]=Ve[nt].value;return Ve}function lp(Ve,st){for(var nt,Et=-1,Qt=Ve.length;++Et<Qt;){var Rn=st(Ve[Et]);Rn!==n&&(nt=nt===n?Rn:nt+Rn)}return nt}function Qo(Ve,st){for(var nt=-1,Et=Array(Ve);++nt<Ve;)Et[nt]=st(nt);return Et}function j_(Ve,st){return Ar(st,function(nt){return[nt,Ve[nt]]})}function _0(Ve){return Ve&&Ve.slice(0,ky(Ve)+1).replace(ui,"")}function xa(Ve){return function(st){return Ve(st)}}function cp(Ve,st){return Ar(st,function(nt){return Ve[nt]})}function cu(Ve,st){return Ve.has(st)}function uu(Ve,st){for(var nt=-1,Et=Ve.length;++nt<Et&&ou(st,Ve[nt],0)>-1;);return nt}function du(Ve,st){for(var nt=Ve.length;nt--&&ou(st,Ve[nt],0)>-1;);return nt}function w_(Ve,st){for(var nt=Ve.length,Et=0;nt--;)Ve[nt]===st&&++Et;return Et}var up=op(p0),C0=op(Gi);function T0(Ve){return"\\"+tp[Ve]}function Ey(Ve,st){return Ve==null?n:Ve[st]}function Xo(Ve){return Ko.test(Ve)}function A0(Ve){return jy.test(Ve)}function E0(Ve){for(var st,nt=[];!(st=Ve.next()).done;)nt.push(st.value);return nt}function dp(Ve){var st=-1,nt=Array(Ve.size);return Ve.forEach(function(Et,Qt){nt[++st]=[Qt,Et]}),nt}function k0(Ve,st){return function(nt){return Ve(st(nt))}}function Jo(Ve,st){for(var nt=-1,Et=Ve.length,Qt=0,Rn=[];++nt<Et;){var Kr=Ve[nt];(Kr===st||Kr===f)&&(Ve[nt]=f,Rn[Qt++]=nt)}return Rn}function hp(Ve){var st=-1,nt=Array(Ve.size);return Ve.forEach(function(Et){nt[++st]=Et}),nt}function S_(Ve){var st=-1,nt=Array(Ve.size);return Ve.forEach(function(Et){nt[++st]=[Et,Et]}),nt}function N_(Ve,st,nt){for(var Et=nt-1,Qt=Ve.length;++Et<Qt;)if(Ve[Et]===st)return Et;return-1}function va(Ve,st,nt){for(var Et=nt+1;Et--;)if(Ve[Et]===st)return Et;return Et}function Fs(Ve){return Xo(Ve)?O0(Ve):x_(Ve)}function Va(Ve){return Xo(Ve)?Py(Ve):v_(Ve)}function ky(Ve){for(var st=Ve.length;st--&&Vn.test(Ve.charAt(st)););return st}var P0=op(Kl);function O0(Ve){for(var st=Fd.lastIndex=0;Fd.test(Ve);)++st;return st}function Py(Ve){return Ve.match(Fd)||[]}function __(Ve){return Ve.match($d)||[]}var hu=function Ve(st){st=st==null?Wr:Zo.defaults(Wr.Object(),st,Zo.pick(Wr,ep));var nt=st.Array,Et=st.Date,Qt=st.Error,Rn=st.Function,Kr=st.Math,Ln=st.Object,fp=st.RegExp,D0=st.String,ba=st.TypeError,pp=nt.prototype,C_=Rn.prototype,fu=Ln.prototype,zd=st["__core-js_shared__"],qd=C_.toString,Hn=fu.hasOwnProperty,fs=0,Oy=function(){var y=/[^.]+$/.exec(zd&&zd.keys&&zd.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Li=fu.toString,Ha=qd.call(Ln),pu=Wr._,Dy=fp("^"+qd.call(Hn).replace(Tn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yl=m0?st.Buffer:n,ps=st.Symbol,mu=st.Uint8Array,Ql=Yl?Yl.allocUnsafe:n,Ud=k0(Ln.getPrototypeOf,Ln),Vd=Ln.create,Xl=fu.propertyIsEnumerable,mp=pp.splice,Ki=ps?ps.isConcatSpreadable:n,Jl=ps?ps.iterator:n,Fi=ps?ps.toStringTag:n,Hd=function(){try{var y=ll(Ln,"defineProperty");return y({},"",{}),y}catch{}}(),gp=st.clearTimeout!==Wr.clearTimeout&&st.clearTimeout,Zl=Et&&Et.now!==Wr.Date.now&&Et.now,My=st.setTimeout!==Wr.setTimeout&&st.setTimeout,gu=Kr.ceil,ho=Kr.floor,el=Ln.getOwnPropertySymbols,yp=Yl?Yl.isBuffer:n,Gd=st.isFinite,Ga=pp.join,Wa=k0(Ln.keys,Ln),Sr=Kr.max,Er=Kr.min,fo=Et.now,ec=st.parseInt,Iy=Kr.random,Ry=pp.reverse,Wd=ll(st,"DataView"),ti=ll(st,"Map"),kr=ll(st,"Promise"),_n=ll(st,"Set"),ms=ll(st,"WeakMap"),Yi=ll(Ln,"create"),yu=ms&&new ms,Ka={},M0=wo(Wd),I0=wo(ti),Kd=wo(kr),Yd=wo(_n),R0=wo(ms),tl=ps?ps.prototype:n,tc=tl?tl.valueOf:n,nl=tl?tl.toString:n;function de(y){if(Lr(y)&&!nn(y)&&!(y instanceof yn)){if(y instanceof Qi)return y;if(Hn.call(y,"__wrapped__"))return ri(y)}return new Qi(y)}var ja=function(){function y(){}return function(S){if(!Or(S))return{};if(Vd)return Vd(S);y.prototype=S;var M=new y;return y.prototype=n,M}}();function Ya(){}function Qi(y,S){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=n}de.templateSettings={escape:qe,evaluate:wt,interpolate:Tt,variable:"",imports:{_:de}},de.prototype=Ya.prototype,de.prototype.constructor=de,Qi.prototype=ja(Ya.prototype),Qi.prototype.constructor=Qi;function yn(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=le,this.__views__=[]}function Qd(){var y=new yn(this.__wrapped__);return y.__actions__=ni(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=ni(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=ni(this.__views__),y}function xp(){if(this.__filtered__){var y=new yn(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function nc(){var y=this.__wrapped__.value(),S=this.__dir__,M=nn(y),U=S<0,ne=M?y.length:0,xe=m1(0,ne,this.__views__),Te=xe.start,Re=xe.end,We=Re-Te,ft=U?Re:Te-1,mt=this.__iteratees__,yt=mt.length,kt=0,Lt=Er(We,this.__takeCount__);if(!M||!U&&ne==We&&Lt==We)return t1(y,this.__actions__);var Xt=[];e:for(;We--&&kt<Lt;){ft+=S;for(var vn=-1,Jt=y[ft];++vn<yt;){var En=mt[vn],$n=En.iteratee,ws=En.type,Aa=$n(Jt);if(ws==X)Jt=Aa;else if(!Aa){if(ws==te)continue e;break e}}Xt[kt++]=Jt}return Xt}yn.prototype=ja(Ya.prototype),yn.prototype.constructor=yn;function $r(y){var S=-1,M=y==null?0:y.length;for(this.clear();++S<M;){var U=y[S];this.set(U[0],U[1])}}function vp(){this.__data__=Yi?Yi(null):{},this.size=0}function L0(y){var S=this.has(y)&&delete this.__data__[y];return this.size-=S?1:0,S}function T_(y){var S=this.__data__;if(Yi){var M=S[y];return M===c?n:M}return Hn.call(S,y)?S[y]:n}function A_(y){var S=this.__data__;return Yi?S[y]!==n:Hn.call(S,y)}function E_(y,S){var M=this.__data__;return this.size+=this.has(y)?0:1,M[y]=Yi&&S===n?c:S,this}$r.prototype.clear=vp,$r.prototype.delete=L0,$r.prototype.get=T_,$r.prototype.has=A_,$r.prototype.set=E_;function fr(y){var S=-1,M=y==null?0:y.length;for(this.clear();++S<M;){var U=y[S];this.set(U[0],U[1])}}function Ly(){this.__data__=[],this.size=0}function Xd(y){var S=this.__data__,M=bu(S,y);if(M<0)return!1;var U=S.length-1;return M==U?S.pop():mp.call(S,M,1),--this.size,!0}function Jd(y){var S=this.__data__,M=bu(S,y);return M<0?n:S[M][1]}function Fy(y){return bu(this.__data__,y)>-1}function xu(y,S){var M=this.__data__,U=bu(M,y);return U<0?(++this.size,M.push([y,S])):M[U][1]=S,this}fr.prototype.clear=Ly,fr.prototype.delete=Xd,fr.prototype.get=Jd,fr.prototype.has=Fy,fr.prototype.set=xu;function Xi(y){var S=-1,M=y==null?0:y.length;for(this.clear();++S<M;){var U=y[S];this.set(U[0],U[1])}}function k_(){this.size=0,this.__data__={hash:new $r,map:new(ti||fr),string:new $r}}function F0(y){var S=Cu(this,y).delete(y);return this.size-=S?1:0,S}function P_(y){return Cu(this,y).get(y)}function $0(y){return Cu(this,y).has(y)}function rc(y,S){var M=Cu(this,y),U=M.size;return M.set(y,S),this.size+=M.size==U?0:1,this}Xi.prototype.clear=k_,Xi.prototype.delete=F0,Xi.prototype.get=P_,Xi.prototype.has=$0,Xi.prototype.set=rc;function po(y){var S=-1,M=y==null?0:y.length;for(this.__data__=new Xi;++S<M;)this.add(y[S])}function bp(y){return this.__data__.set(y,c),this}function B0(y){return this.__data__.has(y)}po.prototype.add=po.prototype.push=bp,po.prototype.has=B0;function $i(y){var S=this.__data__=new fr(y);this.size=S.size}function z0(){this.__data__=new fr,this.size=0}function jp(y){var S=this.__data__,M=S.delete(y);return this.size=S.size,M}function $y(y){return this.__data__.get(y)}function q0(y){return this.__data__.has(y)}function wp(y,S){var M=this.__data__;if(M instanceof fr){var U=M.__data__;if(!ti||U.length<a-1)return U.push([y,S]),this.size=++M.size,this;M=this.__data__=new Xi(U)}return M.set(y,S),this.size=M.size,this}$i.prototype.clear=z0,$i.prototype.delete=jp,$i.prototype.get=$y,$i.prototype.has=q0,$i.prototype.set=wp;function By(y,S){var M=nn(y),U=!M&&Co(y),ne=!M&&!U&&xl(y),xe=!M&&!U&&!ne&&Bu(y),Te=M||U||ne||xe,Re=Te?Qo(y.length,D0):[],We=Re.length;for(var ft in y)(S||Hn.call(y,ft))&&!(Te&&(ft=="length"||ne&&(ft=="offset"||ft=="parent")||xe&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||vs(ft,We)))&&Re.push(ft);return Re}function vu(y){var S=y.length;return S?y[Op(0,S-1)]:n}function U0(y,S){return _h(ni(y),ys(S,0,y.length))}function V0(y){return _h(ni(y))}function $s(y,S,M){(M!==n&&!ia(y[S],M)||M===n&&!(S in y))&&gs(y,S,M)}function ic(y,S,M){var U=y[S];(!(Hn.call(y,S)&&ia(U,M))||M===n&&!(S in y))&&gs(y,S,M)}function bu(y,S){for(var M=y.length;M--;)if(ia(y[M][0],S))return M;return-1}function rl(y,S,M,U){return go(y,function(ne,xe,Te){S(U,ne,M(ne),Te)}),U}function mo(y,S){return y&&ea(S,si(S),y)}function Zd(y,S){return y&&ea(S,fi(S),y)}function gs(y,S,M){S=="__proto__"&&Hd?Hd(y,S,{configurable:!0,enumerable:!0,value:M,writable:!0}):y[S]=M}function eh(y,S){for(var M=-1,U=S.length,ne=nt(U),xe=y==null;++M<U;)ne[M]=xe?n:$h(y,S[M]);return ne}function ys(y,S,M){return y===y&&(M!==n&&(y=y<=M?y:M),S!==n&&(y=y>=S?y:S)),y}function Ai(y,S,M,U,ne,xe){var Te,Re=S&p,We=S&g,ft=S&x;if(M&&(Te=ne?M(y,U,ne,xe):M(y)),Te!==n)return Te;if(!Or(y))return y;var mt=nn(y);if(mt){if(Te=hx(y),!Re)return ni(y,Te)}else{var yt=hi(y),kt=yt==fe||yt==se;if(xl(y))return ix(y,Re);if(yt==ee||yt==Ke||kt&&!ne){if(Te=We||kt?{}:fx(y),!Re)return We?fh(y,Zd(Te,y)):Fp(y,mo(Te,y))}else{if(!Jn[yt])return ne?y:{};Te=px(y,yt,Re)}}xe||(xe=new $i);var Lt=xe.get(y);if(Lt)return Lt;xe.set(y,Te),oj(y)?y.forEach(function(Jt){Te.add(Ai(Jt,S,M,Jt,y,xe))}):cm(y)&&y.forEach(function(Jt,En){Te.set(En,Ai(Jt,S,M,En,y,xe))});var Xt=ft?We?qp:zp:We?fi:si,vn=mt?n:Xt(y);return Ua(vn||y,function(Jt,En){vn&&(En=Jt,Jt=y[En]),ic(Te,En,Ai(Jt,S,M,En,y,xe))}),Te}function H0(y){var S=si(y);return function(M){return zy(M,y,S)}}function zy(y,S,M){var U=M.length;if(y==null)return!U;for(y=Ln(y);U--;){var ne=M[U],xe=S[ne],Te=y[ne];if(Te===n&&!(ne in y)||!xe(Te))return!1}return!0}function ac(y,S,M){if(typeof y!="function")throw new ba(o);return Au(function(){y.apply(n,M)},S)}function il(y,S,M,U){var ne=-1,xe=ip,Te=!0,Re=y.length,We=[],ft=S.length;if(!Re)return We;M&&(S=Ar(S,xa(M))),U?(xe=Ny,Te=!1):S.length>=a&&(xe=cu,Te=!1,S=new po(S));e:for(;++ne<Re;){var mt=y[ne],yt=M==null?mt:M(mt);if(mt=U||mt!==0?mt:0,Te&&yt===yt){for(var kt=ft;kt--;)if(S[kt]===yt)continue e;We.push(mt)}else xe(S,yt,U)||We.push(mt)}return We}var go=lx(Ei),Sp=lx(wu,!0);function qy(y,S){var M=!0;return go(y,function(U,ne,xe){return M=!!S(U,ne,xe),M}),M}function xs(y,S,M){for(var U=-1,ne=y.length;++U<ne;){var xe=y[U],Te=S(xe);if(Te!=null&&(Re===n?Te===Te&&!qi(Te):M(Te,Re)))var Re=Te,We=xe}return We}function mn(y,S,M,U){var ne=y.length;for(M=ln(M),M<0&&(M=-M>ne?0:ne+M),U=U===n||U>ne?ne:ln(U),U<0&&(U+=ne),U=M>U?0:Ks(U);M<U;)y[M++]=S;return y}function Zn(y,S){var M=[];return go(y,function(U,ne,xe){S(U,ne,xe)&&M.push(U)}),M}function Cn(y,S,M,U,ne){var xe=-1,Te=y.length;for(M||(M=bo),ne||(ne=[]);++xe<Te;){var Re=y[xe];S>0&&M(Re)?S>1?Cn(Re,S-1,M,U,ne):uo(ne,Re):U||(ne[ne.length]=Re)}return ne}var ju=hc(),sc=hc(!0);function Ei(y,S){return y&&ju(y,S,si)}function wu(y,S){return y&&sc(y,S,si)}function al(y,S){return Ls(S,function(M){return bs(y[M])})}function Qa(y,S){S=xo(S,y);for(var M=0,U=S.length;y!=null&&M<U;)y=y[Kn(S[M++])];return M&&M==U?y:n}function G0(y,S,M){var U=S(y);return nn(y)?U:uo(U,M(y))}function An(y){return y==null?y===n?$e:ge:Fi&&Fi in Ln(y)?p1(y):b1(y)}function th(y,S){return y>S}function Uy(y,S){return y!=null&&Hn.call(y,S)}function W0(y,S){return y!=null&&S in Ln(y)}function K0(y,S,M){return y>=Er(S,M)&&y<Sr(S,M)}function Vy(y,S,M){for(var U=M?Ny:ip,ne=y[0].length,xe=y.length,Te=xe,Re=nt(xe),We=1/0,ft=[];Te--;){var mt=y[Te];Te&&S&&(mt=Ar(mt,xa(S))),We=Er(mt.length,We),Re[Te]=!M&&(S||ne>=120&&mt.length>=120)?new po(Te&&mt):n}mt=y[0];var yt=-1,kt=Re[0];e:for(;++yt<ne&&ft.length<We;){var Lt=mt[yt],Xt=S?S(Lt):Lt;if(Lt=M||Lt!==0?Lt:0,!(kt?cu(kt,Xt):U(ft,Xt,M))){for(Te=xe;--Te;){var vn=Re[Te];if(!(vn?cu(vn,Xt):U(y[Te],Xt,M)))continue e}kt&&kt.push(Xt),ft.push(Lt)}}return ft}function Hy(y,S,M,U){return Ei(y,function(ne,xe,Te){S(U,M(ne),xe,Te)}),U}function oc(y,S,M){S=xo(S,y),y=Tu(y,S);var U=y==null?y:y[Kn(ki(S))];return U==null?n:Wi(U,y,M)}function Np(y){return Lr(y)&&An(y)==Ke}function Ji(y){return Lr(y)&&An(y)==ye}function Yr(y){return Lr(y)&&An(y)==re}function lc(y,S,M,U,ne){return y===S?!0:y==null||S==null||!Lr(y)&&!Lr(S)?y!==y&&S!==S:nh(y,S,M,U,lc,ne)}function nh(y,S,M,U,ne,xe){var Te=nn(y),Re=nn(S),We=Te?Me:hi(y),ft=Re?Me:hi(S);We=We==Ke?ee:We,ft=ft==Ke?ee:ft;var mt=We==ee,yt=ft==ee,kt=We==ft;if(kt&&xl(y)){if(!xl(S))return!1;Te=!0,mt=!1}if(kt&&!mt)return xe||(xe=new $i),Te||Bu(y)?h1(y,S,M,U,ne,xe):f1(y,S,We,M,U,ne,xe);if(!(M&v)){var Lt=mt&&Hn.call(y,"__wrapped__"),Xt=yt&&Hn.call(S,"__wrapped__");if(Lt||Xt){var vn=Lt?y.value():y,Jt=Xt?S.value():S;return xe||(xe=new $i),ne(vn,Jt,M,U,xe)}}return kt?(xe||(xe=new $i),di(y,S,M,U,ne,xe)):!1}function _p(y){return Lr(y)&&hi(y)==Q}function rh(y,S,M,U){var ne=M.length,xe=ne,Te=!U;if(y==null)return!xe;for(y=Ln(y);ne--;){var Re=M[ne];if(Te&&Re[2]?Re[1]!==y[Re[0]]:!(Re[0]in y))return!1}for(;++ne<xe;){Re=M[ne];var We=Re[0],ft=y[We],mt=Re[1];if(Te&&Re[2]){if(ft===n&&!(We in y))return!1}else{var yt=new $i;if(U)var kt=U(ft,mt,We,y,S,yt);if(!(kt===n?lc(mt,ft,v|j,U,yt):kt))return!1}}return!0}function Bs(y){if(!Or(y)||Kp(y))return!1;var S=bs(y)?Dy:jn;return S.test(wo(y))}function Cp(y){return Lr(y)&&An(y)==Ge}function Gy(y){return Lr(y)&&hi(y)==Le}function Wy(y){return Lr(y)&&yc(y.length)&&!!ir[An(y)]}function Ky(y){return typeof y=="function"?y:y==null?Ze:typeof y=="object"?nn(y)?Ep(y[0],y[1]):Qy(y):Fn(y)}function Tp(y){if(!pr(y))return Wa(y);var S=[];for(var M in Ln(y))Hn.call(y,M)&&M!="constructor"&&S.push(M);return S}function Y0(y){if(!Or(y))return cl(y);var S=pr(y),M=[];for(var U in y)U=="constructor"&&(S||!Hn.call(y,U))||M.push(U);return M}function Ap(y,S){return y<S}function Yy(y,S){var M=-1,U=ii(y)?nt(y.length):[];return go(y,function(ne,xe,Te){U[++M]=S(ne,xe,Te)}),U}function Qy(y){var S=Vp(y);return S.length==1&&S[0][2]?x1(S[0][0],S[0][1]):function(M){return M===y||rh(M,y,S)}}function Ep(y,S){return Gp(y)&&y1(S)?x1(Kn(y),S):function(M){var U=$h(M,y);return U===n&&U===S?Vu(M,y):lc(S,U,v|j)}}function ih(y,S,M,U,ne){y!==S&&ju(S,function(xe,Te){if(ne||(ne=new $i),Or(xe))O_(y,S,Te,M,ih,U,ne);else{var Re=U?U(Yp(y,Te),xe,Te+"",y,S,ne):n;Re===n&&(Re=xe),$s(y,Te,Re)}},fi)}function O_(y,S,M,U,ne,xe,Te){var Re=Yp(y,M),We=Yp(S,M),ft=Te.get(We);if(ft){$s(y,M,ft);return}var mt=xe?xe(Re,We,M+"",y,S,Te):n,yt=mt===n;if(yt){var kt=nn(We),Lt=!kt&&xl(We),Xt=!kt&&!Lt&&Bu(We);mt=We,kt||Lt||Xt?nn(Re)?mt=Re:qr(Re)?mt=ni(Re):Lt?(yt=!1,mt=ix(We,!0)):Xt?(yt=!1,mt=sx(We,!0)):mt=[]:es(We)||Co(We)?(mt=Re,Co(Re)?mt=uj(Re):(!Or(Re)||bs(Re))&&(mt=fx(We))):yt=!1}yt&&(Te.set(We,mt),ne(mt,We,U,xe,Te),Te.delete(We)),$s(y,M,mt)}function Xy(y,S){var M=y.length;if(M)return S+=S<0?M:0,vs(S,M)?y[S]:n}function Jy(y,S,M){S.length?S=Ar(S,function(xe){return nn(xe)?function(Te){return Qa(Te,xe.length===1?xe[0]:xe)}:xe}):S=[Ze];var U=-1;S=Ar(S,xa(Bt()));var ne=Yy(y,function(xe,Te,Re){var We=Ar(S,function(ft){return ft(xe)});return{criteria:We,index:++U,value:xe}});return N0(ne,function(xe,Te){return a1(xe,Te,M)})}function Q0(y,S){return kp(y,S,function(M,U){return Vu(y,U)})}function kp(y,S,M){for(var U=-1,ne=S.length,xe={};++U<ne;){var Te=S[U],Re=Qa(y,Te);M(Re,Te)&&Nu(xe,xo(Te,y),Re)}return xe}function X0(y){return function(S){return Qa(S,y)}}function Pp(y,S,M,U){var ne=U?Ty:ou,xe=-1,Te=S.length,Re=y;for(y===S&&(S=ni(S)),M&&(Re=Ar(y,xa(M)));++xe<Te;)for(var We=0,ft=S[xe],mt=M?M(ft):ft;(We=ne(Re,mt,We,U))>-1;)Re!==y&&mp.call(Re,We,1),mp.call(y,We,1);return y}function Zy(y,S){for(var M=y?S.length:0,U=M-1;M--;){var ne=S[M];if(M==U||ne!==xe){var xe=ne;vs(ne)?mp.call(y,ne,1):lh(y,ne)}}return y}function Op(y,S){return y+ho(Iy()*(S-y+1))}function J0(y,S,M,U){for(var ne=-1,xe=Sr(gu((S-y)/(M||1)),0),Te=nt(xe);xe--;)Te[U?xe:++ne]=y,y+=M;return Te}function ex(y,S){var M="";if(!y||S<1||S>ae)return M;do S%2&&(M+=y),S=ho(S/2),S&&(y+=y);while(S);return M}function hn(y,S){return Sh(mx(y,S,Ze),y+"")}function Su(y){return vu(Gu(y))}function Dp(y,S){var M=Gu(y);return _h(M,ys(S,0,M.length))}function Nu(y,S,M,U){if(!Or(y))return y;S=xo(S,y);for(var ne=-1,xe=S.length,Te=xe-1,Re=y;Re!=null&&++ne<xe;){var We=Kn(S[ne]),ft=M;if(We==="__proto__"||We==="constructor"||We==="prototype")return y;if(ne!=Te){var mt=Re[We];ft=U?U(mt,We,Re):n,ft===n&&(ft=Or(mt)?mt:vs(S[ne+1])?[]:{})}ic(Re,We,ft),Re=Re[We]}return y}var ah=yu?function(y,S){return yu.set(y,S),y}:Ze,sh=Hd?function(y,S){return Hd(y,"toString",{configurable:!0,enumerable:!1,value:Xe(S),writable:!0})}:Ze;function Z0(y){return _h(Gu(y))}function wa(y,S,M){var U=-1,ne=y.length;S<0&&(S=-S>ne?0:ne+S),M=M>ne?ne:M,M<0&&(M+=ne),ne=S>M?0:M-S>>>0,S>>>=0;for(var xe=nt(ne);++U<ne;)xe[U]=y[U+S];return xe}function e1(y,S){var M;return go(y,function(U,ne,xe){return M=S(U,ne,xe),!M}),!!M}function oh(y,S,M){var U=0,ne=y==null?U:y.length;if(typeof S=="number"&&S===S&&ne<=Y){for(;U<ne;){var xe=U+ne>>>1,Te=y[xe];Te!==null&&!qi(Te)&&(M?Te<=S:Te<S)?U=xe+1:ne=xe}return ne}return Mp(y,S,Ze,M)}function Mp(y,S,M,U){var ne=0,xe=y==null?0:y.length;if(xe===0)return 0;S=M(S);for(var Te=S!==S,Re=S===null,We=qi(S),ft=S===n;ne<xe;){var mt=ho((ne+xe)/2),yt=M(y[mt]),kt=yt!==n,Lt=yt===null,Xt=yt===yt,vn=qi(yt);if(Te)var Jt=U||Xt;else ft?Jt=Xt&&(U||kt):Re?Jt=Xt&&kt&&(U||!Lt):We?Jt=Xt&&kt&&!Lt&&(U||!vn):Lt||vn?Jt=!1:Jt=U?yt<=S:yt<S;Jt?ne=mt+1:xe=mt}return Er(xe,je)}function tx(y,S){for(var M=-1,U=y.length,ne=0,xe=[];++M<U;){var Te=y[M],Re=S?S(Te):Te;if(!M||!ia(Re,We)){var We=Re;xe[ne++]=Te===0?0:Te}}return xe}function Ip(y){return typeof y=="number"?y:qi(y)?z:+y}function Zi(y){if(typeof y=="string")return y;if(nn(y))return Ar(y,Zi)+"";if(qi(y))return nl?nl.call(y):"";var S=y+"";return S=="0"&&1/y==-1/0?"-0":S}function yo(y,S,M){var U=-1,ne=ip,xe=y.length,Te=!0,Re=[],We=Re;if(M)Te=!1,ne=Ny;else if(xe>=a){var ft=S?null:u1(y);if(ft)return hp(ft);Te=!1,ne=cu,We=new po}else We=S?[]:Re;e:for(;++U<xe;){var mt=y[U],yt=S?S(mt):mt;if(mt=M||mt!==0?mt:0,Te&&yt===yt){for(var kt=We.length;kt--;)if(We[kt]===yt)continue e;S&&We.push(yt),Re.push(mt)}else ne(We,yt,M)||(We!==Re&&We.push(yt),Re.push(mt))}return Re}function lh(y,S){return S=xo(S,y),y=Tu(y,S),y==null||delete y[Kn(ki(S))]}function nx(y,S,M,U){return Nu(y,S,M(Qa(y,S)),U)}function ch(y,S,M,U){for(var ne=y.length,xe=U?ne:-1;(U?xe--:++xe<ne)&&S(y[xe],xe,y););return M?wa(y,U?0:xe,U?xe+1:ne):wa(y,U?xe+1:0,U?ne:xe)}function t1(y,S){var M=y;return M instanceof yn&&(M=M.value()),_y(S,function(U,ne){return ne.func.apply(ne.thisArg,uo([U],ne.args))},M)}function uh(y,S,M){var U=y.length;if(U<2)return U?yo(y[0]):[];for(var ne=-1,xe=nt(U);++ne<U;)for(var Te=y[ne],Re=-1;++Re<U;)Re!=ne&&(xe[ne]=il(xe[ne]||Te,y[Re],S,M));return yo(Cn(xe,1),S,M)}function rx(y,S,M){for(var U=-1,ne=y.length,xe=S.length,Te={};++U<ne;){var Re=U<xe?S[U]:n;M(Te,y[U],Re)}return Te}function Rp(y){return qr(y)?y:[]}function dh(y){return typeof y=="function"?y:Ze}function xo(y,S){return nn(y)?y:Gp(y,S)?[y]:Vs(Gn(y))}var n1=hn;function sl(y,S,M){var U=y.length;return M=M===n?U:M,!S&&M>=U?y:wa(y,S,M)}var r1=gp||function(y){return Wr.clearTimeout(y)};function ix(y,S){if(S)return y.slice();var M=y.length,U=Ql?Ql(M):new y.constructor(M);return y.copy(U),U}function cc(y){var S=new y.constructor(y.byteLength);return new mu(S).set(new mu(y)),S}function ax(y,S){var M=S?cc(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.byteLength)}function Lp(y){var S=new y.constructor(y.source,Nt.exec(y));return S.lastIndex=y.lastIndex,S}function i1(y){return tc?Ln(tc.call(y)):{}}function sx(y,S){var M=S?cc(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.length)}function hh(y,S){if(y!==S){var M=y!==n,U=y===null,ne=y===y,xe=qi(y),Te=S!==n,Re=S===null,We=S===S,ft=qi(S);if(!Re&&!ft&&!xe&&y>S||xe&&Te&&We&&!Re&&!ft||U&&Te&&We||!M&&We||!ne)return 1;if(!U&&!xe&&!ft&&y<S||ft&&M&&ne&&!U&&!xe||Re&&M&&ne||!Te&&ne||!We)return-1}return 0}function a1(y,S,M){for(var U=-1,ne=y.criteria,xe=S.criteria,Te=ne.length,Re=M.length;++U<Te;){var We=hh(ne[U],xe[U]);if(We){if(U>=Re)return We;var ft=M[U];return We*(ft=="desc"?-1:1)}}return y.index-S.index}function ox(y,S,M,U){for(var ne=-1,xe=y.length,Te=M.length,Re=-1,We=S.length,ft=Sr(xe-Te,0),mt=nt(We+ft),yt=!U;++Re<We;)mt[Re]=S[Re];for(;++ne<Te;)(yt||ne<xe)&&(mt[M[ne]]=y[ne]);for(;ft--;)mt[Re++]=y[ne++];return mt}function s1(y,S,M,U){for(var ne=-1,xe=y.length,Te=-1,Re=M.length,We=-1,ft=S.length,mt=Sr(xe-Re,0),yt=nt(mt+ft),kt=!U;++ne<mt;)yt[ne]=y[ne];for(var Lt=ne;++We<ft;)yt[Lt+We]=S[We];for(;++Te<Re;)(kt||ne<xe)&&(yt[Lt+M[Te]]=y[ne++]);return yt}function ni(y,S){var M=-1,U=y.length;for(S||(S=nt(U));++M<U;)S[M]=y[M];return S}function ea(y,S,M,U){var ne=!M;M||(M={});for(var xe=-1,Te=S.length;++xe<Te;){var Re=S[xe],We=U?U(M[Re],y[Re],Re,M,y):n;We===n&&(We=y[Re]),ne?gs(M,Re,We):ic(M,Re,We)}return M}function Fp(y,S){return ea(y,vh(y),S)}function fh(y,S){return ea(y,Hp(y),S)}function uc(y,S){return function(M,U){var ne=nn(M)?m_:rl,xe=S?S():{};return ne(M,y,Bt(U,2),xe)}}function dc(y){return hn(function(S,M){var U=-1,ne=M.length,xe=ne>1?M[ne-1]:n,Te=ne>2?M[2]:n;for(xe=y.length>3&&typeof xe=="function"?(ne--,xe):n,Te&&zi(M[0],M[1],Te)&&(xe=ne<3?n:xe,ne=1),S=Ln(S);++U<ne;){var Re=M[U];Re&&y(S,Re,U,xe)}return S})}function lx(y,S){return function(M,U){if(M==null)return M;if(!ii(M))return y(M,U);for(var ne=M.length,xe=S?ne:-1,Te=Ln(M);(S?xe--:++xe<ne)&&U(Te[xe],xe,Te)!==!1;);return M}}function hc(y){return function(S,M,U){for(var ne=-1,xe=Ln(S),Te=U(S),Re=Te.length;Re--;){var We=Te[y?Re:++ne];if(M(xe[We],We,xe)===!1)break}return S}}function o1(y,S,M){var U=S&w,ne=Xa(y);function xe(){var Te=this&&this!==Wr&&this instanceof xe?ne:y;return Te.apply(U?M:this,arguments)}return xe}function Sa(y){return function(S){S=Gn(S);var M=Xo(S)?Va(S):n,U=M?M[0]:S.charAt(0),ne=M?sl(M,1).join(""):S.slice(1);return U[y]()+ne}}function Bi(y){return function(S){return _y(E(To(S).replace(Ld,"")),y,"")}}function Xa(y){return function(){var S=arguments;switch(S.length){case 0:return new y;case 1:return new y(S[0]);case 2:return new y(S[0],S[1]);case 3:return new y(S[0],S[1],S[2]);case 4:return new y(S[0],S[1],S[2],S[3]);case 5:return new y(S[0],S[1],S[2],S[3],S[4]);case 6:return new y(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new y(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var M=ja(y.prototype),U=y.apply(M,S);return Or(U)?U:M}}function l1(y,S,M){var U=Xa(y);function ne(){for(var xe=arguments.length,Te=nt(xe),Re=xe,We=pc(ne);Re--;)Te[Re]=arguments[Re];var ft=xe<3&&Te[0]!==We&&Te[xe-1]!==We?[]:Jo(Te,We);if(xe-=ft.length,xe<M)return cx(y,S,Br,ne.placeholder,n,Te,ft,n,n,M-xe);var mt=this&&this!==Wr&&this instanceof ne?U:y;return Wi(mt,this,Te)}return ne}function vo(y){return function(S,M,U){var ne=Ln(S);if(!ii(S)){var xe=Bt(M,3);S=si(S),M=function(Re){return xe(ne[Re],Re,ne)}}var Te=y(S,M,U);return Te>-1?ne[xe?S[Te]:Te]:n}}function zs(y){return Nr(function(S){var M=S.length,U=M,ne=Qi.prototype.thru;for(y&&S.reverse();U--;){var xe=S[U];if(typeof xe!="function")throw new ba(o);if(ne&&!Te&&xh(xe)=="wrapper")var Te=new Qi([],!0)}for(U=Te?U:M;++U<M;){xe=S[U];var Re=xh(xe),We=Re=="wrapper"?Up(xe):n;We&&Wp(We[0])&&We[1]==(I|C|A|F)&&!We[4].length&&We[9]==1?Te=Te[xh(We[0])].apply(Te,We[3]):Te=xe.length==1&&Wp(xe)?Te[Re]():Te.thru(xe)}return function(){var ft=arguments,mt=ft[0];if(Te&&ft.length==1&&nn(mt))return Te.plant(mt).value();for(var yt=0,kt=M?S[yt].apply(this,ft):mt;++yt<M;)kt=S[yt].call(this,kt);return kt}})}function Br(y,S,M,U,ne,xe,Te,Re,We,ft){var mt=S&I,yt=S&w,kt=S&_,Lt=S&(C|O),Xt=S&B,vn=kt?n:Xa(y);function Jt(){for(var En=arguments.length,$n=nt(En),ws=En;ws--;)$n[ws]=arguments[ws];if(Lt)var Aa=pc(Jt),Ss=w_($n,Aa);if(U&&($n=ox($n,U,ne,Lt)),xe&&($n=s1($n,xe,Te,Lt)),En-=Ss,Lt&&En<ft){var oi=Jo($n,Aa);return cx(y,S,Br,Jt.placeholder,M,$n,oi,Re,We,ft-En)}var Ao=yt?M:this,xc=kt?Ao[y]:y;return En=$n.length,Re?$n=Us($n,Re):Xt&&En>1&&$n.reverse(),mt&&We<En&&($n.length=We),this&&this!==Wr&&this instanceof Jt&&(xc=vn||Xa(xc)),xc.apply(Ao,$n)}return Jt}function ph(y,S){return function(M,U){return Hy(M,y,S(U),{})}}function _u(y,S){return function(M,U){var ne;if(M===n&&U===n)return S;if(M!==n&&(ne=M),U!==n){if(ne===n)return U;typeof M=="string"||typeof U=="string"?(M=Zi(M),U=Zi(U)):(M=Ip(M),U=Ip(U)),ne=y(M,U)}return ne}}function mh(y){return Nr(function(S){return S=Ar(S,xa(Bt())),hn(function(M){var U=this;return y(S,function(ne){return Wi(ne,U,M)})})})}function gh(y,S){S=S===n?" ":Zi(S);var M=S.length;if(M<2)return M?ex(S,y):S;var U=ex(S,gu(y/Fs(S)));return Xo(S)?sl(Va(U),0,y).join(""):U.slice(0,y)}function c1(y,S,M,U){var ne=S&w,xe=Xa(y);function Te(){for(var Re=-1,We=arguments.length,ft=-1,mt=U.length,yt=nt(mt+We),kt=this&&this!==Wr&&this instanceof Te?xe:y;++ft<mt;)yt[ft]=U[ft];for(;We--;)yt[ft++]=arguments[++Re];return Wi(kt,ne?M:this,yt)}return Te}function ol(y){return function(S,M,U){return U&&typeof U!="number"&&zi(S,M,U)&&(M=U=n),S=Ws(S),M===n?(M=S,S=0):M=Ws(M),U=U===n?S<M?1:-1:Ws(U),J0(S,M,U,y)}}function fc(y){return function(S,M){return typeof S=="string"&&typeof M=="string"||(S=ts(S),M=ts(M)),y(S,M)}}function cx(y,S,M,U,ne,xe,Te,Re,We,ft){var mt=S&C,yt=mt?Te:n,kt=mt?n:Te,Lt=mt?xe:n,Xt=mt?n:xe;S|=mt?A:P,S&=~(mt?P:A),S&T||(S&=-4);var vn=[y,S,ne,Lt,yt,Xt,kt,Re,We,ft],Jt=M.apply(n,vn);return Wp(y)&&Qp(Jt,vn),Jt.placeholder=U,Xp(Jt,y,S)}function $p(y){var S=Kr[y];return function(M,U){if(M=ts(M),U=U==null?0:Er(ln(U),292),U&&Gd(M)){var ne=(Gn(M)+"e").split("e"),xe=S(ne[0]+"e"+(+ne[1]+U));return ne=(Gn(xe)+"e").split("e"),+(ne[0]+"e"+(+ne[1]-U))}return S(M)}}var u1=_n&&1/hp(new _n([,-0]))[1]==W?function(y){return new _n(y)}:Ot;function yh(y){return function(S){var M=hi(S);return M==Q?dp(S):M==Le?S_(S):j_(S,y(S))}}function qs(y,S,M,U,ne,xe,Te,Re){var We=S&_;if(!We&&typeof y!="function")throw new ba(o);var ft=U?U.length:0;if(ft||(S&=-97,U=ne=n),Te=Te===n?Te:Sr(ln(Te),0),Re=Re===n?Re:ln(Re),ft-=ne?ne.length:0,S&P){var mt=U,yt=ne;U=ne=n}var kt=We?n:Up(y),Lt=[y,S,M,U,ne,mt,yt,xe,Te,Re];if(kt&&wh(Lt,kt),y=Lt[0],S=Lt[1],M=Lt[2],U=Lt[3],ne=Lt[4],Re=Lt[9]=Lt[9]===n?We?0:y.length:Sr(Lt[9]-ft,0),!Re&&S&(C|O)&&(S&=-25),!S||S==w)var Xt=o1(y,S,M);else S==C||S==O?Xt=l1(y,S,Re):(S==A||S==(w|A))&&!ne.length?Xt=c1(y,S,M,U):Xt=Br.apply(n,Lt);var vn=kt?ah:Qp;return Xp(vn(Xt,Lt),y,S)}function Bp(y,S,M,U){return y===n||ia(y,fu[M])&&!Hn.call(U,M)?S:y}function ux(y,S,M,U,ne,xe){return Or(y)&&Or(S)&&(xe.set(S,y),ih(y,S,n,ux,xe),xe.delete(S)),y}function d1(y){return es(y)?n:y}function h1(y,S,M,U,ne,xe){var Te=M&v,Re=y.length,We=S.length;if(Re!=We&&!(Te&&We>Re))return!1;var ft=xe.get(y),mt=xe.get(S);if(ft&&mt)return ft==S&&mt==y;var yt=-1,kt=!0,Lt=M&j?new po:n;for(xe.set(y,S),xe.set(S,y);++yt<Re;){var Xt=y[yt],vn=S[yt];if(U)var Jt=Te?U(vn,Xt,yt,S,y,xe):U(Xt,vn,yt,y,S,xe);if(Jt!==n){if(Jt)continue;kt=!1;break}if(Lt){if(!Cy(S,function(En,$n){if(!cu(Lt,$n)&&(Xt===En||ne(Xt,En,M,U,xe)))return Lt.push($n)})){kt=!1;break}}else if(!(Xt===vn||ne(Xt,vn,M,U,xe))){kt=!1;break}}return xe.delete(y),xe.delete(S),kt}function f1(y,S,M,U,ne,xe,Te){switch(M){case pe:if(y.byteLength!=S.byteLength||y.byteOffset!=S.byteOffset)return!1;y=y.buffer,S=S.buffer;case ye:return!(y.byteLength!=S.byteLength||!xe(new mu(y),new mu(S)));case be:case re:case ie:return ia(+y,+S);case ce:return y.name==S.name&&y.message==S.message;case Ge:case oe:return y==S+"";case Q:var Re=dp;case Le:var We=U&v;if(Re||(Re=hp),y.size!=S.size&&!We)return!1;var ft=Te.get(y);if(ft)return ft==S;U|=j,Te.set(y,S);var mt=h1(Re(y),Re(S),U,ne,xe,Te);return Te.delete(y),mt;case _e:if(tc)return tc.call(y)==tc.call(S)}return!1}function di(y,S,M,U,ne,xe){var Te=M&v,Re=zp(y),We=Re.length,ft=zp(S),mt=ft.length;if(We!=mt&&!Te)return!1;for(var yt=We;yt--;){var kt=Re[yt];if(!(Te?kt in S:Hn.call(S,kt)))return!1}var Lt=xe.get(y),Xt=xe.get(S);if(Lt&&Xt)return Lt==S&&Xt==y;var vn=!0;xe.set(y,S),xe.set(S,y);for(var Jt=Te;++yt<We;){kt=Re[yt];var En=y[kt],$n=S[kt];if(U)var ws=Te?U($n,En,kt,S,y,xe):U(En,$n,kt,y,S,xe);if(!(ws===n?En===$n||ne(En,$n,M,U,xe):ws)){vn=!1;break}Jt||(Jt=kt=="constructor")}if(vn&&!Jt){var Aa=y.constructor,Ss=S.constructor;Aa!=Ss&&"constructor"in y&&"constructor"in S&&!(typeof Aa=="function"&&Aa instanceof Aa&&typeof Ss=="function"&&Ss instanceof Ss)&&(vn=!1)}return xe.delete(y),xe.delete(S),vn}function Nr(y){return Sh(mx(y,n,na),y+"")}function zp(y){return G0(y,si,vh)}function qp(y){return G0(y,fi,Hp)}var Up=yu?function(y){return yu.get(y)}:Ot;function xh(y){for(var S=y.name+"",M=Ka[S],U=Hn.call(Ka,S)?M.length:0;U--;){var ne=M[U],xe=ne.func;if(xe==null||xe==y)return ne.name}return S}function pc(y){var S=Hn.call(de,"placeholder")?de:y;return S.placeholder}function Bt(){var y=de.iteratee||Gt;return y=y===Gt?Ky:y,arguments.length?y(arguments[0],arguments[1]):y}function Cu(y,S){var M=y.__data__;return jo(S)?M[typeof S=="string"?"string":"hash"]:M.map}function Vp(y){for(var S=si(y),M=S.length;M--;){var U=S[M],ne=y[U];S[M]=[U,ne,y1(ne)]}return S}function ll(y,S){var M=Ey(y,S);return Bs(M)?M:n}function p1(y){var S=Hn.call(y,Fi),M=y[Fi];try{y[Fi]=n;var U=!0}catch{}var ne=Li.call(y);return U&&(S?y[Fi]=M:delete y[Fi]),ne}var vh=el?function(y){return y==null?[]:(y=Ln(y),Ls(el(y),function(S){return Xl.call(y,S)}))}:mC,Hp=el?function(y){for(var S=[];y;)uo(S,vh(y)),y=Ud(y);return S}:mC,hi=An;(Wd&&hi(new Wd(new ArrayBuffer(1)))!=pe||ti&&hi(new ti)!=Q||kr&&hi(kr.resolve())!=we||_n&&hi(new _n)!=Le||ms&&hi(new ms)!=ze)&&(hi=function(y){var S=An(y),M=S==ee?y.constructor:n,U=M?wo(M):"";if(U)switch(U){case M0:return pe;case I0:return Q;case Kd:return we;case Yd:return Le;case R0:return ze}return S});function m1(y,S,M){for(var U=-1,ne=M.length;++U<ne;){var xe=M[U],Te=xe.size;switch(xe.type){case"drop":y+=Te;break;case"dropRight":S-=Te;break;case"take":S=Er(S,y+Te);break;case"takeRight":y=Sr(y,S-Te);break}}return{start:y,end:S}}function dx(y){var S=y.match(Hl);return S?S[1].split(Ho):[]}function bh(y,S,M){S=xo(S,y);for(var U=-1,ne=S.length,xe=!1;++U<ne;){var Te=Kn(S[U]);if(!(xe=y!=null&&M(y,Te)))break;y=y[Te]}return xe||++U!=ne?xe:(ne=y==null?0:y.length,!!ne&&yc(ne)&&vs(Te,ne)&&(nn(y)||Co(y)))}function hx(y){var S=y.length,M=new y.constructor(S);return S&&typeof y[0]=="string"&&Hn.call(y,"index")&&(M.index=y.index,M.input=y.input),M}function fx(y){return typeof y.constructor=="function"&&!pr(y)?ja(Ud(y)):{}}function px(y,S,M){var U=y.constructor;switch(S){case ye:return cc(y);case be:case re:return new U(+y);case pe:return ax(y,M);case me:case Ne:case Be:case ke:case Ye:case rt:case gt:case Pe:case Je:return sx(y,M);case Q:return new U;case ie:case oe:return new U(y);case Ge:return Lp(y);case Le:return new U;case _e:return i1(y)}}function g1(y,S){var M=S.length;if(!M)return y;var U=M-1;return S[U]=(M>1?"& ":"")+S[U],S=S.join(M>2?", ":" "),y.replace(Hi,`{
/* [wrapped with `+S+`] */
`)}function bo(y){return nn(y)||Co(y)||!!(Ki&&y&&y[Ki])}function vs(y,S){var M=typeof y;return S=S??ae,!!S&&(M=="number"||M!="symbol"&&bi.test(y))&&y>-1&&y%1==0&&y<S}function zi(y,S,M){if(!Or(M))return!1;var U=typeof S;return(U=="number"?ii(M)&&vs(S,M.length):U=="string"&&S in M)?ia(M[S],y):!1}function Gp(y,S){if(nn(y))return!1;var M=typeof y;return M=="number"||M=="symbol"||M=="boolean"||y==null||qi(y)?!0:wr.test(y)||!Xn.test(y)||S!=null&&y in Ln(S)}function jo(y){var S=typeof y;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?y!=="__proto__":y===null}function Wp(y){var S=xh(y),M=de[S];if(typeof M!="function"||!(S in yn.prototype))return!1;if(y===M)return!0;var U=Up(M);return!!U&&y===U[0]}function Kp(y){return!!Oy&&Oy in y}var jh=zd?bs:gC;function pr(y){var S=y&&y.constructor,M=typeof S=="function"&&S.prototype||fu;return y===M}function y1(y){return y===y&&!Or(y)}function x1(y,S){return function(M){return M==null?!1:M[y]===S&&(S!==n||y in Ln(M))}}function v1(y){var S=Dh(y,function(U){return M.size===u&&M.clear(),U}),M=S.cache;return S}function wh(y,S){var M=y[1],U=S[1],ne=M|U,xe=ne<(w|_|I),Te=U==I&&M==C||U==I&&M==F&&y[7].length<=S[8]||U==(I|F)&&S[7].length<=S[8]&&M==C;if(!(xe||Te))return y;U&w&&(y[2]=S[2],ne|=M&w?0:T);var Re=S[3];if(Re){var We=y[3];y[3]=We?ox(We,Re,S[4]):Re,y[4]=We?Jo(y[3],f):S[4]}return Re=S[5],Re&&(We=y[5],y[5]=We?s1(We,Re,S[6]):Re,y[6]=We?Jo(y[5],f):S[6]),Re=S[7],Re&&(y[7]=Re),U&I&&(y[8]=y[8]==null?S[8]:Er(y[8],S[8])),y[9]==null&&(y[9]=S[9]),y[0]=S[0],y[1]=ne,y}function cl(y){var S=[];if(y!=null)for(var M in Ln(y))S.push(M);return S}function b1(y){return Li.call(y)}function mx(y,S,M){return S=Sr(S===n?y.length-1:S,0),function(){for(var U=arguments,ne=-1,xe=Sr(U.length-S,0),Te=nt(xe);++ne<xe;)Te[ne]=U[S+ne];ne=-1;for(var Re=nt(S+1);++ne<S;)Re[ne]=U[ne];return Re[S]=M(Te),Wi(y,this,Re)}}function Tu(y,S){return S.length<2?y:Qa(y,wa(S,0,-1))}function Us(y,S){for(var M=y.length,U=Er(S.length,M),ne=ni(y);U--;){var xe=S[U];y[U]=vs(xe,M)?ne[xe]:n}return y}function Yp(y,S){if(!(S==="constructor"&&typeof y[S]=="function")&&S!="__proto__")return y[S]}var Qp=Nh(ah),Au=My||function(y,S){return Wr.setTimeout(y,S)},Sh=Nh(sh);function Xp(y,S,M){var U=S+"";return Sh(y,g1(U,j1(dx(U),M)))}function Nh(y){var S=0,M=0;return function(){var U=fo(),ne=H-(U-M);if(M=U,ne>0){if(++S>=V)return arguments[0]}else S=0;return y.apply(n,arguments)}}function _h(y,S){var M=-1,U=y.length,ne=U-1;for(S=S===n?U:S;++M<S;){var xe=Op(M,ne),Te=y[xe];y[xe]=y[M],y[M]=Te}return y.length=S,y}var Vs=v1(function(y){var S=[];return y.charCodeAt(0)===46&&S.push(""),y.replace(Un,function(M,U,ne,xe){S.push(ne?xe.replace(Go,"$1"):U||M)}),S});function Kn(y){if(typeof y=="string"||qi(y))return y;var S=y+"";return S=="0"&&1/y==-1/0?"-0":S}function wo(y){if(y!=null){try{return qd.call(y)}catch{}try{return y+""}catch{}}return""}function j1(y,S){return Ua(Oe,function(M){var U="_."+M[0];S&M[1]&&!ip(y,U)&&y.push(U)}),y.sort()}function ri(y){if(y instanceof yn)return y.clone();var S=new Qi(y.__wrapped__,y.__chain__);return S.__actions__=ni(y.__actions__),S.__index__=y.__index__,S.__values__=y.__values__,S}function D_(y,S,M){(M?zi(y,S,M):S===n)?S=1:S=Sr(ln(S),0);var U=y==null?0:y.length;if(!U||S<1)return[];for(var ne=0,xe=0,Te=nt(gu(U/S));ne<U;)Te[xe++]=wa(y,ne,ne+=S);return Te}function w1(y){for(var S=-1,M=y==null?0:y.length,U=0,ne=[];++S<M;){var xe=y[S];xe&&(ne[U++]=xe)}return ne}function S1(){var y=arguments.length;if(!y)return[];for(var S=nt(y-1),M=arguments[0],U=y;U--;)S[U-1]=arguments[U];return uo(nn(M)?ni(M):[M],Cn(S,1))}var Pr=hn(function(y,S){return qr(y)?il(y,Cn(S,1,qr,!0)):[]}),ta=hn(function(y,S){var M=ki(S);return qr(M)&&(M=n),qr(y)?il(y,Cn(S,1,qr,!0),Bt(M,2)):[]}),So=hn(function(y,S){var M=ki(S);return qr(M)&&(M=n),qr(y)?il(y,Cn(S,1,qr,!0),n,M):[]});function N1(y,S,M){var U=y==null?0:y.length;return U?(S=M||S===n?1:ln(S),wa(y,S<0?0:S,U)):[]}function _1(y,S,M){var U=y==null?0:y.length;return U?(S=M||S===n?1:ln(S),S=U-S,wa(y,0,S<0?0:S)):[]}function M_(y,S){return y&&y.length?ch(y,Bt(S,3),!0,!0):[]}function gx(y,S){return y&&y.length?ch(y,Bt(S,3),!0):[]}function Na(y,S,M,U){var ne=y==null?0:y.length;return ne?(M&&typeof M!="number"&&zi(y,S,M)&&(M=0,U=ne),mn(y,S,M,U)):[]}function Ja(y,S,M){var U=y==null?0:y.length;if(!U)return-1;var ne=M==null?0:ln(M);return ne<0&&(ne=Sr(U+ne,0)),ap(y,Bt(S,3),ne)}function yx(y,S,M){var U=y==null?0:y.length;if(!U)return-1;var ne=U-1;return M!==n&&(ne=ln(M),ne=M<0?Sr(U+ne,0):Er(ne,U-1)),ap(y,Bt(S,3),ne,!0)}function na(y){var S=y==null?0:y.length;return S?Cn(y,1):[]}function C1(y){var S=y==null?0:y.length;return S?Cn(y,W):[]}function ul(y,S){var M=y==null?0:y.length;return M?(S=S===n?1:ln(S),Cn(y,S)):[]}function mc(y){for(var S=-1,M=y==null?0:y.length,U={};++S<M;){var ne=y[S];U[ne[0]]=ne[1]}return U}function No(y){return y&&y.length?y[0]:n}function xx(y,S,M){var U=y==null?0:y.length;if(!U)return-1;var ne=M==null?0:ln(M);return ne<0&&(ne=Sr(U+ne,0)),ou(y,S,ne)}function vx(y){var S=y==null?0:y.length;return S?wa(y,0,-1):[]}var Hs=hn(function(y){var S=Ar(y,Rp);return S.length&&S[0]===y[0]?Vy(S):[]}),T1=hn(function(y){var S=ki(y),M=Ar(y,Rp);return S===ki(M)?S=n:M.pop(),M.length&&M[0]===y[0]?Vy(M,Bt(S,2)):[]}),Eu=hn(function(y){var S=ki(y),M=Ar(y,Rp);return S=typeof S=="function"?S:n,S&&M.pop(),M.length&&M[0]===y[0]?Vy(M,n,S):[]});function Ch(y,S){return y==null?"":Ga.call(y,S)}function ki(y){var S=y==null?0:y.length;return S?y[S-1]:n}function ku(y,S,M){var U=y==null?0:y.length;if(!U)return-1;var ne=U;return M!==n&&(ne=ln(M),ne=ne<0?Sr(U+ne,0):Er(ne,U-1)),S===S?va(y,S,ne):ap(y,lu,ne,!0)}function A1(y,S){return y&&y.length?Xy(y,ln(S)):n}var E1=hn(Pu);function Pu(y,S){return y&&y.length&&S&&S.length?Pp(y,S):y}function k1(y,S,M){return y&&y.length&&S&&S.length?Pp(y,S,Bt(M,2)):y}function Jp(y,S,M){return y&&y.length&&S&&S.length?Pp(y,S,n,M):y}var P1=Nr(function(y,S){var M=y==null?0:y.length,U=eh(y,S);return Zy(y,Ar(S,function(ne){return vs(ne,M)?+ne:ne}).sort(hh)),U});function I_(y,S){var M=[];if(!(y&&y.length))return M;var U=-1,ne=[],xe=y.length;for(S=Bt(S,3);++U<xe;){var Te=y[U];S(Te,U,y)&&(M.push(Te),ne.push(U))}return Zy(y,ne),M}function bx(y){return y==null?y:Ry.call(y)}function er(y,S,M){var U=y==null?0:y.length;return U?(M&&typeof M!="number"&&zi(y,S,M)?(S=0,M=U):(S=S==null?0:ln(S),M=M===n?U:ln(M)),wa(y,S,M)):[]}function yr(y,S){return oh(y,S)}function wn(y,S,M){return Mp(y,S,Bt(M,2))}function In(y,S){var M=y==null?0:y.length;if(M){var U=oh(y,S);if(U<M&&ia(y[U],S))return U}return-1}function tr(y,S){return oh(y,S,!0)}function _a(y,S,M){return Mp(y,S,Bt(M,2),!0)}function dl(y,S){var M=y==null?0:y.length;if(M){var U=oh(y,S,!0)-1;if(ia(y[U],S))return U}return-1}function Ou(y){return y&&y.length?tx(y):[]}function jx(y,S){return y&&y.length?tx(y,Bt(S,2)):[]}function _o(y){var S=y==null?0:y.length;return S?wa(y,1,S):[]}function zr(y,S,M){return y&&y.length?(S=M||S===n?1:ln(S),wa(y,0,S<0?0:S)):[]}function hl(y,S,M){var U=y==null?0:y.length;return U?(S=M||S===n?1:ln(S),S=U-S,wa(y,S<0?0:S,U)):[]}function gc(y,S){return y&&y.length?ch(y,Bt(S,3),!1,!0):[]}function wx(y,S){return y&&y.length?ch(y,Bt(S,3)):[]}var Za=hn(function(y){return yo(Cn(y,1,qr,!0))}),Du=hn(function(y){var S=ki(y);return qr(S)&&(S=n),yo(Cn(y,1,qr,!0),Bt(S,2))}),Th=hn(function(y){var S=ki(y);return S=typeof S=="function"?S:n,yo(Cn(y,1,qr,!0),n,S)});function ra(y){return y&&y.length?yo(y):[]}function Sx(y,S){return y&&y.length?yo(y,Bt(S,2)):[]}function Nx(y,S){return S=typeof S=="function"?S:n,y&&y.length?yo(y,n,S):[]}function Mu(y){if(!(y&&y.length))return[];var S=0;return y=Ls(y,function(M){if(qr(M))return S=Sr(M.length,S),!0}),Qo(S,function(M){return Ar(y,sp(M))})}function Ah(y,S){if(!(y&&y.length))return[];var M=Mu(y);return S==null?M:Ar(M,function(U){return Wi(S,n,U)})}var fl=hn(function(y,S){return qr(y)?il(y,S):[]}),ji=hn(function(y){return uh(Ls(y,qr))}),pl=hn(function(y){var S=ki(y);return qr(S)&&(S=n),uh(Ls(y,qr),Bt(S,2))}),Iu=hn(function(y){var S=ki(y);return S=typeof S=="function"?S:n,uh(Ls(y,qr),n,S)}),Ru=hn(Mu);function _x(y,S){return rx(y||[],S||[],ic)}function Cx(y,S){return rx(y||[],S||[],Nu)}var O1=hn(function(y){var S=y.length,M=S>1?y[S-1]:n;return M=typeof M=="function"?(y.pop(),M):n,Ah(y,M)});function Lu(y){var S=de(y);return S.__chain__=!0,S}function Tx(y,S){return S(y),y}function Pi(y,S){return S(y)}var D1=Nr(function(y){var S=y.length,M=S?y[0]:0,U=this.__wrapped__,ne=function(xe){return eh(xe,y)};return S>1||this.__actions__.length||!(U instanceof yn)||!vs(M)?this.thru(ne):(U=U.slice(M,+M+(S?1:0)),U.__actions__.push({func:Pi,args:[ne],thisArg:n}),new Qi(U,this.__chain__).thru(function(xe){return S&&!xe.length&&xe.push(n),xe}))});function Ca(){return Lu(this)}function M1(){return new Qi(this.value(),this.__chain__)}function I1(){this.__values__===n&&(this.__values__=Ta(this.value()));var y=this.__index__>=this.__values__.length,S=y?n:this.__values__[this.__index__++];return{done:y,value:S}}function R_(){return this}function ml(y){for(var S,M=this;M instanceof Ya;){var U=ri(M);U.__index__=0,U.__values__=n,S?ne.__wrapped__=U:S=U;var ne=U;M=M.__wrapped__}return ne.__wrapped__=y,S}function Zp(){var y=this.__wrapped__;if(y instanceof yn){var S=y;return this.__actions__.length&&(S=new yn(this)),S=S.reverse(),S.__actions__.push({func:Pi,args:[bx],thisArg:n}),new Qi(S,this.__chain__)}return this.thru(bx)}function Ax(){return t1(this.__wrapped__,this.__actions__)}var Fu=uc(function(y,S,M){Hn.call(y,M)?++y[M]:gs(y,M,1)});function R1(y,S,M){var U=nn(y)?j0:qy;return M&&zi(y,S,M)&&(S=n),U(y,Bt(S,3))}function L1(y,S){var M=nn(y)?Ls:Zn;return M(y,Bt(S,3))}var F1=vo(Ja),Ex=vo(yx);function kx(y,S){return Cn(Eh(y,S),1)}function L_(y,S){return Cn(Eh(y,S),W)}function F_(y,S,M){return M=M===n?1:ln(M),Cn(Eh(y,S),M)}function $1(y,S){var M=nn(y)?Ua:go;return M(y,Bt(S,3))}function Px(y,S){var M=nn(y)?g_:Sp;return M(y,Bt(S,3))}var B1=uc(function(y,S,M){Hn.call(y,M)?y[M].push(S):gs(y,M,[S])});function $u(y,S,M,U){y=ii(y)?y:Gu(y),M=M&&!U?ln(M):0;var ne=y.length;return M<0&&(M=Sr(ne+M,0)),dm(y)?M<=ne&&y.indexOf(S,M)>-1:!!ne&&ou(y,S,M)>-1}var em=hn(function(y,S,M){var U=-1,ne=typeof S=="function",xe=ii(y)?nt(y.length):[];return go(y,function(Te){xe[++U]=ne?Wi(S,Te,M):oc(Te,S,M)}),xe}),z1=uc(function(y,S,M){gs(y,M,S)});function Eh(y,S){var M=nn(y)?Ar:Yy;return M(y,Bt(S,3))}function q1(y,S,M,U){return y==null?[]:(nn(S)||(S=S==null?[]:[S]),M=U?n:M,nn(M)||(M=M==null?[]:[M]),Jy(y,S,M))}var U1=uc(function(y,S,M){y[M?0:1].push(S)},function(){return[[],[]]});function V1(y,S,M){var U=nn(y)?_y:Ay,ne=arguments.length<3;return U(y,Bt(S,4),M,ne,go)}function H1(y,S,M){var U=nn(y)?y_:Ay,ne=arguments.length<3;return U(y,Bt(S,4),M,ne,Sp)}function tm(y,S){var M=nn(y)?Ls:Zn;return M(y,Mh(Bt(S,3)))}function G1(y){var S=nn(y)?vu:Su;return S(y)}function W1(y,S,M){(M?zi(y,S,M):S===n)?S=1:S=ln(S);var U=nn(y)?U0:Dp;return U(y,S)}function mr(y){var S=nn(y)?V0:Z0;return S(y)}function Ox(y){if(y==null)return 0;if(ii(y))return dm(y)?Fs(y):y.length;var S=hi(y);return S==Q||S==Le?y.size:Tp(y).length}function $_(y,S,M){var U=nn(y)?Cy:e1;return M&&zi(y,S,M)&&(S=n),U(y,Bt(S,3))}var K1=hn(function(y,S){if(y==null)return[];var M=S.length;return M>1&&zi(y,S[0],S[1])?S=[]:M>2&&zi(S[0],S[1],S[2])&&(S=[S[0]]),Jy(y,Cn(S,1),[])}),nm=Zl||function(){return Wr.Date.now()};function B_(y,S){if(typeof S!="function")throw new ba(o);return y=ln(y),function(){if(--y<1)return S.apply(this,arguments)}}function Y1(y,S,M){return S=M?n:S,S=y&&S==null?y.length:S,qs(y,I,n,n,n,n,S)}function kh(y,S){var M;if(typeof S!="function")throw new ba(o);return y=ln(y),function(){return--y>0&&(M=S.apply(this,arguments)),y<=1&&(S=n),M}}var gl=hn(function(y,S,M){var U=w;if(M.length){var ne=Jo(M,pc(gl));U|=A}return qs(y,U,S,M,ne)}),rm=hn(function(y,S,M){var U=w|_;if(M.length){var ne=Jo(M,pc(rm));U|=A}return qs(S,U,y,M,ne)});function Ph(y,S,M){S=M?n:S;var U=qs(y,C,n,n,n,n,n,S);return U.placeholder=Ph.placeholder,U}function im(y,S,M){S=M?n:S;var U=qs(y,O,n,n,n,n,n,S);return U.placeholder=im.placeholder,U}function yl(y,S,M){var U,ne,xe,Te,Re,We,ft=0,mt=!1,yt=!1,kt=!0;if(typeof y!="function")throw new ba(o);S=ts(S)||0,Or(M)&&(mt=!!M.leading,yt="maxWait"in M,xe=yt?Sr(ts(M.maxWait)||0,S):xe,kt="trailing"in M?!!M.trailing:kt);function Lt(oi){var Ao=U,xc=ne;return U=ne=n,ft=oi,Te=y.apply(xc,Ao),Te}function Xt(oi){return ft=oi,Re=Au(En,S),mt?Lt(oi):Te}function vn(oi){var Ao=oi-We,xc=oi-ft,yI=S-Ao;return yt?Er(yI,xe-xc):yI}function Jt(oi){var Ao=oi-We,xc=oi-ft;return We===n||Ao>=S||Ao<0||yt&&xc>=xe}function En(){var oi=nm();if(Jt(oi))return $n(oi);Re=Au(En,vn(oi))}function $n(oi){return Re=n,kt&&U?Lt(oi):(U=ne=n,Te)}function ws(){Re!==n&&r1(Re),ft=0,U=We=ne=Re=n}function Aa(){return Re===n?Te:$n(nm())}function Ss(){var oi=nm(),Ao=Jt(oi);if(U=arguments,ne=this,We=oi,Ao){if(Re===n)return Xt(We);if(yt)return r1(Re),Re=Au(En,S),Lt(We)}return Re===n&&(Re=Au(En,S)),Te}return Ss.cancel=ws,Ss.flush=Aa,Ss}var Gs=hn(function(y,S){return ac(y,1,S)}),Oh=hn(function(y,S,M){return ac(y,ts(S)||0,M)});function z_(y){return qs(y,B)}function Dh(y,S){if(typeof y!="function"||S!=null&&typeof S!="function")throw new ba(o);var M=function(){var U=arguments,ne=S?S.apply(this,U):U[0],xe=M.cache;if(xe.has(ne))return xe.get(ne);var Te=y.apply(this,U);return M.cache=xe.set(ne,Te)||xe,Te};return M.cache=new(Dh.Cache||Xi),M}Dh.Cache=Xi;function Mh(y){if(typeof y!="function")throw new ba(o);return function(){var S=arguments;switch(S.length){case 0:return!y.call(this);case 1:return!y.call(this,S[0]);case 2:return!y.call(this,S[0],S[1]);case 3:return!y.call(this,S[0],S[1],S[2])}return!y.apply(this,S)}}function Q1(y){return kh(2,y)}var X1=n1(function(y,S){S=S.length==1&&nn(S[0])?Ar(S[0],xa(Bt())):Ar(Cn(S,1),xa(Bt()));var M=S.length;return hn(function(U){for(var ne=-1,xe=Er(U.length,M);++ne<xe;)U[ne]=S[ne].call(this,U[ne]);return Wi(y,this,U)})}),Dx=hn(function(y,S){var M=Jo(S,pc(Dx));return qs(y,A,n,S,M)}),am=hn(function(y,S){var M=Jo(S,pc(am));return qs(y,P,n,S,M)}),J1=Nr(function(y,S){return qs(y,F,n,n,n,S)});function Z1(y,S){if(typeof y!="function")throw new ba(o);return S=S===n?S:ln(S),hn(y,S)}function q_(y,S){if(typeof y!="function")throw new ba(o);return S=S==null?0:Sr(ln(S),0),hn(function(M){var U=M[S],ne=sl(M,0,S);return U&&uo(ne,U),Wi(y,this,ne)})}function Mx(y,S,M){var U=!0,ne=!0;if(typeof y!="function")throw new ba(o);return Or(M)&&(U="leading"in M?!!M.leading:U,ne="trailing"in M?!!M.trailing:ne),yl(y,S,{leading:U,maxWait:S,trailing:ne})}function Ix(y){return Y1(y,1)}function U_(y,S){return Dx(dh(S),y)}function V_(){if(!arguments.length)return[];var y=arguments[0];return nn(y)?y:[y]}function Ih(y){return Ai(y,x)}function H_(y,S){return S=typeof S=="function"?S:n,Ai(y,x,S)}function ej(y){return Ai(y,p|x)}function Sn(y,S){return S=typeof S=="function"?S:n,Ai(y,p|x,S)}function Rx(y,S){return S==null||zy(y,S,si(S))}function ia(y,S){return y===S||y!==y&&S!==S}var Lx=fc(th),tj=fc(function(y,S){return y>=S}),Co=Np(function(){return arguments}())?Np:function(y){return Lr(y)&&Hn.call(y,"callee")&&!Xl.call(y,"callee")},nn=nt.isArray,sm=rp?xa(rp):Ji;function ii(y){return y!=null&&yc(y.length)&&!bs(y)}function qr(y){return Lr(y)&&ii(y)}function G_(y){return y===!0||y===!1||Lr(y)&&An(y)==be}var xl=yp||gC,nj=g0?xa(g0):Yr;function rj(y){return Lr(y)&&y.nodeType===1&&!es(y)}function om(y){if(y==null)return!0;if(ii(y)&&(nn(y)||typeof y=="string"||typeof y.splice=="function"||xl(y)||Bu(y)||Co(y)))return!y.length;var S=hi(y);if(S==Q||S==Le)return!y.size;if(pr(y))return!Tp(y).length;for(var M in y)if(Hn.call(y,M))return!1;return!0}function ar(y,S){return lc(y,S)}function Fx(y,S,M){M=typeof M=="function"?M:n;var U=M?M(y,S):n;return U===n?lc(y,S,n,M):!!U}function ai(y){if(!Lr(y))return!1;var S=An(y);return S==ce||S==ve||typeof y.message=="string"&&typeof y.name=="string"&&!es(y)}function W_(y){return typeof y=="number"&&Gd(y)}function bs(y){if(!Or(y))return!1;var S=An(y);return S==fe||S==se||S==Ie||S==Ue}function lm(y){return typeof y=="number"&&y==ln(y)}function yc(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=ae}function Or(y){var S=typeof y;return y!=null&&(S=="object"||S=="function")}function Lr(y){return y!=null&&typeof y=="object"}var cm=y0?xa(y0):_p;function $x(y,S){return y===S||rh(y,S,Vp(S))}function K_(y,S,M){return M=typeof M=="function"?M:n,rh(y,S,Vp(S),M)}function ij(y){return sj(y)&&y!=+y}function Y_(y){if(jh(y))throw new Qt(s);return Bs(y)}function aj(y){return y===null}function Q_(y){return y==null}function sj(y){return typeof y=="number"||Lr(y)&&An(y)==ie}function es(y){if(!Lr(y)||An(y)!=ee)return!1;var S=Ud(y);if(S===null)return!0;var M=Hn.call(S,"constructor")&&S.constructor;return typeof M=="function"&&M instanceof M&&qd.call(M)==Ha}var um=x0?xa(x0):Cp;function Bx(y){return lm(y)&&y>=-9007199254740991&&y<=ae}var oj=v0?xa(v0):Gy;function dm(y){return typeof y=="string"||!nn(y)&&Lr(y)&&An(y)==oe}function qi(y){return typeof y=="symbol"||Lr(y)&&An(y)==_e}var Bu=b0?xa(b0):Wy;function js(y){return y===n}function zx(y){return Lr(y)&&hi(y)==ze}function lj(y){return Lr(y)&&An(y)==K}var cj=fc(Ap),Rh=fc(function(y,S){return y<=S});function Ta(y){if(!y)return[];if(ii(y))return dm(y)?Va(y):ni(y);if(Jl&&y[Jl])return E0(y[Jl]());var S=hi(y),M=S==Q?dp:S==Le?hp:Gu;return M(y)}function Ws(y){if(!y)return y===0?y:0;if(y=ts(y),y===W||y===-1/0){var S=y<0?-1:1;return S*G}return y===y?y:0}function ln(y){var S=Ws(y),M=S%1;return S===S?M?S-M:S:0}function Ks(y){return y?ys(ln(y),0,le):0}function ts(y){if(typeof y=="number")return y;if(qi(y))return z;if(Or(y)){var S=typeof y.valueOf=="function"?y.valueOf():y;y=Or(S)?S+"":S}if(typeof y!="string")return y===0?y:+y;y=_0(y);var M=Rt.test(y);return M||Mn.test(y)?p_(y.slice(2),M?2:8):_t.test(y)?z:+y}function uj(y){return ea(y,fi(y))}function zu(y){return y?ys(ln(y),-9007199254740991,ae):y===0?y:0}function Gn(y){return y==null?"":Zi(y)}var X_=dc(function(y,S){if(pr(S)||ii(S)){ea(S,si(S),y);return}for(var M in S)Hn.call(S,M)&&ic(y,M,S[M])}),dj=dc(function(y,S){ea(S,fi(S),y)}),hm=dc(function(y,S,M,U){ea(S,fi(S),y,U)}),J_=dc(function(y,S,M,U){ea(S,si(S),y,U)}),Z_=Nr(eh);function eC(y,S){var M=ja(y);return S==null?M:mo(M,S)}var tC=hn(function(y,S){y=Ln(y);var M=-1,U=S.length,ne=U>2?S[2]:n;for(ne&&zi(S[0],S[1],ne)&&(U=1);++M<U;)for(var xe=S[M],Te=fi(xe),Re=-1,We=Te.length;++Re<We;){var ft=Te[Re],mt=y[ft];(mt===n||ia(mt,fu[ft])&&!Hn.call(y,ft))&&(y[ft]=xe[ft])}return y}),hj=hn(function(y){return y.push(n,ux),Wi(Bh,n,y)});function qu(y,S){return w0(y,Bt(S,3),Ei)}function Lh(y,S){return w0(y,Bt(S,3),wu)}function fj(y,S){return y==null?y:ju(y,Bt(S,3),fi)}function nC(y,S){return y==null?y:sc(y,Bt(S,3),fi)}function Uu(y,S){return y&&Ei(y,Bt(S,3))}function Fh(y,S){return y&&wu(y,Bt(S,3))}function pj(y){return y==null?[]:al(y,si(y))}function fm(y){return y==null?[]:al(y,fi(y))}function $h(y,S,M){var U=y==null?n:Qa(y,S);return U===n?M:U}function qx(y,S){return y!=null&&bh(y,S,Uy)}function Vu(y,S){return y!=null&&bh(y,S,W0)}var mj=ph(function(y,S,M){S!=null&&typeof S.toString!="function"&&(S=Li.call(S)),y[S]=M},Xe(Ze)),gj=ph(function(y,S,M){S!=null&&typeof S.toString!="function"&&(S=Li.call(S)),Hn.call(y,S)?y[S].push(M):y[S]=[M]},Bt),rC=hn(oc);function si(y){return ii(y)?By(y):Tp(y)}function fi(y){return ii(y)?By(y,!0):Y0(y)}function iC(y,S){var M={};return S=Bt(S,3),Ei(y,function(U,ne,xe){gs(M,S(U,ne,xe),U)}),M}function aC(y,S){var M={};return S=Bt(S,3),Ei(y,function(U,ne,xe){gs(M,ne,S(U,ne,xe))}),M}var sC=dc(function(y,S,M){ih(y,S,M)}),Bh=dc(function(y,S,M,U){ih(y,S,M,U)}),pm=Nr(function(y,S){var M={};if(y==null)return M;var U=!1;S=Ar(S,function(xe){return xe=xo(xe,y),U||(U=xe.length>1),xe}),ea(y,qp(y),M),U&&(M=Ai(M,p|g|x,d1));for(var ne=S.length;ne--;)lh(M,S[ne]);return M});function Ux(y,S){return Hu(y,Mh(Bt(S)))}var oC=Nr(function(y,S){return y==null?{}:Q0(y,S)});function Hu(y,S){if(y==null)return{};var M=Ar(qp(y),function(U){return[U]});return S=Bt(S),kp(y,M,function(U,ne){return S(U,ne[0])})}function lC(y,S,M){S=xo(S,y);var U=-1,ne=S.length;for(ne||(ne=1,y=n);++U<ne;){var xe=y==null?n:y[Kn(S[U])];xe===n&&(U=ne,xe=M),y=bs(xe)?xe.call(y):xe}return y}function yj(y,S,M){return y==null?y:Nu(y,S,M)}function xj(y,S,M,U){return U=typeof U=="function"?U:n,y==null?y:Nu(y,S,M,U)}var Vx=yh(si),Hx=yh(fi);function Gx(y,S,M){var U=nn(y),ne=U||xl(y)||Bu(y);if(S=Bt(S,4),M==null){var xe=y&&y.constructor;ne?M=U?new xe:[]:Or(y)?M=bs(xe)?ja(Ud(y)):{}:M={}}return(ne?Ua:Ei)(y,function(Te,Re,We){return S(M,Te,Re,We)}),M}function vj(y,S){return y==null?!0:lh(y,S)}function mm(y,S,M){return y==null?y:nx(y,S,dh(M))}function cC(y,S,M,U){return U=typeof U=="function"?U:n,y==null?y:nx(y,S,dh(M),U)}function Gu(y){return y==null?[]:cp(y,si(y))}function Wx(y){return y==null?[]:cp(y,fi(y))}function Kx(y,S,M){return M===n&&(M=S,S=n),M!==n&&(M=ts(M),M=M===M?M:0),S!==n&&(S=ts(S),S=S===S?S:0),ys(ts(y),S,M)}function gm(y,S,M){return S=Ws(S),M===n?(M=S,S=0):M=Ws(M),y=ts(y),K0(y,S,M)}function Yx(y,S,M){if(M&&typeof M!="boolean"&&zi(y,S,M)&&(S=M=n),M===n&&(typeof S=="boolean"?(M=S,S=n):typeof y=="boolean"&&(M=y,y=n)),y===n&&S===n?(y=0,S=1):(y=Ws(y),S===n?(S=y,y=0):S=Ws(S)),y>S){var U=y;y=S,S=U}if(M||y%1||S%1){var ne=Iy();return Er(y+ne*(S-y+Bd("1e-"+((ne+"").length-1))),S)}return Op(y,S)}var bj=Bi(function(y,S,M){return S=S.toLowerCase(),y+(M?ym(S):S)});function ym(y){return N(Gn(y).toLowerCase())}function To(y){return y=Gn(y),y&&y.replace(ga,up).replace(co,"")}function vl(y,S,M){y=Gn(y),S=Zi(S);var U=y.length;M=M===n?U:ys(ln(M),0,U);var ne=M;return M-=S.length,M>=0&&y.slice(M,ne)==S}function bl(y){return y=Gn(y),y&&At.test(y)?y.replace(Ce,C0):y}function zh(y){return y=Gn(y),y&&Nn.test(y)?y.replace(Tn,"\\$&"):y}var qh=Bi(function(y,S,M){return y+(M?"-":"")+S.toLowerCase()}),jl=Bi(function(y,S,M){return y+(M?" ":"")+S.toLowerCase()}),uC=Sa("toLowerCase");function jj(y,S,M){y=Gn(y),S=ln(S);var U=S?Fs(y):0;if(!S||U>=S)return y;var ne=(S-U)/2;return gh(ho(ne),M)+y+gh(gu(ne),M)}function Uh(y,S,M){y=Gn(y),S=ln(S);var U=S?Fs(y):0;return S&&U<S?y+gh(S-U,M):y}function dC(y,S,M){y=Gn(y),S=ln(S);var U=S?Fs(y):0;return S&&U<S?gh(S-U,M)+y:y}function wj(y,S,M){return M||S==null?S=0:S&&(S=+S),ec(Gn(y).replace(ui,""),S||0)}function xm(y,S,M){return(M?zi(y,S,M):S===n)?S=1:S=ln(S),ex(Gn(y),S)}function Sj(){var y=arguments,S=Gn(y[0]);return y.length<3?S:S.replace(y[1],y[2])}var hC=Bi(function(y,S,M){return y+(M?"_":"")+S.toLowerCase()});function vm(y,S,M){return M&&typeof M!="number"&&zi(y,S,M)&&(S=M=n),M=M===n?le:M>>>0,M?(y=Gn(y),y&&(typeof S=="string"||S!=null&&!um(S))&&(S=Zi(S),!S&&Xo(y))?sl(Va(y),0,M):y.split(S,M)):[]}var bm=Bi(function(y,S,M){return y+(M?" ":"")+N(S)});function Nj(y,S,M){return y=Gn(y),M=M==null?0:ys(ln(M),0,y.length),S=Zi(S),y.slice(M,M+S.length)==S}function Vh(y,S,M){var U=de.templateSettings;M&&zi(y,S,M)&&(S=n),y=Gn(y),S=hm({},S,U,Bp);var ne=hm({},S.imports,U.imports,Bp),xe=si(ne),Te=cp(ne,xe),Re,We,ft=0,mt=S.interpolate||lo,yt="__p += '",kt=fp((S.escape||lo).source+"|"+mt.source+"|"+(mt===Tt?at:lo).source+"|"+(S.evaluate||lo).source+"|$","g"),Lt="//# sourceURL="+(Hn.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++f0+"]")+`
`;y.replace(kt,function(Jt,En,$n,ws,Aa,Ss){return $n||($n=ws),yt+=y.slice(ft,Ss).replace(Dd,T0),En&&(Re=!0,yt+=`' +
__e(`+En+`) +
'`),Aa&&(We=!0,yt+=`';
`+Aa+`;
__p += '`),$n&&(yt+=`' +
((__t = (`+$n+`)) == null ? '' : __t) +
'`),ft=Ss+Jt.length,Jt}),yt+=`';
`;var Xt=Hn.call(S,"variable")&&S.variable;if(!Xt)yt=`with (obj) {
`+yt+`
}
`;else if(Od.test(Xt))throw new Qt(l);yt=(We?yt.replace(et,""):yt).replace(dt,"$1").replace(Ct,"$1;"),yt="function("+(Xt||"obj")+`) {
`+(Xt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Re?", __e = _.escape":"")+(We?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+yt+`return __p
}`;var vn=R(function(){return Rn(xe,Lt+"return "+yt).apply(n,Te)});if(vn.source=yt,ai(vn))throw vn;return vn}function Qx(y){return Gn(y).toLowerCase()}function jm(y){return Gn(y).toUpperCase()}function _j(y,S,M){if(y=Gn(y),y&&(M||S===n))return _0(y);if(!y||!(S=Zi(S)))return y;var U=Va(y),ne=Va(S),xe=uu(U,ne),Te=du(U,ne)+1;return sl(U,xe,Te).join("")}function fC(y,S,M){if(y=Gn(y),y&&(M||S===n))return y.slice(0,ky(y)+1);if(!y||!(S=Zi(S)))return y;var U=Va(y),ne=du(U,Va(S))+1;return sl(U,0,ne).join("")}function wm(y,S,M){if(y=Gn(y),y&&(M||S===n))return y.replace(ui,"");if(!y||!(S=Zi(S)))return y;var U=Va(y),ne=uu(U,Va(S));return sl(U,ne).join("")}function d(y,S){var M=$,U=L;if(Or(S)){var ne="separator"in S?S.separator:ne;M="length"in S?ln(S.length):M,U="omission"in S?Zi(S.omission):U}y=Gn(y);var xe=y.length;if(Xo(y)){var Te=Va(y);xe=Te.length}if(M>=xe)return y;var Re=M-Fs(U);if(Re<1)return U;var We=Te?sl(Te,0,Re).join(""):y.slice(0,Re);if(ne===n)return We+U;if(Te&&(Re+=We.length-Re),um(ne)){if(y.slice(Re).search(ne)){var ft,mt=We;for(ne.global||(ne=fp(ne.source,Gn(Nt.exec(ne))+"g")),ne.lastIndex=0;ft=ne.exec(mt);)var yt=ft.index;We=We.slice(0,yt===n?Re:yt)}}else if(y.indexOf(Zi(ne),Re)!=Re){var kt=We.lastIndexOf(ne);kt>-1&&(We=We.slice(0,kt))}return We+U}function h(y){return y=Gn(y),y&&ct.test(y)?y.replace(bt,P0):y}var m=Bi(function(y,S,M){return y+(M?" ":"")+S.toUpperCase()}),N=Sa("toUpperCase");function E(y,S,M){return y=Gn(y),S=M?n:S,S===n?A0(y)?__(y):b_(y):y.match(S)||[]}var R=hn(function(y,S){try{return Wi(y,n,S)}catch(M){return ai(M)?M:new Qt(M)}}),J=Nr(function(y,S){return Ua(S,function(M){M=Kn(M),gs(y,M,gl(y[M],y))}),y});function he(y){var S=y==null?0:y.length,M=Bt();return y=S?Ar(y,function(U){if(typeof U[1]!="function")throw new ba(o);return[M(U[0]),U[1]]}):[],hn(function(U){for(var ne=-1;++ne<S;){var xe=y[ne];if(Wi(xe[0],this,U))return Wi(xe[1],this,U)}})}function Ae(y){return H0(Ai(y,p))}function Xe(y){return function(){return y}}function lt(y,S){return y==null||y!==y?S:y}var pt=zs(),tt=zs(!0);function Ze(y){return y}function Gt(y){return Ky(typeof y=="function"?y:Ai(y,p))}function Ht(y){return Qy(Ai(y,p))}function sr(y,S){return Ep(y,Ai(S,p))}var He=hn(function(y,S){return function(M){return oc(M,y,S)}}),Fe=hn(function(y,S){return function(M){return oc(y,M,S)}});function Qe(y,S,M){var U=si(S),ne=al(S,U);M==null&&!(Or(S)&&(ne.length||!U.length))&&(M=S,S=y,y=this,ne=al(S,si(S)));var xe=!(Or(M)&&"chain"in M)||!!M.chain,Te=bs(y);return Ua(ne,function(Re){var We=S[Re];y[Re]=We,Te&&(y.prototype[Re]=function(){var ft=this.__chain__;if(xe||ft){var mt=y(this.__wrapped__),yt=mt.__actions__=ni(this.__actions__);return yt.push({func:We,args:arguments,thisArg:y}),mt.__chain__=ft,mt}return We.apply(y,uo([this.value()],arguments))})}),y}function ht(){return Wr._===this&&(Wr._=pu),this}function Ot(){}function xn(y){return y=ln(y),hn(function(S){return Xy(S,y)})}var Ft=mh(Ar),Wt=mh(j0),pi=mh(Cy);function Fn(y){return Gp(y)?sp(Kn(y)):X0(y)}function wl(y){return function(S){return y==null?n:Qa(y,S)}}var pC=ol(),qW=ol(!0);function mC(){return[]}function gC(){return!1}function UW(){return{}}function VW(){return""}function HW(){return!0}function GW(y,S){if(y=ln(y),y<1||y>ae)return[];var M=le,U=Er(y,le);S=Bt(S),y-=le;for(var ne=Qo(U,S);++M<y;)S(M);return ne}function WW(y){return nn(y)?Ar(y,Kn):qi(y)?[y]:ni(Vs(Gn(y)))}function KW(y){var S=++fs;return Gn(y)+S}var YW=_u(function(y,S){return y+S},0),QW=$p("ceil"),XW=_u(function(y,S){return y/S},1),JW=$p("floor");function ZW(y){return y&&y.length?xs(y,Ze,th):n}function eK(y,S){return y&&y.length?xs(y,Bt(S,2),th):n}function tK(y){return S0(y,Ze)}function nK(y,S){return S0(y,Bt(S,2))}function rK(y){return y&&y.length?xs(y,Ze,Ap):n}function iK(y,S){return y&&y.length?xs(y,Bt(S,2),Ap):n}var aK=_u(function(y,S){return y*S},1),sK=$p("round"),oK=_u(function(y,S){return y-S},0);function lK(y){return y&&y.length?lp(y,Ze):0}function cK(y,S){return y&&y.length?lp(y,Bt(S,2)):0}return de.after=B_,de.ary=Y1,de.assign=X_,de.assignIn=dj,de.assignInWith=hm,de.assignWith=J_,de.at=Z_,de.before=kh,de.bind=gl,de.bindAll=J,de.bindKey=rm,de.castArray=V_,de.chain=Lu,de.chunk=D_,de.compact=w1,de.concat=S1,de.cond=he,de.conforms=Ae,de.constant=Xe,de.countBy=Fu,de.create=eC,de.curry=Ph,de.curryRight=im,de.debounce=yl,de.defaults=tC,de.defaultsDeep=hj,de.defer=Gs,de.delay=Oh,de.difference=Pr,de.differenceBy=ta,de.differenceWith=So,de.drop=N1,de.dropRight=_1,de.dropRightWhile=M_,de.dropWhile=gx,de.fill=Na,de.filter=L1,de.flatMap=kx,de.flatMapDeep=L_,de.flatMapDepth=F_,de.flatten=na,de.flattenDeep=C1,de.flattenDepth=ul,de.flip=z_,de.flow=pt,de.flowRight=tt,de.fromPairs=mc,de.functions=pj,de.functionsIn=fm,de.groupBy=B1,de.initial=vx,de.intersection=Hs,de.intersectionBy=T1,de.intersectionWith=Eu,de.invert=mj,de.invertBy=gj,de.invokeMap=em,de.iteratee=Gt,de.keyBy=z1,de.keys=si,de.keysIn=fi,de.map=Eh,de.mapKeys=iC,de.mapValues=aC,de.matches=Ht,de.matchesProperty=sr,de.memoize=Dh,de.merge=sC,de.mergeWith=Bh,de.method=He,de.methodOf=Fe,de.mixin=Qe,de.negate=Mh,de.nthArg=xn,de.omit=pm,de.omitBy=Ux,de.once=Q1,de.orderBy=q1,de.over=Ft,de.overArgs=X1,de.overEvery=Wt,de.overSome=pi,de.partial=Dx,de.partialRight=am,de.partition=U1,de.pick=oC,de.pickBy=Hu,de.property=Fn,de.propertyOf=wl,de.pull=E1,de.pullAll=Pu,de.pullAllBy=k1,de.pullAllWith=Jp,de.pullAt=P1,de.range=pC,de.rangeRight=qW,de.rearg=J1,de.reject=tm,de.remove=I_,de.rest=Z1,de.reverse=bx,de.sampleSize=W1,de.set=yj,de.setWith=xj,de.shuffle=mr,de.slice=er,de.sortBy=K1,de.sortedUniq=Ou,de.sortedUniqBy=jx,de.split=vm,de.spread=q_,de.tail=_o,de.take=zr,de.takeRight=hl,de.takeRightWhile=gc,de.takeWhile=wx,de.tap=Tx,de.throttle=Mx,de.thru=Pi,de.toArray=Ta,de.toPairs=Vx,de.toPairsIn=Hx,de.toPath=WW,de.toPlainObject=uj,de.transform=Gx,de.unary=Ix,de.union=Za,de.unionBy=Du,de.unionWith=Th,de.uniq=ra,de.uniqBy=Sx,de.uniqWith=Nx,de.unset=vj,de.unzip=Mu,de.unzipWith=Ah,de.update=mm,de.updateWith=cC,de.values=Gu,de.valuesIn=Wx,de.without=fl,de.words=E,de.wrap=U_,de.xor=ji,de.xorBy=pl,de.xorWith=Iu,de.zip=Ru,de.zipObject=_x,de.zipObjectDeep=Cx,de.zipWith=O1,de.entries=Vx,de.entriesIn=Hx,de.extend=dj,de.extendWith=hm,Qe(de,de),de.add=YW,de.attempt=R,de.camelCase=bj,de.capitalize=ym,de.ceil=QW,de.clamp=Kx,de.clone=Ih,de.cloneDeep=ej,de.cloneDeepWith=Sn,de.cloneWith=H_,de.conformsTo=Rx,de.deburr=To,de.defaultTo=lt,de.divide=XW,de.endsWith=vl,de.eq=ia,de.escape=bl,de.escapeRegExp=zh,de.every=R1,de.find=F1,de.findIndex=Ja,de.findKey=qu,de.findLast=Ex,de.findLastIndex=yx,de.findLastKey=Lh,de.floor=JW,de.forEach=$1,de.forEachRight=Px,de.forIn=fj,de.forInRight=nC,de.forOwn=Uu,de.forOwnRight=Fh,de.get=$h,de.gt=Lx,de.gte=tj,de.has=qx,de.hasIn=Vu,de.head=No,de.identity=Ze,de.includes=$u,de.indexOf=xx,de.inRange=gm,de.invoke=rC,de.isArguments=Co,de.isArray=nn,de.isArrayBuffer=sm,de.isArrayLike=ii,de.isArrayLikeObject=qr,de.isBoolean=G_,de.isBuffer=xl,de.isDate=nj,de.isElement=rj,de.isEmpty=om,de.isEqual=ar,de.isEqualWith=Fx,de.isError=ai,de.isFinite=W_,de.isFunction=bs,de.isInteger=lm,de.isLength=yc,de.isMap=cm,de.isMatch=$x,de.isMatchWith=K_,de.isNaN=ij,de.isNative=Y_,de.isNil=Q_,de.isNull=aj,de.isNumber=sj,de.isObject=Or,de.isObjectLike=Lr,de.isPlainObject=es,de.isRegExp=um,de.isSafeInteger=Bx,de.isSet=oj,de.isString=dm,de.isSymbol=qi,de.isTypedArray=Bu,de.isUndefined=js,de.isWeakMap=zx,de.isWeakSet=lj,de.join=Ch,de.kebabCase=qh,de.last=ki,de.lastIndexOf=ku,de.lowerCase=jl,de.lowerFirst=uC,de.lt=cj,de.lte=Rh,de.max=ZW,de.maxBy=eK,de.mean=tK,de.meanBy=nK,de.min=rK,de.minBy=iK,de.stubArray=mC,de.stubFalse=gC,de.stubObject=UW,de.stubString=VW,de.stubTrue=HW,de.multiply=aK,de.nth=A1,de.noConflict=ht,de.noop=Ot,de.now=nm,de.pad=jj,de.padEnd=Uh,de.padStart=dC,de.parseInt=wj,de.random=Yx,de.reduce=V1,de.reduceRight=H1,de.repeat=xm,de.replace=Sj,de.result=lC,de.round=sK,de.runInContext=Ve,de.sample=G1,de.size=Ox,de.snakeCase=hC,de.some=$_,de.sortedIndex=yr,de.sortedIndexBy=wn,de.sortedIndexOf=In,de.sortedLastIndex=tr,de.sortedLastIndexBy=_a,de.sortedLastIndexOf=dl,de.startCase=bm,de.startsWith=Nj,de.subtract=oK,de.sum=lK,de.sumBy=cK,de.template=Vh,de.times=GW,de.toFinite=Ws,de.toInteger=ln,de.toLength=Ks,de.toLower=Qx,de.toNumber=ts,de.toSafeInteger=zu,de.toString=Gn,de.toUpper=jm,de.trim=_j,de.trimEnd=fC,de.trimStart=wm,de.truncate=d,de.unescape=h,de.uniqueId=KW,de.upperCase=m,de.upperFirst=N,de.each=$1,de.eachRight=Px,de.first=No,Qe(de,function(){var y={};return Ei(de,function(S,M){Hn.call(de.prototype,M)||(y[M]=S)}),y}(),{chain:!1}),de.VERSION=i,Ua(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){de[y].placeholder=de}),Ua(["drop","take"],function(y,S){yn.prototype[y]=function(M){M=M===n?1:Sr(ln(M),0);var U=this.__filtered__&&!S?new yn(this):this.clone();return U.__filtered__?U.__takeCount__=Er(M,U.__takeCount__):U.__views__.push({size:Er(M,le),type:y+(U.__dir__<0?"Right":"")}),U},yn.prototype[y+"Right"]=function(M){return this.reverse()[y](M).reverse()}}),Ua(["filter","map","takeWhile"],function(y,S){var M=S+1,U=M==te||M==q;yn.prototype[y]=function(ne){var xe=this.clone();return xe.__iteratees__.push({iteratee:Bt(ne,3),type:M}),xe.__filtered__=xe.__filtered__||U,xe}}),Ua(["head","last"],function(y,S){var M="take"+(S?"Right":"");yn.prototype[y]=function(){return this[M](1).value()[0]}}),Ua(["initial","tail"],function(y,S){var M="drop"+(S?"":"Right");yn.prototype[y]=function(){return this.__filtered__?new yn(this):this[M](1)}}),yn.prototype.compact=function(){return this.filter(Ze)},yn.prototype.find=function(y){return this.filter(y).head()},yn.prototype.findLast=function(y){return this.reverse().find(y)},yn.prototype.invokeMap=hn(function(y,S){return typeof y=="function"?new yn(this):this.map(function(M){return oc(M,y,S)})}),yn.prototype.reject=function(y){return this.filter(Mh(Bt(y)))},yn.prototype.slice=function(y,S){y=ln(y);var M=this;return M.__filtered__&&(y>0||S<0)?new yn(M):(y<0?M=M.takeRight(-y):y&&(M=M.drop(y)),S!==n&&(S=ln(S),M=S<0?M.dropRight(-S):M.take(S-y)),M)},yn.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},yn.prototype.toArray=function(){return this.take(le)},Ei(yn.prototype,function(y,S){var M=/^(?:filter|find|map|reject)|While$/.test(S),U=/^(?:head|last)$/.test(S),ne=de[U?"take"+(S=="last"?"Right":""):S],xe=U||/^find/.test(S);ne&&(de.prototype[S]=function(){var Te=this.__wrapped__,Re=U?[1]:arguments,We=Te instanceof yn,ft=Re[0],mt=We||nn(Te),yt=function(En){var $n=ne.apply(de,uo([En],Re));return U&&kt?$n[0]:$n};mt&&M&&typeof ft=="function"&&ft.length!=1&&(We=mt=!1);var kt=this.__chain__,Lt=!!this.__actions__.length,Xt=xe&&!kt,vn=We&&!Lt;if(!xe&&mt){Te=vn?Te:new yn(this);var Jt=y.apply(Te,Re);return Jt.__actions__.push({func:Pi,args:[yt],thisArg:n}),new Qi(Jt,kt)}return Xt&&vn?y.apply(this,Re):(Jt=this.thru(yt),Xt?U?Jt.value()[0]:Jt.value():Jt)})}),Ua(["pop","push","shift","sort","splice","unshift"],function(y){var S=pp[y],M=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",U=/^(?:pop|shift)$/.test(y);de.prototype[y]=function(){var ne=arguments;if(U&&!this.__chain__){var xe=this.value();return S.apply(nn(xe)?xe:[],ne)}return this[M](function(Te){return S.apply(nn(Te)?Te:[],ne)})}}),Ei(yn.prototype,function(y,S){var M=de[S];if(M){var U=M.name+"";Hn.call(Ka,U)||(Ka[U]=[]),Ka[U].push({name:S,func:M})}}),Ka[Br(n,_).name]=[{name:"wrapper",func:n}],yn.prototype.clone=Qd,yn.prototype.reverse=xp,yn.prototype.value=nc,de.prototype.at=D1,de.prototype.chain=Ca,de.prototype.commit=M1,de.prototype.next=I1,de.prototype.plant=ml,de.prototype.reverse=Zp,de.prototype.toJSON=de.prototype.valueOf=de.prototype.value=Ax,de.prototype.first=de.prototype.head,Jl&&(de.prototype[Jl]=R_),de},Zo=hu();Yo?((Yo.exports=Zo)._=Zo,su._=Zo):Wr._=Zo}).call(Xge)}(_v,_v.exports)),_v.exports}var c7=Jge();class Zge{constructor(t){xr(this,"sampleRate",24e3);xr(this,"bufferSize",7680);xr(this,"audioQueue",[]);xr(this,"isPlaying",!1);xr(this,"isStreamComplete",!1);xr(this,"checkInterval",null);xr(this,"scheduledTime",0);xr(this,"initialBufferTime",.1);xr(this,"gainNode");xr(this,"source");xr(this,"endOfQueueAudioSource",null);xr(this,"onComplete",()=>{});this.context=t,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(t,n,i){let a=Uj.get(this.context);if(a&&a[t])return a[t].handlers.push(i),Promise.resolve(this);a||(Uj.set(this.context,{}),a=Uj.get(this.context)),a[t]={handlers:[i]};const s=CP(t,n);await this.context.audioWorklet.addModule(s);const o=new AudioWorkletNode(this.context,t);return a[t].node=o,this}_processPCM16Chunk(t){const n=new Float32Array(t.length/2),i=new DataView(t.buffer);for(let a=0;a<t.length/2;a++)try{const s=i.getInt16(a*2,!0);n[a]=s/32768}catch(s){console.error(s)}return n}addPCM16(t){this.isStreamComplete=!1;let n=this._processPCM16Chunk(t);for(;n.length>=this.bufferSize;){const i=n.slice(0,this.bufferSize);this.audioQueue.push(i),n=n.slice(this.bufferSize)}n.length>0&&this.audioQueue.push(n),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(t){const n=this.context.createBuffer(1,t.length,this.sampleRate);return n.getChannelData(0).set(t),n}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const n=this.audioQueue.shift(),i=this.createAudioBuffer(n),a=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=a,a.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===a&&(this.endOfQueueAudioSource=null,this.onComplete())}),a.buffer=i,a.connect(this.gainNode);const s=Uj.get(this.context);s&&Object.entries(s).forEach(([,l])=>{const{node:c,handlers:u}=l;c&&(a.connect(c),c.port.onmessage=function(f){u.forEach(p=>{p.call(c.port,f)})},c.connect(this.context.destination))});const o=Math.max(this.scheduledTime,this.context.currentTime);a.start(o),this.scheduledTime=o+i.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const n=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,n-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function u7(e,t){return function(){return e.apply(t,arguments)}}const{toString:eye}=Object.prototype,{getPrototypeOf:iM}=Object,jN=(e=>t=>{const n=eye.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Uo=e=>(e=e.toLowerCase(),t=>jN(t)===e),wN=e=>t=>typeof t===e,{isArray:Qg}=Array,Yv=wN("undefined");function tye(e){return e!==null&&!Yv(e)&&e.constructor!==null&&!Yv(e.constructor)&&Ds(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const d7=Uo("ArrayBuffer");function nye(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&d7(e.buffer),t}const rye=wN("string"),Ds=wN("function"),h7=wN("number"),SN=e=>e!==null&&typeof e=="object",iye=e=>e===!0||e===!1,jw=e=>{if(jN(e)!=="object")return!1;const t=iM(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},aye=Uo("Date"),sye=Uo("File"),oye=Uo("Blob"),lye=Uo("FileList"),cye=e=>SN(e)&&Ds(e.pipe),uye=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ds(e.append)&&((t=jN(e))==="formdata"||t==="object"&&Ds(e.toString)&&e.toString()==="[object FormData]"))},dye=Uo("URLSearchParams"),[hye,fye,pye,mye]=["ReadableStream","Request","Response","Headers"].map(Uo),gye=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qb(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,a;if(typeof e!="object"&&(e=[e]),Qg(e))for(i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let l;for(i=0;i<o;i++)l=s[i],t.call(null,e[l],l,e)}}function f7(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,a;for(;i-- >0;)if(a=n[i],t===a.toLowerCase())return a;return null}const nf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,p7=e=>!Yv(e)&&e!==nf;function TP(){const{caseless:e}=p7(this)&&this||{},t={},n=(i,a)=>{const s=e&&f7(t,a)||a;jw(t[s])&&jw(i)?t[s]=TP(t[s],i):jw(i)?t[s]=TP({},i):Qg(i)?t[s]=i.slice():t[s]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Qb(arguments[i],n);return t}const yye=(e,t,n,{allOwnKeys:i}={})=>(Qb(t,(a,s)=>{n&&Ds(a)?e[s]=u7(a,n):e[s]=a},{allOwnKeys:i}),e),xye=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),vye=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},bye=(e,t,n,i)=>{let a,s,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)o=a[s],(!i||i(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&iM(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},jye=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},wye=e=>{if(!e)return null;if(Qg(e))return e;let t=e.length;if(!h7(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Sye=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&iM(Uint8Array)),Nye=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=i.next())&&!a.done;){const s=a.value;t.call(e,s[0],s[1])}},_ye=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},Cye=Uo("HTMLFormElement"),Tye=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),q3=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Aye=Uo("RegExp"),m7=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Qb(n,(a,s)=>{let o;(o=t(a,s,e))!==!1&&(i[s]=o||a)}),Object.defineProperties(e,i)},Eye=e=>{m7(e,(t,n)=>{if(Ds(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Ds(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},kye=(e,t)=>{const n={},i=a=>{a.forEach(s=>{n[s]=!0})};return Qg(e)?i(e):i(String(e).split(t)),n},Pye=()=>{},Oye=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Dye(e){return!!(e&&Ds(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Mye=e=>{const t=new Array(10),n=(i,a)=>{if(SN(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[a]=i;const s=Qg(i)?[]:{};return Qb(i,(o,l)=>{const c=n(o,a+1);!Yv(c)&&(s[l]=c)}),t[a]=void 0,s}}return i};return n(e,0)},Iye=Uo("AsyncFunction"),Rye=e=>e&&(SN(e)||Ds(e))&&Ds(e.then)&&Ds(e.catch),g7=((e,t)=>e?setImmediate:t?((n,i)=>(nf.addEventListener("message",({source:a,data:s})=>{a===nf&&s===n&&i.length&&i.shift()()},!1),a=>{i.push(a),nf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ds(nf.postMessage)),Lye=typeof queueMicrotask<"u"?queueMicrotask.bind(nf):typeof process<"u"&&process.nextTick||g7,it={isArray:Qg,isArrayBuffer:d7,isBuffer:tye,isFormData:uye,isArrayBufferView:nye,isString:rye,isNumber:h7,isBoolean:iye,isObject:SN,isPlainObject:jw,isReadableStream:hye,isRequest:fye,isResponse:pye,isHeaders:mye,isUndefined:Yv,isDate:aye,isFile:sye,isBlob:oye,isRegExp:Aye,isFunction:Ds,isStream:cye,isURLSearchParams:dye,isTypedArray:Sye,isFileList:lye,forEach:Qb,merge:TP,extend:yye,trim:gye,stripBOM:xye,inherits:vye,toFlatObject:bye,kindOf:jN,kindOfTest:Uo,endsWith:jye,toArray:wye,forEachEntry:Nye,matchAll:_ye,isHTMLForm:Cye,hasOwnProperty:q3,hasOwnProp:q3,reduceDescriptors:m7,freezeMethods:Eye,toObjectSet:kye,toCamelCase:Tye,noop:Pye,toFiniteNumber:Oye,findKey:f7,global:nf,isContextDefined:p7,isSpecCompliantForm:Dye,toJSONObject:Mye,isAsyncFn:Iye,isThenable:Rye,setImmediate:g7,asap:Lye};function pn(e,t,n,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}it.inherits(pn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:it.toJSONObject(this.config),code:this.code,status:this.status}}});const y7=pn.prototype,x7={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{x7[e]={value:e}});Object.defineProperties(pn,x7);Object.defineProperty(y7,"isAxiosError",{value:!0});pn.from=(e,t,n,i,a,s)=>{const o=Object.create(y7);return it.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),pn.call(o,e.message,t,n,i,a),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Fye=null;function AP(e){return it.isPlainObject(e)||it.isArray(e)}function v7(e){return it.endsWith(e,"[]")?e.slice(0,-2):e}function U3(e,t,n){return e?e.concat(t).map(function(a,s){return a=v7(a),!n&&s?"["+a+"]":a}).join(n?".":""):t}function $ye(e){return it.isArray(e)&&!e.some(AP)}const Bye=it.toFlatObject(it,{},null,function(t){return/^is[A-Z]/.test(t)});function NN(e,t,n){if(!it.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=it.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,w){return!it.isUndefined(w[j])});const i=n.metaTokens,a=n.visitor||f,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&it.isSpecCompliantForm(t);if(!it.isFunction(a))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(it.isDate(v))return v.toISOString();if(!c&&it.isBlob(v))throw new pn("Blob is not supported. Use a Buffer instead.");return it.isArrayBuffer(v)||it.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,j,w){let _=v;if(v&&!w&&typeof v=="object"){if(it.endsWith(j,"{}"))j=i?j:j.slice(0,-2),v=JSON.stringify(v);else if(it.isArray(v)&&$ye(v)||(it.isFileList(v)||it.endsWith(j,"[]"))&&(_=it.toArray(v)))return j=v7(j),_.forEach(function(C,O){!(it.isUndefined(C)||C===null)&&t.append(o===!0?U3([j],O,s):o===null?j:j+"[]",u(C))}),!1}return AP(v)?!0:(t.append(U3(w,j,s),u(v)),!1)}const p=[],g=Object.assign(Bye,{defaultVisitor:f,convertValue:u,isVisitable:AP});function x(v,j){if(!it.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+j.join("."));p.push(v),it.forEach(v,function(_,T){(!(it.isUndefined(_)||_===null)&&a.call(t,_,it.isString(T)?T.trim():T,j,g))===!0&&x(_,j?j.concat(T):[T])}),p.pop()}}if(!it.isObject(e))throw new TypeError("data must be an object");return x(e),t}function V3(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function aM(e,t){this._pairs=[],e&&NN(e,this,t)}const b7=aM.prototype;b7.append=function(t,n){this._pairs.push([t,n])};b7.toString=function(t){const n=t?function(i){return t.call(this,i,V3)}:V3;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function zye(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function j7(e,t,n){if(!t)return e;const i=n&&n.encode||zye;it.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let s;if(a?s=a(t,n):s=it.isURLSearchParams(t)?t.toString():new aM(t,n).toString(i),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class H3{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){it.forEach(this.handlers,function(i){i!==null&&t(i)})}}const w7={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qye=typeof URLSearchParams<"u"?URLSearchParams:aM,Uye=typeof FormData<"u"?FormData:null,Vye=typeof Blob<"u"?Blob:null,Hye={isBrowser:!0,classes:{URLSearchParams:qye,FormData:Uye,Blob:Vye},protocols:["http","https","file","blob","url","data"]},sM=typeof window<"u"&&typeof document<"u",EP=typeof navigator=="object"&&navigator||void 0,Gye=sM&&(!EP||["ReactNative","NativeScript","NS"].indexOf(EP.product)<0),Wye=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Kye=sM&&window.location.href||"http://localhost",Yye=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sM,hasStandardBrowserEnv:Gye,hasStandardBrowserWebWorkerEnv:Wye,navigator:EP,origin:Kye},Symbol.toStringTag,{value:"Module"})),ua={...Yye,...Hye};function Qye(e,t){return NN(e,new ua.classes.URLSearchParams,Object.assign({visitor:function(n,i,a,s){return ua.isNode&&it.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Xye(e){return it.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Jye(e){const t={},n=Object.keys(e);let i;const a=n.length;let s;for(i=0;i<a;i++)s=n[i],t[s]=e[s];return t}function S7(e){function t(n,i,a,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=s>=n.length;return o=!o&&it.isArray(a)?a.length:o,c?(it.hasOwnProp(a,o)?a[o]=[a[o],i]:a[o]=i,!l):((!a[o]||!it.isObject(a[o]))&&(a[o]=[]),t(n,i,a[o],s)&&it.isArray(a[o])&&(a[o]=Jye(a[o])),!l)}if(it.isFormData(e)&&it.isFunction(e.entries)){const n={};return it.forEachEntry(e,(i,a)=>{t(Xye(i),a,n,0)}),n}return null}function Zye(e,t,n){if(it.isString(e))try{return(t||JSON.parse)(e),it.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const Xb={transitional:w7,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,s=it.isObject(t);if(s&&it.isHTMLForm(t)&&(t=new FormData(t)),it.isFormData(t))return a?JSON.stringify(S7(t)):t;if(it.isArrayBuffer(t)||it.isBuffer(t)||it.isStream(t)||it.isFile(t)||it.isBlob(t)||it.isReadableStream(t))return t;if(it.isArrayBufferView(t))return t.buffer;if(it.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Qye(t,this.formSerializer).toString();if((l=it.isFileList(t))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return NN(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||a?(n.setContentType("application/json",!1),Zye(t)):t}],transformResponse:[function(t){const n=this.transitional||Xb.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(it.isResponse(t)||it.isReadableStream(t))return t;if(t&&it.isString(t)&&(i&&!this.responseType||a)){const o=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?pn.from(l,pn.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ua.classes.FormData,Blob:ua.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};it.forEach(["delete","get","head","post","put","patch"],e=>{Xb.headers[e]={}});const exe=it.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),txe=e=>{const t={};let n,i,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),n=o.substring(0,a).trim().toLowerCase(),i=o.substring(a+1).trim(),!(!n||t[n]&&exe[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},G3=Symbol("internals");function ov(e){return e&&String(e).trim().toLowerCase()}function ww(e){return e===!1||e==null?e:it.isArray(e)?e.map(ww):String(e)}function nxe(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const rxe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function s2(e,t,n,i,a){if(it.isFunction(i))return i.call(this,t,n);if(a&&(t=n),!!it.isString(t)){if(it.isString(i))return t.indexOf(i)!==-1;if(it.isRegExp(i))return i.test(t)}}function ixe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function axe(e,t){const n=it.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(a,s,o){return this[i].call(this,t,a,s,o)},configurable:!0})})}let ls=class{constructor(t){t&&this.set(t)}set(t,n,i){const a=this;function s(l,c,u){const f=ov(c);if(!f)throw new Error("header name must be a non-empty string");const p=it.findKey(a,f);(!p||a[p]===void 0||u===!0||u===void 0&&a[p]!==!1)&&(a[p||c]=ww(l))}const o=(l,c)=>it.forEach(l,(u,f)=>s(u,f,c));if(it.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(it.isString(t)&&(t=t.trim())&&!rxe(t))o(txe(t),n);else if(it.isHeaders(t))for(const[l,c]of t.entries())s(c,l,i);else t!=null&&s(n,t,i);return this}get(t,n){if(t=ov(t),t){const i=it.findKey(this,t);if(i){const a=this[i];if(!n)return a;if(n===!0)return nxe(a);if(it.isFunction(n))return n.call(this,a,i);if(it.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ov(t),t){const i=it.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||s2(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let a=!1;function s(o){if(o=ov(o),o){const l=it.findKey(i,o);l&&(!n||s2(i,i[l],l,n))&&(delete i[l],a=!0)}}return it.isArray(t)?t.forEach(s):s(t),a}clear(t){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const s=n[i];(!t||s2(this,this[s],s,t,!0))&&(delete this[s],a=!0)}return a}normalize(t){const n=this,i={};return it.forEach(this,(a,s)=>{const o=it.findKey(i,s);if(o){n[o]=ww(a),delete n[s];return}const l=t?ixe(s):String(s).trim();l!==s&&delete n[s],n[l]=ww(a),i[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return it.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=t&&it.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[G3]=this[G3]={accessors:{}}).accessors,a=this.prototype;function s(o){const l=ov(o);i[l]||(axe(a,o),i[l]=!0)}return it.isArray(t)?t.forEach(s):s(t),this}};ls.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);it.reduceDescriptors(ls.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});it.freezeMethods(ls);function o2(e,t){const n=this||Xb,i=t||n,a=ls.from(i.headers);let s=i.data;return it.forEach(e,function(l){s=l.call(n,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function N7(e){return!!(e&&e.__CANCEL__)}function Xg(e,t,n){pn.call(this,e??"canceled",pn.ERR_CANCELED,t,n),this.name="CanceledError"}it.inherits(Xg,pn,{__CANCEL__:!0});function _7(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new pn("Request failed with status code "+n.status,[pn.ERR_BAD_REQUEST,pn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function sxe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function oxe(e,t){e=e||10;const n=new Array(e),i=new Array(e);let a=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),f=i[s];o||(o=u),n[a]=c,i[a]=u;let p=s,g=0;for(;p!==a;)g+=n[p++],p=p%e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),u-o<t)return;const x=f&&u-f;return x?Math.round(g*1e3/x):void 0}}function lxe(e,t){let n=0,i=1e3/t,a,s;const o=(u,f=Date.now())=>{n=f,a=null,s&&(clearTimeout(s),s=null),e.apply(null,u)};return[(...u)=>{const f=Date.now(),p=f-n;p>=i?o(u,f):(a=u,s||(s=setTimeout(()=>{s=null,o(a)},i-p)))},()=>a&&o(a)]}const Kw=(e,t,n=3)=>{let i=0;const a=oxe(50,250);return lxe(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,c=o-i,u=a(c),f=o<=l;i=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&f?(l-o)/u:void 0,event:s,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(p)},n)},W3=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},K3=e=>(...t)=>it.asap(()=>e(...t)),cxe=ua.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ua.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ua.origin),ua.navigator&&/(msie|trident)/i.test(ua.navigator.userAgent)):()=>!0,uxe=ua.hasStandardBrowserEnv?{write(e,t,n,i,a,s){const o=[e+"="+encodeURIComponent(t)];it.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),it.isString(i)&&o.push("path="+i),it.isString(a)&&o.push("domain="+a),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dxe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function hxe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function C7(e,t,n){let i=!dxe(t);return e&&(i||n==!1)?hxe(e,t):t}const Y3=e=>e instanceof ls?{...e}:e;function Of(e,t){t=t||{};const n={};function i(u,f,p,g){return it.isPlainObject(u)&&it.isPlainObject(f)?it.merge.call({caseless:g},u,f):it.isPlainObject(f)?it.merge({},f):it.isArray(f)?f.slice():f}function a(u,f,p,g){if(it.isUndefined(f)){if(!it.isUndefined(u))return i(void 0,u,p,g)}else return i(u,f,p,g)}function s(u,f){if(!it.isUndefined(f))return i(void 0,f)}function o(u,f){if(it.isUndefined(f)){if(!it.isUndefined(u))return i(void 0,u)}else return i(void 0,f)}function l(u,f,p){if(p in t)return i(u,f);if(p in e)return i(void 0,u)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,f,p)=>a(Y3(u),Y3(f),p,!0)};return it.forEach(Object.keys(Object.assign({},e,t)),function(f){const p=c[f]||a,g=p(e[f],t[f],f);it.isUndefined(g)&&p!==l||(n[f]=g)}),n}const T7=e=>{const t=Of({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:l}=t;t.headers=o=ls.from(o),t.url=j7(C7(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(it.isFormData(n)){if(ua.hasStandardBrowserEnv||ua.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...f]=c?c.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...f].join("; "))}}if(ua.hasStandardBrowserEnv&&(i&&it.isFunction(i)&&(i=i(t)),i||i!==!1&&cxe(t.url))){const u=a&&s&&uxe.read(s);u&&o.set(a,u)}return t},fxe=typeof XMLHttpRequest<"u",pxe=fxe&&function(e){return new Promise(function(n,i){const a=T7(e);let s=a.data;const o=ls.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,f,p,g,x,v;function j(){x&&x(),v&&v(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function _(){if(!w)return;const C=ls.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),A={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:C,config:e,request:w};_7(function(I){n(I),j()},function(I){i(I),j()},A),w=null}"onloadend"in w?w.onloadend=_:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(_)},w.onabort=function(){w&&(i(new pn("Request aborted",pn.ECONNABORTED,e,w)),w=null)},w.onerror=function(){i(new pn("Network Error",pn.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let O=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const A=a.transitional||w7;a.timeoutErrorMessage&&(O=a.timeoutErrorMessage),i(new pn(O,A.clarifyTimeoutError?pn.ETIMEDOUT:pn.ECONNABORTED,e,w)),w=null},s===void 0&&o.setContentType(null),"setRequestHeader"in w&&it.forEach(o.toJSON(),function(O,A){w.setRequestHeader(A,O)}),it.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),l&&l!=="json"&&(w.responseType=a.responseType),u&&([g,v]=Kw(u,!0),w.addEventListener("progress",g)),c&&w.upload&&([p,x]=Kw(c),w.upload.addEventListener("progress",p),w.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(f=C=>{w&&(i(!C||C.type?new Xg(null,e,w):C),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const T=sxe(a.url);if(T&&ua.protocols.indexOf(T)===-1){i(new pn("Unsupported protocol "+T+":",pn.ERR_BAD_REQUEST,e));return}w.send(s||null)})},mxe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,a;const s=function(u){if(!a){a=!0,l();const f=u instanceof Error?u:this.reason;i.abort(f instanceof pn?f:new Xg(f instanceof Error?f.message:f))}};let o=t&&setTimeout(()=>{o=null,s(new pn(`timeout ${t} of ms exceeded`,pn.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),e=null)};e.forEach(u=>u.addEventListener("abort",s));const{signal:c}=i;return c.unsubscribe=()=>it.asap(l),c}},gxe=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,a;for(;i<n;)a=i+t,yield e.slice(i,a),i=a},yxe=async function*(e,t){for await(const n of xxe(e))yield*gxe(n,t)},xxe=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},Q3=(e,t,n,i)=>{const a=yxe(e,t);let s=0,o,l=c=>{o||(o=!0,i&&i(c))};return new ReadableStream({async pull(c){try{const{done:u,value:f}=await a.next();if(u){l(),c.close();return}let p=f.byteLength;if(n){let g=s+=p;n(g)}c.enqueue(new Uint8Array(f))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},_N=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",A7=_N&&typeof ReadableStream=="function",vxe=_N&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),E7=(e,...t)=>{try{return!!e(...t)}catch{return!1}},bxe=A7&&E7(()=>{let e=!1;const t=new Request(ua.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),X3=64*1024,kP=A7&&E7(()=>it.isReadableStream(new Response("").body)),Yw={stream:kP&&(e=>e.body)};_N&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Yw[t]&&(Yw[t]=it.isFunction(e[t])?n=>n[t]():(n,i)=>{throw new pn(`Response type '${t}' is not supported`,pn.ERR_NOT_SUPPORT,i)})})})(new Response);const jxe=async e=>{if(e==null)return 0;if(it.isBlob(e))return e.size;if(it.isSpecCompliantForm(e))return(await new Request(ua.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(it.isArrayBufferView(e)||it.isArrayBuffer(e))return e.byteLength;if(it.isURLSearchParams(e)&&(e=e+""),it.isString(e))return(await vxe(e)).byteLength},wxe=async(e,t)=>{const n=it.toFiniteNumber(e.getContentLength());return n??jxe(t)},Sxe=_N&&(async e=>{let{url:t,method:n,data:i,signal:a,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:f,withCredentials:p="same-origin",fetchOptions:g}=T7(e);u=u?(u+"").toLowerCase():"text";let x=mxe([a,s&&s.toAbortSignal()],o),v;const j=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let w;try{if(c&&bxe&&n!=="get"&&n!=="head"&&(w=await wxe(f,i))!==0){let A=new Request(t,{method:"POST",body:i,duplex:"half"}),P;if(it.isFormData(i)&&(P=A.headers.get("content-type"))&&f.setContentType(P),A.body){const[I,F]=W3(w,Kw(K3(c)));i=Q3(A.body,X3,I,F)}}it.isString(p)||(p=p?"include":"omit");const _="credentials"in Request.prototype;v=new Request(t,{...g,signal:x,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:i,duplex:"half",credentials:_?p:void 0});let T=await fetch(v);const C=kP&&(u==="stream"||u==="response");if(kP&&(l||C&&j)){const A={};["status","statusText","headers"].forEach(B=>{A[B]=T[B]});const P=it.toFiniteNumber(T.headers.get("content-length")),[I,F]=l&&W3(P,Kw(K3(l),!0))||[];T=new Response(Q3(T.body,X3,I,()=>{F&&F(),j&&j()}),A)}u=u||"text";let O=await Yw[it.findKey(Yw,u)||"text"](T,e);return!C&&j&&j(),await new Promise((A,P)=>{_7(A,P,{data:O,headers:ls.from(T.headers),status:T.status,statusText:T.statusText,config:e,request:v})})}catch(_){throw j&&j(),_&&_.name==="TypeError"&&/fetch/i.test(_.message)?Object.assign(new pn("Network Error",pn.ERR_NETWORK,e,v),{cause:_.cause||_}):pn.from(_,_&&_.code,e,v)}}),PP={http:Fye,xhr:pxe,fetch:Sxe};it.forEach(PP,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const J3=e=>`- ${e}`,Nxe=e=>it.isFunction(e)||e===null||e===!1,k7={getAdapter:e=>{e=it.isArray(e)?e:[e];const{length:t}=e;let n,i;const a={};for(let s=0;s<t;s++){n=e[s];let o;if(i=n,!Nxe(n)&&(i=PP[(o=String(n)).toLowerCase()],i===void 0))throw new pn(`Unknown adapter '${o}'`);if(i)break;a[o||"#"+s]=i}if(!i){const s=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(J3).join(`
`):" "+J3(s[0]):"as no adapter specified";throw new pn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:PP};function l2(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Xg(null,e)}function Z3(e){return l2(e),e.headers=ls.from(e.headers),e.data=o2.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),k7.getAdapter(e.adapter||Xb.adapter)(e).then(function(i){return l2(e),i.data=o2.call(e,e.transformResponse,i),i.headers=ls.from(i.headers),i},function(i){return N7(i)||(l2(e),i&&i.response&&(i.response.data=o2.call(e,e.transformResponse,i.response),i.response.headers=ls.from(i.response.headers))),Promise.reject(i)})}const P7="1.8.4",CN={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{CN[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const eL={};CN.transitional=function(t,n,i){function a(s,o){return"[Axios v"+P7+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,l)=>{if(t===!1)throw new pn(a(o," has been removed"+(n?" in "+n:"")),pn.ERR_DEPRECATED);return n&&!eL[o]&&(eL[o]=!0,console.warn(a(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,l):!0}};CN.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function _xe(e,t,n){if(typeof e!="object")throw new pn("options must be an object",pn.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const s=i[a],o=t[s];if(o){const l=e[s],c=l===void 0||o(l,s,e);if(c!==!0)throw new pn("option "+s+" must be "+c,pn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new pn("Unknown option "+s,pn.ERR_BAD_OPTION)}}const Sw={assertOptions:_xe,validators:CN},Sl=Sw.validators;let xf=class{constructor(t){this.defaults=t,this.interceptors={request:new H3,response:new H3}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Of(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:s}=n;i!==void 0&&Sw.assertOptions(i,{silentJSONParsing:Sl.transitional(Sl.boolean),forcedJSONParsing:Sl.transitional(Sl.boolean),clarifyTimeoutError:Sl.transitional(Sl.boolean)},!1),a!=null&&(it.isFunction(a)?n.paramsSerializer={serialize:a}:Sw.assertOptions(a,{encode:Sl.function,serialize:Sl.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Sw.assertOptions(n,{baseUrl:Sl.spelling("baseURL"),withXsrfToken:Sl.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&it.merge(s.common,s[n.method]);s&&it.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),n.headers=ls.concat(o,s);const l=[];let c=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(n)===!1||(c=c&&j.synchronous,l.unshift(j.fulfilled,j.rejected))});const u=[];this.interceptors.response.forEach(function(j){u.push(j.fulfilled,j.rejected)});let f,p=0,g;if(!c){const v=[Z3.bind(this),void 0];for(v.unshift.apply(v,l),v.push.apply(v,u),g=v.length,f=Promise.resolve(n);p<g;)f=f.then(v[p++],v[p++]);return f}g=l.length;let x=n;for(p=0;p<g;){const v=l[p++],j=l[p++];try{x=v(x)}catch(w){j.call(this,w);break}}try{f=Z3.call(this,x)}catch(v){return Promise.reject(v)}for(p=0,g=u.length;p<g;)f=f.then(u[p++],u[p++]);return f}getUri(t){t=Of(this.defaults,t);const n=C7(t.baseURL,t.url,t.allowAbsoluteUrls);return j7(n,t.params,t.paramsSerializer)}};it.forEach(["delete","get","head","options"],function(t){xf.prototype[t]=function(n,i){return this.request(Of(i||{},{method:t,url:n,data:(i||{}).data}))}});it.forEach(["post","put","patch"],function(t){function n(i){return function(s,o,l){return this.request(Of(l||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}xf.prototype[t]=n(),xf.prototype[t+"Form"]=n(!0)});let Cxe=class O7{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(a=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](a);i._listeners=null}),this.promise.then=a=>{let s;const o=new Promise(l=>{i.subscribe(l),s=l}).then(a);return o.cancel=function(){i.unsubscribe(s)},o},t(function(s,o,l){i.reason||(i.reason=new Xg(s,o,l),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new O7(function(a){t=a}),cancel:t}}};function Txe(e){return function(n){return e.apply(null,n)}}function Axe(e){return it.isObject(e)&&e.isAxiosError===!0}const OP={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(OP).forEach(([e,t])=>{OP[t]=e});function D7(e){const t=new xf(e),n=u7(xf.prototype.request,t);return it.extend(n,xf.prototype,t,{allOwnKeys:!0}),it.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return D7(Of(e,a))},n}const ci=D7(Xb);ci.Axios=xf;ci.CanceledError=Xg;ci.CancelToken=Cxe;ci.isCancel=N7;ci.VERSION=P7;ci.toFormData=NN;ci.AxiosError=pn;ci.Cancel=ci.CanceledError;ci.all=function(t){return Promise.all(t)};ci.spread=Txe;ci.isAxiosError=Axe;ci.mergeConfig=Of;ci.AxiosHeaders=ls;ci.formToJSON=e=>S7(it.isHTMLForm(e)?new FormData(e):e);ci.getAdapter=k7.getAdapter;ci.HttpStatusCode=OP;ci.default=ci;const{Axios:b5e,AxiosError:j5e,CanceledError:w5e,isCancel:S5e,CancelToken:N5e,VERSION:_5e,all:C5e,Cancel:T5e,isAxiosError:A5e,spread:E5e,toFormData:k5e,AxiosHeaders:P5e,HttpStatusCode:O5e,formToJSON:D5e,getAdapter:M5e,mergeConfig:I5e}=ci;function Exe(){const[e,t]=b.useState(null),[n,i]=b.useState(!1);return b.useEffect(()=>{const l=()=>{i(!1),t(null)};if(e)return e.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{e.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[e]),{type:"screen",start:async()=>{const l=await navigator.mediaDevices.getDisplayMedia({video:!0});return t(l),i(!0),l},stop:()=>{e&&(e.getTracks().forEach(l=>l.stop()),t(null),i(!1))},isStreaming:n,stream:e}}function kxe(){const[e,t]=b.useState(null),[n,i]=b.useState(!1);return b.useEffect(()=>{const l=()=>{i(!1),t(null)};if(e)return e.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{e.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[e]),{type:"webcam",start:async()=>{const l=await navigator.mediaDevices.getUserMedia({video:!0});return t(l),i(!0),l},stop:()=>{e&&(e.getTracks().forEach(l=>l.stop()),t(null),i(!1))},isStreaming:n,stream:e}}class Pxe extends o7{constructor(n){super();xr(this,"client");xr(this,"_status","disconnected");xr(this,"_session",null);xr(this,"_model",null);xr(this,"config",null);this.client=new p9(n),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(n,i){const a={date:new Date,type:n,message:i};this.emit("log",a)}async connect(n,i){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=i,this._model=n;const a={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:n,config:i,callbacks:a})}catch(s){return console.error("Error connecting to GenAI Live:",s),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var n;return this.session?((n=this.session)==null||n.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(n){this.log("server.error",n.message),this.emit("error",n)}onclose(n){this.log("server.close",`disconnected ${n.reason?`with reason: ${n.reason}`:""}`),this.emit("close",n)}async onmessage(n){var i;if(n.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(n.toolCall){this.log("server.toolCall",n),this.emit("toolcall",n.toolCall);return}if(n.toolCallCancellation){this.log("server.toolCallCancellation",n),this.emit("toolcallcancellation",n.toolCallCancellation);return}if(n.serverContent){const{serverContent:a}=n;if("interrupted"in a){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in a&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in a){let s=((i=a.modelTurn)==null?void 0:i.parts)||[];const o=s.filter(f=>{var p;return f.inlineData&&((p=f.inlineData.mimeType)==null?void 0:p.startsWith("audio/pcm"))}),l=o.map(f=>{var p;return(p=f.inlineData)==null?void 0:p.data}),c=c7.difference(s,o);if(l.forEach(f=>{if(f){const p=Vge(f);this.emit("audio",p),this.log("server.audio",`buffer (${p.byteLength})`)}}),!c.length)return;s=c;const u={modelTurn:{parts:s}};this.emit("content",u),this.log("server.content",n)}}else console.log("received unmatched message",n)}sendRealtimeInput(n){var o;let i=!1,a=!1;for(const l of n)if((o=this.session)==null||o.sendRealtimeInput({media:l}),l.mimeType.includes("audio")&&(i=!0),l.mimeType.includes("image")&&(a=!0),i&&a)break;const s=i&&a?"audio + video":i?"audio":a?"video":"unknown";this.log("client.realtimeInput",s)}sendToolResponse(n){var i;n.functionResponses&&n.functionResponses.length&&((i=this.session)==null||i.sendToolResponse({functionResponses:n.functionResponses}),this.log("client.toolResponse",n))}send(n,i=!0){var a;(a=this.session)==null||a.sendClientContent({turns:n,turnComplete:i}),this.log("client.send",{turns:Array.isArray(n)?n:[n],turnComplete:i})}}function Oxe(e){const t=b.useMemo(()=>new Pxe(e),[e]),n=b.useRef(null),[i,a]=b.useState("models/gemini-2.5-flash-live-preview"),[s,o]=b.useState({}),[l,c]=b.useState(!1),[u,f]=b.useState(0),[p,g]=b.useState(null);b.useEffect(()=>{n.current||a7({id:"audio-out"}).then(j=>{n.current=new Zge(j),n.current.addWorklet("vumeter-out",s7,w=>{f(w.data.volume)}).then(()=>{})})},[n]),b.useEffect(()=>{const j=()=>{c(!0)},w=()=>{c(!1)},_=A=>{console.error("error",A)},T=()=>{var A;return(A=n.current)==null?void 0:A.stop()},C=A=>{var P;return(P=n.current)==null?void 0:P.addPCM16(new Uint8Array(A))},O=A=>{if(console.log("Received content event:",A),A.modelTurn&&A.modelTurn.parts){const P=A.modelTurn.parts.filter(I=>"text"in I&&I.text);if(P.length>0){const I=P.map(F=>F.text).join(" ");g(I),console.log("AI Summary received:",I)}}};return t.on("error",_).on("open",j).on("close",w).on("interrupted",T).on("audio",C).on("content",O),()=>{t.off("error",_).off("open",j).off("close",w).off("interrupted",T).off("audio",C).off("content",O).disconnect()}},[t]);const x=b.useCallback(async()=>{if(!s)throw new Error("config has not been set");t.disconnect(),await t.connect(i,s)},[t,s,i]),v=b.useCallback(async()=>{t.disconnect(),c(!1)},[c,t]);return{client:t,config:s,setConfig:o,model:i,setModel:a,connected:l,connect:x,disconnect:v,volume:u,aiSummary:p}}const M7=b.createContext(void 0),TN=({options:e,children:t})=>{const n=Oxe(e);return r.jsx(M7.Provider,{value:n,children:t})},Nd=()=>{const e=b.useContext(M7);if(!e)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return e};function Dxe(){const{config:e,setConfig:t}=Nd(),[n,i]=b.useState({value:"audio",label:"audio"}),a=b.useCallback(s=>{t({...e,responseModalities:[s==="audio"?gd.AUDIO:gd.TEXT]})},[e,t]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),r.jsx(i7,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:n,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:s=>{i(s),s&&(s.value==="audio"||s.value==="text")&&a(s.value)}})]})}const tL=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function Mxe(){const{config:e,setConfig:t}=Nd();b.useEffect(()=>{var l,c,u;const s=((u=(c=(l=e.speechConfig)==null?void 0:l.voiceConfig)==null?void 0:c.prebuiltVoiceConfig)==null?void 0:u.voiceName)||"Atari02";i({value:s,label:s})},[e]);const[n,i]=b.useState(tL[5]),a=b.useCallback(s=>{t({...e,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}}})},[e,t]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),r.jsx(i7,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:n,defaultValue:n,options:tL,onChange:s=>{i(s),s&&a(s.value)}})]})}function Ixe(){const[e,t]=b.useState(!1),{config:n,setConfig:i,connected:a}=Nd(),s=b.useMemo(()=>Array.isArray(n.tools)?n.tools.filter(u=>Array.isArray(u.functionDeclarations)).map(u=>u.functionDeclarations).filter(u=>!!u).flat():[],[n]),o=b.useMemo(()=>{var u;return n.systemInstruction?typeof n.systemInstruction=="string"?n.systemInstruction:Array.isArray(n.systemInstruction)?n.systemInstruction.map(f=>typeof f=="string"?f:f.text).join(`
`):typeof n.systemInstruction=="object"&&"parts"in n.systemInstruction&&((u=n.systemInstruction.parts)==null?void 0:u.map(f=>f.text).join(`
`))||"":""},[n]),l=b.useCallback(u=>{const f={...n,systemInstruction:u.target.value};i(f)},[n,i]),c=b.useCallback((u,f)=>{var g;const p={...n,tools:((g=n.tools)==null?void 0:g.map(x=>{const v=x;return Array.isArray(v.functionDeclarations)?{...x,functionDeclarations:v.functionDeclarations.map(j=>j.name===u?{...j,description:f}:j)}:x}))||[]};i(p)},[n,i]);return r.jsxs("div",{className:"settings-dialog",children:[r.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>t(!e),children:"settings"}),r.jsx("dialog",{className:"dialog",style:{display:e?"block":"none"},children:r.jsxs("div",{className:`dialog-container ${a?"disabled":""}`,children:[a&&r.jsx("div",{className:"connected-indicator",children:r.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),r.jsxs("div",{className:"mode-selectors",children:[r.jsx(Dxe,{}),r.jsx(Mxe,{})]}),r.jsx("h3",{children:"System Instructions"}),r.jsx("textarea",{className:"system",onChange:l,value:o}),r.jsx("h4",{children:"Function declarations"}),r.jsx("div",{className:"function-declarations",children:r.jsx("div",{className:"fd-rows",children:s.map((u,f)=>{var p;return r.jsxs("div",{className:"fd-row",children:[r.jsx("span",{className:"fd-row-name",children:u.name}),r.jsx("span",{className:"fd-row-args",children:Object.keys(((p=u.parameters)==null?void 0:p.properties)||{}).map((g,x)=>r.jsx("span",{children:g},x))}),r.jsx("input",{className:"fd-row-description",type:"text",defaultValue:u.description,onBlur:g=>c(u.name,g.target.value)},`fd-${u.description}`)]},`function-${f}`)})})})]})})]})}const nL=b.memo(({isStreaming:e,onIcon:t,offIcon:n,start:i,stop:a})=>e?r.jsx("button",{className:"action-button",onClick:a,children:r.jsx("span",{className:"material-symbols-outlined",children:t})}):r.jsx("button",{className:"action-button",onClick:i,children:r.jsx("span",{className:"material-symbols-outlined",children:n})}));function Rxe({videoRef:e,children:t,onVideoStreamChange:n=()=>{},supportsVideo:i,enableEditingSettings:a}){const s=[kxe(),Exe()],[o,l]=b.useState(null),[c,u]=s,[f,p]=b.useState(0),[g]=b.useState(()=>new l7),[x,v]=b.useState(!1),j=b.useRef(null),w=b.useRef(null),{client:_,connected:T,connect:C,disconnect:O,volume:A}=Nd();b.useEffect(()=>{!T&&w.current&&w.current.focus()},[T]),b.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(f*200,8))}px`)},[f]),b.useEffect(()=>{const I=F=>{_.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:F}])};return T&&!x&&g?g.on("data",I).on("volume",p).start():g.stop(),()=>{g.off("data",I).off("volume",p)}},[T,_,x,g]),b.useEffect(()=>{e.current&&(e.current.srcObject=o);let I=-1;function F(){const B=e.current,$=j.current;if(!B||!$)return;const L=$.getContext("2d");if($.width=B.videoWidth*.25,$.height=B.videoHeight*.25,$.width+$.height>0){L.drawImage(B,0,0,$.width,$.height);const V=$.toDataURL("image/jpeg",1),H=V.slice(V.indexOf(",")+1,1/0);_.sendRealtimeInput([{mimeType:"image/jpeg",data:H}])}T&&(I=window.setTimeout(F,1e3/.5))}return T&&o!==null&&requestAnimationFrame(F),()=>{clearTimeout(I)}},[T,o,_,e]);const P=I=>async()=>{if(I){const F=await I.start();l(F),n(F)}else l(null),n(null);s.filter(F=>F!==I).forEach(F=>F.stop())};return r.jsxs("section",{className:"control-tray",children:[r.jsx("canvas",{style:{display:"none"},ref:j}),r.jsxs("nav",{className:ud("actions-nav",{disabled:!T}),children:[r.jsx("button",{className:ud("action-button mic-button",{recording:!x&&T}),onClick:()=>v(!x),children:x?r.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):r.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),r.jsx("div",{className:"action-button no-action outlined",children:r.jsx(Qge,{volume:A,active:T,hover:!1})}),i&&r.jsxs(r.Fragment,{children:[r.jsx(nL,{isStreaming:u.isStreaming,start:P(u),stop:P(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),r.jsx(nL,{isStreaming:c.isStreaming,start:P(c),stop:P(),onIcon:"videocam_off",offIcon:"videocam"})]}),t]}),r.jsxs("div",{className:ud("connection-container",{connected:T}),children:[r.jsx("div",{className:"connection-button-container",children:r.jsx("button",{ref:w,className:ud("action-button connect-toggle",{connected:T}),onClick:T?O:C,children:r.jsx("span",{className:"material-symbols-outlined filled",children:T?"pause":"play_arrow"})})}),r.jsx("span",{className:"text-indicator",children:"Streaming"})]}),a?r.jsx(Ixe,{}):""]})}const rL={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:pg.OBJECT,properties:{summary:{type:pg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},Lxe=({patientData:e,tokenNumber:t})=>{const[n,i]=b.useState(""),{client:a,setConfig:s,setModel:o}=Nd();return b.useEffect(()=>{o("models/gemini-2.5-flash-live-preview"),s({responseModalities:[gd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[rL]}]})},[s,o]),b.useEffect(()=>{const l=c=>{if(!c.functionCalls)return;const u=c.functionCalls.find(f=>f.name===rL.name);if(u){const f=u.args.summary;i(f)}c.functionCalls.length&&setTimeout(()=>{var f;return a.sendToolResponse({functionResponses:(f=c.functionCalls)==null?void 0:f.map(p=>({response:{output:{success:!0}},id:p.id,name:p.name}))})},200)};return a.on("toolcall",l),()=>{a.off("toolcall",l)}},[a]),b.useEffect(()=>{if(n){const l=encodeURIComponent(n);t?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${t}&caseDetails=${l}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${l}`}},[n,t]),r.jsxs("div",{className:"hospital-reception",children:[r.jsx("h1",{children:"Newtons Ai"}),r.jsx("p",{children:"Newtons Ai"}),t&&r.jsxs("h2",{children:["Token Number: ",t]}),e&&r.jsxs("div",{children:[r.jsx("h2",{children:"Patient Details"}),r.jsx("pre",{children:JSON.stringify(e,null,2)})]}),n&&r.jsxs("div",{children:[r.jsx("h2",{children:"Case Summary (from Tool Call)"}),r.jsx("p",{children:n})]})]})},iL="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function Fxe(){const e=m9();if(!e)return console.warn("No auth token found, using default Live API key."),iL;try{const n=(await ci.get("/api/clinics/gemini-api-key",{headers:{Authorization:`Bearer ${e}`}})).data.geminiApiKey;if(n)return n}catch(t){console.error("Failed to fetch clinic-specific Live API key:",t)}return console.warn("Clinic-specific Live API key not found or failed to fetch, using default."),iL}function $xe(){const e=b.useRef(null),[t,n]=b.useState(null),[i,a]=b.useState(null);return b.useEffect(()=>{(async()=>{try{const o=await Fxe();a({apiKey:o})}catch(o){console.error("Error setting Live API options:",o)}})()},[]),i?r.jsx("div",{className:"App",children:r.jsx(TN,{options:i,children:r.jsx(Bxe,{videoRef:e,setVideoStream:n,videoStream:t})})}):r.jsx("div",{children:"Loading Live API settings..."})}const Bxe=({videoRef:e,setVideoStream:t,videoStream:n})=>{const[i,a]=b.useState(null),[s,o]=b.useState(null),{connected:l,client:c,connect:u,config:f,model:p}=Nd(),[g,x]=b.useState(""),v=b.useRef(null),[j,w]=b.useState(!1);b.useEffect(()=>{const T=window.matchMedia("(prefers-color-scheme: dark)"),C=O=>{document.documentElement.setAttribute("data-theme",O.matches?"dark":"light")};return C(T),T.addEventListener("change",C),()=>T.removeEventListener("change",C)},[]),b.useEffect(()=>{const T=new URLSearchParams(window.location.search),C={};for(const[O,A]of T.entries())O==="token_number"?o(A):C[O]=A;a(C)},[]),b.useEffect(()=>{Object.keys(f).length>0&&p&&u()},[u,f,p]),b.useEffect(()=>{if(l&&i&&!j){const T=JSON.stringify(i,null,2);c.send([{text:T}]),x(""),w(!0)}},[l,i,c,j]),b.useEffect(()=>{i&&x(JSON.stringify(i,null,2))},[i]);const _=()=>{c.send([{text:g}]),x(""),v.current&&(v.current.innerText="")};return r.jsx("div",{className:"streaming-console",children:r.jsxs("main",{children:[r.jsxs("div",{className:"main-app-area",children:[r.jsx(Lxe,{patientData:i,tokenNumber:s}),r.jsx("video",{className:ud("stream",{hidden:!e.current||!n}),ref:e,autoPlay:!0,playsInline:!0})]}),r.jsx("div",{className:ud("input-container",{disabled:!l}),children:r.jsxs("div",{className:"input-content",children:[r.jsx("textarea",{className:"input-area",ref:v,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),T.stopPropagation(),_())},onChange:T=>x(T.target.value),value:g}),r.jsx("span",{className:ud("input-content-placeholder",{hidden:g.length}),children:"Typesomething..."}),r.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:_,children:"send"})]})}),r.jsx(Rxe,{videoRef:e,supportsVideo:!0,onVideoStreamChange:t,enableEditingSettings:!0})]})})},aL="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",zxe=({volume:e,active:t})=>{const n=Array.from({length:5},(i,a)=>r.jsx("div",{className:`audio-bar ${t?"active":""}`,style:{height:t?`${Math.min(24,20+e*40*(1+Math.sin(a)*.3))}px`:"8px",animationDelay:`${a*.1}s`}},a));return r.jsx("div",{className:"audio-pulse",children:n})},qxe=b.forwardRef(({videoRef:e,supportsVideo:t,onVideoStreamChange:n,textInput:i,onSubmitTextInput:a},s)=>{var P;const{connected:o,connect:l,disconnect:c,client:u,volume:f}=Nd(),[p,g]=b.useState(!1),[x,v]=b.useState(!1),[j,w]=b.useState(!1),[_]=b.useState(()=>new l7),T=async()=>{o?await c():(await l(),i.trim()&&a())};b.useEffect(()=>{const I=F=>{u.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:F}])};return o&&!p?_.on("data",I).start():_.stop(),()=>{_.off("data",I),_.stop()}},[o,u,p,_]);const C=b.useCallback(async()=>{if(x)A==null||A.getTracks().forEach(I=>I.stop()),n(null),v(!1);else try{const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});e.current&&(e.current.srcObject=I),n(I),v(!0)}catch(I){console.error("Error accessing webcam:",I),v(!1)}},[x,n,e]),O=b.useCallback(async()=>{if(j)A==null||A.getTracks().forEach(I=>I.stop()),n(null),w(!1);else try{const I=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});e.current&&(e.current.srcObject=I),n(I),w(!0)}catch(I){console.error("Error accessing screen share:",I),w(!1)}},[j,n,e]),A=(P=e.current)==null?void 0:P.srcObject;return b.useEffect(()=>()=>{A&&A.getTracks().forEach(I=>I.stop())},[A]),b.useImperativeHandle(s,()=>({handleConnect:T})),r.jsx("div",{className:"live-api-control-tray",children:r.jsxs("div",{className:"live-api-control-tray-inner",children:[r.jsxs("div",{className:"live-api-control-group",children:[r.jsx("button",{onClick:()=>g(!p),disabled:!o,className:`live-api-control-button ${o&&!p?"mic-active":"mic-inactive"}`,"aria-label":p?"Unmute microphone":"Mute microphone",children:p?r.jsx(hZ,{className:"w-5 h-5"}):r.jsx(iN,{className:"w-5 h-5"})}),r.jsx("div",{className:"live-api-audio-pulse-container",children:r.jsx(zxe,{volume:f,active:o})}),t&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:O,disabled:!o,className:`live-api-control-button ${j?"video-active":"video-inactive"}`,"aria-label":j?"Stop screen share":"Start screen share",children:r.jsx(yZ,{className:"w-5 h-5"})}),r.jsx("button",{onClick:C,disabled:!o,className:`live-api-control-button ${x?"video-active":"video-inactive"}`,"aria-label":x?"Turn off webcam":"Turn on webcam",children:r.jsx(See,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"live-api-control-group",children:[r.jsxs("div",{className:"live-api-status-indicator",children:[r.jsx("div",{className:`live-api-status-dot ${o?"connected":"disconnected"}`}),r.jsx("span",{className:"live-api-status-text",children:o?"Streaming":"Disconnected"})]}),r.jsx("button",{onClick:T,className:`live-api-connect-button ${o?"connected":"disconnected"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(TZ,{className:"w-5 h-5"}),r.jsx("span",{children:"Pause"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Uq,{className:"w-5 h-5"}),r.jsx("span",{children:"Start"})]})})]})]})})}),Uxe=({tokenNumber:e,aiSummary:t,clinicName:n})=>r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx("div",{className:"hospital-reception-logo",children:r.jsx("span",{children:n.charAt(0)})}),r.jsxs("h1",{className:"hospital-reception-title",children:[n," AI"]}),r.jsxs("p",{className:"hospital-reception-subtitle",children:["Intelligent ",n," Reception Assistant"]})]}),e&&r.jsxs("div",{className:"hospital-reception-token-card",children:[r.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),r.jsx("p",{className:"hospital-reception-token-number",children:e})]}),t&&r.jsxs("div",{className:"hospital-reception-summary-card",children:[r.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),r.jsx("p",{className:"hospital-reception-summary-text",children:t})]})]}),sL={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:pg.OBJECT,properties:{summary:{type:pg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},Vxe=({onClose:e,patientData:t,tokenNumber:n,onAiSummaryChange:i,clinicName:a,voiceAiLanguage:s,lastMotionTimestamp:o,backgroundMode:l})=>{const c=b.useRef(null),u=b.useRef(null),[f,p]=b.useState(null),[g,x]=b.useState("hi"),{client:v,connected:j,setConfig:w,setModel:_,disconnect:T,connect:C}=Nd(),O=b.useRef(!1),A=b.useRef(Date.now()),P=b.useRef(!1);b.useEffect(()=>{O.current=j,j&&(A.current=Date.now(),P.current=!1)},[j]),b.useEffect(()=>{if(o){if(A.current=Date.now(),O.current)return;j||C()}},[o,C,j]),b.useEffect(()=>{if(!o||!j)return;const H=setInterval(()=>{const X=Date.now()-A.current;X>25e3&&X<3e4&&!P.current&&(P.current=!0,v.send([{text:"I'll be here if you need more help!"}])),X>3e4&&(console.log("No motion for 30s. Disconnecting session."),T(),e())},1e3);return()=>clearInterval(H)},[o,j,v,T,e]);const I=b.useMemo(()=>{let H=`Your job is to:

If patient details like name, age, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (Name, Age) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's Name and Age only. Do not ask for their phone number.

    You should guess the patient's sex based on their voice or appearance.

For every visit, collect the patient's history by asking questions.

CRITICAL WORKFLOW - DO NOT USE THE 'case_summary' TOOL YET.

Phase 1: History Collection (MANDATORY LOOP)
Once you have the basics, you MUST ask the patient about their complaints.
- Ask clarifying questions to understand the onset, duration, severity, and associated symptoms.
- DO NOT just accept a one-line complaint.
- Loop your questions until you are confident you have a complete medical history.

Phase 2: Billing Check Protocol
ONLY after you are confident you have the complete history, proceed to the Billing Check Protocol immediately:
1. Ask: 'Would you like to get the tests done?'
   - IF PATIENT SAYS YES: STOP questioning. Do NOT mention medications (they will get them after reports).
     Result -> Lab: Yes, Pharmacy: No.
   - IF PATIENT SAYS NO: Ask: 'Would you like to get the medications?'
     - IF YES: Result -> Lab: No, Pharmacy: Yes.
     - IF NO: Result -> Lab: No, Pharmacy: No.

Phase 3: Final Summary
Only AFTER establishing the billing preferences as per the logic above, you should use the 'case_summary' tool EXACTLY ONCE at the end.

The 'case_summary' MUST be comprehensive and include:
- Patient Name, Age, Sex
- Medical History & Complaints
- Billing Preferences (e.g., 'Billing Preference: Lab - Yes, Pharmacy - No')

Do not call the tool multiple times. Wait until you have ALL the info, then generate the single final summary and ask them to wait in reception.`;t&&(H+=`

Patient Data: ${JSON.stringify(t,null,2)}`);const X={"en-US":"English","hi-IN":"Hindi","te-IN":"Telugu","bn-IN":"Bengali","mr-IN":"Marathi","ta-IN":"Tamil","gu-IN":"Gujarati","kn-IN":"Kannada","ml-IN":"Malayalam","pa-IN":"Punjabi","es-ES":"Spanish","fr-FR":"French","de-DE":"German","it-IT":"Italian","pt-PT":"Portuguese","ru-RU":"Russian","ja-JP":"Japanese","ko-KR":"Korean","zh-CN":"Chinese","ar-SA":"Arabic"}[s]||"English";return H+=` You should always speak in ${X}.`,s==="te-IN"&&(H+=" Dont write the telugu words in english."),{responseModalities:[gd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:H}]},tools:[{functionDeclarations:[sL]}]}},[t,s]);b.useEffect(()=>{if(_("models/gemini-2.5-flash-native-audio-preview-12-2025"),w(I),!o){const H=setTimeout(()=>{u.current&&!j&&u.current.handleConnect()},2e3);return()=>clearTimeout(H)}},[w,_,I,j,o]),b.useEffect(()=>()=>{j&&T()},[j,T]);const[F,B]=b.useState(null);b.useEffect(()=>{const H=te=>{if(!te.functionCalls)return;const X=te.functionCalls.find(q=>q.name===sL.name);if(X){const q=X.args.summary;B(q),i(q)}te.functionCalls.length&&setTimeout(()=>{var q;return v.sendToolResponse({functionResponses:(q=te.functionCalls)==null?void 0:q.map(W=>({response:{output:{success:!0}},id:W.id,name:W.name}))})},200)};return v.on("toolcall",H),()=>{v.off("toolcall",H)}},[v,i]);const $=()=>{g.trim()&&(v.send([{text:g}]),x(""))},L=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),$())},V=async()=>{B(null),i(null),x("hi"),j?(T(),setTimeout(()=>{C()},500)):C()};return r.jsx("div",{className:"live-api-modal-overlay",style:l?{opacity:0,pointerEvents:"none",position:"absolute",zIndex:-1}:{},children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsxs("div",{className:"live-api-modal-header",children:[r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx("div",{className:"live-api-modal-logo",children:r.jsx("span",{children:a.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h1",{className:"live-api-modal-title",children:a}),r.jsxs("p",{className:"live-api-modal-subtitle",children:[a," Hospital Assistant"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:V,className:"live-api-modal-close-button",title:"Refresh Session","aria-label":"Refresh session",children:r.jsx(Vq,{className:"w-6 h-6"})}),r.jsx("button",{onClick:e,className:"live-api-modal-close-button","aria-label":"Close modal",children:r.jsx(Ut,{className:"w-6 h-6"})})]})]}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"live-api-reception-area",children:[r.jsx(Uxe,{patientData:t,tokenNumber:n,aiSummary:F,clinicName:a}),f&&r.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),r.jsx("div",{className:"live-api-input-area",children:r.jsxs("div",{className:"live-api-input-container",children:[r.jsx("textarea",{value:g,onChange:H=>x(H.target.value),onKeyDown:L,placeholder:"Type your message here...",disabled:!j,rows:1,className:"live-api-textarea"}),r.jsx("button",{onClick:$,disabled:!j||!g.trim(),className:"live-api-send-button","aria-label":"Send message",children:r.jsx(aN,{className:"w-5 h-5"})})]})}),r.jsx(qxe,{ref:u,videoRef:c,supportsVideo:!0,onVideoStreamChange:p,textInput:g,onSubmitTextInput:$})]})})]})})},AN=({onClose:e,patientData:t,tokenNumber:n,onAiSummaryChange:i,lastMotionTimestamp:a,backgroundMode:s})=>{const[o,l]=b.useState(null),[c,u]=b.useState("Newtons Ai"),[f,p]=b.useState("en-US"),[g,x]=b.useState(!0);if(b.useEffect(()=>{(async()=>{try{let w=null,_="Newtons Ai",T="en-US";try{const C=await ue("/api/clinics/settings");if(C.ok){const O=await C.json();O.name&&O.name!==""&&(_=O.name),O.gemini_api_key&&O.gemini_api_key.trim()!==""&&(w=O.gemini_api_key.trim()),O.voice_ai_language&&(T=O.voice_ai_language)}}catch(C){console.warn("Failed to fetch clinic settings",C)}if(u(_),p(T),w)l(w);else{try{const C=await ue("/api/global-settings/app_gemini_api_key");if(C.ok){const O=await C.json();if(O.value&&O.value.trim()!==""){l(O.value.trim());return}}}catch(C){console.warn("Failed to fetch global key fallback",C)}l(aL)}}catch(w){console.error("Unexpected error in getSettings:",w),l(aL)}finally{x(!1)}})()},[]),g)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsx("div",{className:"live-api-modal-header",style:{borderBottom:"none"},children:r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsxs("div",{style:{marginLeft:"12px"},children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:180,height:14,style:{marginTop:"4px"}})]})]})}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx(Z,{variant:"circular",width:64,height:64,style:{margin:"0 auto"}}),r.jsx(Z,{width:200,height:32,style:{margin:"16px auto 8px"}}),r.jsx(Z,{width:250,height:16,style:{margin:"0 auto"}})]}),r.jsxs("div",{className:"hospital-reception-token-card",style:{background:"transparent",boxShadow:"none"},children:[r.jsx(Z,{width:140,height:20,style:{margin:"0 auto 8px"}}),r.jsx(Z,{width:100,height:48,style:{margin:"0 auto"}})]})]})}),r.jsx("div",{className:"live-api-control-tray",style:{position:"relative"},children:r.jsx("div",{className:"live-api-control-tray-inner",style:{justifyContent:"center"},children:r.jsx("div",{className:"live-api-loading-text",children:"Initializing AI Assistant..."})})})]})});if(!o)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsx("div",{className:"live-api-modal-content",children:r.jsx("div",{children:"Error: API Key not available."})})});const v={apiKey:o};return r.jsx(TN,{options:v,children:r.jsx(Vxe,{onClose:e,patientData:t,tokenNumber:n,onAiSummaryChange:i,clinicName:c,voiceAiLanguage:f,lastMotionTimestamp:a,backgroundMode:s})})},EN=()=>{const[e,t]=b.useState(null),[n,i]=b.useState(!0),[a,s]=b.useState(null),o=b.useCallback(async()=>{i(!0),s(null);try{const c=await ue("/api/clinics/settings");if(!c.ok)throw new Error("Failed to fetch clinic settings");const u=await c.json();t(u)}catch(c){s(c instanceof Error?c.message:"An error occurred")}finally{i(!1)}},[]);b.useEffect(()=>{o()},[o]);const l=(e==null?void 0:e.custom_columns_config)||{};return{settings:e,customColumnsConfig:l,loading:n,error:a,refetch:o}},Hxe="_overlay_79cew_5",Gxe="_overlayMinimized_79cew_55",Wxe="_modal_79cew_65",Kxe="_minimized_79cew_97",Yxe="_contentWrapper_79cew_113",Qxe="_exiting_79cew_161",Xxe="_header_79cew_183",Jxe="_inputWrapper_79cew_197",Zxe="_inputContainer_79cew_215",eve="_minimizedSearchIcon_79cew_273",tve="_input_79cew_197",nve="_controlsGroup_79cew_347",rve="_iconButton_79cew_373",ive="_sendButton_79cew_413",ave="_dragBar_79cew_459",sve="_dragBarTitle_79cew_489",ove="_dragBarControls_79cew_519",lve="_dragBarControlsRight_79cew_537",cve="_newChatBtn_79cew_553",uve="_windowControlBtn_79cew_589",dve="_content_79cew_113",hve="_overlayContent_79cew_687",fve="_section_79cew_711",pve="_sectionTitle_79cew_723",mve="_recentList_79cew_743",gve="_recentPill_79cew_767",yve="_recentName_79cew_807",xve="_recentToken_79cew_819",vve="_recentInfo_79cew_837",bve="_examplesGrid_79cew_849",jve="_exampleCard_79cew_861",wve="_exampleIcon_79cew_897",Sve="_exampleText_79cew_905",Nve="_chatSectionFill_79cew_919",_ve="_chatMessagesFill_79cew_935",Cve="_chatBubble_79cew_955",Tve="_chatBubbleUser_79cew_975",Ave="_chatBubbleModel_79cew_991",Eve="_chatBubbleSystem_79cew_1009",kve="_processing_79cew_1025",Pve="_spinner_79cew_1043",Ove="_resultItem_79cew_1065",Dve="_resultName_79cew_1093",Mve="_resultToken_79cew_1103",Ive="_resultDetails_79cew_1115",Rve="_noResults_79cew_1125",Dt={overlay:Hxe,overlayMinimized:Gxe,modal:Wxe,minimized:Kxe,contentWrapper:Yxe,exiting:Qxe,header:Xxe,inputWrapper:Jxe,inputContainer:Zxe,minimizedSearchIcon:eve,input:tve,controlsGroup:nve,iconButton:rve,sendButton:ive,dragBar:ave,dragBarTitle:sve,dragBarControls:ove,dragBarControlsRight:lve,newChatBtn:cve,windowControlBtn:uve,content:dve,overlayContent:hve,section:fve,sectionTitle:pve,recentList:mve,recentPill:gve,recentName:yve,recentToken:xve,recentInfo:vve,examplesGrid:bve,exampleCard:jve,exampleIcon:wve,exampleText:Sve,chatSectionFill:Nve,chatMessagesFill:_ve,chatBubble:Cve,chatBubbleUser:Tve,chatBubbleModel:Ave,chatBubbleSystem:Eve,processing:kve,spinner:Pve,resultItem:Ove,resultName:Dve,resultToken:Mve,resultDetails:Ive,noResults:Rve},Jb=({columns:e,data:t,onSave:n,onRowAdd:i,onRowDelete:a,onRowClick:s,onRowHover:o,editable:l=!0,showRowNumbers:c=!0,title:u})=>{const[f,p]=b.useState(t),[g,x]=b.useState(null),[v,j]=b.useState(""),[w,_]=b.useState(""),[T,C]=b.useState(null),[O,A]=b.useState(!1),[P,I]=b.useState(new Set);Se.useEffect(()=>{p(t),A(!1)},[t]);const F=b.useMemo(()=>{let q=[...f];if(w.trim()){const W=w.toLowerCase();q=q.filter(ae=>Object.values(ae).some(G=>G!=null&&String(G).toLowerCase().includes(W)))}return T&&q.sort((W,ae)=>{const G=W[T.key],z=ae[T.key];return G==null?1:z==null?-1:G<z?T.direction==="asc"?-1:1:G>z?T.direction==="asc"?1:-1:0}),q},[f,w,T]),B=(q,W)=>{var G;if(!l)return;const ae=e.find(z=>z.key===W);(ae==null?void 0:ae.editable)!==!1&&(x({row:q,col:W}),j(String(((G=f[q])==null?void 0:G[W])??"")))},$=()=>{var q;if(g){const W=[...f],ae=e.find(z=>z.key===g.col);let G=v;(ae==null?void 0:ae.type)==="number"&&(G=parseFloat(G)||0),(ae==null?void 0:ae.type)==="boolean"&&(G=G.toLowerCase()==="true"||G==="1"),((q=W[g.row])==null?void 0:q[g.col])!==G&&(W[g.row]={...W[g.row],[g.col]:G},p(W),A(!0))}x(null)},L=q=>{if(q.key==="Enter")$();else if(q.key==="Escape")x(null);else if(q.key==="Tab"&&(q.preventDefault(),$(),g)){const W=e.findIndex(G=>G.key===g.col),ae=e[W+1];ae?setTimeout(()=>B(g.row,ae.key),0):g.row<f.length-1&&setTimeout(()=>B(g.row+1,e[0].key),0)}},V=q=>{C(W=>(W==null?void 0:W.key)===q?W.direction==="asc"?{key:q,direction:"desc"}:null:{key:q,direction:"asc"})},H=()=>{n&&(n(f),A(!1))},te=()=>{const q=e.map(je=>je.label).join(","),W=f.map(je=>e.map(Y=>{const Oe=je[Y.key];return typeof Oe=="string"&&Oe.includes(",")?`"${Oe}"`:Oe}).join(",")),ae=[q,...W].join(`
`),G=new Blob([ae],{type:"text/csv"}),z=URL.createObjectURL(G),le=document.createElement("a");le.href=z,le.download=`${u||"data"}.csv`,le.click()},X=q=>{const W=new Set(P);W.has(q)?W.delete(q):W.add(q),I(W)};return r.jsxs("div",{className:"excel-grid",children:[r.jsxs("div",{className:"excel-toolbar",children:[r.jsxs("div",{className:"excel-search",children:[r.jsx("input",{type:"text",placeholder:" Search...",value:w,onChange:q=>_(q.target.value)}),w&&r.jsx("button",{className:"clear-search",onClick:()=>_(""),children:r.jsx(Ut,{size:14})})]}),r.jsxs("div",{className:"excel-actions",children:[i&&r.jsxs("button",{onClick:i,className:"excel-btn",title:"Add Row",children:[r.jsx(hr,{size:16})," Add"]}),r.jsxs("button",{onClick:te,className:"excel-btn",title:"Export CSV",children:[r.jsx(Lq,{size:16})," Export"]}),l&&n&&r.jsxs("button",{onClick:H,className:`excel-btn save-btn ${O?"has-changes":""}`,disabled:!O,title:"Save Changes",children:[r.jsx(io,{size:16})," Save"]})]})]}),r.jsxs("div",{className:"excel-status",children:[w&&r.jsxs("span",{children:["Showing ",F.length," of ",f.length]}),O&&r.jsx("span",{className:"unsaved-indicator",children:" Unsaved changes"})]}),r.jsx("div",{className:"excel-table-wrapper",children:r.jsxs("table",{className:"excel-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[c&&r.jsx("th",{className:"row-num-header",children:"#"}),e.map(q=>r.jsx("th",{onClick:()=>V(q.key),style:{width:q.width,cursor:"pointer"},children:r.jsxs("div",{className:"th-content",children:[q.label,(T==null?void 0:T.key)===q.key&&(T.direction==="asc"?r.jsx(hJ,{size:14}):r.jsx(Rq,{size:14}))]})},q.key)),a&&r.jsx("th",{className:"action-col",children:""})]})}),r.jsx("tbody",{children:F.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:e.length+(c?1:0)+(a?1:0),className:"no-data",children:"No data found"})}):F.map((q,W)=>r.jsxs("tr",{className:`${P.has(W)?"selected":""} ${s?"clickable-row":""}`,onClick:()=>s&&s(q,W),onMouseEnter:()=>o&&o(q,W),style:s?{cursor:"pointer"}:void 0,children:[c&&r.jsx("td",{className:"row-num",onClick:()=>X(W),children:W+1}),e.map(ae=>r.jsx("td",{onClick:()=>B(W,ae.key),className:`
                                                ${(g==null?void 0:g.row)===W&&(g==null?void 0:g.col)===ae.key?"editing":""}
                                                ${ae.editable===!1?"read-only":""}
                                            `,children:(g==null?void 0:g.row)===W&&(g==null?void 0:g.col)===ae.key?r.jsx("input",{type:ae.type==="number"?"number":"text",value:v,onChange:G=>j(G.target.value),onBlur:$,onKeyDown:L,autoFocus:!0}):r.jsx("span",{children:q[ae.key]??""})},ae.key)),a&&r.jsx("td",{className:"action-col",children:r.jsx("button",{className:"delete-row",onClick:()=>a(W),children:r.jsx(Ut,{size:14})})})]},q.id||W))})]})}),r.jsxs("div",{className:"excel-footer",children:[r.jsxs("span",{children:[f.length," rows"]}),P.size>0&&r.jsxs("span",{children:[P.size," selected"]})]})]})};function I7(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=I7(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function dn(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=I7(e))&&(i&&(i+=" "),i+=t);return i}var c2,oL;function hs(){if(oL)return c2;oL=1;var e=Array.isArray;return c2=e,c2}var u2,lL;function R7(){if(lL)return u2;lL=1;var e=typeof to=="object"&&to&&to.Object===Object&&to;return u2=e,u2}var d2,cL;function ql(){if(cL)return d2;cL=1;var e=R7(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return d2=n,d2}var h2,uL;function Zb(){if(uL)return h2;uL=1;var e=ql(),t=e.Symbol;return h2=t,h2}var f2,dL;function Lve(){if(dL)return f2;dL=1;var e=Zb(),t=Object.prototype,n=t.hasOwnProperty,i=t.toString,a=e?e.toStringTag:void 0;function s(o){var l=n.call(o,a),c=o[a];try{o[a]=void 0;var u=!0}catch{}var f=i.call(o);return u&&(l?o[a]=c:delete o[a]),f}return f2=s,f2}var p2,hL;function Fve(){if(hL)return p2;hL=1;var e=Object.prototype,t=e.toString;function n(i){return t.call(i)}return p2=n,p2}var m2,fL;function Xc(){if(fL)return m2;fL=1;var e=Zb(),t=Lve(),n=Fve(),i="[object Null]",a="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?a:i:s&&s in Object(l)?t(l):n(l)}return m2=o,m2}var g2,pL;function Jc(){if(pL)return g2;pL=1;function e(t){return t!=null&&typeof t=="object"}return g2=e,g2}var y2,mL;function Jg(){if(mL)return y2;mL=1;var e=Xc(),t=Jc(),n="[object Symbol]";function i(a){return typeof a=="symbol"||t(a)&&e(a)==n}return y2=i,y2}var x2,gL;function oM(){if(gL)return x2;gL=1;var e=hs(),t=Jg(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:i.test(s)||!n.test(s)||o!=null&&s in Object(o)}return x2=a,x2}var v2,yL;function _d(){if(yL)return v2;yL=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return v2=e,v2}var b2,xL;function lM(){if(xL)return b2;xL=1;var e=Xc(),t=_d(),n="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==i||c==a||c==n||c==s}return b2=o,b2}var j2,vL;function $ve(){if(vL)return j2;vL=1;var e=ql(),t=e["__core-js_shared__"];return j2=t,j2}var w2,bL;function Bve(){if(bL)return w2;bL=1;var e=$ve(),t=function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function n(i){return!!t&&t in i}return w2=n,w2}var S2,jL;function L7(){if(jL)return S2;jL=1;var e=Function.prototype,t=e.toString;function n(i){if(i!=null){try{return t.call(i)}catch{}try{return i+""}catch{}}return""}return S2=n,S2}var N2,wL;function zve(){if(wL)return N2;wL=1;var e=lM(),t=Bve(),n=_d(),i=L7(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,f=RegExp("^"+c.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||t(g))return!1;var x=e(g)?f:s;return x.test(i(g))}return N2=p,N2}var _2,SL;function qve(){if(SL)return _2;SL=1;function e(t,n){return t==null?void 0:t[n]}return _2=e,_2}var C2,NL;function qf(){if(NL)return C2;NL=1;var e=zve(),t=qve();function n(i,a){var s=t(i,a);return e(s)?s:void 0}return C2=n,C2}var T2,_L;function kN(){if(_L)return T2;_L=1;var e=qf(),t=e(Object,"create");return T2=t,T2}var A2,CL;function Uve(){if(CL)return A2;CL=1;var e=kN();function t(){this.__data__=e?e(null):{},this.size=0}return A2=t,A2}var E2,TL;function Vve(){if(TL)return E2;TL=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return E2=e,E2}var k2,AL;function Hve(){if(AL)return k2;AL=1;var e=kN(),t="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function a(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return i.call(o,s)?o[s]:void 0}return k2=a,k2}var P2,EL;function Gve(){if(EL)return P2;EL=1;var e=kN(),t=Object.prototype,n=t.hasOwnProperty;function i(a){var s=this.__data__;return e?s[a]!==void 0:n.call(s,a)}return P2=i,P2}var O2,kL;function Wve(){if(kL)return O2;kL=1;var e=kN(),t="__lodash_hash_undefined__";function n(i,a){var s=this.__data__;return this.size+=this.has(i)?0:1,s[i]=e&&a===void 0?t:a,this}return O2=n,O2}var D2,PL;function Kve(){if(PL)return D2;PL=1;var e=Uve(),t=Vve(),n=Hve(),i=Gve(),a=Wve();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,D2=s,D2}var M2,OL;function Yve(){if(OL)return M2;OL=1;function e(){this.__data__=[],this.size=0}return M2=e,M2}var I2,DL;function cM(){if(DL)return I2;DL=1;function e(t,n){return t===n||t!==t&&n!==n}return I2=e,I2}var R2,ML;function PN(){if(ML)return R2;ML=1;var e=cM();function t(n,i){for(var a=n.length;a--;)if(e(n[a][0],i))return a;return-1}return R2=t,R2}var L2,IL;function Qve(){if(IL)return L2;IL=1;var e=PN(),t=Array.prototype,n=t.splice;function i(a){var s=this.__data__,o=e(s,a);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return L2=i,L2}var F2,RL;function Xve(){if(RL)return F2;RL=1;var e=PN();function t(n){var i=this.__data__,a=e(i,n);return a<0?void 0:i[a][1]}return F2=t,F2}var $2,LL;function Jve(){if(LL)return $2;LL=1;var e=PN();function t(n){return e(this.__data__,n)>-1}return $2=t,$2}var B2,FL;function Zve(){if(FL)return B2;FL=1;var e=PN();function t(n,i){var a=this.__data__,s=e(a,n);return s<0?(++this.size,a.push([n,i])):a[s][1]=i,this}return B2=t,B2}var z2,$L;function ON(){if($L)return z2;$L=1;var e=Yve(),t=Qve(),n=Xve(),i=Jve(),a=Zve();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,z2=s,z2}var q2,BL;function uM(){if(BL)return q2;BL=1;var e=qf(),t=ql(),n=e(t,"Map");return q2=n,q2}var U2,zL;function ebe(){if(zL)return U2;zL=1;var e=Kve(),t=ON(),n=uM();function i(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return U2=i,U2}var V2,qL;function tbe(){if(qL)return V2;qL=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return V2=e,V2}var H2,UL;function DN(){if(UL)return H2;UL=1;var e=tbe();function t(n,i){var a=n.__data__;return e(i)?a[typeof i=="string"?"string":"hash"]:a.map}return H2=t,H2}var G2,VL;function nbe(){if(VL)return G2;VL=1;var e=DN();function t(n){var i=e(this,n).delete(n);return this.size-=i?1:0,i}return G2=t,G2}var W2,HL;function rbe(){if(HL)return W2;HL=1;var e=DN();function t(n){return e(this,n).get(n)}return W2=t,W2}var K2,GL;function ibe(){if(GL)return K2;GL=1;var e=DN();function t(n){return e(this,n).has(n)}return K2=t,K2}var Y2,WL;function abe(){if(WL)return Y2;WL=1;var e=DN();function t(n,i){var a=e(this,n),s=a.size;return a.set(n,i),this.size+=a.size==s?0:1,this}return Y2=t,Y2}var Q2,KL;function dM(){if(KL)return Q2;KL=1;var e=ebe(),t=nbe(),n=rbe(),i=ibe(),a=abe();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Q2=s,Q2}var X2,YL;function F7(){if(YL)return X2;YL=1;var e=dM(),t="Expected a function";function n(i,a){if(typeof i!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var s=function(){var o=arguments,l=a?a.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var u=i.apply(this,o);return s.cache=c.set(l,u)||c,u};return s.cache=new(n.Cache||e),s}return n.Cache=e,X2=n,X2}var J2,QL;function sbe(){if(QL)return J2;QL=1;var e=F7(),t=500;function n(i){var a=e(i,function(o){return s.size===t&&s.clear(),o}),s=a.cache;return a}return J2=n,J2}var Z2,XL;function obe(){if(XL)return Z2;XL=1;var e=sbe(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=e(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(t,function(o,l,c,u){s.push(c?u.replace(n,"$1"):l||o)}),s});return Z2=i,Z2}var eT,JL;function hM(){if(JL)return eT;JL=1;function e(t,n){for(var i=-1,a=t==null?0:t.length,s=Array(a);++i<a;)s[i]=n(t[i],i,t);return s}return eT=e,eT}var tT,ZL;function lbe(){if(ZL)return tT;ZL=1;var e=Zb(),t=hM(),n=hs(),i=Jg(),a=e?e.prototype:void 0,s=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(i(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return tT=o,tT}var nT,e6;function $7(){if(e6)return nT;e6=1;var e=lbe();function t(n){return n==null?"":e(n)}return nT=t,nT}var rT,t6;function B7(){if(t6)return rT;t6=1;var e=hs(),t=oM(),n=obe(),i=$7();function a(s,o){return e(s)?s:t(s,o)?[s]:n(i(s))}return rT=a,rT}var iT,n6;function MN(){if(n6)return iT;n6=1;var e=Jg();function t(n){if(typeof n=="string"||e(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return iT=t,iT}var aT,r6;function fM(){if(r6)return aT;r6=1;var e=B7(),t=MN();function n(i,a){a=e(a,i);for(var s=0,o=a.length;i!=null&&s<o;)i=i[t(a[s++])];return s&&s==o?i:void 0}return aT=n,aT}var sT,i6;function z7(){if(i6)return sT;i6=1;var e=fM();function t(n,i,a){var s=n==null?void 0:e(n,i);return s===void 0?a:s}return sT=t,sT}var cbe=z7();const Ms=qn(cbe);var oT,a6;function ube(){if(a6)return oT;a6=1;function e(t){return t==null}return oT=e,oT}var dbe=ube();const cn=qn(dbe);var lT,s6;function hbe(){if(s6)return lT;s6=1;var e=Xc(),t=hs(),n=Jc(),i="[object String]";function a(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==i}return lT=a,lT}var fbe=hbe();const Df=qn(fbe);var pbe=lM();const tn=qn(pbe);var mbe=_d();const Zg=qn(mbe);var cT={exports:{}},lr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o6;function gbe(){if(o6)return lr;o6=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function j(w){if(typeof w=="object"&&w!==null){var _=w.$$typeof;switch(_){case e:switch(w=w.type,w){case n:case a:case i:case u:case f:return w;default:switch(w=w&&w.$$typeof,w){case l:case o:case c:case g:case p:case s:return w;default:return _}}case t:return _}}}return lr.ContextConsumer=o,lr.ContextProvider=s,lr.Element=e,lr.ForwardRef=c,lr.Fragment=n,lr.Lazy=g,lr.Memo=p,lr.Portal=t,lr.Profiler=a,lr.StrictMode=i,lr.Suspense=u,lr.SuspenseList=f,lr.isAsyncMode=function(){return!1},lr.isConcurrentMode=function(){return!1},lr.isContextConsumer=function(w){return j(w)===o},lr.isContextProvider=function(w){return j(w)===s},lr.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},lr.isForwardRef=function(w){return j(w)===c},lr.isFragment=function(w){return j(w)===n},lr.isLazy=function(w){return j(w)===g},lr.isMemo=function(w){return j(w)===p},lr.isPortal=function(w){return j(w)===t},lr.isProfiler=function(w){return j(w)===a},lr.isStrictMode=function(w){return j(w)===i},lr.isSuspense=function(w){return j(w)===u},lr.isSuspenseList=function(w){return j(w)===f},lr.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===a||w===i||w===u||w===f||w===x||typeof w=="object"&&w!==null&&(w.$$typeof===g||w.$$typeof===p||w.$$typeof===s||w.$$typeof===o||w.$$typeof===c||w.$$typeof===v||w.getModuleId!==void 0)},lr.typeOf=j,lr}var l6;function ybe(){return l6||(l6=1,cT.exports=gbe()),cT.exports}var xbe=ybe(),uT,c6;function q7(){if(c6)return uT;c6=1;var e=Xc(),t=Jc(),n="[object Number]";function i(a){return typeof a=="number"||t(a)&&e(a)==n}return uT=i,uT}var dT,u6;function vbe(){if(u6)return dT;u6=1;var e=q7();function t(n){return e(n)&&n!=+n}return dT=t,dT}var bbe=vbe();const ey=qn(bbe);var jbe=q7();const wbe=qn(jbe);var Ia=function(t){return t===0?0:t>0?1:-1},rf=function(t){return Df(t)&&t.indexOf("%")===t.length-1},jt=function(t){return wbe(t)&&!ey(t)},Sbe=function(t){return cn(t)},Ci=function(t){return jt(t)||Df(t)},Nbe=0,Uf=function(t){var n=++Nbe;return"".concat(t||"").concat(n)},Ra=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!jt(t)&&!Df(t))return i;var s;if(rf(t)){var o=t.indexOf("%");s=n*parseFloat(t.slice(0,o))/100}else s=+t;return ey(s)&&(s=i),a&&s>n&&(s=n),s},ed=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},_be=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,i={},a=0;a<n;a++)if(!i[t[a]])i[t[a]]=!0;else return!0;return!1},_i=function(t,n){return jt(t)&&jt(n)?function(i){return t+i*(n-t)}:function(){return n}};function Qw(e,t,n){return!e||!e.length?null:e.find(function(i){return i&&(typeof t=="function"?t(i):Ms(i,t))===n})}var Cbe=function(t,n){return jt(t)&&jt(n)?t-n:Df(t)&&Df(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function Wm(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var i in t)if({}.hasOwnProperty.call(t,i)&&!{}.hasOwnProperty.call(e,i))return!1;return!0}function DP(e){"@babel/helpers - typeof";return DP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DP(e)}var Tbe=["viewBox","children"],Abe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],d6=["points","pathLength"],hT={svg:Tbe,polygon:d6,polyline:d6},pM=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Xw=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(b.isValidElement(t)&&(i=t.props),!Zg(i))return null;var a={};return Object.keys(i).forEach(function(s){pM.includes(s)&&(a[s]=n||function(o){return i[s](i,o)})}),a},Ebe=function(t,n,i){return function(a){return t(n,i,a),null}},Mf=function(t,n,i){if(!Zg(t)||DP(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(s){var o=t[s];pM.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=Ebe(o,n,i))}),a},kbe=["children"],Pbe=["children"];function h6(e,t){if(e==null)return{};var n=Obe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Obe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function MP(e){"@babel/helpers - typeof";return MP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MP(e)}var f6={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Mc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},p6=null,fT=null,mM=function e(t){if(t===p6&&Array.isArray(fT))return fT;var n=[];return b.Children.forEach(t,function(i){cn(i)||(xbe.isFragment(i)?n=n.concat(e(i.props.children)):n.push(i))}),fT=n,p6=t,n};function Is(e,t){var n=[],i=[];return Array.isArray(t)?i=t.map(function(a){return Mc(a)}):i=[Mc(t)],mM(e).forEach(function(a){var s=Ms(a,"type.displayName")||Ms(a,"type.name");i.indexOf(s)!==-1&&n.push(a)}),n}function Ts(e,t){var n=Is(e,t);return n&&n[0]}var m6=function(t){if(!t||!t.props)return!1;var n=t.props,i=n.width,a=n.height;return!(!jt(i)||i<=0||!jt(a)||a<=0)},Dbe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Mbe=function(t){return t&&t.type&&Df(t.type)&&Dbe.indexOf(t.type)>=0},U7=function(t){return t&&MP(t)==="object"&&"clipDot"in t},Ibe=function(t,n,i,a){var s,o=(s=hT==null?void 0:hT[a])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!tn(t)&&(a&&o.includes(n)||Abe.includes(n))||i&&pM.includes(n)},$t=function(t,n,i){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(b.isValidElement(t)&&(a=t.props),!Zg(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;Ibe((l=a)===null||l===void 0?void 0:l[o],o,n,i)&&(s[o]=a[o])}),s},IP=function e(t,n){if(t===n)return!0;var i=b.Children.count(t);if(i!==b.Children.count(n))return!1;if(i===0)return!0;if(i===1)return g6(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<i;a++){var s=t[a],o=n[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!g6(s,o))return!1}return!0},g6=function(t,n){if(cn(t)&&cn(n))return!0;if(!cn(t)&&!cn(n)){var i=t.props||{},a=i.children,s=h6(i,kbe),o=n.props||{},l=o.children,c=h6(o,Pbe);return a&&l?Wm(s,c)&&IP(a,l):!a&&!l?Wm(s,c):!1}return!1},y6=function(t,n){var i=[],a={};return mM(t).forEach(function(s,o){if(Mbe(s))i.push(s);else if(s){var l=Mc(s.type),c=n[l]||{},u=c.handler,f=c.once;if(u&&(!f||!a[l])){var p=u(s,l,o);i.push(p),a[l]=!0}}}),i},Rbe=function(t){var n=t&&t.type;return n&&f6[n]?f6[n]:null},Lbe=function(t,n){return mM(n).indexOf(t)},Fbe=["children","width","height","viewBox","className","style","title","desc"];function RP(){return RP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},RP.apply(this,arguments)}function $be(e,t){if(e==null)return{};var n=Bbe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Bbe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function LP(e){var t=e.children,n=e.width,i=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=$be(e,Fbe),f=a||{width:n,height:i,x:0,y:0},p=dn("recharts-surface",s);return Se.createElement("svg",RP({},$t(u,!0,"svg"),{className:p,width:n,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Se.createElement("title",null,l),Se.createElement("desc",null,c),t)}var zbe=["children","className"];function FP(){return FP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},FP.apply(this,arguments)}function qbe(e,t){if(e==null)return{};var n=Ube(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Ube(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}var Dn=Se.forwardRef(function(e,t){var n=e.children,i=e.className,a=qbe(e,zbe),s=dn("recharts-layer",i);return Se.createElement("g",FP({className:s},$t(a,!0),{ref:t}),n)}),Fo=function(t,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s]},pT,x6;function Vbe(){if(x6)return pT;x6=1;function e(t,n,i){var a=-1,s=t.length;n<0&&(n=-n>s?0:s+n),i=i>s?s:i,i<0&&(i+=s),s=n>i?0:i-n>>>0,n>>>=0;for(var o=Array(s);++a<s;)o[a]=t[a+n];return o}return pT=e,pT}var mT,v6;function Hbe(){if(v6)return mT;v6=1;var e=Vbe();function t(n,i,a){var s=n.length;return a=a===void 0?s:a,!i&&a>=s?n:e(n,i,a)}return mT=t,mT}var gT,b6;function V7(){if(b6)return gT;b6=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=t+n+i,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+a+s+"]");function c(u){return l.test(u)}return gT=c,gT}var yT,j6;function Gbe(){if(j6)return yT;j6=1;function e(t){return t.split("")}return yT=e,yT}var xT,w6;function Wbe(){if(w6)return xT;w6=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=t+n+i,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",f="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",v=u+"?",j="["+s+"]?",w="(?:"+x+"(?:"+[f,p,g].join("|")+")"+j+v+")*",_=j+v+w,T="(?:"+[f+l+"?",l,p,g,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+T+_,"g");function O(A){return A.match(C)||[]}return xT=O,xT}var vT,S6;function Kbe(){if(S6)return vT;S6=1;var e=Gbe(),t=V7(),n=Wbe();function i(a){return t(a)?n(a):e(a)}return vT=i,vT}var bT,N6;function Ybe(){if(N6)return bT;N6=1;var e=Hbe(),t=V7(),n=Kbe(),i=$7();function a(s){return function(o){o=i(o);var l=t(o)?n(o):void 0,c=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return c[s]()+u}}return bT=a,bT}var jT,_6;function Qbe(){if(_6)return jT;_6=1;var e=Ybe(),t=e("toUpperCase");return jT=t,jT}var Xbe=Qbe();const IN=qn(Xbe);function Ir(e){return function(){return e}}const H7=Math.cos,Jw=Math.sin,Vo=Math.sqrt,Zw=Math.PI,RN=2*Zw,$P=Math.PI,BP=2*$P,Yh=1e-6,Jbe=BP-Yh;function G7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Zbe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return G7;const n=10**t;return function(i){this._+=i[0];for(let a=1,s=i.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}class e0e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?G7:Zbe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,a){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(t,n,i,a,s,o){this._append`C${+t},${+n},${+i},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,i,a,s){if(t=+t,n=+n,i=+i,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=i-t,u=a-n,f=o-t,p=l-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Yh)if(!(Math.abs(p*c-u*f)>Yh)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let x=i-o,v=a-l,j=c*c+u*u,w=x*x+v*v,_=Math.sqrt(j),T=Math.sqrt(g),C=s*Math.tan(($P-Math.acos((j+g-w)/(2*_*T)))/2),O=C/T,A=C/_;Math.abs(O-1)>Yh&&this._append`L${t+O*f},${n+O*p}`,this._append`A${s},${s},0,0,${+(p*x>f*v)},${this._x1=t+A*c},${this._y1=n+A*u}`}}arc(t,n,i,a,s,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(a),c=i*Math.sin(a),u=t+l,f=n+c,p=1^o,g=o?a-s:s-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Yh||Math.abs(this._y1-f)>Yh)&&this._append`L${u},${f}`,i&&(g<0&&(g=g%BP+BP),g>Jbe?this._append`A${i},${i},0,1,${p},${t-l},${n-c}A${i},${i},0,1,${p},${this._x1=u},${this._y1=f}`:g>Yh&&this._append`A${i},${i},0,${+(g>=$P)},${p},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}}function gM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new e0e(t)}function yM(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function W7(e){this._context=e}W7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function LN(e){return new W7(e)}function K7(e){return e[0]}function Y7(e){return e[1]}function Q7(e,t){var n=Ir(!0),i=null,a=LN,s=null,o=gM(l);e=typeof e=="function"?e:e===void 0?K7:Ir(e),t=typeof t=="function"?t:t===void 0?Y7:Ir(t);function l(c){var u,f=(c=yM(c)).length,p,g=!1,x;for(i==null&&(s=a(x=o())),u=0;u<=f;++u)!(u<f&&n(p=c[u],u,c))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+e(p,u,c),+t(p,u,c));if(x)return s=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ir(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ir(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ir(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,i!=null&&(s=a(i)),l):a},l.context=function(c){return arguments.length?(c==null?i=s=null:s=a(i=c),l):i},l}function Vj(e,t,n){var i=null,a=Ir(!0),s=null,o=LN,l=null,c=gM(u);e=typeof e=="function"?e:e===void 0?K7:Ir(+e),t=typeof t=="function"?t:Ir(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Y7:Ir(+n);function u(p){var g,x,v,j=(p=yM(p)).length,w,_=!1,T,C=new Array(j),O=new Array(j);for(s==null&&(l=o(T=c())),g=0;g<=j;++g){if(!(g<j&&a(w=p[g],g,p))===_)if(_=!_)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=g-1;v>=x;--v)l.point(C[v],O[v]);l.lineEnd(),l.areaEnd()}_&&(C[g]=+e(w,g,p),O[g]=+t(w,g,p),l.point(i?+i(w,g,p):C[g],n?+n(w,g,p):O[g]))}if(T)return l=null,T+""||null}function f(){return Q7().defined(a).curve(o).context(s)}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:Ir(+p),i=null,u):e},u.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Ir(+p),u):e},u.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:Ir(+p),u):i},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:Ir(+p),n=null,u):t},u.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Ir(+p),u):t},u.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Ir(+p),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(i).y(t)},u.defined=function(p){return arguments.length?(a=typeof p=="function"?p:Ir(!!p),u):a},u.curve=function(p){return arguments.length?(o=p,s!=null&&(l=o(s)),u):o},u.context=function(p){return arguments.length?(p==null?s=l=null:l=o(s=p),u):s},u}class X7{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function t0e(e){return new X7(e,!0)}function n0e(e){return new X7(e,!1)}const xM={draw(e,t){const n=Vo(t/Zw);e.moveTo(n,0),e.arc(0,0,n,0,RN)}},r0e={draw(e,t){const n=Vo(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},J7=Vo(1/3),i0e=J7*2,a0e={draw(e,t){const n=Vo(t/i0e),i=n*J7;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},s0e={draw(e,t){const n=Vo(t),i=-n/2;e.rect(i,i,n,n)}},o0e=.8908130915292852,Z7=Jw(Zw/10)/Jw(7*Zw/10),l0e=Jw(RN/10)*Z7,c0e=-H7(RN/10)*Z7,u0e={draw(e,t){const n=Vo(t*o0e),i=l0e*n,a=c0e*n;e.moveTo(0,-n),e.lineTo(i,a);for(let s=1;s<5;++s){const o=RN*s/5,l=H7(o),c=Jw(o);e.lineTo(c*n,-l*n),e.lineTo(l*i-c*a,c*i+l*a)}e.closePath()}},wT=Vo(3),d0e={draw(e,t){const n=-Vo(t/(wT*3));e.moveTo(0,n*2),e.lineTo(-wT*n,-n),e.lineTo(wT*n,-n),e.closePath()}},Ys=-.5,Qs=Vo(3)/2,zP=1/Vo(12),h0e=(zP/2+1)*3,f0e={draw(e,t){const n=Vo(t/h0e),i=n/2,a=n*zP,s=i,o=n*zP+n,l=-s,c=o;e.moveTo(i,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(Ys*i-Qs*a,Qs*i+Ys*a),e.lineTo(Ys*s-Qs*o,Qs*s+Ys*o),e.lineTo(Ys*l-Qs*c,Qs*l+Ys*c),e.lineTo(Ys*i+Qs*a,Ys*a-Qs*i),e.lineTo(Ys*s+Qs*o,Ys*o-Qs*s),e.lineTo(Ys*l+Qs*c,Ys*c-Qs*l),e.closePath()}};function p0e(e,t){let n=null,i=gM(a);e=typeof e=="function"?e:Ir(e||xM),t=typeof t=="function"?t:Ir(t===void 0?64:+t);function a(){let s;if(n||(n=s=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Ir(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Ir(+s),a):t},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function eS(){}function tS(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function eV(e){this._context=e}eV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function m0e(e){return new eV(e)}function tV(e){this._context=e}tV.prototype={areaStart:eS,areaEnd:eS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:tS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function g0e(e){return new tV(e)}function nV(e){this._context=e}nV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:tS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y0e(e){return new nV(e)}function rV(e){this._context=e}rV.prototype={areaStart:eS,areaEnd:eS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function x0e(e){return new rV(e)}function C6(e){return e<0?-1:1}function T6(e,t,n){var i=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(i||a<0&&-0),o=(n-e._y1)/(a||i<0&&-0),l=(s*a+o*i)/(i+a);return(C6(s)+C6(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function A6(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ST(e,t,n){var i=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-i)/3;e._context.bezierCurveTo(i+l,a+l*t,s-l,o-l*n,s,o)}function nS(e){this._context=e}nS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ST(this,this._t0,A6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ST(this,A6(this,n=T6(this,e,t)),n);break;default:ST(this,this._t0,n=T6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function iV(e){this._context=new aV(e)}(iV.prototype=Object.create(nS.prototype)).point=function(e,t){nS.prototype.point.call(this,t,e)};function aV(e){this._context=e}aV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,a,s){this._context.bezierCurveTo(t,e,i,n,s,a)}};function v0e(e){return new nS(e)}function b0e(e){return new iV(e)}function sV(e){this._context=e}sV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=E6(e),a=E6(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],a[0][s],i[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function E6(e){var t,n=e.length-1,i,a=new Array(n),s=new Array(n),o=new Array(n);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=a[t]/s[t-1],s[t]-=i,o[t]-=i*o[t-1];for(a[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function j0e(e){return new sV(e)}function FN(e,t){this._context=e,this._t=t}FN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function w0e(e){return new FN(e,.5)}function S0e(e){return new FN(e,0)}function N0e(e){return new FN(e,1)}function gg(e,t){if((o=e.length)>1)for(var n=1,i,a,s=e[t[0]],o,l=s.length;n<o;++n)for(a=s,s=e[t[n]],i=0;i<l;++i)s[i][1]+=s[i][0]=isNaN(a[i][1])?a[i][0]:a[i][1]}function qP(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function _0e(e,t){return e[t]}function C0e(e){const t=[];return t.key=e,t}function T0e(){var e=Ir([]),t=qP,n=gg,i=_0e;function a(s){var o=Array.from(e.apply(this,arguments),C0e),l,c=o.length,u=-1,f;for(const p of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+i(p,o[l].key,u,s)]).data=p;for(l=0,f=yM(t(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Ir(Array.from(s)),a):e},a.value=function(s){return arguments.length?(i=typeof s=="function"?s:Ir(+s),a):i},a.order=function(s){return arguments.length?(t=s==null?qP:typeof s=="function"?s:Ir(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(n=s??gg,a):n},a}function A0e(e,t){if((i=e.length)>0){for(var n,i,a=0,s=e[0].length,o;a<s;++a){for(o=n=0;n<i;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<i;++n)e[n][a][1]/=o}gg(e,t)}}function E0e(e,t){if((a=e.length)>0){for(var n=0,i=e[t[0]],a,s=i.length;n<s;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;i[n][1]+=i[n][0]=-l/2}gg(e,t)}}function k0e(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var n=0,i=1,a,s,o;i<s;++i){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],p=f[i][1]||0,g=f[i-1][1]||0,x=(p-g)/2,v=0;v<l;++v){var j=e[t[v]],w=j[i][1]||0,_=j[i-1][1]||0;x+=w-_}c+=p,u+=x*p}a[i-1][1]+=a[i-1][0]=n,c&&(n-=u/c)}a[i-1][1]+=a[i-1][0]=n,gg(e,t)}}function Qv(e){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qv(e)}var P0e=["type","size","sizeType"];function UP(){return UP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},UP.apply(this,arguments)}function k6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function P6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k6(Object(n),!0).forEach(function(i){O0e(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k6(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function O0e(e,t,n){return t=D0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D0e(e){var t=M0e(e,"string");return Qv(t)=="symbol"?t:t+""}function M0e(e,t){if(Qv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Qv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I0e(e,t){if(e==null)return{};var n=R0e(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function R0e(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}var oV={symbolCircle:xM,symbolCross:r0e,symbolDiamond:a0e,symbolSquare:s0e,symbolStar:u0e,symbolTriangle:d0e,symbolWye:f0e},L0e=Math.PI/180,F0e=function(t){var n="symbol".concat(IN(t));return oV[n]||xM},$0e=function(t,n,i){if(n==="area")return t;switch(i){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*L0e;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},B0e=function(t,n){oV["symbol".concat(IN(t))]=n},vM=function(t){var n=t.type,i=n===void 0?"circle":n,a=t.size,s=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=I0e(t,P0e),u=P6(P6({},c),{},{type:i,size:s,sizeType:l}),f=function(){var w=F0e(i),_=p0e().type(w).size($0e(s,l,i));return _()},p=u.className,g=u.cx,x=u.cy,v=$t(u,!0);return g===+g&&x===+x&&s===+s?Se.createElement("path",UP({},v,{className:dn("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(x,")"),d:f()})):null};vM.registerSymbol=B0e;function yg(e){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yg(e)}function VP(){return VP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},VP.apply(this,arguments)}function O6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function z0e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O6(Object(n),!0).forEach(function(i){Xv(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O6(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function q0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U0e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,cV(i.key),i)}}function V0e(e,t,n){return t&&U0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function H0e(e,t,n){return t=rS(t),G0e(e,lV()?Reflect.construct(t,n||[],rS(e).constructor):t.apply(e,n))}function G0e(e,t){if(t&&(yg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W0e(e)}function W0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lV=function(){return!!e})()}function rS(e){return rS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rS(e)}function K0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HP(e,t)}function HP(e,t){return HP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},HP(e,t)}function Xv(e,t,n){return t=cV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cV(e){var t=Y0e(e,"string");return yg(t)=="symbol"?t:t+""}function Y0e(e,t){if(yg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(yg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Eo=32,bM=function(e){function t(){return q0e(this,t),H0e(this,t,arguments)}return K0e(t,e),V0e(t,[{key:"renderIcon",value:function(i){var a=this.props.inactiveColor,s=Eo/2,o=Eo/6,l=Eo/3,c=i.inactive?a:i.color;if(i.type==="plainline")return Se.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:s,x2:Eo,y2:s,className:"recharts-legend-icon"});if(i.type==="line")return Se.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Eo,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(i.type==="rect")return Se.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Eo/8,"h").concat(Eo,"v").concat(Eo*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Se.isValidElement(i.legendIcon)){var u=z0e({},i);return delete u.legendIcon,Se.cloneElement(i.legendIcon,u)}return Se.createElement(vM,{fill:c,cx:s,cy:s,size:Eo,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:Eo,height:Eo},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(x,v){var j=x.formatter||c,w=dn(Xv(Xv({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",x.inactive));if(x.type==="none")return null;var _=tn(x.value)?null:x.value;Fo(!tn(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=x.inactive?u:x.color;return Se.createElement("li",VP({className:w,style:p,key:"legend-item-".concat(v)},Mf(i.props,x,v)),Se.createElement(LP,{width:o,height:o,viewBox:f,style:g},i.renderIcon(x)),Se.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},j?j(_,x,v):_))})}},{key:"render",value:function(){var i=this.props,a=i.payload,s=i.layout,o=i.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Se.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(b.PureComponent);Xv(bM,"displayName","Legend");Xv(bM,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var NT,D6;function Q0e(){if(D6)return NT;D6=1;var e=ON();function t(){this.__data__=new e,this.size=0}return NT=t,NT}var _T,M6;function X0e(){if(M6)return _T;M6=1;function e(t){var n=this.__data__,i=n.delete(t);return this.size=n.size,i}return _T=e,_T}var CT,I6;function J0e(){if(I6)return CT;I6=1;function e(t){return this.__data__.get(t)}return CT=e,CT}var TT,R6;function Z0e(){if(R6)return TT;R6=1;function e(t){return this.__data__.has(t)}return TT=e,TT}var AT,L6;function e1e(){if(L6)return AT;L6=1;var e=ON(),t=uM(),n=dM(),i=200;function a(s,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<i-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return AT=a,AT}var ET,F6;function uV(){if(F6)return ET;F6=1;var e=ON(),t=Q0e(),n=X0e(),i=J0e(),a=Z0e(),s=e1e();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=i,o.prototype.has=a,o.prototype.set=s,ET=o,ET}var kT,$6;function t1e(){if($6)return kT;$6=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return kT=t,kT}var PT,B6;function n1e(){if(B6)return PT;B6=1;function e(t){return this.__data__.has(t)}return PT=e,PT}var OT,z6;function dV(){if(z6)return OT;z6=1;var e=dM(),t=t1e(),n=n1e();function i(a){var s=-1,o=a==null?0:a.length;for(this.__data__=new e;++s<o;)this.add(a[s])}return i.prototype.add=i.prototype.push=t,i.prototype.has=n,OT=i,OT}var DT,q6;function hV(){if(q6)return DT;q6=1;function e(t,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(n(t[i],i,t))return!0;return!1}return DT=e,DT}var MT,U6;function fV(){if(U6)return MT;U6=1;function e(t,n){return t.has(n)}return MT=e,MT}var IT,V6;function pV(){if(V6)return IT;V6=1;var e=dV(),t=hV(),n=fV(),i=1,a=2;function s(o,l,c,u,f,p){var g=c&i,x=o.length,v=l.length;if(x!=v&&!(g&&v>x))return!1;var j=p.get(o),w=p.get(l);if(j&&w)return j==l&&w==o;var _=-1,T=!0,C=c&a?new e:void 0;for(p.set(o,l),p.set(l,o);++_<x;){var O=o[_],A=l[_];if(u)var P=g?u(A,O,_,l,o,p):u(O,A,_,o,l,p);if(P!==void 0){if(P)continue;T=!1;break}if(C){if(!t(l,function(I,F){if(!n(C,F)&&(O===I||f(O,I,c,u,p)))return C.push(F)})){T=!1;break}}else if(!(O===A||f(O,A,c,u,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return IT=s,IT}var RT,H6;function r1e(){if(H6)return RT;H6=1;var e=ql(),t=e.Uint8Array;return RT=t,RT}var LT,G6;function i1e(){if(G6)return LT;G6=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(a,s){i[++n]=[s,a]}),i}return LT=e,LT}var FT,W6;function jM(){if(W6)return FT;W6=1;function e(t){var n=-1,i=Array(t.size);return t.forEach(function(a){i[++n]=a}),i}return FT=e,FT}var $T,K6;function a1e(){if(K6)return $T;K6=1;var e=Zb(),t=r1e(),n=cM(),i=pV(),a=i1e(),s=jM(),o=1,l=2,c="[object Boolean]",u="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",x="[object RegExp]",v="[object Set]",j="[object String]",w="[object Symbol]",_="[object ArrayBuffer]",T="[object DataView]",C=e?e.prototype:void 0,O=C?C.valueOf:void 0;function A(P,I,F,B,$,L,V){switch(F){case T:if(P.byteLength!=I.byteLength||P.byteOffset!=I.byteOffset)return!1;P=P.buffer,I=I.buffer;case _:return!(P.byteLength!=I.byteLength||!L(new t(P),new t(I)));case c:case u:case g:return n(+P,+I);case f:return P.name==I.name&&P.message==I.message;case x:case j:return P==I+"";case p:var H=a;case v:var te=B&o;if(H||(H=s),P.size!=I.size&&!te)return!1;var X=V.get(P);if(X)return X==I;B|=l,V.set(P,I);var q=i(H(P),H(I),B,$,L,V);return V.delete(P),q;case w:if(O)return O.call(P)==O.call(I)}return!1}return $T=A,$T}var BT,Y6;function mV(){if(Y6)return BT;Y6=1;function e(t,n){for(var i=-1,a=n.length,s=t.length;++i<a;)t[s+i]=n[i];return t}return BT=e,BT}var zT,Q6;function s1e(){if(Q6)return zT;Q6=1;var e=mV(),t=hs();function n(i,a,s){var o=a(i);return t(i)?o:e(o,s(i))}return zT=n,zT}var qT,X6;function o1e(){if(X6)return qT;X6=1;function e(t,n){for(var i=-1,a=t==null?0:t.length,s=0,o=[];++i<a;){var l=t[i];n(l,i,t)&&(o[s++]=l)}return o}return qT=e,qT}var UT,J6;function l1e(){if(J6)return UT;J6=1;function e(){return[]}return UT=e,UT}var VT,Z6;function c1e(){if(Z6)return VT;Z6=1;var e=o1e(),t=l1e(),n=Object.prototype,i=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(o){return o==null?[]:(o=Object(o),e(a(o),function(l){return i.call(o,l)}))}:t;return VT=s,VT}var HT,eF;function u1e(){if(eF)return HT;eF=1;function e(t,n){for(var i=-1,a=Array(t);++i<t;)a[i]=n(i);return a}return HT=e,HT}var GT,tF;function d1e(){if(tF)return GT;tF=1;var e=Xc(),t=Jc(),n="[object Arguments]";function i(a){return t(a)&&e(a)==n}return GT=i,GT}var WT,nF;function wM(){if(nF)return WT;nF=1;var e=d1e(),t=Jc(),n=Object.prototype,i=n.hasOwnProperty,a=n.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(o){return t(o)&&i.call(o,"callee")&&!a.call(o,"callee")};return WT=s,WT}var Cv={exports:{}},KT,rF;function h1e(){if(rF)return KT;rF=1;function e(){return!1}return KT=e,KT}Cv.exports;var iF;function gV(){return iF||(iF=1,function(e,t){var n=ql(),i=h1e(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||i;e.exports=u}(Cv,Cv.exports)),Cv.exports}var YT,aF;function SM(){if(aF)return YT;aF=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(i,a){var s=typeof i;return a=a??e,!!a&&(s=="number"||s!="symbol"&&t.test(i))&&i>-1&&i%1==0&&i<a}return YT=n,YT}var QT,sF;function NM(){if(sF)return QT;sF=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return QT=t,QT}var XT,oF;function f1e(){if(oF)return XT;oF=1;var e=Xc(),t=NM(),n=Jc(),i="[object Arguments]",a="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",x="[object Set]",v="[object String]",j="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",T="[object Float32Array]",C="[object Float64Array]",O="[object Int8Array]",A="[object Int16Array]",P="[object Int32Array]",I="[object Uint8Array]",F="[object Uint8ClampedArray]",B="[object Uint16Array]",$="[object Uint32Array]",L={};L[T]=L[C]=L[O]=L[A]=L[P]=L[I]=L[F]=L[B]=L[$]=!0,L[i]=L[a]=L[w]=L[s]=L[_]=L[o]=L[l]=L[c]=L[u]=L[f]=L[p]=L[g]=L[x]=L[v]=L[j]=!1;function V(H){return n(H)&&t(H.length)&&!!L[e(H)]}return XT=V,XT}var JT,lF;function yV(){if(lF)return JT;lF=1;function e(t){return function(n){return t(n)}}return JT=e,JT}var Tv={exports:{}};Tv.exports;var cF;function p1e(){return cF||(cF=1,function(e,t){var n=R7(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l}(Tv,Tv.exports)),Tv.exports}var ZT,uF;function xV(){if(uF)return ZT;uF=1;var e=f1e(),t=yV(),n=p1e(),i=n&&n.isTypedArray,a=i?t(i):e;return ZT=a,ZT}var eA,dF;function m1e(){if(dF)return eA;dF=1;var e=u1e(),t=wM(),n=hs(),i=gV(),a=SM(),s=xV(),o=Object.prototype,l=o.hasOwnProperty;function c(u,f){var p=n(u),g=!p&&t(u),x=!p&&!g&&i(u),v=!p&&!g&&!x&&s(u),j=p||g||x||v,w=j?e(u.length,String):[],_=w.length;for(var T in u)(f||l.call(u,T))&&!(j&&(T=="length"||x&&(T=="offset"||T=="parent")||v&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||a(T,_)))&&w.push(T);return w}return eA=c,eA}var tA,hF;function g1e(){if(hF)return tA;hF=1;var e=Object.prototype;function t(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||e;return n===a}return tA=t,tA}var nA,fF;function vV(){if(fF)return nA;fF=1;function e(t,n){return function(i){return t(n(i))}}return nA=e,nA}var rA,pF;function y1e(){if(pF)return rA;pF=1;var e=vV(),t=e(Object.keys,Object);return rA=t,rA}var iA,mF;function x1e(){if(mF)return iA;mF=1;var e=g1e(),t=y1e(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))i.call(s,l)&&l!="constructor"&&o.push(l);return o}return iA=a,iA}var aA,gF;function e0(){if(gF)return aA;gF=1;var e=lM(),t=NM();function n(i){return i!=null&&t(i.length)&&!e(i)}return aA=n,aA}var sA,yF;function $N(){if(yF)return sA;yF=1;var e=m1e(),t=x1e(),n=e0();function i(a){return n(a)?e(a):t(a)}return sA=i,sA}var oA,xF;function v1e(){if(xF)return oA;xF=1;var e=s1e(),t=c1e(),n=$N();function i(a){return e(a,n,t)}return oA=i,oA}var lA,vF;function b1e(){if(vF)return lA;vF=1;var e=v1e(),t=1,n=Object.prototype,i=n.hasOwnProperty;function a(s,o,l,c,u,f){var p=l&t,g=e(s),x=g.length,v=e(o),j=v.length;if(x!=j&&!p)return!1;for(var w=x;w--;){var _=g[w];if(!(p?_ in o:i.call(o,_)))return!1}var T=f.get(s),C=f.get(o);if(T&&C)return T==o&&C==s;var O=!0;f.set(s,o),f.set(o,s);for(var A=p;++w<x;){_=g[w];var P=s[_],I=o[_];if(c)var F=p?c(I,P,_,o,s,f):c(P,I,_,s,o,f);if(!(F===void 0?P===I||u(P,I,l,c,f):F)){O=!1;break}A||(A=_=="constructor")}if(O&&!A){var B=s.constructor,$=o.constructor;B!=$&&"constructor"in s&&"constructor"in o&&!(typeof B=="function"&&B instanceof B&&typeof $=="function"&&$ instanceof $)&&(O=!1)}return f.delete(s),f.delete(o),O}return lA=a,lA}var cA,bF;function j1e(){if(bF)return cA;bF=1;var e=qf(),t=ql(),n=e(t,"DataView");return cA=n,cA}var uA,jF;function w1e(){if(jF)return uA;jF=1;var e=qf(),t=ql(),n=e(t,"Promise");return uA=n,uA}var dA,wF;function bV(){if(wF)return dA;wF=1;var e=qf(),t=ql(),n=e(t,"Set");return dA=n,dA}var hA,SF;function S1e(){if(SF)return hA;SF=1;var e=qf(),t=ql(),n=e(t,"WeakMap");return hA=n,hA}var fA,NF;function N1e(){if(NF)return fA;NF=1;var e=j1e(),t=uM(),n=w1e(),i=bV(),a=S1e(),s=Xc(),o=L7(),l="[object Map]",c="[object Object]",u="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",x=o(e),v=o(t),j=o(n),w=o(i),_=o(a),T=s;return(e&&T(new e(new ArrayBuffer(1)))!=g||t&&T(new t)!=l||n&&T(n.resolve())!=u||i&&T(new i)!=f||a&&T(new a)!=p)&&(T=function(C){var O=s(C),A=O==c?C.constructor:void 0,P=A?o(A):"";if(P)switch(P){case x:return g;case v:return l;case j:return u;case w:return f;case _:return p}return O}),fA=T,fA}var pA,_F;function _1e(){if(_F)return pA;_F=1;var e=uV(),t=pV(),n=a1e(),i=b1e(),a=N1e(),s=hs(),o=gV(),l=xV(),c=1,u="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function v(j,w,_,T,C,O){var A=s(j),P=s(w),I=A?f:a(j),F=P?f:a(w);I=I==u?p:I,F=F==u?p:F;var B=I==p,$=F==p,L=I==F;if(L&&o(j)){if(!o(w))return!1;A=!0,B=!1}if(L&&!B)return O||(O=new e),A||l(j)?t(j,w,_,T,C,O):n(j,w,I,_,T,C,O);if(!(_&c)){var V=B&&x.call(j,"__wrapped__"),H=$&&x.call(w,"__wrapped__");if(V||H){var te=V?j.value():j,X=H?w.value():w;return O||(O=new e),C(te,X,_,T,O)}}return L?(O||(O=new e),i(j,w,_,T,C,O)):!1}return pA=v,pA}var mA,CF;function _M(){if(CF)return mA;CF=1;var e=_1e(),t=Jc();function n(i,a,s,o,l){return i===a?!0:i==null||a==null||!t(i)&&!t(a)?i!==i&&a!==a:e(i,a,s,o,n,l)}return mA=n,mA}var gA,TF;function C1e(){if(TF)return gA;TF=1;var e=uV(),t=_M(),n=1,i=2;function a(s,o,l,c){var u=l.length,f=u,p=!c;if(s==null)return!f;for(s=Object(s);u--;){var g=l[u];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++u<f;){g=l[u];var x=g[0],v=s[x],j=g[1];if(p&&g[2]){if(v===void 0&&!(x in s))return!1}else{var w=new e;if(c)var _=c(v,j,x,s,o,w);if(!(_===void 0?t(j,v,n|i,c,w):_))return!1}}return!0}return gA=a,gA}var yA,AF;function jV(){if(AF)return yA;AF=1;var e=_d();function t(n){return n===n&&!e(n)}return yA=t,yA}var xA,EF;function T1e(){if(EF)return xA;EF=1;var e=jV(),t=$N();function n(i){for(var a=t(i),s=a.length;s--;){var o=a[s],l=i[o];a[s]=[o,l,e(l)]}return a}return xA=n,xA}var vA,kF;function wV(){if(kF)return vA;kF=1;function e(t,n){return function(i){return i==null?!1:i[t]===n&&(n!==void 0||t in Object(i))}}return vA=e,vA}var bA,PF;function A1e(){if(PF)return bA;PF=1;var e=C1e(),t=T1e(),n=wV();function i(a){var s=t(a);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===a||e(o,a,s)}}return bA=i,bA}var jA,OF;function E1e(){if(OF)return jA;OF=1;function e(t,n){return t!=null&&n in Object(t)}return jA=e,jA}var wA,DF;function k1e(){if(DF)return wA;DF=1;var e=B7(),t=wM(),n=hs(),i=SM(),a=NM(),s=MN();function o(l,c,u){c=e(c,l);for(var f=-1,p=c.length,g=!1;++f<p;){var x=s(c[f]);if(!(g=l!=null&&u(l,x)))break;l=l[x]}return g||++f!=p?g:(p=l==null?0:l.length,!!p&&a(p)&&i(x,p)&&(n(l)||t(l)))}return wA=o,wA}var SA,MF;function P1e(){if(MF)return SA;MF=1;var e=E1e(),t=k1e();function n(i,a){return i!=null&&t(i,a,e)}return SA=n,SA}var NA,IF;function O1e(){if(IF)return NA;IF=1;var e=_M(),t=z7(),n=P1e(),i=oM(),a=jV(),s=wV(),o=MN(),l=1,c=2;function u(f,p){return i(f)&&a(p)?s(o(f),p):function(g){var x=t(g,f);return x===void 0&&x===p?n(g,f):e(p,x,l|c)}}return NA=u,NA}var _A,RF;function ty(){if(RF)return _A;RF=1;function e(t){return t}return _A=e,_A}var CA,LF;function D1e(){if(LF)return CA;LF=1;function e(t){return function(n){return n==null?void 0:n[t]}}return CA=e,CA}var TA,FF;function M1e(){if(FF)return TA;FF=1;var e=fM();function t(n){return function(i){return e(i,n)}}return TA=t,TA}var AA,$F;function I1e(){if($F)return AA;$F=1;var e=D1e(),t=M1e(),n=oM(),i=MN();function a(s){return n(s)?e(i(s)):t(s)}return AA=a,AA}var EA,BF;function Ul(){if(BF)return EA;BF=1;var e=A1e(),t=O1e(),n=ty(),i=hs(),a=I1e();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?i(o)?t(o[0],o[1]):e(o):a(o)}return EA=s,EA}var kA,zF;function SV(){if(zF)return kA;zF=1;function e(t,n,i,a){for(var s=t.length,o=i+(a?1:-1);a?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return kA=e,kA}var PA,qF;function R1e(){if(qF)return PA;qF=1;function e(t){return t!==t}return PA=e,PA}var OA,UF;function L1e(){if(UF)return OA;UF=1;function e(t,n,i){for(var a=i-1,s=t.length;++a<s;)if(t[a]===n)return a;return-1}return OA=e,OA}var DA,VF;function F1e(){if(VF)return DA;VF=1;var e=SV(),t=R1e(),n=L1e();function i(a,s,o){return s===s?n(a,s,o):e(a,t,o)}return DA=i,DA}var MA,HF;function $1e(){if(HF)return MA;HF=1;var e=F1e();function t(n,i){var a=n==null?0:n.length;return!!a&&e(n,i,0)>-1}return MA=t,MA}var IA,GF;function B1e(){if(GF)return IA;GF=1;function e(t,n,i){for(var a=-1,s=t==null?0:t.length;++a<s;)if(i(n,t[a]))return!0;return!1}return IA=e,IA}var RA,WF;function z1e(){if(WF)return RA;WF=1;function e(){}return RA=e,RA}var LA,KF;function q1e(){if(KF)return LA;KF=1;var e=bV(),t=z1e(),n=jM(),i=1/0,a=e&&1/n(new e([,-0]))[1]==i?function(s){return new e(s)}:t;return LA=a,LA}var FA,YF;function U1e(){if(YF)return FA;YF=1;var e=dV(),t=$1e(),n=B1e(),i=fV(),a=q1e(),s=jM(),o=200;function l(c,u,f){var p=-1,g=t,x=c.length,v=!0,j=[],w=j;if(f)v=!1,g=n;else if(x>=o){var _=u?null:a(c);if(_)return s(_);v=!1,g=i,w=new e}else w=u?[]:j;e:for(;++p<x;){var T=c[p],C=u?u(T):T;if(T=f||T!==0?T:0,v&&C===C){for(var O=w.length;O--;)if(w[O]===C)continue e;u&&w.push(C),j.push(T)}else g(w,C,f)||(w!==j&&w.push(C),j.push(T))}return j}return FA=l,FA}var $A,QF;function V1e(){if(QF)return $A;QF=1;var e=Ul(),t=U1e();function n(i,a){return i&&i.length?t(i,e(a,2)):[]}return $A=n,$A}var H1e=V1e();const XF=qn(H1e);function NV(e,t,n){return t===!0?XF(e,n):tn(t)?XF(e,t):e}function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}var G1e=["ref"];function JF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function vc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JF(Object(n),!0).forEach(function(i){BN(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function W1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,CV(i.key),i)}}function K1e(e,t,n){return t&&ZF(e.prototype,t),n&&ZF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y1e(e,t,n){return t=iS(t),Q1e(e,_V()?Reflect.construct(t,n||[],iS(e).constructor):t.apply(e,n))}function Q1e(e,t){if(t&&(xg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X1e(e)}function X1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_V=function(){return!!e})()}function iS(e){return iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iS(e)}function J1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GP(e,t)}function GP(e,t){return GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},GP(e,t)}function BN(e,t,n){return t=CV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CV(e){var t=Z1e(e,"string");return xg(t)=="symbol"?t:t+""}function Z1e(e,t){if(xg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(xg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function eje(e,t){if(e==null)return{};var n=tje(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function tje(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function nje(e){return e.value}function rje(e,t){if(Se.isValidElement(e))return Se.cloneElement(e,t);if(typeof e=="function")return Se.createElement(e,t);t.ref;var n=eje(t,G1e);return Se.createElement(bM,n)}var e5=1,Ic=function(e){function t(){var n;W1e(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=Y1e(this,t,[].concat(a)),BN(n,"lastBoundingBox",{width:-1,height:-1}),n}return J1e(t,e),K1e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();return i.height=this.wrapperNode.offsetHeight,i.width=this.wrapperNode.offsetWidth,i}return null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>e5||Math.abs(a.height-this.lastBoundingBox.height)>e5)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,i&&i(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?vc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,f=a.chartHeight,p,g;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(o==="center"&&s==="vertical"){var x=this.getBBoxSnapshot();p={left:((u||0)-x.width)/2}}else p=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();g={top:((f||0)-v.height)/2}}else g=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return vc(vc({},p),g)}},{key:"render",value:function(){var i=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,p=vc(vc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Se.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){i.wrapperNode=x}},rje(s,vc(vc({},this.props),{},{payload:NV(f,u,nje)})))}}],[{key:"getWithHeight",value:function(i,a){var s=vc(vc({},this.defaultProps),i.props),o=s.layout;return o==="vertical"&&jt(i.props.height)?{height:i.props.height}:o==="horizontal"?{width:i.props.width||a}:null}}])}(b.PureComponent);BN(Ic,"displayName","Legend");BN(Ic,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var BA,t5;function ije(){if(t5)return BA;t5=1;var e=Zb(),t=wM(),n=hs(),i=e?e.isConcatSpreadable:void 0;function a(s){return n(s)||t(s)||!!(i&&s&&s[i])}return BA=a,BA}var zA,n5;function TV(){if(n5)return zA;n5=1;var e=mV(),t=ije();function n(i,a,s,o,l){var c=-1,u=i.length;for(s||(s=t),l||(l=[]);++c<u;){var f=i[c];a>0&&s(f)?a>1?n(f,a-1,s,o,l):e(l,f):o||(l[l.length]=f)}return l}return zA=n,zA}var qA,r5;function aje(){if(r5)return qA;r5=1;function e(t){return function(n,i,a){for(var s=-1,o=Object(n),l=a(n),c=l.length;c--;){var u=l[t?c:++s];if(i(o[u],u,o)===!1)break}return n}}return qA=e,qA}var UA,i5;function sje(){if(i5)return UA;i5=1;var e=aje(),t=e();return UA=t,UA}var VA,a5;function AV(){if(a5)return VA;a5=1;var e=sje(),t=$N();function n(i,a){return i&&e(i,a,t)}return VA=n,VA}var HA,s5;function oje(){if(s5)return HA;s5=1;var e=e0();function t(n,i){return function(a,s){if(a==null)return a;if(!e(a))return n(a,s);for(var o=a.length,l=i?o:-1,c=Object(a);(i?l--:++l<o)&&s(c[l],l,c)!==!1;);return a}}return HA=t,HA}var GA,o5;function CM(){if(o5)return GA;o5=1;var e=AV(),t=oje(),n=t(e);return GA=n,GA}var WA,l5;function EV(){if(l5)return WA;l5=1;var e=CM(),t=e0();function n(i,a){var s=-1,o=t(i)?Array(i.length):[];return e(i,function(l,c,u){o[++s]=a(l,c,u)}),o}return WA=n,WA}var KA,c5;function lje(){if(c5)return KA;c5=1;function e(t,n){var i=t.length;for(t.sort(n);i--;)t[i]=t[i].value;return t}return KA=e,KA}var YA,u5;function cje(){if(u5)return YA;u5=1;var e=Jg();function t(n,i){if(n!==i){var a=n!==void 0,s=n===null,o=n===n,l=e(n),c=i!==void 0,u=i===null,f=i===i,p=e(i);if(!u&&!p&&!l&&n>i||l&&c&&f&&!u&&!p||s&&c&&f||!a&&f||!o)return 1;if(!s&&!l&&!p&&n<i||p&&a&&o&&!s&&!l||u&&a&&o||!c&&o||!f)return-1}return 0}return YA=t,YA}var QA,d5;function uje(){if(d5)return QA;d5=1;var e=cje();function t(n,i,a){for(var s=-1,o=n.criteria,l=i.criteria,c=o.length,u=a.length;++s<c;){var f=e(o[s],l[s]);if(f){if(s>=u)return f;var p=a[s];return f*(p=="desc"?-1:1)}}return n.index-i.index}return QA=t,QA}var XA,h5;function dje(){if(h5)return XA;h5=1;var e=hM(),t=fM(),n=Ul(),i=EV(),a=lje(),s=yV(),o=uje(),l=ty(),c=hs();function u(f,p,g){p.length?p=e(p,function(j){return c(j)?function(w){return t(w,j.length===1?j[0]:j)}:j}):p=[l];var x=-1;p=e(p,s(n));var v=i(f,function(j,w,_){var T=e(p,function(C){return C(j)});return{criteria:T,index:++x,value:j}});return a(v,function(j,w){return o(j,w,g)})}return XA=u,XA}var JA,f5;function hje(){if(f5)return JA;f5=1;function e(t,n,i){switch(i.length){case 0:return t.call(n);case 1:return t.call(n,i[0]);case 2:return t.call(n,i[0],i[1]);case 3:return t.call(n,i[0],i[1],i[2])}return t.apply(n,i)}return JA=e,JA}var ZA,p5;function fje(){if(p5)return ZA;p5=1;var e=hje(),t=Math.max;function n(i,a,s){return a=t(a===void 0?i.length-1:a,0),function(){for(var o=arguments,l=-1,c=t(o.length-a,0),u=Array(c);++l<c;)u[l]=o[a+l];l=-1;for(var f=Array(a+1);++l<a;)f[l]=o[l];return f[a]=s(u),e(i,this,f)}}return ZA=n,ZA}var eE,m5;function pje(){if(m5)return eE;m5=1;function e(t){return function(){return t}}return eE=e,eE}var tE,g5;function kV(){if(g5)return tE;g5=1;var e=qf(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return tE=t,tE}var nE,y5;function mje(){if(y5)return nE;y5=1;var e=pje(),t=kV(),n=ty(),i=t?function(a,s){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return nE=i,nE}var rE,x5;function gje(){if(x5)return rE;x5=1;var e=800,t=16,n=Date.now;function i(a){var s=0,o=0;return function(){var l=n(),c=t-(l-o);if(o=l,c>0){if(++s>=e)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return rE=i,rE}var iE,v5;function yje(){if(v5)return iE;v5=1;var e=mje(),t=gje(),n=t(e);return iE=n,iE}var aE,b5;function xje(){if(b5)return aE;b5=1;var e=ty(),t=fje(),n=yje();function i(a,s){return n(t(a,s,e),a+"")}return aE=i,aE}var sE,j5;function zN(){if(j5)return sE;j5=1;var e=cM(),t=e0(),n=SM(),i=_d();function a(s,o,l){if(!i(l))return!1;var c=typeof o;return(c=="number"?t(l)&&n(o,l.length):c=="string"&&o in l)?e(l[o],s):!1}return sE=a,sE}var oE,w5;function vje(){if(w5)return oE;w5=1;var e=TV(),t=dje(),n=xje(),i=zN(),a=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&i(s,o[0],o[1])?o=[]:l>2&&i(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return oE=a,oE}var bje=vje();const TM=qn(bje);function Jv(e){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jv(e)}function WP(){return WP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},WP.apply(this,arguments)}function jje(e,t){return _je(e)||Nje(e,t)||Sje(e,t)||wje()}function wje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sje(e,t){if(e){if(typeof e=="string")return S5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S5(e,t)}}function S5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Nje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function _je(e){if(Array.isArray(e))return e}function N5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function lE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N5(Object(n),!0).forEach(function(i){Cje(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Cje(e,t,n){return t=Tje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tje(e){var t=Aje(e,"string");return Jv(t)=="symbol"?t:t+""}function Aje(e,t){if(Jv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Jv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eje(e){return Array.isArray(e)&&Ci(e[0])&&Ci(e[1])?e.join(" ~ "):e}var kje=function(t){var n=t.separator,i=n===void 0?" : ":n,a=t.contentStyle,s=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,p=t.formatter,g=t.itemSorter,x=t.wrapperClassName,v=t.labelClassName,j=t.label,w=t.labelFormatter,_=t.accessibilityLayer,T=_===void 0?!1:_,C=function(){if(f&&f.length){var V={padding:0,margin:0},H=(g?TM(f,g):f).map(function(te,X){if(te.type==="none")return null;var q=lE({display:"block",paddingTop:4,paddingBottom:4,color:te.color||"#000"},l),W=te.formatter||p||Eje,ae=te.value,G=te.name,z=ae,le=G;if(W&&z!=null&&le!=null){var je=W(ae,G,te,X,f);if(Array.isArray(je)){var Y=jje(je,2);z=Y[0],le=Y[1]}else z=je}return Se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(X),style:q},Ci(le)?Se.createElement("span",{className:"recharts-tooltip-item-name"},le):null,Ci(le)?Se.createElement("span",{className:"recharts-tooltip-item-separator"},i):null,Se.createElement("span",{className:"recharts-tooltip-item-value"},z),Se.createElement("span",{className:"recharts-tooltip-item-unit"},te.unit||""))});return Se.createElement("ul",{className:"recharts-tooltip-item-list",style:V},H)}return null},O=lE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),A=lE({margin:0},u),P=!cn(j),I=P?j:"",F=dn("recharts-default-tooltip",x),B=dn("recharts-tooltip-label",v);P&&w&&f!==void 0&&f!==null&&(I=w(j,f));var $=T?{role:"status","aria-live":"assertive"}:{};return Se.createElement("div",WP({className:F,style:O},$),Se.createElement("p",{className:B,style:A},Se.isValidElement(I)?I:"".concat(I)),C())};function Zv(e){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zv(e)}function Hj(e,t,n){return t=Pje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pje(e){var t=Oje(e,"string");return Zv(t)=="symbol"?t:t+""}function Oje(e,t){if(Zv(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Zv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lv="recharts-tooltip-wrapper",Dje={visibility:"hidden"};function Mje(e){var t=e.coordinate,n=e.translateX,i=e.translateY;return dn(lv,Hj(Hj(Hj(Hj({},"".concat(lv,"-right"),jt(n)&&t&&jt(t.x)&&n>=t.x),"".concat(lv,"-left"),jt(n)&&t&&jt(t.x)&&n<t.x),"".concat(lv,"-bottom"),jt(i)&&t&&jt(t.y)&&i>=t.y),"".concat(lv,"-top"),jt(i)&&t&&jt(t.y)&&i<t.y))}function _5(e){var t=e.allowEscapeViewBox,n=e.coordinate,i=e.key,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&jt(s[i]))return s[i];var f=n[i]-l-a,p=n[i]+a;if(t[i])return o[i]?f:p;if(o[i]){var g=f,x=c[i];return g<x?Math.max(p,c[i]):Math.max(f,c[i])}var v=p+l,j=c[i]+u;return v>j?Math.max(f,c[i]):Math.max(p,c[i])}function Ije(e){var t=e.translateX,n=e.translateY,i=e.useTranslate3d;return{transform:i?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Rje(e){var t=e.allowEscapeViewBox,n=e.coordinate,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,p;return o.height>0&&o.width>0&&n?(f=_5({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=_5({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Ije({translateX:f,translateY:p,useTranslate3d:l})):u=Dje,{cssProperties:u,cssClasses:Mje({translateX:f,translateY:p,coordinate:n})}}function vg(e){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vg(e)}function C5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function T5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C5(Object(n),!0).forEach(function(i){YP(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Lje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fje(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,OV(i.key),i)}}function $je(e,t,n){return t&&Fje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bje(e,t,n){return t=aS(t),zje(e,PV()?Reflect.construct(t,n||[],aS(e).constructor):t.apply(e,n))}function zje(e,t){if(t&&(vg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qje(e)}function qje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PV=function(){return!!e})()}function aS(e){return aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aS(e)}function Uje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KP(e,t)}function KP(e,t){return KP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},KP(e,t)}function YP(e,t,n){return t=OV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OV(e){var t=Vje(e,"string");return vg(t)=="symbol"?t:t+""}function Vje(e,t){if(vg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(vg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var A5=1,Hje=function(e){function t(){var n;Lje(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=Bje(this,t,[].concat(a)),YP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),YP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return Uje(t,e),$je(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.state.lastBoundingBox.width)>A5||Math.abs(i.height-this.state.lastBoundingBox.height)>A5)&&this.setState({lastBoundingBox:{width:i.width,height:i.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,f=a.coordinate,p=a.hasPayload,g=a.isAnimationActive,x=a.offset,v=a.position,j=a.reverseDirection,w=a.useTranslate3d,_=a.viewBox,T=a.wrapperStyle,C=Rje({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:x,position:v,reverseDirection:j,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:_}),O=C.cssClasses,A=C.cssProperties,P=T5(T5({transition:g&&s?"transform ".concat(l,"ms ").concat(c):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},T);return Se.createElement("div",{tabIndex:-1,className:O,style:P,ref:function(F){i.wrapperNode=F}},u)}}])}(b.PureComponent),Gje=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Cd={isSsr:Gje()};function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function E5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function k5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E5(Object(n),!0).forEach(function(i){AM(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Wje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kje(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,MV(i.key),i)}}function Yje(e,t,n){return t&&Kje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qje(e,t,n){return t=sS(t),Xje(e,DV()?Reflect.construct(t,n||[],sS(e).constructor):t.apply(e,n))}function Xje(e,t){if(t&&(bg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jje(e)}function Jje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DV=function(){return!!e})()}function sS(e){return sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sS(e)}function Zje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QP(e,t)}function QP(e,t){return QP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},QP(e,t)}function AM(e,t,n){return t=MV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MV(e){var t=ewe(e,"string");return bg(t)=="symbol"?t:t+""}function ewe(e,t){if(bg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(bg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function twe(e){return e.dataKey}function nwe(e,t){return Se.isValidElement(e)?Se.cloneElement(e,t):typeof e=="function"?Se.createElement(e,t):Se.createElement(kje,t)}var Da=function(e){function t(){return Wje(this,t),Qje(this,t,arguments)}return Zje(t,e),Yje(t,[{key:"render",value:function(){var i=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,f=a.coordinate,p=a.filterNull,g=a.isAnimationActive,x=a.offset,v=a.payload,j=a.payloadUniqBy,w=a.position,_=a.reverseDirection,T=a.useTranslate3d,C=a.viewBox,O=a.wrapperStyle,A=v??[];p&&A.length&&(A=NV(v.filter(function(I){return I.value!=null&&(I.hide!==!0||i.props.includeHidden)}),j,twe));var P=A.length>0;return Se.createElement(Hje,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:g,active:s,coordinate:f,hasPayload:P,offset:x,position:w,reverseDirection:_,useTranslate3d:T,viewBox:C,wrapperStyle:O},nwe(u,k5(k5({},this.props),{},{payload:A})))}}])}(b.PureComponent);AM(Da,"displayName","Tooltip");AM(Da,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Cd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var cE,P5;function rwe(){if(P5)return cE;P5=1;var e=ql(),t=function(){return e.Date.now()};return cE=t,cE}var uE,O5;function iwe(){if(O5)return uE;O5=1;var e=/\s/;function t(n){for(var i=n.length;i--&&e.test(n.charAt(i)););return i}return uE=t,uE}var dE,D5;function awe(){if(D5)return dE;D5=1;var e=iwe(),t=/^\s+/;function n(i){return i&&i.slice(0,e(i)+1).replace(t,"")}return dE=n,dE}var hE,M5;function IV(){if(M5)return hE;M5=1;var e=awe(),t=_d(),n=Jg(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return i;if(t(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=t(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=e(u);var p=s.test(u);return p||o.test(u)?l(u.slice(2),p?2:8):a.test(u)?i:+u}return hE=c,hE}var fE,I5;function swe(){if(I5)return fE;I5=1;var e=_d(),t=rwe(),n=IV(),i="Expected a function",a=Math.max,s=Math.min;function o(l,c,u){var f,p,g,x,v,j,w=0,_=!1,T=!1,C=!0;if(typeof l!="function")throw new TypeError(i);c=n(c)||0,e(u)&&(_=!!u.leading,T="maxWait"in u,g=T?a(n(u.maxWait)||0,c):g,C="trailing"in u?!!u.trailing:C);function O(H){var te=f,X=p;return f=p=void 0,w=H,x=l.apply(X,te),x}function A(H){return w=H,v=setTimeout(F,c),_?O(H):x}function P(H){var te=H-j,X=H-w,q=c-te;return T?s(q,g-X):q}function I(H){var te=H-j,X=H-w;return j===void 0||te>=c||te<0||T&&X>=g}function F(){var H=t();if(I(H))return B(H);v=setTimeout(F,P(H))}function B(H){return v=void 0,C&&f?O(H):(f=p=void 0,x)}function $(){v!==void 0&&clearTimeout(v),w=0,f=j=p=v=void 0}function L(){return v===void 0?x:B(t())}function V(){var H=t(),te=I(H);if(f=arguments,p=this,j=H,te){if(v===void 0)return A(j);if(T)return clearTimeout(v),v=setTimeout(F,c),O(j)}return v===void 0&&(v=setTimeout(F,c)),x}return V.cancel=$,V.flush=L,V}return fE=o,fE}var pE,R5;function owe(){if(R5)return pE;R5=1;var e=swe(),t=_d(),n="Expected a function";function i(a,s,o){var l=!0,c=!0;if(typeof a!="function")throw new TypeError(n);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(a,s,{leading:l,maxWait:s,trailing:c})}return pE=i,pE}var lwe=owe();const RV=qn(lwe);function eb(e){"@babel/helpers - typeof";return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eb(e)}function L5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Gj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L5(Object(n),!0).forEach(function(i){cwe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function cwe(e,t,n){return t=uwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uwe(e){var t=dwe(e,"string");return eb(t)=="symbol"?t:t+""}function dwe(e,t){if(eb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(eb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hwe(e,t){return gwe(e)||mwe(e,t)||pwe(e,t)||fwe()}function fwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pwe(e,t){if(e){if(typeof e=="string")return F5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F5(e,t)}}function F5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function mwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function gwe(e){if(Array.isArray(e))return e}var Nw=b.forwardRef(function(e,t){var n=e.aspect,i=e.initialDimension,a=i===void 0?{width:-1,height:-1}:i,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,p=e.minHeight,g=e.maxHeight,x=e.children,v=e.debounce,j=v===void 0?0:v,w=e.id,_=e.className,T=e.onResize,C=e.style,O=C===void 0?{}:C,A=b.useRef(null),P=b.useRef();P.current=T,b.useImperativeHandle(t,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var I=b.useState({containerWidth:a.width,containerHeight:a.height}),F=hwe(I,2),B=F[0],$=F[1],L=b.useCallback(function(H,te){$(function(X){var q=Math.round(H),W=Math.round(te);return X.containerWidth===q&&X.containerHeight===W?X:{containerWidth:q,containerHeight:W}})},[]);b.useEffect(function(){var H=function(G){var z,le=G[0].contentRect,je=le.width,Y=le.height;L(je,Y),(z=P.current)===null||z===void 0||z.call(P,je,Y)};j>0&&(H=RV(H,j,{trailing:!0,leading:!1}));var te=new ResizeObserver(H),X=A.current.getBoundingClientRect(),q=X.width,W=X.height;return L(q,W),te.observe(A.current),function(){te.disconnect()}},[L,j]);var V=b.useMemo(function(){var H=B.containerWidth,te=B.containerHeight;if(H<0||te<0)return null;Fo(rf(o)||rf(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Fo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var X=rf(o)?H:o,q=rf(c)?te:c;n&&n>0&&(X?q=X/n:q&&(X=q*n),g&&q>g&&(q=g)),Fo(X>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,X,q,o,c,f,p,n);var W=!Array.isArray(x)&&Mc(x.type).endsWith("Chart");return Se.Children.map(x,function(ae){return Se.isValidElement(ae)?b.cloneElement(ae,Gj({width:X,height:q},W?{style:Gj({height:"100%",width:"100%",maxHeight:q,maxWidth:X},ae.props.style)}:{})):ae})},[n,x,c,g,p,f,B,o]);return Se.createElement("div",{id:w?"".concat(w):void 0,className:dn("recharts-responsive-container",_),style:Gj(Gj({},O),{},{width:o,height:c,minWidth:f,minHeight:p,maxHeight:g}),ref:A},V)}),t0=function(t){return null};t0.displayName="Cell";function tb(e){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tb(e)}function $5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function XP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$5(Object(n),!0).forEach(function(i){ywe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ywe(e,t,n){return t=xwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xwe(e){var t=vwe(e,"string");return tb(t)=="symbol"?t:t+""}function vwe(e,t){if(tb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(tb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tm={widthCache:{},cacheCount:0},bwe=2e3,jwe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},B5="recharts_measurement_span";function wwe(e){var t=XP({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Dv=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Cd.isSsr)return{width:0,height:0};var i=wwe(n),a=JSON.stringify({text:t,copyStyle:i});if(Tm.widthCache[a])return Tm.widthCache[a];try{var s=document.getElementById(B5);s||(s=document.createElement("span"),s.setAttribute("id",B5),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=XP(XP({},jwe),i);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return Tm.widthCache[a]=c,++Tm.cacheCount>bwe&&(Tm.cacheCount=0,Tm.widthCache={}),c}catch{return{width:0,height:0}}},Swe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function nb(e){"@babel/helpers - typeof";return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nb(e)}function oS(e,t){return Twe(e)||Cwe(e,t)||_we(e,t)||Nwe()}function Nwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _we(e,t){if(e){if(typeof e=="string")return z5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z5(e,t)}}function z5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Cwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Twe(e){if(Array.isArray(e))return e}function Awe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q5(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,kwe(i.key),i)}}function Ewe(e,t,n){return t&&q5(e.prototype,t),n&&q5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kwe(e){var t=Pwe(e,"string");return nb(t)=="symbol"?t:t+""}function Pwe(e,t){if(nb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(nb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var U5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,V5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Owe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Dwe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,LV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Mwe=Object.keys(LV),Fm="NaN";function Iwe(e,t){return e*LV[t]}var Wj=function(){function e(t,n){Awe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Owe.test(n)&&(this.num=NaN,this.unit=""),Mwe.includes(n)&&(this.num=Iwe(t,n),this.unit="px")}return Ewe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var i,a=(i=Dwe.exec(n))!==null&&i!==void 0?i:[],s=oS(a,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function FV(e){if(e.includes(Fm))return Fm;for(var t=e;t.includes("*")||t.includes("/");){var n,i=(n=U5.exec(t))!==null&&n!==void 0?n:[],a=oS(i,4),s=a[1],o=a[2],l=a[3],c=Wj.parse(s??""),u=Wj.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Fm;t=t.replace(U5,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,g=(p=V5.exec(t))!==null&&p!==void 0?p:[],x=oS(g,4),v=x[1],j=x[2],w=x[3],_=Wj.parse(v??""),T=Wj.parse(w??""),C=j==="+"?_.add(T):_.subtract(T);if(C.isNaN())return Fm;t=t.replace(V5,C.toString())}return t}var H5=/\(([^()]*)\)/;function Rwe(e){for(var t=e;t.includes("(");){var n=H5.exec(t),i=oS(n,2),a=i[1];t=t.replace(H5,FV(a))}return t}function Lwe(e){var t=e.replace(/\s+/g,"");return t=Rwe(t),t=FV(t),t}function Fwe(e){try{return Lwe(e)}catch{return Fm}}function mE(e){var t=Fwe(e.slice(5,-1));return t===Fm?"":t}var $we=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Bwe=["dx","dy","angle","className","breakAll"];function JP(){return JP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},JP.apply(this,arguments)}function G5(e,t){if(e==null)return{};var n=zwe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function zwe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function W5(e,t){return Hwe(e)||Vwe(e,t)||Uwe(e,t)||qwe()}function qwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uwe(e,t){if(e){if(typeof e=="string")return K5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K5(e,t)}}function K5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Vwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Hwe(e){if(Array.isArray(e))return e}var $V=/[ \f\n\r\t\v\u2028\u2029]+/,BV=function(t){var n=t.children,i=t.breakAll,a=t.style;try{var s=[];cn(n)||(i?s=n.toString().split(""):s=n.toString().split($V));var o=s.map(function(c){return{word:c,width:Dv(c,a).width}}),l=i?0:Dv("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Gwe=function(t,n,i,a,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=jt(o),p=l,g=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return X.reduce(function(q,W){var ae=W.word,G=W.width,z=q[q.length-1];if(z&&(a==null||s||z.width+G+i<Number(a)))z.words.push(ae),z.width+=G+i;else{var le={words:[ae],width:G};q.push(le)}return q},[])},x=g(n),v=function(X){return X.reduce(function(q,W){return q.width>W.width?q:W})};if(!f)return x;for(var j="",w=function(X){var q=p.slice(0,X),W=BV({breakAll:u,style:c,children:q+j}).wordsWithComputedWidth,ae=g(W),G=ae.length>o||v(ae).width>Number(a);return[G,ae]},_=0,T=p.length-1,C=0,O;_<=T&&C<=p.length-1;){var A=Math.floor((_+T)/2),P=A-1,I=w(P),F=W5(I,2),B=F[0],$=F[1],L=w(A),V=W5(L,1),H=V[0];if(!B&&!H&&(_=A+1),B&&H&&(T=A-1),!B&&H){O=$;break}C++}return O||x},Y5=function(t){var n=cn(t)?[]:t.toString().split($V);return[{words:n}]},Wwe=function(t){var n=t.width,i=t.scaleToFit,a=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((n||i)&&!Cd.isSsr){var c,u,f=BV({breakAll:o,children:a,style:s});if(f){var p=f.wordsWithComputedWidth,g=f.spaceWidth;c=p,u=g}else return Y5(a);return Gwe({breakAll:o,children:a,maxLines:l,style:s},c,u,n,i)}return Y5(a)},Q5="#808080",If=function(t){var n=t.x,i=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,p=f===void 0?!1:f,g=t.textAnchor,x=g===void 0?"start":g,v=t.verticalAnchor,j=v===void 0?"end":v,w=t.fill,_=w===void 0?Q5:w,T=G5(t,$we),C=b.useMemo(function(){return Wwe({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:p,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,p,T.style,T.width]),O=T.dx,A=T.dy,P=T.angle,I=T.className,F=T.breakAll,B=G5(T,Bwe);if(!Ci(i)||!Ci(s))return null;var $=i+(jt(O)?O:0),L=s+(jt(A)?A:0),V;switch(j){case"start":V=mE("calc(".concat(u,")"));break;case"middle":V=mE("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:V=mE("calc(".concat(C.length-1," * -").concat(l,")"));break}var H=[];if(p){var te=C[0].width,X=T.width;H.push("scale(".concat((jt(X)?X/te:1)/te,")"))}return P&&H.push("rotate(".concat(P,", ").concat($,", ").concat(L,")")),H.length&&(B.transform=H.join(" ")),Se.createElement("text",JP({},$t(B,!0),{x:$,y:L,className:dn("recharts-text",I),textAnchor:x,fill:_.includes("url")?Q5:_}),C.map(function(q,W){var ae=q.words.join(F?"":" ");return Se.createElement("tspan",{x:$,dy:W===0?V:l,key:"".concat(ae,"-").concat(W)},ae)}))};function pd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kwe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function EM(e){let t,n,i;e.length!==2?(t=pd,n=(l,c)=>pd(e(l),c),i=(l,c)=>e(l)-c):(t=e===pd||e===Kwe?e:Ywe,n=e,i=e);function a(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const p=u+f>>>1;n(l[p],c)<0?u=p+1:f=p}while(u<f)}return u}function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const p=u+f>>>1;n(l[p],c)<=0?u=p+1:f=p}while(u<f)}return u}function o(l,c,u=0,f=l.length){const p=a(l,c,u,f-1);return p>u&&i(l[p-1],c)>-i(l[p],c)?p-1:p}return{left:a,center:o,right:s}}function Ywe(){return 0}function zV(e){return e===null?NaN:+e}function*Qwe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Xwe=EM(pd),n0=Xwe.right;EM(zV).center;class X5 extends Map{constructor(t,n=eSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,a]of t)this.set(i,a)}get(t){return super.get(J5(this,t))}has(t){return super.has(J5(this,t))}set(t,n){return super.set(Jwe(this,t),n)}delete(t){return super.delete(Zwe(this,t))}}function J5({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Jwe({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function Zwe({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function eSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function tSe(e=pd){if(e===pd)return qV;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function qV(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const nSe=Math.sqrt(50),rSe=Math.sqrt(10),iSe=Math.sqrt(2);function lS(e,t,n){const i=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(i)),s=i/Math.pow(10,a),o=s>=nSe?10:s>=rSe?5:s>=iSe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?lS(e,t,n*2):[l,c,u]}function ZP(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[a,s,o]=i?lS(t,e,n):lS(e,t,n);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(i)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function eO(e,t,n){return t=+t,e=+e,n=+n,lS(e,t,n)[2]}function tO(e,t,n){t=+t,e=+e,n=+n;const i=t<e,a=i?eO(t,e,n):eO(e,t,n);return(i?-1:1)*(a<0?1/-a:a)}function Z5(e,t){let n;for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function e$(e,t){let n;for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function UV(e,t,n=0,i=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(a=a===void 0?qV:tSe(a);i>n;){if(i-n>600){const c=i-n+1,u=t-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*p*(c-p)/c)*(u-c/2<0?-1:1),x=Math.max(n,Math.floor(t-u*p/c+g)),v=Math.min(i,Math.floor(t+(c-u)*p/c+g));UV(e,t,x,v,a)}const s=e[t];let o=n,l=i;for(cv(e,n,t),a(e[i],s)>0&&cv(e,n,i);o<l;){for(cv(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[n],s)===0?cv(e,n,l):(++l,cv(e,l,i)),l<=t&&(n=l+1),t<=l&&(i=l-1)}return e}function cv(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function aSe(e,t,n){if(e=Float64Array.from(Qwe(e)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return e$(e);if(t>=1)return Z5(e);var i,a=(i-1)*t,s=Math.floor(a),o=Z5(UV(e,s).subarray(0,s+1)),l=e$(e.subarray(s+1));return o+(l-o)*(a-s)}}function sSe(e,t,n=zV){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,a=(i-1)*t,s=Math.floor(a),o=+n(e[s],s,e),l=+n(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function oSe(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(a);++i<a;)s[i]=e+i*n;return s}function oo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Zc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const nO=Symbol("implicit");function kM(){var e=new X5,t=[],n=[],i=nO;function a(s){let o=e.get(s);if(o===void 0){if(i!==nO)return i;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new X5;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return kM(t,n).unknown(i)},oo.apply(a,arguments),a}function rb(){var e=kM().unknown(void 0),t=e.domain,n=e.range,i=0,a=1,s,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function p(){var g=t().length,x=a<i,v=x?a:i,j=x?i:a;s=(j-v)/Math.max(1,g-c+u*2),l&&(s=Math.floor(s)),v+=(j-v-s*(g-c))*f,o=s*(1-c),l&&(v=Math.round(v),o=Math.round(o));var w=oSe(g).map(function(_){return v+s*_});return n(x?w.reverse():w)}return e.domain=function(g){return arguments.length?(t(g),p()):t()},e.range=function(g){return arguments.length?([i,a]=g,i=+i,a=+a,p()):[i,a]},e.rangeRound=function(g){return[i,a]=g,i=+i,a=+a,l=!0,p()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(g){return arguments.length?(l=!!g,p()):l},e.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),p()):c},e.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},e.paddingOuter=function(g){return arguments.length?(u=+g,p()):u},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},e.copy=function(){return rb(t(),[i,a]).round(l).paddingInner(c).paddingOuter(u).align(f)},oo.apply(p(),arguments)}function VV(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return VV(t())},e}function Mv(){return VV(rb.apply(null,arguments).paddingInner(1))}function PM(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function HV(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function r0(){}var ib=.7,cS=1/ib,Km="\\s*([+-]?\\d+)\\s*",ab="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lSe=/^#([0-9a-f]{3,8})$/,cSe=new RegExp(`^rgb\\(${Km},${Km},${Km}\\)$`),uSe=new RegExp(`^rgb\\(${Rl},${Rl},${Rl}\\)$`),dSe=new RegExp(`^rgba\\(${Km},${Km},${Km},${ab}\\)$`),hSe=new RegExp(`^rgba\\(${Rl},${Rl},${Rl},${ab}\\)$`),fSe=new RegExp(`^hsl\\(${ab},${Rl},${Rl}\\)$`),pSe=new RegExp(`^hsla\\(${ab},${Rl},${Rl},${ab}\\)$`),t$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PM(r0,sb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:n$,formatHex:n$,formatHex8:mSe,formatHsl:gSe,formatRgb:r$,toString:r$});function n$(){return this.rgb().formatHex()}function mSe(){return this.rgb().formatHex8()}function gSe(){return GV(this).formatHsl()}function r$(){return this.rgb().formatRgb()}function sb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=lSe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?i$(t):n===3?new ss(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Kj(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Kj(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cSe.exec(e))?new ss(t[1],t[2],t[3],1):(t=uSe.exec(e))?new ss(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=dSe.exec(e))?Kj(t[1],t[2],t[3],t[4]):(t=hSe.exec(e))?Kj(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fSe.exec(e))?o$(t[1],t[2]/100,t[3]/100,1):(t=pSe.exec(e))?o$(t[1],t[2]/100,t[3]/100,t[4]):t$.hasOwnProperty(e)?i$(t$[e]):e==="transparent"?new ss(NaN,NaN,NaN,0):null}function i$(e){return new ss(e>>16&255,e>>8&255,e&255,1)}function Kj(e,t,n,i){return i<=0&&(e=t=n=NaN),new ss(e,t,n,i)}function ySe(e){return e instanceof r0||(e=sb(e)),e?(e=e.rgb(),new ss(e.r,e.g,e.b,e.opacity)):new ss}function rO(e,t,n,i){return arguments.length===1?ySe(e):new ss(e,t,n,i??1)}function ss(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}PM(ss,rO,HV(r0,{brighter(e){return e=e==null?cS:Math.pow(cS,e),new ss(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ib:Math.pow(ib,e),new ss(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ss(vf(this.r),vf(this.g),vf(this.b),uS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a$,formatHex:a$,formatHex8:xSe,formatRgb:s$,toString:s$}));function a$(){return`#${af(this.r)}${af(this.g)}${af(this.b)}`}function xSe(){return`#${af(this.r)}${af(this.g)}${af(this.b)}${af((isNaN(this.opacity)?1:this.opacity)*255)}`}function s$(){const e=uS(this.opacity);return`${e===1?"rgb(":"rgba("}${vf(this.r)}, ${vf(this.g)}, ${vf(this.b)}${e===1?")":`, ${e})`}`}function uS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function af(e){return e=vf(e),(e<16?"0":"")+e.toString(16)}function o$(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Io(e,t,n,i)}function GV(e){if(e instanceof Io)return new Io(e.h,e.s,e.l,e.opacity);if(e instanceof r0||(e=sb(e)),!e)return new Io;if(e instanceof Io)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(n-i)/l+(n<i)*6:n===s?o=(i-t)/l+2:o=(t-n)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Io(o,l,c,e.opacity)}function vSe(e,t,n,i){return arguments.length===1?GV(e):new Io(e,t,n,i??1)}function Io(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}PM(Io,vSe,HV(r0,{brighter(e){return e=e==null?cS:Math.pow(cS,e),new Io(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ib:Math.pow(ib,e),new Io(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new ss(gE(e>=240?e-240:e+120,a,i),gE(e,a,i),gE(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Io(l$(this.h),Yj(this.s),Yj(this.l),uS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uS(this.opacity);return`${e===1?"hsl(":"hsla("}${l$(this.h)}, ${Yj(this.s)*100}%, ${Yj(this.l)*100}%${e===1?")":`, ${e})`}`}}));function l$(e){return e=(e||0)%360,e<0?e+360:e}function Yj(e){return Math.max(0,Math.min(1,e||0))}function gE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const OM=e=>()=>e;function bSe(e,t){return function(n){return e+n*t}}function jSe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function wSe(e){return(e=+e)==1?WV:function(t,n){return n-t?jSe(t,n,e):OM(isNaN(t)?n:t)}}function WV(e,t){var n=t-e;return n?bSe(e,n):OM(isNaN(e)?t:e)}const c$=function e(t){var n=wSe(t);function i(a,s){var o=n((a=rO(a)).r,(s=rO(s)).r),l=n(a.g,s.g),c=n(a.b,s.b),u=WV(a.opacity,s.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=c(f),a.opacity=u(f),a+""}}return i.gamma=e,i}(1);function SSe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(s){for(a=0;a<n;++a)i[a]=e[a]*(1-s)+t[a]*s;return i}}function NSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _Se(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)a[o]=ny(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<i;++o)s[o]=a[o](l);return s}}function CSe(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function dS(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function TSe(e,t){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=ny(e[a],t[a]):i[a]=t[a];return function(s){for(a in n)i[a]=n[a](s);return i}}var iO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yE=new RegExp(iO.source,"g");function ASe(e){return function(){return e}}function ESe(e){return function(t){return e(t)+""}}function kSe(e,t){var n=iO.lastIndex=yE.lastIndex=0,i,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(i=iO.exec(e))&&(a=yE.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:dS(i,a)})),n=yE.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?ESe(c[0].x):ASe(t):(t=c.length,function(u){for(var f=0,p;f<t;++f)l[(p=c[f]).i]=p.x(u);return l.join("")})}function ny(e,t){var n=typeof t,i;return t==null||n==="boolean"?OM(t):(n==="number"?dS:n==="string"?(i=sb(t))?(t=i,c$):kSe:t instanceof sb?c$:t instanceof Date?CSe:NSe(t)?SSe:Array.isArray(t)?_Se:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?TSe:dS)(e,t)}function DM(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function PSe(e,t){t===void 0&&(t=e,e=ny);for(var n=0,i=t.length-1,a=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[l](o-l)}}function OSe(e){return function(){return e}}function hS(e){return+e}var u$=[0,1];function La(e){return e}function aO(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:OSe(isNaN(t)?NaN:.5)}function DSe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function MSe(e,t,n){var i=e[0],a=e[1],s=t[0],o=t[1];return a<i?(i=aO(a,i),s=n(o,s)):(i=aO(i,a),s=n(s,o)),function(l){return s(i(l))}}function ISe(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),s=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)a[o]=aO(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(l){var c=n0(e,l,1,i)-1;return s[c](a[c](l))}}function i0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function qN(){var e=u$,t=u$,n=ny,i,a,s,o=La,l,c,u;function f(){var g=Math.min(e.length,t.length);return o!==La&&(o=DSe(e[0],e[g-1])),l=g>2?ISe:MSe,c=u=null,p}function p(g){return g==null||isNaN(g=+g)?s:(c||(c=l(e.map(i),t,n)))(i(o(g)))}return p.invert=function(g){return o(a((u||(u=l(t,e.map(i),dS)))(g)))},p.domain=function(g){return arguments.length?(e=Array.from(g,hS),f()):e.slice()},p.range=function(g){return arguments.length?(t=Array.from(g),f()):t.slice()},p.rangeRound=function(g){return t=Array.from(g),n=DM,f()},p.clamp=function(g){return arguments.length?(o=g?!0:La,f()):o!==La},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,x){return i=g,a=x,f()}}function MM(){return qN()(La,La)}function RSe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fS(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function jg(e){return e=fS(Math.abs(e)),e?e[1]:NaN}function LSe(e,t){return function(n,i){for(var a=n.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),s.push(n.substring(a-=l,a+l)),!((c+=l+1)>i));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function FSe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $Se=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ob(e){if(!(t=$Se.exec(e)))throw new Error("invalid format: "+e);var t;return new IM({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ob.prototype=IM.prototype;function IM(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}IM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function BSe(e){e:for(var t=e.length,n=1,i=-1,a;n<t;++n)switch(e[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(a+1):e}var KV;function zSe(e,t){var n=fS(e,t);if(!n)return e+"";var i=n[0],a=n[1],s=a-(KV=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+fS(e,Math.max(0,t+s-1))[0]}function d$(e,t){var n=fS(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const h$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:RSe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>d$(e*100,t),r:d$,s:zSe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function f$(e){return e}var p$=Array.prototype.map,m$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function qSe(e){var t=e.grouping===void 0||e.thousands===void 0?f$:LSe(p$.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?f$:FSe(p$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(p){p=ob(p);var g=p.fill,x=p.align,v=p.sign,j=p.symbol,w=p.zero,_=p.width,T=p.comma,C=p.precision,O=p.trim,A=p.type;A==="n"?(T=!0,A="g"):h$[A]||(C===void 0&&(C=12),O=!0,A="g"),(w||g==="0"&&x==="=")&&(w=!0,g="0",x="=");var P=j==="$"?n:j==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",I=j==="$"?i:/[%p]/.test(A)?o:"",F=h$[A],B=/[defgprs%]/.test(A);C=C===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function $(L){var V=P,H=I,te,X,q;if(A==="c")H=F(L)+H,L="";else{L=+L;var W=L<0||1/L<0;if(L=isNaN(L)?c:F(Math.abs(L),C),O&&(L=BSe(L)),W&&+L==0&&v!=="+"&&(W=!1),V=(W?v==="("?v:l:v==="-"||v==="("?"":v)+V,H=(A==="s"?m$[8+KV/3]:"")+H+(W&&v==="("?")":""),B){for(te=-1,X=L.length;++te<X;)if(q=L.charCodeAt(te),48>q||q>57){H=(q===46?a+L.slice(te+1):L.slice(te))+H,L=L.slice(0,te);break}}}T&&!w&&(L=t(L,1/0));var ae=V.length+L.length+H.length,G=ae<_?new Array(_-ae+1).join(g):"";switch(T&&w&&(L=t(G+L,G.length?_-H.length:1/0),G=""),x){case"<":L=V+L+H+G;break;case"=":L=V+G+L+H;break;case"^":L=G.slice(0,ae=G.length>>1)+V+L+H+G.slice(ae);break;default:L=G+V+L+H;break}return s(L)}return $.toString=function(){return p+""},$}function f(p,g){var x=u((p=ob(p),p.type="f",p)),v=Math.max(-8,Math.min(8,Math.floor(jg(g)/3)))*3,j=Math.pow(10,-v),w=m$[8+v/3];return function(_){return x(j*_)+w}}return{format:u,formatPrefix:f}}var Qj,RM,YV;USe({thousands:",",grouping:[3],currency:["$",""]});function USe(e){return Qj=qSe(e),RM=Qj.format,YV=Qj.formatPrefix,Qj}function VSe(e){return Math.max(0,-jg(Math.abs(e)))}function HSe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jg(t)/3)))*3-jg(Math.abs(e)))}function GSe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jg(t)-jg(e))+1}function QV(e,t,n,i){var a=tO(e,t,n),s;switch(i=ob(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=HSe(a,o))&&(i.precision=s),YV(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=GSe(a,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=VSe(a))&&(i.precision=s-(i.type==="%")*2);break}}return RM(i)}function Td(e){var t=e.domain;return e.ticks=function(n){var i=t();return ZP(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var a=t();return QV(a[0],a[a.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),a=0,s=i.length-1,o=i[a],l=i[s],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);f-- >0;){if(u=eO(o,l,n),u===c)return i[a]=o,i[s]=l,t(i);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function pS(){var e=MM();return e.copy=function(){return i0(e,pS())},oo.apply(e,arguments),Td(e)}function XV(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,hS),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return XV(e).unknown(t)},e=arguments.length?Array.from(e,hS):[0,1],Td(n)}function JV(e,t){e=e.slice();var n=0,i=e.length-1,a=e[n],s=e[i],o;return s<a&&(o=n,n=i,i=o,o=a,a=s,s=o),e[n]=t.floor(a),e[i]=t.ceil(s),e}function g$(e){return Math.log(e)}function y$(e){return Math.exp(e)}function WSe(e){return-Math.log(-e)}function KSe(e){return-Math.exp(-e)}function YSe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function QSe(e){return e===10?YSe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function XSe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function x$(e){return(t,n)=>-e(-t,n)}function LM(e){const t=e(g$,y$),n=t.domain;let i=10,a,s;function o(){return a=XSe(i),s=QSe(i),n()[0]<0?(a=x$(a),s=x$(s),e(WSe,KSe)):e(g$,y$),t}return t.base=function(l){return arguments.length?(i=+l,o()):i},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],f=c[c.length-1];const p=f<u;p&&([u,f]=[f,u]);let g=a(u),x=a(f),v,j;const w=l==null?10:+l;let _=[];if(!(i%1)&&x-g<w){if(g=Math.floor(g),x=Math.ceil(x),u>0){for(;g<=x;++g)for(v=1;v<i;++v)if(j=g<0?v/s(-g):v*s(g),!(j<u)){if(j>f)break;_.push(j)}}else for(;g<=x;++g)for(v=i-1;v>=1;--v)if(j=g>0?v/s(-g):v*s(g),!(j<u)){if(j>f)break;_.push(j)}_.length*2<w&&(_=ZP(u,f,w))}else _=ZP(g,x,Math.min(x-g,w)).map(s);return p?_.reverse():_},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=ob(c)).precision==null&&(c.trim=!0),c=RM(c)),l===1/0)return c;const u=Math.max(1,i*l/t.ticks().length);return f=>{let p=f/s(Math.round(a(f)));return p*i<i-.5&&(p*=i),p<=u?c(f):""}},t.nice=()=>n(JV(n(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function ZV(){const e=LM(qN()).domain([1,10]);return e.copy=()=>i0(e,ZV()).base(e.base()),oo.apply(e,arguments),e}function v$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function b$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function FM(e){var t=1,n=e(v$(t),b$(t));return n.constant=function(i){return arguments.length?e(v$(t=+i),b$(t)):t},Td(n)}function eH(){var e=FM(qN());return e.copy=function(){return i0(e,eH()).constant(e.constant())},oo.apply(e,arguments)}function j$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function JSe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ZSe(e){return e<0?-e*e:e*e}function $M(e){var t=e(La,La),n=1;function i(){return n===1?e(La,La):n===.5?e(JSe,ZSe):e(j$(n),j$(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,i()):n},Td(t)}function BM(){var e=$M(qN());return e.copy=function(){return i0(e,BM()).exponent(e.exponent())},oo.apply(e,arguments),e}function eNe(){return BM.apply(null,arguments).exponent(.5)}function w$(e){return Math.sign(e)*e*e}function tNe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function tH(){var e=MM(),t=[0,1],n=!1,i;function a(s){var o=tNe(e(s));return isNaN(o)?i:n?Math.round(o):o}return a.invert=function(s){return e.invert(w$(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,hS)).map(w$)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return tH(e.domain(),t).round(n).clamp(e.clamp()).unknown(i)},oo.apply(a,arguments),Td(a)}function nH(){var e=[],t=[],n=[],i;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=sSe(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?i:t[n0(n,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(pd),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return nH().domain(e).range(t).unknown(i)},oo.apply(s,arguments)}function rH(){var e=0,t=1,n=1,i=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[n0(i,c,0,n)]:s}function l(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return i.slice()},o.copy=function(){return rH().domain([e,t]).range(a).unknown(s)},oo.apply(Td(o),arguments)}function iH(){var e=[.5],t=[0,1],n,i=1;function a(s){return s!=null&&s<=s?t[n0(e,s,0,i)]:n}return a.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return iH().domain(e).range(t).unknown(n)},oo.apply(a,arguments)}const xE=new Date,vE=new Date;function Ti(e,t,n,i){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>Ti(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),n&&(a.count=(s,o)=>(xE.setTime(+s),vE.setTime(+o),e(xE),e(vE),Math.floor(n(xE,vE))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(i?o=>i(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const mS=Ti(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);mS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ti(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):mS);mS.range;const Ac=1e3,no=Ac*60,Ec=no*60,Vc=Ec*24,zM=Vc*7,S$=Vc*30,bE=Vc*365,sf=Ti(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ac)},(e,t)=>(t-e)/Ac,e=>e.getUTCSeconds());sf.range;const qM=Ti(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ac)},(e,t)=>{e.setTime(+e+t*no)},(e,t)=>(t-e)/no,e=>e.getMinutes());qM.range;const UM=Ti(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*no)},(e,t)=>(t-e)/no,e=>e.getUTCMinutes());UM.range;const VM=Ti(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ac-e.getMinutes()*no)},(e,t)=>{e.setTime(+e+t*Ec)},(e,t)=>(t-e)/Ec,e=>e.getHours());VM.range;const HM=Ti(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ec)},(e,t)=>(t-e)/Ec,e=>e.getUTCHours());HM.range;const a0=Ti(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*no)/Vc,e=>e.getDate()-1);a0.range;const UN=Ti(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vc,e=>e.getUTCDate()-1);UN.range;const aH=Ti(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vc,e=>Math.floor(e/Vc));aH.range;function Vf(e){return Ti(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*no)/zM)}const VN=Vf(0),gS=Vf(1),nNe=Vf(2),rNe=Vf(3),wg=Vf(4),iNe=Vf(5),aNe=Vf(6);VN.range;gS.range;nNe.range;rNe.range;wg.range;iNe.range;aNe.range;function Hf(e){return Ti(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/zM)}const HN=Hf(0),yS=Hf(1),sNe=Hf(2),oNe=Hf(3),Sg=Hf(4),lNe=Hf(5),cNe=Hf(6);HN.range;yS.range;sNe.range;oNe.range;Sg.range;lNe.range;cNe.range;const GM=Ti(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());GM.range;const WM=Ti(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());WM.range;const Hc=Ti(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Hc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ti(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Hc.range;const Gc=Ti(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Gc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ti(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Gc.range;function sH(e,t,n,i,a,s){const o=[[sf,1,Ac],[sf,5,5*Ac],[sf,15,15*Ac],[sf,30,30*Ac],[s,1,no],[s,5,5*no],[s,15,15*no],[s,30,30*no],[a,1,Ec],[a,3,3*Ec],[a,6,6*Ec],[a,12,12*Ec],[i,1,Vc],[i,2,2*Vc],[n,1,zM],[t,1,S$],[t,3,3*S$],[e,1,bE]];function l(u,f,p){const g=f<u;g&&([u,f]=[f,u]);const x=p&&typeof p.range=="function"?p:c(u,f,p),v=x?x.range(u,+f+1):[];return g?v.reverse():v}function c(u,f,p){const g=Math.abs(f-u)/p,x=EM(([,,w])=>w).right(o,g);if(x===o.length)return e.every(tO(u/bE,f/bE,p));if(x===0)return mS.every(Math.max(tO(u,f,p),1));const[v,j]=o[g/o[x-1][2]<o[x][2]/g?x-1:x];return v.every(j)}return[l,c]}const[uNe,dNe]=sH(Gc,WM,HN,aH,HM,UM),[hNe,fNe]=sH(Hc,GM,VN,a0,VM,qM);function jE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function uv(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function pNe(e){var t=e.dateTime,n=e.date,i=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=dv(a),f=hv(a),p=dv(s),g=hv(s),x=dv(o),v=hv(o),j=dv(l),w=hv(l),_=dv(c),T=hv(c),C={a:W,A:ae,b:G,B:z,c:null,d:E$,e:E$,f:LNe,g:WNe,G:YNe,H:MNe,I:INe,j:RNe,L:oH,m:FNe,M:$Ne,p:le,q:je,Q:O$,s:D$,S:BNe,u:zNe,U:qNe,V:UNe,w:VNe,W:HNe,x:null,X:null,y:GNe,Y:KNe,Z:QNe,"%":P$},O={a:Y,A:Oe,b:Ke,B:Me,c:null,d:k$,e:k$,f:e_e,g:u_e,G:h_e,H:XNe,I:JNe,j:ZNe,L:cH,m:t_e,M:n_e,p:Ie,q:be,Q:O$,s:D$,S:r_e,u:i_e,U:a_e,V:s_e,w:o_e,W:l_e,x:null,X:null,y:c_e,Y:d_e,Z:f_e,"%":P$},A={a:$,A:L,b:V,B:H,c:te,d:T$,e:T$,f:kNe,g:C$,G:_$,H:A$,I:A$,j:CNe,L:ENe,m:_Ne,M:TNe,p:B,q:NNe,Q:ONe,s:DNe,S:ANe,u:vNe,U:bNe,V:jNe,w:xNe,W:wNe,x:X,X:q,y:C$,Y:_$,Z:SNe,"%":PNe};C.x=P(n,C),C.X=P(i,C),C.c=P(t,C),O.x=P(n,O),O.X=P(i,O),O.c=P(t,O);function P(re,ve){return function(ce){var fe=[],se=-1,Q=0,ie=re.length,ge,ee,we;for(ce instanceof Date||(ce=new Date(+ce));++se<ie;)re.charCodeAt(se)===37&&(fe.push(re.slice(Q,se)),(ee=N$[ge=re.charAt(++se)])!=null?ge=re.charAt(++se):ee=ge==="e"?" ":"0",(we=ve[ge])&&(ge=we(ce,ee)),fe.push(ge),Q=se+1);return fe.push(re.slice(Q,se)),fe.join("")}}function I(re,ve){return function(ce){var fe=uv(1900,void 0,1),se=F(fe,re,ce+="",0),Q,ie;if(se!=ce.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(ve&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Q=wE(uv(fe.y,0,1)),ie=Q.getUTCDay(),Q=ie>4||ie===0?yS.ceil(Q):yS(Q),Q=UN.offset(Q,(fe.V-1)*7),fe.y=Q.getUTCFullYear(),fe.m=Q.getUTCMonth(),fe.d=Q.getUTCDate()+(fe.w+6)%7):(Q=jE(uv(fe.y,0,1)),ie=Q.getDay(),Q=ie>4||ie===0?gS.ceil(Q):gS(Q),Q=a0.offset(Q,(fe.V-1)*7),fe.y=Q.getFullYear(),fe.m=Q.getMonth(),fe.d=Q.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),ie="Z"in fe?wE(uv(fe.y,0,1)).getUTCDay():jE(uv(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(ie+5)%7:fe.w+fe.U*7-(ie+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,wE(fe)):jE(fe)}}function F(re,ve,ce,fe){for(var se=0,Q=ve.length,ie=ce.length,ge,ee;se<Q;){if(fe>=ie)return-1;if(ge=ve.charCodeAt(se++),ge===37){if(ge=ve.charAt(se++),ee=A[ge in N$?ve.charAt(se++):ge],!ee||(fe=ee(re,ce,fe))<0)return-1}else if(ge!=ce.charCodeAt(fe++))return-1}return fe}function B(re,ve,ce){var fe=u.exec(ve.slice(ce));return fe?(re.p=f.get(fe[0].toLowerCase()),ce+fe[0].length):-1}function $(re,ve,ce){var fe=x.exec(ve.slice(ce));return fe?(re.w=v.get(fe[0].toLowerCase()),ce+fe[0].length):-1}function L(re,ve,ce){var fe=p.exec(ve.slice(ce));return fe?(re.w=g.get(fe[0].toLowerCase()),ce+fe[0].length):-1}function V(re,ve,ce){var fe=_.exec(ve.slice(ce));return fe?(re.m=T.get(fe[0].toLowerCase()),ce+fe[0].length):-1}function H(re,ve,ce){var fe=j.exec(ve.slice(ce));return fe?(re.m=w.get(fe[0].toLowerCase()),ce+fe[0].length):-1}function te(re,ve,ce){return F(re,t,ve,ce)}function X(re,ve,ce){return F(re,n,ve,ce)}function q(re,ve,ce){return F(re,i,ve,ce)}function W(re){return o[re.getDay()]}function ae(re){return s[re.getDay()]}function G(re){return c[re.getMonth()]}function z(re){return l[re.getMonth()]}function le(re){return a[+(re.getHours()>=12)]}function je(re){return 1+~~(re.getMonth()/3)}function Y(re){return o[re.getUTCDay()]}function Oe(re){return s[re.getUTCDay()]}function Ke(re){return c[re.getUTCMonth()]}function Me(re){return l[re.getUTCMonth()]}function Ie(re){return a[+(re.getUTCHours()>=12)]}function be(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var ve=P(re+="",C);return ve.toString=function(){return re},ve},parse:function(re){var ve=I(re+="",!1);return ve.toString=function(){return re},ve},utcFormat:function(re){var ve=P(re+="",O);return ve.toString=function(){return re},ve},utcParse:function(re){var ve=I(re+="",!0);return ve.toString=function(){return re},ve}}}var N$={"-":"",_:" ",0:"0"},Ri=/^\s*\d+/,mNe=/^%/,gNe=/[\\^$*+?|[\]().{}]/g;function Qn(e,t,n){var i=e<0?"-":"",a=(i?-e:e)+"",s=a.length;return i+(s<n?new Array(n-s+1).join(t)+a:a)}function yNe(e){return e.replace(gNe,"\\$&")}function dv(e){return new RegExp("^(?:"+e.map(yNe).join("|")+")","i")}function hv(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function xNe(e,t,n){var i=Ri.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function vNe(e,t,n){var i=Ri.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function bNe(e,t,n){var i=Ri.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function jNe(e,t,n){var i=Ri.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function wNe(e,t,n){var i=Ri.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function _$(e,t,n){var i=Ri.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function C$(e,t,n){var i=Ri.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function SNe(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function NNe(e,t,n){var i=Ri.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function _Ne(e,t,n){var i=Ri.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function T$(e,t,n){var i=Ri.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function CNe(e,t,n){var i=Ri.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function A$(e,t,n){var i=Ri.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function TNe(e,t,n){var i=Ri.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function ANe(e,t,n){var i=Ri.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function ENe(e,t,n){var i=Ri.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function kNe(e,t,n){var i=Ri.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function PNe(e,t,n){var i=mNe.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function ONe(e,t,n){var i=Ri.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function DNe(e,t,n){var i=Ri.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function E$(e,t){return Qn(e.getDate(),t,2)}function MNe(e,t){return Qn(e.getHours(),t,2)}function INe(e,t){return Qn(e.getHours()%12||12,t,2)}function RNe(e,t){return Qn(1+a0.count(Hc(e),e),t,3)}function oH(e,t){return Qn(e.getMilliseconds(),t,3)}function LNe(e,t){return oH(e,t)+"000"}function FNe(e,t){return Qn(e.getMonth()+1,t,2)}function $Ne(e,t){return Qn(e.getMinutes(),t,2)}function BNe(e,t){return Qn(e.getSeconds(),t,2)}function zNe(e){var t=e.getDay();return t===0?7:t}function qNe(e,t){return Qn(VN.count(Hc(e)-1,e),t,2)}function lH(e){var t=e.getDay();return t>=4||t===0?wg(e):wg.ceil(e)}function UNe(e,t){return e=lH(e),Qn(wg.count(Hc(e),e)+(Hc(e).getDay()===4),t,2)}function VNe(e){return e.getDay()}function HNe(e,t){return Qn(gS.count(Hc(e)-1,e),t,2)}function GNe(e,t){return Qn(e.getFullYear()%100,t,2)}function WNe(e,t){return e=lH(e),Qn(e.getFullYear()%100,t,2)}function KNe(e,t){return Qn(e.getFullYear()%1e4,t,4)}function YNe(e,t){var n=e.getDay();return e=n>=4||n===0?wg(e):wg.ceil(e),Qn(e.getFullYear()%1e4,t,4)}function QNe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qn(t/60|0,"0",2)+Qn(t%60,"0",2)}function k$(e,t){return Qn(e.getUTCDate(),t,2)}function XNe(e,t){return Qn(e.getUTCHours(),t,2)}function JNe(e,t){return Qn(e.getUTCHours()%12||12,t,2)}function ZNe(e,t){return Qn(1+UN.count(Gc(e),e),t,3)}function cH(e,t){return Qn(e.getUTCMilliseconds(),t,3)}function e_e(e,t){return cH(e,t)+"000"}function t_e(e,t){return Qn(e.getUTCMonth()+1,t,2)}function n_e(e,t){return Qn(e.getUTCMinutes(),t,2)}function r_e(e,t){return Qn(e.getUTCSeconds(),t,2)}function i_e(e){var t=e.getUTCDay();return t===0?7:t}function a_e(e,t){return Qn(HN.count(Gc(e)-1,e),t,2)}function uH(e){var t=e.getUTCDay();return t>=4||t===0?Sg(e):Sg.ceil(e)}function s_e(e,t){return e=uH(e),Qn(Sg.count(Gc(e),e)+(Gc(e).getUTCDay()===4),t,2)}function o_e(e){return e.getUTCDay()}function l_e(e,t){return Qn(yS.count(Gc(e)-1,e),t,2)}function c_e(e,t){return Qn(e.getUTCFullYear()%100,t,2)}function u_e(e,t){return e=uH(e),Qn(e.getUTCFullYear()%100,t,2)}function d_e(e,t){return Qn(e.getUTCFullYear()%1e4,t,4)}function h_e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Sg(e):Sg.ceil(e),Qn(e.getUTCFullYear()%1e4,t,4)}function f_e(){return"+0000"}function P$(){return"%"}function O$(e){return+e}function D$(e){return Math.floor(+e/1e3)}var Am,dH,hH;p_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function p_e(e){return Am=pNe(e),dH=Am.format,Am.parse,hH=Am.utcFormat,Am.utcParse,Am}function m_e(e){return new Date(e)}function g_e(e){return e instanceof Date?+e:+new Date(+e)}function KM(e,t,n,i,a,s,o,l,c,u){var f=MM(),p=f.invert,g=f.domain,x=u(".%L"),v=u(":%S"),j=u("%I:%M"),w=u("%I %p"),_=u("%a %d"),T=u("%b %d"),C=u("%B"),O=u("%Y");function A(P){return(c(P)<P?x:l(P)<P?v:o(P)<P?j:s(P)<P?w:i(P)<P?a(P)<P?_:T:n(P)<P?C:O)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?g(Array.from(P,g_e)):g().map(m_e)},f.ticks=function(P){var I=g();return e(I[0],I[I.length-1],P??10)},f.tickFormat=function(P,I){return I==null?A:u(I)},f.nice=function(P){var I=g();return(!P||typeof P.range!="function")&&(P=t(I[0],I[I.length-1],P??10)),P?g(JV(I,P)):f},f.copy=function(){return i0(f,KM(e,t,n,i,a,s,o,l,c,u))},f}function y_e(){return oo.apply(KM(hNe,fNe,Hc,GM,VN,a0,VM,qM,sf,dH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function x_e(){return oo.apply(KM(uNe,dNe,Gc,WM,HN,UN,HM,UM,sf,hH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function GN(){var e=0,t=1,n,i,a,s,o=La,l=!1,c;function u(p){return p==null||isNaN(p=+p)?c:o(a===0?.5:(p=(s(p)-n)*a,l?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([e,t]=p,n=s(e=+e),i=s(t=+t),a=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(p){return arguments.length?(l=!!p,u):l},u.interpolator=function(p){return arguments.length?(o=p,u):o};function f(p){return function(g){var x,v;return arguments.length?([x,v]=g,o=p(x,v),u):[o(0),o(1)]}}return u.range=f(ny),u.rangeRound=f(DM),u.unknown=function(p){return arguments.length?(c=p,u):c},function(p){return s=p,n=p(e),i=p(t),a=n===i?0:1/(i-n),u}}function Ad(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fH(){var e=Td(GN()(La));return e.copy=function(){return Ad(e,fH())},Zc.apply(e,arguments)}function pH(){var e=LM(GN()).domain([1,10]);return e.copy=function(){return Ad(e,pH()).base(e.base())},Zc.apply(e,arguments)}function mH(){var e=FM(GN());return e.copy=function(){return Ad(e,mH()).constant(e.constant())},Zc.apply(e,arguments)}function YM(){var e=$M(GN());return e.copy=function(){return Ad(e,YM()).exponent(e.exponent())},Zc.apply(e,arguments)}function v_e(){return YM.apply(null,arguments).exponent(.5)}function gH(){var e=[],t=La;function n(i){if(i!=null&&!isNaN(i=+i))return t((n0(e,i,1)-1)/(e.length-1))}return n.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let a of i)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(pd),n},n.interpolator=function(i){return arguments.length?(t=i,n):t},n.range=function(){return e.map((i,a)=>t(a/(e.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(a,s)=>aSe(e,s/i))},n.copy=function(){return gH(t).domain(e)},Zc.apply(n,arguments)}function WN(){var e=0,t=.5,n=1,i=1,a,s,o,l,c,u=La,f,p=!1,g;function x(j){return isNaN(j=+j)?g:(j=.5+((j=+f(j))-s)*(i*j<i*s?l:c),u(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,n]=j,a=f(e=+e),s=f(t=+t),o=f(n=+n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),i=s<a?-1:1,x):[e,t,n]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(u=j,x):u};function v(j){return function(w){var _,T,C;return arguments.length?([_,T,C]=w,u=PSe(j,[_,T,C]),x):[u(0),u(.5),u(1)]}}return x.range=v(ny),x.rangeRound=v(DM),x.unknown=function(j){return arguments.length?(g=j,x):g},function(j){return f=j,a=j(e),s=j(t),o=j(n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),i=s<a?-1:1,x}}function yH(){var e=Td(WN()(La));return e.copy=function(){return Ad(e,yH())},Zc.apply(e,arguments)}function xH(){var e=LM(WN()).domain([.1,1,10]);return e.copy=function(){return Ad(e,xH()).base(e.base())},Zc.apply(e,arguments)}function vH(){var e=FM(WN());return e.copy=function(){return Ad(e,vH()).constant(e.constant())},Zc.apply(e,arguments)}function QM(){var e=$M(WN());return e.copy=function(){return Ad(e,QM()).exponent(e.exponent())},Zc.apply(e,arguments)}function b_e(){return QM.apply(null,arguments).exponent(.5)}const M$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:rb,scaleDiverging:yH,scaleDivergingLog:xH,scaleDivergingPow:QM,scaleDivergingSqrt:b_e,scaleDivergingSymlog:vH,scaleIdentity:XV,scaleImplicit:nO,scaleLinear:pS,scaleLog:ZV,scaleOrdinal:kM,scalePoint:Mv,scalePow:BM,scaleQuantile:nH,scaleQuantize:rH,scaleRadial:tH,scaleSequential:fH,scaleSequentialLog:pH,scaleSequentialPow:YM,scaleSequentialQuantile:gH,scaleSequentialSqrt:v_e,scaleSequentialSymlog:mH,scaleSqrt:eNe,scaleSymlog:eH,scaleThreshold:iH,scaleTime:y_e,scaleUtc:x_e,tickFormat:QV},Symbol.toStringTag,{value:"Module"}));var SE,I$;function KN(){if(I$)return SE;I$=1;var e=Jg();function t(n,i,a){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=i(l);if(c!=null&&(u===void 0?c===c&&!e(c):a(c,u)))var u=c,f=l}return f}return SE=t,SE}var NE,R$;function bH(){if(R$)return NE;R$=1;function e(t,n){return t>n}return NE=e,NE}var _E,L$;function j_e(){if(L$)return _E;L$=1;var e=KN(),t=bH(),n=ty();function i(a){return a&&a.length?e(a,n,t):void 0}return _E=i,_E}var w_e=j_e();const dd=qn(w_e);var CE,F$;function jH(){if(F$)return CE;F$=1;function e(t,n){return t<n}return CE=e,CE}var TE,$$;function S_e(){if($$)return TE;$$=1;var e=KN(),t=jH(),n=ty();function i(a){return a&&a.length?e(a,n,t):void 0}return TE=i,TE}var N_e=S_e();const YN=qn(N_e);var AE,B$;function __e(){if(B$)return AE;B$=1;var e=hM(),t=Ul(),n=EV(),i=hs();function a(s,o){var l=i(s)?e:n;return l(s,t(o,3))}return AE=a,AE}var EE,z$;function C_e(){if(z$)return EE;z$=1;var e=TV(),t=__e();function n(i,a){return e(t(i,a),1)}return EE=n,EE}var T_e=C_e();const A_e=qn(T_e);var kE,q$;function E_e(){if(q$)return kE;q$=1;var e=_M();function t(n,i){return e(n,i)}return kE=t,kE}var k_e=E_e();const Rf=qn(k_e);var ry=1e9,P_e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},JM,Ur=!0,ao="[DecimalError] ",bf=ao+"Invalid argument: ",XM=ao+"Exponent out of range: ",iy=Math.floor,Qh=Math.pow,O_e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Es,Di=1e7,Fr=7,wH=9007199254740991,xS=iy(wH/Fr),Mt={};Mt.absoluteValue=Mt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Mt.comparedTo=Mt.cmp=function(e){var t,n,i,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(i=s.d.length,a=e.d.length,t=0,n=i<a?i:a;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return i===a?0:i>a^s.s<0?1:-1};Mt.decimalPlaces=Mt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Fr;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Mt.dividedBy=Mt.div=function(e){return Rc(this,new this.constructor(e))};Mt.dividedToIntegerBy=Mt.idiv=function(e){var t=this,n=t.constructor;return Cr(Rc(t,new n(e),0,1),n.precision)};Mt.equals=Mt.eq=function(e){return!this.cmp(e)};Mt.exponent=function(){return xi(this)};Mt.greaterThan=Mt.gt=function(e){return this.cmp(e)>0};Mt.greaterThanOrEqualTo=Mt.gte=function(e){return this.cmp(e)>=0};Mt.isInteger=Mt.isint=function(){return this.e>this.d.length-2};Mt.isNegative=Mt.isneg=function(){return this.s<0};Mt.isPositive=Mt.ispos=function(){return this.s>0};Mt.isZero=function(){return this.s===0};Mt.lessThan=Mt.lt=function(e){return this.cmp(e)<0};Mt.lessThanOrEqualTo=Mt.lte=function(e){return this.cmp(e)<1};Mt.logarithm=Mt.log=function(e){var t,n=this,i=n.constructor,a=i.precision,s=a+5;if(e===void 0)e=new i(10);else if(e=new i(e),e.s<1||e.eq(Es))throw Error(ao+"NaN");if(n.s<1)throw Error(ao+(n.s?"NaN":"-Infinity"));return n.eq(Es)?new i(0):(Ur=!1,t=Rc(lb(n,s),lb(e,s),s),Ur=!0,Cr(t,a))};Mt.minus=Mt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_H(t,e):SH(t,(e.s=-e.s,e))};Mt.modulo=Mt.mod=function(e){var t,n=this,i=n.constructor,a=i.precision;if(e=new i(e),!e.s)throw Error(ao+"NaN");return n.s?(Ur=!1,t=Rc(n,e,0,1).times(e),Ur=!0,n.minus(t)):Cr(new i(n),a)};Mt.naturalExponential=Mt.exp=function(){return NH(this)};Mt.naturalLogarithm=Mt.ln=function(){return lb(this)};Mt.negated=Mt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Mt.plus=Mt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?SH(t,e):_H(t,(e.s=-e.s,e))};Mt.precision=Mt.sd=function(e){var t,n,i,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(bf+e);if(t=xi(a)+1,i=a.d.length-1,n=i*Fr+1,i=a.d[i],i){for(;i%10==0;i/=10)n--;for(i=a.d[0];i>=10;i/=10)n++}return e&&t>n?t:n};Mt.squareRoot=Mt.sqrt=function(){var e,t,n,i,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ao+"NaN")}for(e=xi(l),Ur=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Ol(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=iy((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),i=new c(t)):i=new c(a.toString()),n=c.precision,a=o=n+3;;)if(s=i,i=s.plus(Rc(l,s,o+2)).times(.5),Ol(s.d).slice(0,o)===(t=Ol(i.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Cr(s,n+1,0),s.times(s).eq(l)){i=s;break}}else if(t!="9999")break;o+=4}return Ur=!0,Cr(i,n)};Mt.times=Mt.mul=function(e){var t,n,i,a,s,o,l,c,u,f=this,p=f.constructor,g=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,n=f.e+e.e,c=g.length,u=x.length,c<u&&(s=g,g=x,x=s,o=c,c=u,u=o),s=[],o=c+u,i=o;i--;)s.push(0);for(i=u;--i>=0;){for(t=0,a=c+i;a>i;)l=s[a]+x[i]*g[a-i-1]+t,s[a--]=l%Di|0,t=l/Di|0;s[a]=(s[a]+t)%Di|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Ur?Cr(e,p.precision):e};Mt.toDecimalPlaces=Mt.todp=function(e,t){var n=this,i=n.constructor;return n=new i(n),e===void 0?n:($l(e,0,ry),t===void 0?t=i.rounding:$l(t,0,8),Cr(n,e+xi(n)+1,t))};Mt.toExponential=function(e,t){var n,i=this,a=i.constructor;return e===void 0?n=Lf(i,!0):($l(e,0,ry),t===void 0?t=a.rounding:$l(t,0,8),i=Cr(new a(i),e+1,t),n=Lf(i,!0,e+1)),n};Mt.toFixed=function(e,t){var n,i,a=this,s=a.constructor;return e===void 0?Lf(a):($l(e,0,ry),t===void 0?t=s.rounding:$l(t,0,8),i=Cr(new s(a),e+xi(a)+1,t),n=Lf(i.abs(),!1,e+xi(i)+1),a.isneg()&&!a.isZero()?"-"+n:n)};Mt.toInteger=Mt.toint=function(){var e=this,t=e.constructor;return Cr(new t(e),xi(e)+1,t.rounding)};Mt.toNumber=function(){return+this};Mt.toPower=Mt.pow=function(e){var t,n,i,a,s,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(Es);if(l=new c(l),!l.s){if(e.s<1)throw Error(ao+"Infinity");return l}if(l.eq(Es))return l;if(i=c.precision,e.eq(Es))return Cr(l,i);if(t=e.e,n=e.d.length-1,o=t>=n,s=l.s,o){if((n=f<0?-f:f)<=wH){for(a=new c(Es),t=Math.ceil(i/Fr+4),Ur=!1;n%2&&(a=a.times(l),V$(a.d,t)),n=iy(n/2),n!==0;)l=l.times(l),V$(l.d,t);return Ur=!0,e.s<0?new c(Es).div(a):Cr(a,i)}}else if(s<0)throw Error(ao+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Ur=!1,a=e.times(lb(l,i+u)),Ur=!0,a=NH(a),a.s=s,a};Mt.toPrecision=function(e,t){var n,i,a=this,s=a.constructor;return e===void 0?(n=xi(a),i=Lf(a,n<=s.toExpNeg||n>=s.toExpPos)):($l(e,1,ry),t===void 0?t=s.rounding:$l(t,0,8),a=Cr(new s(a),e,t),n=xi(a),i=Lf(a,e<=n||n<=s.toExpNeg,e)),i};Mt.toSignificantDigits=Mt.tosd=function(e,t){var n=this,i=n.constructor;return e===void 0?(e=i.precision,t=i.rounding):($l(e,1,ry),t===void 0?t=i.rounding:$l(t,0,8)),Cr(new i(n),e,t)};Mt.toString=Mt.valueOf=Mt.val=Mt.toJSON=Mt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=xi(e),n=e.constructor;return Lf(e,t<=n.toExpNeg||t>=n.toExpPos)};function SH(e,t){var n,i,a,s,o,l,c,u,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Ur?Cr(t,p):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(i=c,s=-s,l=u.length):(i=u,a=o,l=c.length),o=Math.ceil(p/Fr),l=o>l?o+1:l+1,s>l&&(s=l,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,i=u,u=c,c=i),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/Di|0,c[s]%=Di;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Ur?Cr(t,p):t}function $l(e,t,n){if(e!==~~e||e<t||e>n)throw Error(bf+e)}function Ol(e){var t,n,i,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)i=e[t]+"",n=Fr-i.length,n&&(s+=Zu(n)),s+=i;o=e[t],i=o+"",n=Fr-i.length,n&&(s+=Zu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Rc=function(){function e(i,a){var s,o=0,l=i.length;for(i=i.slice();l--;)s=i[l]*a+o,i[l]=s%Di|0,o=s/Di|0;return o&&i.unshift(o),i}function t(i,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(i[l]!=a[l]){c=i[l]>a[l]?1:-1;break}return c}function n(i,a,s){for(var o=0;s--;)i[s]-=o,o=i[s]<a[s]?1:0,i[s]=o*Di+i[s]-a[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,a,s,o){var l,c,u,f,p,g,x,v,j,w,_,T,C,O,A,P,I,F,B=i.constructor,$=i.s==a.s?1:-1,L=i.d,V=a.d;if(!i.s)return new B(i);if(!a.s)throw Error(ao+"Division by zero");for(c=i.e-a.e,I=V.length,A=L.length,x=new B($),v=x.d=[],u=0;V[u]==(L[u]||0);)++u;if(V[u]>(L[u]||0)&&--c,s==null?T=s=B.precision:o?T=s+(xi(i)-xi(a))+1:T=s,T<0)return new B(0);if(T=T/Fr+2|0,u=0,I==1)for(f=0,V=V[0],T++;(u<A||f)&&T--;u++)C=f*Di+(L[u]||0),v[u]=C/V|0,f=C%V|0;else{for(f=Di/(V[0]+1)|0,f>1&&(V=e(V,f),L=e(L,f),I=V.length,A=L.length),O=I,j=L.slice(0,I),w=j.length;w<I;)j[w++]=0;F=V.slice(),F.unshift(0),P=V[0],V[1]>=Di/2&&++P;do f=0,l=t(V,j,I,w),l<0?(_=j[0],I!=w&&(_=_*Di+(j[1]||0)),f=_/P|0,f>1?(f>=Di&&(f=Di-1),p=e(V,f),g=p.length,w=j.length,l=t(p,j,g,w),l==1&&(f--,n(p,I<g?F:V,g))):(f==0&&(l=f=1),p=V.slice()),g=p.length,g<w&&p.unshift(0),n(j,p,w),l==-1&&(w=j.length,l=t(V,j,I,w),l<1&&(f++,n(j,I<w?F:V,w))),w=j.length):l===0&&(f++,j=[0]),v[u++]=f,l&&j[0]?j[w++]=L[O]||0:(j=[L[O]],w=1);while((O++<A||j[0]!==void 0)&&T--)}return v[0]||v.shift(),x.e=c,Cr(x,o?s+xi(x)+1:s)}}();function NH(e,t){var n,i,a,s,o,l,c=0,u=0,f=e.constructor,p=f.precision;if(xi(e)>16)throw Error(XM+xi(e));if(!e.s)return new f(Es);for(Ur=!1,l=p,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(i=Math.log(Qh(2,u))/Math.LN10*2+5|0,l+=i,n=a=s=new f(Es),f.precision=l;;){if(a=Cr(a.times(e),l),n=n.times(++c),o=s.plus(Rc(a,n,l)),Ol(o.d).slice(0,l)===Ol(s.d).slice(0,l)){for(;u--;)s=Cr(s.times(s),l);return f.precision=p,t==null?(Ur=!0,Cr(s,p)):s}s=o}}function xi(e){for(var t=e.e*Fr,n=e.d[0];n>=10;n/=10)t++;return t}function PE(e,t,n){if(t>e.LN10.sd())throw Ur=!0,n&&(e.precision=n),Error(ao+"LN10 precision limit exceeded");return Cr(new e(e.LN10),t)}function Zu(e){for(var t="";e--;)t+="0";return t}function lb(e,t){var n,i,a,s,o,l,c,u,f,p=1,g=10,x=e,v=x.d,j=x.constructor,w=j.precision;if(x.s<1)throw Error(ao+(x.s?"NaN":"-Infinity"));if(x.eq(Es))return new j(0);if(t==null?(Ur=!1,u=w):u=t,x.eq(10))return t==null&&(Ur=!0),PE(j,u);if(u+=g,j.precision=u,n=Ol(v),i=n.charAt(0),s=xi(x),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)x=x.times(e),n=Ol(x.d),i=n.charAt(0),p++;s=xi(x),i>1?(x=new j("0."+n),s++):x=new j(i+"."+n.slice(1))}else return c=PE(j,u+2,w).times(s+""),x=lb(new j(i+"."+n.slice(1)),u-g).plus(c),j.precision=w,t==null?(Ur=!0,Cr(x,w)):x;for(l=o=x=Rc(x.minus(Es),x.plus(Es),u),f=Cr(x.times(x),u),a=3;;){if(o=Cr(o.times(f),u),c=l.plus(Rc(o,new j(a),u)),Ol(c.d).slice(0,u)===Ol(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(PE(j,u+2,w).times(s+""))),l=Rc(l,new j(p),u),j.precision=w,t==null?(Ur=!0,Cr(l,w)):l;l=c,a+=2}}function U$(e,t){var n,i,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charCodeAt(i)===48;)++i;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(i,a),t){if(a-=i,n=n-i-1,e.e=iy(n/Fr),e.d=[],i=(n+1)%Fr,n<0&&(i+=Fr),i<a){for(i&&e.d.push(+t.slice(0,i)),a-=Fr;i<a;)e.d.push(+t.slice(i,i+=Fr));t=t.slice(i),i=Fr-t.length}else i-=a;for(;i--;)t+="0";if(e.d.push(+t),Ur&&(e.e>xS||e.e<-xS))throw Error(XM+n)}else e.s=0,e.e=0,e.d=[0];return e}function Cr(e,t,n){var i,a,s,o,l,c,u,f,p=e.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(i=t-o,i<0)i+=Fr,a=t,u=p[f=0];else{if(f=Math.ceil((i+1)/Fr),s=p.length,f>=s)return e;for(u=s=p[f],o=1;s>=10;s/=10)o++;i%=Fr,a=i-Fr+o}if(n!==void 0&&(s=Qh(10,o-a-1),l=u/s%10|0,c=t<0||p[f+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(i>0?a>0?u/Qh(10,o-a):0:p[f-1])%10&1||n==(e.s<0?8:7))),t<1||!p[0])return c?(s=xi(e),p.length=1,t=t-s-1,p[0]=Qh(10,(Fr-t%Fr)%Fr),e.e=iy(-t/Fr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(i==0?(p.length=f,s=1,f--):(p.length=f+1,s=Qh(10,Fr-i),p[f]=a>0?(u/Qh(10,o-a)%Qh(10,a)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==Di&&(p[0]=1,++e.e);break}else{if(p[f]+=s,p[f]!=Di)break;p[f--]=0,s=1}for(i=p.length;p[--i]===0;)p.pop();if(Ur&&(e.e>xS||e.e<-xS))throw Error(XM+xi(e));return e}function _H(e,t){var n,i,a,s,o,l,c,u,f,p,g=e.constructor,x=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),Ur?Cr(t,x):t;if(c=e.d,p=t.d,i=t.e,u=e.e,c=c.slice(),o=u-i,o){for(f=o<0,f?(n=c,o=-o,l=p.length):(n=p,i=u,l=c.length),a=Math.max(Math.ceil(x/Fr),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=p.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(c[a]!=p[a]){f=c[a]<p[a];break}o=0}for(f&&(n=c,c=p,p=n,t.s=-t.s),l=c.length,a=p.length-l;a>0;--a)c[l++]=0;for(a=p.length;a>o;){if(c[--a]<p[a]){for(s=a;s&&c[--s]===0;)c[s]=Di-1;--c[s],c[a]+=Di}c[a]-=p[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(t.d=c,t.e=i,Ur?Cr(t,x):t):new g(0)}function Lf(e,t,n){var i,a=xi(e),s=Ol(e.d),o=s.length;return t?(n&&(i=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Zu(i):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Zu(-a-1)+s,n&&(i=n-o)>0&&(s+=Zu(i))):a>=o?(s+=Zu(a+1-o),n&&(i=n-a-1)>0&&(s=s+"."+Zu(i))):((i=a+1)<o&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-o)>0&&(a+1===o&&(s+="."),s+=Zu(i))),e.s<0?"-"+s:s}function V$(e,t){if(e.length>t)return e.length=t,!0}function CH(e){var t,n,i;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(bf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return U$(o,s.toString())}else if(typeof s!="string")throw Error(bf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,O_e.test(s))U$(o,s);else throw Error(bf+s)}if(a.prototype=Mt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=CH,a.config=a.set=D_e,e===void 0&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<i.length;)e.hasOwnProperty(n=i[t++])||(e[n]=this[n]);return a.config(e),a}function D_e(e){if(!e||typeof e!="object")throw Error(ao+"Object expected");var t,n,i,a=["precision",1,ry,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((i=e[n=a[t]])!==void 0)if(iy(i)===i&&i>=a[t+1]&&i<=a[t+2])this[n]=i;else throw Error(bf+n+": "+i);if((i=e[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(bf+n+": "+i);return this}var JM=CH(P_e);Es=new JM(1);const br=JM;function M_e(e){return F_e(e)||L_e(e)||R_e(e)||I_e()}function I_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R_e(e,t){if(e){if(typeof e=="string")return sO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sO(e,t)}}function L_e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function F_e(e){if(Array.isArray(e))return sO(e)}function sO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var $_e=function(t){return t},TH={},AH=function(t){return t===TH},H$=function(t){return function n(){return arguments.length===0||arguments.length===1&&AH(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},B_e=function e(t,n){return t===1?n:H$(function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==TH}).length;return o>=t?n.apply(void 0,a):e(t-o,H$(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=a.map(function(p){return AH(p)?c.shift():p});return n.apply(void 0,M_e(f).concat(c))}))})},QN=function(t){return B_e(t.length,t)},oO=function(t,n){for(var i=[],a=t;a<n;++a)i[a-t]=a;return i},z_e=QN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),q_e=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!n.length)return $_e;var a=n.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},lO=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},EH=function(t){var n=null,i=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,i=t.apply(void 0,s)),i}};function U_e(e){var t;return e===0?t=1:t=Math.floor(new br(e).abs().log(10).toNumber())+1,t}function V_e(e,t,n){for(var i=new br(e),a=0,s=[];i.lt(t)&&a<1e5;)s.push(i.toNumber()),i=i.add(n),a++;return s}var H_e=QN(function(e,t,n){var i=+e,a=+t;return i+n*(a-i)}),G_e=QN(function(e,t,n){var i=t-+e;return i=i||1/0,(n-e)/i}),W_e=QN(function(e,t,n){var i=t-+e;return i=i||1/0,Math.max(0,Math.min(1,(n-e)/i))});const XN={rangeStep:V_e,getDigitCount:U_e,interpolateNumber:H_e,uninterpolateNumber:G_e,uninterpolateTruncation:W_e};function cO(e){return Q_e(e)||Y_e(e)||kH(e)||K_e()}function K_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y_e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Q_e(e){if(Array.isArray(e))return uO(e)}function cb(e,t){return Z_e(e)||J_e(e,t)||kH(e,t)||X_e()}function X_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kH(e,t){if(e){if(typeof e=="string")return uO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uO(e,t)}}function uO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function J_e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],i=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(i=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));i=!0);}catch(c){a=!0,s=c}finally{try{!i&&o.return!=null&&o.return()}finally{if(a)throw s}}return n}}function Z_e(e){if(Array.isArray(e))return e}function PH(e){var t=cb(e,2),n=t[0],i=t[1],a=n,s=i;return n>i&&(a=i,s=n),[a,s]}function OH(e,t,n){if(e.lte(0))return new br(0);var i=XN.getDigitCount(e.toNumber()),a=new br(10).pow(i),s=e.div(a),o=i!==1?.05:.1,l=new br(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new br(Math.ceil(c))}function eCe(e,t,n){var i=1,a=new br(e);if(!a.isint()&&n){var s=Math.abs(e);s<1?(i=new br(10).pow(XN.getDigitCount(e)-1),a=new br(Math.floor(a.div(i).toNumber())).mul(i)):s>1&&(a=new br(Math.floor(e)))}else e===0?a=new br(Math.floor((t-1)/2)):n||(a=new br(Math.floor(e)));var o=Math.floor((t-1)/2),l=q_e(z_e(function(c){return a.add(new br(c-o).mul(i)).toNumber()}),oO);return l(0,t)}function DH(e,t,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new br(0),tickMin:new br(0),tickMax:new br(0)};var s=OH(new br(t).sub(e).div(n-1),i,a),o;e<=0&&t>=0?o=new br(0):(o=new br(e).add(t).div(2),o=o.sub(new br(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new br(t).sub(o).div(s).toNumber()),u=l+c+1;return u>n?DH(e,t,n,i,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:s,tickMin:o.sub(new br(l).mul(s)),tickMax:o.add(new br(c).mul(s))})}function tCe(e){var t=cb(e,2),n=t[0],i=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=PH([n,i]),c=cb(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var p=f===1/0?[u].concat(cO(oO(0,a-1).map(function(){return 1/0}))):[].concat(cO(oO(0,a-1).map(function(){return-1/0})),[f]);return n>i?lO(p):p}if(u===f)return eCe(u,a,s);var g=DH(u,f,o,s),x=g.step,v=g.tickMin,j=g.tickMax,w=XN.rangeStep(v,j.add(new br(.1).mul(x)),x);return n>i?lO(w):w}function nCe(e,t){var n=cb(e,2),i=n[0],a=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=PH([i,a]),l=cb(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[i,a];if(c===u)return[c];var f=Math.max(t,2),p=OH(new br(u).sub(c).div(f-1),s,0),g=[].concat(cO(XN.rangeStep(new br(c),new br(u).sub(new br(.99).mul(p)),p)),[u]);return i>a?lO(g):g}var rCe=EH(tCe),iCe=EH(nCe),aCe="Invariant failed";function Ff(e,t){throw new Error(aCe)}var sCe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vS.apply(this,arguments)}function oCe(e,t){return dCe(e)||uCe(e,t)||cCe(e,t)||lCe()}function lCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cCe(e,t){if(e){if(typeof e=="string")return G$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G$(e,t)}}function G$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function uCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function dCe(e){if(Array.isArray(e))return e}function hCe(e,t){if(e==null)return{};var n=fCe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function fCe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function pCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mCe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,RH(i.key),i)}}function gCe(e,t,n){return t&&mCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yCe(e,t,n){return t=bS(t),xCe(e,MH()?Reflect.construct(t,n||[],bS(e).constructor):t.apply(e,n))}function xCe(e,t){if(t&&(Ng(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vCe(e)}function vCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MH=function(){return!!e})()}function bS(e){return bS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bS(e)}function bCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dO(e,t)}function dO(e,t){return dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},dO(e,t)}function IH(e,t,n){return t=RH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RH(e){var t=jCe(e,"string");return Ng(t)=="symbol"?t:t+""}function jCe(e,t){if(Ng(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Ng(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var s0=function(e){function t(){return pCe(this,t),yCe(this,t,arguments)}return bCe(t,e),gCe(t,[{key:"render",value:function(){var i=this.props,a=i.offset,s=i.layout,o=i.width,l=i.dataKey,c=i.data,u=i.dataPointFormatter,f=i.xAxis,p=i.yAxis,g=hCe(i,sCe),x=$t(g,!1);this.props.direction==="x"&&f.type!=="number"&&Ff();var v=c.map(function(j){var w=u(j,l),_=w.x,T=w.y,C=w.value,O=w.errorVal;if(!O)return null;var A=[],P,I;if(Array.isArray(O)){var F=oCe(O,2);P=F[0],I=F[1]}else P=I=O;if(s==="vertical"){var B=f.scale,$=T+a,L=$+o,V=$-o,H=B(C-P),te=B(C+I);A.push({x1:te,y1:L,x2:te,y2:V}),A.push({x1:H,y1:$,x2:te,y2:$}),A.push({x1:H,y1:L,x2:H,y2:V})}else if(s==="horizontal"){var X=p.scale,q=_+a,W=q-o,ae=q+o,G=X(C-P),z=X(C+I);A.push({x1:W,y1:z,x2:ae,y2:z}),A.push({x1:q,y1:G,x2:q,y2:z}),A.push({x1:W,y1:G,x2:ae,y2:G})}return Se.createElement(Dn,vS({className:"recharts-errorBar",key:"bar-".concat(A.map(function(le){return"".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)}))},x),A.map(function(le){return Se.createElement("line",vS({},le,{key:"line-".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)}))}))});return Se.createElement(Dn,{className:"recharts-errorBars"},v)}}])}(Se.Component);IH(s0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});IH(s0,"displayName","ErrorBar");function ub(e){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ub(e)}function W$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Gh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W$(Object(n),!0).forEach(function(i){wCe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W$(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function wCe(e,t,n){return t=SCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SCe(e){var t=NCe(e,"string");return ub(t)=="symbol"?t:t+""}function NCe(e,t){if(ub(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(ub(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LH=function(t){var n=t.children,i=t.formattedGraphicalItems,a=t.legendWidth,s=t.legendContent,o=Ts(n,Ic);if(!o)return null;var l=Ic.defaultProps,c=l!==void 0?Gh(Gh({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(i||[]).reduce(function(f,p){var g=p.item,x=p.props,v=x.sectors||x.data||[];return f.concat(v.map(function(j){return{type:o.props.iconType||g.props.legendType,value:j.name,color:j.fill,payload:j}}))},[]):u=(i||[]).map(function(f){var p=f.item,g=p.type.defaultProps,x=g!==void 0?Gh(Gh({},g),p.props):{},v=x.dataKey,j=x.name,w=x.legendType,_=x.hide;return{inactive:_,dataKey:v,type:c.iconType||w||"square",color:ZM(p),value:j||v,payload:x}}),Gh(Gh(Gh({},c),Ic.getWithHeight(o,a)),{},{payload:u,item:o})};function db(e){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},db(e)}function K$(e){return ACe(e)||TCe(e)||CCe(e)||_Ce()}function _Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CCe(e,t){if(e){if(typeof e=="string")return hO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hO(e,t)}}function TCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ACe(e){if(Array.isArray(e))return hO(e)}function hO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Y$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y$(Object(n),!0).forEach(function(i){Ym(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y$(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Ym(e,t,n){return t=ECe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ECe(e){var t=kCe(e,"string");return db(t)=="symbol"?t:t+""}function kCe(e,t){if(db(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(db(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function li(e,t,n){return cn(e)||cn(t)?n:Ci(t)?Ms(e,t,n):tn(t)?t(e):n}function Iv(e,t,n,i){var a=A_e(e,function(l){return li(l,t)});if(n==="number"){var s=a.filter(function(l){return jt(l)||parseFloat(l)});return s.length?[YN(s),dd(s)]:[1/0,-1/0]}var o=i?a.filter(function(l){return!cn(l)}):a;return o.map(function(l){return Ci(l)||l instanceof Date?l:""})}var PCe=function(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=i==null?void 0:i.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var f=u>0?a[u-1].coordinate:a[l-1].coordinate,p=a[u].coordinate,g=u>=l-1?a[0].coordinate:a[u+1].coordinate,x=void 0;if(Ia(p-f)!==Ia(g-p)){var v=[];if(Ia(g-p)===Ia(c[1]-c[0])){x=g;var j=p+c[1]-c[0];v[0]=Math.min(j,(j+f)/2),v[1]=Math.max(j,(j+f)/2)}else{x=f;var w=g+c[1]-c[0];v[0]=Math.min(p,(w+p)/2),v[1]=Math.max(p,(w+p)/2)}var _=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(t>_[0]&&t<=_[1]||t>=v[0]&&t<=v[1]){o=a[u].index;break}}else{var T=Math.min(f,g),C=Math.max(f,g);if(t>(T+p)/2&&t<=(C+p)/2){o=a[u].index;break}}}else for(var O=0;O<l;O++)if(O===0&&t<=(i[O].coordinate+i[O+1].coordinate)/2||O>0&&O<l-1&&t>(i[O].coordinate+i[O-1].coordinate)/2&&t<=(i[O].coordinate+i[O+1].coordinate)/2||O===l-1&&t>(i[O].coordinate+i[O-1].coordinate)/2){o=i[O].index;break}return o},ZM=function(t){var n,i=t,a=i.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Jr(Jr({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},OCe=function(t){var n=t.barSize,i=t.totalSize,a=t.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var f=s[l[c]].stackGroups,p=Object.keys(f),g=0,x=p.length;g<x;g++){var v=f[p[g]],j=v.items,w=v.cateAxisId,_=j.filter(function(I){return Mc(I.type).indexOf("Bar")>=0});if(_&&_.length){var T=_[0].type.defaultProps,C=T!==void 0?Jr(Jr({},T),_[0].props):_[0].props,O=C.barSize,A=C[w];o[A]||(o[A]=[]);var P=cn(O)?n:O;o[A].push({item:_[0],stackList:_.slice(1),barSize:cn(P)?void 0:Ra(P,i,0)})}}return o},DCe=function(t){var n=t.barGap,i=t.barCategoryGap,a=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Ra(n,a,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var g=!1,x=a/c,v=o.reduce(function(O,A){return O+A.barSize||0},0);v+=(c-1)*u,v>=a&&(v-=(c-1)*u,u=0),v>=a&&x>0&&(g=!0,x*=.9,v=c*x);var j=(a-v)/2>>0,w={offset:j-u,size:0};f=o.reduce(function(O,A){var P={item:A.item,position:{offset:w.offset+w.size+u,size:g?x:A.barSize}},I=[].concat(K$(O),[P]);return w=I[I.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(F){I.push({item:F,position:w})}),I},p)}else{var _=Ra(i,a,0,!0);a-2*_-(c-1)*u<=0&&(u=0);var T=(a-2*_-(c-1)*u)/c;T>1&&(T>>=0);var C=l===+l?Math.min(T,l):T;f=o.reduce(function(O,A,P){var I=[].concat(K$(O),[{item:A.item,position:{offset:_+(T+u)*P+(T-C)/2,size:C}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(F){I.push({item:F,position:I[I.length-1].position})}),I},p)}return f},MCe=function(t,n,i,a){var s=i.children,o=i.width,l=i.margin,c=o-(l.left||0)-(l.right||0),u=LH({children:s,legendWidth:c});if(u){var f=a||{},p=f.width,g=f.height,x=u.align,v=u.verticalAlign,j=u.layout;if((j==="vertical"||j==="horizontal"&&v==="middle")&&x!=="center"&&jt(t[x]))return Jr(Jr({},t),{},Ym({},x,t[x]+(p||0)));if((j==="horizontal"||j==="vertical"&&x==="center")&&v!=="middle"&&jt(t[v]))return Jr(Jr({},t),{},Ym({},v,t[v]+(g||0)))}return t},ICe=function(t,n,i){return cn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||i==="x"?n==="xAxis":i==="y"?n==="yAxis":!0},FH=function(t,n,i,a,s){var o=n.props.children,l=Is(o,s0).filter(function(u){return ICe(a,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var p=li(f,i);if(cn(p))return u;var g=Array.isArray(p)?[YN(p),dd(p)]:[p,p],x=c.reduce(function(v,j){var w=li(f,j,0),_=g[0]-Math.abs(Array.isArray(w)?w[0]:w),T=g[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(_,v[0]),Math.max(T,v[1])]},[1/0,-1/0]);return[Math.min(x[0],u[0]),Math.max(x[1],u[1])]},[1/0,-1/0])}return null},RCe=function(t,n,i,a,s){var o=n.map(function(l){return FH(t,l,i,s,a)}).filter(function(l){return!cn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},$H=function(t,n,i,a,s){var o=n.map(function(c){var u=c.props.dataKey;return i==="number"&&u&&FH(t,c,u,a)||Iv(t,u,i,s)});if(i==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,p=u.length;f<p;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},BH=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},zH=function(t,n,i,a){if(a)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===i&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(i),l},kc=function(t,n,i){if(!t)return null;var a=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||i)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ia(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(p){var g=s?s.indexOf(p):p;return{coordinate:a(g)+u,value:p,offset:u}});return f.filter(function(p){return!ey(p.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(p,g){return{coordinate:a(p)+u,value:p,index:g,offset:u}}):a.ticks&&!i?a.ticks(t.tickCount).map(function(p){return{coordinate:a(p)+u,value:p,offset:u}}):a.domain().map(function(p,g){return{coordinate:a(p)+u,value:s?s[p]:p,index:g,offset:u}})},OE=new WeakMap,Xj=function(t,n){if(typeof n!="function")return t;OE.has(t)||OE.set(t,new WeakMap);var i=OE.get(t);if(i.has(n))return i.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return i.set(n,a),a},qH=function(t,n,i){var a=t.scale,s=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:rb(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:pS(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!i)?{scale:Mv(),realScaleType:"point"}:s==="category"?{scale:rb(),realScaleType:"band"}:{scale:pS(),realScaleType:"linear"};if(Df(a)){var c="scale".concat(IN(a));return{scale:(M$[c]||Mv)(),realScaleType:M$[c]?c:"point"}}return tn(a)?{scale:a}:{scale:Mv(),realScaleType:"point"}},Q$=1e-4,UH=function(t){var n=t.domain();if(!(!n||n.length<=2)){var i=n.length,a=t.range(),s=Math.min(a[0],a[1])-Q$,o=Math.max(a[0],a[1])+Q$,l=t(n[0]),c=t(n[i-1]);(l<s||l>o||c<s||c>o)&&t.domain([n[0],n[i-1]])}},LCe=function(t,n){if(!t)return null;for(var i=0,a=t.length;i<a;i++)if(t[i].item===n)return t[i].position;return null},FCe=function(t,n){if(!n||n.length!==2||!jt(n[0])||!jt(n[1]))return t;var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!jt(t[0])||t[0]<i)&&(s[0]=i),(!jt(t[1])||t[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<i&&(s[1]=i),s},$Ce=function(t){var n=t.length;if(!(n<=0))for(var i=0,a=t[0].length;i<a;++i)for(var s=0,o=0,l=0;l<n;++l){var c=ey(t[l][i][1])?t[l][i][0]:t[l][i][1];c>=0?(t[l][i][0]=s,t[l][i][1]=s+c,s=t[l][i][1]):(t[l][i][0]=o,t[l][i][1]=o+c,o=t[l][i][1])}},BCe=function(t){var n=t.length;if(!(n<=0))for(var i=0,a=t[0].length;i<a;++i)for(var s=0,o=0;o<n;++o){var l=ey(t[o][i][1])?t[o][i][0]:t[o][i][1];l>=0?(t[o][i][0]=s,t[o][i][1]=s+l,s=t[o][i][1]):(t[o][i][0]=0,t[o][i][1]=0)}},zCe={sign:$Ce,expand:A0e,none:gg,silhouette:E0e,wiggle:k0e,positive:BCe},qCe=function(t,n,i){var a=n.map(function(l){return l.props.dataKey}),s=zCe[i],o=T0e().keys(a).value(function(l,c){return+li(l,c,0)}).order(qP).offset(s);return o(t)},UCe=function(t,n,i,a,s,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(p,g){var x,v=(x=g.type)!==null&&x!==void 0&&x.defaultProps?Jr(Jr({},g.type.defaultProps),g.props):g.props,j=v.stackId,w=v.hide;if(w)return p;var _=v[i],T=p[_]||{hasStack:!1,stackGroups:{}};if(Ci(j)){var C=T.stackGroups[j]||{numericAxisId:i,cateAxisId:a,items:[]};C.items.push(g),T.hasStack=!0,T.stackGroups[j]=C}else T.stackGroups[Uf("_stackId_")]={numericAxisId:i,cateAxisId:a,items:[g]};return Jr(Jr({},p),{},Ym({},_,T))},c),f={};return Object.keys(u).reduce(function(p,g){var x=u[g];if(x.hasStack){var v={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(j,w){var _=x.stackGroups[w];return Jr(Jr({},j),{},Ym({},w,{numericAxisId:i,cateAxisId:a,items:_.items,stackedData:qCe(t,_.items,s)}))},v)}return Jr(Jr({},p),{},Ym({},g,x))},f)},VH=function(t,n){var i=n.realScaleType,a=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=i||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=rCe(u,s,l);return t.domain([YN(f),dd(f)]),{niceTicks:f}}if(s&&a==="number"){var p=t.domain(),g=iCe(p,s,l);return{niceTicks:g}}return null};function jS(e){var t=e.axis,n=e.ticks,i=e.bandSize,a=e.entry,s=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!cn(a[t.dataKey])){var l=Qw(n,"value",a[t.dataKey]);if(l)return l.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var c=li(a,cn(o)?t.dataKey:o);return cn(c)?null:t.scale(c)}var X$=function(t){var n=t.axis,i=t.ticks,a=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return i[l]?i[l].coordinate+a:null;var c=li(o,n.dataKey,n.domain[l]);return cn(c)?null:n.scale(c)-s/2+a},VCe=function(t){var n=t.numericAxis,i=n.scale.domain();if(n.type==="number"){var a=Math.min(i[0],i[1]),s=Math.max(i[0],i[1]);return a<=0&&s>=0?0:s<0?s:a}return i[0]},HCe=function(t,n){var i,a=(i=t.type)!==null&&i!==void 0&&i.defaultProps?Jr(Jr({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(Ci(s)){var o=n[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},GCe=function(t){return t.reduce(function(n,i){return[YN(i.concat([n[0]]).filter(jt)),dd(i.concat([n[1]]).filter(jt))]},[1/0,-1/0])},HH=function(t,n,i){return Object.keys(t).reduce(function(a,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,f){var p=GCe(f.slice(n,i+1));return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},J$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Z$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fO=function(t,n,i){if(tn(t))return t(n,i);if(!Array.isArray(t))return n;var a=[];if(jt(t[0]))a[0]=i?t[0]:Math.min(t[0],n[0]);else if(J$.test(t[0])){var s=+J$.exec(t[0])[1];a[0]=n[0]-s}else tn(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(jt(t[1]))a[1]=i?t[1]:Math.max(t[1],n[1]);else if(Z$.test(t[1])){var o=+Z$.exec(t[1])[1];a[1]=n[1]+o}else tn(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},wS=function(t,n,i){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!i||a>0)return a}if(t&&n&&n.length>=2){for(var s=TM(n,function(p){return p.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],f=s[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return i?void 0:0},e8=function(t,n,i){return!t||!t.length||Rf(t,Ms(i,"type.defaultProps.domain"))?n:t},GH=function(t,n){var i=t.type.defaultProps?Jr(Jr({},t.type.defaultProps),t.props):t.props,a=i.dataKey,s=i.name,o=i.unit,l=i.formatter,c=i.tooltipType,u=i.chartType,f=i.hide;return Jr(Jr({},$t(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:ZM(t),value:li(n,a),type:c,payload:n,chartType:u,hide:f})};function hb(e){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hb(e)}function t8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function jc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t8(Object(n),!0).forEach(function(i){WH(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function WH(e,t,n){return t=WCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WCe(e){var t=KCe(e,"string");return hb(t)=="symbol"?t:t+""}function KCe(e,t){if(hb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(hb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YCe(e,t){return ZCe(e)||JCe(e,t)||XCe(e,t)||QCe()}function QCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XCe(e,t){if(e){if(typeof e=="string")return n8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n8(e,t)}}function n8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function JCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ZCe(e){if(Array.isArray(e))return e}var SS=Math.PI/180,e2e=function(t){return t*180/Math.PI},Rr=function(t,n,i,a){return{x:t+Math.cos(-SS*a)*i,y:n+Math.sin(-SS*a)*i}},KH=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},t2e=function(t,n,i,a,s){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,f=Ra(t.cx,o,o/2),p=Ra(t.cy,l,l/2),g=KH(o,l,i),x=Ra(t.innerRadius,g,0),v=Ra(t.outerRadius,g,g*.8),j=Object.keys(n);return j.reduce(function(w,_){var T=n[_],C=T.domain,O=T.reversed,A;if(cn(T.range))a==="angleAxis"?A=[c,u]:a==="radiusAxis"&&(A=[x,v]),O&&(A=[A[1],A[0]]);else{A=T.range;var P=A,I=YCe(P,2);c=I[0],u=I[1]}var F=qH(T,s),B=F.realScaleType,$=F.scale;$.domain(C).range(A),UH($);var L=VH($,jc(jc({},T),{},{realScaleType:B})),V=jc(jc(jc({},T),L),{},{range:A,radius:v,realScaleType:B,scale:$,cx:f,cy:p,innerRadius:x,outerRadius:v,startAngle:c,endAngle:u});return jc(jc({},w),{},WH({},_,V))},{})},n2e=function(t,n){var i=t.x,a=t.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(i-s,2)+Math.pow(a-o,2))},r2e=function(t,n){var i=t.x,a=t.y,s=n.cx,o=n.cy,l=n2e({x:i,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(i-s)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:e2e(u),angleInRadian:u}},i2e=function(t){var n=t.startAngle,i=t.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),o=Math.min(a,s);return{startAngle:n-o*360,endAngle:i-o*360}},a2e=function(t,n){var i=n.startAngle,a=n.endAngle,s=Math.floor(i/360),o=Math.floor(a/360),l=Math.min(s,o);return t+l*360},r8=function(t,n){var i=t.x,a=t.y,s=r2e({x:i,y:a},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=i2e(n),p=f.startAngle,g=f.endAngle,x=l,v;if(p<=g){for(;x>g;)x-=360;for(;x<p;)x+=360;v=x>=p&&x<=g}else{for(;x>p;)x-=360;for(;x<g;)x+=360;v=x>=g&&x<=p}return v?jc(jc({},n),{},{radius:o,angle:a2e(x,n)}):null},YH=function(t){return!b.isValidElement(t)&&!tn(t)&&typeof t!="boolean"?t.className:""};function fb(e){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fb(e)}var s2e=["offset"];function o2e(e){return d2e(e)||u2e(e)||c2e(e)||l2e()}function l2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c2e(e,t){if(e){if(typeof e=="string")return pO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pO(e,t)}}function u2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function d2e(e){if(Array.isArray(e))return pO(e)}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h2e(e,t){if(e==null)return{};var n=f2e(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function f2e(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function i8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i8(Object(n),!0).forEach(function(i){p2e(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function p2e(e,t,n){return t=m2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m2e(e){var t=g2e(e,"string");return fb(t)=="symbol"?t:t+""}function g2e(e,t){if(fb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(fb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pb.apply(this,arguments)}var y2e=function(t){var n=t.value,i=t.formatter,a=cn(t.children)?n:t.children;return tn(i)?i(a):a},x2e=function(t,n){var i=Ia(n-t),a=Math.min(Math.abs(n-t),360);return i*a},v2e=function(t,n,i){var a=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,f=c.cy,p=c.innerRadius,g=c.outerRadius,x=c.startAngle,v=c.endAngle,j=c.clockWise,w=(p+g)/2,_=x2e(x,v),T=_>=0?1:-1,C,O;a==="insideStart"?(C=x+T*o,O=j):a==="insideEnd"?(C=v-T*o,O=!j):a==="end"&&(C=v+T*o,O=j),O=_<=0?O:!O;var A=Rr(u,f,w,C),P=Rr(u,f,w,C+(O?1:-1)*359),I="M".concat(A.x,",").concat(A.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(O?0:1,`,
    `).concat(P.x,",").concat(P.y),F=cn(t.id)?Uf("recharts-radial-line-"):t.id;return Se.createElement("text",pb({},i,{dominantBaseline:"central",className:dn("recharts-radial-bar-label",l)}),Se.createElement("defs",null,Se.createElement("path",{id:F,d:I})),Se.createElement("textPath",{xlinkHref:"#".concat(F)},n))},b2e=function(t){var n=t.viewBox,i=t.offset,a=t.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,f=s.startAngle,p=s.endAngle,g=(f+p)/2;if(a==="outside"){var x=Rr(o,l,u+i,g),v=x.x,j=x.y;return{x:v,y:j,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var w=(c+u)/2,_=Rr(o,l,w,g),T=_.x,C=_.y;return{x:T,y:C,textAnchor:"middle",verticalAnchor:"middle"}},j2e=function(t){var n=t.viewBox,i=t.parentViewBox,a=t.offset,s=t.position,o=n,l=o.x,c=o.y,u=o.width,f=o.height,p=f>=0?1:-1,g=p*a,x=p>0?"end":"start",v=p>0?"start":"end",j=u>=0?1:-1,w=j*a,_=j>0?"end":"start",T=j>0?"start":"end";if(s==="top"){var C={x:l+u/2,y:c-p*a,textAnchor:"middle",verticalAnchor:x};return Si(Si({},C),i?{height:Math.max(c-i.y,0),width:u}:{})}if(s==="bottom"){var O={x:l+u/2,y:c+f+g,textAnchor:"middle",verticalAnchor:v};return Si(Si({},O),i?{height:Math.max(i.y+i.height-(c+f),0),width:u}:{})}if(s==="left"){var A={x:l-w,y:c+f/2,textAnchor:_,verticalAnchor:"middle"};return Si(Si({},A),i?{width:Math.max(A.x-i.x,0),height:f}:{})}if(s==="right"){var P={x:l+u+w,y:c+f/2,textAnchor:T,verticalAnchor:"middle"};return Si(Si({},P),i?{width:Math.max(i.x+i.width-P.x,0),height:f}:{})}var I=i?{width:u,height:f}:{};return s==="insideLeft"?Si({x:l+w,y:c+f/2,textAnchor:T,verticalAnchor:"middle"},I):s==="insideRight"?Si({x:l+u-w,y:c+f/2,textAnchor:_,verticalAnchor:"middle"},I):s==="insideTop"?Si({x:l+u/2,y:c+g,textAnchor:"middle",verticalAnchor:v},I):s==="insideBottom"?Si({x:l+u/2,y:c+f-g,textAnchor:"middle",verticalAnchor:x},I):s==="insideTopLeft"?Si({x:l+w,y:c+g,textAnchor:T,verticalAnchor:v},I):s==="insideTopRight"?Si({x:l+u-w,y:c+g,textAnchor:_,verticalAnchor:v},I):s==="insideBottomLeft"?Si({x:l+w,y:c+f-g,textAnchor:T,verticalAnchor:x},I):s==="insideBottomRight"?Si({x:l+u-w,y:c+f-g,textAnchor:_,verticalAnchor:x},I):Zg(s)&&(jt(s.x)||rf(s.x))&&(jt(s.y)||rf(s.y))?Si({x:l+Ra(s.x,u),y:c+Ra(s.y,f),textAnchor:"end",verticalAnchor:"end"},I):Si({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},I)},w2e=function(t){return"cx"in t&&jt(t.cx)};function Mi(e){var t=e.offset,n=t===void 0?5:t,i=h2e(e,s2e),a=Si({offset:n},i),s=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,f=a.className,p=f===void 0?"":f,g=a.textBreakAll;if(!s||cn(l)&&cn(c)&&!b.isValidElement(u)&&!tn(u))return null;if(b.isValidElement(u))return b.cloneElement(u,a);var x;if(tn(u)){if(x=b.createElement(u,a),b.isValidElement(x))return x}else x=y2e(a);var v=w2e(s),j=$t(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return v2e(a,x,j);var w=v?b2e(a):j2e(a);return Se.createElement(If,pb({className:dn("recharts-label",p)},j,w,{breakAll:g}),x)}Mi.displayName="Label";var QH=function(t){var n=t.cx,i=t.cy,a=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,p=t.x,g=t.y,x=t.top,v=t.left,j=t.width,w=t.height,_=t.clockWise,T=t.labelViewBox;if(T)return T;if(jt(j)&&jt(w)){if(jt(p)&&jt(g))return{x:p,y:g,width:j,height:w};if(jt(x)&&jt(v))return{x,y:v,width:j,height:w}}return jt(p)&&jt(g)?{x:p,y:g,width:0,height:0}:jt(n)&&jt(i)?{cx:n,cy:i,startAngle:s||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:_}:t.viewBox?t.viewBox:{}},S2e=function(t,n){return t?t===!0?Se.createElement(Mi,{key:"label-implicit",viewBox:n}):Ci(t)?Se.createElement(Mi,{key:"label-implicit",viewBox:n,value:t}):b.isValidElement(t)?t.type===Mi?b.cloneElement(t,{key:"label-implicit",viewBox:n}):Se.createElement(Mi,{key:"label-implicit",content:t,viewBox:n}):tn(t)?Se.createElement(Mi,{key:"label-implicit",content:t,viewBox:n}):Zg(t)?Se.createElement(Mi,pb({viewBox:n},t,{key:"label-implicit"})):null:null},N2e=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&i&&!t.label)return null;var a=t.children,s=QH(t),o=Is(a,Mi).map(function(c,u){return b.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!i)return o;var l=S2e(t.label,n||s);return[l].concat(o2e(o))};Mi.parseViewBox=QH;Mi.renderCallByParent=N2e;var DE,a8;function _2e(){if(a8)return DE;a8=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return DE=e,DE}var C2e=_2e();const T2e=qn(C2e);function mb(e){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mb(e)}var A2e=["valueAccessor"],E2e=["data","dataKey","clockWise","id","textBreakAll"];function k2e(e){return M2e(e)||D2e(e)||O2e(e)||P2e()}function P2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O2e(e,t){if(e){if(typeof e=="string")return mO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mO(e,t)}}function D2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function M2e(e){if(Array.isArray(e))return mO(e)}function mO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},NS.apply(this,arguments)}function s8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function o8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s8(Object(n),!0).forEach(function(i){I2e(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function I2e(e,t,n){return t=R2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R2e(e){var t=L2e(e,"string");return mb(t)=="symbol"?t:t+""}function L2e(e,t){if(mb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(mb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l8(e,t){if(e==null)return{};var n=F2e(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function F2e(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}var $2e=function(t){return Array.isArray(t.value)?T2e(t.value):t.value};function Ll(e){var t=e.valueAccessor,n=t===void 0?$2e:t,i=l8(e,A2e),a=i.data,s=i.dataKey,o=i.clockWise,l=i.id,c=i.textBreakAll,u=l8(i,E2e);return!a||!a.length?null:Se.createElement(Dn,{className:"recharts-label-list"},a.map(function(f,p){var g=cn(s)?n(f,p):li(f&&f.payload,s),x=cn(l)?{}:{id:"".concat(l,"-").concat(p)};return Se.createElement(Mi,NS({},$t(f,!0),u,x,{parentViewBox:f.parentViewBox,value:g,textBreakAll:c,viewBox:Mi.parseViewBox(cn(o)?f:o8(o8({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Ll.displayName="LabelList";function B2e(e,t){return e?e===!0?Se.createElement(Ll,{key:"labelList-implicit",data:t}):Se.isValidElement(e)||tn(e)?Se.createElement(Ll,{key:"labelList-implicit",data:t,content:e}):Zg(e)?Se.createElement(Ll,NS({data:t},e,{key:"labelList-implicit"})):null:null}function z2e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,a=Is(i,Ll).map(function(o,l){return b.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var s=B2e(e.label,t);return[s].concat(k2e(a))}Ll.renderCallByParent=z2e;function gb(e){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gb(e)}function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gO.apply(this,arguments)}function c8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function u8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c8(Object(n),!0).forEach(function(i){q2e(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function q2e(e,t,n){return t=U2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U2e(e){var t=V2e(e,"string");return gb(t)=="symbol"?t:t+""}function V2e(e,t){if(gb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(gb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H2e=function(t,n){var i=Ia(n-t),a=Math.min(Math.abs(n-t),359.999);return i*a},Jj=function(t){var n=t.cx,i=t.cy,a=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+a,p=Math.asin(c/f)/SS,g=u?s:s+o*p,x=Rr(n,i,f,g),v=Rr(n,i,a,g),j=u?s-o*p:s,w=Rr(n,i,f*Math.cos(p*SS),j);return{center:x,circleTangency:v,lineTangency:w,theta:p}},XH=function(t){var n=t.cx,i=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=H2e(o,l),u=o+c,f=Rr(n,i,s,o),p=Rr(n,i,s,u),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(a>0){var x=Rr(n,i,a,o),v=Rr(n,i,a,u);g+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(n,",").concat(i," Z");return g},G2e=function(t){var n=t.cx,i=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,p=Ia(f-u),g=Jj({cx:n,cy:i,radius:s,angle:u,sign:p,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,v=g.lineTangency,j=g.theta,w=Jj({cx:n,cy:i,radius:s,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:c}),_=w.circleTangency,T=w.lineTangency,C=w.theta,O=c?Math.abs(u-f):Math.abs(u-f)-j-C;if(O<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):XH({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:u,endAngle:f});var A="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(O>180),",").concat(+(p<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
  `);if(a>0){var P=Jj({cx:n,cy:i,radius:a,angle:u,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=P.circleTangency,F=P.lineTangency,B=P.theta,$=Jj({cx:n,cy:i,radius:a,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),L=$.circleTangency,V=$.lineTangency,H=$.theta,te=c?Math.abs(u-f):Math.abs(u-f)-B-H;if(te<0&&o===0)return"".concat(A,"L").concat(n,",").concat(i,"Z");A+="L".concat(V.x,",").concat(V.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(te>180),",").concat(+(p>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(F.x,",").concat(F.y,"Z")}else A+="L".concat(n,",").concat(i,"Z");return A},W2e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},JH=function(t){var n=u8(u8({},W2e),t),i=n.cx,a=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,f=n.startAngle,p=n.endAngle,g=n.className;if(o<s||f===p)return null;var x=dn("recharts-sector",g),v=o-s,j=Ra(l,v,0,!0),w;return j>0&&Math.abs(f-p)<360?w=G2e({cx:i,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(j,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:p}):w=XH({cx:i,cy:a,innerRadius:s,outerRadius:o,startAngle:f,endAngle:p}),Se.createElement("path",gO({},$t(n,!0),{className:x,d:w,role:"img"}))};function yb(e){"@babel/helpers - typeof";return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yb(e)}function yO(){return yO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yO.apply(this,arguments)}function d8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function h8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d8(Object(n),!0).forEach(function(i){K2e(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function K2e(e,t,n){return t=Y2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y2e(e){var t=Q2e(e,"string");return yb(t)=="symbol"?t:t+""}function Q2e(e,t){if(yb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(yb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f8={curveBasisClosed:g0e,curveBasisOpen:y0e,curveBasis:m0e,curveBumpX:t0e,curveBumpY:n0e,curveLinearClosed:x0e,curveLinear:LN,curveMonotoneX:v0e,curveMonotoneY:b0e,curveNatural:j0e,curveStep:w0e,curveStepAfter:N0e,curveStepBefore:S0e},Zj=function(t){return t.x===+t.x&&t.y===+t.y},fv=function(t){return t.x},pv=function(t){return t.y},X2e=function(t,n){if(tn(t))return t;var i="curve".concat(IN(t));return(i==="curveMonotone"||i==="curveBump")&&n?f8["".concat(i).concat(n==="vertical"?"Y":"X")]:f8[i]||LN},J2e=function(t){var n=t.type,i=n===void 0?"linear":n,a=t.points,s=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=X2e(i,l),p=u?s.filter(function(j){return Zj(j)}):s,g;if(Array.isArray(o)){var x=u?o.filter(function(j){return Zj(j)}):o,v=p.map(function(j,w){return h8(h8({},j),{},{base:x[w]})});return l==="vertical"?g=Vj().y(pv).x1(fv).x0(function(j){return j.base.x}):g=Vj().x(fv).y1(pv).y0(function(j){return j.base.y}),g.defined(Zj).curve(f),g(v)}return l==="vertical"&&jt(o)?g=Vj().y(pv).x1(fv).x0(o):jt(o)?g=Vj().x(fv).y1(pv).y0(o):g=Q7().x(fv).y(pv),g.defined(Zj).curve(f),g(p)},jf=function(t){var n=t.className,i=t.points,a=t.path,s=t.pathRef;if((!i||!i.length)&&!a)return null;var o=i&&i.length?J2e(t):a;return b.createElement("path",yO({},$t(t,!1),Xw(t),{className:dn("recharts-curve",n),d:o,ref:s}))},ME={exports:{}},IE,p8;function Z2e(){if(p8)return IE;p8=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return IE=e,IE}var RE,m8;function eTe(){if(m8)return RE;m8=1;var e=Z2e();function t(){}function n(){}return n.resetWarningCache=t,RE=function(){function i(o,l,c,u,f,p){if(p!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}i.isRequired=i;function a(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},RE}var g8;function tTe(){return g8||(g8=1,ME.exports=eTe()()),ME.exports}var nTe=tTe();const cr=qn(nTe);var rTe=Object.getOwnPropertyNames,iTe=Object.getOwnPropertySymbols,aTe=Object.prototype.hasOwnProperty;function y8(e,t){return function(i,a,s){return e(i,a,s)&&t(i,a,s)}}function ew(e){return function(n,i,a){if(!n||!i||typeof n!="object"||typeof i!="object")return e(n,i,a);var s=a.cache,o=s.get(n),l=s.get(i);if(o&&l)return o===i&&l===n;s.set(n,i),s.set(i,n);var c=e(n,i,a);return s.delete(n),s.delete(i),c}}function x8(e){return rTe(e).concat(iTe(e))}var sTe=Object.hasOwn||function(e,t){return aTe.call(e,t)};function Gf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var oTe="__v",lTe="__o",cTe="_owner",v8=Object.getOwnPropertyDescriptor,b8=Object.keys;function uTe(e,t,n){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!n.equals(e[i],t[i],i,i,e,t,n))return!1;return!0}function dTe(e,t){return Gf(e.getTime(),t.getTime())}function hTe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function fTe(e,t){return e===t}function j8(e,t,n){var i=e.size;if(i!==t.size)return!1;if(!i)return!0;for(var a=new Array(i),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=t.entries(),f=!1,p=0;(l=u.next())&&!l.done;){if(a[p]){p++;continue}var g=o.value,x=l.value;if(n.equals(g[0],x[0],c,p,e,t,n)&&n.equals(g[1],x[1],g[0],x[0],e,t,n)){f=a[p]=!0;break}p++}if(!f)return!1;c++}return!0}var pTe=Gf;function mTe(e,t,n){var i=b8(e),a=i.length;if(b8(t).length!==a)return!1;for(;a-- >0;)if(!ZH(e,t,n,i[a]))return!1;return!0}function mv(e,t,n){var i=x8(e),a=i.length;if(x8(t).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=i[a],!ZH(e,t,n,s)||(o=v8(e,s),l=v8(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function gTe(e,t){return Gf(e.valueOf(),t.valueOf())}function yTe(e,t){return e.source===t.source&&e.flags===t.flags}function w8(e,t,n){var i=e.size;if(i!==t.size)return!1;if(!i)return!0;for(var a=new Array(i),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),u=!1,f=0;(l=c.next())&&!l.done;){if(!a[f]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function xTe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function vTe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function ZH(e,t,n,i){return(i===cTe||i===lTe||i===oTe)&&(e.$$typeof||t.$$typeof)?!0:sTe(t,i)&&n.equals(e[i],t[i],i,i,e,t,n)}var bTe="[object Arguments]",jTe="[object Boolean]",wTe="[object Date]",STe="[object Error]",NTe="[object Map]",_Te="[object Number]",CTe="[object Object]",TTe="[object RegExp]",ATe="[object Set]",ETe="[object String]",kTe="[object URL]",PTe=Array.isArray,S8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,N8=Object.assign,OTe=Object.prototype.toString.call.bind(Object.prototype.toString);function DTe(e){var t=e.areArraysEqual,n=e.areDatesEqual,i=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,f=e.areSetsEqual,p=e.areTypedArraysEqual,g=e.areUrlsEqual;return function(v,j,w){if(v===j)return!0;if(v==null||j==null)return!1;var _=typeof v;if(_!==typeof j)return!1;if(_!=="object")return _==="number"?o(v,j,w):_==="function"?a(v,j,w):!1;var T=v.constructor;if(T!==j.constructor)return!1;if(T===Object)return l(v,j,w);if(PTe(v))return t(v,j,w);if(S8!=null&&S8(v))return p(v,j,w);if(T===Date)return n(v,j,w);if(T===RegExp)return u(v,j,w);if(T===Map)return s(v,j,w);if(T===Set)return f(v,j,w);var C=OTe(v);return C===wTe?n(v,j,w):C===TTe?u(v,j,w):C===NTe?s(v,j,w):C===ATe?f(v,j,w):C===CTe?typeof v.then!="function"&&typeof j.then!="function"&&l(v,j,w):C===kTe?g(v,j,w):C===STe?i(v,j,w):C===bTe?l(v,j,w):C===jTe||C===_Te||C===ETe?c(v,j,w):!1}}function MTe(e){var t=e.circular,n=e.createCustomConfig,i=e.strict,a={areArraysEqual:i?mv:uTe,areDatesEqual:dTe,areErrorsEqual:hTe,areFunctionsEqual:fTe,areMapsEqual:i?y8(j8,mv):j8,areNumbersEqual:pTe,areObjectsEqual:i?mv:mTe,arePrimitiveWrappersEqual:gTe,areRegExpsEqual:yTe,areSetsEqual:i?y8(w8,mv):w8,areTypedArraysEqual:i?mv:xTe,areUrlsEqual:vTe};if(n&&(a=N8({},a,n(a))),t){var s=ew(a.areArraysEqual),o=ew(a.areMapsEqual),l=ew(a.areObjectsEqual),c=ew(a.areSetsEqual);a=N8({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function ITe(e){return function(t,n,i,a,s,o,l){return e(t,n,l)}}function RTe(e){var t=e.circular,n=e.comparator,i=e.createState,a=e.equals,s=e.strict;if(i)return function(c,u){var f=i(),p=f.cache,g=p===void 0?t?new WeakMap:void 0:p,x=f.meta;return n(c,u,{cache:g,equals:a,meta:x,strict:s})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var LTe=Ed();Ed({strict:!0});Ed({circular:!0});Ed({circular:!0,strict:!0});Ed({createInternalComparator:function(){return Gf}});Ed({strict:!0,createInternalComparator:function(){return Gf}});Ed({circular:!0,createInternalComparator:function(){return Gf}});Ed({circular:!0,createInternalComparator:function(){return Gf},strict:!0});function Ed(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,i=e.createInternalComparator,a=e.createState,s=e.strict,o=s===void 0?!1:s,l=MTe(e),c=DTe(l),u=i?i(c):ITe(c);return RTe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function FTe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function _8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,i=function a(s){n<0&&(n=s),s-n>t?(e(s),n=-1):FTe(a)};requestAnimationFrame(i)}function xO(e){"@babel/helpers - typeof";return xO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xO(e)}function $Te(e){return UTe(e)||qTe(e)||zTe(e)||BTe()}function BTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zTe(e,t){if(e){if(typeof e=="string")return C8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C8(e,t)}}function C8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function qTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UTe(e){if(Array.isArray(e))return e}function VTe(){var e={},t=function(){return null},n=!1,i=function a(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=$Te(o),c=l[0],u=l.slice(1);if(typeof c=="number"){_8(a.bind(null,u),c);return}a(c),_8(a.bind(null,u));return}xO(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,i(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function xb(e){"@babel/helpers - typeof";return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xb(e)}function T8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function A8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T8(Object(n),!0).forEach(function(i){eG(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function eG(e,t,n){return t=HTe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HTe(e){var t=GTe(e,"string");return xb(t)==="symbol"?t:String(t)}function GTe(e,t){if(xb(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(xb(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WTe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(i,a){return i.filter(function(s){return a.includes(s)})})},KTe=function(t){return t},YTe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Rv=function(t,n){return Object.keys(n).reduce(function(i,a){return A8(A8({},i),{},eG({},a,t(a,n[a])))},{})},E8=function(t,n,i){return t.map(function(a){return"".concat(YTe(a)," ").concat(n,"ms ").concat(i)}).join(",")};function QTe(e,t){return ZTe(e)||JTe(e,t)||tG(e,t)||XTe()}function XTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JTe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ZTe(e){if(Array.isArray(e))return e}function eAe(e){return rAe(e)||nAe(e)||tG(e)||tAe()}function tAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tG(e,t){if(e){if(typeof e=="string")return vO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vO(e,t)}}function nAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rAe(e){if(Array.isArray(e))return vO(e)}function vO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var _S=1e-4,nG=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},rG=function(t,n){return t.map(function(i,a){return i*Math.pow(n,a)}).reduce(function(i,a){return i+a})},k8=function(t,n){return function(i){var a=nG(t,n);return rG(a,i)}},iAe=function(t,n){return function(i){var a=nG(t,n),s=[].concat(eAe(a.map(function(o,l){return o*l}).slice(1)),[0]);return rG(s,i)}},P8=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),f=QTe(u,4);a=f[0],s=f[1],o=f[2],l=f[3]}}}var p=k8(a,o),g=k8(s,l),x=iAe(a,o),v=function(_){return _>1?1:_<0?0:_},j=function(_){for(var T=_>1?1:_,C=T,O=0;O<8;++O){var A=p(C)-T,P=x(C);if(Math.abs(A-T)<_S||P<_S)return g(C);C=v(C-A/P)}return g(C)};return j.isStepper=!1,j},aAe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,i=n===void 0?100:n,a=t.damping,s=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(f,p,g){var x=-(f-p)*i,v=g*s,j=g+(x-v)*l/1e3,w=g*l/1e3+f;return Math.abs(w-p)<_S&&Math.abs(j)<_S?[p,0]:[w,j]};return c.isStepper=!0,c.dt=l,c},sAe=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return P8(a);case"spring":return aAe();default:if(a.split("(")[0]==="cubic-bezier")return P8(a)}return typeof a=="function"?a:null};function vb(e){"@babel/helpers - typeof";return vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vb(e)}function O8(e){return cAe(e)||lAe(e)||iG(e)||oAe()}function oAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cAe(e){if(Array.isArray(e))return jO(e)}function D8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D8(Object(n),!0).forEach(function(i){bO(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function bO(e,t,n){return t=uAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uAe(e){var t=dAe(e,"string");return vb(t)==="symbol"?t:String(t)}function dAe(e,t){if(vb(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(vb(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hAe(e,t){return mAe(e)||pAe(e,t)||iG(e,t)||fAe()}function fAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iG(e,t){if(e){if(typeof e=="string")return jO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jO(e,t)}}function jO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function pAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function mAe(e){if(Array.isArray(e))return e}var CS=function(t,n,i){return t+(n-t)*i},wO=function(t){var n=t.from,i=t.to;return n!==i},gAe=function e(t,n,i){var a=Rv(function(s,o){if(wO(o)){var l=t(o.from,o.to,o.velocity),c=hAe(l,2),u=c[0],f=c[1];return Ui(Ui({},o),{},{from:u,velocity:f})}return o},n);return i<1?Rv(function(s,o){return wO(o)?Ui(Ui({},o),{},{velocity:CS(o.velocity,a[s].velocity,i),from:CS(o.from,a[s].from,i)}):o},n):e(t,a,i-1)};const yAe=function(e,t,n,i,a){var s=WTe(e,t),o=s.reduce(function(w,_){return Ui(Ui({},w),{},bO({},_,[e[_],t[_]]))},{}),l=s.reduce(function(w,_){return Ui(Ui({},w),{},bO({},_,{from:e[_],velocity:0,to:t[_]}))},{}),c=-1,u,f,p=function(){return null},g=function(){return Rv(function(_,T){return T.from},l)},x=function(){return!Object.values(l).filter(wO).length},v=function(_){u||(u=_);var T=_-u,C=T/n.dt;l=gAe(n,l,C),a(Ui(Ui(Ui({},e),t),g())),u=_,x()||(c=requestAnimationFrame(p))},j=function(_){f||(f=_);var T=(_-f)/i,C=Rv(function(A,P){return CS.apply(void 0,O8(P).concat([n(T)]))},o);if(a(Ui(Ui(Ui({},e),t),C)),T<1)c=requestAnimationFrame(p);else{var O=Rv(function(A,P){return CS.apply(void 0,O8(P).concat([n(1)]))},o);a(Ui(Ui(Ui({},e),t),O))}};return p=n.isStepper?v:j,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}};function _g(e){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_g(e)}var xAe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function vAe(e,t){if(e==null)return{};var n=bAe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function bAe(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,s;for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function LE(e){return NAe(e)||SAe(e)||wAe(e)||jAe()}function jAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wAe(e,t){if(e){if(typeof e=="string")return SO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SO(e,t)}}function SAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NAe(e){if(Array.isArray(e))return SO(e)}function SO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function M8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M8(Object(n),!0).forEach(function(i){Av(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Av(e,t,n){return t=aG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CAe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,aG(i.key),i)}}function TAe(e,t,n){return t&&CAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aG(e){var t=AAe(e,"string");return _g(t)==="symbol"?t:String(t)}function AAe(e,t){if(_g(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_g(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NO(e,t)}function NO(e,t){return NO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},NO(e,t)}function kAe(e){var t=PAe();return function(){var i=TS(e),a;if(t){var s=TS(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return _O(this,a)}}function _O(e,t){if(t&&(_g(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CO(e)}function CO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function TS(e){return TS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TS(e)}var $o=function(e){EAe(n,e);var t=kAe(n);function n(i,a){var s;_Ae(this,n),s=t.call(this,i,a);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,p=o.steps,g=o.children,x=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(CO(s)),s.changeStyle=s.changeStyle.bind(CO(s)),!l||x<=0)return s.state={style:{}},typeof g=="function"&&(s.state={style:f}),_O(s);if(p&&p.length)s.state={style:p[0].style};else if(u){if(typeof g=="function")return s.state={style:u},_O(s);s.state={style:c?Av({},c,u):u}}else s.state={style:{}};return s}return TAe(n,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,f=s.to,p=s.from,g=this.state.style;if(l){if(!o){var x={style:c?Av({},c,f):f};this.state&&g&&(c&&g[c]!==f||!c&&g!==f)&&this.setState(x);return}if(!(LTe(a.to,f)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var j=v||u?p:a.to;if(this.state&&g){var w={style:c?Av({},c,j):j};(c&&g[c]!==j||!c&&g!==j)&&this.setState(w)}this.runAnimation(ko(ko({},this.props),{},{from:j,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,u=a.easing,f=a.begin,p=a.onAnimationEnd,g=a.onAnimationStart,x=yAe(o,l,sAe(u),c,this.changeStyle),v=function(){s.stopJSAnimation=x()};this.manager.start([g,f,v,c,p])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],f=u.style,p=u.duration,g=p===void 0?0:p,x=function(j,w,_){if(_===0)return j;var T=w.duration,C=w.easing,O=C===void 0?"ease":C,A=w.style,P=w.properties,I=w.onAnimationEnd,F=_>0?o[_-1]:w,B=P||Object.keys(A);if(typeof O=="function"||O==="spring")return[].concat(LE(j),[s.runJSAnimation.bind(s,{from:F.style,to:A,duration:T,easing:O}),T]);var $=E8(B,T,O),L=ko(ko(ko({},F.style),A),{},{transition:$});return[].concat(LE(j),[L,T,I]).filter(KTe)};return this.manager.start([c].concat(LE(o.reduce(x,[f,Math.max(g,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=VTe());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,f=a.onAnimationStart,p=a.onAnimationEnd,g=a.steps,x=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof x=="function"||u==="spring"){this.runJSAnimation(a);return}if(g.length>1){this.runStepAnimation(a);return}var j=l?Av({},l,c):c,w=E8(Object.keys(j),o,u);v.start([f,s,ko(ko({},j),{},{transition:w}),o,p])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=vAe(a,xAe),u=b.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||u===0||o<=0)return s;var p=function(x){var v=x.props,j=v.style,w=j===void 0?{}:j,_=v.className,T=b.cloneElement(x,ko(ko({},c),{},{style:ko(ko({},w),f),className:_}));return T};return u===1?p(b.Children.only(s)):Se.createElement("div",null,b.Children.map(s,function(g){return p(g)}))}}]),n}(b.PureComponent);$o.displayName="Animate";$o.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};$o.propTypes={from:cr.oneOfType([cr.object,cr.string]),to:cr.oneOfType([cr.object,cr.string]),attributeName:cr.string,duration:cr.number,begin:cr.number,easing:cr.oneOfType([cr.string,cr.func]),steps:cr.arrayOf(cr.shape({duration:cr.number.isRequired,style:cr.object.isRequired,easing:cr.oneOfType([cr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),cr.func]),properties:cr.arrayOf("string"),onAnimationEnd:cr.func})),children:cr.oneOfType([cr.node,cr.func]),isActive:cr.bool,canBegin:cr.bool,onAnimationEnd:cr.func,shouldReAnimate:cr.bool,onAnimationStart:cr.func,onAnimationReStart:cr.func};function bb(e){"@babel/helpers - typeof";return bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bb(e)}function AS(){return AS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},AS.apply(this,arguments)}function OAe(e,t){return RAe(e)||IAe(e,t)||MAe(e,t)||DAe()}function DAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MAe(e,t){if(e){if(typeof e=="string")return I8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I8(e,t)}}function I8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function IAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function RAe(e){if(Array.isArray(e))return e}function R8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function L8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R8(Object(n),!0).forEach(function(i){LAe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function LAe(e,t,n){return t=FAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FAe(e){var t=$Ae(e,"string");return bb(t)=="symbol"?t:t+""}function $Ae(e,t){if(bb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(bb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F8=function(t,n,i,a,s){var o=Math.min(Math.abs(i)/2,Math.abs(a)/2),l=a>=0?1:-1,c=i>=0?1:-1,u=a>=0&&i>=0||a<0&&i<0?1:0,f;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=s[g]>o?o:s[g];f="M".concat(t,",").concat(n+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(u,",").concat(t+c*p[0],",").concat(n)),f+="L ".concat(t+i-c*p[1],",").concat(n),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(u,`,
        `).concat(t+i,",").concat(n+l*p[1])),f+="L ".concat(t+i,",").concat(n+a-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(u,`,
        `).concat(t+i-c*p[2],",").concat(n+a)),f+="L ".concat(t+c*p[3],",").concat(n+a),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*p[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var v=Math.min(o,s);f="M ".concat(t,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(n,`
            L `).concat(t+i-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+i,",").concat(n+l*v,`
            L `).concat(t+i,",").concat(n+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+i-c*v,",").concat(n+a,`
            L `).concat(t+c*v,",").concat(n+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*v," Z")}else f="M ".concat(t,",").concat(n," h ").concat(i," v ").concat(a," h ").concat(-i," Z");return f},BAe=function(t,n){if(!t||!n)return!1;var i=t.x,a=t.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),f=Math.max(s,s+l),p=Math.min(o,o+c),g=Math.max(o,o+c);return i>=u&&i<=f&&a>=p&&a<=g}return!1},zAe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eI=function(t){var n=L8(L8({},zAe),t),i=b.useRef(),a=b.useState(-1),s=OAe(a,2),o=s[0],l=s[1];b.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var O=i.current.getTotalLength();O&&l(O)}catch{}},[]);var c=n.x,u=n.y,f=n.width,p=n.height,g=n.radius,x=n.className,v=n.animationEasing,j=n.animationDuration,w=n.animationBegin,_=n.isAnimationActive,T=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||p!==+p||f===0||p===0)return null;var C=dn("recharts-rectangle",x);return T?Se.createElement($o,{canBegin:o>0,from:{width:f,height:p,x:c,y:u},to:{width:f,height:p,x:c,y:u},duration:j,animationEasing:v,isActive:T},function(O){var A=O.width,P=O.height,I=O.x,F=O.y;return Se.createElement($o,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:j,isActive:_,easing:v},Se.createElement("path",AS({},$t(n,!0),{className:C,d:F8(I,F,A,P,g),ref:i})))}):Se.createElement("path",AS({},$t(n,!0),{className:C,d:F8(c,u,f,p,g)}))},qAe=["points","className","baseLinePoints","connectNulls"];function $m(){return $m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$m.apply(this,arguments)}function UAe(e,t){if(e==null)return{};var n=VAe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function VAe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function $8(e){return KAe(e)||WAe(e)||GAe(e)||HAe()}function HAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GAe(e,t){if(e){if(typeof e=="string")return TO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TO(e,t)}}function WAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KAe(e){if(Array.isArray(e))return TO(e)}function TO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var B8=function(t){return t&&t.x===+t.x&&t.y===+t.y},YAe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(i){B8(i)?n[n.length-1].push(i):n[n.length-1].length>0&&n.push([])}),B8(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Lv=function(t,n){var i=YAe(t);n&&(i=[i.reduce(function(s,o){return[].concat($8(s),$8(o))},[])]);var a=i.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return i.length===1?"".concat(a,"Z"):a},QAe=function(t,n,i){var a=Lv(t,i);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Lv(n.reverse(),i).slice(1))},XAe=function(t){var n=t.points,i=t.className,a=t.baseLinePoints,s=t.connectNulls,o=UAe(t,qAe);if(!n||!n.length)return null;var l=dn("recharts-polygon",i);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=QAe(n,a,s);return Se.createElement("g",{className:l},Se.createElement("path",$m({},$t(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?Se.createElement("path",$m({},$t(o,!0),{fill:"none",d:Lv(n,s)})):null,c?Se.createElement("path",$m({},$t(o,!0),{fill:"none",d:Lv(a,s)})):null)}var f=Lv(n,s);return Se.createElement("path",$m({},$t(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function AO(){return AO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},AO.apply(this,arguments)}var o0=function(t){var n=t.cx,i=t.cy,a=t.r,s=t.className,o=dn("recharts-dot",s);return n===+n&&i===+i&&a===+a?b.createElement("circle",AO({},$t(t,!1),Xw(t),{className:o,cx:n,cy:i,r:a})):null};function jb(e){"@babel/helpers - typeof";return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jb(e)}var JAe=["x","y","top","left","width","height","className"];function EO(){return EO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},EO.apply(this,arguments)}function z8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function ZAe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z8(Object(n),!0).forEach(function(i){eEe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function eEe(e,t,n){return t=tEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tEe(e){var t=nEe(e,"string");return jb(t)=="symbol"?t:t+""}function nEe(e,t){if(jb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(jb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rEe(e,t){if(e==null)return{};var n=iEe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function iEe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}var aEe=function(t,n,i,a,s,o){return"M".concat(t,",").concat(s,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(i)},sEe=function(t){var n=t.x,i=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,p=f===void 0?0:f,g=t.height,x=g===void 0?0:g,v=t.className,j=rEe(t,JAe),w=ZAe({x:i,y:s,top:l,left:u,width:p,height:x},j);return!jt(i)||!jt(s)||!jt(p)||!jt(x)||!jt(l)||!jt(u)?null:Se.createElement("path",EO({},$t(w,!0),{className:dn("recharts-cross",v),d:aEe(i,s,p,x,l,u)}))},FE,q8;function oEe(){if(q8)return FE;q8=1;var e=KN(),t=bH(),n=Ul();function i(a,s){return a&&a.length?e(a,n(s,2),t):void 0}return FE=i,FE}var lEe=oEe();const cEe=qn(lEe);var $E,U8;function uEe(){if(U8)return $E;U8=1;var e=KN(),t=Ul(),n=jH();function i(a,s){return a&&a.length?e(a,t(s,2),n):void 0}return $E=i,$E}var dEe=uEe();const hEe=qn(dEe);var fEe=["cx","cy","angle","ticks","axisLine"],pEe=["ticks","tick","angle","tickFormatter","stroke"];function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fv.apply(this,arguments)}function V8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V8(Object(n),!0).forEach(function(i){JN(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function H8(e,t){if(e==null)return{};var n=mEe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function mEe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function gEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G8(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,oG(i.key),i)}}function yEe(e,t,n){return t&&G8(e.prototype,t),n&&G8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xEe(e,t,n){return t=ES(t),vEe(e,sG()?Reflect.construct(t,n||[],ES(e).constructor):t.apply(e,n))}function vEe(e,t){if(t&&(Cg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bEe(e)}function bEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sG=function(){return!!e})()}function ES(e){return ES=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ES(e)}function jEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kO(e,t)}function kO(e,t){return kO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},kO(e,t)}function JN(e,t,n){return t=oG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oG(e){var t=wEe(e,"string");return Cg(t)=="symbol"?t:t+""}function wEe(e,t){if(Cg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Cg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ZN=function(e){function t(){return gEe(this,t),xEe(this,t,arguments)}return jEe(t,e),yEe(t,[{key:"getTickValueCoord",value:function(i){var a=i.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Rr(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var i=this.props.orientation,a;switch(i){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var i=this.props,a=i.cx,s=i.cy,o=i.angle,l=i.ticks,c=cEe(l,function(f){return f.coordinate||0}),u=hEe(l,function(f){return f.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var i=this.props,a=i.cx,s=i.cy,o=i.angle,l=i.ticks,c=i.axisLine,u=H8(i,fEe),f=l.reduce(function(v,j){return[Math.min(v[0],j.coordinate),Math.max(v[1],j.coordinate)]},[1/0,-1/0]),p=Rr(a,s,f[0],o),g=Rr(a,s,f[1],o),x=Wh(Wh(Wh({},$t(u,!1)),{},{fill:"none"},$t(c,!1)),{},{x1:p.x,y1:p.y,x2:g.x,y2:g.y});return Se.createElement("line",Fv({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var i=this,a=this.props,s=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,f=H8(a,pEe),p=this.getTickTextAnchor(),g=$t(f,!1),x=$t(o,!1),v=s.map(function(j,w){var _=i.getTickValueCoord(j),T=Wh(Wh(Wh(Wh({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(_.x,", ").concat(_.y,")")},g),{},{stroke:"none",fill:u},x),{},{index:w},_),{},{payload:j});return Se.createElement(Dn,Fv({className:dn("recharts-polar-radius-axis-tick",YH(o)),key:"tick-".concat(j.coordinate)},Mf(i.props,j,w)),t.renderTickItem(o,T,c?c(j.value,w):j.value))});return Se.createElement(Dn,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var i=this.props,a=i.ticks,s=i.axisLine,o=i.tick;return!a||!a.length?null:Se.createElement(Dn,{className:dn("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Mi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(i,a,s){var o;return Se.isValidElement(i)?o=Se.cloneElement(i,a):tn(i)?o=i(a):o=Se.createElement(If,Fv({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(b.PureComponent);JN(ZN,"displayName","PolarRadiusAxis");JN(ZN,"axisType","radiusAxis");JN(ZN,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Tg(e){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(e)}function ef(){return ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ef.apply(this,arguments)}function W8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Kh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W8(Object(n),!0).forEach(function(i){e_(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function SEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K8(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,cG(i.key),i)}}function NEe(e,t,n){return t&&K8(e.prototype,t),n&&K8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Ee(e,t,n){return t=kS(t),CEe(e,lG()?Reflect.construct(t,n||[],kS(e).constructor):t.apply(e,n))}function CEe(e,t){if(t&&(Tg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TEe(e)}function TEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lG=function(){return!!e})()}function kS(e){return kS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kS(e)}function AEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PO(e,t)}function PO(e,t){return PO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},PO(e,t)}function e_(e,t,n){return t=cG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cG(e){var t=EEe(e,"string");return Tg(t)=="symbol"?t:t+""}function EEe(e,t){if(Tg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Tg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kEe=Math.PI/180,PEe=1e-5,t_=function(e){function t(){return SEe(this,t),_Ee(this,t,arguments)}return AEe(t,e),NEe(t,[{key:"getTickLineCoord",value:function(i){var a=this.props,s=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,f=u||8,p=Rr(s,o,l,i.coordinate),g=Rr(s,o,l+(c==="inner"?-1:1)*f,i.coordinate);return{x1:p.x,y1:p.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(i){var a=this.props.orientation,s=Math.cos(-i.coordinate*kEe),o;return s>PEe?o=a==="outer"?"start":"end":s<-1e-5?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.axisLine,c=i.axisLineType,u=Kh(Kh({},$t(this.props,!1)),{},{fill:"none"},$t(l,!1));if(c==="circle")return Se.createElement(o0,ef({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:s,r:o}));var f=this.props.ticks,p=f.map(function(g){return Rr(a,s,o,g.coordinate)});return Se.createElement(XAe,ef({className:"recharts-polar-angle-axis-line"},u,{points:p}))}},{key:"renderTicks",value:function(){var i=this,a=this.props,s=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,f=$t(this.props,!1),p=$t(o,!1),g=Kh(Kh({},f),{},{fill:"none"},$t(l,!1)),x=s.map(function(v,j){var w=i.getTickLineCoord(v),_=i.getTickTextAnchor(v),T=Kh(Kh(Kh({textAnchor:_},f),{},{stroke:"none",fill:u},p),{},{index:j,payload:v,x:w.x2,y:w.y2});return Se.createElement(Dn,ef({className:dn("recharts-polar-angle-axis-tick",YH(o)),key:"tick-".concat(v.coordinate)},Mf(i.props,v,j)),l&&Se.createElement("line",ef({className:"recharts-polar-angle-axis-tick-line"},g,w)),o&&t.renderTickItem(o,T,c?c(v.value,j):v.value))});return Se.createElement(Dn,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var i=this.props,a=i.ticks,s=i.radius,o=i.axisLine;return s<=0||!a||!a.length?null:Se.createElement(Dn,{className:dn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(i,a,s){var o;return Se.isValidElement(i)?o=Se.cloneElement(i,a):tn(i)?o=i(a):o=Se.createElement(If,ef({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(b.PureComponent);e_(t_,"displayName","PolarAngleAxis");e_(t_,"axisType","angleAxis");e_(t_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var BE,Y8;function OEe(){if(Y8)return BE;Y8=1;var e=vV(),t=e(Object.getPrototypeOf,Object);return BE=t,BE}var zE,Q8;function DEe(){if(Q8)return zE;Q8=1;var e=Xc(),t=OEe(),n=Jc(),i="[object Object]",a=Function.prototype,s=Object.prototype,o=a.toString,l=s.hasOwnProperty,c=o.call(Object);function u(f){if(!n(f)||e(f)!=i)return!1;var p=t(f);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==c}return zE=u,zE}var MEe=DEe();const IEe=qn(MEe);var qE,X8;function REe(){if(X8)return qE;X8=1;var e=Xc(),t=Jc(),n="[object Boolean]";function i(a){return a===!0||a===!1||t(a)&&e(a)==n}return qE=i,qE}var LEe=REe();const FEe=qn(LEe);function wb(e){"@babel/helpers - typeof";return wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wb(e)}function PS(){return PS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},PS.apply(this,arguments)}function $Ee(e,t){return UEe(e)||qEe(e,t)||zEe(e,t)||BEe()}function BEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zEe(e,t){if(e){if(typeof e=="string")return J8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J8(e,t)}}function J8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function qEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function UEe(e){if(Array.isArray(e))return e}function Z8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function eB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z8(Object(n),!0).forEach(function(i){VEe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function VEe(e,t,n){return t=HEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HEe(e){var t=GEe(e,"string");return wb(t)=="symbol"?t:t+""}function GEe(e,t){if(wb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(wb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tB=function(t,n,i,a,s){var o=i-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+i,",").concat(n),l+="L ".concat(t+i-o/2,",").concat(n+s),l+="L ".concat(t+i-o/2-a,",").concat(n+s),l+="L ".concat(t,",").concat(n," Z"),l},WEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KEe=function(t){var n=eB(eB({},WEe),t),i=b.useRef(),a=b.useState(-1),s=$Ee(a,2),o=s[0],l=s[1];b.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var C=i.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,u=n.y,f=n.upperWidth,p=n.lowerWidth,g=n.height,x=n.className,v=n.animationEasing,j=n.animationDuration,w=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||p!==+p||g!==+g||f===0&&p===0||g===0)return null;var T=dn("recharts-trapezoid",x);return _?Se.createElement($o,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:g,x:c,y:u},to:{upperWidth:f,lowerWidth:p,height:g,x:c,y:u},duration:j,animationEasing:v,isActive:_},function(C){var O=C.upperWidth,A=C.lowerWidth,P=C.height,I=C.x,F=C.y;return Se.createElement($o,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:j,easing:v},Se.createElement("path",PS({},$t(n,!0),{className:T,d:tB(I,F,O,A,P),ref:i})))}):Se.createElement("g",null,Se.createElement("path",PS({},$t(n,!0),{className:T,d:tB(c,u,f,p,g)})))},YEe=["option","shapeType","propTransformer","activeClassName","isActive"];function Sb(e){"@babel/helpers - typeof";return Sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sb(e)}function QEe(e,t){if(e==null)return{};var n=XEe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function XEe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function nB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function OS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nB(Object(n),!0).forEach(function(i){JEe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function JEe(e,t,n){return t=ZEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZEe(e){var t=eke(e,"string");return Sb(t)=="symbol"?t:t+""}function eke(e,t){if(Sb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Sb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tke(e,t){return OS(OS({},t),e)}function nke(e,t){return e==="symbols"}function rB(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Se.createElement(eI,n);case"trapezoid":return Se.createElement(KEe,n);case"sector":return Se.createElement(JH,n);case"symbols":if(nke(t))return Se.createElement(vM,n);break;default:return null}}function rke(e){return b.isValidElement(e)?e.props:e}function uG(e){var t=e.option,n=e.shapeType,i=e.propTransformer,a=i===void 0?tke:i,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=QEe(e,YEe),u;if(b.isValidElement(t))u=b.cloneElement(t,OS(OS({},c),rke(t)));else if(tn(t))u=t(c);else if(IEe(t)&&!FEe(t)){var f=a(t,c);u=Se.createElement(rB,{shapeType:n,elementProps:f})}else{var p=c;u=Se.createElement(rB,{shapeType:n,elementProps:p})}return l?Se.createElement(Dn,{className:o},u):u}function n_(e,t){return t!=null&&"trapezoids"in e.props}function r_(e,t){return t!=null&&"sectors"in e.props}function Nb(e,t){return t!=null&&"points"in e.props}function ike(e,t){var n,i,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(i=t.labelViewBox)===null||i===void 0?void 0:i.y)||e.y===t.y;return a&&s}function ake(e,t){var n=e.endAngle===t.endAngle,i=e.startAngle===t.startAngle;return n&&i}function ske(e,t){var n=e.x===t.x,i=e.y===t.y,a=e.z===t.z;return n&&i&&a}function oke(e,t){var n;return n_(e,t)?n=ike:r_(e,t)?n=ake:Nb(e,t)&&(n=ske),n}function lke(e,t){var n;return n_(e,t)?n="trapezoids":r_(e,t)?n="sectors":Nb(e,t)&&(n="points"),n}function cke(e,t){if(n_(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(r_(e,t)){var i;return(i=t.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}return Nb(e,t)?t.payload:{}}function uke(e){var t=e.activeTooltipItem,n=e.graphicalItem,i=e.itemData,a=lke(n,t),s=cke(n,t),o=i.filter(function(c,u){var f=Rf(s,c),p=n.props[a].filter(function(v){var j=oke(n,t);return j(v,t)}),g=n.props[a].indexOf(p[p.length-1]),x=u===g;return f&&x}),l=i.indexOf(o[o.length-1]);return l}var _w;function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Bm.apply(this,arguments)}function iB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iB(Object(n),!0).forEach(function(i){eo(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function dke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,hG(i.key),i)}}function hke(e,t,n){return t&&aB(e.prototype,t),n&&aB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fke(e,t,n){return t=DS(t),pke(e,dG()?Reflect.construct(t,n||[],DS(e).constructor):t.apply(e,n))}function pke(e,t){if(t&&(Ag(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mke(e)}function mke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dG=function(){return!!e})()}function DS(e){return DS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},DS(e)}function gke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OO(e,t)}function OO(e,t){return OO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},OO(e,t)}function eo(e,t,n){return t=hG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hG(e){var t=yke(e,"string");return Ag(t)=="symbol"?t:t+""}function yke(e,t){if(Ag(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Ag(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vl=function(e){function t(n){var i;return dke(this,t),i=fke(this,t,[n]),eo(i,"pieRef",null),eo(i,"sectorRefs",[]),eo(i,"id",Uf("recharts-pie-")),eo(i,"handleAnimationEnd",function(){var a=i.props.onAnimationEnd;i.setState({isAnimationFinished:!0}),tn(a)&&a()}),eo(i,"handleAnimationStart",function(){var a=i.props.onAnimationStart;i.setState({isAnimationFinished:!1}),tn(a)&&a()}),i.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},i}return gke(t,e),hke(t,[{key:"isActiveIndex",value:function(i){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(i)!==-1:i===a}},{key:"hasActiveIndex",value:function(){var i=this.props.activeIndex;return Array.isArray(i)?i.length!==0:i||i===0}},{key:"renderLabels",value:function(i){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,f=$t(this.props,!1),p=$t(o,!1),g=$t(l,!1),x=o&&o.offsetRadius||20,v=i.map(function(j,w){var _=(j.startAngle+j.endAngle)/2,T=Rr(j.cx,j.cy,j.outerRadius+x,_),C=Mr(Mr(Mr(Mr({},f),j),{},{stroke:"none"},p),{},{index:w,textAnchor:t.getTextAnchor(T.x,j.cx)},T),O=Mr(Mr(Mr(Mr({},f),j),{},{fill:"none",stroke:j.fill},g),{},{index:w,points:[Rr(j.cx,j.cy,j.outerRadius,_),T]}),A=c;return cn(c)&&cn(u)?A="value":cn(c)&&(A=u),Se.createElement(Dn,{key:"label-".concat(j.startAngle,"-").concat(j.endAngle,"-").concat(j.midAngle,"-").concat(w)},l&&t.renderLabelLineItem(l,O,"line"),t.renderLabelItem(o,C,li(j,A)))});return Se.createElement(Dn,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(i){var a=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return i.map(function(u,f){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&i.length!==1)return null;var p=a.isActiveIndex(f),g=c&&a.hasActiveIndex()?c:null,x=p?o:g,v=Mr(Mr({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return Se.createElement(Dn,Bm({ref:function(w){w&&!a.sectorRefs.includes(w)&&a.sectorRefs.push(w)},tabIndex:-1,className:"recharts-pie-sector"},Mf(a.props,u,f),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(f)}),Se.createElement(uG,Bm({option:x,isActive:p,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var i=this,a=this.props,s=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,f=a.animationId,p=this.state,g=p.prevSectors,x=p.prevIsAnimationActive;return Se.createElement($o,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var j=v.t,w=[],_=s&&s[0],T=_.startAngle;return s.forEach(function(C,O){var A=g&&g[O],P=O>0?Ms(C,"paddingAngle",0):0;if(A){var I=_i(A.endAngle-A.startAngle,C.endAngle-C.startAngle),F=Mr(Mr({},C),{},{startAngle:T+P,endAngle:T+I(j)+P});w.push(F),T=F.endAngle}else{var B=C.endAngle,$=C.startAngle,L=_i(0,B-$),V=L(j),H=Mr(Mr({},C),{},{startAngle:T+P,endAngle:T+V+P});w.push(H),T=H.endAngle}}),Se.createElement(Dn,null,i.renderSectorsStatically(w))})}},{key:"attachKeyboardHandlers",value:function(i){var a=this;i.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var i=this.props,a=i.sectors,s=i.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!Rf(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var i=this,a=this.props,s=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,f=a.cy,p=a.innerRadius,g=a.outerRadius,x=a.isAnimationActive,v=this.state.isAnimationFinished;if(s||!o||!o.length||!jt(u)||!jt(f)||!jt(p)||!jt(g))return null;var j=dn("recharts-pie",l);return Se.createElement(Dn,{tabIndex:this.props.rootTabIndex,className:j,ref:function(_){i.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),Mi.renderCallByParent(this.props,null,!1),(!x||v)&&Ll.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return a.prevIsAnimationActive!==i.isAnimationActive?{prevIsAnimationActive:i.isAnimationActive,prevAnimationId:i.animationId,curSectors:i.sectors,prevSectors:[],isAnimationFinished:!0}:i.isAnimationActive&&i.animationId!==a.prevAnimationId?{prevAnimationId:i.animationId,curSectors:i.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:i.sectors!==a.curSectors?{curSectors:i.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(i,a){return i>a?"start":i<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(i,a,s){if(Se.isValidElement(i))return Se.cloneElement(i,a);if(tn(i))return i(a);var o=dn("recharts-pie-label-line",typeof i!="boolean"?i.className:"");return Se.createElement(jf,Bm({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(i,a,s){if(Se.isValidElement(i))return Se.cloneElement(i,a);var o=s;if(tn(i)&&(o=i(a),Se.isValidElement(o)))return o;var l=dn("recharts-pie-label-text",typeof i!="boolean"&&!tn(i)?i.className:"");return Se.createElement(If,Bm({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(b.PureComponent);_w=Vl;eo(Vl,"displayName","Pie");eo(Vl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Cd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});eo(Vl,"parseDeltaAngle",function(e,t){var n=Ia(t-e),i=Math.min(Math.abs(t-e),360);return n*i});eo(Vl,"getRealPieData",function(e){var t=e.data,n=e.children,i=$t(e,!1),a=Is(n,t0);return t&&t.length?t.map(function(s,o){return Mr(Mr(Mr({payload:s},i),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return Mr(Mr({},i),s.props)}):[]});eo(Vl,"parseCoordinateOfPie",function(e,t){var n=t.top,i=t.left,a=t.width,s=t.height,o=KH(a,s),l=i+Ra(e.cx,a,a/2),c=n+Ra(e.cy,s,s/2),u=Ra(e.innerRadius,o,0),f=Ra(e.outerRadius,o,o*.8),p=e.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:p}});eo(Vl,"getComposedData",function(e){var t=e.item,n=e.offset,i=t.type.defaultProps!==void 0?Mr(Mr({},t.type.defaultProps),t.props):t.props,a=_w.getRealPieData(i);if(!a||!a.length)return null;var s=i.cornerRadius,o=i.startAngle,l=i.endAngle,c=i.paddingAngle,u=i.dataKey,f=i.nameKey,p=i.valueKey,g=i.tooltipType,x=Math.abs(i.minAngle),v=_w.parseCoordinateOfPie(i,n),j=_w.parseDeltaAngle(o,l),w=Math.abs(j),_=u;cn(u)&&cn(p)?(Fo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):cn(u)&&(Fo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=p);var T=a.filter(function(F){return li(F,_,0)!==0}).length,C=(w>=360?T:T-1)*c,O=w-T*x-C,A=a.reduce(function(F,B){var $=li(B,_,0);return F+(jt($)?$:0)},0),P;if(A>0){var I;P=a.map(function(F,B){var $=li(F,_,0),L=li(F,f,B),V=(jt($)?$:0)/A,H;B?H=I.endAngle+Ia(j)*c*($!==0?1:0):H=o;var te=H+Ia(j)*(($!==0?x:0)+V*O),X=(H+te)/2,q=(v.innerRadius+v.outerRadius)/2,W=[{name:L,value:$,payload:F,dataKey:_,type:g}],ae=Rr(v.cx,v.cy,q,X);return I=Mr(Mr(Mr({percent:V,cornerRadius:s,name:L,tooltipPayload:W,midAngle:X,middleRadius:q,tooltipPosition:ae},F),v),{},{value:li(F,_),startAngle:H,endAngle:te,payload:F,paddingAngle:Ia(j)*c}),I})}return Mr(Mr({},v),{},{sectors:P,data:a})});var UE,sB;function xke(){if(sB)return UE;sB=1;var e=Math.ceil,t=Math.max;function n(i,a,s,o){for(var l=-1,c=t(e((a-i)/(s||1)),0),u=Array(c);c--;)u[o?c:++l]=i,i+=s;return u}return UE=n,UE}var VE,oB;function fG(){if(oB)return VE;oB=1;var e=IV(),t=1/0,n=17976931348623157e292;function i(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-1/0){var s=a<0?-1:1;return s*n}return a===a?a:0}return VE=i,VE}var HE,lB;function vke(){if(lB)return HE;lB=1;var e=xke(),t=zN(),n=fG();function i(a){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,a)}}return HE=i,HE}var GE,cB;function bke(){if(cB)return GE;cB=1;var e=vke(),t=e();return GE=t,GE}var jke=bke();const MS=qn(jke);function _b(e){"@babel/helpers - typeof";return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_b(e)}function uB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function dB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uB(Object(n),!0).forEach(function(i){pG(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function pG(e,t,n){return t=wke(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wke(e){var t=Ske(e,"string");return _b(t)=="symbol"?t:t+""}function Ske(e,t){if(_b(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(_b(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nke=["Webkit","Moz","O","ms"],_ke=function(t,n){var i=t.replace(/(\w)/,function(s){return s.toUpperCase()}),a=Nke.reduce(function(s,o){return dB(dB({},s),{},pG({},o+i,n))},{});return a[t]=n,a};function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function IS(){return IS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},IS.apply(this,arguments)}function hB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function WE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hB(Object(n),!0).forEach(function(i){Cs(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Cke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,gG(i.key),i)}}function Tke(e,t,n){return t&&fB(e.prototype,t),n&&fB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ake(e,t,n){return t=RS(t),Eke(e,mG()?Reflect.construct(t,n||[],RS(e).constructor):t.apply(e,n))}function Eke(e,t){if(t&&(Eg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kke(e)}function kke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mG=function(){return!!e})()}function RS(e){return RS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},RS(e)}function Pke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DO(e,t)}function DO(e,t){return DO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},DO(e,t)}function Cs(e,t,n){return t=gG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gG(e){var t=Oke(e,"string");return Eg(t)=="symbol"?t:t+""}function Oke(e,t){if(Eg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Eg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Dke=function(t){var n=t.data,i=t.startIndex,a=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Mv().domain(MS(0,c)).range([s,s+o-l]),f=u.domain().map(function(p){return u(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(i),endX:u(a),scale:u,scaleValues:f}},pB=function(t){return t.changedTouches&&!!t.changedTouches.length},kg=function(e){function t(n){var i;return Cke(this,t),i=Ake(this,t,[n]),Cs(i,"handleDrag",function(a){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(a):i.state.isSlideMoving&&i.handleSlideDrag(a)}),Cs(i,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&i.handleDrag(a.changedTouches[0])}),Cs(i,"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=i.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),i.detachDragEndListener()}),Cs(i,"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),Cs(i,"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),Cs(i,"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),Cs(i,"handleSlideDragStart",function(a){var s=pB(a)?a.changedTouches[0]:a;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(i,"startX"),endX:i.handleTravellerDragStart.bind(i,"endX")},i.state={},i}return Pke(t,e),Tke(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var a=i.startX,s=i.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,p=Math.min(a,s),g=Math.max(a,s),x=t.getIndexInRange(o,p),v=t.getIndexInRange(o,g);return{startIndex:x-x%c,endIndex:v===f?f:v-v%c}}},{key:"getTextOfTick",value:function(i){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=li(s[i],l,i);return tn(o)?o(c,i):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,f=c.width,p=c.travellerWidth,g=c.startIndex,x=c.endIndex,v=c.onChange,j=i.pageX-s;j>0?j=Math.min(j,u+f-p-l,u+f-p-o):j<0&&(j=Math.max(j,u-o,u-l));var w=this.getIndex({startX:o+j,endX:l+j});(w.startIndex!==g||w.endIndex!==x)&&v&&v(w),this.setState({startX:o+j,endX:l+j,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,a){var s=pB(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],f=this.props,p=f.x,g=f.width,x=f.travellerWidth,v=f.onChange,j=f.gap,w=f.data,_={startX:this.state.startX,endX:this.state.endX},T=i.pageX-s;T>0?T=Math.min(T,p+g-x-u):T<0&&(T=Math.max(T,p-u)),_[o]=u+T;var C=this.getIndex(_),O=C.startIndex,A=C.endIndex,P=function(){var F=w.length-1;return o==="startX"&&(l>c?O%j===0:A%j===0)||l<c&&A===F||o==="endX"&&(l>c?A%j===0:O%j===0)||l>c&&A===F};this.setState(Cs(Cs({},o,u+T),"brushMoveStartX",i.pageX),function(){v&&P()&&v(C)})}},{key:"handleTravellerMoveKeyboard",value:function(i,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[a],p=l.indexOf(f);if(p!==-1){var g=p+i;if(!(g===-1||g>=l.length)){var x=l[g];a==="startX"&&x>=u||a==="endX"&&x<=c||this.setState(Cs({},a,x),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.fill,u=i.stroke;return Se.createElement("rect",{stroke:u,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.data,u=i.children,f=i.padding,p=b.Children.only(u);return p?Se.cloneElement(p,{x:a,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(i,a){var s,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,p=c.height,g=c.traveller,x=c.ariaLabel,v=c.data,j=c.startIndex,w=c.endIndex,_=Math.max(i,this.props.x),T=WE(WE({},$t(this.props,!1)),{},{x:_,y:u,width:f,height:p}),C=x||"Min value: ".concat((s=v[j])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=v[w])===null||o===void 0?void 0:o.name);return Se.createElement(Dn,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),l.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(g,T))}},{key:"renderSlide",value:function(i,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,f=Math.min(i,a)+u,p=Math.max(Math.abs(a-i)-u,0);return Se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var i=this.props,a=i.startIndex,s=i.endIndex,o=i.y,l=i.height,c=i.travellerWidth,u=i.stroke,f=this.state,p=f.startX,g=f.endX,x=5,v={pointerEvents:"none",fill:u};return Se.createElement(Dn,{className:"recharts-brush-texts"},Se.createElement(If,IS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-x,y:o+l/2},v),this.getTextOfTick(a)),Se.createElement(If,IS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+c+x,y:o+l/2},v),this.getTextOfTick(s)))}},{key:"render",value:function(){var i=this.props,a=i.data,s=i.className,o=i.children,l=i.x,c=i.y,u=i.width,f=i.height,p=i.alwaysShowText,g=this.state,x=g.startX,v=g.endX,j=g.isTextActive,w=g.isSlideMoving,_=g.isTravellerMoving,T=g.isTravellerFocused;if(!a||!a.length||!jt(l)||!jt(c)||!jt(u)||!jt(f)||u<=0||f<=0)return null;var C=dn("recharts-brush",s),O=Se.Children.count(o)===1,A=_ke("userSelect","none");return Se.createElement(Dn,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),O&&this.renderPanorama(),this.renderSlide(x,v),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(v,"endX"),(j||w||_||T||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var a=i.x,s=i.y,o=i.width,l=i.height,c=i.stroke,u=Math.floor(s+l/2)-1;return Se.createElement(Se.Fragment,null,Se.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),Se.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),Se.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,a){var s;return Se.isValidElement(i)?s=Se.cloneElement(i,a):tn(i)?s=i(a):s=t.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(i,a){var s=i.data,o=i.width,l=i.x,c=i.travellerWidth,u=i.updateId,f=i.startIndex,p=i.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return WE({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?Dke({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var g=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(i.startIndex),endX:a.scale(i.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(i,a){for(var s=i.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);i[c]>a?l=c:o=c}return a>=i[l]?l:o}}])}(b.PureComponent);Cs(kg,"displayName","Brush");Cs(kg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var KE,mB;function Mke(){if(mB)return KE;mB=1;var e=CM();function t(n,i){var a;return e(n,function(s,o,l){return a=i(s,o,l),!a}),!!a}return KE=t,KE}var YE,gB;function Ike(){if(gB)return YE;gB=1;var e=hV(),t=Ul(),n=Mke(),i=hs(),a=zN();function s(o,l,c){var u=i(o)?e:n;return c&&a(o,l,c)&&(l=void 0),u(o,t(l,3))}return YE=s,YE}var Rke=Ike();const Lke=qn(Rke);var Fl=function(t,n){var i=t.alwaysShow,a=t.ifOverflow;return i&&(a="extendDomain"),a===n},QE,yB;function Fke(){if(yB)return QE;yB=1;var e=kV();function t(n,i,a){i=="__proto__"&&e?e(n,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[i]=a}return QE=t,QE}var XE,xB;function $ke(){if(xB)return XE;xB=1;var e=Fke(),t=AV(),n=Ul();function i(a,s){var o={};return s=n(s,3),t(a,function(l,c,u){e(o,c,s(l,c,u))}),o}return XE=i,XE}var Bke=$ke();const zke=qn(Bke);var JE,vB;function qke(){if(vB)return JE;vB=1;function e(t,n){for(var i=-1,a=t==null?0:t.length;++i<a;)if(!n(t[i],i,t))return!1;return!0}return JE=e,JE}var ZE,bB;function Uke(){if(bB)return ZE;bB=1;var e=CM();function t(n,i){var a=!0;return e(n,function(s,o,l){return a=!!i(s,o,l),a}),a}return ZE=t,ZE}var ek,jB;function Vke(){if(jB)return ek;jB=1;var e=qke(),t=Uke(),n=Ul(),i=hs(),a=zN();function s(o,l,c){var u=i(o)?e:t;return c&&a(o,l,c)&&(l=void 0),u(o,n(l,3))}return ek=s,ek}var Hke=Vke();const yG=qn(Hke);var Gke=["x","y"];function Cb(e){"@babel/helpers - typeof";return Cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cb(e)}function MO(){return MO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},MO.apply(this,arguments)}function wB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function gv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wB(Object(n),!0).forEach(function(i){Wke(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Wke(e,t,n){return t=Kke(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kke(e){var t=Yke(e,"string");return Cb(t)=="symbol"?t:t+""}function Yke(e,t){if(Cb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Cb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qke(e,t){if(e==null)return{};var n=Xke(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Xke(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function Jke(e,t){var n=e.x,i=e.y,a=Qke(e,Gke),s="".concat(n),o=parseInt(s,10),l="".concat(i),c=parseInt(l,10),u="".concat(t.height||a.height),f=parseInt(u,10),p="".concat(t.width||a.width),g=parseInt(p,10);return gv(gv(gv(gv(gv({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:g,name:t.name,radius:t.radius})}function SB(e){return Se.createElement(uG,MO({shapeType:"rectangle",propTransformer:Jke,activeClassName:"recharts-active-bar"},e))}var Zke=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(i,a){if(typeof t=="number")return t;var s=jt(i)||Sbe(i);return s?t(i,a):(s||Ff(),n)}},ePe=["value","background"],xG;function Pg(e){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg(e)}function tPe(e,t){if(e==null)return{};var n=nPe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function nPe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function LS(){return LS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},LS.apply(this,arguments)}function NB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NB(Object(n),!0).forEach(function(i){hd(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function rPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,bG(i.key),i)}}function iPe(e,t,n){return t&&_B(e.prototype,t),n&&_B(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function aPe(e,t,n){return t=FS(t),sPe(e,vG()?Reflect.construct(t,n||[],FS(e).constructor):t.apply(e,n))}function sPe(e,t){if(t&&(Pg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oPe(e)}function oPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vG=function(){return!!e})()}function FS(e){return FS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},FS(e)}function lPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IO(e,t)}function IO(e,t){return IO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},IO(e,t)}function hd(e,t,n){return t=bG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bG(e){var t=cPe(e,"string");return Pg(t)=="symbol"?t:t+""}function cPe(e,t){if(Pg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Pg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kd=function(e){function t(){var n;rPe(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=aPe(this,t,[].concat(a)),hd(n,"state",{isAnimationFinished:!1}),hd(n,"id",Uf("recharts-bar-")),hd(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),hd(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return lPe(t,e),iPe(t,[{key:"renderRectanglesStatically",value:function(i){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,f=$t(this.props,!1);return i&&i.map(function(p,g){var x=g===c,v=x?u:o,j=gi(gi(gi({},f),p),{},{isActive:x,option:v,index:g,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Se.createElement(Dn,LS({className:"recharts-bar-rectangle"},Mf(a.props,p,g),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(g)}),Se.createElement(SB,j))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,f=a.animationEasing,p=a.animationId,g=this.state.prevData;return Se.createElement($o,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var v=x.t,j=s.map(function(w,_){var T=g&&g[_];if(T){var C=_i(T.x,w.x),O=_i(T.y,w.y),A=_i(T.width,w.width),P=_i(T.height,w.height);return gi(gi({},w),{},{x:C(v),y:O(v),width:A(v),height:P(v)})}if(o==="horizontal"){var I=_i(0,w.height),F=I(v);return gi(gi({},w),{},{y:w.y+w.height-F,height:F})}var B=_i(0,w.width),$=B(v);return gi(gi({},w),{},{width:$})});return Se.createElement(Dn,null,i.renderRectanglesStatically(j))})}},{key:"renderRectangles",value:function(){var i=this.props,a=i.data,s=i.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!Rf(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var i=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=$t(this.props.background,!1);return s.map(function(u,f){u.value;var p=u.background,g=tPe(u,ePe);if(!p)return null;var x=gi(gi(gi(gi(gi({},g),{},{fill:"#eee"},p),c),Mf(i.props,u,f)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Se.createElement(SB,LS({key:"background-bar-".concat(f),option:i.props.background,isActive:f===l},x))})}},{key:"renderErrorBar",value:function(i,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,p=Is(f,s0);if(!p)return null;var g=u==="vertical"?o[0].height/2:o[0].width/2,x=function(w,_){var T=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:T,errorVal:li(w,_)}},v={clipPath:i?"url(#clipPath-".concat(a,")"):null};return Se.createElement(Dn,v,p.map(function(j){return Se.cloneElement(j,{key:"error-bar-".concat(a,"-").concat(j.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var i=this.props,a=i.hide,s=i.data,o=i.className,l=i.xAxis,c=i.yAxis,u=i.left,f=i.top,p=i.width,g=i.height,x=i.isAnimationActive,v=i.background,j=i.id;if(a||!s||!s.length)return null;var w=this.state.isAnimationFinished,_=dn("recharts-bar",o),T=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,O=T||C,A=cn(j)?this.id:j;return Se.createElement(Dn,{className:_},T||C?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(A)},Se.createElement("rect",{x:T?u:u-p/2,y:C?f:f-g/2,width:T?p:p*2,height:C?g:g*2}))):null,Se.createElement(Dn,{className:"recharts-bar-rectangles",clipPath:O?"url(#clipPath-".concat(A,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(O,A),(!x||w)&&Ll.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return i.animationId!==a.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:a.curData}:i.data!==a.curData?{curData:i.data}:null}}])}(b.PureComponent);xG=kd;hd(kd,"displayName","Bar");hd(kd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Cd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});hd(kd,"getComposedData",function(e){var t=e.props,n=e.item,i=e.barPosition,a=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,p=e.displayedData,g=e.offset,x=LCe(i,n);if(!x)return null;var v=t.layout,j=n.type.defaultProps,w=j!==void 0?gi(gi({},j),n.props):n.props,_=w.dataKey,T=w.children,C=w.minPointSize,O=v==="horizontal"?o:s,A=u?O.scale.domain():null,P=VCe({numericAxis:O}),I=Is(T,t0),F=p.map(function(B,$){var L,V,H,te,X,q;u?L=FCe(u[f+$],A):(L=li(B,_),Array.isArray(L)||(L=[P,L]));var W=Zke(C,xG.defaultProps.minPointSize)(L[1],$);if(v==="horizontal"){var ae,G=[o.scale(L[0]),o.scale(L[1])],z=G[0],le=G[1];V=X$({axis:s,ticks:l,bandSize:a,offset:x.offset,entry:B,index:$}),H=(ae=le??z)!==null&&ae!==void 0?ae:void 0,te=x.size;var je=z-le;if(X=Number.isNaN(je)?0:je,q={x:V,y:o.y,width:te,height:o.height},Math.abs(W)>0&&Math.abs(X)<Math.abs(W)){var Y=Ia(X||W)*(Math.abs(W)-Math.abs(X));H-=Y,X+=Y}}else{var Oe=[s.scale(L[0]),s.scale(L[1])],Ke=Oe[0],Me=Oe[1];if(V=Ke,H=X$({axis:o,ticks:c,bandSize:a,offset:x.offset,entry:B,index:$}),te=Me-Ke,X=x.size,q={x:s.x,y:H,width:s.width,height:X},Math.abs(W)>0&&Math.abs(te)<Math.abs(W)){var Ie=Ia(te||W)*(Math.abs(W)-Math.abs(te));te+=Ie}}return gi(gi(gi({},B),{},{x:V,y:H,width:te,height:X,value:u?L:L[1],payload:B,background:q},I&&I[$]&&I[$].props),{},{tooltipPayload:[GH(n,B)],tooltipPosition:{x:V+te/2,y:H+X/2}})});return gi({data:F,layout:v},g)});function Tb(e){"@babel/helpers - typeof";return Tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tb(e)}function uPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,jG(i.key),i)}}function dPe(e,t,n){return t&&CB(e.prototype,t),n&&CB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function TB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TB(Object(n),!0).forEach(function(i){i_(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function i_(e,t,n){return t=jG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jG(e){var t=hPe(e,"string");return Tb(t)=="symbol"?t:t+""}function hPe(e,t){if(Tb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Tb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tI=function(t,n,i,a,s){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(n),p={left:i.left,leftMirror:i.left,right:o-i.right,rightMirror:o-i.right,top:i.top,topMirror:i.top,bottom:l-i.bottom,bottomMirror:l-i.bottom},g=!!Ts(u,kd);return f.reduce(function(x,v){var j=n[v],w=j.orientation,_=j.domain,T=j.padding,C=T===void 0?{}:T,O=j.mirror,A=j.reversed,P="".concat(w).concat(O?"Mirror":""),I,F,B,$,L;if(j.type==="number"&&(j.padding==="gap"||j.padding==="no-gap")){var V=_[1]-_[0],H=1/0,te=j.categoricalDomain.sort(Cbe);if(te.forEach(function(Oe,Ke){Ke>0&&(H=Math.min((Oe||0)-(te[Ke-1]||0),H))}),Number.isFinite(H)){var X=H/V,q=j.layout==="vertical"?i.height:i.width;if(j.padding==="gap"&&(I=X*q/2),j.padding==="no-gap"){var W=Ra(t.barCategoryGap,X*q),ae=X*q/2;I=ae-W-(ae-W)/q*W}}}a==="xAxis"?F=[i.left+(C.left||0)+(I||0),i.left+i.width-(C.right||0)-(I||0)]:a==="yAxis"?F=c==="horizontal"?[i.top+i.height-(C.bottom||0),i.top+(C.top||0)]:[i.top+(C.top||0)+(I||0),i.top+i.height-(C.bottom||0)-(I||0)]:F=j.range,A&&(F=[F[1],F[0]]);var G=qH(j,s,g),z=G.scale,le=G.realScaleType;z.domain(_).range(F),UH(z);var je=VH(z,Do(Do({},j),{},{realScaleType:le}));a==="xAxis"?(L=w==="top"&&!O||w==="bottom"&&O,B=i.left,$=p[P]-L*j.height):a==="yAxis"&&(L=w==="left"&&!O||w==="right"&&O,B=p[P]-L*j.width,$=i.top);var Y=Do(Do(Do({},j),je),{},{realScaleType:le,x:B,y:$,scale:z,width:a==="xAxis"?i.width:j.width,height:a==="yAxis"?i.height:j.height});return Y.bandSize=wS(Y,je),!j.hide&&a==="xAxis"?p[P]+=(L?-1:1)*Y.height:j.hide||(p[P]+=(L?-1:1)*Y.width),Do(Do({},x),{},i_({},v,Y))},{})},wG=function(t,n){var i=t.x,a=t.y,s=n.x,o=n.y;return{x:Math.min(i,s),y:Math.min(a,o),width:Math.abs(s-i),height:Math.abs(o-a)}},fPe=function(t){var n=t.x1,i=t.y1,a=t.x2,s=t.y2;return wG({x:n,y:i},{x:a,y:s})},SG=function(){function e(t){uPe(this,e),this.scale=t}return dPe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.bandAware,s=i.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var i=this.range(),a=i[0],s=i[i.length-1];return a<=s?n>=a&&n<=s:n>=s&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();i_(SG,"EPS",1e-4);var nI=function(t){var n=Object.keys(t).reduce(function(i,a){return Do(Do({},i),{},i_({},a,SG.create(t[a])))},{});return Do(Do({},n),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return zke(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return yG(a,function(s,o){return n[o].isInRange(s)})}})};function pPe(e){return(e%180+180)%180}var mPe=function(t){var n=t.width,i=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=pPe(a),o=s*Math.PI/180,l=Math.atan(i/n),c=o>l&&o<Math.PI-l?i/Math.sin(o):n/Math.cos(o);return Math.abs(c)},tk,AB;function gPe(){if(AB)return tk;AB=1;var e=Ul(),t=e0(),n=$N();function i(a){return function(s,o,l){var c=Object(s);if(!t(s)){var u=e(o,3);s=n(s),o=function(p){return u(c[p],p,c)}}var f=a(s,o,l);return f>-1?c[u?s[f]:f]:void 0}}return tk=i,tk}var nk,EB;function yPe(){if(EB)return nk;EB=1;var e=fG();function t(n){var i=e(n),a=i%1;return i===i?a?i-a:i:0}return nk=t,nk}var rk,kB;function xPe(){if(kB)return rk;kB=1;var e=SV(),t=Ul(),n=yPe(),i=Math.max;function a(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var u=l==null?0:n(l);return u<0&&(u=i(c+u,0)),e(s,t(o,3),u)}return rk=a,rk}var ik,PB;function vPe(){if(PB)return ik;PB=1;var e=gPe(),t=xPe(),n=e(t);return ik=n,ik}var bPe=vPe();const jPe=qn(bPe);var wPe=F7();const SPe=qn(wPe);var NPe=SPe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),rI=b.createContext(void 0),iI=b.createContext(void 0),NG=b.createContext(void 0),_G=b.createContext({}),CG=b.createContext(void 0),TG=b.createContext(0),AG=b.createContext(0),OB=function(t){var n=t.state,i=n.xAxisMap,a=n.yAxisMap,s=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=NPe(s);return Se.createElement(rI.Provider,{value:i},Se.createElement(iI.Provider,{value:a},Se.createElement(_G.Provider,{value:s},Se.createElement(NG.Provider,{value:f},Se.createElement(CG.Provider,{value:o},Se.createElement(TG.Provider,{value:u},Se.createElement(AG.Provider,{value:c},l)))))))},_Pe=function(){return b.useContext(CG)},EG=function(t){var n=b.useContext(rI);n==null&&Ff();var i=n[t];return i==null&&Ff(),i},CPe=function(){var t=b.useContext(rI);return ed(t)},TPe=function(){var t=b.useContext(iI),n=jPe(t,function(i){return yG(i.domain,Number.isFinite)});return n||ed(t)},kG=function(t){var n=b.useContext(iI);n==null&&Ff();var i=n[t];return i==null&&Ff(),i},APe=function(){var t=b.useContext(NG);return t},EPe=function(){return b.useContext(_G)},aI=function(){return b.useContext(AG)},sI=function(){return b.useContext(TG)};function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}function kPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PPe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,OG(i.key),i)}}function OPe(e,t,n){return t&&PPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function DPe(e,t,n){return t=$S(t),MPe(e,PG()?Reflect.construct(t,n||[],$S(e).constructor):t.apply(e,n))}function MPe(e,t){if(t&&(Og(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IPe(e)}function IPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PG=function(){return!!e})()}function $S(e){return $S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$S(e)}function RPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RO(e,t)}function RO(e,t){return RO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},RO(e,t)}function DB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function MB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DB(Object(n),!0).forEach(function(i){oI(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function oI(e,t,n){return t=OG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OG(e){var t=LPe(e,"string");return Og(t)=="symbol"?t:t+""}function LPe(e,t){if(Og(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Og(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function FPe(e,t){return qPe(e)||zPe(e,t)||BPe(e,t)||$Pe()}function $Pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BPe(e,t){if(e){if(typeof e=="string")return IB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IB(e,t)}}function IB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function zPe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function qPe(e){if(Array.isArray(e))return e}function LO(){return LO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},LO.apply(this,arguments)}var UPe=function(t,n){var i;return Se.isValidElement(t)?i=Se.cloneElement(t,n):tn(t)?i=t(n):i=Se.createElement("line",LO({},n,{className:"recharts-reference-line-line"})),i},VPe=function(t,n,i,a,s,o,l,c,u){var f=s.x,p=s.y,g=s.width,x=s.height;if(i){var v=u.y,j=t.y.apply(v,{position:o});if(Fl(u,"discard")&&!t.y.isInRange(j))return null;var w=[{x:f+g,y:j},{x:f,y:j}];return c==="left"?w.reverse():w}if(n){var _=u.x,T=t.x.apply(_,{position:o});if(Fl(u,"discard")&&!t.x.isInRange(T))return null;var C=[{x:T,y:p+x},{x:T,y:p}];return l==="top"?C.reverse():C}if(a){var O=u.segment,A=O.map(function(P){return t.apply(P,{position:o})});return Fl(u,"discard")&&Lke(A,function(P){return!t.isInRange(P)})?null:A}return null};function HPe(e){var t=e.x,n=e.y,i=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=_Pe(),f=EG(a),p=kG(s),g=APe();if(!u||!g)return null;Fo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=nI({x:f.scale,y:p.scale}),v=Ci(t),j=Ci(n),w=i&&i.length===2,_=VPe(x,v,j,w,g,e.position,f.orientation,p.orientation,e);if(!_)return null;var T=FPe(_,2),C=T[0],O=C.x,A=C.y,P=T[1],I=P.x,F=P.y,B=Fl(e,"hidden")?"url(#".concat(u,")"):void 0,$=MB(MB({clipPath:B},$t(e,!0)),{},{x1:O,y1:A,x2:I,y2:F});return Se.createElement(Dn,{className:dn("recharts-reference-line",l)},UPe(o,$),Mi.renderCallByParent(e,fPe({x1:O,y1:A,x2:I,y2:F})))}var lI=function(e){function t(){return kPe(this,t),DPe(this,t,arguments)}return RPe(t,e),OPe(t,[{key:"render",value:function(){return Se.createElement(HPe,this.props)}}])}(Se.Component);oI(lI,"displayName","ReferenceLine");oI(lI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function FO(){return FO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},FO.apply(this,arguments)}function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function RB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function LB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RB(Object(n),!0).forEach(function(i){a_(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function GPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WPe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,MG(i.key),i)}}function KPe(e,t,n){return t&&WPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YPe(e,t,n){return t=BS(t),QPe(e,DG()?Reflect.construct(t,n||[],BS(e).constructor):t.apply(e,n))}function QPe(e,t){if(t&&(Dg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XPe(e)}function XPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DG=function(){return!!e})()}function BS(e){return BS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},BS(e)}function JPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$O(e,t)}function $O(e,t){return $O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},$O(e,t)}function a_(e,t,n){return t=MG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MG(e){var t=ZPe(e,"string");return Dg(t)=="symbol"?t:t+""}function ZPe(e,t){if(Dg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Dg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var eOe=function(t){var n=t.x,i=t.y,a=t.xAxis,s=t.yAxis,o=nI({x:a.scale,y:s.scale}),l=o.apply({x:n,y:i},{bandAware:!0});return Fl(t,"discard")&&!o.isInRange(l)?null:l},s_=function(e){function t(){return GPe(this,t),YPe(this,t,arguments)}return JPe(t,e),KPe(t,[{key:"render",value:function(){var i=this.props,a=i.x,s=i.y,o=i.r,l=i.alwaysShow,c=i.clipPathId,u=Ci(a),f=Ci(s);if(Fo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var p=eOe(this.props);if(!p)return null;var g=p.x,x=p.y,v=this.props,j=v.shape,w=v.className,_=Fl(this.props,"hidden")?"url(#".concat(c,")"):void 0,T=LB(LB({clipPath:_},$t(this.props,!0)),{},{cx:g,cy:x});return Se.createElement(Dn,{className:dn("recharts-reference-dot",w)},t.renderDot(j,T),Mi.renderCallByParent(this.props,{x:g-o,y:x-o,width:2*o,height:2*o}))}}])}(Se.Component);a_(s_,"displayName","ReferenceDot");a_(s_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});a_(s_,"renderDot",function(e,t){var n;return Se.isValidElement(e)?n=Se.cloneElement(e,t):tn(e)?n=e(t):n=Se.createElement(o0,FO({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function BO(){return BO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},BO.apply(this,arguments)}function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function FB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function $B(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FB(Object(n),!0).forEach(function(i){o_(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function tOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nOe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,RG(i.key),i)}}function rOe(e,t,n){return t&&nOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function iOe(e,t,n){return t=zS(t),aOe(e,IG()?Reflect.construct(t,n||[],zS(e).constructor):t.apply(e,n))}function aOe(e,t){if(t&&(Mg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sOe(e)}function sOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IG=function(){return!!e})()}function zS(e){return zS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zS(e)}function oOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zO(e,t)}function zO(e,t){return zO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},zO(e,t)}function o_(e,t,n){return t=RG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RG(e){var t=lOe(e,"string");return Mg(t)=="symbol"?t:t+""}function lOe(e,t){if(Mg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Mg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cOe=function(t,n,i,a,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,f=s.xAxis,p=s.yAxis;if(!f||!p)return null;var g=nI({x:f.scale,y:p.scale}),x={x:t?g.x.apply(o,{position:"start"}):g.x.rangeMin,y:i?g.y.apply(c,{position:"start"}):g.y.rangeMin},v={x:n?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:a?g.y.apply(u,{position:"end"}):g.y.rangeMax};return Fl(s,"discard")&&(!g.isInRange(x)||!g.isInRange(v))?null:wG(x,v)},l_=function(e){function t(){return tOe(this,t),iOe(this,t,arguments)}return oOe(t,e),rOe(t,[{key:"render",value:function(){var i=this.props,a=i.x1,s=i.x2,o=i.y1,l=i.y2,c=i.className,u=i.alwaysShow,f=i.clipPathId;Fo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Ci(a),g=Ci(s),x=Ci(o),v=Ci(l),j=this.props.shape;if(!p&&!g&&!x&&!v&&!j)return null;var w=cOe(p,g,x,v,this.props);if(!w&&!j)return null;var _=Fl(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Se.createElement(Dn,{className:dn("recharts-reference-area",c)},t.renderRect(j,$B($B({clipPath:_},$t(this.props,!0)),w)),Mi.renderCallByParent(this.props,w))}}])}(Se.Component);o_(l_,"displayName","ReferenceArea");o_(l_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});o_(l_,"renderRect",function(e,t){var n;return Se.isValidElement(e)?n=Se.cloneElement(e,t):tn(e)?n=e(t):n=Se.createElement(eI,BO({},t,{className:"recharts-reference-area-rect"})),n});function LG(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var i=[],a=0;a<e.length;a+=t)i.push(e[a]);return i}function uOe(e,t,n){var i={width:e.width+t.width,height:e.height+t.height};return mPe(i,n)}function dOe(e,t,n){var i=n==="width",a=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:i?a:s,end:i?a+o:s+l}:{start:i?a+o:s+l,end:i?a:s}}function qS(e,t,n,i,a){if(e*t<e*i||e*t>e*a)return!1;var s=n();return e*(t-e*s/2-i)>=0&&e*(t+e*s/2-a)<=0}function hOe(e,t){return LG(e,t+1)}function fOe(e,t,n,i,a){for(var s=(i||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,p=function(){var v=i==null?void 0:i[c];if(v===void 0)return{v:LG(i,u)};var j=c,w,_=function(){return w===void 0&&(w=n(v,j)),w},T=v.coordinate,C=c===0||qS(e,T,_,f,l);C||(c=0,f=o,u+=1),C&&(f=T+e*(_()/2+a),c+=u)},g;u<=s.length;)if(g=p(),g)return g.v;return[]}function Ab(e){"@babel/helpers - typeof";return Ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ab(e)}function BB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BB(Object(n),!0).forEach(function(i){pOe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function pOe(e,t,n){return t=mOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mOe(e){var t=gOe(e,"string");return Ab(t)=="symbol"?t:t+""}function gOe(e,t){if(Ab(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Ab(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yOe(e,t,n,i,a){for(var s=(i||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(g){var x=s[g],v,j=function(){return v===void 0&&(v=n(x,g)),v};if(g===o-1){var w=e*(x.coordinate+e*j()/2-c);s[g]=x=oa(oa({},x),{},{tickCoord:w>0?x.coordinate-w*e:x.coordinate})}else s[g]=x=oa(oa({},x),{},{tickCoord:x.coordinate});var _=qS(e,x.tickCoord,j,l,c);_&&(c=x.tickCoord-e*(j()/2+a),s[g]=oa(oa({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return s}function xOe(e,t,n,i,a,s){var o=(i||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var f=i[l-1],p=n(f,l-1),g=e*(f.coordinate+e*p/2-u);o[l-1]=f=oa(oa({},f),{},{tickCoord:g>0?f.coordinate-g*e:f.coordinate});var x=qS(e,f.tickCoord,function(){return p},c,u);x&&(u=f.tickCoord-e*(p/2+a),o[l-1]=oa(oa({},f),{},{isShow:!0}))}for(var v=s?l-1:l,j=function(T){var C=o[T],O,A=function(){return O===void 0&&(O=n(C,T)),O};if(T===0){var P=e*(C.coordinate-e*A()/2-c);o[T]=C=oa(oa({},C),{},{tickCoord:P<0?C.coordinate-P*e:C.coordinate})}else o[T]=C=oa(oa({},C),{},{tickCoord:C.coordinate});var I=qS(e,C.tickCoord,A,c,u);I&&(c=C.tickCoord+e*(A()/2+a),o[T]=oa(oa({},C),{},{isShow:!0}))},w=0;w<v;w++)j(w);return o}function cI(e,t,n){var i=e.tick,a=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,p=e.angle;if(!a||!a.length||!i)return[];if(jt(c)||Cd.isSsr)return hOe(a,typeof c=="number"&&jt(c)?c:0);var g=[],x=l==="top"||l==="bottom"?"width":"height",v=f&&x==="width"?Dv(f,{fontSize:t,letterSpacing:n}):{width:0,height:0},j=function(C,O){var A=tn(u)?u(C.value,O):C.value;return x==="width"?uOe(Dv(A,{fontSize:t,letterSpacing:n}),v,p):Dv(A,{fontSize:t,letterSpacing:n})[x]},w=a.length>=2?Ia(a[1].coordinate-a[0].coordinate):1,_=dOe(s,w,x);return c==="equidistantPreserveStart"?fOe(w,_,j,a,o):(c==="preserveStart"||c==="preserveStartEnd"?g=xOe(w,_,j,a,o,c==="preserveStartEnd"):g=yOe(w,_,j,a,o),g.filter(function(T){return T.isShow}))}var vOe=["viewBox"],bOe=["viewBox"],jOe=["ticks"];function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function zm(){return zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zm.apply(this,arguments)}function zB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zB(Object(n),!0).forEach(function(i){uI(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ak(e,t){if(e==null)return{};var n=wOe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function wOe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function SOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,$G(i.key),i)}}function NOe(e,t,n){return t&&qB(e.prototype,t),n&&qB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Oe(e,t,n){return t=US(t),COe(e,FG()?Reflect.construct(t,n||[],US(e).constructor):t.apply(e,n))}function COe(e,t){if(t&&(Ig(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TOe(e)}function TOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FG=function(){return!!e})()}function US(e){return US=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},US(e)}function AOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qO(e,t)}function qO(e,t){return qO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},qO(e,t)}function uI(e,t,n){return t=$G(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $G(e){var t=EOe(e,"string");return Ig(t)=="symbol"?t:t+""}function EOe(e,t){if(Ig(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Ig(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ay=function(e){function t(n){var i;return SOe(this,t),i=_Oe(this,t,[n]),i.state={fontSize:"",letterSpacing:""},i}return AOe(t,e),NOe(t,[{key:"shouldComponentUpdate",value:function(i,a){var s=i.viewBox,o=ak(i,vOe),l=this.props,c=l.viewBox,u=ak(l,bOe);return!Wm(s,c)||!Wm(o,u)||!Wm(a,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var a=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,f=a.tickSize,p=a.mirror,g=a.tickMargin,x,v,j,w,_,T,C=p?-1:1,O=i.tickSize||f,A=jt(i.tickCoord)?i.tickCoord:i.coordinate;switch(u){case"top":x=v=i.coordinate,w=o+ +!p*c,j=w-C*O,T=j-C*g,_=A;break;case"left":j=w=i.coordinate,v=s+ +!p*l,x=v-C*O,_=x-C*g,T=A;break;case"right":j=w=i.coordinate,v=s+ +p*l,x=v+C*O,_=x+C*g,T=A;break;default:x=v=i.coordinate,w=o+ +p*c,j=w+C*O,T=j+C*g,_=A;break}return{line:{x1:x,y1:j,x2:v,y2:w},tick:{x:_,y:T}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,a=i.orientation,s=i.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,a=i.orientation,s=i.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.orientation,u=i.mirror,f=i.axisLine,p=wi(wi(wi({},$t(this.props,!1)),$t(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var g=+(c==="top"&&!u||c==="bottom"&&u);p=wi(wi({},p),{},{x1:a,y1:s+g*l,x2:a+o,y2:s+g*l})}else{var x=+(c==="left"&&!u||c==="right"&&u);p=wi(wi({},p),{},{x1:a+x*o,y1:s,x2:a+x*o,y2:s+l})}return Se.createElement("line",zm({},p,{className:dn("recharts-cartesian-axis-line",Ms(f,"className"))}))}},{key:"renderTicks",value:function(i,a,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,p=l.tickFormatter,g=l.unit,x=cI(wi(wi({},this.props),{},{ticks:i}),a,s),v=this.getTickTextAnchor(),j=this.getTickVerticalAnchor(),w=$t(this.props,!1),_=$t(f,!1),T=wi(wi({},w),{},{fill:"none"},$t(c,!1)),C=x.map(function(O,A){var P=o.getTickLineCoord(O),I=P.line,F=P.tick,B=wi(wi(wi(wi({textAnchor:v,verticalAnchor:j},w),{},{stroke:"none",fill:u},_),F),{},{index:A,payload:O,visibleTicksCount:x.length,tickFormatter:p});return Se.createElement(Dn,zm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Mf(o.props,O,A)),c&&Se.createElement("line",zm({},T,I,{className:dn("recharts-cartesian-axis-tick-line",Ms(c,"className"))})),f&&t.renderTickItem(f,B,"".concat(tn(p)?p(O.value,A):O.value).concat(g||"")))});return Se.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var i=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var p=this.props,g=p.ticks,x=ak(p,jOe),v=g;return tn(c)&&(v=g&&g.length>0?c(this.props):c(x)),o<=0||l<=0||!v||!v.length?null:Se.createElement(Dn,{className:dn("recharts-cartesian-axis",u),ref:function(w){i.layerReference=w}},s&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Mi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,a,s){var o,l=dn(a.className,"recharts-cartesian-axis-tick-value");return Se.isValidElement(i)?o=Se.cloneElement(i,wi(wi({},a),{},{className:l})):tn(i)?o=i(wi(wi({},a),{},{className:l})):o=Se.createElement(If,zm({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(b.Component);uI(ay,"displayName","CartesianAxis");uI(ay,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var kOe=["x1","y1","x2","y2","key"],POe=["offset"];function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}function UB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UB(Object(n),!0).forEach(function(i){OOe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function OOe(e,t,n){return t=DOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DOe(e){var t=MOe(e,"string");return $f(t)=="symbol"?t:t+""}function MOe(e,t){if($f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if($f(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function of(){return of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},of.apply(this,arguments)}function VB(e,t){if(e==null)return{};var n=IOe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function IOe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}var ROe=function(t){var n=t.fill;if(!n||n==="none")return null;var i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return Se.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:i,className:"recharts-cartesian-grid-bg"})};function BG(e,t){var n;if(Se.isValidElement(e))n=Se.cloneElement(e,t);else if(tn(e))n=e(t);else{var i=t.x1,a=t.y1,s=t.x2,o=t.y2,l=t.key,c=VB(t,kOe),u=$t(c,!1);u.offset;var f=VB(u,POe);n=Se.createElement("line",of({},f,{x1:i,y1:a,x2:s,y2:o,fill:"none",key:l}))}return n}function LOe(e){var t=e.x,n=e.width,i=e.horizontal,a=i===void 0?!0:i,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=ca(ca({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return BG(a,u)});return Se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function FOe(e){var t=e.y,n=e.height,i=e.vertical,a=i===void 0?!0:i,s=e.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=ca(ca({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return BG(a,u)});return Se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function $Oe(e){var t=e.horizontalFill,n=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(g){return Math.round(g+a-a)}).sort(function(g,x){return g-x});a!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var v=!f[x+1],j=v?a+o-g:f[x+1]-g;if(j<=0)return null;var w=x%t.length;return Se.createElement("rect",{key:"react-".concat(x),y:g,x:i,height:j,width:s,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function BOe(e){var t=e.vertical,n=t===void 0?!0:t,i=e.verticalFill,a=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!i||!i.length)return null;var f=u.map(function(g){return Math.round(g+s-s)}).sort(function(g,x){return g-x});s!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var v=!f[x+1],j=v?s+l-g:f[x+1]-g;if(j<=0)return null;var w=x%i.length;return Se.createElement("rect",{key:"react-".concat(x),x:g,y:o,width:j,height:c,stroke:"none",fill:i[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var zOe=function(t,n){var i=t.xAxis,a=t.width,s=t.height,o=t.offset;return zH(cI(ca(ca(ca({},ay.defaultProps),i),{},{ticks:kc(i,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,n)},qOe=function(t,n){var i=t.yAxis,a=t.width,s=t.height,o=t.offset;return zH(cI(ca(ca(ca({},ay.defaultProps),i),{},{ticks:kc(i,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,n)},Em={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Eb(e){var t,n,i,a,s,o,l=aI(),c=sI(),u=EPe(),f=ca(ca({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Em.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Em.fill,horizontal:(i=e.horizontal)!==null&&i!==void 0?i:Em.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Em.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:Em.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Em.verticalFill,x:jt(e.x)?e.x:u.left,y:jt(e.y)?e.y:u.top,width:jt(e.width)?e.width:u.width,height:jt(e.height)?e.height:u.height}),p=f.x,g=f.y,x=f.width,v=f.height,j=f.syncWithTicks,w=f.horizontalValues,_=f.verticalValues,T=CPe(),C=TPe();if(!jt(x)||x<=0||!jt(v)||v<=0||!jt(p)||p!==+p||!jt(g)||g!==+g)return null;var O=f.verticalCoordinatesGenerator||zOe,A=f.horizontalCoordinatesGenerator||qOe,P=f.horizontalPoints,I=f.verticalPoints;if((!P||!P.length)&&tn(A)){var F=w&&w.length,B=A({yAxis:C?ca(ca({},C),{},{ticks:F?w:C.ticks}):void 0,width:l,height:c,offset:u},F?!0:j);Fo(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat($f(B),"]")),Array.isArray(B)&&(P=B)}if((!I||!I.length)&&tn(O)){var $=_&&_.length,L=O({xAxis:T?ca(ca({},T),{},{ticks:$?_:T.ticks}):void 0,width:l,height:c,offset:u},$?!0:j);Fo(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat($f(L),"]")),Array.isArray(L)&&(I=L)}return Se.createElement("g",{className:"recharts-cartesian-grid"},Se.createElement(ROe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Se.createElement(LOe,of({},f,{offset:u,horizontalPoints:P,xAxis:T,yAxis:C})),Se.createElement(FOe,of({},f,{offset:u,verticalPoints:I,xAxis:T,yAxis:C})),Se.createElement($Oe,of({},f,{horizontalPoints:P})),Se.createElement(BOe,of({},f,{verticalPoints:I})))}Eb.displayName="CartesianGrid";var UOe=["type","layout","connectNulls","ref"],VOe=["key"];function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function HB(e,t){if(e==null)return{};var n=HOe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function HOe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$v.apply(this,arguments)}function GB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function _s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GB(Object(n),!0).forEach(function(i){Mo(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function km(e){return YOe(e)||KOe(e)||WOe(e)||GOe()}function GOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WOe(e,t){if(e){if(typeof e=="string")return UO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UO(e,t)}}function KOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YOe(e){if(Array.isArray(e))return UO(e)}function UO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function QOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,qG(i.key),i)}}function XOe(e,t,n){return t&&WB(e.prototype,t),n&&WB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function JOe(e,t,n){return t=VS(t),ZOe(e,zG()?Reflect.construct(t,n||[],VS(e).constructor):t.apply(e,n))}function ZOe(e,t){if(t&&(Rg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eDe(e)}function eDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zG=function(){return!!e})()}function VS(e){return VS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},VS(e)}function tDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VO(e,t)}function VO(e,t){return VO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},VO(e,t)}function Mo(e,t,n){return t=qG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qG(e){var t=nDe(e,"string");return Rg(t)=="symbol"?t:t+""}function nDe(e,t){if(Rg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Rg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var l0=function(e){function t(){var n;QOe(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=JOe(this,t,[].concat(a)),Mo(n,"state",{isAnimationFinished:!0,totalLength:0}),Mo(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Mo(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(_,T){return _+T});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/u),p=o%u,g=l-o,x=[],v=0,j=0;v<c.length;j+=c[v],++v)if(j+c[v]>p){x=[].concat(km(c.slice(0,v)),[p-j]);break}var w=x.length%2===0?[0,g]:[g];return[].concat(km(t.repeat(c,f)),km(x),w).map(function(_){return"".concat(_,"px")}).join(", ")}),Mo(n,"id",Uf("recharts-line-")),Mo(n,"pathRef",function(o){n.mainCurve=o}),Mo(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Mo(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return tDe(t,e),XOe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();i!==this.state.totalLength&&this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,p=Is(f,s0);if(!p)return null;var g=function(j,w){return{x:j.x,y:j.y,value:j.value,errorVal:li(j.payload,w)}},x={clipPath:i?"url(#clipPath-".concat(a,")"):null};return Se.createElement(Dn,x,p.map(function(v){return Se.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:g})}))}},{key:"renderDots",value:function(i,a,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,f=l.dataKey,p=$t(this.props,!1),g=$t(c,!0),x=u.map(function(j,w){var _=_s(_s(_s({key:"dot-".concat(w),r:3},p),g),{},{index:w,cx:j.x,cy:j.y,value:j.value,dataKey:f,payload:j.payload,points:u});return t.renderDotItem(c,_)}),v={clipPath:i?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return Se.createElement(Dn,$v({className:"recharts-line-dots",key:"dots"},v),x)}},{key:"renderCurveStatically",value:function(i,a,s,o){var l=this.props,c=l.type,u=l.layout,f=l.connectNulls;l.ref;var p=HB(l,UOe),g=_s(_s(_s({},$t(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(s,")"):null,points:i},o),{},{type:c,layout:u,connectNulls:f});return Se.createElement(jf,$v({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,a){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,v=o.animateNewValues,j=o.width,w=o.height,_=this.state,T=_.prevPoints,C=_.totalLength;return Se.createElement($o,{begin:f,duration:p,isActive:u,easing:g,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var A=O.t;if(T){var P=T.length/l.length,I=l.map(function(V,H){var te=Math.floor(H*P);if(T[te]){var X=T[te],q=_i(X.x,V.x),W=_i(X.y,V.y);return _s(_s({},V),{},{x:q(A),y:W(A)})}if(v){var ae=_i(j*2,V.x),G=_i(w/2,V.y);return _s(_s({},V),{},{x:ae(A),y:G(A)})}return _s(_s({},V),{},{x:V.x,y:V.y})});return s.renderCurveStatically(I,i,a)}var F=_i(0,C),B=F(A),$;if(c){var L="".concat(c).split(/[,\s]+/gim).map(function(V){return parseFloat(V)});$=s.getStrokeDasharray(B,C,L)}else $=s.generateSimpleStrokeDasharray(C,B);return s.renderCurveStatically(l,i,a,{strokeDasharray:$})})}},{key:"renderCurve",value:function(i,a){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!u&&f>0||!Rf(u,o))?this.renderCurveWithAnimation(i,a):this.renderCurveStatically(o,i,a)}},{key:"render",value:function(){var i,a=this.props,s=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,f=a.yAxis,p=a.top,g=a.left,x=a.width,v=a.height,j=a.isAnimationActive,w=a.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=dn("recharts-line",c),O=u&&u.allowDataOverflow,A=f&&f.allowDataOverflow,P=O||A,I=cn(w)?this.id:w,F=(i=$t(o,!1))!==null&&i!==void 0?i:{r:3,strokeWidth:2},B=F.r,$=B===void 0?3:B,L=F.strokeWidth,V=L===void 0?2:L,H=U7(o)?o:{},te=H.clipDot,X=te===void 0?!0:te,q=$*2+V;return Se.createElement(Dn,{className:C},O||A?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(I)},Se.createElement("rect",{x:O?g:g-x/2,y:A?p:p-v/2,width:O?x:x*2,height:A?v:v*2})),!X&&Se.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Se.createElement("rect",{x:g-q/2,y:p-q/2,width:x+q,height:v+q}))):null,!T&&this.renderCurve(P,I),this.renderErrorBar(P,I),(T||o)&&this.renderDots(P,X,I),(!j||_)&&Ll.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return i.animationId!==a.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:a.curPoints}:i.points!==a.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,a){for(var s=i.length%2!==0?[].concat(km(i),[0]):i,o=[],l=0;l<a;++l)o=[].concat(km(o),km(s));return o}},{key:"renderDotItem",value:function(i,a){var s;if(Se.isValidElement(i))s=Se.cloneElement(i,a);else if(tn(i))s=i(a);else{var o=a.key,l=HB(a,VOe),c=dn("recharts-line-dot",typeof i!="boolean"?i.className:"");s=Se.createElement(o0,$v({key:o},l,{className:c}))}return s}}])}(b.PureComponent);Mo(l0,"displayName","Line");Mo(l0,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Cd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Mo(l0,"getComposedData",function(e){var t=e.props,n=e.xAxis,i=e.yAxis,a=e.xAxisTicks,s=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,f=t.layout,p=c.map(function(g,x){var v=li(g,o);return f==="horizontal"?{x:jS({axis:n,ticks:a,bandSize:l,entry:g,index:x}),y:cn(v)?null:i.scale(v),value:v,payload:g}:{x:cn(v)?null:n.scale(v),y:jS({axis:i,ticks:s,bandSize:l,entry:g,index:x}),value:v,payload:g}});return _s({points:p,layout:f},u)});var rDe=["layout","type","stroke","connectNulls","isRange","ref"],iDe=["key"],UG;function Lg(e){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}function VG(e,t){if(e==null)return{};var n=aDe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function aDe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function lf(){return lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lf.apply(this,arguments)}function KB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Ju(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KB(Object(n),!0).forEach(function(i){Dl(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function sDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,GG(i.key),i)}}function oDe(e,t,n){return t&&YB(e.prototype,t),n&&YB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lDe(e,t,n){return t=HS(t),cDe(e,HG()?Reflect.construct(t,n||[],HS(e).constructor):t.apply(e,n))}function cDe(e,t){if(t&&(Lg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uDe(e)}function uDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HG=function(){return!!e})()}function HS(e){return HS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},HS(e)}function dDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HO(e,t)}function HO(e,t){return HO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},HO(e,t)}function Dl(e,t,n){return t=GG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GG(e){var t=hDe(e,"string");return Lg(t)=="symbol"?t:t+""}function hDe(e,t){if(Lg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Lg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Pd=function(e){function t(){var n;sDe(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=lDe(this,t,[].concat(a)),Dl(n,"state",{isAnimationFinished:!0}),Dl(n,"id",Uf("recharts-area-")),Dl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),tn(o)&&o()}),Dl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),tn(o)&&o()}),n}return dDe(t,e),oDe(t,[{key:"renderDots",value:function(i,a,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,f=c.points,p=c.dataKey,g=$t(this.props,!1),x=$t(u,!0),v=f.map(function(w,_){var T=Ju(Ju(Ju({key:"dot-".concat(_),r:3},g),x),{},{index:_,cx:w.x,cy:w.y,dataKey:p,value:w.value,payload:w.payload,points:f});return t.renderDotItem(u,T)}),j={clipPath:i?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return Se.createElement(Dn,lf({className:"recharts-area-dots"},j),v)}},{key:"renderHorizontalRect",value:function(i){var a=this.props,s=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,f=i*Math.abs(c-u),p=dd(o.map(function(g){return g.y||0}));return jt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(dd(s.map(function(g){return g.y||0})),p)),jt(p)?Se.createElement("rect",{x:c<u?c:c-f,y:0,width:f,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(i){var a=this.props,s=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,f=i*Math.abs(c-u),p=dd(o.map(function(g){return g.x||0}));return jt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(dd(s.map(function(g){return g.x||0})),p)),jt(p)?Se.createElement("rect",{x:0,y:c<u?c:c-f,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(i){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(i):this.renderHorizontalRect(i)}},{key:"renderAreaStatically",value:function(i,a,s,o){var l=this.props,c=l.layout,u=l.type,f=l.stroke,p=l.connectNulls,g=l.isRange;l.ref;var x=VG(l,rDe);return Se.createElement(Dn,{clipPath:s?"url(#clipPath-".concat(o,")"):null},Se.createElement(jf,lf({},$t(x,!0),{points:i,connectNulls:p,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&Se.createElement(jf,lf({},$t(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:p,fill:"none",points:i})),f!=="none"&&g&&Se.createElement(jf,lf({},$t(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:p,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(i,a){var s=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,v=this.state,j=v.prevPoints,w=v.prevBaseLine;return Se.createElement($o,{begin:f,duration:p,isActive:u,easing:g,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var T=_.t;if(j){var C=j.length/l.length,O=l.map(function(F,B){var $=Math.floor(B*C);if(j[$]){var L=j[$],V=_i(L.x,F.x),H=_i(L.y,F.y);return Ju(Ju({},F),{},{x:V(T),y:H(T)})}return F}),A;if(jt(c)&&typeof c=="number"){var P=_i(w,c);A=P(T)}else if(cn(c)||ey(c)){var I=_i(w,0);A=I(T)}else A=c.map(function(F,B){var $=Math.floor(B*C);if(w[$]){var L=w[$],V=_i(L.x,F.x),H=_i(L.y,F.y);return Ju(Ju({},F),{},{x:V(T),y:H(T)})}return F});return s.renderAreaStatically(O,A,i,a)}return Se.createElement(Dn,null,Se.createElement("defs",null,Se.createElement("clipPath",{id:"animationClipPath-".concat(a)},s.renderClipRect(T))),Se.createElement(Dn,{clipPath:"url(#animationClipPath-".concat(a,")")},s.renderAreaStatically(l,c,i,a)))})}},{key:"renderArea",value:function(i,a){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,f=u.prevPoints,p=u.prevBaseLine,g=u.totalLength;return c&&o&&o.length&&(!f&&g>0||!Rf(f,o)||!Rf(p,l))?this.renderAreaWithAnimation(i,a):this.renderAreaStatically(o,l,i,a)}},{key:"render",value:function(){var i,a=this.props,s=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,f=a.left,p=a.xAxis,g=a.yAxis,x=a.width,v=a.height,j=a.isAnimationActive,w=a.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=dn("recharts-area",c),O=p&&p.allowDataOverflow,A=g&&g.allowDataOverflow,P=O||A,I=cn(w)?this.id:w,F=(i=$t(o,!1))!==null&&i!==void 0?i:{r:3,strokeWidth:2},B=F.r,$=B===void 0?3:B,L=F.strokeWidth,V=L===void 0?2:L,H=U7(o)?o:{},te=H.clipDot,X=te===void 0?!0:te,q=$*2+V;return Se.createElement(Dn,{className:C},O||A?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(I)},Se.createElement("rect",{x:O?f:f-x/2,y:A?u:u-v/2,width:O?x:x*2,height:A?v:v*2})),!X&&Se.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Se.createElement("rect",{x:f-q/2,y:u-q/2,width:x+q,height:v+q}))):null,T?null:this.renderArea(P,I),(o||T)&&this.renderDots(P,X,I),(!j||_)&&Ll.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return i.animationId!==a.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,curBaseLine:i.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:i.points!==a.curPoints||i.baseLine!==a.curBaseLine?{curPoints:i.points,curBaseLine:i.baseLine}:null}}])}(b.PureComponent);UG=Pd;Dl(Pd,"displayName","Area");Dl(Pd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Cd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Dl(Pd,"getBaseValue",function(e,t,n,i){var a=e.layout,s=e.baseValue,o=t.props.baseValue,l=o??s;if(jt(l)&&typeof l=="number")return l;var c=a==="horizontal"?i:n,u=c.scale.domain();if(c.type==="number"){var f=Math.max(u[0],u[1]),p=Math.min(u[0],u[1]);return l==="dataMin"?p:l==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Dl(Pd,"getComposedData",function(e){var t=e.props,n=e.item,i=e.xAxis,a=e.yAxis,s=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,f=e.dataStartIndex,p=e.displayedData,g=e.offset,x=t.layout,v=u&&u.length,j=UG.getBaseValue(t,n,i,a),w=x==="horizontal",_=!1,T=p.map(function(O,A){var P;v?P=u[f+A]:(P=li(O,c),Array.isArray(P)?_=!0:P=[j,P]);var I=P[1]==null||v&&li(O,c)==null;return w?{x:jS({axis:i,ticks:s,bandSize:l,entry:O,index:A}),y:I?null:a.scale(P[1]),value:P,payload:O}:{x:I?null:i.scale(P[1]),y:jS({axis:a,ticks:o,bandSize:l,entry:O,index:A}),value:P,payload:O}}),C;return v||_?C=T.map(function(O){var A=Array.isArray(O.value)?O.value[0]:null;return w?{x:O.x,y:A!=null&&O.y!=null?a.scale(A):null}:{x:A!=null?i.scale(A):null,y:O.y}}):C=w?a.scale(j):i.scale(j),Ju({points:T,baseLine:C,layout:x,isRange:_},g)});Dl(Pd,"renderDotItem",function(e,t){var n;if(Se.isValidElement(e))n=Se.cloneElement(e,t);else if(tn(e))n=e(t);else{var i=dn("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,s=VG(t,iDe);n=Se.createElement(o0,lf({},s,{key:a,className:i}))}return n});function Fg(e){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fg(e)}function fDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pDe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,YG(i.key),i)}}function mDe(e,t,n){return t&&pDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gDe(e,t,n){return t=GS(t),yDe(e,WG()?Reflect.construct(t,n||[],GS(e).constructor):t.apply(e,n))}function yDe(e,t){if(t&&(Fg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xDe(e)}function xDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WG=function(){return!!e})()}function GS(e){return GS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},GS(e)}function vDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GO(e,t)}function GO(e,t){return GO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},GO(e,t)}function KG(e,t,n){return t=YG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YG(e){var t=bDe(e,"string");return Fg(t)=="symbol"?t:t+""}function bDe(e,t){if(Fg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Fg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function WO(){return WO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},WO.apply(this,arguments)}function jDe(e){var t=e.xAxisId,n=aI(),i=sI(),a=EG(t);return a==null?null:b.createElement(ay,WO({},a,{className:dn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(o){return kc(o,!0)}}))}var Wc=function(e){function t(){return fDe(this,t),gDe(this,t,arguments)}return vDe(t,e),mDe(t,[{key:"render",value:function(){return b.createElement(jDe,this.props)}}])}(b.Component);KG(Wc,"displayName","XAxis");KG(Wc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(e)}function wDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SDe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,JG(i.key),i)}}function NDe(e,t,n){return t&&SDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _De(e,t,n){return t=WS(t),CDe(e,QG()?Reflect.construct(t,n||[],WS(e).constructor):t.apply(e,n))}function CDe(e,t){if(t&&($g(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TDe(e)}function TDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QG=function(){return!!e})()}function WS(e){return WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},WS(e)}function ADe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KO(e,t)}function KO(e,t){return KO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},KO(e,t)}function XG(e,t,n){return t=JG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JG(e){var t=EDe(e,"string");return $g(t)=="symbol"?t:t+""}function EDe(e,t){if($g(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if($g(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function YO(){return YO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},YO.apply(this,arguments)}var kDe=function(t){var n=t.yAxisId,i=aI(),a=sI(),s=kG(n);return s==null?null:b.createElement(ay,YO({},s,{className:dn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:i,height:a},ticksGenerator:function(l){return kc(l,!0)}}))},Kc=function(e){function t(){return wDe(this,t),_De(this,t,arguments)}return ADe(t,e),NDe(t,[{key:"render",value:function(){return b.createElement(kDe,this.props)}}])}(b.Component);XG(Kc,"displayName","YAxis");XG(Kc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function QB(e){return MDe(e)||DDe(e)||ODe(e)||PDe()}function PDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ODe(e,t){if(e){if(typeof e=="string")return QO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QO(e,t)}}function DDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MDe(e){if(Array.isArray(e))return QO(e)}function QO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var XO=function(t,n,i,a,s){var o=Is(t,lI),l=Is(t,s_),c=[].concat(QB(o),QB(l)),u=Is(t,l_),f="".concat(a,"Id"),p=a[0],g=n;if(c.length&&(g=c.reduce(function(j,w){if(w.props[f]===i&&Fl(w.props,"extendDomain")&&jt(w.props[p])){var _=w.props[p];return[Math.min(j[0],_),Math.max(j[1],_)]}return j},g)),u.length){var x="".concat(p,"1"),v="".concat(p,"2");g=u.reduce(function(j,w){if(w.props[f]===i&&Fl(w.props,"extendDomain")&&jt(w.props[x])&&jt(w.props[v])){var _=w.props[x],T=w.props[v];return[Math.min(j[0],_,T),Math.max(j[1],_,T)]}return j},g)}return s&&s.length&&(g=s.reduce(function(j,w){return jt(w)?[Math.min(j[0],w),Math.max(j[1],w)]:j},g)),g},sk={exports:{}},XB;function IDe(){return XB||(XB=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new a(f,p||c,g),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],x]:c._events[v].push(x):(c._events[v]=x,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new i:delete c._events[u]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)t.call(f,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,v=new Array(x);g<x;g++)v[g]=p[g].fn;return v},l.prototype.listenerCount=function(u){var f=n?n+u:u,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,f,p,g,x,v){var j=n?n+u:u;if(!this._events[j])return!1;var w=this._events[j],_=arguments.length,T,C;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,p),!0;case 4:return w.fn.call(w.context,f,p,g),!0;case 5:return w.fn.call(w.context,f,p,g,x),!0;case 6:return w.fn.call(w.context,f,p,g,x,v),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];w.fn.apply(w.context,T)}else{var O=w.length,A;for(C=0;C<O;C++)switch(w[C].once&&this.removeListener(u,w[C].fn,void 0,!0),_){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,f);break;case 3:w[C].fn.call(w[C].context,f,p);break;case 4:w[C].fn.call(w[C].context,f,p,g);break;default:if(!T)for(A=1,T=new Array(_-1);A<_;A++)T[A-1]=arguments[A];w[C].fn.apply(w[C].context,T)}}return!0},l.prototype.on=function(u,f,p){return s(this,u,f,p,!1)},l.prototype.once=function(u,f,p){return s(this,u,f,p,!0)},l.prototype.removeListener=function(u,f,p,g){var x=n?n+u:u;if(!this._events[x])return this;if(!f)return o(this,x),this;var v=this._events[x];if(v.fn)v.fn===f&&(!g||v.once)&&(!p||v.context===p)&&o(this,x);else{for(var j=0,w=[],_=v.length;j<_;j++)(v[j].fn!==f||g&&!v[j].once||p&&v[j].context!==p)&&w.push(v[j]);w.length?this._events[x]=w.length===1?w[0]:w:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}(sk)),sk.exports}var RDe=IDe();const LDe=qn(RDe);var ok=new LDe,lk="recharts.syncMouseEvents";function kb(e){"@babel/helpers - typeof";return kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kb(e)}function FDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $De(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ZG(i.key),i)}}function BDe(e,t,n){return t&&$De(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ck(e,t,n){return t=ZG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZG(e){var t=zDe(e,"string");return kb(t)=="symbol"?t:t+""}function zDe(e,t){if(kb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(kb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qDe=function(){function e(){FDe(this,e),ck(this,"activeIndex",0),ck(this,"coordinateList",[]),ck(this,"layout","horizontal")}return BDe(e,[{key:"setDetails",value:function(n){var i,a=n.coordinateList,s=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,f=n.offset,p=f===void 0?null:f,g=n.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(i=s??this.coordinateList)!==null&&i!==void 0?i:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,i;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((i=window)===null||i===void 0?void 0:i.scrollY)||0,p=s+c+u,g=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:g})}}}])}();function UDe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var i=e==null?void 0:e[0],a=e==null?void 0:e[1];if(i&&a&&jt(i)&&jt(a))return!0}return!1}function VDe(e,t,n,i){var a=i/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?i:n.width-1,height:e==="horizontal"?n.height-1:i}}function eW(e){var t=e.cx,n=e.cy,i=e.radius,a=e.startAngle,s=e.endAngle,o=Rr(t,n,i,a),l=Rr(t,n,i,s);return{points:[o,l],cx:t,cy:n,radius:i,startAngle:a,endAngle:s}}function HDe(e,t,n){var i,a,s,o;if(e==="horizontal")i=t.x,s=i,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,i=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,p=t.angle,g=Rr(l,c,u,p),x=Rr(l,c,f,p);i=g.x,a=g.y,s=x.x,o=x.y}else return eW(t);return[{x:i,y:a},{x:s,y:o}]}function Pb(e){"@babel/helpers - typeof";return Pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pb(e)}function JB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function tw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JB(Object(n),!0).forEach(function(i){GDe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JB(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function GDe(e,t,n){return t=WDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WDe(e){var t=KDe(e,"string");return Pb(t)=="symbol"?t:t+""}function KDe(e,t){if(Pb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Pb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YDe(e){var t,n,i=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,p=e.layout,g=e.chartName,x=(t=i.props.cursor)!==null&&t!==void 0?t:(n=i.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!i||!x||!s||!o||g!=="ScatterChart"&&a!=="axis")return null;var v,j=jf;if(g==="ScatterChart")v=o,j=sEe;else if(g==="BarChart")v=VDe(p,o,c,f),j=eI;else if(p==="radial"){var w=eW(o),_=w.cx,T=w.cy,C=w.radius,O=w.startAngle,A=w.endAngle;v={cx:_,cy:T,startAngle:O,endAngle:A,innerRadius:C,outerRadius:C},j=JH}else v={points:HDe(p,o,c)},j=jf;var P=tw(tw(tw(tw({stroke:"#ccc",pointerEvents:"none"},c),v),$t(x,!1)),{},{payload:l,payloadIndex:u,className:dn("recharts-tooltip-cursor",x.className)});return b.isValidElement(x)?b.cloneElement(x,P):b.createElement(j,P)}var QDe=["item"],XDe=["children","className","width","height","style","compact","title","desc"];function Bg(e){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bg(e)}function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qm.apply(this,arguments)}function ZB(e,t){return eMe(e)||ZDe(e,t)||nW(e,t)||JDe()}function JDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZDe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function eMe(e){if(Array.isArray(e))return e}function ez(e,t){if(e==null)return{};var n=tMe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function tMe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function nMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rMe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,rW(i.key),i)}}function iMe(e,t,n){return t&&rMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aMe(e,t,n){return t=KS(t),sMe(e,tW()?Reflect.construct(t,n||[],KS(e).constructor):t.apply(e,n))}function sMe(e,t){if(t&&(Bg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oMe(e)}function oMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tW=function(){return!!e})()}function KS(e){return KS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},KS(e)}function lMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JO(e,t)}function JO(e,t){return JO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},JO(e,t)}function zg(e){return dMe(e)||uMe(e)||nW(e)||cMe()}function cMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nW(e,t){if(e){if(typeof e=="string")return ZO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZO(e,t)}}function uMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dMe(e){if(Array.isArray(e))return ZO(e)}function ZO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function tz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tz(Object(n),!0).forEach(function(i){Zt(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tz(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Zt(e,t,n){return t=rW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rW(e){var t=hMe(e,"string");return Bg(t)=="symbol"?t:t+""}function hMe(e,t){if(Bg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Bg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fMe={xAxis:["bottom","top"],yAxis:["left","right"]},pMe={width:"100%",height:"100%"},iW={x:0,y:0};function nw(e){return e}var mMe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},gMe=function(t,n,i,a){var s=n.find(function(f){return f&&f.index===i});if(s){if(t==="horizontal")return{x:s.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=a.radius;return ot(ot(ot({},a),Rr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=a.angle;return ot(ot(ot({},a),Rr(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return iW},c_=function(t,n){var i=n.graphicalItems,a=n.dataStartIndex,s=n.dataEndIndex,o=(i??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(zg(l),zg(u)):l},[]);return o.length>0?o:t&&t.length&&jt(a)&&jt(s)?t.slice(a,s+1):[]};function aW(e){return e==="number"?[0,"auto"]:void 0}var eD=function(t,n,i,a){var s=t.graphicalItems,o=t.tooltipAxis,l=c_(n,t);return i<0||!s||!s.length||i>=l.length?null:s.reduce(function(c,u){var f,p=(f=u.props.data)!==null&&f!==void 0?f:n;p&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=i&&(p=p.slice(t.dataStartIndex,t.dataEndIndex+1));var g;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;g=Qw(x,o.dataKey,a)}else g=p&&p[i]||l[i];return g?[].concat(zg(c),[GH(u,g)]):c},[])},nz=function(t,n,i,a){var s=a||{x:t.chartX,y:t.chartY},o=mMe(s,i),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=PCe(o,l,u,c);if(f>=0&&u){var p=u[f]&&u[f].value,g=eD(t,n,f,p),x=gMe(i,l,f,s);return{activeTooltipIndex:f,activeLabel:p,activePayload:g,activeCoordinate:x}}return null},yMe=function(t,n){var i=n.axes,a=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,p=t.children,g=t.stackOffset,x=BH(f,s);return i.reduce(function(v,j){var w,_=j.type.defaultProps!==void 0?ot(ot({},j.type.defaultProps),j.props):j.props,T=_.type,C=_.dataKey,O=_.allowDataOverflow,A=_.allowDuplicatedCategory,P=_.scale,I=_.ticks,F=_.includeHidden,B=_[o];if(v[B])return v;var $=c_(t.data,{graphicalItems:a.filter(function(je){var Y,Oe=o in je.props?je.props[o]:(Y=je.type.defaultProps)===null||Y===void 0?void 0:Y[o];return Oe===B}),dataStartIndex:c,dataEndIndex:u}),L=$.length,V,H,te;UDe(_.domain,O,T)&&(V=fO(_.domain,null,O),x&&(T==="number"||P!=="auto")&&(te=Iv($,C,"category")));var X=aW(T);if(!V||V.length===0){var q,W=(q=_.domain)!==null&&q!==void 0?q:X;if(C){if(V=Iv($,C,T),T==="category"&&x){var ae=_be(V);A&&ae?(H=V,V=MS(0,L)):A||(V=e8(W,V,j).reduce(function(je,Y){return je.indexOf(Y)>=0?je:[].concat(zg(je),[Y])},[]))}else if(T==="category")A?V=V.filter(function(je){return je!==""&&!cn(je)}):V=e8(W,V,j).reduce(function(je,Y){return je.indexOf(Y)>=0||Y===""||cn(Y)?je:[].concat(zg(je),[Y])},[]);else if(T==="number"){var G=RCe($,a.filter(function(je){var Y,Oe,Ke=o in je.props?je.props[o]:(Y=je.type.defaultProps)===null||Y===void 0?void 0:Y[o],Me="hide"in je.props?je.props.hide:(Oe=je.type.defaultProps)===null||Oe===void 0?void 0:Oe.hide;return Ke===B&&(F||!Me)}),C,s,f);G&&(V=G)}x&&(T==="number"||P!=="auto")&&(te=Iv($,C,"category"))}else x?V=MS(0,L):l&&l[B]&&l[B].hasStack&&T==="number"?V=g==="expand"?[0,1]:HH(l[B].stackGroups,c,u):V=$H($,a.filter(function(je){var Y=o in je.props?je.props[o]:je.type.defaultProps[o],Oe="hide"in je.props?je.props.hide:je.type.defaultProps.hide;return Y===B&&(F||!Oe)}),T,f,!0);if(T==="number")V=XO(p,V,B,s,I),W&&(V=fO(W,V,O));else if(T==="category"&&W){var z=W,le=V.every(function(je){return z.indexOf(je)>=0});le&&(V=z)}}return ot(ot({},v),{},Zt({},B,ot(ot({},_),{},{axisType:s,domain:V,categoricalDomain:te,duplicateDomain:H,originalDomain:(w=_.domain)!==null&&w!==void 0?w:X,isCategorical:x,layout:f})))},{})},xMe=function(t,n){var i=n.graphicalItems,a=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,p=t.children,g=c_(t.data,{graphicalItems:i,dataStartIndex:c,dataEndIndex:u}),x=g.length,v=BH(f,s),j=-1;return i.reduce(function(w,_){var T=_.type.defaultProps!==void 0?ot(ot({},_.type.defaultProps),_.props):_.props,C=T[o],O=aW("number");if(!w[C]){j++;var A;return v?A=MS(0,x):l&&l[C]&&l[C].hasStack?(A=HH(l[C].stackGroups,c,u),A=XO(p,A,C,s)):(A=fO(O,$H(g,i.filter(function(P){var I,F,B=o in P.props?P.props[o]:(I=P.type.defaultProps)===null||I===void 0?void 0:I[o],$="hide"in P.props?P.props.hide:(F=P.type.defaultProps)===null||F===void 0?void 0:F.hide;return B===C&&!$}),"number",f),a.defaultProps.allowDataOverflow),A=XO(p,A,C,s)),ot(ot({},w),{},Zt({},C,ot(ot({axisType:s},a.defaultProps),{},{hide:!0,orientation:Ms(fMe,"".concat(s,".").concat(j%2),null),domain:A,originalDomain:O,isCategorical:v,layout:f})))}return w},{})},vMe=function(t,n){var i=n.axisType,a=i===void 0?"xAxis":i,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.children,p="".concat(a,"Id"),g=Is(f,s),x={};return g&&g.length?x=yMe(t,{axes:g,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(x=xMe(t,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),x},bMe=function(t){var n=ed(t),i=kc(n,!1,!0);return{tooltipTicks:i,orderedTooltipTicks:TM(i,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:wS(n,i)}},rz=function(t){var n=t.children,i=t.defaultShowTooltip,a=Ts(n,kg),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!i}},jMe=function(t){return!t||!t.length?!1:t.some(function(n){var i=Mc(n&&n.type);return i&&i.indexOf("Bar")>=0})},iz=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},wMe=function(t,n){var i=t.props,a=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=i.width,f=i.height,p=i.children,g=i.margin||{},x=Ts(p,kg),v=Ts(p,Ic),j=Object.keys(c).reduce(function(A,P){var I=c[P],F=I.orientation;return!I.mirror&&!I.hide?ot(ot({},A),{},Zt({},F,A[F]+I.width)):A},{left:g.left||0,right:g.right||0}),w=Object.keys(o).reduce(function(A,P){var I=o[P],F=I.orientation;return!I.mirror&&!I.hide?ot(ot({},A),{},Zt({},F,Ms(A,"".concat(F))+I.height)):A},{top:g.top||0,bottom:g.bottom||0}),_=ot(ot({},w),j),T=_.bottom;x&&(_.bottom+=x.props.height||kg.defaultProps.height),v&&n&&(_=MCe(_,a,i,n));var C=u-_.left-_.right,O=f-_.top-_.bottom;return ot(ot({brushBottom:T},_),{},{width:Math.max(C,0),height:Math.max(O,0)})},SMe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},u_=function(t){var n=t.chartName,i=t.GraphicalChild,a=t.defaultTooltipEventType,s=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,p=t.defaultProps,g=function(_,T){var C=T.graphicalItems,O=T.stackGroups,A=T.offset,P=T.updateId,I=T.dataStartIndex,F=T.dataEndIndex,B=_.barSize,$=_.layout,L=_.barGap,V=_.barCategoryGap,H=_.maxBarSize,te=iz($),X=te.numericAxisName,q=te.cateAxisName,W=jMe(C),ae=[];return C.forEach(function(G,z){var le=c_(_.data,{graphicalItems:[G],dataStartIndex:I,dataEndIndex:F}),je=G.type.defaultProps!==void 0?ot(ot({},G.type.defaultProps),G.props):G.props,Y=je.dataKey,Oe=je.maxBarSize,Ke=je["".concat(X,"Id")],Me=je["".concat(q,"Id")],Ie={},be=c.reduce(function(Le,oe){var _e=T["".concat(oe.axisType,"Map")],$e=je["".concat(oe.axisType,"Id")];_e&&_e[$e]||oe.axisType==="zAxis"||Ff();var ze=_e[$e];return ot(ot({},Le),{},Zt(Zt({},oe.axisType,ze),"".concat(oe.axisType,"Ticks"),kc(ze)))},Ie),re=be[q],ve=be["".concat(q,"Ticks")],ce=O&&O[Ke]&&O[Ke].hasStack&&HCe(G,O[Ke].stackGroups),fe=Mc(G.type).indexOf("Bar")>=0,se=wS(re,ve),Q=[],ie=W&&OCe({barSize:B,stackGroups:O,totalSize:SMe(be,q)});if(fe){var ge,ee,we=cn(Oe)?H:Oe,Ue=(ge=(ee=wS(re,ve,!0))!==null&&ee!==void 0?ee:we)!==null&&ge!==void 0?ge:0;Q=DCe({barGap:L,barCategoryGap:V,bandSize:Ue!==se?Ue:se,sizeList:ie[Me],maxBarSize:we}),Ue!==se&&(Q=Q.map(function(Le){return ot(ot({},Le),{},{position:ot(ot({},Le.position),{},{offset:Le.position.offset-Ue/2})})}))}var Ge=G&&G.type&&G.type.getComposedData;Ge&&ae.push({props:ot(ot({},Ge(ot(ot({},be),{},{displayedData:le,props:_,dataKey:Y,item:G,bandSize:se,barPosition:Q,offset:A,stackedData:ce,layout:$,dataStartIndex:I,dataEndIndex:F}))),{},Zt(Zt(Zt({key:G.key||"item-".concat(z)},X,be[X]),q,be[q]),"animationId",P)),childIndex:Lbe(G,_.children),item:G})}),ae},x=function(_,T){var C=_.props,O=_.dataStartIndex,A=_.dataEndIndex,P=_.updateId;if(!m6({props:C}))return null;var I=C.children,F=C.layout,B=C.stackOffset,$=C.data,L=C.reverseStackOrder,V=iz(F),H=V.numericAxisName,te=V.cateAxisName,X=Is(I,i),q=UCe($,X,"".concat(H,"Id"),"".concat(te,"Id"),B,L),W=c.reduce(function(je,Y){var Oe="".concat(Y.axisType,"Map");return ot(ot({},je),{},Zt({},Oe,vMe(C,ot(ot({},Y),{},{graphicalItems:X,stackGroups:Y.axisType===H&&q,dataStartIndex:O,dataEndIndex:A}))))},{}),ae=wMe(ot(ot({},W),{},{props:C,graphicalItems:X}),T==null?void 0:T.legendBBox);Object.keys(W).forEach(function(je){W[je]=f(C,W[je],ae,je.replace("Map",""),n)});var G=W["".concat(te,"Map")],z=bMe(G),le=g(C,ot(ot({},W),{},{dataStartIndex:O,dataEndIndex:A,updateId:P,graphicalItems:X,stackGroups:q,offset:ae}));return ot(ot({formattedGraphicalItems:le,graphicalItems:X,offset:ae,stackGroups:q},z),W)},v=function(w){function _(T){var C,O,A;return nMe(this,_),A=aMe(this,_,[T]),Zt(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Zt(A,"accessibilityManager",new qDe),Zt(A,"handleLegendBBoxUpdate",function(P){if(P){var I=A.state,F=I.dataStartIndex,B=I.dataEndIndex,$=I.updateId;A.setState(ot({legendBBox:P},x({props:A.props,dataStartIndex:F,dataEndIndex:B,updateId:$},ot(ot({},A.state),{},{legendBBox:P}))))}}),Zt(A,"handleReceiveSyncEvent",function(P,I,F){if(A.props.syncId===P){if(F===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(I)}}),Zt(A,"handleBrushChange",function(P){var I=P.startIndex,F=P.endIndex;if(I!==A.state.dataStartIndex||F!==A.state.dataEndIndex){var B=A.state.updateId;A.setState(function(){return ot({dataStartIndex:I,dataEndIndex:F},x({props:A.props,dataStartIndex:I,dataEndIndex:F,updateId:B},A.state))}),A.triggerSyncEvent({dataStartIndex:I,dataEndIndex:F})}}),Zt(A,"handleMouseEnter",function(P){var I=A.getMouseInfo(P);if(I){var F=ot(ot({},I),{},{isTooltipActive:!0});A.setState(F),A.triggerSyncEvent(F);var B=A.props.onMouseEnter;tn(B)&&B(F,P)}}),Zt(A,"triggeredAfterMouseMove",function(P){var I=A.getMouseInfo(P),F=I?ot(ot({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(F),A.triggerSyncEvent(F);var B=A.props.onMouseMove;tn(B)&&B(F,P)}),Zt(A,"handleItemMouseEnter",function(P){A.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Zt(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),Zt(A,"handleMouseMove",function(P){P.persist(),A.throttleTriggeredAfterMouseMove(P)}),Zt(A,"handleMouseLeave",function(P){A.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};A.setState(I),A.triggerSyncEvent(I);var F=A.props.onMouseLeave;tn(F)&&F(I,P)}),Zt(A,"handleOuterEvent",function(P){var I=Rbe(P),F=Ms(A.props,"".concat(I));if(I&&tn(F)){var B,$;/.*touch.*/i.test(I)?$=A.getMouseInfo(P.changedTouches[0]):$=A.getMouseInfo(P),F((B=$)!==null&&B!==void 0?B:{},P)}}),Zt(A,"handleClick",function(P){var I=A.getMouseInfo(P);if(I){var F=ot(ot({},I),{},{isTooltipActive:!0});A.setState(F),A.triggerSyncEvent(F);var B=A.props.onClick;tn(B)&&B(F,P)}}),Zt(A,"handleMouseDown",function(P){var I=A.props.onMouseDown;if(tn(I)){var F=A.getMouseInfo(P);I(F,P)}}),Zt(A,"handleMouseUp",function(P){var I=A.props.onMouseUp;if(tn(I)){var F=A.getMouseInfo(P);I(F,P)}}),Zt(A,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Zt(A,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&A.handleMouseDown(P.changedTouches[0])}),Zt(A,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&A.handleMouseUp(P.changedTouches[0])}),Zt(A,"handleDoubleClick",function(P){var I=A.props.onDoubleClick;if(tn(I)){var F=A.getMouseInfo(P);I(F,P)}}),Zt(A,"handleContextMenu",function(P){var I=A.props.onContextMenu;if(tn(I)){var F=A.getMouseInfo(P);I(F,P)}}),Zt(A,"triggerSyncEvent",function(P){A.props.syncId!==void 0&&ok.emit(lk,A.props.syncId,P,A.eventEmitterSymbol)}),Zt(A,"applySyncEvent",function(P){var I=A.props,F=I.layout,B=I.syncMethod,$=A.state.updateId,L=P.dataStartIndex,V=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)A.setState(ot({dataStartIndex:L,dataEndIndex:V},x({props:A.props,dataStartIndex:L,dataEndIndex:V,updateId:$},A.state)));else if(P.activeTooltipIndex!==void 0){var H=P.chartX,te=P.chartY,X=P.activeTooltipIndex,q=A.state,W=q.offset,ae=q.tooltipTicks;if(!W)return;if(typeof B=="function")X=B(ae,P);else if(B==="value"){X=-1;for(var G=0;G<ae.length;G++)if(ae[G].value===P.activeLabel){X=G;break}}var z=ot(ot({},W),{},{x:W.left,y:W.top}),le=Math.min(H,z.x+z.width),je=Math.min(te,z.y+z.height),Y=ae[X]&&ae[X].value,Oe=eD(A.state,A.props.data,X),Ke=ae[X]?{x:F==="horizontal"?ae[X].coordinate:le,y:F==="horizontal"?je:ae[X].coordinate}:iW;A.setState(ot(ot({},P),{},{activeLabel:Y,activeCoordinate:Ke,activePayload:Oe,activeTooltipIndex:X}))}else A.setState(P)}),Zt(A,"renderCursor",function(P){var I,F=A.state,B=F.isTooltipActive,$=F.activeCoordinate,L=F.activePayload,V=F.offset,H=F.activeTooltipIndex,te=F.tooltipAxisBandSize,X=A.getTooltipEventType(),q=(I=P.props.active)!==null&&I!==void 0?I:B,W=A.props.layout,ae=P.key||"_recharts-cursor";return Se.createElement(YDe,{key:ae,activeCoordinate:$,activePayload:L,activeTooltipIndex:H,chartName:n,element:P,isActive:q,layout:W,offset:V,tooltipAxisBandSize:te,tooltipEventType:X})}),Zt(A,"renderPolarAxis",function(P,I,F){var B=Ms(P,"type.axisType"),$=Ms(A.state,"".concat(B,"Map")),L=P.type.defaultProps,V=L!==void 0?ot(ot({},L),P.props):P.props,H=$&&$[V["".concat(B,"Id")]];return b.cloneElement(P,ot(ot({},H),{},{className:dn(B,H.className),key:P.key||"".concat(I,"-").concat(F),ticks:kc(H,!0)}))}),Zt(A,"renderPolarGrid",function(P){var I=P.props,F=I.radialLines,B=I.polarAngles,$=I.polarRadius,L=A.state,V=L.radiusAxisMap,H=L.angleAxisMap,te=ed(V),X=ed(H),q=X.cx,W=X.cy,ae=X.innerRadius,G=X.outerRadius;return b.cloneElement(P,{polarAngles:Array.isArray(B)?B:kc(X,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray($)?$:kc(te,!0).map(function(z){return z.coordinate}),cx:q,cy:W,innerRadius:ae,outerRadius:G,key:P.key||"polar-grid",radialLines:F})}),Zt(A,"renderLegend",function(){var P=A.state.formattedGraphicalItems,I=A.props,F=I.children,B=I.width,$=I.height,L=A.props.margin||{},V=B-(L.left||0)-(L.right||0),H=LH({children:F,formattedGraphicalItems:P,legendWidth:V,legendContent:u});if(!H)return null;var te=H.item,X=ez(H,QDe);return b.cloneElement(te,ot(ot({},X),{},{chartWidth:B,chartHeight:$,margin:L,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),Zt(A,"renderTooltip",function(){var P,I=A.props,F=I.children,B=I.accessibilityLayer,$=Ts(F,Da);if(!$)return null;var L=A.state,V=L.isTooltipActive,H=L.activeCoordinate,te=L.activePayload,X=L.activeLabel,q=L.offset,W=(P=$.props.active)!==null&&P!==void 0?P:V;return b.cloneElement($,{viewBox:ot(ot({},q),{},{x:q.left,y:q.top}),active:W,label:X,payload:W?te:[],coordinate:H,accessibilityLayer:B})}),Zt(A,"renderBrush",function(P){var I=A.props,F=I.margin,B=I.data,$=A.state,L=$.offset,V=$.dataStartIndex,H=$.dataEndIndex,te=$.updateId;return b.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Xj(A.handleBrushChange,P.props.onChange),data:B,x:jt(P.props.x)?P.props.x:L.left,y:jt(P.props.y)?P.props.y:L.top+L.height+L.brushBottom-(F.bottom||0),width:jt(P.props.width)?P.props.width:L.width,startIndex:V,endIndex:H,updateId:"brush-".concat(te)})}),Zt(A,"renderReferenceElement",function(P,I,F){if(!P)return null;var B=A,$=B.clipPathId,L=A.state,V=L.xAxisMap,H=L.yAxisMap,te=L.offset,X=P.type.defaultProps||{},q=P.props,W=q.xAxisId,ae=W===void 0?X.xAxisId:W,G=q.yAxisId,z=G===void 0?X.yAxisId:G;return b.cloneElement(P,{key:P.key||"".concat(I,"-").concat(F),xAxis:V[ae],yAxis:H[z],viewBox:{x:te.left,y:te.top,width:te.width,height:te.height},clipPathId:$})}),Zt(A,"renderActivePoints",function(P){var I=P.item,F=P.activePoint,B=P.basePoint,$=P.childIndex,L=P.isRange,V=[],H=I.props.key,te=I.item.type.defaultProps!==void 0?ot(ot({},I.item.type.defaultProps),I.item.props):I.item.props,X=te.activeDot,q=te.dataKey,W=ot(ot({index:$,dataKey:q,cx:F.x,cy:F.y,r:4,fill:ZM(I.item),strokeWidth:2,stroke:"#fff",payload:F.payload,value:F.value},$t(X,!1)),Xw(X));return V.push(_.renderActiveDot(X,W,"".concat(H,"-activePoint-").concat($))),B?V.push(_.renderActiveDot(X,ot(ot({},W),{},{cx:B.x,cy:B.y}),"".concat(H,"-basePoint-").concat($))):L&&V.push(null),V}),Zt(A,"renderGraphicChild",function(P,I,F){var B=A.filterFormatItem(P,I,F);if(!B)return null;var $=A.getTooltipEventType(),L=A.state,V=L.isTooltipActive,H=L.tooltipAxis,te=L.activeTooltipIndex,X=L.activeLabel,q=A.props.children,W=Ts(q,Da),ae=B.props,G=ae.points,z=ae.isRange,le=ae.baseLine,je=B.item.type.defaultProps!==void 0?ot(ot({},B.item.type.defaultProps),B.item.props):B.item.props,Y=je.activeDot,Oe=je.hide,Ke=je.activeBar,Me=je.activeShape,Ie=!!(!Oe&&V&&W&&(Y||Ke||Me)),be={};$!=="axis"&&W&&W.props.trigger==="click"?be={onClick:Xj(A.handleItemMouseEnter,P.props.onClick)}:$!=="axis"&&(be={onMouseLeave:Xj(A.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Xj(A.handleItemMouseEnter,P.props.onMouseEnter)});var re=b.cloneElement(P,ot(ot({},B.props),be));function ve(oe){return typeof H.dataKey=="function"?H.dataKey(oe.payload):null}if(Ie)if(te>=0){var ce,fe;if(H.dataKey&&!H.allowDuplicatedCategory){var se=typeof H.dataKey=="function"?ve:"payload.".concat(H.dataKey.toString());ce=Qw(G,se,X),fe=z&&le&&Qw(le,se,X)}else ce=G==null?void 0:G[te],fe=z&&le&&le[te];if(Me||Ke){var Q=P.props.activeIndex!==void 0?P.props.activeIndex:te;return[b.cloneElement(P,ot(ot(ot({},B.props),be),{},{activeIndex:Q})),null,null]}if(!cn(ce))return[re].concat(zg(A.renderActivePoints({item:B,activePoint:ce,basePoint:fe,childIndex:te,isRange:z})))}else{var ie,ge=(ie=A.getItemByXY(A.state.activeCoordinate))!==null&&ie!==void 0?ie:{graphicalItem:re},ee=ge.graphicalItem,we=ee.item,Ue=we===void 0?P:we,Ge=ee.childIndex,Le=ot(ot(ot({},B.props),be),{},{activeIndex:Ge});return[b.cloneElement(Ue,Le),null,null]}return z?[re,null,null]:[re,null]}),Zt(A,"renderCustomized",function(P,I,F){return b.cloneElement(P,ot(ot({key:"recharts-customized-".concat(F)},A.props),A.state))}),Zt(A,"renderMap",{CartesianGrid:{handler:nw,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:nw},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:nw},YAxis:{handler:nw},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((C=T.id)!==null&&C!==void 0?C:Uf("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=RV(A.triggeredAfterMouseMove,(O=T.throttleDelay)!==null&&O!==void 0?O:1e3/60),A.state={},A}return lMe(_,w),iMe(_,[{key:"componentDidMount",value:function(){var C,O;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,O=C.children,A=C.data,P=C.height,I=C.layout,F=Ts(O,Da);if(F){var B=F.props.defaultIndex;if(!(typeof B!="number"||B<0||B>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[B]&&this.state.tooltipTicks[B].value,L=eD(this.state,A,B,$),V=this.state.tooltipTicks[B].coordinate,H=(this.state.offset.top+P)/2,te=I==="horizontal",X=te?{x:V,y:H}:{y:V,x:H},q=this.state.formattedGraphicalItems.find(function(ae){var G=ae.item;return G.type.name==="Scatter"});q&&(X=ot(ot({},X),q.props.points[B].tooltipPosition),L=q.props.points[B].tooltipPayload);var W={activeTooltipIndex:B,isTooltipActive:!0,activeLabel:$,activePayload:L,activeCoordinate:X};this.setState(W),this.renderCursor(F),this.accessibilityManager.setIndex(B)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,O){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==O.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var A,P;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(C){IP([Ts(C.children,Da)],[Ts(this.props.children,Da)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=Ts(this.props.children,Da);if(C&&typeof C.props.shared=="boolean"){var O=C.props.shared?"axis":"item";return l.indexOf(O)>=0?O:s}return s}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var O=this.container,A=O.getBoundingClientRect(),P=Swe(A),I={chartX:Math.round(C.pageX-P.left),chartY:Math.round(C.pageY-P.top)},F=A.width/O.offsetWidth||1,B=this.inRange(I.chartX,I.chartY,F);if(!B)return null;var $=this.state,L=$.xAxisMap,V=$.yAxisMap,H=this.getTooltipEventType(),te=nz(this.state,this.props.data,this.props.layout,B);if(H!=="axis"&&L&&V){var X=ed(L).scale,q=ed(V).scale,W=X&&X.invert?X.invert(I.chartX):null,ae=q&&q.invert?q.invert(I.chartY):null;return ot(ot({},I),{},{xValue:W,yValue:ae},te)}return te?ot(ot({},I),te):null}},{key:"inRange",value:function(C,O){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,I=C/A,F=O/A;if(P==="horizontal"||P==="vertical"){var B=this.state.offset,$=I>=B.left&&I<=B.left+B.width&&F>=B.top&&F<=B.top+B.height;return $?{x:I,y:F}:null}var L=this.state,V=L.angleAxisMap,H=L.radiusAxisMap;if(V&&H){var te=ed(V);return r8({x:I,y:F},te)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,O=this.getTooltipEventType(),A=Ts(C,Da),P={};A&&O==="axis"&&(A.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Xw(this.props,this.handleOuterEvent);return ot(ot({},I),P)}},{key:"addListener",value:function(){ok.on(lk,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){ok.removeListener(lk,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,O,A){for(var P=this.state.formattedGraphicalItems,I=0,F=P.length;I<F;I++){var B=P[I];if(B.item===C||B.props.key===C.key||O===Mc(B.item.type)&&A===B.childIndex)return B}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,O=this.state.offset,A=O.left,P=O.top,I=O.height,F=O.width;return Se.createElement("defs",null,Se.createElement("clipPath",{id:C},Se.createElement("rect",{x:A,y:P,height:I,width:F})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(O,A){var P=ZB(A,2),I=P[0],F=P[1];return ot(ot({},O),{},Zt({},I,F.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(O,A){var P=ZB(A,2),I=P[0],F=P[1];return ot(ot({},O),{},Zt({},I,F.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var O;return(O=this.state.xAxisMap)===null||O===void 0||(O=O[C])===null||O===void 0?void 0:O.scale}},{key:"getYScaleByAxisId",value:function(C){var O;return(O=this.state.yAxisMap)===null||O===void 0||(O=O[C])===null||O===void 0?void 0:O.scale}},{key:"getItemByXY",value:function(C){var O=this.state,A=O.formattedGraphicalItems,P=O.activeItem;if(A&&A.length)for(var I=0,F=A.length;I<F;I++){var B=A[I],$=B.props,L=B.item,V=L.type.defaultProps!==void 0?ot(ot({},L.type.defaultProps),L.props):L.props,H=Mc(L.type);if(H==="Bar"){var te=($.data||[]).find(function(ae){return BAe(C,ae)});if(te)return{graphicalItem:B,payload:te}}else if(H==="RadialBar"){var X=($.data||[]).find(function(ae){return r8(C,ae)});if(X)return{graphicalItem:B,payload:X}}else if(n_(B,P)||r_(B,P)||Nb(B,P)){var q=uke({graphicalItem:B,activeTooltipItem:P,itemData:V.data}),W=V.activeIndex===void 0?q:V.activeIndex;return{graphicalItem:ot(ot({},B),{},{childIndex:W}),payload:Nb(B,P)?V.data[q]:B.props.data[q]}}}return null}},{key:"render",value:function(){var C=this;if(!m6(this))return null;var O=this.props,A=O.children,P=O.className,I=O.width,F=O.height,B=O.style,$=O.compact,L=O.title,V=O.desc,H=ez(O,XDe),te=$t(H,!1);if($)return Se.createElement(OB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Se.createElement(LP,qm({},te,{width:I,height:F,title:L,desc:V}),this.renderClipPath(),y6(A,this.renderMap)));if(this.props.accessibilityLayer){var X,q;te.tabIndex=(X=this.props.tabIndex)!==null&&X!==void 0?X:0,te.role=(q=this.props.role)!==null&&q!==void 0?q:"application",te.onKeyDown=function(ae){C.accessibilityManager.keyboardEvent(ae)},te.onFocus=function(){C.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return Se.createElement(OB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Se.createElement("div",qm({className:dn("recharts-wrapper",P),style:ot({position:"relative",cursor:"default",width:I,height:F},B)},W,{ref:function(G){C.container=G}}),Se.createElement(LP,qm({},te,{width:I,height:F,title:L,desc:V,style:pMe}),this.renderClipPath(),y6(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(b.Component);Zt(v,"displayName",n),Zt(v,"defaultProps",ot({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Zt(v,"getDerivedStateFromProps",function(w,_){var T=w.dataKey,C=w.data,O=w.children,A=w.width,P=w.height,I=w.layout,F=w.stackOffset,B=w.margin,$=_.dataStartIndex,L=_.dataEndIndex;if(_.updateId===void 0){var V=rz(w);return ot(ot(ot({},V),{},{updateId:0},x(ot(ot({props:w},V),{},{updateId:0}),_)),{},{prevDataKey:T,prevData:C,prevWidth:A,prevHeight:P,prevLayout:I,prevStackOffset:F,prevMargin:B,prevChildren:O})}if(T!==_.prevDataKey||C!==_.prevData||A!==_.prevWidth||P!==_.prevHeight||I!==_.prevLayout||F!==_.prevStackOffset||!Wm(B,_.prevMargin)){var H=rz(w),te={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},X=ot(ot({},nz(_,C,I)),{},{updateId:_.updateId+1}),q=ot(ot(ot({},H),te),X);return ot(ot(ot({},q),x(ot({props:w},q),_)),{},{prevDataKey:T,prevData:C,prevWidth:A,prevHeight:P,prevLayout:I,prevStackOffset:F,prevMargin:B,prevChildren:O})}if(!IP(O,_.prevChildren)){var W,ae,G,z,le=Ts(O,kg),je=le&&(W=(ae=le.props)===null||ae===void 0?void 0:ae.startIndex)!==null&&W!==void 0?W:$,Y=le&&(G=(z=le.props)===null||z===void 0?void 0:z.endIndex)!==null&&G!==void 0?G:L,Oe=je!==$||Y!==L,Ke=!cn(C),Me=Ke&&!Oe?_.updateId:_.updateId+1;return ot(ot({updateId:Me},x(ot(ot({props:w},_),{},{updateId:Me,dataStartIndex:je,dataEndIndex:Y}),_)),{},{prevChildren:O,dataStartIndex:je,dataEndIndex:Y})}return null}),Zt(v,"renderActiveDot",function(w,_,T){var C;return b.isValidElement(w)?C=b.cloneElement(w,_):tn(w)?C=w(_):C=Se.createElement(o0,_),Se.createElement(Dn,{className:"recharts-active-dot",key:T},C)});var j=b.forwardRef(function(_,T){return Se.createElement(v,qm({},_,{ref:T}))});return j.displayName=v.displayName,j},NMe=u_({chartName:"LineChart",GraphicalChild:l0,axisComponents:[{axisType:"xAxis",AxisComp:Wc},{axisType:"yAxis",AxisComp:Kc}],formatAxisMap:tI}),sW=u_({chartName:"BarChart",GraphicalChild:kd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Wc},{axisType:"yAxis",AxisComp:Kc}],formatAxisMap:tI}),oW=u_({chartName:"PieChart",GraphicalChild:Vl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:t_},{axisType:"radiusAxis",AxisComp:ZN}],formatAxisMap:t2e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),_Me=u_({chartName:"AreaChart",GraphicalChild:Pd,axisComponents:[{axisType:"xAxis",AxisComp:Wc},{axisType:"yAxis",AxisComp:Kc}],formatAxisMap:tI});const dI=({widget:e,className:t="",autoHideEmptyColumns:n=!1})=>{const i=It(),a=us(),[s,o]=b.useState(null),[l,c]=b.useState(null),[u,f]=b.useState([]),[p,g]=b.useState(!1),[x,v]=b.useState(null),[j,w]=b.useState(""),[_,T]=b.useState(!1);b.useEffect(()=>{const P=async()=>{var I,F,B,$,L,V;g(!0),v(null);try{const H=e.dataSource,te=((I=e.config)==null?void 0:I.filters)&&Array.isArray(e.config.filters)&&e.config.filters.length>0;let X=[];if(te&&(H.startsWith("api:")||H.startsWith("table:"))){const q=await ue("/api/dashboards/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:H,filters:e.config.filters})});if(q.ok){const W=await q.json();X=Array.isArray(W)?W:W.data||[],o(X)}else throw new Error("Failed to fetch filtered data")}else{let q="";const W={"api:patients":{url:"/api/patients?limit=50",dataKey:"patients"},"api:drugs":{url:"/api/drugs?limit=50",dataKey:"drugs"},"api:recurring-medications":{url:"/api/recurring-medications?limit=50"},"api:pharmacy-orders":{url:"/api/pharmacy/orders?limit=50",dataKey:"orders"},"api:lab-orders":{url:"/api/lab/orders?limit=50",dataKey:"orders"},"api:lab-tests":{url:"/api/lab/tests?limit=50",dataKey:"tests"},"api:queue":{url:"/api/queue?limit=50",dataKey:"queue"},"api:bills":{url:"/api/bills?limit=100",dataKey:"bills"}};if(W[H])q=W[H].url;else if(H.startsWith("join:"))q=`/api/dashboards/joined-data?join=${H.split(":")[1]}&limit=50`;else if(H.startsWith("dynamic:")){const G=H.split(":"),z=G[1],le=G[2],je=((B=(F=e.config)==null?void 0:F.primaryColumns)==null?void 0:B.join(","))||"",Y=((L=($=e.config)==null?void 0:$.relatedColumns)==null?void 0:L.join(","))||"";q=`/api/dashboards/dynamic-join?primary=${z}&related=${le}&primaryCols=${je}&relatedCols=${Y}&limit=50`}else H.startsWith("table:")?q=`/api/custom-tables/${H.split(":")[1]}/records?limit=50`:q=`/api/${H.replace("api:","")}?limit=50`;const ae=await ue(q);if(ae.ok){const G=await ae.json();Array.isArray(G)?X=G:(V=W[H])!=null&&V.dataKey&&G[W[H].dataKey]?X=G[W[H].dataKey]:G.data?X=G.data:X=Object.values(G).find(le=>Array.isArray(le))||[],o(X)}else throw new Error(`Failed to fetch data from ${H}`)}if(e.type==="table"&&n&&X.length>0){const W=(e.config.columns||[...new Set(X.flatMap(ae=>Object.keys(ae)))]).filter(ae=>X.some(G=>{const z=G[ae];return z!=null&&z!==""&&(Array.isArray(z)?z.length>0:!0)}));f(W)}else f(e.config.columns||[])}catch(H){v(H.message)}finally{g(!1)}};e.dataSource&&P()},[e.dataSource,e.config]),b.useEffect(()=>{var I;if(!s||!Array.isArray(s)){c(s);return}let P=[...s];if((I=e.config)!=null&&I.filters&&Array.isArray(e.config.filters)&&(P=P.filter(F=>e.config.filters.every(B=>{const $=F[B.field],L=B.value;switch(B.operator){case"equals":return $==L;case"neq":return $!=L;case"contains":return String($).toLowerCase().includes(String(L).toLowerCase());case"gt":return $>L;case"lt":return $<L;case"gte":return $>=L;case"lte":return $<=L;default:return!0}}))),j){const F=j.toLowerCase();P=P.filter(B=>Object.values(B).some($=>String($).toLowerCase().includes(F)))}c(P)},[s,e.config,j]);const C=P=>{P&&(a.prefetchQuery({queryKey:Vt.patients.context(P),queryFn:async()=>{const I=await ue(`/api/patients/${P}/context`);if(!I.ok)throw new Error("Failed to fetch patient context");return I.json()},staleTime:1e3*60*5}),a.prefetchQuery({queryKey:Vt.patientDebts.balance(P),queryFn:async()=>{const I=await ue(`/api/patient-debts/${P}/balance`);if(!I.ok)throw new Error("Failed to fetch patient debt");return I.json()},staleTime:1e3*60}),a.prefetchQuery({queryKey:Vt.queue.latest(P),queryFn:async()=>{const I=await ue(`/api/queue/patient/${P}/latest`);if(!I.ok){if(I.status===404)return null;throw new Error("Failed to fetch queue status")}return I.json()},staleTime:1e3*5}))},O=()=>{var I,F,B;if(p)return r.jsxs("div",{className:"widget-loading",children:[r.jsx(nZ,{className:"spin"})," Loading..."]});if(x)return r.jsxs("div",{className:"widget-error",children:["Error: ",x]});const P=l||[];if(e.type==="stat"){const $=Array.isArray(P)?P.length:0;return r.jsxs("div",{className:"widget-stat",children:[r.jsx("div",{className:"stat-value",children:$}),r.jsx("div",{className:"stat-label",children:((I=e.config)==null?void 0:I.label)||"Total Records"})]})}if(e.type==="chart"){if(!Array.isArray(P)||P.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const{chartType:$="bar",xAxisKey:L="name",dataKey:V="value"}=e.config,H=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return r.jsx("div",{style:{width:"100%",height:350,minHeight:200},children:r.jsx(Nw,{width:"100%",height:"100%",children:$==="line"?r.jsxs(NMe,{data:P,children:[r.jsx(Eb,{strokeDasharray:"3 3"}),r.jsx(Wc,{dataKey:L}),r.jsx(Kc,{}),r.jsx(Da,{}),r.jsx(Ic,{}),r.jsx(l0,{type:"monotone",dataKey:V,stroke:"#8884d8",activeDot:{r:8}})]}):$==="pie"?r.jsxs(oW,{children:[r.jsx(Vl,{data:P,cx:"50%",cy:"50%",labelLine:!1,label:({name:te,percent:X})=>`${te} ${(X*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:V,nameKey:L,children:P.map((te,X)=>r.jsx(t0,{fill:H[X%H.length]},`cell-${X}`))}),r.jsx(Da,{})]}):r.jsxs(sW,{data:P,children:[r.jsx(Eb,{strokeDasharray:"3 3"}),r.jsx(Wc,{dataKey:L}),r.jsx(Kc,{}),r.jsx(Da,{}),r.jsx(Ic,{}),r.jsx(kd,{dataKey:V,fill:"#82ca9d"})]})})})}if(e.type==="table"){if(!Array.isArray(P)||P.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const L=(u.length>0?u:((F=e.config)==null?void 0:F.columns)||(P[0]?Object.keys(P[0]).slice(0,5):[])).map(X=>({key:X,label:X.replace(/_/g," ").replace(/\b\w/g,q=>q.toUpperCase()),editable:!1})),V=async X=>{try{const q=e.dataSource;if(q.startsWith("table:")){const W=q.split(":")[1];for(const ae of X)ae.id&&await ue(`/api/custom-tables/${W}/records/${ae.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:ae})})}else alert("Changes saved locally. Built-in table edits require specific API integration.")}catch(q){console.error("Error saving data:",q),alert("Failed to save changes")}};if(P.length<=10){const X=((B=e.config)==null?void 0:B.columns)||Object.keys(P[0]).filter(W=>!W.startsWith("_")&&W!=="id"),q=W=>{const ae=W.patient_id||W.patientId;ae&&i(`/dashboard/edit-complaint/patient/${ae}`)};return r.jsx("div",{className:"widget-detail-cards",children:P.map((W,ae)=>{const G=W.patient_id||W.patientId,z=!!G;return r.jsxs("div",{className:`detail-card ${z?"clickable":""}`,onClick:z?()=>q(W):void 0,onMouseEnter:()=>z&&C(G),style:z?{cursor:"pointer"}:void 0,children:[r.jsxs("div",{className:"detail-card-header",children:[r.jsx("span",{className:"detail-card-title",children:W.name||W.patient_name||W.title||W.brand_name||`Record ${ae+1}`}),W.token&&r.jsxs("span",{className:"detail-card-badge",children:["Token #",W.token]}),W.status&&r.jsx("span",{className:`detail-card-status status-${W.status.toLowerCase()}`,children:W.status})]}),r.jsx("div",{className:"detail-card-fields",children:X.map(le=>{const je=W[le];if(je==null||je===""||le==="name"||le==="title")return null;const Y=le.replace(/_/g," ").replace(/\b\w/g,Ke=>Ke.toUpperCase()),Oe=typeof je=="object"?JSON.stringify(je):String(je);return r.jsxs("div",{className:"detail-field",children:[r.jsx("span",{className:"detail-field-label",children:Y}),r.jsx("span",{className:"detail-field-value",children:Oe})]},le)})})]},W.id||ae)})})}const H=X=>{const q=X.patient_id||X.patientId;q&&i(`/dashboard/edit-complaint/patient/${q}`)},te=X=>{const q=X.patient_id||X.patientId;q&&C(q)};return r.jsxs("div",{className:"widget-table-container",children:[r.jsxs("div",{className:"widget-table-search",children:[r.jsx(Wn,{size:14}),r.jsx("input",{type:"text",placeholder:"Search...",value:j,onChange:X=>w(X.target.value)})]}),r.jsx(Jb,{columns:L,data:P,editable:!0,showRowNumbers:!0,title:"",onSave:V,onRowClick:H,onRowHover:te})]})}return r.jsx("div",{children:"Unsupported widget type"})},A=r.jsxs("div",{className:`dashboard-widget ${t}`,children:[r.jsxs("div",{className:"widget-header",children:[r.jsx("h3",{children:e.title}),r.jsx("button",{className:"widget-expand-btn",onClick:()=>T(!0),title:"Expand",children:r.jsx(qq,{size:14})})]}),r.jsx("div",{className:"widget-content",children:O()})]});return r.jsxs(r.Fragment,{children:[A,_&&r.jsx("div",{className:"widget-modal-overlay",onClick:()=>T(!1),children:r.jsxs("div",{className:"widget-modal-content",onClick:P=>P.stopPropagation(),children:[r.jsxs("div",{className:"widget-modal-header",children:[r.jsx("h2",{children:e.title}),r.jsx("button",{onClick:()=>T(!1),className:"widget-modal-close",children:r.jsx(Ut,{size:20})})]}),r.jsx("div",{className:"widget-modal-body",children:O()})]})})]})},CMe=({isOpen:e,onClose:t,title:n,widgets:i,onSave:a})=>{const[s,o]=b.useState(!1),[l,c]=b.useState(n),[u,f]=b.useState(""),[p,g]=b.useState(!1);if(!e)return null;const x=async()=>{if(!(!a||!l.trim())){g(!0);try{await a(l,u),o(!1),t()}catch(v){console.error("Failed to save dashboard:",v),alert("Failed to save dashboard")}finally{g(!1)}}};return r.jsx("div",{className:"temp-dash-overlay",onClick:t,children:r.jsxs("div",{className:"temp-dash-modal",onClick:v=>v.stopPropagation(),children:[r.jsxs("div",{className:"temp-dash-header",children:[r.jsxs("div",{className:"temp-dash-title-group",children:[r.jsx("div",{className:"temp-dash-icon",children:r.jsx(lg,{size:16})}),r.jsxs("div",{className:"temp-dash-title-text",children:[r.jsx("h2",{children:n}),r.jsxs("span",{className:"temp-dash-ai-badge",children:[r.jsx(Ow,{size:8})," AI Generated"]})]})]}),r.jsxs("div",{className:"temp-dash-actions",children:[a&&!s&&r.jsxs("button",{onClick:()=>o(!0),className:"temp-dash-save-btn",children:[r.jsx(io,{size:12})," Save"]}),r.jsx("button",{onClick:t,className:"temp-dash-close-btn",children:r.jsx(Ut,{size:16})})]})]}),s&&r.jsxs("div",{className:"temp-dash-save-form",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:l,onChange:v=>c(v.target.value),autoFocus:!0}),r.jsx("input",{type:"text",placeholder:"Description (optional)",value:u,onChange:v=>f(v.target.value)}),r.jsxs("div",{className:"temp-dash-save-actions",children:[r.jsx("button",{onClick:()=>o(!1),className:"temp-dash-cancel-btn",children:"Cancel"}),r.jsx("button",{onClick:x,className:"temp-dash-confirm-btn",disabled:p||!l.trim(),children:p?"Saving...":"Confirm"})]})]}),r.jsx("div",{className:"temp-dash-body",children:i.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets to display."}):r.jsx("div",{className:"temp-dash-grid",children:i.map((v,j)=>r.jsx(dI,{widget:v,isEditing:!1,autoHideEmptyColumns:!0},v.id||`widget-${j}`))})})]})})},az=()=>eN(()=>import("./EditComplaintPage-D5HRWji7.js"),__vite__mapDeps([0,1])),TMe=()=>eN(()=>import("./AddPatientPage-DUwF_Rqh.js"),__vite__mapDeps([2,3])),rw=[{name:"Dashboard",path:"/dashboard",icon:r.jsx(lg,{size:16}),keywords:["home","main","analytics","stats"],roles:["all"]},{name:"Clinic Hub",path:"/dashboard/clinic-hub",icon:r.jsx(Cc,{size:16}),keywords:["central","hub","overview"],roles:["admin","superadmin"]},{name:"Analysis Dashboard",path:"/dashboard/analysis",icon:r.jsx(Cc,{size:16}),keywords:["reports","stats","finance","money"],roles:["admin","superadmin"]},{name:"Live AI Assistant",path:"/live-api",icon:r.jsx(qv,{size:16}),keywords:["ai","chat","voice","assistant"],roles:["all"]},{name:"Clinic Subscriptions",path:"/dashboard/clinic-subscriptions",icon:r.jsx(Cc,{size:16}),keywords:["plans","billing","tenants"],roles:["superadmin"]},{name:"User Management",path:"/dashboard/users",icon:r.jsx(Ro,{size:16}),keywords:["admins","clinics","accounts"],roles:["superadmin"]},{name:"Patient Search",path:"/dashboard/search-patient",icon:r.jsx(Wn,{size:16}),keywords:["find","lookup","patient"],roles:["all"]},{name:"All Patients",path:"/dashboard/all-patients",icon:r.jsx(Ro,{size:16}),keywords:["list","records","database"],roles:["admin","receptionist","doctor"]},{name:"Add New Patient",path:"/dashboard/add-patient",icon:r.jsx(sN,{size:16}),keywords:["register","new","create","onboard"],roles:["admin","receptionist","doctor"]},{name:"Admissions",path:"/manage-admission",icon:r.jsx(ZX,{size:16}),keywords:["ipd","admit","discharge","rooms"],roles:["admin","doctor","receptionist"]},{name:"Appointment Queue",path:"/dashboard/reception",icon:r.jsx(Ro,{size:16}),keywords:["queue","reception","waiting","appointments"],roles:["admin","receptionist","superadmin"]},{name:"Doctor Queue",path:"/dashboard/queue",icon:r.jsx(Cc,{size:16}),keywords:["waiting","patients","consultation"],roles:["admin","doctor","superadmin"]},{name:"Pharmacy Inventory",path:"/dashboard/inventory",icon:r.jsx(Oc,{size:16}),keywords:["drugs","medicine","stock","pharmacy"],roles:["admin","pharmacy"]},{name:"Pharmacy Queue",path:"/dashboard/pharmacy-queue",icon:r.jsx(Oc,{size:16}),keywords:["orders","billing","dispense"],roles:["admin","pharmacy","superadmin"]},{name:"Add New Drug",path:"/dashboard/inventory/add",icon:r.jsx(Oc,{size:16}),keywords:["create","medicine","stock"],roles:["admin","pharmacy"]},{name:"Add Pharmacy Order",path:"/dashboard/add-order",icon:r.jsx(Qk,{size:16}),keywords:["sell","bill","dispense"],roles:["admin","pharmacy"]},{name:"Refill Reminders",path:"/refill-reminders",icon:r.jsx(vi,{size:16}),keywords:["recurring","sms","alert"],roles:["admin","pharmacy"]},{name:"Distributors",path:"/dashboard/distributors",icon:r.jsx(_D,{size:16}),keywords:["suppliers","vendors","stock"],roles:["admin","pharmacy"]},{name:"Purchase",path:"/dashboard/purchase",icon:r.jsx(Qk,{size:16}),keywords:["buy","procurement","stock"],roles:["admin","pharmacy"]},{name:"Lab Panel",path:"/dashboard/lab",icon:r.jsx(os,{size:16}),keywords:["billing","orders","queue"],roles:["admin","lab","superadmin"]},{name:"Create Lab Order",path:"/create-lab-order",icon:r.jsx(os,{size:16}),keywords:["test","pathology","diagnostics"],roles:["admin","doctor","lab"]},{name:"Search Lab Reports",path:"/lab/search-report",icon:r.jsx(Wn,{size:16}),keywords:["results","history","find"],roles:["admin","doctor","lab"]},{name:"Lab Inventory",path:"/lab-inventory",icon:r.jsx(os,{size:16}),keywords:["reagents","tests","stock"],roles:["admin","lab"]},{name:"Dental",path:"/dashboard/dental",icon:r.jsx(Cc,{size:16}),keywords:["teeth","dentist","chart","odontogram"],roles:["admin","doctor","superadmin"]},{name:"Create Custom Bill",path:"/create-custom-bill",icon:r.jsx(ha,{size:16}),keywords:["invoice","custom","charge"],roles:["admin","receptionist"]},{name:"Billing History",path:"/billing",icon:r.jsx(SD,{size:16}),keywords:["transactions","payments","history"],roles:["admin"]},{name:"Custom Tables",path:"/custom-tables",icon:r.jsx(ha,{size:16}),keywords:["database","sheets","custom data"],roles:["admin","superadmin"]},{name:"Custom Dashboards",path:"/dashboards",icon:r.jsx(lg,{size:16}),keywords:["charts","reports","analytics"],roles:["admin","doctor","superadmin"]},{name:"Staff Management",path:"/dashboard/staff",icon:r.jsx(ug,{size:16}),keywords:["users","employees","roles","admin"],roles:["admin","superadmin"]},{name:"Role Management",path:"/dashboard/roles",icon:r.jsx(ug,{size:16}),keywords:["roles","permissions","access","custom roles"],roles:["admin","superadmin"]}],sz=[{icon:"",text:"Update Paracetamol stock to 100",roles:["admin","pharmacy"]},{icon:"",text:"Change CBC Test price to 350",roles:["admin","lab","superadmin"]},{icon:"",text:"Set Voice AI language to Hindi",roles:["all"]},{icon:"",text:"Show revenue for last month",roles:["admin","superadmin"]},{icon:"",text:"Purchase 50 strips of Aspirin",roles:["admin","pharmacy"]},{icon:"",text:"Update consultation fee to 500",roles:["admin","superadmin"]},{icon:"",text:"Add new staff member",roles:["admin","superadmin"]},{icon:"",text:"Register: John Doe, 25M, Fever",roles:["all"]},{icon:"",text:"Check Metformin availability",roles:["admin","pharmacy","doctor"]}],AMe=({user:e})=>{const{isOpen:t,closeCommandBar:n}=$c(),i=It(),a=Gr(),s=b.useRef(null),[o,l]=b.useState(""),[c,u]=b.useState([]),[f,p]=b.useState([]),[g,x]=b.useState([]),[v,j]=b.useState(!1),[w,_]=b.useState(!0),[T,C]=b.useState(!0),{customColumnsConfig:O}=EN(),A=(O==null?void 0:O.patients)||[],[P,I]=b.useState(null),[F,B]=b.useState(!1),$=us(),{chatHistory:L,isProcessing:V,handleSendMessage:H,setChatQuery:te,refreshChat:X,selectedImage:q,handleImageSelect:W,clearImage:ae,temporaryDashboard:G,closeTemporaryDashboard:z,saveTemporaryDashboard:le}=GD({settings:{},staffList:[],enableDynamicContext:!1}),je=qe=>{qe&&($.prefetchQuery({queryKey:Vt.patients.context(qe),queryFn:async()=>{const wt=await ue(`/api/patients/${qe}/context`);if(!wt.ok)throw new Error("Failed to fetch patient context");return wt.json()},staleTime:5*60*1e3}),$.prefetchQuery({queryKey:Vt.patientDebts.balance(qe),queryFn:async()=>{const wt=await ue(`/api/patient-debts/${qe}/balance`);return wt.ok?wt.json():{netDebt:0}},staleTime:1*60*1e3}),$.prefetchQuery({queryKey:Vt.queue.latest(qe),queryFn:async()=>{const wt=await ue(`/api/queue/patient/${qe}/latest`);if(!wt.ok)throw new Error("Failed to fetch latest queue status");const Tt=await wt.json();return Tt!=null&&Tt._id&&$.prefetchQuery({queryKey:Vt.queue.entry(Tt._id),queryFn:async()=>{const Xn=await ue(`/api/queue/doctor/complaint/${Tt._id}`);if(!Xn.ok)throw new Error("Failed to fetch complaint record");return Xn.json()},staleTime:1*60*1e3}),Tt},staleTime:5e3}),$.prefetchQuery({queryKey:Vt.dental.records(qe),queryFn:async()=>{const wt=await ue(`/api/dental/patient/${qe}`);if(!wt.ok)throw new Error("Failed to fetch dental records");return wt.json()},staleTime:5*60*1e3}))},Y=b.useMemo(()=>e?rw.filter(qe=>qe.roles.includes("all")||e.role&&qe.roles.includes(e.role)):rw,[e]),Oe=b.useMemo(()=>e?sz.filter(qe=>qe.roles.includes("all")||e.role&&qe.roles.includes(e.role)):sz,[e]),Ke=b.useMemo(()=>new so(Y,{keys:["name","keywords"],threshold:.3}),[Y]),[Me,Ie]=b.useState(!1),[be,re]=b.useState(!1),[ve,ce]=b.useState(!1);b.useEffect(()=>{if(t)Ie(!0),ce(!1);else{ce(!0);const qe=setTimeout(()=>{Ie(!1),ce(!1),X()},200);return()=>clearTimeout(qe)}},[t,X]);const{setPageContext:fe}=rN();b.useEffect(()=>{if(t){const qe=a.pathname,wt=rw.find(Tt=>Tt.path===qe)||rw.find(Tt=>qe.startsWith(Tt.path)&&Tt.path!=="/dashboard");fe(wt?{name:wt.name,path:qe,data:{role:wt.roles}}:{name:"Current Page",path:qe})}},[t,a.pathname,fe]);const se=b.useRef(null),Q=qe=>{var Tt;const wt=(Tt=qe.target.files)==null?void 0:Tt[0];wt&&W(wt)},[ie,ge]=b.useState({x:0,y:0}),[ee,we]=b.useState(!1),Ue=b.useRef({x:0,y:0}),Ge=b.useRef({x:0,y:0}),Le=b.useRef(!1),oe=b.useRef(null);b.useEffect(()=>{const qe=Tt=>{if(!ee)return;Le.current=!0;const Xn=Tt.clientX-Ue.current.x,wr=Tt.clientY-Ue.current.y;let Un=Ge.current.x+Xn,Tn=Ge.current.y+wr;if(oe.current){const Nn=oe.current.offsetWidth,ui=oe.current.offsetHeight,Vn=(window.innerWidth-Nn)/2,Hi=(window.innerHeight-ui)/2,Hl=Math.max(0,Vn),Ho=Math.max(0,Hi);Un=Math.max(-Hl,Math.min(Hl,Un)),Tn=Math.max(-Ho,Math.min(Ho,Tn))}ge({x:Un,y:Tn})},wt=()=>{we(!1)};return ee&&(window.addEventListener("mousemove",qe),window.addEventListener("mouseup",wt)),()=>{window.removeEventListener("mousemove",qe),window.removeEventListener("mouseup",wt)}},[ee]),b.useEffect(()=>{a.pathname==="/dashboard"&&(l(""),p([]),x([])),t&&(a.pathname==="/dashboard"?B(!1):B(!0))},[a.pathname]),b.useEffect(()=>{(f.length>0||g.length>0)&&F&&B(!1)},[f,g]),b.useEffect(()=>{if(t&&window.innerWidth<=768){window.history.pushState({commandBarOpen:!0},"");const qe=wt=>{wt.preventDefault(),B(!0)};return window.addEventListener("popstate",qe),()=>{window.removeEventListener("popstate",qe)}}},[t]),b.useEffect(()=>{F||ge({x:0,y:0})},[F]),b.useEffect(()=>{te(o)},[o]),b.useEffect(()=>{t&&!F&&s.current&&setTimeout(()=>{if(s.current){s.current.focus();const qe=s.current.value.length;qe>0&&s.current.setSelectionRange(qe,qe)}},50)},[t,F]),b.useEffect(()=>{if(!t||F||!(window.innerWidth<=768))return;const wt=window.scrollY,Tt=document.body.style.overflow,Xn=document.documentElement.style.overflow,wr=document.body.style.position,Un=document.body.style.top,Tn=document.body.style.width;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${wt}px`,document.body.style.width="100%",()=>{document.documentElement.style.overflow=Xn,document.body.style.overflow=Tt,document.body.style.position=wr,document.body.style.top=Un,document.body.style.width=Tn,window.scrollTo(0,wt)}},[t,F]);const _e=qe=>{!qe.trim()&&!q||(B(!1),H(qe),l(""),p([]),x([]))},{preFilledQuery:$e,setPreFilledQuery:ze}=$c();b.useEffect(()=>{t&&$e&&(l($e),setTimeout(()=>{_e($e),ze("")},300))},[t,$e,ze]),b.useEffect(()=>{P&&(l(P),re(!1),setTimeout(()=>_e(P),50),I(null))},[P]);const K=()=>{re(!0)},ye=()=>{l(""),p([]),x([]),X(),s.current&&s.current.focus()};b.useEffect(()=>{t&&(async()=>{_(!0);try{const wt=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),Tt=await ue(`/api/patients?${wt.toString()}`);if(Tt.ok){const Xn=await Tt.json();u(Xn.patients||[])}}catch(wt){console.error("Error fetching recent patients:",wt)}finally{_(!1)}})()},[t]);const pe=b.useMemo(()=>xd(async qe=>{const wt=qe.trim(),Tt=/^\d+$/.test(wt),Xn=wt.split(/\s+/).length;if(wt.length>1){const wr=Ke.search(wt);x(wr.map(Un=>Un.item))}else x([]);if(wt.length<2||Tt&&wt.length>10||!Tt&&Xn>3){p([]),j(!1);return}j(!0);try{const wr=new URLSearchParams({search:encodeURIComponent(qe),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Un=await ue(`/api/patients?${wr.toString()}`);if(Un.ok){const Tn=await Un.json();p(Tn.patients||[])}}catch(wr){console.error("Search error:",wr)}finally{j(!1),az()}},300),[e]),me=qe=>{const wt=qe.target.value;l(wt),pe(wt)},Ne=qe=>{qe.id&&i(`/dashboard/edit-complaint/patient/${qe.id}`)},Be=qe=>{i(qe.path)},ke=qe=>{qe.path==="/dashboard/add-patient"&&TMe()},Ye=qe=>{l(qe),setTimeout(()=>_e(qe),50)},rt=async()=>{if(o.trim()){j(!0);try{const qe=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.trim(),age:null,gender:null,phone:null})});if(!qe.ok){const wr=await qe.json();throw new Error(wr.message||"Failed to create patient")}const wt=await qe.json();let Tt=null;const Xn=await ue("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:wt.id,complaint:"Walk-in (Quick Create)"})});if(Xn.ok&&(Tt=(await Xn.json()).id),Tt)i(`/dashboard/edit-complaint/${Tt}`);else{const wr=await ue(`/api/queue/patient/${wt.id}/latest`);if(wr.ok){const Un=await wr.json();Un&&Un._id&&i(`/dashboard/edit-complaint/${Un._id}`)}}n()}catch(qe){console.error("Failed to create patient:",qe),alert("Failed to create patient. Please try again.")}finally{j(!1)}}},gt=qe=>{o.trim()&&_e(o)},Pe=qe=>{qe.key==="Enter"&&!qe.shiftKey&&(qe.preventDefault(),gt())},Je=qe=>{qe.target===qe.currentTarget&&n()};if(!t&&!Me)return null;const et=o.trim().length>0||(f.length>0||g.length>0)&&!v,dt=o.length===0&&f.length===0&&g.length===0,Ct=o.length>=3&&f.length===0&&g.length===0&&!v,bt=L.length>0||V,Ce=!bt||et,ct=bt&&et,At=bt&&!T&&!F&&!et;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${Dt.overlay} ${F?Dt.overlayMinimized:""} ${ve?Dt.exiting:""}`,onClick:Je,children:r.jsxs("div",{ref:oe,className:`${Dt.modal} ${F?Dt.minimized:""} ${At?Dt.collapsed:""} ${ve?Dt.exiting:""}`,style:{transform:`translate(${ie.x}px, ${ie.y}px)`,height:At?"auto":void 0},onClick:()=>{Le.current||(F?B(!1):At&&C(!0))},children:[r.jsxs("div",{className:Dt.dragBar,onMouseDown:qe=>{qe.target.closest("button")||(we(!0),Le.current=!1,Ue.current={x:qe.clientX,y:qe.clientY},Ge.current={x:ie.x,y:ie.y})},children:[r.jsxs("div",{className:Dt.dragBarControls,children:[r.jsx("button",{className:Dt.windowControlBtn,onClick:n,title:"Close",children:r.jsx(Ut,{size:24,color:"#64748b"})}),r.jsx("button",{className:Dt.windowControlBtn,onClick:()=>B(!F),title:F?"Maximize":"Minimize",children:F?r.jsx(qq,{size:24,color:"#64748b"}):r.jsx(mZ,{size:24,color:"#64748b"})})]}),r.jsx("div",{className:Dt.dragBarTitle,children:bt?r.jsxs(r.Fragment,{children:[r.jsx(qv,{size:14,className:"text-violet-600"}),r.jsx("span",{children:"AI Assistant"})]}):et?r.jsxs(r.Fragment,{children:[r.jsx(Wn,{size:14,className:"text-blue-500"}),r.jsx("span",{children:"Search Results"})]}):r.jsx("span",{style:{opacity:.5,fontWeight:500},children:"Clinic Manager AI"})}),r.jsx("div",{className:Dt.dragBarControlsRight,children:r.jsx("button",{className:Dt.newChatBtn,onClick:ye,title:"New Chat",children:r.jsx($a,{size:20})})})]}),r.jsxs("div",{className:Dt.contentWrapper,children:[bt&&r.jsx("div",{className:Dt.chatSectionFill,children:r.jsxs("div",{className:Dt.chatMessagesFill,children:[L.map((qe,wt)=>r.jsx("div",{className:`${Dt.chatBubble} ${qe.role==="user"?Dt.chatBubbleUser:qe.role==="model"?Dt.chatBubbleModel:Dt.chatBubbleSystem}`,children:qe.role==="model"?r.jsx(Ef,{remarkPlugins:[kf],children:qe.text}):qe.text},wt)),V&&r.jsxs("div",{className:Dt.processing,children:[r.jsx(zc,{size:14,className:Dt.spinner}),"Thinking..."]})]})}),Ce&&r.jsxs("div",{className:ct?Dt.overlayContent:Dt.content,children:[dt&&!bt&&r.jsxs("div",{className:Dt.section,children:[r.jsx("div",{className:Dt.sectionTitle,children:"Newly Registered"}),r.jsx("div",{className:Dt.recentList,children:w?[1,2,3,4,5].map(qe=>r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}},qe)):c.length>0?c.map(qe=>r.jsxs("div",{className:Dt.recentPill,onClick:()=>Ne(qe),onMouseEnter:()=>je(qe.id),children:[r.jsx("span",{className:Dt.recentName,children:qe.name||"Patient"}),r.jsxs("span",{className:Dt.recentToken,children:["#",qe.token]}),r.jsxs("span",{className:Dt.recentInfo,children:[qe.age?`${qe.age}y`:""," ",qe.gender||""]})]},qe.id)):r.jsx("div",{className:Dt.recentInfo,style:{opacity:.5},children:"No recent patients found."})})]}),dt&&!bt&&r.jsxs("div",{className:Dt.section,children:[r.jsx("div",{className:Dt.sectionTitle,children:"Try Asking AI..."}),r.jsx("div",{className:Dt.examplesGrid,children:Oe.map((qe,wt)=>r.jsxs("div",{className:Dt.exampleCard,onClick:()=>Ye(qe.text),children:[r.jsx("span",{className:Dt.exampleIcon,children:qe.icon}),r.jsx("span",{className:Dt.exampleText,children:qe.text})]},wt))})]}),v&&r.jsx("div",{className:Dt.section,children:r.jsxs("div",{className:Dt.processing,children:[r.jsx(zc,{size:16,className:Dt.spinner}),"Searching..."]})}),g.length>0&&!v&&r.jsxs("div",{className:Dt.section,children:[r.jsx("div",{className:Dt.sectionTitle,children:"Pages Found"}),r.jsx("div",{className:Dt.resultsList,children:g.map((qe,wt)=>r.jsxs("div",{className:Dt.resultItem,onClick:()=>Be(qe),onMouseEnter:()=>ke(qe),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{color:"#7c3aed"},children:qe.icon}),r.jsx("span",{className:Dt.resultName,children:qe.name})]}),r.jsx("span",{className:Dt.resultDetails,style:{fontSize:"0.7rem"},children:"Jump to page"})]},wt))})]}),et&&r.jsxs("div",{className:Dt.section,children:[r.jsx("div",{className:Dt.sectionTitle,children:"Patients Found"}),r.jsxs("div",{className:Dt.resultsList,children:[o.trim().length>0&&r.jsx("div",{className:Dt.resultItem,onClick:rt,style:{border:"1px dashed #6366f1",backgroundColor:"#f5f3ff"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#8b5cf6",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(sN,{size:16})}),r.jsxs("div",{children:[r.jsxs("span",{className:Dt.resultName,style:{color:"#7c3aed"},children:['Create "',o,'"']}),r.jsx("div",{className:"text-xs text-violet-600 mt-0.5",children:"Add new patient"})]})]})}),f.map(qe=>r.jsxs("div",{className:Dt.resultItem,onClick:()=>Ne(qe),onMouseEnter:()=>{az(),je(qe.id)},children:[r.jsxs("div",{children:[r.jsxs("span",{className:Dt.resultToken,children:["[#",qe.token,"]"]}),r.jsx("span",{className:Dt.resultName,children:qe.name})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[qe.age&&r.jsxs("span",{children:[qe.age," Yrs"]}),qe.gender&&r.jsx("span",{children:qe.gender}),r.jsxs("span",{children:["ID: ",qe.id.slice(-6).toUpperCase()]}),A.map(wt=>{var Xn;const Tt=(Xn=qe.custom_fields)==null?void 0:Xn[wt.key];return Tt?r.jsxs("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 border border-slate-200",children:[wt.label,": ",String(Tt)]},wt.key):null})]})]},qe.id))]})]}),Ct&&!bt&&r.jsx("div",{className:Dt.section,children:r.jsxs("div",{className:Dt.noResults,children:["Press ",r.jsx("strong",{children:"Enter"}),' to send "',o,'" to AI Assistant']})})]})]}),r.jsxs("div",{className:Dt.header,children:[r.jsx("div",{className:Dt.inputWrapper,children:r.jsxs("div",{className:Dt.inputContainer,children:[r.jsx("div",{className:Dt.minimizedSearchIcon,children:r.jsx(Wn,{size:24})}),r.jsx("textarea",{ref:qe=>{s.current=qe,qe&&(qe.style.height="auto",qe.style.height=Math.min(qe.scrollHeight,150)+"px")},className:Dt.input,placeholder:F?"Type here...":"Search (Name/Token/Phone), Ask AI, or Enter New Case (Name Age Sex Complaint)...",value:o,onChange:qe=>{me(qe),qe.target.style.height="auto",qe.target.style.height=Math.min(qe.target.scrollHeight,150)+"px"},onKeyDown:Pe,onFocus:qe=>{qe.target.scrollIntoView=()=>{},setTimeout(()=>{oe.current&&(oe.current.scrollTop=oe.current.scrollHeight)},100)},rows:1,disabled:V}),q&&r.jsxs("div",{style:{position:"relative",marginRight:"0.5rem"},children:[r.jsx("img",{src:q,alt:"Selected",style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"4px",border:"1px solid #e2e8f0"}}),r.jsx("button",{onClick:ae,style:{position:"absolute",top:-4,right:-4,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",padding:"1px",cursor:"pointer",display:"flex"},children:r.jsx(Ut,{size:8})})]}),r.jsxs("div",{className:Dt.controlsGroup,children:[r.jsx("button",{className:Dt.iconButton,onClick:()=>{var qe;return(qe=se.current)==null?void 0:qe.click()},title:"Attach Image",children:r.jsx(ND,{size:16})}),(o.trim().length>0||q)&&r.jsx("button",{className:`${Dt.iconButton} ${Dt.sendButton}`,onClick:()=>_e(o),title:"Send to AI",children:r.jsx(aN,{size:16})}),r.jsx("button",{className:Dt.iconButton,onClick:K,title:"Voice Input",children:r.jsx(iN,{size:16})})]})]})}),r.jsx("input",{type:"file",ref:se,onChange:Q,accept:"image/*",style:{display:"none"}})]})]})}),be&&r.jsx(AN,{onClose:()=>re(!1),patientData:null,tokenNumber:null,onAiSummaryChange:qe=>{console.log("AI Summary:",qe),I(qe)}}),G&&r.jsx(CMe,{isOpen:!!G,onClose:z,title:G.title,widgets:G.widgets,onSave:le})]})};var lW={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oz=Se.createContext&&Se.createContext(lW),EMe=["attr","size","title"];function kMe(e,t){if(e==null)return{};var n=PMe(e,t),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function PMe(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function YS(){return YS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},YS.apply(this,arguments)}function lz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function QS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lz(Object(n),!0).forEach(function(i){OMe(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lz(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function OMe(e,t,n){return t=DMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DMe(e){var t=MMe(e,"string");return typeof t=="symbol"?t:t+""}function MMe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cW(e){return e&&e.map((t,n)=>Se.createElement(t.tag,QS({key:n},t.attr),cW(t.child)))}function Ba(e){return t=>Se.createElement(IMe,YS({attr:QS({},e.attr)},t),cW(e.child))}function IMe(e){var t=n=>{var{attr:i,size:a,title:s}=e,o=kMe(e,EMe),l=a||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),Se.createElement("svg",YS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:c,style:QS(QS({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Se.createElement("title",null,s),e.children)};return oz!==void 0?Se.createElement(oz.Consumer,null,n=>t(n)):t(lW)}function RMe(e){return Ba({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(e)}function cz(e){return Ba({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function yv(e){return Ba({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function uz(e){return Ba({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(e)}function uk(e){return Ba({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(e)}function Xh(e){return Ba({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function iw(e){return Ba({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(e)}function Pm(e){return Ba({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(e)}function xv(e){return Ba({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(e)}function Rm(e){return Ba({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function uW(e){return Ba({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function dz(e){return Ba({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(e)}function LMe(e){return Ba({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function aw(e){return Ba({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(e)}function Om(e){return Ba({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const dW={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:Xh},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:iw},{path:"/dashboard/users",name:"User Management",icon:Om}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:Xh}]},{title:"Clinic Management",links:[{path:"/dashboard/clinic-hub",name:"Clinic Hub",icon:uz},{path:"/dashboard/staff",name:"Staff Management",icon:Om},{path:"/dashboard/roles",name:"Role Management",icon:aw},{path:"/custom-tables",name:"Custom Tables",icon:yv},{path:"/dashboards",name:"Custom Dashboards",icon:cz}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:iw},{path:"/dashboard/patients",name:"All Patients",icon:Om},{path:"/dashboard/patients/search",name:"Search Patient",icon:Rm},{path:"/dashboard/files",name:"Patient Files",icon:yv}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:yv},{path:"/dashboard/inventory",name:"Inventory Management",icon:xv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:xv},{path:"/dashboard/distributors",name:"Distributor Management",icon:Om}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:dz},{path:"/dashboard/reception",name:"Appointment Queue",icon:Xh},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:Pm},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:Pm}]},{title:"Role Operations",links:[{path:"/manage-admission",name:"Admission Desk",icon:aw},{path:"/dashboard/pharmacy-queue",name:"Pharmacy Queue",icon:xv},{path:"/dashboard/lab",name:"Lab Panel",icon:uk},{path:"/billing",name:"Billing",icon:Pm},{path:"/create-custom-bill",name:"Custom Bill",icon:Pm}]},{title:"Help & Support",links:[{path:"/dashboard/guide",name:"User Guide",icon:RMe}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search-patient",name:"Patient Search",icon:Rm},{path:"/dashboard/add-patient",name:"Add Patient",icon:iw},{path:"/manage-admission",name:"Manage Admission",icon:aw}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:uk},{path:"/billing",name:"Billing",icon:Pm}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:dz}]},{title:"Analytics",links:[{path:"/dashboards",name:"Custom Dashboards",icon:cz}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Appointment Queue",icon:Xh}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:Om},{path:"/dashboard/add-patient",name:"Add Patient",icon:iw},{path:"/dashboard/search-patient",name:"Search Patient",icon:Rm}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:Pm},{path:"/manage-admission",name:"Manage Admission",icon:aw}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:Xh},{path:"/lab-inventory",name:"Lab Test Inventory",icon:uk},{path:"/lab/search-report",name:"Search Lab Report",icon:Rm}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:Xh},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:xv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:xv},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:yv},{path:"/dashboard/distributors",name:"Distributor Management",icon:Om}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:yv},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:uz},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:Rm}]}]},hI=async()=>{const e=await ue("/api/clinic-subscriptions/plans",{method:"GET"});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to fetch clinic subscription plans")}return e.json()},FMe=async e=>{const t=await ue(`/api/clinic-subscriptions/cancel/${e}`,{method:"PUT"});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to cancel clinic subscription")}return t.json()},$Me=async e=>{const t=await ue(`/api/clinics/${e}/subscription-status`,{method:"GET"});if(!t.ok){const n=await t.json();throw new Error(n.message||`Failed to fetch subscription status for clinic ${e}`)}return t.json()},BMe=async e=>{const t=await ue(`/api/clinic-subscriptions/plans/${e}`,{method:"GET"});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch clinic subscription plan")}return t.json()},zMe=async e=>{const t=await ue("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to create clinic subscription plan")}return t.json()},qMe=async(e,t)=>{const n=await ue(`/api/clinic-subscriptions/plans/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const i=await n.json();throw new Error(i.message||"Failed to update clinic subscription plan")}return n.json()},UMe=async e=>{const t=await ue(`/api/clinic-subscriptions/plans/${e}`,{method:"DELETE"});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to deactivate clinic subscription plan")}return t.json()},VMe=async e=>{const t=await ue("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:e})});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to initiate clinic subscription")}return t.json()},HMe=async()=>{try{const e=await ue("/api/clinic-subscriptions/pending",{method:"GET"});return e.ok?e.json():null}catch(e){return console.error("Error checking for pending subscription:",e),null}},GMe=async()=>{const e=await ue("/api/clinics/subscription-status",{method:"GET"});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to fetch clinic subscription status")}return e.json()};function WMe(e=!0){return ZS({queryKey:Vt.clinicSubscription,queryFn:GMe,enabled:e,staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!0})}const KMe="_container_c9bhr_3",YMe="_header_c9bhr_21",QMe="_titleGroup_c9bhr_41",XMe="_title_c9bhr_41",JMe="_closeButton_c9bhr_59",ZMe="_messageList_c9bhr_79",eIe="_emptyState_c9bhr_108",tIe="_emptyStateIcon_c9bhr_119",nIe="_exampleContainer_c9bhr_145",rIe="_exampleChip_c9bhr_153",iIe="_messageRow_c9bhr_176",aIe="_messageRowUser_c9bhr_194",sIe="_messageRowModel_c9bhr_198",oIe="_messageRowSystem_c9bhr_202",lIe="_bubble_c9bhr_208",cIe="_bubbleUser_c9bhr_224",uIe="_bubbleModel_c9bhr_234",dIe="_bubbleSystem_c9bhr_247",hIe="_processingIndicator_c9bhr_330",fIe="_spin_c9bhr_343",pIe="_inputArea_c9bhr_358",mIe="_imagePreviewContainer_c9bhr_365",gIe="_inputContainer_c9bhr_376",yIe="_inputField_c9bhr_393",xIe="_sendButton_c9bhr_407",ur={container:KMe,header:YMe,titleGroup:QMe,title:XMe,closeButton:JMe,messageList:ZMe,emptyState:eIe,emptyStateIcon:tIe,exampleContainer:nIe,exampleChip:rIe,messageRow:iIe,messageRowUser:aIe,messageRowModel:sIe,messageRowSystem:oIe,bubble:lIe,bubbleUser:cIe,bubbleModel:uIe,bubbleSystem:dIe,processingIndicator:hIe,spin:fIe,inputArea:pIe,imagePreviewContainer:mIe,inputContainer:gIe,inputField:yIe,sendButton:xIe},hW=({onClose:e,settings:t,staffList:n,onSettingsUpdate:i,onStaffUpdate:a,onHighlight:s})=>{const{chatQuery:o,setChatQuery:l,chatHistory:c,isProcessing:u,handleSendMessage:f,refreshChat:p,stopGeneration:g,selectedImage:x,handleImageSelect:v,clearImage:j}=GD({settings:t,staffList:n,onSettingsUpdate:i,onStaffUpdate:a,onHighlight:s}),w=b.useRef(null),_=b.useRef(null),T=()=>{var P;(P=w.current)==null||P.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{T()},[c,u]);const C=P=>{var F;const I=(F=P.target.files)==null?void 0:F[0];I&&v(I)},O=["Check Paracetamol stock","Go to Pharmacy","Analysis for last month","Add nurse Sarah"],A=P=>{l(P)};return r.jsxs("div",{className:ur.container,children:[r.jsxs("header",{className:ur.header,children:[r.jsxs("div",{className:ur.titleGroup,children:[r.jsx(qv,{size:20,className:"text-violet-600"}),r.jsx("h3",{className:ur.title,children:"Clinic Assistant"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:p,className:ur.closeButton,title:"Refresh Chat",children:r.jsx(Vq,{size:18})}),r.jsx("button",{onClick:e,className:ur.closeButton,title:"Close",children:r.jsx(Ut,{size:20})})]})]}),r.jsxs("div",{className:ur.messageList,children:[c.length===0&&r.jsxs("div",{className:ur.emptyState,children:[r.jsx(qv,{size:48,className:ur.emptyStateIcon}),r.jsx("p",{children:"How can I help you manage the clinic today?"}),r.jsx("div",{className:ur.exampleContainer,children:O.map((P,I)=>r.jsx("button",{className:ur.exampleChip,onClick:()=>A(P),children:P},I))})]}),c.map((P,I)=>r.jsx("div",{className:`${ur.messageRow} ${P.role==="user"?ur.messageRowUser:P.role==="model"?ur.messageRowModel:ur.messageRowSystem}`,children:r.jsx("div",{className:`${ur.bubble} ${P.role==="user"?ur.bubbleUser:P.role==="model"?ur.bubbleModel:ur.bubbleSystem}`,children:P.role==="user"||P.role==="system"?P.text:r.jsx(Ef,{remarkPlugins:[kf],children:P.text})})},I)),u&&r.jsx("div",{className:`${ur.messageRow} ${ur.messageRowModel}`,children:r.jsxs("div",{className:ur.processingIndicator,children:[r.jsx(zc,{size:14,className:ur.spin}),"Thinking..."]})}),r.jsx("div",{ref:w})]}),r.jsxs("div",{className:ur.inputArea,children:[x&&r.jsxs("div",{className:ur.imagePreviewContainer,style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",overflow:"hidden"},children:[r.jsx("img",{src:x,alt:"Selected",style:{width:"100%",height:"100%",objectFit:"cover"}}),r.jsx("button",{onClick:j,style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.5)",color:"white",border:"none",cursor:"pointer",padding:"1px"},children:r.jsx(Ut,{size:12})})]}),r.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Image attached"})]}),r.jsxs("div",{className:ur.inputContainer,children:[r.jsx("input",{type:"file",ref:_,onChange:C,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:ur.sendButton,onClick:()=>{var P;return(P=_.current)==null?void 0:P.click()},disabled:u,title:"Attach Image",style:{marginRight:"0.5rem",color:"#6b7280"},children:r.jsx(ND,{size:18})}),r.jsx("input",{type:"text",className:ur.inputField,placeholder:"Type your request...",value:o,onChange:P=>l(P.target.value),onKeyDown:P=>P.key==="Enter"&&!u&&f(),disabled:u,autoFocus:!0}),u?r.jsx("button",{className:ur.sendButton,onClick:g,title:"Stop Generating",style:{color:"#ef4444"},children:r.jsx(ree,{size:18,fill:"currentColor"})}):r.jsx("button",{className:ur.sendButton,onClick:()=>f(),disabled:!o.trim()&&!x,children:r.jsx(aN,{size:18})})]})]})]})};function eu(e,t=100){const n=b.useRef(!1);b.useEffect(()=>{if(n.current)return;const i=setTimeout(()=>{const a=document,s=['input[type="text"]:not([disabled]):not([readonly])','input[type="search"]:not([disabled]):not([readonly])','input[type="email"]:not([disabled]):not([readonly])','input[type="tel"]:not([disabled]):not([readonly])','input[type="url"]:not([disabled]):not([readonly])',"input:not([type]):not([disabled]):not([readonly])"].join(", "),o=a.querySelectorAll(s),l=Array.from(o).filter(c=>{const u=window.getComputedStyle(c),f=c.getBoundingClientRect();return u.display!=="none"&&u.visibility!=="hidden"&&u.opacity!=="0"&&f.width>0&&f.height>0});if(l.length>0){const c=l[0];c.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{c.focus()},50),n.current=!0}},t);return()=>clearTimeout(i)},[e,t])}const vIe=({onLoginSuccess:e})=>{const[t,n]=b.useState(""),[i,a]=b.useState(""),[s,o]=b.useState(null),[l,c]=b.useState(!1),u=It();eu();const f=async x=>{x.preventDefault(),c(!0),o(null);try{const v=await ue("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:i})});if(!v.ok){let w=`Login failed with status: ${v.status}`;try{w=(await v.json()).message||w}catch{try{const T=await v.text();T&&(w=`${w} - ${T}`)}catch{}}throw new Error(w)}const j=await v.json();console.log("Login successful:",j),localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),e(j.user),j.user.role==="doctor"?u("/dashboard/queue"):u("/dashboard")}catch(v){console.error("Login failed:",v),o(v.message||"Login failed. Please check your credentials.")}finally{c(!1)}},p=async x=>{c(!0),o(null);try{const v=await ue("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x.credential})});if(!v.ok)throw new Error("Google Sign-In failed");const j=await v.json();localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),e(j.user),j.user.role==="doctor"?u("/dashboard/queue"):u("/dashboard")}catch(v){console.error("Google Login Error:",v),o("Google Sign-In failed. Please try again.")}finally{c(!1)}},g=()=>{console.error("Google Login Failed"),o("Google Sign-In was unsuccessful. Please try again.")};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Newtons AI HMS"}),r.jsx("p",{className:"auth-subtitle",children:"Sign in to continue"}),r.jsxs("form",{onSubmit:f,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:x=>n(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"email",children:"Email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:x=>a(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"password",children:"Password"})]}),s&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:s})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:l,className:"auth-submit-button",children:l?"Signing in...":"Sign In"})})]}),r.jsx("div",{className:"google-login-container",children:r.jsx(fY,{onSuccess:p,onError:g,useOneTap:!0})}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",r.jsx(_r,{to:"/register",className:"auth-navigation-link",children:"Create account"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},bIe=()=>{const[e,t]=b.useState(""),[n,i]=b.useState(""),[a,s]=b.useState(""),[o,l]=b.useState(""),[c,u]=b.useState(null),[f,p]=b.useState(!1),g=It(),x=async v=>{v.preventDefault(),p(!0),u(null);try{const j=await ue("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:e,userName:n,userEmail:a,userPassword:o})}),w=await j.json();if(!j.ok)throw new Error(w.message||`HTTP error! status: ${j.status}`);console.log("Registration successful:",w),g("/login")}catch(j){console.error("Registration failed:",j),u(j.message||"Registration failed. Please try again.")}finally{p(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),r.jsxs("form",{onSubmit:x,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"}),r.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:e,onChange:v=>t(v.target.value),className:"auth-text-input",placeholder:"Your Clinic's Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"}),r.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:n,onChange:v=>i(v.target.value),className:"auth-text-input",placeholder:"Your Full Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userEmail",children:"Your Email (Admin Login)"}),r.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:a,onChange:v=>s(v.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userPassword",children:"Password"}),r.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:o,onChange:v=>l(v.target.value),className:"auth-text-input",placeholder:"Min. 6 characters"})]}),c&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:c})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:f,className:"auth-submit-button",children:f?"Registering...":"Register Clinic & Admin"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",r.jsx(_r,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},jIe=({user:e,onLogout:t,userRole:n,isOpen:i,onClose:a})=>{const s=Gr(),[o,l]=b.useState(""),c=dW[n]||[],[u,f]=b.useState(500),p=b.useRef(!1),g=b.useCallback(w=>{p.current=!0,w.preventDefault()},[]),x=b.useCallback(()=>{p.current=!1},[]),v=b.useCallback(w=>{if(p.current){const _=window.innerWidth-w.clientX;_>250&&_<window.innerWidth*.8&&f(_)}},[]);b.useEffect(()=>(window.addEventListener("mousemove",v),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",x)}),[v,x]);const j=c.map(w=>({...w,links:w.links.filter(_=>_.name.toLowerCase().includes(o.toLowerCase()))})).filter(w=>w.links.length>0);return r.jsxs("div",{className:`side-panel ${i?"open":""}`,style:{width:`${u}px`,right:i?"0":`-${u}px`},children:[r.jsx("div",{className:"resizer",onMouseDown:g}),r.jsxs("div",{className:"side-panel-header",children:[r.jsx(_r,{to:"/dashboard",className:"home-button",onClick:a,children:r.jsx(Xh,{})}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(Rm,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),r.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:o,onChange:w=>l(w.target.value)})]}),r.jsx("button",{className:"close-button",onClick:a,children:""})]}),r.jsx("nav",{children:j.map((w,_)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:w.title}),r.jsx("ul",{className:"sub-page-list",children:w.links.map(T=>{const C=T.icon;return r.jsx("li",{children:r.jsxs(_r,{to:T.path,className:s.pathname===T.path?"active":"",onClick:a,children:[C&&r.jsx(C,{})," ",T.name]})},T.path)})})]},_))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",e.name]}),r.jsxs("button",{onClick:t,className:"logout-button-sidebar",children:[r.jsx(uW,{})," Logout"]})]})]})},wIe=({user:e,onLogout:t,userRole:n,isOpen:i,onClose:a,roleNavigation:s})=>{const o=Gr(),l=s[n]||[];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mobile-side-panel-overlay ${i?"open":""}`,onClick:a}),r.jsxs("div",{className:`mobile-side-panel ${i?"open":""}`,children:[r.jsxs("div",{className:"mobile-side-panel-header",children:[r.jsx("h3",{children:"Menu"}),r.jsx("button",{className:"close-button",onClick:a,children:r.jsx(LMe,{})})]}),r.jsx("nav",{children:l.map((c,u)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:c.title}),r.jsx("ul",{className:"sub-page-list",children:c.links.map(f=>{const p=f.icon;return r.jsx("li",{children:r.jsxs(_r,{to:f.path,className:o.pathname===f.path?"active":"",onClick:a,children:[p&&r.jsx(p,{})," ",f.name]})},f.path)})})]},u))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",e.name]}),r.jsxs("button",{onClick:t,className:"logout-button-sidebar",children:[r.jsx(uW,{})," Logout"]})]})]})]})},Ku={"/dashboard":{label:"Dashboard"},"/dashboard/staff":{label:"Staff Management",parent:"/dashboard"},"/dashboard/staff/add":{label:"Add Staff",parent:"/dashboard/staff"},"/dashboard/staff/edit":{label:"Edit Staff",parent:"/dashboard/staff"},"/dashboard/roles":{label:"Role Management",parent:"/dashboard"},"/dashboard/patients":{label:"All Patients",parent:"/dashboard"},"/dashboard/patients/add":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search-patient":{label:"Search Patient",parent:"/dashboard"},"/dashboard/clinic-hub":{label:"Clinic Hub",parent:"/dashboard"},"/dashboard/reception":{label:"Appointment Queue",parent:"/dashboard"},"/dashboard/pharmacy-queue":{label:"Pharmacy Queue",parent:"/dashboard"},"/dashboard/lab":{label:"Lab Panel",parent:"/dashboard"},"/dashboard/inventory":{label:"Inventory",parent:"/dashboard"},"/dashboard/inventory/add":{label:"Add Drug",parent:"/dashboard/inventory"},"/dashboard/inventory/edit":{label:"Edit Drug",parent:"/dashboard/inventory"},"/dashboard/purchase":{label:"Purchase",parent:"/dashboard"},"/dashboard/distributors":{label:"Distributors",parent:"/dashboard"},"/dashboard/patient-debts":{label:"Patient Debts",parent:"/dashboard"},"/dashboard/add-order":{label:"Add Pharmacy Order",parent:"/dashboard"},"/dashboard/edit-pharmacy-order":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/pharmacy-billing":{label:"Pharmacy Billing",parent:"/dashboard"},"/dashboard/analysis":{label:"Analysis",parent:"/dashboard"},"/dashboard/settings":{label:"Settings",parent:"/dashboard"},"/dashboard/search-patient-records":{label:"Search Records",parent:"/dashboard"},"/dashboard/queue":{label:"Queue",parent:"/dashboard"},"/dashboard/add-patient":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search":{label:"Patient Search",parent:"/dashboard"},"/dashboard/patients/search":{label:"Search Patient",parent:"/dashboard"},"/dashboard/subscriptions":{label:"Subscriptions",parent:"/dashboard"},"/dashboard/subscriptions/add":{label:"Add Plan",parent:"/dashboard/subscriptions"},"/dashboard/subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/subscriptions"},"/dashboard/clinic-subscriptions":{label:"Clinic Subscriptions",parent:"/dashboard"},"/dashboard/clinic-subscriptions/add":{label:"Add Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/clinic-subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/users":{label:"User Management",parent:"/dashboard"},"/dashboard/lab-billing":{label:"Lab Billing",parent:"/dashboard"},"/lab-inventory":{label:"Lab Inventory",parent:"/dashboard"},"/lab/search-report":{label:"Search Lab Report",parent:"/dashboard"},"/create-lab-order":{label:"Create Lab Order",parent:"/dashboard"},"/enter-lab-report":{label:"Enter Lab Report",parent:"/dashboard"},"/view-lab-report":{label:"View Lab Report",parent:"/dashboard"},"/lab/report/:id":{label:"Lab Report",parent:"/lab/search-report"},"/lab/enter-report/:id":{label:"Enter Report",parent:"/lab/search-report"},"/lab/view-report/:id":{label:"View Report",parent:"/lab/search-report"},"/billing":{label:"Billing",parent:"/dashboard"},"/dashboard/doctor-billing":{label:"Doctor Billing",parent:"/dashboard"},"/dashboard/doctor-billing/:id":{label:"Doctor Bill",parent:"/dashboard/doctor-billing"},"/create-custom-bill":{label:"Create Custom Bill",parent:"/dashboard"},"/patient":{label:"Patient",parent:"/dashboard"},"/patient/:id/admission-billing":{label:"Admission Billing",parent:"/manage-admission"},"/patient/:id/admission-bill":{label:"Admission Bill",parent:"/patient/:id/admission-billing"},"/patient/:id/lab-reports":{label:"Lab Reports",parent:"/patient"},"/patient/:id/pharmacy-orders":{label:"Pharmacy Orders",parent:"/patient"},"/patient/:id/complaints":{label:"Past Complaints",parent:"/patient"},"/edit-complaint":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/:id":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/patient/:id":{label:"New Complaint",parent:"/dashboard"},"/start-subscription":{label:"Start Subscription",parent:"/dashboard"},"/start-subscription/:id":{label:"Start Subscription",parent:"/dashboard"},"/manage-admission":{label:"Manage Admission",parent:"/dashboard"},"/dashboard/guide":{label:"User Guide",parent:"/dashboard"},"/custom-tables":{label:"Custom Tables",parent:"/dashboard"},"/custom-tables/:id":{label:"Table Records",parent:"/custom-tables"},"/dashboards":{label:"Dashboards",parent:"/dashboard"},"/dashboards/new":{label:"New Dashboard",parent:"/dashboards"},"/dashboards/:id":{label:"Dashboard View",parent:"/dashboards"},"/dashboards/:id/edit":{label:"Edit Dashboard",parent:"/dashboards"},"/dashboard/pharmacy-billing/:id":{label:"Pharmacy Bill",parent:"/dashboard/pharmacy-billing"},"/dashboard/lab-billing/:id":{label:"Lab Bill",parent:"/dashboard/lab-billing"},"/dashboard/edit-pharmacy-order/:id":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/orders/:id":{label:"Order Details",parent:"/dashboard/add-order"},"/refill-reminders":{label:"Refill Reminders",parent:"/dashboard"},"/start-clinic-subscription":{label:"Start Clinic Subscription",parent:"/dashboard"},"/dashboard/all-patients":{label:"All Patients",parent:"/dashboard"}},hz=e=>e.split("/").map(t=>{const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t),i=/^\d+$/.test(t);return n||i?":id":t}).join("/"),SIe=e=>{if(Ku[e])return Ku[e].label;const t=hz(e);if(Ku[t])return Ku[t].label;const n=e.split("/"),i=n[n.length-1],a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(i),s=/^\d+$/.test(i);if(a||s){const o=n.slice(0,-1).join("/"),l=hz(o);if(Ku[l])return Ku[l].label;if(Ku[o])return Ku[o].label}return i.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},NIe=()=>{const e=Gr(),t=b.useMemo(()=>{const n=e.pathname.split("/").filter(s=>s!=="");if(n.length===0||n[0]==="login"||n[0]==="registration")return[];const i=[];let a="";return n.forEach((s,o)=>{if(a+=`/${s}`,o===0&&s==="dashboard")i.push({label:"Home",path:"/dashboard",isLast:o===n.length-1});else if(s!=="dashboard"){const l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s),c=/^\d+$/.test(s);let u=SIe(a);(l||c)&&u.replace(/\s/g,"").toLowerCase()===s.replace(/[-_]/g,"").toLowerCase()&&(l?u=`#${s.substring(0,8)}`:c&&(u=`#${s}`)),i.push({label:u,path:a,isLast:o===n.length-1})}}),n[0]!=="dashboard"&&i.length>0&&i.unshift({label:"Home",path:"/dashboard",isLast:!1}),i},[e.pathname]);return t.length===0?null:r.jsx("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:r.jsx("ol",{className:"breadcrumb-list",children:t.map((n,i)=>r.jsxs("li",{className:"breadcrumb-item",children:[i>0&&r.jsx(vd,{className:"breadcrumb-separator",size:14}),n.isLast?r.jsxs("span",{className:"breadcrumb-current","aria-current":"page",children:[i===0&&r.jsx(Kk,{size:14,className:"breadcrumb-home-icon"}),n.label]}):r.jsxs(_r,{to:n.path,className:"breadcrumb-link",children:[i===0&&r.jsx(Kk,{size:14,className:"breadcrumb-home-icon"}),n.label]})]},n.path))})})},_Ie="_container_1ivr9_5",CIe="_visualContainer_1ivr9_33",TIe="_mobileDashboardGrid_1ivr9_49",AIe="_mobileDashboardItem_1ivr9_87",EIe="_mobileDashboardIcon_1ivr9_195",kIe="_mobileDashboardLabel_1ivr9_233",PIe="_brandTitle_1ivr9_331",OIe="_searchBar_1ivr9_387",DIe="_searchIconWrapper_1ivr9_435",MIe="_searchIcon_1ivr9_435",IIe="_placeholderText_1ivr9_459",RIe="_shortcutHint_1ivr9_479",LIe="_key_1ivr9_495",FIe="_plus_1ivr9_519",$Ie="_micButtonWrapper_1ivr9_529",BIe="_micIcon_1ivr9_577",zIe="_newlyRegisteredSection_1ivr9_901",qIe="_recentList_1ivr9_917",UIe="_recentPatientPill_1ivr9_931",VIe="_recentNameContainer_1ivr9_957",HIe="_recentInfo_1ivr9_969",GIe="_newlyRegisteredLabel_1ivr9_1007",WIe="_recentName_1ivr9_957",KIe="_recentToken_1ivr9_1171",vr={container:_Ie,visualContainer:CIe,mobileDashboardGrid:TIe,mobileDashboardItem:AIe,mobileDashboardIcon:EIe,mobileDashboardLabel:kIe,brandTitle:PIe,searchBar:OIe,searchIconWrapper:DIe,searchIcon:MIe,placeholderText:IIe,shortcutHint:RIe,key:LIe,plus:FIe,micButtonWrapper:$Ie,micIcon:BIe,newlyRegisteredSection:zIe,recentList:qIe,recentPatientPill:UIe,recentNameContainer:VIe,recentInfo:HIe,newlyRegisteredLabel:GIe,recentName:WIe,recentToken:KIe},YIe=[{label:"Doctor",icon:r.jsx(dg,{size:24}),path:"/dashboard/doctor"},{label:"Labs",icon:r.jsx(fw,{size:24}),path:"/create-lab-order"},{label:"Clinic",icon:r.jsx($q,{size:24}),path:"/dashboard/clinic-hub"},{label:"Inventory",icon:r.jsx(Oc,{size:24}),path:"/dashboard/inventory"},{label:"Analysis",icon:r.jsx(fw,{size:24}),path:"/dashboard/analysis"},{label:"Dental",icon:r.jsx(JZ,{size:24}),path:"/dashboard/dental"},{label:"Files",icon:r.jsx(fw,{size:24}),path:"/dashboard/files"},{label:"Distributors",icon:r.jsx(_D,{size:24}),path:"/dashboard/distributors"},{label:"Custom Bill",icon:r.jsx(ha,{size:24}),path:"/create-custom-bill"},{label:"Patients",icon:r.jsx(Ro,{size:24}),path:"/dashboard/patients"},{label:"Debts",icon:r.jsx(SD,{size:24}),path:"/dashboard/patient-debts"}],fW="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",QIe={apiKey:fW},XIe=()=>{const{openCommandBar:e,isOpen:t,setPreFilledQuery:n}=$c(),[i,a]=b.useState(!1),[s,o]=b.useState(null),l=It(),c=v=>{v.stopPropagation(),a(!0)};b.useEffect(()=>{s&&(a(!1),n&&n(s),e(),o(null))},[s,e,n]);const u=us(),{data:f,isLoading:p}=ZS({queryKey:["recentPatients"],queryFn:async()=>{const v=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),j=await ue(`/api/patients?${v.toString()}`);if(!j.ok)throw new Error("Failed to fetch recent patients");return j.json()},staleTime:60*1e3});b.useEffect(()=>{u.prefetchQuery({queryKey:Vt.clinicSettings,queryFn:async()=>{const v=await ue("/api/clinics/settings");if(!v.ok)throw new Error("Failed to fetch clinic settings");return v.json()},staleTime:30*60*1e3}),u.prefetchQuery({queryKey:Vt.drugs.all,queryFn:async()=>{const v=await ue("/api/drugs");if(!v.ok)throw new Error("Failed to fetch drugs");const j=await v.json();return j.drugs||j},staleTime:10*60*1e3}),u.prefetchQuery({queryKey:Vt.labTests.all,queryFn:async()=>{const v=await ue("/api/lab-tests");if(!v.ok)throw new Error("Failed to fetch lab tests");return v.json()},staleTime:10*60*1e3})},[u]);const g=(f==null?void 0:f.patients)||[],x=v=>{v&&(u.prefetchQuery({queryKey:Vt.patients.context(v),queryFn:async()=>{const j=await ue(`/api/patients/${v}/context`);if(!j.ok)throw new Error("Failed to fetch patient context");return j.json()},staleTime:5*60*1e3}),u.prefetchQuery({queryKey:Vt.dental.records(v),queryFn:async()=>{const j=await ue(`/api/dental/patient/${v}`);if(!j.ok)throw new Error("Failed to fetch dental records");return j.json()},staleTime:5*60*1e3}),u.prefetchQuery({queryKey:Vt.patientDebts.balance(v),queryFn:async()=>{const j=await ue(`/api/patient-debts/${v}/balance`);return j.ok?j.json():{netDebt:0}},staleTime:1*60*1e3}),u.prefetchQuery({queryKey:Vt.queue.latest(v),queryFn:async()=>{const j=await ue(`/api/queue/patient/${v}/latest`);if(!j.ok)throw new Error("Failed to fetch latest queue status");const w=await j.json();return w!=null&&w._id&&u.prefetchQuery({queryKey:Vt.queue.entry(w._id),queryFn:async()=>{const _=await ue(`/api/queue/doctor/complaint/${w._id}`);if(!_.ok)throw new Error("Failed to fetch complaint record");return _.json()},staleTime:1*60*1e3}),w},staleTime:5e3}))};return r.jsxs("div",{className:vr.container,children:[!t&&r.jsx("div",{className:vr.mobileDashboardGrid,children:YIe.map((v,j)=>r.jsxs("div",{className:vr.mobileDashboardItem,onClick:()=>l(v.path),children:[r.jsx("div",{className:vr.mobileDashboardIcon,children:v.icon}),r.jsx("span",{className:vr.mobileDashboardLabel,children:v.label})]},j))}),r.jsxs("div",{className:vr.visualContainer,children:[r.jsx("h1",{className:vr.brandTitle,children:"Newtons Ai"}),!t&&r.jsxs("div",{className:vr.searchBar,onClick:()=>e(),children:[r.jsx("div",{className:vr.searchIconWrapper,children:r.jsx(Wn,{className:vr.searchIcon})}),r.jsx("span",{className:vr.placeholderText,children:"Search or Ask AI..."}),r.jsx("div",{className:vr.micButtonWrapper,onClick:c,children:r.jsx(iN,{className:vr.micIcon})}),r.jsxs("div",{className:vr.shortcutHint,children:[r.jsx("span",{className:vr.key,children:"Ctrl"}),r.jsx("span",{className:vr.plus,children:"+"}),r.jsx("span",{className:vr.key,children:"K"})]})]})]}),!t&&(p||g.length>0)&&r.jsxs("div",{className:vr.newlyRegisteredSection,children:[r.jsx("div",{className:vr.newlyRegisteredLabel,children:"Newly Registered"}),r.jsx("div",{className:vr.recentList,children:p?[1,2,3,4,5].map(v=>r.jsxs("div",{className:vr.recentPatientPill,style:{cursor:"default"},children:[r.jsxs("div",{className:vr.recentNameContainer,children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:20})]}),r.jsx("div",{className:vr.recentInfo,children:r.jsx(Z,{width:80,height:14})})]},v)):g.map(v=>r.jsxs("div",{className:vr.recentPatientPill,onClick:()=>l(`/dashboard/edit-complaint/patient/${v.id}`),onMouseEnter:()=>v.id&&x(v.id),children:[r.jsxs("div",{className:vr.recentNameContainer,children:[r.jsx("span",{className:vr.recentName,children:v.name||"New Patient"}),r.jsxs("span",{className:vr.recentToken,children:["#",v.token]})]}),r.jsxs("div",{className:vr.recentInfo,children:[v.age?`${v.age} yrs`:"",v.age&&v.gender?" / ":"",v.gender||""]})]},v.id))})]}),i&&fW&&r.jsx(TN,{options:QIe,children:r.jsx(AN,{onClose:()=>a(!1),patientData:null,tokenNumber:null,onAiSummaryChange:o})})]})},pW=({queueList:e,onPatientClick:t})=>{const a=Array.from({length:13},(o,l)=>8+l),s={};return a.forEach(o=>s[o]=[]),e.forEach(o=>{const c=new Date(o.createdAt).getHours();c>=8&&c<=20&&s[c].push(o)}),r.jsx("div",{className:"appointment-timeline-container",children:a.map(o=>r.jsxs("div",{className:"timeline-hour-row",children:[r.jsx("div",{className:"timeline-time-label",children:r.jsxs("span",{className:"time-text",children:[o>12?o-12:o," ",o>=12?"PM":"AM"]})}),r.jsxs("div",{className:"timeline-track",children:[s[o].length===0?r.jsx("div",{className:"timeline-empty-slot"}):r.jsx("div",{className:"timeline-appointments-group",children:s[o].map(l=>{var c,u;return r.jsxs("div",{className:`timeline-card status-${l.status}`,onClick:()=>t(l),children:[r.jsxs("div",{className:"timeline-card-header",children:[r.jsx("span",{className:"patient-name-card",children:(c=l.Patient)==null?void 0:c.name}),r.jsxs("span",{className:"token-badge",children:["#",l.token_no]})]}),r.jsxs("div",{className:"timeline-card-details",children:[((u=l.Patient)==null?void 0:u.phone)&&r.jsxs("div",{className:"detail-row",children:[r.jsx(cg,{size:12}),r.jsx("span",{children:l.Patient.phone})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx(qb,{size:12}),r.jsx("span",{children:new Date(l.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),r.jsx("div",{className:`status-line-indicator status-color-${l.status}`})]},l.id)})}),r.jsx("div",{className:"timeline-grid-line"})]})]},o))})},mW=({isOpen:e,onClose:t,onAppointmentBooked:n})=>{const[i,a]=b.useState(""),[s,o]=b.useState([]),[l,c]=b.useState(null),[u,f]=b.useState(""),[p,g]=b.useState(!1),[x,v]=b.useState(!1),[j,w]=b.useState(null);b.useEffect(()=>{e&&(a(""),o([]),c(null),f(""),w(null))},[e]);const _=Se.useMemo(()=>xd(async P=>{if(P.length<2){o([]),v(!1);return}v(!0);try{const I=new URLSearchParams({search:encodeURIComponent(P),page:"1",limit:"10"}),F=await ue(`/api/patients?${I.toString()}`);if(F.ok){const B=await F.json();o(B.patients||[])}}catch(I){console.error("Error searching patients:",I)}finally{v(!1)}},300),[]),T=P=>{const I=P.target.value;a(I),l&&c(null),I.length>=2?(v(!0),_(I)):o([])},C=P=>{c(P),a(P.name),o([])},O=async()=>{if(i.trim()){g(!0);try{const P=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.trim(),age:null,gender:null,phone:null})});if(!P.ok){const B=await P.json();throw new Error(B.message||"Failed to create patient")}const I=await P.json(),F={id:I.id,name:I.name,phone:I.phone,age:I.age,gender:I.gender,token:I.token};C(F)}catch(P){console.error("Failed to create patient:",P),w(P.message||"Failed to create patient")}finally{g(!1)}}},A=async()=>{if(!l){w("Please select a patient.");return}if(!u){w("Please select a date and time.");return}g(!0),w(null);try{if(!(await ue("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id,date:new Date(u).toISOString(),description:"Appointment"})})).ok)throw new Error("Failed to book appointment");n(),t()}catch(P){console.error("Error booking appointment:",P),w(P.message||"Failed to book appointment.")}finally{g(!1)}};return e?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content appointment-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Book Appointment"}),r.jsx("button",{onClick:t,className:"close-button",children:r.jsx(Ut,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[j&&r.jsx("div",{className:"error-message",children:j}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Search Patient"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Wn,{className:"search-icon-input",size:18}),r.jsx("input",{type:"text",placeholder:"Search by name, phone, or ID...",value:i,onChange:T,className:"modal-input"}),x&&r.jsx("div",{className:"spinner-sm"})]}),(s.length>0||i.length>0&&!x)&&!l&&r.jsxs("div",{className:"search-results-dropdown",children:[i.trim().length>0&&!x&&r.jsx("div",{className:"search-result-item create-patient-item",onClick:O,children:r.jsxs("div",{className:"patient-info",style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx("div",{className:"create-icon-wrapper",children:r.jsx(sN,{size:16,color:"white"})}),r.jsxs("div",{children:[r.jsxs("span",{className:"name",style:{color:"#7c3aed"},children:['Create "',i,'"']}),r.jsx("span",{className:"details",style:{color:"#7c3aed"},children:"Add new patient"})]})]})}),s.map(P=>r.jsxs("div",{className:"search-result-item",onClick:()=>C(P),children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:P.name}),r.jsxs("span",{className:"details",children:[P.age?`${P.age} yrs`:""," ",P.gender?`/ ${P.gender}`:""]})]}),P.phone&&r.jsx("span",{className:"phone",children:P.phone})]},P.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Appointment Date & Time"}),r.jsx("div",{className:"date-input-wrapper",children:r.jsx("input",{type:"datetime-local",className:"modal-input",value:u,onChange:P=>f(P.target.value)})})]}),l&&r.jsxs("div",{className:"selected-patient-preview",children:[r.jsx("div",{className:"preview-label",children:"Selected Patient:"}),r.jsxs("div",{className:"preview-card",children:[r.jsx(jr,{size:20}),r.jsxs("div",{children:[r.jsx("strong",{children:l.name}),r.jsxs("div",{children:[l.age?`${l.age} yrs`:"-"," / ",l.gender||"-"]})]})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:t,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:A,className:"submit-button",disabled:p||!l||!u,children:p?"Booking...":"Book Appointment"})]})]})}):null},JIe=async e=>{const t=e?`/api/queue?date=${e}`:"/api/queue",n=await ue(t);if(!n.ok)throw new Error("Failed to fetch queue");return n.json()};function gW(e){return ZS({queryKey:["queue",e||"today"],queryFn:()=>JIe(e),staleTime:5e3,refetchInterval:7e3,placeholderData:t=>t,refetchOnMount:"always",refetchOnWindowFocus:!0})}function ZIe(){const e=us();return iY({mutationFn:async({queueId:t,status:n,doctorId:i})=>{const a=await ue(`/api/queue/${t}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,doctorId:i})});if(!a.ok)throw new Error("Failed to update queue status");return a.json()},onSuccess:(t,{queueId:n})=>{e.invalidateQueries({queryKey:Vt.queue.today}),e.invalidateQueries({queryKey:Vt.queue.entry(n)})}})}const sw=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},eRe=e=>{if(!e)return"Unknown Date";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},dk=({title:e,icon:t,items:n,renderItemContent:i,isLoading:a,noDataText:s})=>{const o=b.useMemo(()=>{const l={};n.forEach(u=>{if(isNaN(u.date.getTime())){l["Unknown Date"]||(l["Unknown Date"]=[]),l["Unknown Date"].push(u);return}const f=eRe(u.originalDateString);l[f]||(l[f]=[]),l[f].push(u)});const c=Object.keys(l);return c.sort((u,f)=>{if(u==="Unknown Date")return 1;if(f==="Unknown Date")return-1;try{const p=v=>{const j=v.split(" ");if(j.length===3){const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(j[1]);if(_!==-1)return new Date(parseInt(j[2]),_,parseInt(j[0]))}return new Date(v)},g=p(u),x=p(f);if(!isNaN(g.getTime())&&!isNaN(x.getTime()))return x.getTime()-g.getTime()}catch(p){console.error("Error parsing date for sorting:",p)}return f.localeCompare(u)}),c.map(u=>({date:u,items:l[u]}))},[n]);return r.jsxs("div",{className:"dcp-group-card",children:[r.jsxs("h4",{className:"dcp-group-header",children:[t&&r.jsx(t,{size:14,className:"dcp-group-icon"}),e]}),r.jsxs("div",{className:"dcp-group-content",children:[a&&r.jsx("div",{className:"dcp-history-items",children:[1,2].map(l=>r.jsxs("div",{className:"dcp-history-item",style:{border:"none"},children:[r.jsx(Z,{width:"60%",height:16,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"30%",height:12})]},l))}),!a&&n.length===0&&r.jsx("p",{className:"dcp-history-empty",children:s}),!a&&n.length>0&&r.jsx("div",{children:o.map(({date:l,items:c})=>r.jsxs("div",{className:"dcp-date-group",children:[r.jsx("h5",{className:"dcp-date-label",children:l}),r.jsx("div",{className:"dcp-date-items",children:c.map((u,f)=>r.jsx("div",{className:"dcp-history-item",children:i(u)},`${u.type}-${u.originalDateString}-${f}`))})]},l))})]})]})},ow=()=>{var ve,ce;const{openCommandBar:e}=$c(),[t,n]=b.useState(new Date),[i,a]=b.useState("list"),[s,o]=b.useState(!1),l=t.toISOString().split("T")[0],{data:c,isLoading:u,refetch:f,isError:p}=gW(l),g=(c==null?void 0:c.list)||[],x=(c==null?void 0:c.summary)||{currentPatient:null,nextPatient:null,waitingCount:0},v=u,[j,w]=b.useState(!1),[_,T]=b.useState(null),C=()=>{f()},[O,A]=b.useState(null),[P,I]=b.useState(null),[F,B]=b.useState(null),[$,L]=b.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[V,H]=b.useState(!1),[te,X]=b.useState(null),{patientId:q}=Ii(),W=It(),ae=us(),G=fe=>{fe&&(ae.prefetchQuery({queryKey:Vt.patients.context(fe),queryFn:async()=>{const se=await ue(`/api/patients/${fe}/context`);if(!se.ok)throw new Error("Failed to fetch patient context");return se.json()},staleTime:5*60*1e3}),ae.prefetchQuery({queryKey:Vt.patientDebts.balance(fe),queryFn:async()=>{const se=await ue(`/api/patient-debts/${fe}/balance`);return se.ok?se.json():{netDebt:0}},staleTime:1*60*1e3}),ae.prefetchQuery({queryKey:Vt.queue.latest(fe),queryFn:async()=>{const se=await ue(`/api/queue/patient/${fe}/latest`);if(!se.ok)throw new Error("Failed to fetch latest queue status");const Q=await se.json();return Q!=null&&Q._id&&ae.prefetchQuery({queryKey:Vt.queue.entry(Q._id),queryFn:async()=>{const ie=await ue(`/api/queue/doctor/complaint/${Q._id}`);if(!ie.ok)throw new Error("Failed to fetch complaint record");return ie.json()},staleTime:1*60*1e3}),Q},staleTime:5e3}),ae.prefetchQuery({queryKey:Vt.dental.records(fe),queryFn:async()=>{const se=await ue(`/api/dental/patient/${fe}`);if(!se.ok)throw new Error("Failed to fetch dental records");return se.json()},staleTime:5*60*1e3}))},z=b.useCallback(async fe=>{B(null),A(null),I(null),H(!0),X(null),L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const se=await ue(`/api/patients/${fe}`);if(!se.ok)throw new Error(`Patient details fetch failed (${se.status})`);const Q=await se.json();A(Q);const ie=await ue(`/api/queue/patient/${fe}/latest`);if(!ie.ok&&ie.status!==404)throw new Error(`Queue entry fetch failed (${ie.status})`);if(ie.ok){const ge=await ie.json();I(ge)}await le(fe)}catch(se){console.error("Error fetching specific patient data:",se),B(se.message||"Failed to load patient data."),X(se.message||"Failed to load patient history.")}finally{H(!1)}},[]),le=b.useCallback(async fe=>{H(!0),X(null);try{const[se,Q,ie,ge]=await Promise.all([ue(`/api/queue/patient/${fe}/complaints`),ue(`/api/lab/patient/${fe}`),ue(`/api/lab/orders/patient/${fe}?status=pending`),ue(`/api/pharmacy-orders/patient/${fe}`)]),ee=se.ok?await se.json():[],we=Q.ok?await Q.json():[],Ue=ie.ok?await ie.json():[],Ge=ge.ok?await ge.json():[];L({pastComplaints:ee||[],labReports:we||[],pendingLabOrders:Ue||[],pharmacyOrders:Ge||[]})}catch(se){console.error("Error fetching patient history:",se),X(se.message||"Failed to load patient history."),L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{H(!1)}},[]);b.useEffect(()=>{q?z(q):(A(null),I(null),f())},[q,z,f]),b.useEffect(()=>{var fe;if(!q&&((fe=x.currentPatient)==null?void 0:fe.status)==="consulting"){const se=x.currentPatient._id;se&&W(`/dashboard/edit-complaint/${se}`)}},[q,x.currentPatient,W]),b.useEffect(()=>{var fe;!q&&((fe=x.currentPatient)!=null&&fe.patientId)?le(x.currentPatient.patientId):!q&&!x.currentPatient&&(L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),H(!1),X(null))},[q,(ve=x.currentPatient)==null?void 0:ve.patientId,le]);const je=((ce=x.currentPatient)==null?void 0:ce.patientId)||(q?parseInt(q,10):null),Y=b.useMemo(()=>{if(!je||!$.pastComplaints)return[];const fe=$.pastComplaints.map(se=>({date:new Date(se.createdAt),type:"Complaint",data:se,originalDateString:se.createdAt})).filter(se=>!isNaN(se.date.getTime()));return fe.sort((se,Q)=>Q.date.getTime()-se.date.getTime()),fe},[je,$.pastComplaints]),Oe=b.useMemo(()=>{if(!je)return[];const fe=[];return($.pendingLabOrders??[]).forEach(se=>{const Q=new Date(se.createdAt);isNaN(Q.getTime())||fe.push({date:Q,type:"Lab Order (Pending)",data:se,originalDateString:se.createdAt})}),($.labReports??[]).forEach(se=>{const Q=se.reportCreatedAt?new Date(se.reportCreatedAt):null;Q&&!isNaN(Q.getTime())&&fe.push({date:Q,type:"Lab Report",data:se,originalDateString:se.reportCreatedAt})}),fe.sort((se,Q)=>Q.date.getTime()-se.date.getTime()),fe},[je,$.pendingLabOrders,$.labReports]),Ke=b.useMemo(()=>{if(!je||!$.pharmacyOrders)return[];const fe=$.pharmacyOrders.map(se=>({date:new Date(se.date),type:"Pharmacy Order",data:se,originalDateString:se.date})).filter(se=>!isNaN(se.date.getTime()));return fe.sort((se,Q)=>Q.date.getTime()-se.date.getTime()),fe},[je,$.pharmacyOrders]),Me=async()=>{w(!0),T(null);try{await ue("/api/queue/doctor/next",{method:"POST"}),await f()}catch(fe){console.error("Error calling next patient:",fe),T(fe.message||"Failed to call next patient.")}finally{w(!1)}},Ie=fe=>{switch(fe){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return fe}},[be,re]=b.useState("info");return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"dcp-container",children:[r.jsxs("div",{className:"dcp-header-row",children:[r.jsx("button",{onClick:()=>W(-1),className:"dcp-back-btn",children:r.jsx(rn,{size:20})}),r.jsx("h1",{className:"dcp-title",children:"Doctor Consultation Panel"})]}),q?r.jsxs(r.Fragment,{children:[F&&r.jsx("div",{className:"dcp-error",children:F}),O&&r.jsx("div",{className:"dcp-card dcp-card-violet",children:r.jsxs("div",{className:"dcp-card-content",children:[r.jsxs("div",{className:"dcp-mobile-tabs",children:[r.jsx("button",{className:`dcp-mobile-tab ${be==="info"?"active":""}`,onClick:()=>re("info"),children:"Patient Record"}),r.jsx("button",{className:`dcp-mobile-tab ${be==="history"?"active":""}`,onClick:()=>re("history"),children:"History"})]}),r.jsxs("div",{className:"dcp-flex-split",children:[r.jsxs("div",{className:`dcp-flex-half dcp-tab-info ${be==="info"?"":"hidden"}`,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("div",{className:"dcp-section-header dcp-section-header-violet",children:"Patient Record"}),r.jsxs("button",{onClick:()=>W("/dashboard/doctor"),className:"dcp-btn dcp-btn-outline",style:{padding:"4px 10px",fontSize:"0.75rem"},children:[r.jsx(rn,{size:12})," Back to Queue"]})]}),r.jsx("div",{className:"dcp-patient-name dcp-patient-name-gradient",children:O.name}),r.jsxs("div",{className:"dcp-patient-meta",style:{marginBottom:"12px"},children:[r.jsxs("span",{className:"dcp-patient-badge",children:[O.age||"N/A"," Yrs"]}),r.jsx("span",{className:"dcp-patient-badge",children:O.gender||"N/A"})]}),r.jsxs("div",{className:"dcp-activity-box",children:[r.jsx("div",{className:"dcp-activity-label",children:"Latest Activity"}),P?r.jsxs("div",{children:[r.jsxs("div",{className:"dcp-activity-content",children:[r.jsx("strong",{children:"Complaint:"})," ",P.complaint||r.jsx("span",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"None"})]}),r.jsxs("div",{style:{marginTop:"8px"},children:[r.jsx("span",{className:`dcp-status ${P.status==="consulting"?"dcp-status-consulting":P.status==="seen"?"dcp-status-seen":P.status==="waiting"?"dcp-status-waiting":""}`,children:Ie(P.status)}),P.status==="consulting"&&P._id&&r.jsx("button",{onClick:()=>W(`/dashboard/edit-complaint/${P._id}`),onMouseEnter:()=>G(String(O.id)),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px",padding:"4px 12px"},children:"Resume"})]}),_&&r.jsx("div",{className:"dcp-error-card",style:{marginBottom:"16px"},children:_}),P.case_summary&&r.jsxs("div",{className:"dcp-ai-summary",style:{marginTop:"10px"},children:[r.jsx("div",{className:"dcp-ai-label",children:" AI Summary"}),r.jsx("p",{className:"dcp-ai-text",children:P.case_summary})]})]}):r.jsx("p",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"No queue entry found for this patient today."})]})]}),r.jsxs("div",{className:`dcp-flex-half dcp-history-section dcp-tab-history ${be==="history"?"":"hidden"} dcp-desktop-only`,children:[r.jsxs("div",{className:"dcp-history-header",children:[r.jsx("span",{className:"dcp-history-title",children:"Patient History"}),V&&r.jsx(Z,{width:60,height:14})]}),te&&r.jsx("div",{className:"dcp-error",children:te}),r.jsxs("div",{className:"dcp-history-scroll dcp-scrollbar",children:[r.jsx(dk,{title:"Past Complaints",icon:ha,items:Y,isLoading:V,noDataText:"No past complaints.",renderItemContent:fe=>r.jsxs("div",{children:[fe.data.complaint,r.jsx("div",{className:"dcp-history-timestamp",children:sw(fe.originalDateString)})]})}),r.jsx(dk,{title:"Lab Reports",icon:os,items:Oe,isLoading:V,noDataText:"No lab history.",renderItemContent:fe=>fe.type==="Lab Order (Pending)"?r.jsxs("div",{children:[r.jsx("span",{className:"dcp-type-pending",children:"Pending Order"}),r.jsx("div",{children:fe.data.tests.map(se=>se.name).join(", ")}),r.jsx("div",{className:"dcp-history-timestamp",children:sw(fe.originalDateString)})]}):r.jsxs("div",{children:[r.jsxs("span",{className:"dcp-type-report",children:["Report: ",fe.data.testName]}),r.jsxs("div",{style:{fontStyle:"italic"},children:['"',fe.data.reportFindings.substring(0,50),fe.data.reportFindings.length>50?"...":"",'"']}),r.jsx("div",{className:"dcp-history-timestamp",children:sw(fe.originalDateString)})]})}),r.jsx(dk,{title:"Medications",icon:Tf,items:Ke,isLoading:V,noDataText:"No pharmacy history.",renderItemContent:fe=>r.jsxs("div",{children:[fe.data.medications.map(se=>`${se.name} (${se.pack_quantity||0}p ${se.loose_quantity||0}l)`).join(", "),r.jsxs("div",{className:"dcp-history-timestamp",children:[sw(fe.originalDateString),"  ",r.jsx("span",{style:{textTransform:"capitalize"},children:fe.data.status})]})]})}),Y.length===0&&Oe.length===0&&Ke.length===0&&!V&&r.jsx("div",{className:"dcp-empty-state",children:"No history records found."})]})]})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[p&&r.jsx("div",{className:"dcp-error",children:"Failed to fetch queue data."}),v&&!x.currentPatient?r.jsxs("div",{className:"dcp-card",style:{padding:"2rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx(Z,{width:"40%",height:32}),r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx(Z,{width:"60%",height:24}),r.jsx(Z,{width:"40%",height:16,style:{marginTop:"8px"}})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsx(Z,{width:"100%",height:80,style:{borderRadius:"12px"}})}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[r.jsx(Z,{width:180,height:40}),r.jsx(Z,{width:120,height:40})]})]}):r.jsx("div",{className:"dcp-empty-state",children:x.currentPatient?"Redirecting to consultation...":"No patient currently being seen. Use 'Call Next' or search for a patient record."})]}),r.jsxs("div",{className:"dcp-scheduler-section",children:[r.jsx("div",{className:"queue-header",children:r.jsx("div",{className:"queue-actions",children:r.jsxs("div",{className:"controls-row",children:[r.jsxs("div",{className:"view-toggle-container",children:[r.jsx("button",{className:`view-toggle-btn ${i==="list"?"active":""}`,onClick:()=>a("list"),title:"List View",children:r.jsx(Iq,{size:16})}),r.jsx("button",{className:`view-toggle-btn ${i==="timeline"?"active":""}`,onClick:()=>a("timeline"),title:"Timeline View",children:r.jsx(wD,{size:16})})]}),r.jsxs("div",{className:"date-picker-container",children:[r.jsx(vi,{size:16,className:"text-gray-500"}),r.jsx("input",{type:"date",className:"date-input",value:t.toISOString().split("T")[0],onChange:fe=>n(new Date(fe.target.value))})]}),r.jsxs("button",{onClick:()=>o(!0),className:"appointment-button",children:[r.jsx(qb,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),r.jsx("span",{className:"sm:hidden",children:"Book"})]}),r.jsx("button",{onClick:()=>e(),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px"},children:"Search Patient"})]})})}),r.jsx(mW,{isOpen:s,onClose:()=>{o(!1),f()},onAppointmentBooked:C}),u&&g.length===0?r.jsx("div",{style:{padding:"20px"},children:r.jsx(Z,{width:"100%",height:200})}):i==="timeline"?r.jsx(pW,{queueList:g,onPatientClick:fe=>W(`/dashboard/edit-complaint/${fe.id}`)}):r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Details"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:g.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"20px"},children:"No appointments for this date."})}):g.map(fe=>{var se,Q,ie;return r.jsxs("tr",{onClick:()=>W(`/dashboard/edit-complaint/${fe.id}`),className:"queue-row-clickable",children:[r.jsxs("td",{children:["#",fe.token_no]}),r.jsx("td",{children:r.jsx("div",{className:"patient-info",children:r.jsx("span",{className:"name",children:(se=fe.Patient)==null?void 0:se.name})})}),r.jsxs("td",{className:"hidden-mobile",children:[(Q=fe.Patient)==null?void 0:Q.age,"y, ",(ie=fe.Patient)==null?void 0:ie.gender,"  ",fe.complaint||"-"]}),r.jsx("td",{children:r.jsx("span",{className:`dcp-status ${fe.status==="waiting"?"dcp-status-waiting":fe.status==="consulting"?"dcp-status-consulting":fe.status==="seen"?"dcp-status-seen":""}`,children:Ie(fe.status)})}),r.jsx("td",{children:r.jsx("button",{className:"dcp-btn dcp-btn-outline",style:{padding:"4px 8px",fontSize:"0.75rem"},children:"View"})})]},fe.id)})})]})})]}),r.jsxs("div",{className:"dcp-bottom-bar",children:[r.jsx("button",{onClick:Me,disabled:j||v||!x.nextPatient||!!x.currentPatient,className:"dcp-btn dcp-btn-teal",children:"Call Next Patient"}),r.jsxs("div",{className:"dcp-waiting-count",children:[x.waitingCount," patients waiting"]})]})]})]})})},tRe="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",nRe={apiKey:tRe},Ev=()=>{const[e,t]=b.useState(""),[n,i]=b.useState([]),[a,s]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState(!1),[f,p]=b.useState(null),g=b.useRef(null),[x,v]=b.useState(!1),[j,w]=b.useState(!1),[_,T]=b.useState(null),[C,O]=b.useState(null),[A,P]=b.useState([]),[I,F]=b.useState(!0),[B,$]=b.useState(!1);eu();const L=It(),V=Gr(),H=GD({settings:{},staffList:[]}),te=us(),X=ce=>{ce&&(te.prefetchQuery({queryKey:Vt.patients.context(ce),queryFn:async()=>{const fe=await ue(`/api/patients/${ce}/context`);if(!fe.ok)throw new Error("Failed to fetch patient context");return fe.json()},staleTime:5*60*1e3}),te.prefetchQuery({queryKey:Vt.patientDebts.balance(ce),queryFn:async()=>{const fe=await ue(`/api/patient-debts/${ce}/balance`);return fe.ok?fe.json():{netDebt:0}},staleTime:1*60*1e3}),te.prefetchQuery({queryKey:Vt.queue.latest(ce),queryFn:async()=>{const fe=await ue(`/api/queue/patient/${ce}/latest`);if(!fe.ok)throw new Error("Failed to fetch latest queue status");const se=await fe.json();return se!=null&&se._id&&te.prefetchQuery({queryKey:Vt.queue.entry(se._id),queryFn:async()=>{const Q=await ue(`/api/queue/doctor/complaint/${se._id}`);if(!Q.ok)throw new Error("Failed to fetch complaint record");return Q.json()},staleTime:1*60*1e3}),se},staleTime:5e3}),te.prefetchQuery({queryKey:Vt.dental.records(ce),queryFn:async()=>{const fe=await ue(`/api/dental/patient/${ce}`);if(!fe.ok)throw new Error("Failed to fetch dental records");return fe.json()},staleTime:5*60*1e3}))},{selectedImage:q,handleImageSelect:W,clearImage:ae}=H,G=b.useRef(null),z=ce=>{var se;const fe=(se=ce.target.files)==null?void 0:se[0];fe&&W(fe)};b.useEffect(()=>{H.chatHistory.length>0&&B&&H.isProcessing},[H.chatHistory.length]),b.useEffect(()=>{(async()=>{F(!0);try{const fe=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),se=await ue(`/api/patients?${fe.toString()}`);if(se.ok){const Q=await se.json();P(Q.patients||[])}}catch(fe){console.error("Error fetching recent patients:",fe)}finally{F(!1)}})()},[]),b.useEffect(()=>{H.setChatQuery(e)},[e]);const le=b.useCallback(async ce=>{if(!(ce||e).trim()){p("Please enter complaint details.");return}u(!0),p(null),ce&&ce!==H.chatQuery&&H.setChatQuery(ce);try{H.handleSendMessage(),t("")}catch(se){console.error("AI Error:",se),p("AI failed to process. Try again."),u(!1)}},[e,H]);b.useEffect(()=>{!H.isProcessing&&c&&u(!1)},[H.isProcessing,c]),b.useEffect(()=>{const ce=g.current;ce&&(ce.style.height="auto",ce.style.height=`${ce.scrollHeight}px`);const se=new URLSearchParams(V.search).get("caseDetails");if(se){const Q=decodeURIComponent(se);Q!==e&&(t(Q),v(!0))}},[V.search,e]),b.useEffect(()=>{x&&e.trim()&&(L(V.pathname,{replace:!0}),le(e),v(!1))},[x,e,le,L,V.pathname]),b.useEffect(()=>{const ce=g.current;ce&&(ce.style.height="auto",ce.style.height=`${ce.scrollHeight}px`)},[e]),b.useEffect(()=>{_&&(t(_),w(!1),H.setChatQuery(_),setTimeout(()=>H.handleSendMessage(),0),T(null))},[_,H]);const je=()=>{O({id:null,token:null,name:"New Case",age:null,gender:null}),w(!0)},Y=b.useMemo(()=>xd(async ce=>{const fe=ce.trim(),se=/^\d+$/.test(fe),Q=fe.split(/\s+/).length;if(fe.length<2||se&&fe.length>10||!se&&Q>2){i([]),s(!1),l(null);return}s(!0),l(null);try{const ie=new URLSearchParams({search:encodeURIComponent(ce),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),ge=await ue(`/api/patients?${ie.toString()}`);if(!ge.ok){const we=await ge.text();throw new Error(`API Error (${ge.status}): ${we||ge.statusText}`)}const ee=await ge.json();i(ee.patients)}catch(ie){console.error("Error searching patients:",ie),l(ie.message||"Failed to search patients."),i([])}finally{s(!1)}},300),[]),Oe=ce=>{const fe=ce.target.value;t(fe);const se=fe.trim(),Q=/^\d+$/.test(se),ie=se.split(/\s+/).length;se.length>=2&&!(Q&&se.length>10||!Q&&ie>2)?s(!0):(s(!1),i([])),Y(fe)},Ke=ce=>{ce.key==="Enter"&&!ce.shiftKey&&(ce.preventDefault(),e.trim()&&!a&&ve())},Me=async ce=>{ce&&ce.id&&L(`/dashboard/edit-complaint/patient/${ce.id}`)},Ie=[{icon:"",title:"Example: Fever & Cold",description:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough",text:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough"},{icon:"",title:"Example: Stomach Ache",description:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days",text:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days"}],be=ce=>{t(ce),setTimeout(()=>{H.handleSendMessage(ce),t(""),i([])},50)},re=()=>{t(""),i([]),H.refreshChat()},ve=()=>{!e.trim()&&!q||(Y.cancel(),H.handleSendMessage(e),t(""),i([]))};return r.jsxs("div",{className:"patient-search-page-container",children:[r.jsxs("div",{className:"patient-search-header",children:[r.jsx("button",{onClick:()=>L("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"}),r.jsx("button",{onClick:()=>L(-1),className:"patient-search-button patient-search-button-back",children:r.jsx(rn,{size:16})})]}),r.jsxs("div",{className:"patient-search-content-box",children:[o&&r.jsx("p",{className:"patient-search-error",children:o}),f&&r.jsx("p",{className:"patient-search-error",children:f}),I?r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:[1,2,3,4,5].map(ce=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:14})]}),r.jsx("div",{className:"recent-info",children:r.jsx(Z,{width:60,height:12})})]},ce))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}):A.length>0&&r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:A.map(ce=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>Me(ce),onMouseEnter:()=>ce.id&&X(ce.id),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:ce.name||"New Patient"}),r.jsxs("span",{className:"recent-token",children:["#",ce.token]})]}),r.jsxs("div",{className:"recent-info",children:[ce.age," yrs / ",ce.gender]})]},ce.id))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}),H.chatHistory.length===0&&n.length===0&&r.jsxs("div",{className:"example-cases-section",children:[r.jsxs("div",{className:"example-cases-header",children:[r.jsx("span",{className:"sparkles-icon",children:""}),r.jsx("h3",{children:"Try AI with Example Cases"})]}),r.jsx("div",{className:"example-cards-container",children:Ie.map((ce,fe)=>r.jsxs("div",{className:"example-case-card",onClick:()=>be(ce.text),children:[r.jsx("div",{className:"example-icon",children:ce.icon}),r.jsxs("div",{className:"example-content",children:[r.jsx("div",{className:"example-title",children:ce.title}),r.jsx("div",{className:"example-description",children:ce.description})]})]},fe))})]})]}),H.chatHistory.length>0&&!c&&r.jsxs("div",{className:`ai-chat-overlay ${B?"minimized":""}`,children:[r.jsxs("div",{className:"ai-chat-header",children:[r.jsx("span",{children:"AI Assistant"}),r.jsx("div",{className:"ai-chat-controls",children:r.jsx("button",{className:"icon-btn",onClick:()=>re(),title:"Clear Chat",children:r.jsx(Ut,{size:16})})})]}),r.jsxs("div",{className:"ai-chat-messages",children:[H.chatHistory.map((ce,fe)=>r.jsx("div",{className:`chat-bubble ${ce.role==="model"?"model":"user"}`,children:ce.role==="system"?r.jsx("i",{children:ce.text}):ce.text},fe)),H.isProcessing&&r.jsx("div",{className:"chat-bubble model",children:"Typing..."})]})]}),n.length>0&&!c&&r.jsxs("div",{className:"patient-search-results-overlay",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem"},children:[r.jsx("div",{style:{fontWeight:600,color:"#64748b"},children:"Found Patients"}),r.jsx("button",{onClick:()=>i([]),style:{border:"none",background:"transparent",color:"#94a3b8",cursor:"pointer"},children:r.jsx(Ut,{size:14})})]}),n.map(ce=>r.jsxs("div",{onClick:()=>Me(ce),onMouseEnter:()=>ce.id&&X(ce.id),className:"patient-search-result-item",children:[r.jsxs("div",{className:"patient-search-result-item-name-container",children:[r.jsxs("span",{className:"patient-search-result-item-token",children:["[#",ce.token,"]"]}),r.jsx("span",{className:"patient-search-result-item-name",children:ce.name})]}),r.jsxs("div",{className:"patient-search-result-item-details",children:[ce.age?`${ce.age} yrs`:"",ce.age&&ce.gender?" / ":"",ce.gender||"N/A"]})]},ce.id))]}),r.jsxs("div",{className:"sticky-chat-input-box",children:[r.jsxs("div",{className:"cmd-input-container",children:[q&&r.jsxs("div",{className:"cmd-image-preview",children:[r.jsx("img",{src:q,alt:"Selected"}),r.jsx("button",{className:"cmd-image-delete",onClick:ae,children:r.jsx(Ut,{size:12})})]}),r.jsx("textarea",{ref:g,placeholder:"Search (Name/Token/Phone), Ask AI, or Enter New Case...",value:e,onChange:Oe,onKeyDown:Ke,className:"cmd-input",disabled:c||H.isProcessing,rows:1}),r.jsxs("div",{className:"cmd-controls-group",children:[r.jsx("input",{type:"file",ref:G,onChange:z,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:"cmd-icon-btn",onClick:()=>{var ce;return(ce=G.current)==null?void 0:ce.click()},title:"Attach Image",children:r.jsx(ND,{})}),r.jsx("button",{className:"cmd-icon-btn",onClick:je,title:"Voice Input",children:r.jsx(iN,{})}),(e.length>0||q)&&r.jsx("button",{className:"cmd-icon-btn send-btn",onClick:ve,title:"Send",children:r.jsx(aN,{})})]})]}),j&&r.jsx(TN,{options:nRe,children:r.jsx(AN,{onClose:()=>w(!1),patientData:C,tokenNumber:null,onAiSummaryChange:T})})]})]})},fI=()=>{const[e,t]=b.useState(""),[n,i]=b.useState([]),[a,s]=b.useState(!1),[o,l]=b.useState(!1),c=It(),u=b.useRef(null);b.useEffect(()=>{const C=O=>{u.current&&!u.current.contains(O.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const f=b.useCallback(c7.debounce(async C=>{if(C.trim().length<2){i([]),s(!1);return}s(!0);try{const O=new URLSearchParams({search:encodeURIComponent(C),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),A=await ue(`/api/patients?${O.toString()}`);if(!A.ok)throw new Error("Failed to fetch patients");const P=await A.json();i(P.patients)}catch{i([])}finally{s(!1)}},400),[]);b.useEffect(()=>(e?(s(!0),f(e)):(i([]),f.cancel(),s(!1)),()=>f.cancel()),[e,f]);const p=C=>{c(`/patient/${encodeURIComponent(C.id)}/admission-billing`)},g=()=>{t(""),i([]),l(!1)},x=C=>C.slice(0,1).toUpperCase(),[v,j]=b.useState(!1),[w,_]=b.useState(!1),T=async()=>{_(!0);try{const C=await ue("/api/patients/discharge-all",{method:"POST"}),O=await C.json();C.ok?(alert(O.message),i([]),t("")):alert(O.message||"Failed to discharge patients")}catch(C){console.error("Bulk discharge error:",C),alert("An error occurred while processing bulk discharge.")}finally{_(!1),j(!1)}};return r.jsxs("div",{className:"ma-container",children:[r.jsxs("div",{className:"ma-header-section",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ma-title",children:"Manage Admission"}),r.jsx("p",{className:"ma-subtitle",children:"Search for a patient to admit, discharge, or view billing details"})]}),r.jsx("button",{className:"ma-discharge-all-btn",onClick:()=>j(!0),children:"Discharge Everyone"})]}),v&&r.jsx("div",{className:"ma-modal-overlay",children:r.jsxs("div",{className:"ma-modal-content",children:[r.jsx("h3",{children:"Confirm Bulk Discharge"}),r.jsxs("p",{children:["Are you sure you want to discharge ",r.jsx("strong",{children:"ALL"})," currently admitted patients?"]}),r.jsx("div",{className:"ma-modal-warning",children:r.jsx("p",{children:" This will finalize bills for all admitted patients."})}),r.jsxs("div",{className:"ma-modal-actions",children:[r.jsx("button",{className:"ma-modal-cancel",onClick:()=>j(!1),disabled:w,children:"Cancel"}),r.jsx("button",{className:"ma-modal-confirm",onClick:T,disabled:w,children:w?"Processing...":"Yes, Discharge All"})]})]})}),r.jsxs("div",{className:"ma-search-wrapper",ref:u,children:[a?r.jsxs("div",{className:"ma-loading-spinner",children:[r.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e2e8f0",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]}):r.jsx(Wn,{className:"ma-search-icon",size:20}),r.jsx("input",{type:"text",value:e,onChange:C=>{t(C.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search by Name, Phone, or Token...",className:"ma-search-input",autoFocus:!0}),e&&r.jsx("div",{className:"ma-clear-icon",onClick:g,children:r.jsx(Ut,{size:18})}),r.jsxs("div",{className:`ma-results-dropdown ${o&&(n.length>0||a)?"open":""}`,children:[n.map(C=>{const O=C.admission_date&&!C.discharge_date;return r.jsxs("div",{onClick:()=>p(C),className:"ma-result-item",children:[r.jsxs("div",{className:"ma-patient-info",children:[r.jsx("div",{className:"ma-avatar",children:x(C.name)}),r.jsxs("div",{className:"ma-patient-text",children:[r.jsxs("h4",{children:[C.name,r.jsxs("span",{className:"ma-patient-token",children:["#",C.token]})]}),r.jsxs("p",{className:"ma-patient-subtext",children:[C.phone||"No phone","  ",C.age?`${C.age} Y`:"","  ",C.gender||""]})]})]}),r.jsx("div",{className:`ma-badge ${O?"ma-badge-admitted":"ma-badge-discharged"}`,children:O?"ADMITTED":"NOT ADMITTED"})]},C.id)}),e.length>2&&!a&&n.length===0&&r.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:['No patients found matching "',e,'"']})]})]})]})},fz=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"boolean",label:"Yes/No"},{value:"computed",label:"Computed (Formula)"}],pI=({isOpen:e,onClose:t,entityType:n,entityLabel:i,currentConfig:a,onConfigUpdated:s})=>{const[o,l]=b.useState([]),[c,u]=b.useState(!1),[f,p]=b.useState(null),[g,x]=b.useState({key:"",label:"",type:"text",required:!1,formula:""});b.useEffect(()=>{e&&(l(a[n]||[]),p(null),x({key:"",label:"",type:"text",required:!1,formula:""}))},[e,a,n]);const v=T=>T.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_"),j=()=>{var C;if(!g.label.trim()){p("Column label is required");return}if(g.type==="computed"&&!((C=g.formula)!=null&&C.trim())){p("Formula is required for computed columns");return}const T=v(g.label);if(o.some(O=>O.key===T)){p("A column with this name already exists");return}l([...o,{...g,key:T}]),x({key:"",label:"",type:"text",required:!1,formula:""}),p(null)},w=T=>{l(o.filter(C=>C.key!==T))},_=async()=>{u(!0),p(null);try{const T={...a,[n]:o};if(!(await ue("/api/clinics/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_columns_config:T})})).ok)throw new Error("Failed to save custom columns");s(T),t()}catch(T){p(T.message||"Failed to save")}finally{u(!1)}};return e?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content manage-columns-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:["Manage Custom Columns - ",i]}),r.jsx("button",{onClick:t,className:"close-button",title:"Close",children:r.jsx(Ut,{size:24})})]}),f&&r.jsx("div",{className:"error-message",children:f}),r.jsxs("div",{className:"columns-list",children:[r.jsx("h4",{children:"Current Custom Columns"}),o.length===0?r.jsx("p",{className:"no-columns",children:"No custom columns defined yet."}):r.jsxs("table",{className:"columns-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Label"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:o.map(T=>{var C;return r.jsxs("tr",{children:[r.jsx("td",{children:T.label}),r.jsx("td",{children:((C=fz.find(O=>O.value===T.type))==null?void 0:C.label)||T.type}),r.jsx("td",{children:T.type==="computed"?r.jsx("code",{className:"computed-formula",children:T.formula}):T.required?"Required":"Optional"}),r.jsx("td",{children:r.jsx("button",{onClick:()=>w(T.key),className:"remove-column-btn",title:"Remove Column",children:r.jsx(Yn,{size:16})})})]},T.key)})})]})]}),r.jsxs("div",{className:"add-column-section",children:[r.jsx("h4",{children:"Add New Column"}),r.jsxs("div",{className:"add-column-form",children:[r.jsx("input",{type:"text",placeholder:"Column Label (e.g., BMI)",value:g.label,onChange:T=>x({...g,label:T.target.value}),className:"column-input"}),r.jsx("select",{value:g.type,onChange:T=>x({...g,type:T.target.value}),className:"column-select",children:fz.map(T=>r.jsx("option",{value:T.value,children:T.label},T.value))}),g.type==="computed"?r.jsx("input",{type:"text",placeholder:"Formula (e.g. weight / (height * height))",value:g.formula||"",onChange:T=>x({...g,formula:T.target.value}),className:"column-input",style:{flex:2}}):r.jsxs("label",{className:"required-checkbox",children:[r.jsx("input",{type:"checkbox",checked:g.required,onChange:T=>x({...g,required:T.target.checked})}),"Required"]}),r.jsxs("button",{onClick:j,className:"add-column-btn",children:[r.jsx(hr,{size:16})," Add"]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:t,className:"cancel-btn",disabled:c,children:"Cancel"}),r.jsxs("button",{onClick:_,className:"save-btn",disabled:c,children:[r.jsx(io,{size:16})," ",c?"Saving...":"Save Changes"]})]})]})}):null},hk=15,tD=()=>{const e=It(),{customColumnsConfig:t,refetch:n}=EN(),[i,a]=b.useState(!1),[s,o]=b.useState([]),[l,c]=b.useState(!0),[u,f]=b.useState(null),[p,g]=b.useState(""),[x,v]=b.useState(1),[j,w]=b.useState(1),[_,T]=b.useState(0),[C,O]=b.useState("created_at"),A=us(),P=ee=>{ee&&(A.prefetchQuery({queryKey:Vt.patients.context(ee),queryFn:async()=>{const we=await ue(`/api/patients/${ee}/context`);if(!we.ok)throw new Error("Failed to fetch patient context");return we.json()},staleTime:5*60*1e3}),A.prefetchQuery({queryKey:Vt.patientDebts.balance(ee),queryFn:async()=>{const we=await ue(`/api/patient-debts/${ee}/balance`);return we.ok?we.json():{netDebt:0}},staleTime:1*60*1e3}),A.prefetchQuery({queryKey:Vt.queue.latest(ee),queryFn:async()=>{const we=await ue(`/api/queue/patient/${ee}/latest`);if(!we.ok)throw new Error("Failed to fetch latest queue status");const Ue=await we.json();return Ue!=null&&Ue._id&&A.prefetchQuery({queryKey:Vt.queue.entry(Ue._id),queryFn:async()=>{const Ge=await ue(`/api/queue/doctor/complaint/${Ue._id}`);if(!Ge.ok)throw new Error("Failed to fetch complaint record");return Ge.json()},staleTime:1*60*1e3}),Ue},staleTime:5e3}),A.prefetchQuery({queryKey:Vt.dental.records(ee),queryFn:async()=>{const we=await ue(`/api/dental/patient/${ee}`);if(!we.ok)throw new Error("Failed to fetch dental records");return we.json()},staleTime:5*60*1e3}))},[I,F]=b.useState("desc"),[B,$]=b.useState(""),[L,V]=b.useState(!1),[H,te]=b.useState(null),[X,q]=b.useState([]),[W,ae]=b.useState(""),[G,z]=b.useState(!1),[le,je]=b.useState(null),[Y,Oe]=b.useState(!0),[Ke,Me]=b.useState(null),[Ie,be]=b.useState(p);eu(),b.useEffect(()=>{const ee=setTimeout(()=>{be(p),v(1)},500);return()=>{clearTimeout(ee)}},[p]);const re=b.useCallback(async()=>{Oe(!0),Me(null);try{const ee=await ue("/api/subscriptions");if(!ee.ok){let Ue=`Failed to fetch subscription plans (${ee.status})`;try{Ue=(await ee.json()).message||Ue}catch{}throw new Error(Ue)}const we=await ee.json();q(we)}catch(ee){console.error("Error fetching subscription plans:",ee),Me(ee.message||"An unknown error occurred while fetching plans."),q([])}finally{Oe(!1)}},[]),ve=b.useCallback(async(ee,we,Ue,Ge,Le)=>{c(!0),f(null);try{const oe=new URLSearchParams({page:ee.toString(),limit:hk.toString(),sortBy:Ue,sortOrder:Ge});we&&oe.append("search",we),Le&&oe.append("gender",Le);const _e=await ue(`/api/patients?${oe.toString()}`);if(!_e.ok){const ze=await _e.json();throw new Error(ze.message||"Failed to fetch patients")}const $e=await _e.json();o($e.patients),T($e.totalCount),v($e.currentPage),w($e.totalPages)}catch(oe){console.error("Error fetching patients:",oe),f(`Failed to load patients: ${oe.message}`),o([]),T(0),v(1),w(1)}finally{c(!1)}},[]);b.useEffect(()=>{ve(x,Ie,C,I,B),re()},[x,Ie,C,I,B,ve,re]);const ce=ee=>{const we=C===ee&&I==="asc"?"desc":"asc";O(ee),F(we),v(1)},fe=ee=>{try{return new Date(ee).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},se=()=>{V(!1),te(null),ae(""),je(null),z(!1)},Q=async(ee,we)=>{o(Ue=>Ue.map(Ge=>Ge.id===ee?{...Ge,insurance_type:we}:Ge));try{const Ue=await ue(`/api/patients/${ee}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:we})});if(!Ue.ok){const Ge=await Ue.json();throw new Error(Ge.message||"Failed to update insurance type")}}catch(Ue){console.error("Error updating insurance type:",Ue),ve(x,Ie,C,I,B)}},ie=(ee,we)=>{const Ue=new Date(ee),Ge=we.interval||1;switch(we.period){case"daily":Ue.setDate(ee.getDate()+Ge);break;case"weekly":Ue.setDate(ee.getDate()+Ge*7);break;case"monthly":Ue.setMonth(ee.getMonth()+Ge);break;case"yearly":Ue.setFullYear(ee.getFullYear()+Ge);break;default:console.warn(`Unknown subscription period: ${we.period}. Defaulting to 1 month.`),Ue.setMonth(ee.getMonth()+1)}return Ue},ge=async()=>{if(!H||!W){je("Please select a subscription plan.");return}const ee=X.find(we=>we.id===W);if(!ee){je("Selected plan details not found.");return}z(!0),je(null);try{const we=new Date,Ue=ie(we,ee),Ge={subscription_plan_id:W,subscription_status:"active",subscription_start_date:we.toISOString(),subscription_end_date:Ue.toISOString(),subscription_payment_method:"manual"},Le=await ue(`/api/patients/${H.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ge)});if(!Le.ok){const oe=await Le.json();throw new Error(oe.message||"Failed to update patient subscription")}se(),ve(x,Ie,C,I,B)}catch(we){console.error("Error starting subscription:",we),je(`Failed to start subscription: ${we.message}`)}finally{z(!1)}};return r.jsxs("div",{className:"all-patients-container",children:[r.jsxs("div",{className:"all-patients-header-section",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{size:16})}),r.jsxs("h1",{className:"all-patients-title",children:[r.jsx(jr,{size:28}),"All Patients"]})]}),r.jsxs("div",{className:"controls-container",children:[!Y&&!Ke&&X.length>0&&r.jsx("div",{className:"compact-subscriptions",children:X.map(ee=>r.jsxs("span",{className:"plan-chip",title:`${ee.name}: ${ee.price} / ${ee.interval} ${ee.period}${ee.description?" - "+ee.description:""}`,children:[ee.name,": ",ee.price]},ee.id))}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search...",className:"search-input",value:p,onChange:ee=>g(ee.target.value)}),r.jsx(Wn,{className:"search-input-icon",size:16})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("div",{className:"filter-select-container",children:[r.jsx($J,{size:14,className:"filter-select-icon"}),r.jsxs("select",{id:"genderFilter",value:B,onChange:ee=>$(ee.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Gender"}),r.jsx("option",{value:"M",children:"M"}),r.jsx("option",{value:"F",children:"F"}),r.jsx("option",{value:"O",children:"O"})]})]})}),r.jsxs("button",{onClick:()=>a(!0),className:"action-button",title:"Manage Custom Columns",children:[r.jsx(md,{size:14})," Columns"]})]})]}),u&&r.jsxs("div",{className:"error-alert",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:u})]}),l?r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:50,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{className:"patient-name",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:120,height:20})]})}),r.jsx("td",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:32})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:32,style:{borderRadius:"4px"}})})]},ee))})]})}):s.length===0?r.jsx("div",{className:"empty-state",children:Ie?"No patients found matching your search.":"No patients registered yet."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ce("name"),children:["Name",C==="name"&&(I==="asc"?r.jsx(nR,{size:14,className:"sort-icon"}):r.jsx(tR,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Age"}),r.jsx("th",{children:"Gender"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Address"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ce("created_at"),children:["Registered On",C==="created_at"&&(I==="asc"?r.jsx(nR,{size:14,className:"sort-icon"}):r.jsx(tR,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Insurance Type"})," ",r.jsx("th",{children:"Action"})," "]})}),r.jsx("tbody",{children:s.map(ee=>r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{className:"patient-row clickable-row",onClick:()=>e(`/dashboard/edit-complaint/patient/${ee.id}`),onMouseEnter:()=>P(ee.id),children:[r.jsx("td",{children:ee.token??"-"}),r.jsx("td",{className:"patient-name",children:ee.name}),r.jsx("td",{children:ee.age??"-"}),r.jsx("td",{children:ee.gender??"-"}),r.jsx("td",{children:ee.phone??"-"}),r.jsx("td",{children:ee.address??"-"}),r.jsx("td",{children:fe(ee.created_at)}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${ee.subscription_status==="active"?"active":ee.subscription_status==="cancelled"||ee.subscription_status==="expired"?"inactive":"none"}`,children:ee.subscription_status??"None"})}),r.jsx("td",{children:r.jsxs("select",{value:ee.insurance_type,onClick:we=>we.stopPropagation(),onChange:we=>Q(ee.id,we.target.value),className:"form-select insurance-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),r.jsx("td",{children:r.jsx("button",{onClick:we=>{we.stopPropagation(),e(`/start-subscription/${ee.id}`)},className:"action-button",children:"Start Sub"})})]}),t.patients&&t.patients.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:10,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:t.patients.map(we=>{var Ue;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[we.label,":"]})," ",(Ue=ee.custom_fields)!=null&&Ue[we.key]?String(ee.custom_fields[we.key]):"-"]},we.key)})})})})]},ee.id))})]})}),j>1&&r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("div",{className:"pagination-info",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(x-1)*hk+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(x*hk,_)})," ","of"," ",r.jsx("span",{className:"font-medium",children:_})," results"]}),r.jsxs("div",{className:"pagination-buttons",children:[r.jsxs("button",{onClick:()=>v(ee=>Math.max(ee-1,1)),disabled:x===1||l,className:"pagination-button",children:[r.jsx(zb,{size:16,className:"prev-icon"}),"Previous"]}),r.jsxs("span",{className:"pagination-current-page",children:["Page ",r.jsx("span",{className:"font-medium",children:x})," of ",r.jsx("span",{className:"font-medium",children:j})]}),r.jsxs("button",{onClick:()=>v(ee=>Math.min(ee+1,j)),disabled:x===j||l,className:"pagination-button",children:["Next",r.jsx(vd,{size:16,className:"next-icon"})]})]})]})]}),L&&H&&r.jsx("div",{className:"subscription-modal-overlay",children:r.jsxs("div",{className:"subscription-modal-content",children:[r.jsxs("div",{className:"subscription-modal-header",children:[r.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",H.name]}),r.jsx("button",{onClick:se,className:"subscription-modal-close-button",children:r.jsx(Ut,{size:24})})]}),le&&r.jsx("div",{className:"error-alert",role:"alert",children:r.jsx("span",{children:le})}),r.jsxs("div",{className:"subscription-modal-body",children:[r.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),r.jsxs("select",{id:"subscriptionPlan",value:W,onChange:ee=>ae(ee.target.value),className:"form-select",disabled:G||Y||Ke!==null||X.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),Y?r.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):Ke?r.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):X.length>0?X.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.name," - ",ee.price," (",ee.interval," ",ee.period,ee.interval>1?"s":"",")"]},ee.id)):r.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),Ke&&r.jsx("p",{className:"error-message",children:Ke}),X.length===0&&!Y&&!Ke&&r.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),r.jsxs("div",{className:"subscription-modal-footer",children:[r.jsx("button",{onClick:se,disabled:G,className:"subscription-modal-button cancel",children:"Cancel"}),r.jsx("button",{onClick:ge,disabled:!W||G,className:"subscription-modal-button submit",children:G?"Starting...":"Start Subscription"})]})]})}),r.jsx(pI,{isOpen:i,onClose:()=>a(!1),entityType:"patients",entityLabel:"Patients",currentConfig:t,onConfigUpdated:()=>{n()}})]})},yW=()=>{const e=It(),[t,n]=b.useState(""),[i,a]=b.useState([]),[s,o]=b.useState(!1),[l,c]=b.useState(!1),[u,f]=b.useState(!1),p=/^\+?[0-9\s\-().]{7,20}$/,g=b.useMemo(()=>xd(async _=>{if(_.trim().length<2){a([]),o(!1);return}o(!0);try{const T=new URLSearchParams({search:encodeURIComponent(_),page:"1",limit:"8",sortBy:"name",sortOrder:"asc"}),C=await ue(`/api/patients?${T.toString()}`);if(!C.ok)throw new Error("Failed to search");const O=await C.json();a(O.patients)}catch{a([])}finally{o(!1)}},300),[]),x=_=>{const T=_.target.value;n(T),c(p.test(T)),o(!0),f(!0),g(T)},v=b.useCallback(_=>{e("/billing",{state:{patientId:_.id,patientName:_.name}})},[e]),j=b.useCallback(async()=>{if(!(!t||!l)){o(!0);try{const T=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Direct Patient",phone:t,age:null,gender:null,token:null})});if(!T.ok)throw new Error("Failed to create patient");const C=await T.json();v(C)}catch(_){alert(`Error: ${_.message}`)}finally{o(!1)}}},[t,l,v]),w=_=>_.slice(0,1).toUpperCase();return r.jsxs("div",{className:"ccb-container",children:[r.jsxs("div",{className:"ccb-header-section",children:[r.jsx("button",{onClick:()=>e(-1),className:"ccb-back-button",title:"Go Back",children:r.jsx(rn,{size:24})}),r.jsx("h1",{className:"ccb-title",children:"Create Custom Bill"}),r.jsx("p",{className:"ccb-subtitle",children:"Search for a patient to bill manually, or create a new one instantly."})]}),r.jsxs("div",{className:"ccb-search-wrapper",children:[r.jsx(Wn,{className:"ccb-search-icon",size:20}),r.jsx("input",{type:"text",placeholder:"Search by Name, Phone, or Token...",value:t,onChange:x,onFocus:()=>f(!0),className:"ccb-search-input",autoFocus:!0}),t&&r.jsx("div",{className:"ccb-clear-icon",onClick:()=>{n(""),a([]),f(!1)},children:r.jsx(Ut,{size:18})}),r.jsxs("div",{className:`ccb-results-dropdown ${u&&(i.length>0||s||t.length>2&&i.length===0)?"open":""}`,children:[s&&r.jsx("div",{className:"p-4 flex justify-center items-center",children:r.jsx("div",{className:"ccb-spinner"})}),!s&&i.map(_=>r.jsxs("div",{onClick:()=>v(_),className:"ccb-result-item",children:[r.jsxs("div",{className:"ccb-patient-info",children:[r.jsx("div",{className:"ccb-avatar",children:w(_.name)}),r.jsxs("div",{className:"ccb-patient-details",children:[r.jsx("h4",{children:_.name}),r.jsxs("p",{className:"ccb-patient-meta",children:[_.phone||"No phone","  ",_.gender||"-","  ",_.age?`${_.age}y`:"-"]})]})]}),r.jsxs("span",{className:"ccb-token-badge",children:["#",_.token]})]},_.id)),!s&&i.length===0&&t.length>2&&r.jsxs("div",{className:"ccb-create-action",children:[r.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No patients found."}),l&&r.jsxs("button",{onClick:j,className:"ccb-create-btn w-full",children:["Create Patient with Phone ",t]})]})]})]})]})},xW=({currentUser:e})=>{const t=It(),n=us(),[i,a]=b.useState("select_patient"),[s,o]=b.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,c]=b.useState(null),[u,f]=b.useState([]),[p,g]=b.useState([]),[x,v]=b.useState(""),[j,w]=b.useState([]),[_,T]=b.useState(""),[C,O]=b.useState([]),[A,P]=b.useState(!1),[I,F]=b.useState(null),[B,$]=b.useState(null),[L,V]=b.useState(null),[H,te]=b.useState(!1),[X,q]=b.useState(!1),[W,ae]=b.useState(!1),G=/^\+?[0-9\s\-().]{7,20}$/,z=/^[a-zA-Z\s'-]{2,}$/,le=b.useCallback(async()=>{if(!(u.length>0)){te(!0),V(null);try{const Q=await ue("/api/lab-tests");if(!Q.ok)throw new Error("Failed to fetch lab tests");const ie=await Q.json();f(ie)}catch(Q){console.error("Failed to fetch available lab tests:",Q),V("Could not load lab test list: "+Q.message),f([])}finally{te(!1)}}},[u.length]),je=Q=>{Q&&(n.prefetchQuery({queryKey:Vt.patients.context(Q),queryFn:async()=>{const ie=await ue(`/api/patients/${Q}/context`);if(!ie.ok)throw new Error("Failed to fetch patient context");return ie.json()},staleTime:1e3*60*5}),n.prefetchQuery({queryKey:Vt.patientDebts.balance(Q),queryFn:async()=>{const ie=await ue(`/api/patient-debts/${Q}/balance`);if(!ie.ok)throw new Error("Failed to fetch patient debt");return ie.json()},staleTime:1e3*60}),n.prefetchQuery({queryKey:Vt.queue.latest(Q),queryFn:async()=>{const ie=await ue(`/api/queue/patient/${Q}/latest`);if(!ie.ok){if(ie.status===404)return null;throw new Error("Failed to fetch queue status")}return ie.json()},staleTime:1e3*5}))},Y=b.useMemo(()=>new so(u,{keys:["name","description"],threshold:.3,ignoreLocation:!0}),[u]);b.useEffect(()=>{if(!x){w([]);return}const Q=Y.search(x).map(ie=>ie.item);w(Q.slice(0,10))},[x,Y]);const Oe=b.useCallback(Q=>{const ie={id:Q.id,name:Q.name,token:Q.token,age:Q.age,gender:Q.gender,phone:Q.phone};c(ie),a("create_order"),g([]),v(""),w([]),V(null),le()},[le]),Ke=b.useMemo(()=>xd(async Q=>{if(Q.trim().length<2){O([]),P(!1),F(null);return}P(!0),F(null);try{const ie=new URLSearchParams({search:encodeURIComponent(Q),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),ge=await ue(`/api/patients?${ie.toString()}`);if(!ge.ok){const we=await ge.text();throw new Error(`API Error (${ge.status}): ${we||ge.statusText}`)}const ee=await ge.json();O(ee.patients)}catch(ie){console.error("Error searching lab patients:",ie),F(ie.message||"Failed to search lab patients."),O([])}finally{P(!1)}},300),[G,z]),Me=Q=>{const ie=Q.target.value;T(ie),q(G.test(ie)),ae(z.test(ie)&&!G.test(ie)),P(!0),Ke(ie)},Ie=b.useCallback(async Q=>{if(!_||Q==="phone"&&!X||Q==="name"&&!W){F(`Invalid ${Q} to create a new patient.`);return}P(!0),F(null);try{const ge=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Q==="name"?_:"direct lab",phone:Q==="phone"?_:null,age:null,gender:null,token:null})});if(!ge.ok){const we=await ge.json();throw new Error(we.message||`Failed to create patient: ${ge.statusText}`)}const ee=await ge.json();alert(`New patient "${ee.name}" created with ${Q==="phone"?`phone ${ee.phone}`:`name ${ee.name}`}.`),Oe({id:ee.id,name:ee.name,token:ee.token??null,age:ee.age??null,gender:ee.gender??null,phone:ee.phone})}catch(ie){console.error("Error creating new patient:",ie),F(ie.message||"Failed to create new patient.")}finally{P(!1)}},[_,X,W,Oe]),be=()=>{a("select_patient"),c(null),T(""),O([]),F(null)},re=Q=>{const{name:ie,value:ge}=Q.target;o(ee=>({...ee,[ie]:ie==="age"?ge?parseInt(ge,10):void 0:ge}))},ve=async Q=>{if(Q.preventDefault(),$(null),!s.name){$("Patient Name is required.");return}const ie={name:s.name,age:s.age,gender:s.gender,phone:s.phone,address:s.address};try{const ge=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!ge.ok){const we=await ge.json();throw new Error(we.message||`Failed to create patient: ${ge.statusText}`)}const ee=await ge.json();Oe({id:ee.id,name:ee.name,token:ee.token??null,age:ee.age??null,gender:ee.gender??null,phone:ee.phone})}catch(ge){console.error("Failed to create patient:",ge),$(ge.message||"Failed to create patient. Please try again.")}},ce=Q=>{if(p.some(ie=>ie.id===Q.id)){V(`${Q.name} is already in the order.`),setTimeout(()=>V(null),3e3),v(""),w([]);return}g(ie=>[...ie,{...Q}]),v(""),w([])},fe=Q=>{g(ie=>ie.filter(ge=>ge.id!==Q))},se=async Q=>{if(Q.preventDefault(),V(null),!l){V("No patient selected.");return}if(p.length===0){V("No lab tests selected.");return}const ie={patient_id:l.id,tests:p.map(ge=>({id:ge.id,name:ge.name,price:ge.price}))};console.log("Submitting Lab Order:",ie);try{const ge=await ue("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!ge.ok){const Ue=await ge.json();throw console.error("API Error Data:",Ue),new Error(Ue.message||`Failed to create lab order: ${ge.statusText}`)}const ee=await ge.json();console.log("Lab Order Creation Result:",ee);let we=l.queueId;if(!we){const Ue=await ue(`/api/queue/patient/${l.id}/latest`);if(Ue.ok){const Ge=await Ue.json();Ge!=null&&Ge._id&&(we=Ge._id)}}if(!we){const Ue=await ue("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id})});if(!Ue.ok){const Le=await Ue.text();throw new Error(`Failed to create queue entry for redirection: ${Le||Ue.statusText}`)}const Ge=await Ue.json();if(Ge!=null&&Ge.id)we=Ge.id;else throw new Error("Failed to get ID from new queue entry for redirection.")}(e==null?void 0:e.role)==="lab"?t("/dashboard"):t(`/dashboard/edit-complaint/${we}`)}catch(ge){console.error("Failed to create lab order:",ge),V(ge.message||"Failed to create lab order.")}};return b.useEffect(()=>{le()},[le]),r.jsxs("div",{className:"create-lab-order-container",children:[r.jsxs("div",{className:"create-lab-order-header",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button","aria-label":"Go back",children:r.jsx(rn,{size:20})}),r.jsx("h1",{className:"create-lab-order-title",children:"Create New Lab Order"}),r.jsx("div",{style:{width:"64px"}})," "]}),(i==="select_patient"||i==="create_patient")&&r.jsxs("div",{className:"glass-card",children:[i==="select_patient"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"header-with-action",children:r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Select Patient"})}),r.jsxs("div",{className:"search-container",children:[r.jsx(Wn,{className:"search-icon",size:20}),r.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No...",value:_,onChange:Me,className:"modern-input",autoFocus:!0,autoComplete:"off"}),A&&r.jsx("div",{style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(Z,{width:80,height:14})})]}),A&&r.jsx("ul",{className:"patient-list",children:[1,2,3].map(Q=>r.jsxs("li",{className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx(Z,{width:120,height:20}),r.jsx(Z,{width:50,height:24,style:{borderRadius:"12px"}})]}),r.jsx("div",{className:"patient-details",children:r.jsx(Z,{width:200,height:16})})]},Q))}),I&&r.jsxs("div",{className:"error-message",children:[r.jsx(Zr,{size:18}),I]}),C.length>0&&r.jsx("ul",{className:"patient-list",children:C.map(Q=>r.jsxs("li",{onClick:()=>Oe(Q),onMouseEnter:()=>je(Q.id),className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("strong",{children:Q.name}),r.jsxs("span",{className:"token-badge",children:["#",Q.token||"N/A"]})]}),r.jsxs("div",{className:"patient-details",children:[Q.age?`${Q.age} yrs`:"",Q.gender?` / ${Q.gender}`:"",Q.phone?`  ${Q.phone}`:""]})]},Q.id))}),_.length>=2&&!A&&C.length===0&&!I&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{className:"no-data-message",style:{background:"none",border:"none",padding:0},children:['No patients found matching "',_,'".']}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px",marginTop:"15px"},children:[X&&r.jsxs("button",{type:"button",onClick:()=>Ie("phone"),className:"secondary-button",children:['Create "Direct Lab" Patient (Phone: ',_,")"]}),W&&r.jsxs("button",{type:"button",onClick:()=>Ie("name"),className:"secondary-button",children:["Create Patient (Name: ",_,")"]})]})]}),_.length<2&&!A&&r.jsx("div",{className:"info-message",children:"Start typing to search for a patient..."})]}),i==="create_patient"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"New Patient Registration"}),r.jsx("button",{onClick:be,className:"text-button",children:" Back to Search "})]}),B&&r.jsxs("div",{className:"error-message",children:[r.jsx(Zr,{size:18}),B]}),r.jsxs("form",{onSubmit:ve,children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-name",className:"form-label",children:"Patient Name *"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(jr,{className:"search-icon",size:18}),r.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:s.name,onChange:re,className:"modern-input",placeholder:"Enter full name"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-age",className:"form-label",children:"Age"}),r.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:s.age??"",onChange:re,className:"modern-input",style:{paddingLeft:"16px"},placeholder:"e.g. 30"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-gender",className:"form-label",children:"Gender"}),r.jsxs("select",{name:"gender",id:"lab-patient-gender",value:s.gender??"",onChange:re,className:"modern-input",style:{paddingLeft:"16px"},children:[r.jsx("option",{value:"",children:"Select Gender..."}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-phone",className:"form-label",children:"Phone Number"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(cg,{className:"search-icon",size:18}),r.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:s.phone||"",onChange:re,className:"modern-input",placeholder:"e.g. 9876543210"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-address",className:"form-label",children:"Address"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(zq,{className:"search-icon",size:18,style:{top:"20px"}}),r.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:s.address||"",onChange:re,className:"modern-input",style:{resize:"none"},placeholder:"Enter address (optional)"})]})]})]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:be,className:"secondary-button",children:" Cancel "}),r.jsxs("button",{type:"submit",className:"primary-button",children:[r.jsx(hr,{size:18}),"Create & Proceed"]})]})]})]})]}),i==="create_order"&&l&&r.jsxs("div",{className:"glass-card",children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Create Lab Order"}),r.jsx("button",{onClick:be,className:"text-button",children:" Change Patient "})]}),r.jsxs("div",{className:"patient-summary",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(jr,{size:20,className:"highlight-primary"}),r.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600"},children:l.name})]}),r.jsxs("div",{className:"patient-details",style:{marginLeft:"30px",marginTop:"4px"},children:[l.age?`${l.age} yrs`:"Age N/A",l.gender&&`  ${l.gender}`,l.phone&&`  ${l.phone}`]})]}),L&&r.jsxs("div",{className:"error-message",children:[r.jsx(Zr,{size:18}),L]}),r.jsxs("form",{onSubmit:se,children:[r.jsxs("div",{className:"form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",className:"form-label",children:"Add Lab Test"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[H?r.jsx("div",{style:{position:"absolute",right:"45px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(Z,{width:24,height:24,variant:"circular"})}):r.jsx(Wn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search tests (e.g. CBC, Lipid Profile)...",value:x,onChange:Q=>v(Q.target.value),className:"modern-input",disabled:H,autoComplete:"off"})]}),H&&x&&r.jsx("div",{className:"search-results-dropdown",children:[1,2,3].map(Q=>r.jsxs("div",{className:"search-result-item",children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"20%",height:20})]},Q))}),x&&j.length>0&&r.jsx("div",{className:"search-results-dropdown",children:j.map(Q=>r.jsxs("div",{onClick:()=>ce(Q),className:"search-result-item",children:[r.jsx("span",{style:{fontWeight:500},children:Q.name}),r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(Q.price).toFixed(2)]})]},Q.id))}),x&&j.length===0&&!H&&r.jsxs("div",{className:"no-data-message",style:{marginTop:"5px",padding:"10px",fontSize:"0.9rem"},children:['No tests found matching "',x,'".']})]}),r.jsxs("div",{style:{marginTop:"30px"},children:[r.jsxs("h4",{className:"card-title",style:{fontSize:"1.1rem"},children:["Selected Tests (",p.length,")"]}),p.length===0?r.jsx("div",{className:"info-message",children:"No tests added yet. Search above to add tests."}):r.jsx("div",{className:"selected-tests-list",children:p.map(Q=>r.jsxs("div",{className:"selected-test-item",children:[r.jsx("div",{style:{flex:1},children:r.jsx("div",{style:{fontWeight:500},children:Q.name})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(Q.price).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>fe(Q.id),className:"remove-button",title:"Remove Test",children:r.jsx(Yn,{size:18})})]})]},Q.id))})]}),p.length>0&&r.jsxs("div",{className:"total-price",children:["Total: ",p.reduce((Q,ie)=>Q+parseFloat(ie.price),0).toFixed(2)]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:be,className:"secondary-button",children:" Cancel Order "}),r.jsxs("button",{type:"submit",disabled:p.length===0,className:"primary-button",children:[r.jsx(Qk,{size:18}),"Create Lab Order"]})]})]})]})]})},rRe=()=>{const e=b.useRef(null),t=b.useRef(null),[n,i]=b.useState(!1),[a,s]=b.useState(0),[o,l]=b.useState(!1),[c,u]=b.useState(!1),[f,p]=b.useState(null),g=30,x=100,v=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:!0});e.current&&(e.current.srcObject=_,u(!0),p(null))}catch(_){console.error("Error accessing camera:",_),p("Camera access denied. Please allow camera permissions to use motion detection."),u(!1)}},j=()=>{var T;const _=(T=e.current)==null?void 0:T.srcObject;_&&_.getTracks().forEach(C=>C.stop()),u(!1)};b.useEffect(()=>(v(),()=>j()),[]),b.useEffect(()=>{if(!c)return;let _;const T=t.current,C=e.current;if(!T||!C)return;const O=T.getContext("2d",{willReadFrequently:!0});if(!O)return;const A=320,P=240;T.width=A,T.height=P;let I=null;const F=()=>{if(C.readyState===C.HAVE_ENOUGH_DATA){O.drawImage(C,0,0,A,P);const $=O.getImageData(0,0,A,P).data;if(I){let L=0;for(let V=0;V<$.length;V+=4*4){const H=Math.abs($[V]-I[V]),te=Math.abs($[V+1]-I[V+1]),X=Math.abs($[V+2]-I[V+2]);H+te+X>g&&L++}if(L>x){const V=Date.now();s(V),i(!0),o||l(!0)}else i(!1)}I=$}_=requestAnimationFrame(F)};return F(),()=>{cancelAnimationFrame(_)}},[c,o]);const w=()=>{l(!1)};return r.jsxs("div",{className:"motion-detect-container",style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{className:"status-header bg-white p-4 rounded-lg shadow-sm flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${c?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:r.jsx(Hk,{size:24})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Motion Detection Status"}),r.jsx("p",{className:"text-sm text-gray-500",children:c?"Camera Active - Monitoring":"Camera Inactive"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${n?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(Cc,{size:16}),r.jsx("span",{className:"font-medium",children:n?"Motion Detected!":"No Motion"})]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${o?"bg-blue-50 border-blue-200 text-blue-600":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(Wk,{size:16}),r.jsx("span",{className:"font-medium",children:o?"AI Assistant Active":"AI Assistant Idle"})]})]})]}),f&&r.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-200",children:f}),r.jsxs("div",{className:"video-feed-container bg-black rounded-lg overflow-hidden relative shadow-lg",style:{maxWidth:"640px",margin:"0 auto"},children:[r.jsx("video",{ref:e,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",display:c?"block":"none"}}),r.jsx("canvas",{ref:t,style:{display:"none"}}),!c&&!f&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Hk,{size:48,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Connecting to camera..."})]})})]}),o&&r.jsx(AN,{onClose:w,patientData:null,tokenNumber:null,onAiSummaryChange:()=>{},lastMotionTimestamp:a,backgroundMode:!0})]})},iRe=async()=>{const e=await ue("/api/staff");if(!e.ok)throw new Error("Failed to fetch staff");const t=await e.json();return t.staff||t||[]};function aRe(){return ZS({queryKey:[...Vt.staff.list,"doctors"],queryFn:iRe,staleTime:5*60*1e3,select:e=>e.filter(t=>t.role==="doctor"||t.role==="admin")})}const pz=({currentUser:e})=>{const[t,n]=b.useState("queue"),[i,a]=b.useState(""),[s,o]=b.useState(new Date),l=s.toISOString().split("T")[0],[c,u]=b.useState(!1),[f,p]=b.useState("list"),{data:g,isLoading:x,refetch:v}=gW(l),j=(g==null?void 0:g.list)||[],{data:w=[],isLoading:_}=aRe(),T=ZIe(),C=us(),[O,A]=b.useState(null),[P,I]=b.useState(null),F=It(),B=Gr(),$=()=>{v()};b.useEffect(()=>{const z=new URLSearchParams(B.search).get("tab");z&&X.find(je=>je.id===z)&&n(z)},[B.search]),b.useEffect(()=>{t==="queue"&&v()},[t,v]);const L=b.useCallback(async(G,z)=>{if(console.log(`Attempting to assign doctor ${z} to queue ${G}`),I(null),A(null),!z){console.log("No doctor ID provided, skipping assignment.");return}const le=j.find(Oe=>Oe.id===G);if(!le){console.error(`Queue entry ${G} not found in local state.`),I("Queue entry not found.");return}if(le.doctor_id===z){console.log(`Queue ${G} already assigned to doctor ${z}. Skipping.`);return}const je=async Oe=>{if(!Oe||!Oe.id||!Oe.name){I("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",Oe);return}const Ke=async()=>{try{await T.mutateAsync({queueId:G,status:"waiting",doctorId:z});const Me=w.find(Ie=>Ie.id===z);return console.log(`Successfully assigned doctor ${Me==null?void 0:Me.name} to queue ${G}.`),!0}catch(Me){return console.error(`Error assigning doctor for queue ${G}:`,Me),I(`Failed to assign doctor: ${Me.message}`),!1}};Oe.subscription_status==="active"?(console.log(`Patient ${Oe.name} (ID: ${Oe.id}) has active subscription. Assigning doctor directly.`),await Ke()):(console.log(`Patient ${Oe.name} (ID: ${Oe.id}) does not have active subscription. Navigating to billing WITHOUT assigning doctor yet.`),F(`/dashboard/doctor-billing/${G}?doctorId=${z}`))},Y=le.Patient;if(Y&&Y.id&&Y.name)console.log("Patient details found in state. Proceeding with assignment."),await je(Y);else{console.warn(`Patient details missing for queue entry ${G}. Fetching patient ${le.patient_id}...`);try{const Oe=await ue(`/api/patients/${le.patient_id}`);if(!Oe.ok){const Me=await Oe.json().catch(()=>({}));throw new Error(Me.message||`Failed to fetch patient details (status ${Oe.status})`)}const Ke=await Oe.json();console.log("Successfully fetched patient details:",Ke),await je(Ke)}catch(Oe){console.error(`Failed to fetch patient details for patient ID ${le.patient_id}:`,Oe),I(`Failed to fetch required patient details: ${Oe.message}`)}}},[w,j,F,T]),V=G=>{G&&(C.prefetchQuery({queryKey:Vt.patients.context(G),queryFn:async()=>{const z=await ue(`/api/patients/${G}/context`);if(!z.ok)throw new Error("Failed to fetch patient context");return z.json()},staleTime:5*60*1e3}),C.prefetchQuery({queryKey:Vt.patientDebts.balance(G),queryFn:async()=>{const z=await ue(`/api/patient-debts/${G}/balance`);return z.ok?z.json():{netDebt:0}},staleTime:1*60*1e3}),C.prefetchQuery({queryKey:Vt.queue.latest(G),queryFn:async()=>{const z=await ue(`/api/queue/patient/${G}/latest`);if(!z.ok)throw new Error("Failed to fetch latest queue status");const le=await z.json();return le!=null&&le._id&&C.prefetchQuery({queryKey:Vt.queue.entry(le._id),queryFn:async()=>{const je=await ue(`/api/queue/doctor/complaint/${le._id}`);if(!je.ok)throw new Error("Failed to fetch complaint record");return je.json()},staleTime:1*60*1e3}),le},staleTime:5e3}),C.prefetchQuery({queryKey:Vt.dental.records(G),queryFn:async()=>{const z=await ue(`/api/dental/patient/${G}`);if(!z.ok)throw new Error("Failed to fetch dental records");return z.json()},staleTime:5*60*1e3}))},H=async(G,z)=>{var je;I(null);const le=z==="consulting"?"start consultation":"complete visit";try{await T.mutateAsync({queueId:G,status:z,doctorId:z==="consulting"&&((je=j.find(Y=>Y.id===G))==null?void 0:je.doctor_id)||void 0})}catch(Y){console.error(`Error trying to ${le}:`,Y),I(`Failed to ${le}: ${Y.message}`)}},te=async(G,z)=>{let le="red";z==="red"?le="green":z==="green"?le="blue":z==="blue"?le=null:le="red";try{if(!(await ue(`/api/patients/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_code:le})})).ok)throw new Error("Failed to update patient color");v()}catch(je){console.error("Error updating patient color:",je)}},X=[{id:"queue",label:"Appointment Queue",icon:r.jsx(Ro,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:r.jsx(Wn,{size:20})},{id:"manage-admission",label:"Manage Admission",icon:r.jsx(qX,{size:20})},{id:"all-patients",label:"All Patients",icon:r.jsx(Ub,{size:20})},{id:"lab",label:"Lab Tests",icon:r.jsx(fw,{size:20})},{id:"custom-bill",label:"Custom Bill",icon:r.jsx(ks,{size:20})},{id:"motion-detect",label:"Motion Detect",icon:r.jsx(Hk,{size:20})}],q=G=>{try{return new Date(G).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},W=j.filter(G=>{var z,le;return(le=(z=G.Patient)==null?void 0:z.name)==null?void 0:le.toLowerCase().includes(i.toLowerCase())}),{openCommandBar:ae}=$c();return r.jsxs("div",{className:"admin-panel-container",children:[P&&r.jsxs("div",{className:"error-message-reception",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:P})]}),r.jsx("div",{className:"admin-nav-bar",children:X.map(G=>r.jsxs("button",{className:`admin-nav-button ${t===G.id?"active":""}`,onClick:()=>{G.id==="newtons-ai"?ae():n(G.id)},children:[r.jsx("span",{children:G.icon}),G.label]},G.id))}),r.jsx("div",{className:"admin-content-section",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[t==="queue"&&r.jsxs("div",{className:"space-y-6",children:[" ",r.jsxs("div",{className:"queue-header",children:[r.jsxs("div",{className:"queue-actions",children:[r.jsxs("div",{className:"search-bar-container",children:[r.jsx("input",{type:"text",placeholder:"Search patients...",className:"search-input",value:i,onChange:G=>a(G.target.value)}),r.jsx(Wn,{className:"search-icon",size:18})]}),r.jsxs("div",{className:"controls-row",children:[r.jsxs("div",{className:"view-toggle-container",children:[r.jsx("button",{className:`view-toggle-btn ${f==="list"?"active":""}`,onClick:()=>p("list"),title:"List View",children:r.jsx(Iq,{size:16})}),r.jsx("button",{className:`view-toggle-btn ${f==="timeline"?"active":""}`,onClick:()=>p("timeline"),title:"Timeline View",children:r.jsx(wD,{size:16})})]}),r.jsxs("div",{className:"date-picker-container",children:[r.jsx(vi,{size:16,className:"text-gray-500"}),r.jsx("input",{type:"date",className:"date-input",value:s.toISOString().split("T")[0],onChange:G=>o(new Date(G.target.value))})]}),r.jsxs("button",{onClick:()=>u(!0),className:"appointment-button",children:[r.jsx(qb,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),r.jsx("span",{className:"sm:hidden",children:"Book"})]})]})]}),r.jsxs("div",{className:"summary-cards-grid",children:[r.jsxs("div",{className:"summary-card card-waiting",children:[r.jsx("div",{className:"summary-card-title",children:"Waiting"}),r.jsx("div",{className:"summary-card-value",children:j.filter(G=>G.status==="waiting").length})]}),r.jsxs("div",{className:"summary-card card-consulting",children:[r.jsx("div",{className:"summary-card-title",children:"Consulting"}),r.jsx("div",{className:"summary-card-value",children:j.filter(G=>G.status==="consulting").length})]}),r.jsxs("div",{className:"summary-card card-completed",children:[r.jsx("div",{className:"summary-card-title",children:"Completed"}),r.jsx("div",{className:"summary-card-value",children:j.filter(G=>G.status==="seen").length})]})]})]}),r.jsx(mW,{isOpen:c,onClose:()=>{u(!1),v()},onAppointmentBooked:$}),x&&j.length===0?r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:50,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{className:"hidden md:table-cell",children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:120,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(G=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:32})})]},G))})]})}):W.length===0?r.jsx("div",{className:"empty-queue-message",children:i?"No patients found matching your search.":"Queue is empty."}):f==="timeline"?r.jsx(pW,{queueList:W,onPatientClick:G=>F(`/dashboard/edit-complaint/${G.id}`)}):r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"hidden-mobile",children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Phone"}),r.jsx("th",{className:"hidden-mobile",children:"Complaint"}),r.jsx("th",{className:"hidden-mobile",children:"Subscription"}),r.jsx("th",{className:"hidden-mobile",children:"Time"}),r.jsx("th",{className:"text-center",children:"Action"})]})}),r.jsx("tbody",{children:W.map(G=>{var z,le,je,Y,Oe,Ke,Me,Ie,be,re,ve,ce;return r.jsxs("tr",{onClick:()=>F(`/dashboard/edit-complaint/${G.id}`),onMouseEnter:()=>G.patient_id&&V(G.patient_id),className:"queue-row-clickable",children:[r.jsxs("td",{className:"hidden-mobile",children:[" ",r.jsxs("span",{className:"queue-token",children:["#",G.token_no]})," "]}),r.jsx("td",{children:r.jsxs("div",{className:"patient-cell-content",children:[r.jsx("span",{className:`color-dot color-${((z=G.Patient)==null?void 0:z.color_code)||"none"}`,onClick:fe=>{var se;fe.stopPropagation(),(se=G.Patient)!=null&&se.id&&te(G.Patient.id,G.Patient.color_code)},title:"Click to change color"}),r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:((le=G.Patient)==null?void 0:le.name)||"N/A"}),r.jsxs("span",{className:"details",children:[(je=G.Patient)!=null&&je.age?`${G.Patient.age}y`:"",(Y=G.Patient)!=null&&Y.gender?`, ${G.Patient.gender}`:""]})]})]})}),r.jsxs("td",{className:"hidden-mobile",children:[" ",r.jsx("div",{className:"text-sm text-gray-500",children:((Oe=G.Patient)==null?void 0:Oe.phone)||"-"})," "]}),r.jsx("td",{className:"hidden-mobile",children:r.jsx("span",{className:"complaint-badge",children:G.complaint||"-"})}),r.jsxs("td",{className:"hidden-mobile",children:[r.jsx("span",{className:`status-badge ${((Ke=G.Patient)==null?void 0:Ke.subscription_status)==="active"?"status-active":((Me=G.Patient)==null?void 0:Me.subscription_status)==="cancelled"||((Ie=G.Patient)==null?void 0:Ie.subscription_status)==="expired"?"status-inactive":"status-none"}`,children:((be=G.Patient)==null?void 0:be.subscription_status)??"None"}),G.Patient&&G.Patient.id&&G.Patient.subscription_status!=="active"&&r.jsx("button",{onClick:fe=>{fe.stopPropagation(),G.Patient&&F(`/start-subscription/${G.Patient.id}`)},className:"btn-start-sub ml-2",children:"Start Sub"})]}),r.jsx("td",{className:"hidden-mobile text-sm text-gray-500",children:q(G.createdAt)}),r.jsx("td",{className:"action-doctor-cell",children:O===G.id?r.jsx("div",{className:"relative inline-block text-left w-full",onClick:fe=>fe.stopPropagation(),children:r.jsxs("select",{value:"",onChange:fe=>L(G.id,fe.target.value),onBlur:()=>A(null),className:"doctor-select",autoFocus:!0,children:[r.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),_?r.jsx("option",{disabled:!0,children:"Loading..."}):w.length>0?w.map(fe=>r.jsx("option",{value:fe.id,children:fe.name},fe.id)):r.jsx("option",{disabled:!0,children:"No doctors available"})]})}):r.jsxs("div",{className:"action-doctor-content",onClick:fe=>fe.stopPropagation(),children:[G.status==="waiting"&&r.jsx(r.Fragment,{children:(re=G.User)!=null&&re.name?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"doctor-name-display",children:G.User.name}),r.jsx("button",{onClick:()=>H(G.id,"consulting"),className:"btn-action btn-start",children:"Start"})]}):_?r.jsx(Z,{width:80,height:20}):w.length===0?r.jsx("span",{className:"text-red-500 text-xs",children:"No docs"}):w.length===1?r.jsxs("button",{onClick:()=>L(G.id,w[0].id),className:"btn-action btn-assign",children:["Assign ",w[0].name.split(" ")[0]]}):r.jsx("button",{onClick:()=>A(G.id),className:"btn-action btn-assign",children:"Assign"})}),G.status==="consulting"&&r.jsxs(r.Fragment,{children:[((ve=G.User)==null?void 0:ve.name)&&r.jsx("span",{className:"doctor-name-display",children:G.User.name}),r.jsx("button",{onClick:()=>H(G.id,"seen"),className:"btn-action btn-complete",children:"Complete"})]}),G.status==="seen"&&r.jsxs(r.Fragment,{children:[((ce=G.User)==null?void 0:ce.name)&&r.jsx("span",{className:"doctor-name-display",children:G.User.name}),r.jsx("span",{className:"text-gray-400 italic text-xs",children:"Done"})]}),G.status==="cancelled"&&r.jsx("span",{className:"text-red-500 italic text-xs",children:"Cancelled"})]})})]},G.id)})})]})})]}),t==="lab"&&r.jsxs("div",{className:"lab-tab-content",children:[" ",r.jsx(xW,{currentUser:e}),r.jsxs("button",{onClick:()=>F("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[r.jsx(Wn,{size:16}),"Search Lab Reports"]})]}),t==="newtons-ai"&&r.jsx("div",{className:"newtons-ai-tab-content",children:r.jsx(Ev,{})}),t==="manage-admission"&&r.jsx("div",{className:"manage-admission-tab-content",children:r.jsx(fI,{})}),t==="all-patients"&&r.jsx("div",{className:"all-patients-tab-content",children:r.jsx(tD,{})}),t==="custom-bill"&&r.jsx("div",{className:"custom-bill-tab-content",children:r.jsx(yW,{})}),t==="motion-detect"&&r.jsx("div",{className:"motion-detect-tab-content",style:{height:"100%"},children:r.jsx(rRe,{})})]})})," "]})},vW=6048e5,sRe=864e5,bW=6e4,jW=36e5,mz=Symbol.for("constructDateFrom");function Bo(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&mz in e?e[mz](t):e instanceof Date?new e.constructor(t):new Date(t)}function fa(e,t){return Bo(t||e,e)}function oRe(e,t,n){const i=fa(e,n==null?void 0:n.in);if(isNaN(t))return Bo(e,NaN);const a=i.getDate(),s=Bo(e,i.getTime());s.setMonth(i.getMonth()+t+1,0);const o=s.getDate();return a>=o?s:(i.setFullYear(s.getFullYear(),s.getMonth(),a),i)}let lRe={};function d_(){return lRe}function Ob(e,t){var l,c,u,f;const n=d_(),i=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=fa(e,t==null?void 0:t.in),s=a.getDay(),o=(s<i?7:0)+s-i;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function XS(e,t){return Ob(e,{...t,weekStartsOn:1})}function wW(e,t){const n=fa(e,t==null?void 0:t.in),i=n.getFullYear(),a=Bo(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const s=XS(a),o=Bo(n,0);o.setFullYear(i,0,4),o.setHours(0,0,0,0);const l=XS(o);return n.getTime()>=s.getTime()?i+1:n.getTime()>=l.getTime()?i:i-1}function gz(e){const t=fa(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function cRe(e,...t){const n=Bo.bind(null,t.find(i=>typeof i=="object"));return t.map(n)}function yz(e,t){const n=fa(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function uRe(e,t,n){const[i,a]=cRe(n==null?void 0:n.in,e,t),s=yz(i),o=yz(a),l=+s-gz(s),c=+o-gz(o);return Math.round((l-c)/sRe)}function dRe(e,t){const n=wW(e,t),i=Bo(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),XS(i)}function hRe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function nD(e){return!(!hRe(e)&&typeof e!="number"||isNaN(+fa(e)))}function fRe(e,t){const n=fa(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const pRe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mRe=(e,t,n)=>{let i;const a=pRe[e];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function fk(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const gRe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yRe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xRe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vRe={date:fk({formats:gRe,defaultWidth:"full"}),time:fk({formats:yRe,defaultWidth:"full"}),dateTime:fk({formats:xRe,defaultWidth:"full"})},bRe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jRe=(e,t,n,i)=>bRe[e];function vv(e){return(t,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let a;if(i==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const wRe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},SRe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},NRe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_Re={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},CRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},TRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ARe=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ERe={ordinalNumber:ARe,era:vv({values:wRe,defaultWidth:"wide"}),quarter:vv({values:SRe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:vv({values:NRe,defaultWidth:"wide"}),day:vv({values:_Re,defaultWidth:"wide"}),dayPeriod:vv({values:CRe,defaultWidth:"wide",formattingValues:TRe,defaultFormattingWidth:"wide"})};function bv(e){return(t,n={})=>{const i=n.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?PRe(l,p=>p.test(o)):kRe(l,p=>p.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function kRe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function PRe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function ORe(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const a=i[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const DRe=/^(\d+)(th|st|nd|rd)?/i,MRe=/\d+/i,IRe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},RRe={any:[/^b/i,/^(a|c)/i]},LRe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FRe={any:[/1/i,/2/i,/3/i,/4/i]},$Re={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},BRe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zRe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qRe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},URe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},VRe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},HRe={ordinalNumber:ORe({matchPattern:DRe,parsePattern:MRe,valueCallback:e=>parseInt(e,10)}),era:bv({matchPatterns:IRe,defaultMatchWidth:"wide",parsePatterns:RRe,defaultParseWidth:"any"}),quarter:bv({matchPatterns:LRe,defaultMatchWidth:"wide",parsePatterns:FRe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:bv({matchPatterns:$Re,defaultMatchWidth:"wide",parsePatterns:BRe,defaultParseWidth:"any"}),day:bv({matchPatterns:zRe,defaultMatchWidth:"wide",parsePatterns:qRe,defaultParseWidth:"any"}),dayPeriod:bv({matchPatterns:URe,defaultMatchWidth:"any",parsePatterns:VRe,defaultParseWidth:"any"})},GRe={code:"en-US",formatDistance:mRe,formatLong:vRe,formatRelative:jRe,localize:ERe,match:HRe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function WRe(e,t){const n=fa(e,t==null?void 0:t.in);return uRe(n,fRe(n))+1}function KRe(e,t){const n=fa(e,t==null?void 0:t.in),i=+XS(n)-+dRe(n);return Math.round(i/vW)+1}function SW(e,t){var f,p,g,x;const n=fa(e,t==null?void 0:t.in),i=n.getFullYear(),a=d_(),s=(t==null?void 0:t.firstWeekContainsDate)??((p=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(g=a.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,o=Bo((t==null?void 0:t.in)||e,0);o.setFullYear(i+1,0,s),o.setHours(0,0,0,0);const l=Ob(o,t),c=Bo((t==null?void 0:t.in)||e,0);c.setFullYear(i,0,s),c.setHours(0,0,0,0);const u=Ob(c,t);return+n>=+l?i+1:+n>=+u?i:i-1}function YRe(e,t){var l,c,u,f;const n=d_(),i=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,a=SW(e,t),s=Bo((t==null?void 0:t.in)||e,0);return s.setFullYear(a,0,i),s.setHours(0,0,0,0),Ob(s,t)}function QRe(e,t){const n=fa(e,t==null?void 0:t.in),i=+Ob(n,t)-+YRe(n,t);return Math.round(i/vW)+1}function gr(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}const Yu={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return gr(t==="yy"?i%100:i,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):gr(n+1,2)},d(e,t){return gr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return gr(e.getHours()%12||12,t.length)},H(e,t){return gr(e.getHours(),t.length)},m(e,t){return gr(e.getMinutes(),t.length)},s(e,t){return gr(e.getSeconds(),t.length)},S(e,t){const n=t.length,i=e.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return gr(a,t.length)}},Dm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xz={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const i=e.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return Yu.y(e,t)},Y:function(e,t,n,i){const a=SW(e,i),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return gr(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):gr(s,t.length)},R:function(e,t){const n=wW(e);return gr(n,t.length)},u:function(e,t){const n=e.getFullYear();return gr(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return gr(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return gr(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return Yu.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return gr(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const a=QRe(e,i);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):gr(a,t.length)},I:function(e,t,n){const i=KRe(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):gr(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Yu.d(e,t)},D:function(e,t,n){const i=WRe(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):gr(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const a=e.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return gr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const a=e.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return gr(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return gr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let a;switch(i===12?a=Dm.noon:i===0?a=Dm.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let a;switch(i>=17?a=Dm.evening:i>=12?a=Dm.afternoon:i>=4?a=Dm.morning:a=Dm.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Yu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Yu.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):gr(i,t.length)},k:function(e,t,n){let i=e.getHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):gr(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Yu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Yu.s(e,t)},S:function(e,t){return Yu.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return bz(i);case"XXXX":case"XX":return Jh(i);case"XXXXX":case"XXX":default:return Jh(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return bz(i);case"xxxx":case"xx":return Jh(i);case"xxxxx":case"xxx":default:return Jh(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+vz(i,":");case"OOOO":default:return"GMT"+Jh(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+vz(i,":");case"zzzz":default:return"GMT"+Jh(i,":")}},t:function(e,t,n){const i=Math.trunc(+e/1e3);return gr(i,t.length)},T:function(e,t,n){return gr(+e,t.length)}};function vz(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),s=i%60;return s===0?n+String(a):n+String(a)+t+gr(s,2)}function bz(e,t){return e%60===0?(e>0?"-":"+")+gr(Math.abs(e)/60,2):Jh(e,t)}function Jh(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=gr(Math.trunc(i/60),2),s=gr(i%60,2);return n+a+t+s}const jz=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},NW=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},XRe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return jz(e,t);let s;switch(i){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",jz(i,t)).replace("{{time}}",NW(a,t))},JRe={p:NW,P:XRe},ZRe=/^D+$/,e4e=/^Y+$/,t4e=["D","DD","YY","YYYY"];function n4e(e){return ZRe.test(e)}function r4e(e){return e4e.test(e)}function i4e(e,t,n){const i=a4e(e,t,n);if(console.warn(i),t4e.includes(e))throw new RangeError(i)}function a4e(e,t,n){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const s4e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,o4e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,l4e=/^'([^]*?)'?$/,c4e=/''/g,u4e=/[a-zA-Z]/;function wf(e,t,n){var f,p,g,x;const i=d_(),a=i.locale??GRe,s=i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=i.weekStartsOn??((x=(g=i.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=fa(e,n==null?void 0:n.in);if(!nD(l))throw new RangeError("Invalid time value");let c=t.match(o4e).map(v=>{const j=v[0];if(j==="p"||j==="P"){const w=JRe[j];return w(v,a.formatLong)}return v}).join("").match(s4e).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const j=v[0];if(j==="'")return{isToken:!1,value:d4e(v)};if(xz[j])return{isToken:!0,value:v};if(j.match(u4e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(v=>{if(!v.isToken)return v.value;const j=v.value;(r4e(j)||n4e(j))&&i4e(j,t,String(e));const w=xz[j[0]];return w(l,j,a.localize,u)}).join("")}function d4e(e){const t=e.match(l4e);return t?t[1].replace(c4e,"'"):e}function pk(e,t){return+fa(e)<+fa(t)}function wz(e,t){const n=()=>Bo(t==null?void 0:t.in,NaN),a=m4e(e);let s;if(a.date){const u=g4e(a.date,2);s=y4e(u.restDateString,u.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,c;if(a.time&&(l=x4e(a.time),isNaN(l)))return n();if(a.timezone){if(c=v4e(a.timezone),isNaN(c))return n()}else{const u=new Date(o+l),f=fa(0,t==null?void 0:t.in);return f.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),f.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),f}return fa(o+l+c,t==null?void 0:t.in)}const lw={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},h4e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,f4e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,p4e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m4e(e){const t={},n=e.split(lw.dateTimeDelimiter);let i;if(n.length>2)return t;if(/:/.test(n[0])?i=n[0]:(t.date=n[0],i=n[1],lw.timeZoneDelimiter.test(t.date)&&(t.date=e.split(lw.timeZoneDelimiter)[0],i=e.substr(t.date.length,e.length))),i){const a=lw.timezone.exec(i);a?(t.time=i.replace(a[1],""),t.timezone=a[1]):t.time=i}return t}function g4e(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(n);if(!i)return{year:NaN,restDateString:""};const a=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?a:s*100,restDateString:e.slice((i[1]||i[2]).length)}}function y4e(e,t){if(t===null)return new Date(NaN);const n=e.match(h4e);if(!n)return new Date(NaN);const i=!!n[4],a=jv(n[1]),s=jv(n[2])-1,o=jv(n[3]),l=jv(n[4]),c=jv(n[5])-1;if(i)return N4e(t,l,c)?b4e(t,l,c):new Date(NaN);{const u=new Date(0);return!w4e(t,s,o)||!S4e(t,a)?new Date(NaN):(u.setUTCFullYear(t,s,Math.max(a,o)),u)}}function jv(e){return e?parseInt(e):1}function x4e(e){const t=e.match(f4e);if(!t)return NaN;const n=mk(t[1]),i=mk(t[2]),a=mk(t[3]);return _4e(n,i,a)?n*jW+i*bW+a*1e3:NaN}function mk(e){return e&&parseFloat(e.replace(",","."))||0}function v4e(e){if(e==="Z")return 0;const t=e.match(p4e);if(!t)return 0;const n=t[1]==="+"?-1:1,i=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return C4e(i,a)?n*(i*jW+a*bW):NaN}function b4e(e,t,n){const i=new Date(0);i.setUTCFullYear(e,0,4);const a=i.getUTCDay()||7,s=(t-1)*7+n+1-a;return i.setUTCDate(i.getUTCDate()+s),i}const j4e=[31,null,31,30,31,30,31,31,30,31,30,31];function _W(e){return e%400===0||e%4===0&&e%100!==0}function w4e(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(j4e[t]||(_W(e)?29:28))}function S4e(e,t){return t>=1&&t<=(_W(e)?366:365)}function N4e(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function _4e(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function C4e(e,t){return t>=0&&t<=59}const mI=({isEmbedded:e=!1})=>{const{customColumnsConfig:t,refetch:n}=EN(),i=t.lab_tests||[],[a,s]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState([]),[f,p]=b.useState(""),[g,x]=b.useState(!1),[v,j]=b.useState(null),[w,_]=b.useState(!1),[T,C]=b.useState(null),O=b.useRef(null),[A,P]=b.useState(!1),[I,F]=b.useState(null),[B,$]=b.useState(!1),[L,V]=b.useState(!1),[H,te]=b.useState(null),[X,q]=b.useState({name:"",description:"",price:"",default_parameters:[]}),W=b.useCallback(async()=>{x(!0),j(null),C(null),F(null);try{const Q=await ue("/api/lab-tests");if(!Q.ok)throw new Error(`HTTP error! status: ${Q.status}`);const ie=await Q.json();u(ie)}catch(Q){console.error("Error fetching lab tests:",Q),j(Q.message||"Failed to fetch lab tests.")}finally{x(!1)}},[]);b.useEffect(()=>{W()},[W]);const ae=Q=>{const{name:ie,value:ge}=Q.target;q(ee=>({...ee,[ie]:ge}))},G=(Q,ie,ge)=>{const ee=[...X.default_parameters],we=ee[Q];if(ie==="type")switch(we.type=ge,ge){case"number":we.defaultValue=0,we.lower_limit=null,we.upper_limit=null,we.unit="";break;case"boolean":we.defaultValue=!1,we.lower_limit=void 0,we.upper_limit=void 0,we.unit=void 0;break;case"string":default:we.defaultValue="",we.lower_limit=void 0,we.upper_limit=void 0,we.unit=void 0;break}else ie==="defaultValue"?we.type==="number"?we.defaultValue=parseFloat(ge)||0:(we.type,we.defaultValue=ge):ie==="lower_limit"||ie==="upper_limit"?we[ie]=ge===""?null:parseFloat(ge):we[ie]=ge;q(Ue=>({...Ue,default_parameters:ee}))},z=()=>{q(Q=>({...Q,default_parameters:[...Q.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},le=Q=>{q(ie=>({...ie,default_parameters:ie.default_parameters.filter((ge,ee)=>ee!==Q)}))},je=async Q=>{Q.preventDefault(),x(!0),j(null);const ie=H!==null,ge=ie?`/api/lab-tests/${H}`:"/api/lab-tests",ee=ie?"PUT":"POST";try{const we=await ue(ge,{method:ee,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:X.name,description:X.description,price:parseFloat(X.price),default_parameters:X.default_parameters})});if(!we.ok){const Ue=await we.json();throw new Error(Ue.message||`HTTP error! status: ${we.status}`)}V(!1),te(null),q({name:"",description:"",price:"",default_parameters:[]}),W()}catch(we){console.error(`Error ${ie?"updating":"adding"} lab test:`,we),j(we.message||`Failed to ${ie?"update":"add"} lab test.`)}finally{x(!1)}},Y=()=>{te(null),q({name:"",description:"",price:"",default_parameters:[]}),V(!0)},Oe=Q=>{if(H===Q.id)te(null);else{te(Q.id);const ie=(Q.default_parameters||[]).map(ge=>({...ge,unit:ge.unit||"",lower_limit:ge.lower_limit===void 0?null:ge.lower_limit,upper_limit:ge.upper_limit===void 0?null:ge.upper_limit}));q({name:Q.name,description:Q.description||"",price:Q.price,default_parameters:ie}),V(!1)}},Ke=async Q=>{if(window.confirm("Are you sure you want to delete this lab test?")){x(!0),j(null);try{const ie=await ue(`/api/lab-tests/${Q}`,{method:"DELETE"});if(!ie.ok){const ge=await ie.json();throw new Error(ge.message||`HTTP error! status: ${ie.status}`)}W()}catch(ie){console.error("Error deleting lab test:",ie),j(ie.message||"Failed to delete lab test.")}finally{x(!1)}}},Me=()=>{V(!1),te(null),j(null),q({name:"",description:"",price:"",default_parameters:[]})},Ie=async Q=>{if(!Q){C("No file selected.");return}_(!0),C(null),j(null);const ie=new FormData;ie.append("file",Q);try{const ge=await ue("/api/lab-tests/import",{method:"POST",body:ie});if(!ge.ok){const ee=await ge.json();throw new Error(ee.message||`Import failed: ${ge.statusText}`)}W()}catch(ge){console.error("Error importing lab tests from Excel:",ge),C(ge.message||"Failed to import lab tests from Excel.")}finally{_(!1)}},be=async Q=>{if(Q.target.files&&Q.target.files[0]){const ie=Q.target.files[0];await Ie(ie),Q.target&&(Q.target.value="")}},re=async()=>{if(window.confirm("Are you sure you want to import default biochemistry and pathology tests? This will add new tests and may duplicate existing ones if names match.")){P(!0),F(null),j(null);try{const Q=await ue("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"}});if(!Q.ok){const ie=await Q.json();throw new Error(ie.message||`Default import failed: ${Q.statusText}`)}W()}catch(Q){console.error("Error importing default lab tests:",Q),F(Q.message||"Failed to import default lab tests.")}finally{P(!1)}}},ve=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){$(!0),j(null),C(null),F(null);try{const Q=await ue("/api/lab-tests/all",{method:"DELETE"});if(!Q.ok){const ie=await Q.json();throw new Error(ie.message||`Delete all failed: ${Q.statusText}`)}W()}catch(Q){console.error("Error deleting all lab tests:",Q),j(Q.message||"Failed to delete all lab tests.")}finally{$(!1)}}},ce=g||w||A||B,fe=b.useMemo(()=>new so(c,{keys:["name","description","default_parameters.name"],threshold:.3,ignoreLocation:!0}),[c]),se=b.useMemo(()=>f?fe.search(f).map(Q=>Q.item):c,[c,f,fe]);return r.jsxs("div",{className:`lab-inventory-card ${e?"embedded":""}`,style:e?{border:"none",boxShadow:"none",padding:0}:{},children:[!e&&r.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),r.jsx("div",{className:"mb-4",style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:r.jsx("input",{type:"text",placeholder:"Search by test name...",value:f,onChange:Q=>p(Q.target.value),className:"lab-inventory-input",style:{maxWidth:"300px",marginRight:"10px"}})}),r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:Y,className:"lab-inventory-button",disabled:ce,children:"Add New Test"}),r.jsx("button",{onClick:()=>{var Q;return(Q=O.current)==null?void 0:Q.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:ce,children:w?"Importing...":"Import from Excel"}),r.jsx("input",{type:"file",ref:O,onChange:be,accept:".xlsx, .xls",style:{display:"none"},disabled:w}),r.jsx("button",{onClick:re,className:"lab-inventory-button lab-inventory-button-secondary",disabled:ce,children:A?"Importing Defaults...":"Import Default Tests"}),r.jsx("button",{onClick:ve,className:"lab-inventory-button lab-inventory-button-danger",disabled:ce,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:B?"Deleting All...":"Delete All Tests"}),r.jsxs("button",{onClick:()=>s(!0),className:"lab-inventory-button lab-inventory-button-secondary",disabled:ce,title:"Manage Custom Columns",children:[r.jsx(md,{size:16,style:{marginRight:"4px"}})," Columns"]}),r.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"auto"},children:[r.jsxs("button",{onClick:()=>l(!1),className:`view-mode-btn ${o?"":"active"}`,title:"List View",children:[r.jsx(Ub,{size:18})," List"]}),r.jsxs("button",{onClick:()=>l(!0),className:`view-mode-btn ${o?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(Cf,{size:18})," Excel"]})]})]}),v&&r.jsx("div",{className:"error-text mb-4",children:v}),T&&r.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",T]}),I&&r.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",I]}),L&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:X.name,onChange:ae,className:"lab-inventory-input",required:!0,disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:X.description,onChange:ae,rows:3,className:"lab-inventory-input",disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:X.price,onChange:ae,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),X.default_parameters.map((Q,ie)=>{var ge,ee;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:Q.name,onChange:we=>G(ie,"name",we.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:Q.type,onChange:we=>G(ie,"type",we.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),Q.type==="boolean"?r.jsxs("select",{value:Q.defaultValue.toString(),onChange:we=>G(ie,"defaultValue",we.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:Q.type==="number"?"number":"text",placeholder:"Default Value",value:Q.defaultValue.toString(),onChange:we=>G(ie,"defaultValue",we.target.value),className:"lab-inventory-input"}),Q.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:Q.lower_limit===null?"":((ge=Q.lower_limit)==null?void 0:ge.toString())??"",onChange:we=>G(ie,"lower_limit",we.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:Q.upper_limit===null?"":((ee=Q.upper_limit)==null?void 0:ee.toString())??"",onChange:we=>G(ie,"upper_limit",we.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:Q.unit||"",onChange:we=>G(ie,"unit",we.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>le(ie),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},ie)}),r.jsx("button",{type:"button",onClick:z,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Me,className:"lab-inventory-button lab-inventory-button-secondary",disabled:ce,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:ce,children:g?"Saving...":"Add Test"})]})]})]}),ce&&!L?r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"mb-4 flex gap-2",children:[1,2,3,4,5].map(Q=>r.jsx(Z,{width:100,height:36},Q))}),r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"}),r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(Q=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:"60%",height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:"90%",height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:50,height:20})]})})]},Q))})]}),r.jsx("p",{className:"loading-text mt-2 text-sm italic text-gray-500",children:w?"Importing Excel data...":A?"Importing default data...":"Loading tests..."})]}):null,!ce&&se.length===0&&!v&&!T&&!I&&r.jsx("p",{className:"no-data-message",children:f?`No lab tests found matching "${f}".`:"No lab tests found. Add one or import from Excel to get started."}),o&&se.length>0?r.jsx(Jb,{columns:[{key:"name",label:"Test Name",editable:!0,type:"text"},{key:"description",label:"Description",editable:!0,type:"text"},{key:"price",label:"Price",editable:!0,type:"number"}],data:se,editable:!0,showRowNumbers:!0,title:"Lab Test Inventory",onSave:async Q=>{const ie=Q.map(async ge=>{const ee=c.find(we=>we.id===ge.id);if(ee&&(ee.name!==ge.name||ee.price!==ge.price||ee.description!==ge.description))return ue(`/api/lab-tests/${ge.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)})});try{await Promise.all(ie),W()}catch(ge){alert("Error saving changes"),console.error(ge)}}}):!ce&&se.length>0&&r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:se.map(Q=>{const ie=H===Q.id,ge=Q.price&&typeof Q.price=="string"?parseFloat(Q.price):NaN,ee=isNaN(ge)?"0.00":ge.toFixed(2);return r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{onClick:()=>Oe(Q),style:{cursor:"pointer"},children:[r.jsx("td",{children:Q.name}),r.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:Q.description||"-"}),r.jsxs("td",{children:["",ee]}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{onClick:we=>{we.stopPropagation(),Oe(Q)},className:"lab-inventory-link",disabled:ce,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),r.jsx("button",{onClick:we=>{we.stopPropagation(),Ke(Q.id)},className:"lab-inventory-link",disabled:ce,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),i.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:i.map(we=>{var Ue;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[we.label,":"]})," ",(Ue=Q.custom_fields)!=null&&Ue[we.key]?String(Q.custom_fields[we.key]):"-"]},we.key)})})})}),ie&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:X.name,onChange:ae,className:"lab-inventory-input",required:!0,disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:X.description,onChange:ae,rows:3,className:"lab-inventory-input",disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:X.price,onChange:ae,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),X.default_parameters.map((we,Ue)=>{var Ge,Le;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:we.name,onChange:oe=>G(Ue,"name",oe.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:we.type,onChange:oe=>G(Ue,"type",oe.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),we.type==="boolean"?r.jsxs("select",{value:we.defaultValue.toString(),onChange:oe=>G(Ue,"defaultValue",oe.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:we.type==="number"?"number":"text",placeholder:"Default Value",value:we.defaultValue.toString(),onChange:oe=>G(Ue,"defaultValue",oe.target.value),className:"lab-inventory-input"}),we.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:we.lower_limit===null?"":((Ge=we.lower_limit)==null?void 0:Ge.toString())??"",onChange:oe=>G(Ue,"lower_limit",oe.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:we.upper_limit===null?"":((Le=we.upper_limit)==null?void 0:Le.toString())??"",onChange:oe=>G(Ue,"upper_limit",oe.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:we.unit||"",onChange:oe=>G(Ue,"unit",oe.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>le(Ue),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},Ue)}),r.jsx("button",{type:"button",onClick:z,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Me,className:"lab-inventory-button lab-inventory-button-secondary",disabled:ce,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:ce,children:g?"Saving...":"Update Test"})]})]})]})})})]},Q.id)})})]})]}),r.jsx(pI,{isOpen:a,onClose:()=>s(!1),entityType:"lab_tests",entityLabel:"Lab Tests",currentConfig:t,onConfigUpdated:()=>{n()}})]})},T4e=e=>{let t="";if(!e.report_content)return"No report content available.";t+=`*Report Date:* ${e.report_date?new Date(e.report_date).toLocaleDateString():"N/A"}

`;try{const n=JSON.parse(e.report_content);typeof n=="object"&&n!==null&&e.tests?e.tests.forEach((i,a)=>{t+=`*Test: ${i.name}*
`,n[i.id]?Object.entries(n[i.id]).forEach(([s,o])=>{var f;const l=(f=i.default_parameters)==null?void 0:f.find(p=>p.name===s);let c=String(o),u="";if(l){const p=l.unit?` _${l.unit}_`:"";if(l.type==="boolean"){const g=o===!0||o==="true";c=g?"*Reactive*":"Non-Reactive",g||(u="`Normal: Non-Reactive`")}else if(l.type==="number"){const g=typeof o=="string"?parseFloat(o):typeof o=="number"?o:NaN;if(l.lower_limit!=null||l.upper_limit!=null){let x=[];l.lower_limit!=null&&x.push(`${l.lower_limit}`),l.upper_limit!=null&&x.push(`${l.upper_limit}`),u=`\`Normal: ${x.join(" - ")}\`${p}`,!isNaN(g)&&(l.lower_limit!=null&&g<l.lower_limit||l.upper_limit!=null&&g>l.upper_limit)&&(c=`*${c}*`)}}l.unit&&(c+=p)}t+=`${s}: ${c}
`,u&&((l==null?void 0:l.type)==="boolean"&&(o===!0||o==="true")||(t+=`${u}
`))}):t+=`_No parameters reported for this test._
`,a<e.tests.length-1&&(t+=`
`)}):t+=e.report_content}catch{t+=e.report_content}return t},gI=e=>{var o;if(!((o=e==null?void 0:e.Patient)!=null&&o.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(e!=null&&e.report_content)){alert("Cannot share report: No report content is available to share.");return}const t=e.Patient.name||"Patient",n=T4e(e),i=`Hello ${t},

Your lab report is ready.

${n}`,s=`https://wa.me/${A4e(e.Patient.phone)}?text=${encodeURIComponent(i)}`;window.open(s,"_blank")},A4e=e=>{let t=e.replace(/\D/g,"");const n=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,i=t.match(n);return i?t="91"+i[1]:t.startsWith("91")||(t="91"+t),t},Sz=()=>{const[e,t]=b.useState([]),[n,i]=b.useState(""),[a,s]=b.useState(!0),[o,l]=b.useState(!0),[c,u]=b.useState(null),[f,p]=b.useState("orders"),[g,x]=b.useState(1),[v]=b.useState(20),[j,w]=b.useState(0),_=b.useMemo(()=>Math.ceil(j/v),[j,v]),T=b.useCallback(async(L=1,V="")=>{s(!0),u(null);try{const H=new URLSearchParams({page:String(L),limit:String(v)});V&&H.append("search",V);const te=await ue(`/api/lab?${H.toString()}`);if(!te.ok)throw new Error(`HTTP error! status: ${te.status}`);const X=await te.json(),q=X.orders.map(W=>{var ae,G;return{id:W.id,labTokenNumber:String(W.lab_token_number??"N/A"),patientName:((ae=W.Patient)==null?void 0:ae.name)||"N/A",patientId:W.patient_id,patientTokenNumber:String(((G=W.Patient)==null?void 0:G.patient_token_number)??"N/A"),tests:(W.tests||[]).map(z=>z.name||"Unknown Test"),date:wf(new Date(W.createdAt),"yyyy-MM-dd"),status:W.status,reportId:W.reportId,billId:W.billId}});t(q),w(X.totalCount),x(L)}catch(H){console.error("Failed to fetch lab orders:",H),u(H instanceof Error?H.message:"An unknown error occurred"),t([]),w(0)}finally{s(!1),l(!1)}},[v]);b.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${g}, Search term: "${n}"`),n.length===0||n.length>=2?(console.log(`Condition met (length ${n.length}). Fetching orders...`),T(g,n)):console.log(`Condition not met (length ${n.length}). Not fetching.`)},[T,g,n]),b.useEffect(()=>{const L=setTimeout(()=>{n.length>=2?g!==1&&x(1):n.length<2&&g!==1&&x(1)},1e3);return()=>{clearTimeout(L)}},[n]);const C=async(L,V)=>{console.log(`Updating order ${L} to status ${V}`);try{const H=await ue(`/api/lab/${L}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:V})});if(!H.ok){const te=await H.json();throw new Error(te.message||`Failed to update status: ${H.status}`)}if(V==="completed"){const te=await ue(`/api/lab/orders/${L}/report`);if(te.ok){const X=await te.json();gI(X)}}await T(g,n),console.log(`Order ${L} status updated to ${V}, refetching page ${g}`)}catch(H){console.error("Error updating status:",H),alert(`Failed to update status: ${H instanceof Error?H.message:"Unknown error"}`)}},{openCommandBar:O}=$c(),A=It(),P=L=>{if(!L){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}L.billId?(console.log(`Navigating to existing bill for Bill ID: ${L.billId}, Patient: ${L.patientName}`),A("/billing",{state:{billId:L.billId,patientId:L.patientId,patientName:L.patientName,billType:"lab"}})):(console.log(`Navigating to LabBillingPage for Order ID: ${L.id}`),A(`/dashboard/lab-billing/${L.id}`))},I=L=>{L&&L.id?A(`/lab/report/${L.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},F=L=>{switch(L){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:L,className:"status-badge"}}};if(a&&o)return r.jsxs("div",{className:"admin-panel-container",children:[r.jsx("div",{className:"admin-nav-bar",children:[1,2,3,4].map(L=>r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px",margin:"0 8px"}},L))}),r.jsxs("div",{className:"admin-content-section",style:{padding:"20px"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx(Z,{width:200,height:32}),r.jsx(Z,{width:300,height:40})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},L))})]})})]})]});if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[r.jsx(Zr,{size:48,className:"mb-4"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),r.jsx("p",{className:"mb-4",children:c}),r.jsx("button",{onClick:()=>T(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const B=()=>{g>1&&x(L=>L-1)},$=()=>{g<_&&x(L=>L+1)};return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("div",{className:"admin-nav-bar",children:[r.jsxs("button",{onClick:()=>A(-1),className:"admin-nav-button",title:"Back",children:[r.jsx(rn,{})," Back"]}),r.jsxs("button",{onClick:()=>p("orders"),className:`admin-nav-button ${f==="orders"?"active":""}`,children:[r.jsx(Kk,{})," Orders"]}),r.jsx("button",{onClick:()=>A("/create-lab-order"),className:"admin-nav-button",children:"Create New Lab Order"}),r.jsxs("button",{onClick:()=>p("inventory"),className:`admin-nav-button ${f==="inventory"?"active":""}`,children:[r.jsx(BX,{})," Inventory"]}),r.jsxs("button",{onClick:()=>O(),className:"admin-nav-button",children:[r.jsx(jD,{})," Newton's AI"]})]}),r.jsx("div",{className:"admin-content-section",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[f==="orders"&&r.jsxs("div",{className:"lab-orders-view",children:[" ",r.jsxs("div",{className:"lab-orders-header-controls",children:[r.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),r.jsxs("div",{className:"lab-orders-search-container",children:[r.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:n,onChange:L=>i(L.target.value),className:"lab-inventory-input lab-orders-search-input"}),r.jsx(Wn,{size:18,className:"lab-orders-search-icon"})]})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient (Token)"}),r.jsx("th",{children:"Tests"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),r.jsxs("tbody",{children:[a&&!c&&e.length===0&&[1,2,3,4,5].map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},L)),!a&&!c&&e.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."})}),!a&&!c&&e.map(L=>{const V=F(L.status);return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:L.patientName}),r.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",L.patientTokenNumber]})]}),r.jsx("td",{children:L.tests.map((H,te)=>r.jsx("div",{children:H},te))}),r.jsx("td",{className:"hidden md:table-cell",children:L.date}),r.jsx("td",{children:r.jsx("span",{className:V.className,children:V.text})}),r.jsx("td",{children:r.jsxs("div",{className:"lab-table-actions",children:[L.status==="pending"&&r.jsx("button",{onClick:()=>P(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&r.jsx("button",{onClick:()=>C(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&r.jsx("button",{onClick:()=>C(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>I(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>C(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>{L.id?A(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},L.id)})]})]})}),r.jsxs("div",{className:"lab-orders-card-container",children:[a&&!c&&e.length===0&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(L=>r.jsx("div",{className:"lab-order-card",children:r.jsx(Z,{width:"100%",height:150})},L))}),!a&&!c&&e.length===0&&r.jsx("div",{className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."}),!a&&!c&&e.map(L=>{const V=F(L.status);return r.jsxs("div",{className:"lab-order-card",children:[r.jsxs("div",{className:"lab-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lab-card-patient-name",children:L.patientName}),r.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",L.patientTokenNumber]}),r.jsx("div",{className:"lab-card-date",children:L.date})]}),r.jsx("span",{className:`${V.className} lab-card-status-pill`,children:V.text})]}),r.jsxs("div",{className:"lab-card-section",children:[r.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),L.tests.map((H,te)=>r.jsx("div",{className:"lab-card-test-item",children:H},te)),L.tests.length===0&&r.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),r.jsxs("div",{className:"lab-card-actions",children:[L.status==="pending"&&r.jsx("button",{onClick:()=>P(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&r.jsx("button",{onClick:()=>C(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&r.jsx("button",{onClick:()=>C(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>I(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>C(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>{L.id?A(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},L.id)})]}),!a&&j>0&&r.jsxs("div",{className:"lab-pagination-controls",children:[r.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",r.jsx("strong",{children:(g-1)*v+1})," ","to"," ",r.jsx("strong",{children:Math.min(g*v,j)})," ","of"," ",r.jsx("strong",{children:j})," ","results"]}),r.jsxs("div",{className:"lab-pagination-buttons",children:[r.jsx("button",{onClick:B,disabled:g===1,className:"lab-pagination-button","aria-label":"Previous page",children:r.jsx(zb,{size:18})}),r.jsxs("span",{children:["Page ",g," of ",_]}),r.jsx("button",{onClick:$,disabled:g===_,className:"lab-pagination-button","aria-label":"Next page",children:r.jsx(vd,{size:18})})]})]})]}),f==="inventory"&&r.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",r.jsx(mI,{})]})]})})," "]})},Nz=()=>{const[e,t]=b.useState([]),[n,i]=b.useState(""),[a,s]=b.useState(!0),[o,l]=b.useState(null),c=It(),u=b.useRef(null),{openCommandBar:f}=$c(),p=us(),g=F=>{F&&(p.prefetchQuery({queryKey:Vt.patients.context(F),queryFn:async()=>{const B=await ue(`/api/patients/${F}/context`);if(!B.ok)throw new Error("Failed to fetch patient context");return B.json()},staleTime:5*60*1e3}),p.prefetchQuery({queryKey:Vt.patientDebts.balance(F),queryFn:async()=>{const B=await ue(`/api/patient-debts/${F}/balance`);return B.ok?B.json():{netDebt:0}},staleTime:1*60*1e3}),p.prefetchQuery({queryKey:Vt.queue.latest(F),queryFn:async()=>{const B=await ue(`/api/queue/patient/${F}/latest`);if(!B.ok)throw new Error("Failed to fetch latest queue status");const $=await B.json();return $!=null&&$._id&&p.prefetchQuery({queryKey:Vt.queue.entry($._id),queryFn:async()=>{const L=await ue(`/api/queue/doctor/complaint/${$._id}`);if(!L.ok)throw new Error("Failed to fetch complaint record");return L.json()},staleTime:1*60*1e3}),$},staleTime:5e3}),p.prefetchQuery({queryKey:Vt.dental.records(F),queryFn:async()=>{const B=await ue(`/api/dental/patient/${F}`);if(!B.ok)throw new Error("Failed to fetch dental records");return B.json()},staleTime:5*60*1e3}))},[x,v]=b.useState(1),[j,w]=b.useState(1),_=10,T=b.useCallback(async(F,B,$)=>{s(!0),l(null);try{let L=`/api/pharmacy-orders?page=${F}&limit=${B}`;$&&$.trim()!==""&&(L+=`&search=${encodeURIComponent($.trim())}`);const V=await ue(L);if(!V.ok)throw new Error(`Failed to fetch orders: ${V.statusText} (${V.status})`);const H=await V.json();H&&Array.isArray(H.orders)?(t(H.orders),w(H.totalPages||1),v(H.currentPage||F)):t([])}catch(L){console.error("Failed to fetch pharmacy orders:",L),l(L.message||"Failed to fetch orders."),t([])}finally{s(!1)}},[]);b.useEffect(()=>(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{T(n?1:x,_,n)},500),()=>{u.current&&clearTimeout(u.current)}),[n,x,T]);const C=F=>c(`/dashboard/edit-pharmacy-order/${F}`),O=F=>c(`/dashboard/edit-complaint/patient/${F.patientId}`),A=F=>{const B=e.find($=>$.id===F);if(B){const $=B.medications.map(L=>({name:L.name,pack_quantity:L.pack_quantity,loose_quantity:L.loose_quantity,price:L.price??0,pack_price:L.pack_price,loose_price:L.loose_price,total_price:L.total_price,isLoose:L.isLoose,unit:L.unit,drug_id:L.drug_id?String(L.drug_id):null,tabletsPerDay:L.tabletsPerDay,numberOfDays:L.numberOfDays,directions_to_use:L.directions_to_use,discount_percentage:0,batch:L.batch,expiry_date:L.expiry_date}));c(`/dashboard/pharmacy-billing/${F}`,{state:{initialItems:$}})}},P=async(F,B)=>{const $=e.find(L=>L.id===F);if($)try{const L=await ue(`/api/pharmacy-orders/${F}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:B,medications:$.medications})});if(L.ok){const V=await L.json();t(H=>H.map(te=>te.id===V.id?{...te,status:V.status}:te))}}catch(L){console.error("Status update failed",L),alert("Failed to update status")}},I=F=>`pq-pill ${F}`;return r.jsxs("div",{className:"pq-container",children:[r.jsxs("div",{className:"pq-header",children:[r.jsxs("div",{className:"pq-nav-actions",children:[r.jsxs("button",{onClick:()=>c("/dashboard/add-order"),className:"pq-btn",children:[r.jsx(ks,{})," Add Order"]}),r.jsxs("button",{onClick:()=>c("/dashboard/inventory"),className:"pq-btn",children:[r.jsx(Tf,{})," Inventory"]}),r.jsxs("button",{onClick:()=>f(),className:"pq-btn",children:[r.jsx(jD,{})," Newton's AI"]}),r.jsxs("button",{onClick:()=>c("/dashboard/distributors"),className:"pq-btn",children:[r.jsx(Tf,{})," Distributors"]})]}),r.jsxs("div",{className:"pq-search-wrap",children:[r.jsx(Wn,{className:"pq-search-icon"}),r.jsx("input",{className:"pq-search-input",placeholder:"Search orders...",value:n,onChange:F=>i(F.target.value)})]})]}),r.jsxs("div",{className:"pq-card",children:[r.jsxs("div",{className:"pq-card-content",children:[a&&e.length===0&&r.jsx("div",{className:"p-4 space-y-2",children:[1,2,3].map(F=>r.jsx(Z,{height:40,className:"mb-2"},F))}),o&&r.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]}),!a&&!o&&e.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."}),!a&&e.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pq-table-wrapper",children:r.jsxs("table",{className:"pq-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(F=>r.jsxs("tr",{className:"pq-row",onClick:()=>O(F),onMouseEnter:()=>g(F.patientId),children:[r.jsxs("td",{children:[r.jsx("div",{className:"pq-text-bold",children:F.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",F.patientTokenNumber]})]}),r.jsx("td",{children:r.jsxs("div",{className:"pq-nested-table-wrap",children:[r.jsx("table",{className:"pq-nested-table",children:r.jsx("tbody",{children:F.medications.map((B,$)=>r.jsxs("tr",{children:[r.jsx("td",{className:"pq-text-bold",children:B.name}),r.jsxs("td",{children:[B.pack_quantity>0&&`Pack: ${B.pack_quantity} `,B.loose_quantity>0&&`Loose: ${B.loose_quantity}`]}),r.jsx("td",{className:"pq-text-sm",children:B.directions_to_use})]},$))})}),F.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"mt-1 text-xs opacity-75 pq-markdown",children:[r.jsx("strong",{children:"Note:"})," ",r.jsx(Ef,{remarkPlugins:[kf],children:F.prescriptionForUnavailableDrugs})]})]})}),r.jsx("td",{className:"pq-text-sm",children:new Date(F.date).toLocaleDateString()}),r.jsxs("td",{className:"pq-text-mono pq-text-bold",children:["",Number(F.order_total||0).toFixed(2)]}),r.jsx("td",{children:r.jsx("span",{className:I(F.status),children:F.status})}),r.jsx("td",{children:r.jsxs("div",{className:"pq-actions",children:[F.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:B=>{B.stopPropagation(),C(F.id)},className:"pq-action-btn pq-btn-edit",children:[r.jsx($a,{size:12})," Edit"]}),r.jsxs("button",{onClick:B=>{B.stopPropagation(),A(F.id)},className:"pq-action-btn pq-btn-bill",children:[r.jsx(_f,{size:12})," Bill"]})]}),F.status==="billed"&&r.jsxs("button",{onClick:B=>{B.stopPropagation(),P(F.id,"dispensed")},className:"pq-action-btn pq-btn-dispense",children:[r.jsx(Bl,{size:12})," Dispense"]}),(F.status==="pending"||F.status==="billed")&&r.jsx("button",{onClick:B=>{B.stopPropagation(),P(F.id,"cancelled")},className:"pq-action-btn pq-btn-cancel",children:"Cancel"}),r.jsx("button",{onClick:B=>{B.stopPropagation(),O(F)},onMouseEnter:()=>g(F.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})]})})]},F.id))})]})}),r.jsx("div",{className:"pq-card-list",children:e.map(F=>r.jsxs("div",{className:"pq-mobile-card",onClick:()=>O(F),onMouseEnter:()=>g(F.patientId),children:[r.jsxs("div",{className:"pq-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"pq-text-bold",children:F.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",F.patientTokenNumber]})]}),r.jsx("span",{className:I(F.status),children:F.status})]}),r.jsx("div",{className:"mb-2",children:F.medications.slice(0,3).map((B,$)=>r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[B.name," (",B.pack_quantity>0?`${B.pack_quantity}p`:""," ",B.loose_quantity>0?`${B.loose_quantity}l`:"",")"]},$))}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("div",{className:"pq-text-mono pq-text-bold",children:["",Number(F.order_total||0).toFixed(2)]}),r.jsx("div",{className:"pq-actions",children:r.jsx("button",{onClick:B=>{B.stopPropagation(),O(F)},onMouseEnter:()=>g(F.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})})]})]},F.id))})]})]}),!a&&j>1&&r.jsxs("div",{className:"pq-footer px-4 pb-4",children:[r.jsxs("div",{className:"pq-page-info",children:["Page ",x," of ",j]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"pq-pagination-btn",disabled:x===1,onClick:()=>v(F=>Math.max(1,F-1)),children:r.jsx(zb,{size:16})}),r.jsx("button",{className:"pq-pagination-btn",disabled:x===j,onClick:()=>v(F=>Math.min(j,F+1)),children:r.jsx(vd,{size:16})})]})]})]})]})},gk=10,E4e=3,CW=({isEmbedded:e=!1,initialSearch:t=""})=>{const n=It(),{customColumnsConfig:i,refetch:a}=EN(),s=i.drugs||[],[o,l]=b.useState(!1),[c,u]=b.useState(!1),[f,p]=b.useState([]),[g,x]=b.useState([]),[v,j]=b.useState(t),[w,_]=b.useState(!0),[T,C]=b.useState(null),[O,A]=b.useState(new Set),[P,I]=b.useState("all"),F=async()=>{try{const Ce=await ue("/api/inventory/download-csv");if(!Ce.ok)throw new Error(`Failed to download CSV: ${Ce.statusText}`);const ct=await Ce.blob(),At=window.URL.createObjectURL(ct),qe=document.createElement("a");qe.href=At,qe.download="pharmacy_inventory.csv",document.body.appendChild(qe),qe.click(),qe.remove(),window.URL.revokeObjectURL(At)}catch(Ce){console.error("Failed to download CSV:",Ce),C(Ce.message||"Failed to download inventory CSV. Please try again.")}},[B,$]=b.useState(!1),[L,V]=b.useState(!1),[H,te]=b.useState(null),[X,q]=b.useState(!1),[W,ae]=b.useState(new Set),[G,z]=b.useState(1),le=8,[je,Y]=b.useState(null),[Oe,Ke]=b.useState(0),[Me,Ie]=b.useState(!1),[be,re]=b.useState(null),[ve,ce]=b.useState(1),[fe,se]=b.useState(!1),Q=G*le,ie=Q-le,ge=g.slice(ie,Q),ee=Math.ceil(g.length/le);b.useEffect(()=>{z(1)},[v,P]);const we=b.useCallback(async()=>{_(!0),C(null);try{const Ce=await ue("/api/drugs");if(!Ce.ok)throw new Error(`Failed to fetch drugs: ${Ce.statusText} (${Ce.status})`);const ct=await Ce.json();let At=Array.isArray(ct)?ct:ct.drugs||[];At=At.map(qe=>({...qe,mrp:parseFloat(String(qe.mrp))||0,rate:qe.rate!==null&&qe.rate!==void 0?parseFloat(String(qe.rate)):null,stock:parseInt(String(qe.stock),10)||0,gst:qe.gst!==null&&qe.gst!==void 0?parseFloat(String(qe.gst)):null,margin:qe.margin!==null&&qe.margin!==void 0?parseFloat(String(qe.margin)):null,discount:qe.discount!==null&&qe.discount!==void 0?parseFloat(String(qe.discount)):null})),p(At),x(At)}catch(Ce){console.error("Failed to fetch drugs:",Ce),C(Ce.message||"Failed to load inventory. Please try again.")}finally{_(!1)}},[]);b.useEffect(()=>{we()},[we]),b.useEffect(()=>{t&&j(t)},[t]);const Ue=b.useMemo(()=>new so(f,{keys:["name","brand_name","description","supplier","box_number"],threshold:.3,ignoreLocation:!0}),[f]);b.useEffect(()=>{let Ce=f;v&&(Ce=Ue.search(v).map(qe=>qe.item));const ct=new Date,At=oRe(ct,E4e);P==="low-stock"?Ce=Ce.filter(qe=>qe.stock<=gk):P==="near-expiry"?Ce=Ce.filter(qe=>{if(!qe.expiry_date)return!1;const wt=wz(qe.expiry_date);return nD(wt)&&pk(wt,At)&&!pk(wt,ct)}):P==="expired"&&(Ce=Ce.filter(qe=>{if(!qe.expiry_date)return!1;const wt=wz(qe.expiry_date);return nD(wt)&&pk(wt,ct)})),x(Ce)},[v,f,P,Ue]);const Ge=()=>{$(!1),Y(null)},Le=Ce=>{Ke(parseInt(Ce.target.value,10)||0)},oe=async Ce=>{if(Ce.preventDefault(),C(null),!je||!je.id||Oe===0){C("No drug selected or adjustment amount is zero.");return}try{const ct=await ue(`/api/drugs/${je.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:Oe})});if(!ct.ok){const qe=await ct.json();throw new Error(qe.message||`Failed to adjust stock: ${ct.statusText}`)}const At=await ct.json();p(qe=>qe.map(wt=>wt.id===At.id?At:wt)),Ge()}catch(ct){console.error("Failed to adjust stock:",ct),C(ct.message||"Failed to adjust stock. Please try again.")}},_e=Ce=>{te(Ce),V(!0)},$e=()=>{V(!1),te(null)},ze=async()=>{if(!H||!H.id){C("No drug selected for deletion.");return}_(!0),C(null);try{const Ce=await ue(`/api/drugs/${H.id}`,{method:"DELETE"});if(!Ce.ok){const ct=await Ce.json();throw new Error(ct.message||`Failed to delete drug: ${Ce.statusText}`)}we(),$e()}catch(Ce){console.error("Failed to delete drug:",Ce),C(Ce.message||"Failed to delete drug. Please try again.")}finally{_(!1)}},K=()=>{q(!0)},ye=()=>{q(!1)},[pe,me]=b.useState(!1),Ne=()=>{W.size>0&&me(!0)},Be=()=>{me(!1)},ke=async()=>{if(W.size===0){C("No drugs selected for deletion.");return}_(!0),C(null);try{const Ce=await ue("/api/drugs/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugIds:Array.from(W)})});if(!Ce.ok){const ct=await Ce.json();throw new Error(ct.message||`Failed to delete selected drugs: ${Ce.statusText}`)}we(),ae(new Set),Be()}catch(Ce){console.error("Failed to delete selected drugs:",Ce),C(Ce.message||"Failed to delete selected drugs. Please try again.")}finally{_(!1)}},Ye=async()=>{_(!0),C(null);try{const Ce=await ue("/api/drugs/all",{method:"DELETE"});if(!Ce.ok){const ct=await Ce.json();throw new Error(ct.message||`Failed to delete all drugs: ${Ce.statusText}`)}we(),ye()}catch(Ce){console.error("Failed to delete all drugs:",Ce),C(Ce.message||"Failed to delete all drugs. Please try again.")}finally{_(!1)}},rt=Ce=>{if(!Ce)return null;const ct=Ce.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return ct?parseInt(ct[1],10):null},gt=Ce=>{re(Ce),ce(1),Ie(!0)},Pe=()=>{Ie(!1),re(null),ce(1)},Je=Ce=>{ce(parseInt(Ce.target.value,10)||0)},et=async Ce=>{if(Ce.preventDefault(),C(null),!be||!be.id||ve<=0){C("No drug selected or invalid number of packs to convert.");return}const ct=rt(be.pack);if(!ct||ct<=0){C(`Cannot convert "${be.name}" to loose. Invalid pack unit: ${be.pack||"N/A"}.`);return}if(ve>(be.stock??0)){C(`Cannot convert ${ve} packs. Only ${be.stock??0} packs are in stock.`);return}try{const At=await ue(`/api/drugs/${be.id}/convert-to-loose`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({packsToConvert:ve,packSize:ct})});if(!At.ok){const wt=await At.json();throw new Error(wt.message||`Failed to convert to loose: ${At.statusText}`)}const qe=await At.json();p(wt=>wt.map(Tt=>Tt.id===qe.id?qe:Tt)),Pe()}catch(At){console.error("Failed to convert to loose:",At),C(At.message||"Failed to convert to loose. Please try again.")}finally{_(!1)}},dt=()=>{se(!0)},Ct=()=>{se(!1)},bt=async()=>{_(!0),C(null);try{const Ce=await ue("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!Ce.ok){const ct=await Ce.json();throw new Error(ct.message||`Failed to add default medications: ${Ce.statusText}`)}we(),Ct()}catch(Ce){console.error("Failed to add default medications:",Ce),C(Ce.message||"Failed to add default medications. Please try again.")}finally{_(!1)}};return w?r.jsxs("div",{className:`pharmacy-inventory-page ${e?"embedded":""}`,style:e?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsx("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[1,2,3,4].map(Ce=>r.jsx(Z,{width:120,height:36},Ce))}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsx(Z,{width:100,height:36}),[1,2,3,4].map(Ce=>r.jsx(Z,{width:120,height:36},Ce))]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsx(Z,{width:"100%",height:40,style:{maxWidth:"600px"}}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx(Z,{width:20,height:20})}),r.jsx("th",{children:"DRUG DETAILS"}),r.jsx("th",{children:"PACK"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{className:"qty-header",children:"STOCK"}),r.jsx("th",{className:"mrp-header",children:"MRP"}),r.jsx("th",{className:"rate-header",children:"RATE"}),r.jsx("th",{children:"BOX"}),r.jsx("th",{children:"DISC %"}),r.jsx("th",{children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(Ce=>r.jsxs("tr",{children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx(Z,{width:20,height:20})}),r.jsxs("td",{children:[r.jsx(Z,{width:"80%",height:20}),r.jsx(Z,{width:"40%",height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsxs("td",{children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:60,height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{width:20,height:20}),r.jsx(Z,{width:20,height:20}),r.jsx(Z,{width:20,height:20})]})})]},Ce))})]})})]}):T?r.jsxs("div",{className:"error-indicator",children:["Error: ",T]}):r.jsxs("div",{className:`pharmacy-inventory-page ${e?"embedded":""}`,style:e?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsxs("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline add-drug-button",children:[r.jsx(ks,{size:18}),"Add New Drug"]}),r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline",children:[r.jsx(ks,{size:18}),"Purchase Page"]}),r.jsxs("button",{onClick:()=>n("/dashboard/distributors"),className:"action-button-outline",children:[r.jsx(ks,{size:18}),"Distributors"]}),r.jsxs("button",{onClick:()=>l(!0),className:"action-button-outline",title:"Manage Custom Columns",children:[r.jsx(md,{size:18}),"Columns"]})]}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>u(!1),className:`view-mode-btn ${c?"":"active"}`,title:"List View",children:[r.jsx(Ub,{size:18})," List"]}),r.jsxs("button",{onClick:()=>u(!0),className:`view-mode-btn ${c?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(Cf,{size:18})," Excel"]})]}),r.jsx("button",{onClick:F,className:"action-button-outline",children:"Download CSV"}),r.jsxs("button",{onClick:dt,className:"action-button-outline",children:[r.jsx(ks,{size:18}),"Import Defaults"]}),r.jsxs("button",{onClick:Ne,className:"action-button-outline delete-button-outline",disabled:W.size===0,children:[r.jsx(Yn,{size:18}),"Delete (",W.size,")"]}),r.jsxs("button",{onClick:K,className:"action-button-outline delete-all-button-outline",children:[r.jsx(Yn,{size:18}),"Delete All"]})]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsxs("div",{className:"search-input-wrapper",style:{maxWidth:"600px"},children:[r.jsx(Wn,{size:20,className:"search-input-icon"}),r.jsx("input",{type:"text",placeholder:"Search drugs...",value:v,onChange:Ce=>j(Ce.target.value),className:"inventory-search-input"})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("select",{value:P,onChange:Ce=>I(Ce.target.value),className:"inventory-filter-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})})]}),c?r.jsx("div",{className:"inventory-table-container",style:{padding:"1rem"},children:r.jsx(Jb,{title:"Pharmacy Inventory",columns:[{key:"name",label:"Drug Name",type:"text",editable:!0},{key:"brand_name",label:"Brand Name",type:"text",editable:!0},{key:"pack",label:"Pack",type:"text",editable:!0},{key:"expiry_date",label:"Expiry",type:"date",editable:!0},{key:"stock",label:"Stock",type:"number",editable:!0},{key:"mrp",label:"MRP",type:"number",editable:!0},{key:"rate",label:"Rate",type:"number",editable:!0},{key:"box_number",label:"Box",type:"text",editable:!0},{key:"discount",label:"Discount %",type:"number",editable:!0},{key:"gst",label:"GST %",type:"number",editable:!0},{key:"supplier",label:"Supplier",type:"text",editable:!0}],data:g,onSave:async Ce=>{try{for(const ct of Ce)ct.id&&await ue(`/api/drugs/${ct.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ct)});we()}catch(ct){console.error("Failed to save:",ct),C(ct.message||"Failed to save changes")}},editable:!0,showRowNumbers:!0})}):r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx("input",{type:"checkbox",onChange:Ce=>{if(Ce.target.checked){const ct=new Set(g.map(At=>At.id));ae(ct)}else ae(new Set)},checked:W.size===g.length&&g.length>0,disabled:g.length===0})}),r.jsx("th",{className:"drug-name-header",children:"DRUG DETAILS"}),r.jsx("th",{className:"pack-header",children:"PACK"}),r.jsx("th",{className:"expiry-header",children:"EXPIRY"}),r.jsx("th",{className:"text-stock qty-header",children:"STOCK"}),r.jsx("th",{className:"text-price mrp-header",children:"MRP"}),r.jsx("th",{className:"text-cost rate-header",children:"RATE"}),r.jsx("th",{className:"box-number-header",children:"BOX"}),r.jsx("th",{className:"discount-header",children:"DISC %"}),r.jsx("th",{className:"margin-header",children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsxs("tbody",{children:[g.length===0&&r.jsx("tr",{className:"no-results-message",children:r.jsx("td",{colSpan:11,children:"No drugs found matching your search."})}),ge.map(Ce=>r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{className:"drug-row",onClick:()=>{const ct=new Set(O);ct.has(Ce.id)&&Ce.id!==void 0?ct.delete(Ce.id):Ce.id!==void 0&&ct.add(Ce.id),A(ct)},children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx("input",{type:"checkbox",onClick:ct=>ct.stopPropagation(),checked:W.has(Ce.id),onChange:()=>{const ct=new Set(W);ct.has(Ce.id)?ct.delete(Ce.id):ct.add(Ce.id),ae(ct)}})}),r.jsx("td",{className:"drug-name-cell",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:Ce.brand_name||Ce.name||"-"}),Ce.brand_name&&Ce.name&&Ce.brand_name!==Ce.name&&r.jsx("span",{className:"text-xs text-muted-foreground",style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:Ce.name})]})}),r.jsx("td",{className:"text-muted pack-cell",children:Ce.pack||"-"}),r.jsx("td",{className:"text-muted",children:Ce.expiry_date?new Date(Ce.expiry_date).toLocaleDateString("en-GB"):"-"}),r.jsxs("td",{className:`text-stock ${Ce.stock<=gk?"low-stock":""}`,children:[r.jsx("div",{style:{fontWeight:"bold"},children:Ce.stock}),r.jsx("div",{className:"loose-quantity",children:Ce.loose!==null&&Ce.loose!==void 0?`${Ce.loose} loose`:"0 loose"})]}),r.jsxs("td",{className:"text-muted text-price",children:["",typeof Ce.mrp=="number"?Ce.mrp.toFixed(2):"N/A"]}),r.jsx("td",{className:"text-muted text-cost",children:Ce.rate!==null&&Ce.rate!==void 0?`${Ce.rate.toFixed(2)}`:"-"}),r.jsx("td",{className:"text-muted",children:Ce.box_number||"-"}),r.jsx("td",{className:"text-muted",children:Ce.discount!==null&&Ce.discount!==void 0?`${Ce.discount.toFixed(2)}%`:"0.00%"}),r.jsx("td",{className:"text-muted",children:(()=>{const ct=Ce.mrp||0,At=Ce.rate||0,qe=Ce.discount||0,wt=Ce.gst||0,Xn=At*(1-qe/100)*(1+wt/100),wr=ct-Xn;return`${(ct>0?wr/ct*100:0).toFixed(2)}%`})()}),r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsx("button",{onClick:ct=>{ct.stopPropagation(),n(`/dashboard/inventory/edit/${Ce.id}`)},className:"action-icon-button",title:"Edit Drug",children:r.jsx($a,{size:16})}),r.jsx("button",{onClick:ct=>{ct.stopPropagation(),_e(Ce)},className:"action-icon-button delete-button",title:"Delete Drug",children:r.jsx(Yn,{size:16})}),r.jsx("button",{onClick:ct=>{ct.stopPropagation(),Y(Ce),$(!0)},className:"action-icon-button adjust-stock-button",title:"Adjust Stock",children:r.jsx(aR,{size:16})}),r.jsx("button",{onClick:ct=>{ct.stopPropagation(),gt(Ce)},className:"action-icon-button convert-to-loose-button",title:"Convert to Loose",disabled:!Ce.pack||rt(Ce.pack)===null,children:r.jsx(uR,{size:16})})]})})]}),O.has(Ce.id)&&r.jsx("tr",{className:"collapsible-row",children:r.jsx("td",{colSpan:11,children:r.jsxs("div",{className:"collapsible-content",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",Ce.description||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Supplier:"})," ",Ce.supplier||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Batch:"})," ",Ce.batch||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"HSN Code:"})," ",Ce.hsn_code||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"MFG:"})," ",Ce.mfg||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Loose Price:"}),(()=>{const ct=rt(Ce.pack);return ct&&ct>0&&typeof Ce.mrp=="number"?`${(Ce.mrp/ct).toFixed(2)}`:"N/A"})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"GST:"})," ",Ce.gst!==null&&Ce.gst!==void 0?`${Ce.gst.toFixed(2)}%`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",new Date(Ce.last_updated).toLocaleString()]}),s.length>0&&r.jsx("div",{className:"custom-fields-display",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px dashed var(--border-color)"},children:s.map(ct=>{var At;return r.jsxs("p",{children:[r.jsxs("strong",{children:[ct.label,":"]})," ",(At=Ce.custom_fields)!=null&&At[ct.key]?String(Ce.custom_fields[ct.key]):"-"]},ct.key)})})]})})})]},Ce.id))]})]})}),r.jsx("div",{className:`inventory-grid-mobile ${e?"embedded":""}`,style:{display:c?"none":void 0},children:g.length===0?r.jsx("div",{className:"inventory-card-empty",children:"No drugs found matching your search."}):ge.map(Ce=>r.jsxs("div",{className:"inventory-card",onClick:()=>{const ct=new Set(O);ct.has(Ce.id)&&Ce.id!==void 0?ct.delete(Ce.id):Ce.id!==void 0&&ct.add(Ce.id),A(ct)},children:[r.jsxs("div",{className:"inventory-card-header",children:[r.jsxs("div",{className:"inventory-card-drug-info",children:[r.jsx("h4",{className:"inventory-card-drug-name",children:Ce.brand_name||Ce.name||"-"}),Ce.brand_name&&Ce.name&&Ce.brand_name!==Ce.name&&r.jsx("div",{className:"inventory-card-brand-name",children:Ce.name})]}),r.jsx("div",{className:"inventory-card-checkbox",onClick:ct=>ct.stopPropagation(),children:r.jsx("input",{type:"checkbox",checked:W.has(Ce.id),onChange:()=>{const ct=new Set(W);ct.has(Ce.id)?ct.delete(Ce.id):ct.add(Ce.id),ae(ct)}})})]}),r.jsxs("div",{className:"inventory-card-body",children:[r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Stock"}),r.jsxs("span",{className:`inventory-card-field-value stock-value ${Ce.stock<=gk?"stock-low":""}`,children:[Ce.stock,r.jsxs("span",{className:"inventory-card-loose",children:[" (",Ce.loose??0," loose)"]})]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"MRP"}),r.jsxs("span",{className:"inventory-card-field-value price-value",children:["",typeof Ce.mrp=="number"?Ce.mrp.toFixed(2):"N/A"]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Pack"}),r.jsx("span",{className:"inventory-card-field-value",children:Ce.pack||"-"})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Expiry"}),r.jsx("span",{className:"inventory-card-field-value",children:Ce.expiry_date?new Date(Ce.expiry_date).toLocaleDateString("en-GB"):"-"})]})]}),O.has(Ce.id)&&r.jsxs("div",{className:"inventory-card-expanded",children:[r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Rate"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.rate!==null&&Ce.rate!==void 0?`${Ce.rate.toFixed(2)}`:"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Box"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.box_number||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Supplier"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.supplier||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Batch"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.batch||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"HSN Code"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.hsn_code||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Discount"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.discount!==null&&Ce.discount!==void 0?`${Ce.discount.toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"GST"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.gst!==null&&Ce.gst!==void 0?`${Ce.gst.toFixed(2)}%`:"-"})]}),s.length>0&&s.map(ct=>{var At;return r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:ct.label}),r.jsx("span",{className:"inventory-card-expanded-value",children:(At=Ce.custom_fields)!=null&&At[ct.key]?String(Ce.custom_fields[ct.key]):"-"})]},ct.key)})]}),r.jsxs("div",{className:"inventory-card-actions",onClick:ct=>ct.stopPropagation(),children:[r.jsxs("button",{className:"inventory-card-action-btn btn-edit",onClick:()=>n(`/dashboard/inventory/edit/${Ce.id}`),title:"Edit Drug",children:[r.jsx($a,{size:14}),"Edit"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-delete",onClick:()=>_e(Ce),title:"Delete Drug",children:[r.jsx(Yn,{size:14}),"Delete"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-adjust",onClick:()=>{Y(Ce),$(!0)},title:"Adjust Stock",children:[r.jsx(aR,{size:14}),"Adjust"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-convert",onClick:()=>gt(Ce),title:"Convert to Loose",disabled:!Ce.pack||rt(Ce.pack)===null,children:[r.jsx(uR,{size:14}),"Loose"]})]})]},Ce.id))}),ee>1&&r.jsxs("div",{className:"pagination-controls",style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",backgroundColor:"var(--card-bg, #fff)",borderTop:"1px solid var(--border-color)"},children:[r.jsx("button",{onClick:()=>z(Ce=>Math.max(Ce-1,1)),disabled:G===1,className:"pagination-button",children:"Previous"}),r.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Page ",G," of ",ee]}),r.jsx("button",{onClick:()=>z(Ce=>Math.min(Ce+1,ee)),disabled:G===ee,className:"pagination-button",children:"Next"})]}),L&&H&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:$e,className:"modal-close-button",children:r.jsx(Ut,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),r.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',r.jsx("span",{className:"drug-name",children:H.name||"Unnamed Drug"}),'"? This action cannot be undone.']}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:$e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ze,className:"button-delete",children:"Delete"})]})]})}),B&&je&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ge,className:"modal-close-button",children:r.jsx(Ut,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:je.name||"Unnamed Drug"}),r.jsx("br",{}),"Current Stock: ",je.stock]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:oe,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),r.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:Oe===0?"":Oe,onChange:Le,placeholder:"e.g., 10 or -5",className:"form-input"}),r.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ge,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),X&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ye,className:"modal-close-button",children:r.jsx(Ut,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ye,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ye,className:"button-delete",children:"Delete All"})]})]})}),pe&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Be,className:"modal-close-button",children:r.jsx(Ut,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of Selected Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:W.size})," selected drug(s)? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Be,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ke,className:"button-delete",children:"Delete Selected"})]})]})}),Me&&be&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Pe,className:"modal-close-button",children:r.jsx(Ut,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Convert to Loose"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:be.name||"Unnamed Drug"}),r.jsx("br",{}),"Pack Size: ",be.pack,r.jsx("br",{}),"Current Stock: ",be.stock," packs, ",be.loose??0," loose units."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:et,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"packsToConvert",className:"form-label",children:"Packs to Convert"}),r.jsx("input",{type:"number",name:"packsToConvert",id:"packsToConvert",required:!0,step:"1",min:"1",max:be.stock,value:ve===0?"":ve,onChange:Je,className:"form-input"}),r.jsxs("p",{className:"form-help-text",children:["Converting ",ve," pack(s) will add ",ve*(rt(be.pack)||0)," loose units."]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Pe,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Convert"})]})]})]})}),fe&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ct,className:"modal-close-button",children:r.jsx(Ut,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Add Default Medications"}),r.jsx("p",{className:"modal-description",children:"Are you sure you want to add default medications to the inventory? This will add a predefined set of common medications."}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ct,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:bt,className:"button-submit",children:"Add Defaults"})]})]})}),r.jsx(pI,{isOpen:o,onClose:()=>l(!1),entityType:"drugs",entityLabel:"Pharmacy Drugs",currentConfig:i,onConfigUpdated:()=>{a()}})]})},k4e=()=>{const e=It();return r.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[r.jsx("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},TW=()=>{const{id:e}=Ii(),t=It(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(!1),[f,p]=b.useState(!1),g=b.useRef(null),x=b.useRef(null),v=b.useRef(null),j=b.useCallback(async()=>{if(!e){l("Drug ID is missing."),s(!1);return}s(!0),l(null);try{const C=await ue(`/api/drugs/${e}`);if(!C.ok){const A=await C.json();throw new Error(A.message||`Failed to fetch drug: ${C.statusText}`)}let O=await C.json();O={...O,name:O.name||"",brand_name:O.brand_name||"",mrp:parseFloat(String(O.mrp))||0,rate:O.rate!==null&&O.rate!==void 0?parseFloat(String(O.rate)):null,stock:parseInt(String(O.stock),10)||0,gst:O.gst!==null&&O.gst!==void 0?parseFloat(String(O.gst)):null,margin:O.margin!==null&&O.margin!==void 0?parseFloat(String(O.margin)):null,discount:O.discount!==null&&O.discount!==void 0?parseFloat(String(O.discount)):null,batch:O.batch||"",hsn_code:O.hsn_code||"",mfg:O.mfg||"",loose:O.loose!==null&&O.loose!==void 0?parseInt(String(O.loose),10):null},i(O)}catch(C){console.error("Failed to fetch drug:",C),l(C.message||"Failed to load drug data. Please try again.")}finally{s(!1)}},[e]);b.useEffect(()=>{j()},[j]),b.useEffect(()=>{const C=A=>{A.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var P;(P=v.current)==null||P.focus()},0),A.preventDefault()))},O=A=>{g.current&&!g.current.contains(A.target)&&p(!1)};return document.addEventListener("keydown",C),document.addEventListener("mousedown",O),()=>{document.removeEventListener("keydown",C),document.removeEventListener("mousedown",O)}},[f]);const w=C=>{const{name:O,value:A,type:P}=C.target;i(I=>I?{...I,[O]:P==="number"?parseFloat(A)||null:A}:null)},_=()=>{t(-1)},T=async C=>{if(C.preventDefault(),l(null),u(!0),!n||!n.id){l("Cannot edit drug: No drug data available."),u(!1);return}if(n.mrp===void 0||n.stock===void 0){l("MRP and Stock Quantity are required."),u(!1);return}const O={...n,name:n.name===""?null:n.name,brand_name:n.brand_name===""?null:n.brand_name,rate:n.rate===0?null:n.rate,expiry_date:n.expiry_date===""?null:n.expiry_date,gst:n.gst===0?null:n.gst,margin:n.margin===0?null:n.margin,discount:n.discount===0?null:n.discount,batch:n.batch===""?null:n.batch,hsn_code:n.hsn_code===""?null:n.hsn_code,mfg:n.mfg===""?null:n.mfg,loose:n.loose===0?null:n.loose};try{const A=await ue(`/api/drugs/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!A.ok){const P=await A.json();throw new Error(P.message||`Failed to update drug: ${A.statusText}`)}await A.json(),t(-1)}catch(A){console.error("Failed to update drug:",A),l(A.message||"Failed to update drug. Please try again.")}finally{u(!1)}};return a?r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):o&&!n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"error-message-load",children:["Error: ",o]})}):n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"edit-drug-form-container",children:[r.jsxs("div",{className:"edit-drug-form-header",children:[r.jsxs("h2",{children:["Edit Drug: ",n.name]}),r.jsx("button",{onClick:_,className:"cancel-button",title:"Go Back",children:r.jsx(Ut,{size:24})})]}),o&&r.jsx("div",{className:"error-message-submit",children:o}),r.jsxs("form",{onSubmit:T,className:"edit-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Composition Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"edit-name",value:n.name||"",onChange:w,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})," "]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-brand_name",className:"form-label",children:"Brand Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"edit-brand_name",value:n.brand_name||"",onChange:w,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"edit-mrp",required:!0,step:"0.01",min:"0",value:n.mrp||"",onChange:w,className:"custom-text-input",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"edit-stock",required:!0,step:"1",min:"0",value:n.stock||"",onChange:w,className:"custom-text-input",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"edit-pack",value:n.pack||"",onChange:w,className:"custom-text-input",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:n.expiry_date||"",onChange:w,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:n.box_number||"",onChange:w,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:g,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:n.description||"",onChange:w,className:"custom-text-input",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:n.supplier||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:10})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"edit-rate",step:"0.01",min:"0",value:n.rate??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:11,ref:v})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"edit-gst",step:"0.01",min:"0",max:"100",value:n.gst??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"edit-margin",step:"0.01",min:"0",max:"100",value:n.margin??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"edit-discount",step:"0.01",min:"0",max:"100",value:n.discount??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"edit-batch",value:n.batch||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"edit-hsn_code",value:n.hsn_code||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"edit-mfg",value:n.mfg||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:17})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-loose",className:"form-label",children:"Loose"}),r.jsx("input",{type:"number",name:"loose",id:"edit-loose",step:"1",min:"0",value:n.loose??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:18})]})]})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:_,disabled:c,className:"form-button cancel-form-button",tabIndex:19,children:"Back"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:20,children:c?"Saving...":"Save Changes"})]})]})]})}):r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"not-found-message",children:"Drug not found."})})},P4e=({clinicId:e})=>{const t=It(),[n,i]=b.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[a,s]=b.useState(null),[o,l]=b.useState(!1),[c,u]=b.useState([]),[f,p]=b.useState(!0),g=async()=>{try{const w=await ue("/api/clinic-roles");if(w.ok){const _=await w.json();u(_)}}catch(w){console.error("Failed to fetch roles:",w)}finally{p(!1)}};b.useEffect(()=>{s(e?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly."),g()},[e]);const x=w=>{const{name:_,value:T}=w.target;i(C=>{const O={...C,[_]:T};return _==="role"&&T!=="doctor"&&(O.opd_fee=""),O})},v=async w=>{if(w.preventDefault(),s(null),!n.name||!n.email||!n.role||!n.password){s("Name, Email, Role, and Password are required.");return}if(!e){s("Clinic information is missing. Cannot add staff.");return}const _={...n,clinic_id:e,opd_fee:n.role==="doctor"&&n.opd_fee?parseFloat(String(n.opd_fee)):null};if(_.role==="doctor"&&n.opd_fee&&isNaN(_.opd_fee)){s("Invalid OPD Fee format. Please enter a number.");return}l(!0);try{const T=await ue("/api/staff",{method:"POST",body:JSON.stringify(_)});if(!T.ok){const C=await T.json();throw new Error(C.message||"Server responded with an error")}t(-1)}catch(T){s(`Failed to add staff: ${T.message}`)}finally{l(!1)}},j=()=>{t(-1)};return r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:j,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(rn,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{children:"Add New Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),a&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Zr,{size:18,className:"mr-2 text-red-500"}),a]}),r.jsxs("form",{onSubmit:v,className:`staff-form ${e?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{id:"name",type:"text",name:"name",value:n.name||"",onChange:x,required:!0,disabled:o||!e,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",name:"email",value:n.email||"",onChange:x,required:!0,disabled:o||!e,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"role",children:"Assign Role"}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:x,required:!0,disabled:o||!e||f,children:f?r.jsx("option",{value:"",children:"Loading roles..."}):c.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):c.map(w=>r.jsx("option",{value:w.key,children:w.name},w.key))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:n.password||"",onChange:x,required:!0,disabled:o||!e,placeholder:"Create a password"})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee () (Optional)"}),r.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:n.opd_fee||"",onChange:x,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:o||!e}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),r.jsxs("button",{type:"submit",disabled:o||!e,children:[o?r.jsx(zc,{size:18,className:"animate-spin mr-2"}):r.jsx(hr,{size:18,className:"mr-2"}),o?"Adding...":"Add Staff Member"]})]})]})},O4e=()=>{const{id:e}=Ii(),t=It(),[n,i]=b.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[a,s]=b.useState(""),[o,l]=b.useState(!0),[c,u]=b.useState(!1),[f,p]=b.useState(null),[g,x]=b.useState(null),[v,j]=b.useState([]),[w,_]=b.useState(!0),T=async()=>{try{const I=await ue("/api/clinic-roles");if(I.ok){const F=await I.json();j(F)}}catch(I){console.error("Failed to fetch roles:",I)}finally{_(!1)}},C=b.useCallback(async()=>{if(!e){p("Staff ID is missing."),l(!1);return}l(!0),p(null),x(null);try{const I=await ue(`/staff/${e}`);if(!I.ok){const B=await I.json();throw new Error(B.message||`HTTP error! status: ${I.status}`)}const F=await I.json();i({name:F.name,email:F.email,role:F.role,opd_fee:F.opd_fee??"",active:F.active})}catch(I){p(`Failed to load staff details: ${I.message}`)}finally{l(!1)}},[e]);b.useEffect(()=>{C(),T()},[C]);const O=I=>{const{name:F,value:B,type:$}=I.target;if($==="checkbox"){const{checked:L}=I.target;i(V=>({...V,[F]:L}))}else i(L=>({...L,[F]:B}))},A=I=>{s(I.target.value)},P=async I=>{if(I.preventDefault(),!e){p("Staff ID is missing.");return}u(!0),p(null),x(null);const F={name:n.name,email:n.email,role:n.role,active:n.active};if(n.role==="doctor"){const B=n.opd_fee?parseFloat(String(n.opd_fee)):null;if(B!==null&&isNaN(B)){p("OPD Fee must be a valid number."),u(!1);return}F.opd_fee=B}else F.opd_fee=null;a.trim()!==""&&(F.password=a.trim());try{const B=await ue(`/staff/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!B.ok){const $=await B.json();throw new Error($.message||`HTTP error! status: ${B.status}`)}x("Staff details updated successfully!"),s(""),setTimeout(()=>t(-1),1500)}catch(B){p(`Failed to update staff: ${B.message}`)}finally{u(!1)}};return o?r.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(zc,{className:"h-12 w-12 animate-spin text-teal-600"}),r.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(rn,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),f&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Zr,{size:18,className:"mr-2 text-red-500"}),f,r.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),g&&r.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[r.jsx(Bl,{size:18,className:"mr-2 text-green-500"}),g,r.jsx("button",{onClick:()=>x(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:""})]}),r.jsxs("form",{onSubmit:P,className:"staff-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:O,required:!0,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email||"",onChange:O,required:!0,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"role",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:O,required:!0,disabled:w,children:w?r.jsx("option",{value:"",children:"Loading roles..."}):v.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"lab",children:"Lab Technician"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"})]}):v.map(I=>r.jsx("option",{value:I.key,children:I.name},I.key))})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee ()"}),r.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:n.opd_fee||"",onChange:O,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),r.jsxs("div",{className:"form-group checkbox-group",children:[r.jsx("input",{id:"active",name:"active",type:"checkbox",checked:n.active??!0,onChange:O}),r.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),r.jsx("input",{type:"password",id:"password",name:"password",value:a,onChange:A,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),r.jsx("button",{type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(zc,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(io,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})},D4e=()=>{const{patientId:e}=Ii(),t=It(),[n,i]=b.useState([]),[a,s]=b.useState(null),[o,l]=b.useState(!1),[c,u]=b.useState(null);b.useEffect(()=>{(async()=>{if(!e){u("Patient ID not provided.");return}l(!0),u(null);try{const g=await ue(`/api/patients/${e}`);if(!g.ok)throw new Error(`Failed to fetch patient details: ${g.status}`);const x=await g.json();s({name:x.name,age:x.age,gender:x.gender});const v=await ue(`/api/patients/${e}/complaints`);if(v.ok){const w=(await v.json()).sort((_,T)=>new Date(T.createdAt).getTime()-new Date(_.createdAt).getTime());i(w)}else if(v.status===404)i([]);else throw new Error(`Failed to fetch complaints: ${v.status}`)}catch(g){console.error("Error fetching past complaints or patient info:",g),u(`Failed to load data. ${g.message}`),i([]),s(null)}finally{l(!1)}})()},[e]);const f=p=>{navigator.clipboard.writeText(p).then(()=>console.log("Complaint copied to clipboard")).catch(g=>console.error("Failed to copy complaint: ",g))};return r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),r.jsx("div",{className:"w-16"})," "]}),a&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",r.jsx("strong",{children:a.name})," (",a.age??"N/A"," / ",a.gender??"N/A",")"]}),c&&r.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",c]}),o&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!o&&n.length===0&&!c&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!o&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(p=>r.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(p.createdAt).toLocaleString()}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.complaint}),r.jsx("button",{onClick:()=>f(p.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:""})]},p.id))})]})};var M4e=Object.defineProperty,JS=Object.getOwnPropertySymbols,AW=Object.prototype.hasOwnProperty,EW=Object.prototype.propertyIsEnumerable,_z=(e,t,n)=>t in e?M4e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rD=(e,t)=>{for(var n in t||(t={}))AW.call(t,n)&&_z(e,n,t[n]);if(JS)for(var n of JS(t))EW.call(t,n)&&_z(e,n,t[n]);return e},iD=(e,t)=>{var n={};for(var i in e)AW.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&JS)for(var i of JS(e))t.indexOf(i)<0&&EW.call(e,i)&&(n[i]=e[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Bf;(e=>{const t=class Pn{constructor(c,u,f,p){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<Pn.MIN_VERSION||c>Pn.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let g=[];for(let v=0;v<this.size;v++)g.push(!1);for(let v=0;v<this.size;v++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(f);if(this.drawCodewords(x),p==-1){let v=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const w=this.getPenaltyScore();w<v&&(p=j,v=w),this.applyMask(j)}}a(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,u){const f=e.QrSegment.makeSegments(c);return Pn.encodeSegments(f,u)}static encodeBinary(c,u){const f=e.QrSegment.makeBytes(c);return Pn.encodeSegments([f],u)}static encodeSegments(c,u,f=1,p=40,g=-1,x=!0){if(!(Pn.MIN_VERSION<=f&&f<=p&&p<=Pn.MAX_VERSION)||g<-1||g>7)throw new RangeError("Invalid value");let v,j;for(v=f;;v++){const C=Pn.getNumDataCodewords(v,u)*8,O=o.getTotalBits(c,v);if(O<=C){j=O;break}if(v>=p)throw new RangeError("Data too long")}for(const C of[Pn.Ecc.MEDIUM,Pn.Ecc.QUARTILE,Pn.Ecc.HIGH])x&&j<=Pn.getNumDataCodewords(v,C)*8&&(u=C);let w=[];for(const C of c){n(C.mode.modeBits,4,w),n(C.numChars,C.mode.numCharCountBits(v),w);for(const O of C.getData())w.push(O)}a(w.length==j);const _=Pn.getNumDataCodewords(v,u)*8;a(w.length<=_),n(0,Math.min(4,_-w.length),w),n(0,(8-w.length%8)%8,w),a(w.length%8==0);for(let C=236;w.length<_;C^=253)n(C,8,w);let T=[];for(;T.length*8<w.length;)T.push(0);return w.forEach((C,O)=>T[O>>>3]|=C<<7-(O&7)),new Pn(v,u,T,g)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let f=0;f<u;f++)for(let p=0;p<u;p++)f==0&&p==0||f==0&&p==u-1||f==u-1&&p==0||this.drawAlignmentPattern(c[f],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let f=u;for(let g=0;g<10;g++)f=f<<1^(f>>>9)*1335;const p=(u<<10|f)^21522;a(p>>>15==0);for(let g=0;g<=5;g++)this.setFunctionModule(8,g,i(p,g));this.setFunctionModule(8,7,i(p,6)),this.setFunctionModule(8,8,i(p,7)),this.setFunctionModule(7,8,i(p,8));for(let g=9;g<15;g++)this.setFunctionModule(14-g,8,i(p,g));for(let g=0;g<8;g++)this.setFunctionModule(this.size-1-g,8,i(p,g));for(let g=8;g<15;g++)this.setFunctionModule(8,this.size-15+g,i(p,g));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let f=0;f<12;f++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;a(u>>>18==0);for(let f=0;f<18;f++){const p=i(u,f),g=this.size-11+f%3,x=Math.floor(f/3);this.setFunctionModule(g,x,p),this.setFunctionModule(x,g,p)}}drawFinderPattern(c,u){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const g=Math.max(Math.abs(p),Math.abs(f)),x=c+p,v=u+f;0<=x&&x<this.size&&0<=v&&v<this.size&&this.setFunctionModule(x,v,g!=2&&g!=4)}}drawAlignmentPattern(c,u){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,u+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(c,u,f){this.modules[u][c]=f,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,f=this.errorCorrectionLevel;if(c.length!=Pn.getNumDataCodewords(u,f))throw new RangeError("Invalid argument");const p=Pn.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][u],g=Pn.ECC_CODEWORDS_PER_BLOCK[f.ordinal][u],x=Math.floor(Pn.getNumRawDataModules(u)/8),v=p-x%p,j=Math.floor(x/p);let w=[];const _=Pn.reedSolomonComputeDivisor(g);for(let C=0,O=0;C<p;C++){let A=c.slice(O,O+j-g+(C<v?0:1));O+=A.length;const P=Pn.reedSolomonComputeRemainder(A,_);C<v&&A.push(0),w.push(A.concat(P))}let T=[];for(let C=0;C<w[0].length;C++)w.forEach((O,A)=>{(C!=j-g||A>=v)&&T.push(O[C])});return a(T.length==x),T}drawCodewords(c){if(c.length!=Math.floor(Pn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let g=0;g<2;g++){const x=f-g,j=(f+1&2)==0?this.size-1-p:p;!this.isFunction[j][x]&&u<c.length*8&&(this.modules[j][x]=i(c[u>>>3],7-(u&7)),u++)}}a(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let f=0;f<this.size;f++){let p;switch(c){case 0:p=(f+u)%2==0;break;case 1:p=u%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+u)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(u/2))%2==0;break;case 5:p=f*u%2+f*u%3==0;break;case 6:p=(f*u%2+f*u%3)%2==0;break;case 7:p=((f+u)%2+f*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][f]&&p&&(this.modules[u][f]=!this.modules[u][f])}}getPenaltyScore(){let c=0;for(let g=0;g<this.size;g++){let x=!1,v=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[g][w]==x?(v++,v==5?c+=Pn.PENALTY_N1:v>5&&c++):(this.finderPenaltyAddHistory(v,j),x||(c+=this.finderPenaltyCountPatterns(j)*Pn.PENALTY_N3),x=this.modules[g][w],v=1);c+=this.finderPenaltyTerminateAndCount(x,v,j)*Pn.PENALTY_N3}for(let g=0;g<this.size;g++){let x=!1,v=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][g]==x?(v++,v==5?c+=Pn.PENALTY_N1:v>5&&c++):(this.finderPenaltyAddHistory(v,j),x||(c+=this.finderPenaltyCountPatterns(j)*Pn.PENALTY_N3),x=this.modules[w][g],v=1);c+=this.finderPenaltyTerminateAndCount(x,v,j)*Pn.PENALTY_N3}for(let g=0;g<this.size-1;g++)for(let x=0;x<this.size-1;x++){const v=this.modules[g][x];v==this.modules[g][x+1]&&v==this.modules[g+1][x]&&v==this.modules[g+1][x+1]&&(c+=Pn.PENALTY_N2)}let u=0;for(const g of this.modules)u=g.reduce((x,v)=>x+(v?1:0),u);const f=this.size*this.size,p=Math.ceil(Math.abs(u*20-f*10)/f)-1;return a(0<=p&&p<=9),c+=p*Pn.PENALTY_N4,a(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let f=[6];for(let p=this.size-7;f.length<c;p-=u)f.splice(1,0,p);return f}}static getNumRawDataModules(c){if(c<Pn.MIN_VERSION||c>Pn.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const f=Math.floor(c/7)+2;u-=(25*f-10)*f-55,c>=7&&(u-=36)}return a(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(Pn.getNumRawDataModules(c)/8)-Pn.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*Pn.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let p=0;p<c-1;p++)u.push(0);u.push(1);let f=1;for(let p=0;p<c;p++){for(let g=0;g<u.length;g++)u[g]=Pn.reedSolomonMultiply(u[g],f),g+1<u.length&&(u[g]^=u[g+1]);f=Pn.reedSolomonMultiply(f,2)}return u}static reedSolomonComputeRemainder(c,u){let f=u.map(p=>0);for(const p of c){const g=p^f.shift();f.push(0),u.forEach((x,v)=>f[v]^=Pn.reedSolomonMultiply(x,g))}return f}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(u>>>p&1)*c;return a(f>>>8==0),f}finderPenaltyCountPatterns(c){const u=c[1];a(u<=this.size*3);const f=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(f&&c[0]>=u*4&&c[6]>=u?1:0)+(f&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,f){return c&&(this.finderPenaltyAddHistory(u,f),u=0),u+=this.size,this.finderPenaltyAddHistory(u,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let f=c-1;f>=0;f--)u.push(l>>>f&1)}function i(l,c){return(l>>>c&1)!=0}function a(l){if(!l)throw new Error("Assertion error")}const s=class Qr{constructor(c,u,f){if(this.mode=c,this.numChars=u,this.bitData=f,u<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(c){let u=[];for(const f of c)n(f,8,u);return new Qr(Qr.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!Qr.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let f=0;f<c.length;){const p=Math.min(c.length-f,3);n(parseInt(c.substring(f,f+p),10),p*3+1,u),f+=p}return new Qr(Qr.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!Qr.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],f;for(f=0;f+2<=c.length;f+=2){let p=Qr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f))*45;p+=Qr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f+1)),n(p,11,u)}return f<c.length&&n(Qr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f)),6,u),new Qr(Qr.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:Qr.isNumeric(c)?[Qr.makeNumeric(c)]:Qr.isAlphanumeric(c)?[Qr.makeAlphanumeric(c)]:[Qr.makeBytes(Qr.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,u);else if(c<16384)n(2,2,u),n(c,14,u);else if(c<1e6)n(6,3,u),n(c,21,u);else throw new RangeError("ECI assignment value out of range");return new Qr(Qr.Mode.ECI,0,u)}static isNumeric(c){return Qr.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Qr.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let f=0;for(const p of c){const g=p.mode.numCharCountBits(u);if(p.numChars>=1<<g)return 1/0;f+=4+g+p.bitData.length}return f}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let f=0;f<c.length;f++)c.charAt(f)!="%"?u.push(c.charCodeAt(f)):(u.push(parseInt(c.substring(f+1,f+3),16)),f+=2);return u}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;e.QrSegment=s})(Bf||(Bf={}));(e=>{(t=>{const n=class{constructor(a,s){this.ordinal=a,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Bf||(Bf={}));(e=>{(t=>{const n=class{constructor(a,s){this.modeBits=a,this.numBitsCharCount=s}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Bf||(Bf={}));var Um=Bf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var I4e={L:Um.QrCode.Ecc.LOW,M:Um.QrCode.Ecc.MEDIUM,Q:Um.QrCode.Ecc.QUARTILE,H:Um.QrCode.Ecc.HIGH},kW=128,PW="L",OW="#FFFFFF",DW="#000000",MW=!1,IW=1,R4e=4,L4e=0,F4e=.1;function RW(e,t=0){const n=[];return e.forEach(function(i,a){let s=null;i.forEach(function(o,l){if(!o&&s!==null){n.push(`M${s+t} ${a+t}h${l-s}v1H${s+t}z`),s=null;return}if(l===i.length-1){if(!o)return;s===null?n.push(`M${l+t},${a+t} h1v1H${l+t}z`):n.push(`M${s+t},${a+t} h${l+1-s}v1H${s+t}z`);return}o&&s===null&&(s=l)})}),n.join("")}function LW(e,t){return e.slice().map((n,i)=>i<t.y||i>=t.y+t.h?n:n.map((a,s)=>s<t.x||s>=t.x+t.w?a:!1))}function $4e(e,t,n,i){if(i==null)return null;const a=e.length+n*2,s=Math.floor(t*F4e),o=a/t,l=(i.width||s)*o,c=(i.height||s)*o,u=i.x==null?e.length/2-l/2:i.x*o,f=i.y==null?e.length/2-c/2:i.y*o,p=i.opacity==null?1:i.opacity;let g=null;if(i.excavate){let v=Math.floor(u),j=Math.floor(f),w=Math.ceil(l+u-v),_=Math.ceil(c+f-j);g={x:v,y:j,w,h:_}}const x=i.crossOrigin;return{x:u,y:f,h:c,w:l,excavation:g,opacity:p,crossOrigin:x}}function B4e(e,t){return t!=null?Math.max(Math.floor(t),0):e?R4e:L4e}function FW({value:e,level:t,minVersion:n,includeMargin:i,marginSize:a,imageSettings:s,size:o,boostLevel:l}){let c=Se.useMemo(()=>{const v=(Array.isArray(e)?e:[e]).reduce((j,w)=>(j.push(...Um.QrSegment.makeSegments(w)),j),[]);return Um.QrCode.encodeSegments(v,I4e[t],n,void 0,void 0,l)},[e,t,n,l]);const{cells:u,margin:f,numCells:p,calculatedImageSettings:g}=Se.useMemo(()=>{let x=c.getModules();const v=B4e(i,a),j=x.length+v*2,w=$4e(x,o,v,s);return{cells:x,margin:v,numCells:j,calculatedImageSettings:w}},[c,o,s,i,a]);return{qrcode:c,margin:f,cells:u,numCells:p,calculatedImageSettings:g}}var z4e=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),pa=Se.forwardRef(function(t,n){const i=t,{value:a,size:s=kW,level:o=PW,bgColor:l=OW,fgColor:c=DW,includeMargin:u=MW,minVersion:f=IW,boostLevel:p,marginSize:g,imageSettings:x}=i,j=iD(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=j,_=iD(j,["style"]),T=x==null?void 0:x.src,C=Se.useRef(null),O=Se.useRef(null),A=Se.useCallback(te=>{C.current=te,typeof n=="function"?n(te):n&&(n.current=te)},[n]),[P,I]=Se.useState(!1),{margin:F,cells:B,numCells:$,calculatedImageSettings:L}=FW({value:a,level:o,minVersion:f,boostLevel:p,includeMargin:u,marginSize:g,imageSettings:x,size:s});Se.useEffect(()=>{if(C.current!=null){const te=C.current,X=te.getContext("2d");if(!X)return;let q=B;const W=O.current,ae=L!=null&&W!==null&&W.complete&&W.naturalHeight!==0&&W.naturalWidth!==0;ae&&L.excavation!=null&&(q=LW(B,L.excavation));const G=window.devicePixelRatio||1;te.height=te.width=s*G;const z=s/$*G;X.scale(z,z),X.fillStyle=l,X.fillRect(0,0,$,$),X.fillStyle=c,z4e?X.fill(new Path2D(RW(q,F))):B.forEach(function(le,je){le.forEach(function(Y,Oe){Y&&X.fillRect(Oe+F,je+F,1,1)})}),L&&(X.globalAlpha=L.opacity),ae&&X.drawImage(W,L.x+F,L.y+F,L.w,L.h)}}),Se.useEffect(()=>{I(!1)},[T]);const V=rD({height:s,width:s},w);let H=null;return T!=null&&(H=Se.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{I(!0)},ref:O,crossOrigin:L==null?void 0:L.crossOrigin})),Se.createElement(Se.Fragment,null,Se.createElement("canvas",rD({style:V,height:s,width:s,ref:A,role:"img"},_)),H)});pa.displayName="QRCodeCanvas";var q4e=Se.forwardRef(function(t,n){const i=t,{value:a,size:s=kW,level:o=PW,bgColor:l=OW,fgColor:c=DW,includeMargin:u=MW,minVersion:f=IW,boostLevel:p,title:g,marginSize:x,imageSettings:v}=i,j=iD(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:_,numCells:T,calculatedImageSettings:C}=FW({value:a,level:o,minVersion:f,boostLevel:p,includeMargin:u,marginSize:x,imageSettings:v,size:s});let O=_,A=null;v!=null&&C!=null&&(C.excavation!=null&&(O=LW(_,C.excavation)),A=Se.createElement("image",{href:v.src,height:C.h,width:C.w,x:C.x+w,y:C.y+w,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const P=RW(O,w);return Se.createElement("svg",rD({height:s,width:s,viewBox:`0 0 ${T} ${T}`,ref:n,role:"img"},j),!!g&&Se.createElement("title",null,g),Se.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),Se.createElement("path",{fill:c,d:P,shapeRendering:"crispEdges"}),A)});q4e.displayName="QRCodeSVG";const U4e=e=>{if(e===0)return"Zero";const t=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],i=l=>l===0?"":l<20?t[l]:l<100?n[Math.floor(l/10)]+(l%10?" "+t[l%10]:""):t[Math.floor(l/100)]+" Hundred"+(l%100?" and "+i(l%100):""),a=Math.floor(e),s=Math.round((e-a)*100);let o="";return a>=1e7&&(o+=i(Math.floor(a/1e7))+" Crore "),a>=1e5&&(o+=i(Math.floor(a%1e7/1e5))+" Lakh "),a>=1e3&&(o+=i(Math.floor(a%1e5/1e3))+" Thousand "),a>=100&&(o+=i(Math.floor(a%1e3/100))+" Hundred "),a%100&&(o+=(o?"and ":"")+i(a%100)),o=o.trim()+" Rupees",s>0&&(o+=" and "+i(s)+" Paise"),o+" Only"},V4e=e=>{const t=typeof e=="string"?parseInt(e,10):e;return`INV-${String(t).padStart(6,"0")}`},yk=500,Cz="defaultConsultationFee",H4e=({patientId:e,billId:t,queueId:n,onBillCreated:i,onBillUpdated:a,initialItems:s=[],billType:o="other",relatedId:l,initialStatus:c="pending",initialDiscountPercentage:u=0,readOnlyMode:f=!1,doctorId:p,labOrderId:g,patientInsuranceType:x})=>{const[v,j]=b.useState(null),[w,_]=b.useState([]),T=b.useRef([]),[C,O]=b.useState(""),[A,P]=b.useState(""),[I,F]=b.useState(1),[B,$]=b.useState(u),[L,V]=b.useState("cash"),[H,te]=b.useState(!1),[X,q]=b.useState(null),[W,ae]=b.useState(!1),[G,z]=b.useState(!1),[le,je]=b.useState(!1),[Y,Oe]=b.useState(null),[Ke,Me]=b.useState([]),[Ie,be]=b.useState(null),[re,ve]=b.useState(""),[ce,fe]=b.useState("cash"),[se,Q]=b.useState(!1),[ie,ge]=b.useState(!1),[ee,we]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ue=()=>{ee.length<5&&we(at=>[...at,{id:Date.now().toString(),method:"cash",amount:0}])},Ge=at=>{ee.length>2&&we(Nt=>Nt.filter(_t=>_t.id!==at))},Le=(at,Nt,_t)=>{we(Rt=>Rt.map(Mn=>Mn.id===at?Nt==="method"?{...Mn,method:_t}:{...Mn,amount:Math.max(0,_t)}:Mn))},oe=(at,Nt)=>{const _t=ee.filter(jn=>jn.id!==at).reduce((jn,Mn)=>jn+Mn.amount,0),Rt=Math.max(0,Nt-_t);we(jn=>jn.map(Mn=>Mn.id===at?{...Mn,amount:Rt}:Mn))},[_e,$e]=b.useState(null),[ze,K]=b.useState(!1),[ye,pe]=b.useState(yk),[me,Ne]=b.useState(yk.toString()),[Be,ke]=b.useState(""),[Ye,rt]=b.useState(""),[gt,Pe]=b.useState(""),[Je,et]=b.useState(""),[dt,Ct]=b.useState(""),bt=t?"view_pay":"create";b.useEffect(()=>{const at=localStorage.getItem(Cz),Nt=at?parseFloat(at):yk;isNaN(Nt)||(pe(Nt),Ne(Nt.toString()))},[]);const Ce=s.length===0;b.useEffect(()=>{e?(async()=>{te(!0),q(null);try{const Nt=await ue(`/api/patients/${e}`);if(!Nt.ok){const Rt=await Nt.json().catch(()=>({}));throw new Error(Rt.message||"Failed to fetch patient details")}const _t=await Nt.json();j(_t)}catch(Nt){q(`Failed to load patient details: ${Nt.message}`),j(null)}finally{te(!1)}})():j(null)},[e]),b.useEffect(()=>{t?(async()=>{je(!0),q(null),Oe(null),Me([]),be(null);try{const Nt=await ue(`/api/bills/${t}`);if(!Nt.ok){const Rt=await Nt.json().catch(()=>({}));throw new Error(Rt.message||"Failed to fetch bill details")}const _t=await Nt.json();if(!_t.bill||!_t.payments||!_t.calculated)throw new Error("Invalid bill details structure.");Oe(_t.bill),Me(_t.payments),be(_t.calculated),$(_t.bill.discount_percentage!==void 0&&_t.bill.discount_percentage!==null?parseFloat(_t.bill.discount_percentage.toString()):0),_t.bill.payment_mode&&V(_t.bill.payment_mode),!v&&_t.bill.patient_id&&ct(_t.bill.patient_id.toString())}catch(Nt){q(`Failed to load bill details: ${Nt.message}`),Oe(null),Me([]),be(null)}finally{je(!1)}})():(Oe(null),Me([]),be(null))},[t]),b.useEffect(()=>{(async()=>{try{const Nt=await ue("/api/clinics/settings");if(!Nt.ok)throw new Error("Failed to fetch clinic settings");const _t=await Nt.json();ke(_t.upi_id||""),rt(_t.name||""),Pe(_t.address||""),et(_t.notes||"")}catch(Nt){console.error("Error fetching clinic settings:",Nt)}})()},[]);const ct=async at=>{te(!0);try{const Nt=await ue(`/api/patients/${at}`);if(!Nt.ok)throw new Error("Failed to fetch patient");const _t=await Nt.json();j(_t)}catch(Nt){console.error("Error fetching patient details:",Nt),j(null)}finally{te(!1)}},At=b.useCallback(async at=>{z(!0),q(null);const Nt=at.filter(_t=>_t.drug_id!=null).map(async _t=>{try{const Rt=await ue(`/api/drugs/${_t.drug_id}`);if(!Rt.ok)throw new Error(`Drug ${_t.drug_id} not found.`);const jn=await Rt.json();return{..._t,price:jn.price,total:jn.price*_t.quantity}}catch{return q(jn=>`${jn?jn+"; ":""}Failed to fetch price for ${_t.name}`),_t}});try{const _t=await Promise.all(Nt);_(Rt=>{const jn=new Map(_t.map(Mn=>[Mn.id,Mn]));return Rt.map(Mn=>jn.get(Mn.id)||Mn)})}catch{}finally{z(!1)}},[ue]);b.useEffect(()=>{if(t){_([]),T.current=[];return}JSON.stringify(s)===JSON.stringify(T.current)||(async()=>{let _t=[];if(s&&s.length>0)_t=s.map((Rt,jn)=>({...Rt,id:`initial-${jn}-${Date.now()}`})),V(c==="paid"?"cash":x==="no_cash_insurance"?"no_cash_insurance":"cash"),$(u),o==="pharmacy"&&!f&&await At(_t);else if(e&&Ce&&o==="consultation"){let Rt=ye;if(p)try{const jn=await ue(`/api/staff/${p}`);if(!jn.ok){const bi=await jn.json().catch(()=>({}));throw new Error(bi.message||"Doctor not found or error fetching fee")}const Mn=await jn.json();Mn.opd_fee!=null&&!isNaN(parseFloat(String(Mn.opd_fee)))&&parseFloat(String(Mn.opd_fee))>=0&&(Rt=parseFloat(String(Mn.opd_fee)))}catch(jn){q(Mn=>`${Mn?Mn+"; ":""}Could not fetch doctor's fee, using default. (${jn.message})`)}_t=[{id:Date.now(),name:"Consultation Fee",price:Rt,quantity:1,total:Rt*1,drug_id:null}],V(x==="no_cash_insurance"?"no_cash_insurance":"cash")}else _t=[],V(x==="no_cash_insurance"?"no_cash_insurance":"cash");_(_t),T.current=s})()},[t,e,p,s,o,ye,Ce,c,f,At,u,x]);const qe=()=>{const at=parseFloat(A);if(!f)if(C&&!isNaN(at)&&at>=0&&I>0){if(C.trim().toLowerCase()==="consultation fee"&&w.some(_t=>_t.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const Nt={id:Date.now(),name:C.trim(),price:at,quantity:I,total:at*I,drug_id:null};_([...w,Nt]),O(""),P(""),F(1)}else alert("Invalid item details.")},wt=at=>{f||_(w.filter(Nt=>Nt.id!==at))},Tt=b.useMemo(()=>{let at=w.reduce((Nt,_t)=>Nt+_t.total,0);return bt==="create"&&B>0&&(at=at*(1-B/100)),(Ie==null?void 0:Ie.totalDue)!==void 0&&(Ie==null?void 0:Ie.totalDue)!==null?Ie.totalDue:at},[w,Ie,B,bt]),Xn=b.useMemo(()=>w.reduce((at,Nt)=>at+Nt.total,0),[w]),wr=b.useMemo(()=>Xn*(B/100),[Xn,B]),Un=b.useMemo(()=>(Ie==null?void 0:Ie.totalPaid)??0,[Ie]),Tn=b.useMemo(()=>(Ie==null?void 0:Ie.balance)!==void 0&&(Ie==null?void 0:Ie.balance)!==null?Ie.balance:Tt-Un,[Ie,Tt,Un]);b.useEffect(()=>{if(Tt>0&&Be){const at=`upi://pay?pa=${Be}&pn=${encodeURIComponent(Ye)}&am=${Tt.toFixed(2)}&cu=INR`;Ct(at)}else Ct("")},[Tt,Be,Ye]),b.useEffect(()=>{(async()=>{if(L==="credit"&&e){K(!0);try{const Nt=await ue(`/api/patient-debts/${e}/balance`);if(Nt.ok){const _t=await Nt.json();$e(_t.netDebt||0)}else $e(0)}catch(Nt){console.error("Error fetching patient debt:",Nt),$e(0)}finally{K(!1)}}})()},[L,e]);const Nn=()=>{const at=parseFloat(me);!isNaN(at)&&at>=0?(pe(at),localStorage.setItem(Cz,at.toString())):alert("Invalid fee amount.")},ui=async(at,Nt)=>{ae(!0),q(null);try{const _t=await ue("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Nt,billId:at})}),Rt=await _t.json();if(!_t.ok||!Rt.order)throw new Error(Rt.message||"Failed to create Razorpay order.");const{key_id:jn,order:Mn}=Rt,bi={key:jn,amount:Mn.amount,currency:Mn.currency,name:"Newtons Ai HMS Clinic",description:`Bill Payment for Patient ID: ${e}`,order_id:Mn.id,handler:async function(ga){try{const lo=await ue("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:ga.razorpay_payment_id,razorpay_order_id:ga.razorpay_order_id,razorpay_signature:ga.razorpay_signature,billId:at})}),Dd=await lo.json();if(lo.ok&&Dd.success)i&&i(at),a&&a(),setTimeout(()=>window.print(),200);else throw new Error(Dd.message||"Payment verification failed.")}catch(lo){q(`Payment verification failed: ${lo.message}. Contact support.`)}finally{ae(!1)}},prefill:{name:(v==null?void 0:v.name)||""},notes:{bill_id:at,patient_id:e},theme:{color:"#3399cc"},modal:{ondismiss:function(){q("Payment cancelled."),ae(!1)}}};if(window.Razorpay)new window.Razorpay(bi).open();else throw new Error("Razorpay SDK not loaded.")}catch(_t){q(`Failed to initiate online payment: ${_t.message}`),ae(!1)}},Vn=async()=>{if(!t){q("Bill ID is missing.");return}const at=ie?Hi:parseFloat(re);if(isNaN(at)||at<=0){q("Please enter a valid positive payment amount.");return}Q(!0),q(null);try{if(ie){for(const Nt of ee)if(Nt.amount>0){const _t=await ue(`/api/bills/${t}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:Nt.amount,payment_mode:Nt.method})});if(!_t.ok){const Rt=await _t.json();throw new Error(Rt.message||`Failed to record ${Nt.method} payment`)}}}else{const Nt={amount_paid:at,payment_mode:ce},_t=await ue(`/api/bills/${t}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nt)}),Rt=await _t.json();if(!_t.ok)throw new Error(Rt.message||`Failed to record payment (Status: ${_t.status})`)}ve(""),ie&&(we([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),ge(!1)),a?a():console.log("Payment recorded.")}catch(Nt){q(`Failed to record payment: ${Nt.message}`)}finally{Q(!1)}},Hi=ee.reduce((at,Nt)=>at+Nt.amount,0),Hl=Math.abs(Hi-(bt==="create"?Tt:Hi))<.01,Ho=ie?ee.some(at=>at.method==="credit"):bt==="create"?L==="credit":ce==="credit",Gl=async()=>{if(bt==="view_pay")return;if(!e){q("Patient ID is missing for creating a bill.");return}if(w.length===0){q("Cannot finalize an empty bill.");return}if(ie&&Math.abs(Hi-Tt)>.01){q(`Split payment total (${Hi.toFixed(2)}) must match the bill total (${Tt.toFixed(2)}).`);return}ae(!0),q(null);const at=Tt,Nt=w.map(({id:Rt,...jn})=>jn),_t={patientId:e,queueId:n||null,items:Nt,amount:at,paymentMode:ie?"split":L==="online"?"online":L,type:o,related_id:l||g||null,status:L==="online"?"pending":ie||L?"paid":"pending",discountPercentage:B,labOrderId:g||null};if(ie&&(_t.splitPayments=ee.map(Rt=>({method:Rt.method,amount:Rt.amount}))),L==="online"&&!ie)try{const Rt=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_t)}),jn=await Rt.json();if(!Rt.ok)throw new Error(jn.message||"Failed to create pending bill.");ui(jn.id,Math.round(at*100))}catch(Rt){q(`Failed to create pending bill: ${Rt.message}`),ae(!1)}else{if(!L&&!ie){q("Payment mode required."),ae(!1);return}setTimeout(()=>window.print(),200);try{const Rt=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_t)}),jn=await Rt.json();if(!Rt.ok)throw new Error(jn.message||"Failed to create bill.");if(Ho&&e){const Mn=ie?ee.filter(bi=>bi.method==="credit").reduce((bi,ga)=>bi+ga.amount,0):L==="credit"?at:0;if(Mn>0)try{await ue(`/api/patient-debts/${e}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Mn,related_bill_id:jn.id,notes:`Bill #${jn.id} (Credit Part)`})})}catch(bi){console.error("Failed to create debt entry:",bi)}}i&&i(jn.id),ae(!1)}catch(Rt){q(`Failed to process bill: ${Rt.message}`),ae(!1)}}},Od=(Y==null?void 0:Y.status)??c,Go=bt==="view_pay"&&Y&&Od==="pending";return!e&&!t?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):H||bt==="view_pay"&&le?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):bt==="view_pay"&&!Y&&!le&&X?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",X]}):bt==="create"&&!v&&!H&&X?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",X]}):r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:Ye?`${Ye}`:"Bill"}),(gt||Je)&&r.jsxs("div",{className:"clinic-details-print",children:[gt&&r.jsx("span",{className:"small-text clinic-address",children:gt}),Je&&r.jsx("span",{className:"small-text clinic-notes",children:Je})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient"]})," ",(v==null?void 0:v.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Date"]})," ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]}),Y&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"# Invoice"})," ",V4e(Y.id)]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",v==null?void 0:v.name]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," ID"]})," ",v==null?void 0:v.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Age/Gender"]})," ",(v==null?void 0:v.age)??"N/A"," / ",(v==null?void 0:v.gender)??"N/A"]}),bt==="view_pay"&&Y&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Oc,{size:16})," Bill ID"]})," ",Y.id]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h2",{children:"Bill Items"}),bt==="create"&&o==="pharmacy"&&!f&&w.some(at=>at.drug_id!=null)&&r.jsxs("button",{onClick:()=>At(w),disabled:G,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[r.jsx(Yk,{size:14,className:`lucide ${G?"animate-spin":""}`}),G?"Refreshing...":"Refresh"]})]}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"}),bt==="create"&&!f&&r.jsx("th",{className:"no-print",children:"Action"})]})}),r.jsxs("tbody",{children:[bt==="create"&&w.map((at,Nt)=>r.jsxs("tr",{children:[r.jsx("td",{children:Nt+1}),r.jsx("td",{children:at.name}),r.jsx("td",{children:at.quantity}),r.jsxs("td",{children:["",at.price.toFixed(2)]}),r.jsxs("td",{children:["",at.total.toFixed(2)]}),!f&&r.jsx("td",{className:"no-print",children:typeof at.id=="number"&&at.name!=="Consultation Fee"?r.jsxs("button",{onClick:()=>wt(at.id),className:"remove-item-button",title:"Remove",children:[" ",r.jsx(Ut,{size:16})," "]}):r.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",r.jsx(iZ,{size:14})," "]})})]},at.id)),bt==="view_pay"&&Y&&Y.items.map((at,Nt)=>r.jsxs("tr",{children:[r.jsx("td",{children:Nt+1}),r.jsx("td",{children:at.name}),r.jsx("td",{children:at.quantity}),r.jsxs("td",{children:["",at.price.toFixed(2)]}),r.jsxs("td",{children:["",(at.total??at.price*at.quantity).toFixed(2)]})]},Nt)),(bt==="create"&&w.length===0||bt==="view_pay"&&(Y==null?void 0:Y.items.length)===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"20px"},children:"No items added."})})]})]}),bt==="create"&&!f&&r.jsxs("div",{className:"add-item-form no-print",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Item Description"}),r.jsx("input",{type:"text",value:C,onChange:at=>O(at.target.value),placeholder:"Service Name",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"80px"},children:[r.jsx("label",{children:"Qty"}),r.jsx("input",{type:"number",min:"1",value:I,onChange:at=>F(parseInt(at.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"100px"},children:[r.jsx("label",{children:"Price ()"}),r.jsx("input",{type:"number",value:A,onChange:at=>P(at.target.value),placeholder:"0.00",className:"custom-text-input"})]}),r.jsx("button",{onClick:qe,className:"add-item-button",children:"Add Item"}),o==="consultation"&&r.jsxs("div",{className:"default-fee-section",style:{marginLeft:"auto",display:"flex",alignItems:"flex-end",gap:"5px"},children:[r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{children:"Default Fee"}),r.jsx("input",{type:"number",value:me,onChange:at=>Ne(at.target.value),style:{width:"80px",padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}})]}),r.jsx("button",{onClick:Nn,className:"secondary-button",style:{padding:"10px"},children:r.jsx(io,{size:16})})]})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Xn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",B,"%)"]}),r.jsxs("span",{children:["- ",wr.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Tt.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px dashed #ddd"},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9em",marginBottom:"5px"},children:"Payment Mode:"}),ie?ee.map((at,Nt)=>at.amount>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:at.method.toUpperCase()}),r.jsxs("span",{children:["",at.amount.toFixed(2)]})]},Nt)):r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:L?L.toUpperCase():"CASH"}),r.jsxs("span",{children:["",Tt.toFixed(2)]})]}),bt==="view_pay"&&Ke&&Ke.length>0&&r.jsxs("div",{style:{marginTop:"5px"},children:[r.jsx("div",{style:{fontSize:"0.8em",color:"#666"},children:"Payment History:"}),Ke.map(at=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8em"},children:[r.jsxs("span",{children:[at.payment_mode," (",new Date(at.payment_date).toLocaleDateString(),")"]}),r.jsxs("span",{children:["",at.amount_paid]})]},at.id))]})]}),Ho&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",fontSize:"0.85em",fontWeight:500},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Prev. Debt:"}),r.jsxs("span",{children:["",(_e||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Net Payable:"}),r.jsxs("span",{children:["",((_e||0)+(ie?ee.filter(at=>at.method==="credit").reduce((at,Nt)=>at+Nt.amount,0):L==="credit"?Tt:0)).toFixed(2)]})]})]})]}),dt&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(pa,{value:dt,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Xn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),bt==="create"&&!f?r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:B,onChange:at=>$(parseFloat(at.target.value)||0),min:"0",max:"100",className:"discount-input-total"}),"%"]}):r.jsxs("span",{children:[B,"%"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Amount"}),r.jsxs("span",{children:["- ",wr.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Tt.toFixed(2)]})]}),bt==="view_pay"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"summary-row",style:{color:"green"},children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Un.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",style:{color:"red",fontWeight:"bold"},children:[r.jsx("span",{children:"Balance Due"}),r.jsxs("span",{children:["",Tn.toFixed(2)]})]})]}),r.jsx("div",{className:"qr-code-container",children:dt?r.jsxs(r.Fragment,{children:[r.jsx(pa,{value:dt,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available."})}),bt==="create"&&r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>ge(!ie),disabled:f||W,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ie?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ie?"rgba(79, 172, 254, 0.1)":"transparent",color:ie?"#4facfe":"#666",cursor:f||W?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qc,{size:14})," Split"]})]}),ie?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Hi.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:ee.map((at,Nt)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Nt+1}),r.jsxs("select",{value:at.method,onChange:_t=>Le(at.id,"method",_t.target.value),className:"split-payment-select",disabled:W,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:at.amount||"",onChange:_t=>Le(at.id,"amount",parseFloat(_t.target.value)||0),className:"split-payment-input",disabled:W})]}),ee.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>oe(at.id,Tt),className:"split-payment-btn split-payment-btn-fill",title:"Fill",children:"Buy"}),r.jsx("button",{type:"button",onClick:()=>Ge(at.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Yn,{size:12})})]})]},at.id))}),ee.length<5&&r.jsxs("button",{type:"button",onClick:Ue,className:"split-payment-add-btn",disabled:W,children:[r.jsx(hr,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Required:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Tt.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Hl?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:Hl?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",Hi.toFixed(2)]})]})]})]}):r.jsxs("select",{id:"paymentMode",value:L,onChange:at=>V(at.target.value),className:"payment-mode-select",disabled:f||W,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"}),r.jsx("option",{value:"online",children:"Online (Razorpay)"})]})]}),bt==="create"&&L==="credit"&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),ze?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:_e&&_e>0?"#dc3545":"#28a745"},children:["",(_e||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"This Bill:"}),r.jsxs("strong",{children:["+ ",Tt.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((_e||0)+Tt).toFixed(2)]})]})]})]}),bt==="create"&&!f&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:Gl,className:"primary-button",disabled:W||w.length===0,children:W?"Processing...":"Finalise and Bill"})}),bt==="view_pay"&&r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:()=>window.print(),className:"secondary-button",children:"Print Bill"}),Go&&Tn>0&&r.jsxs("div",{className:"payment-recording-section",style:{marginTop:"20px",borderTop:"1px dashed #ccc",paddingTop:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("h3",{style:{fontSize:"1em",marginBottom:"0"},children:"Record Payment"}),r.jsxs("button",{type:"button",onClick:()=>ge(!ie),disabled:se,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",fontSize:"0.75rem",border:ie?"1px solid #4facfe":"1px solid #ccc",borderRadius:"4px",backgroundColor:ie?"rgba(79, 172, 254, 0.1)":"transparent",color:ie?"#4facfe":"#666",cursor:se?"not-allowed":"pointer"},children:[r.jsx(qc,{size:12})," Split"]})]}),ie?r.jsxs("div",{className:"split-payment-wrapper",style:{marginBottom:"10px",fontSize:"0.9em"},children:[r.jsx("div",{className:"split-payment-list",children:ee.map(at=>r.jsxs("div",{className:"split-payment-row",children:[r.jsxs("select",{value:at.method,onChange:Nt=>Le(at.id,"method",Nt.target.value),className:"split-payment-select",disabled:se,style:{padding:"4px"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Ins."}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",style:{left:"5px",fontSize:"0.8em"},children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:at.amount||"",onChange:Nt=>Le(at.id,"amount",parseFloat(Nt.target.value)||0),className:"split-payment-input",style:{paddingLeft:"15px"},disabled:se})]}),ee.length>2&&r.jsx("button",{type:"button",onClick:()=>Ge(at.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Yn,{size:12})})]},at.id))}),ee.length<5&&r.jsxs("button",{type:"button",onClick:Ue,className:"split-payment-add-btn",disabled:se,style:{fontSize:"0.8em",padding:"4px"},children:[r.jsx(hr,{size:12})," Add"]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em",marginTop:"5px",color:"#666"},children:[r.jsxs("span",{children:["Paying: ",r.jsxs("strong",{children:["",Hi.toFixed(2)]})]}),r.jsxs("span",{style:{color:Hi>Tn?"red":"inherit"},children:["Max: ",Tn.toFixed(2)]})]})]}):r.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[r.jsx("input",{type:"number",value:re,onChange:at=>ve(at.target.value),placeholder:`Max ${Tn.toFixed(2)}`,className:"custom-text-input",style:{flex:1}}),r.jsxs("select",{value:ce,onChange:at=>fe(at.target.value),className:"custom-select-input",style:{width:"auto"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsx("button",{onClick:Vn,disabled:se||ie&&Hi<=0||!ie&&(!re||parseFloat(re)<=0),className:"primary-button",style:{width:"100%",fontSize:"0.9em"},children:se?"Recording...":"Record Payment"})]})]})]})})]}),r.jsxs("div",{className:"amount-in-words-print print-only",children:[r.jsx("strong",{children:"Amount in Words:"})," ",U4e(bt==="view_pay"&&Y?Y.amount:Tt)]}),r.jsxs("div",{className:"terms-conditions-print print-only",children:[r.jsx("h4",{children:"Terms & Conditions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Goods once sold will not be taken back or exchanged."}),r.jsx("li",{children:"All disputes are subject to local jurisdiction."}),r.jsx("li",{children:"Please retain this bill for future reference."})]})]}),r.jsxs("div",{className:"signature-section-print print-only",children:[r.jsx("div",{className:"receiver-sign",children:r.jsx("div",{className:"sign-line",children:"Receiver's Signature"})}),r.jsxs("div",{className:"authorized-sign",children:[r.jsxs("div",{className:"for-clinic",children:["For ",Ye||"Clinic"]}),r.jsx("div",{className:"sign-line",children:"Authorised Signatory"})]})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{className:"thank-you",children:"Thank you for your visit!"}),r.jsx("p",{className:"computer-generated",children:"This is a computer generated invoice and does not require a physical signature."})]})]})]})},G4e=()=>{const e=It(),t=Gr(),{patientId:n,queueId:i,patientName:a,initialItems:s,billType:o,relatedId:l,initialStatus:c,initialDiscountPercentage:u,doctorId:f,billId:p,labOrderId:g}=t.state||{},[x,v]=b.useState(null),[j,w]=b.useState(null),[_,T]=b.useState(null),[C,O]=b.useState(null),[A,P]=b.useState(null),[I,F]=b.useState(null),[B,$]=b.useState(null),[L,V]=b.useState(null),[H,te]=b.useState(!0),[X,q]=b.useState(null),[W,ae]=b.useState(a||"");b.useEffect(()=>{if(!n){console.error("BillingPage loaded without required patientId in location state."),e("/");return}(async()=>{te(!0),q(null);try{let Oe=n,Ke=s||null,Me=c||null,Ie=o||null,be=l||null,re=u!==void 0?parseFloat(u):null,ve=a||null,ce=null;if(p){console.log(`Fetching details for Bill ID: ${p}`);const fe=await ue(`/api/bills/${p}`);if(!fe.ok){const Q=await fe.json().catch(()=>({message:`Failed to fetch bill details for ID ${p}`}));throw new Error(Q.message||`Failed to fetch bill details (Status: ${fe.status})`)}const se=await fe.json();if(console.log("Fetched Bill Data:",se),Ke=se.bill.items||[],Me=se.bill.status||"pending",Ie=se.bill.type||null,be=se.bill.related_id||null,re=se.bill.discount_percentage!==void 0&&se.bill.discount_percentage!==null?parseFloat(se.bill.discount_percentage):0,Oe=se.bill.patient_id,O(Ke),P(Me),F(Ie),$(be),V(re),Oe){const Q=await ue(`/api/patients/${Oe}`);if(Q.ok){const ie=await Q.json();ve=ie.name,ce=ie.phone??null,T(ie.insurance_type??null),ae(ve),w(ce)}else console.warn(`Could not fetch patient details for ID ${Oe} from bill.`),ae("Patient (Not Found)")}else console.warn(`Bill ${p} does not have an associated patient_id.`),ae("Patient (Unknown)")}else if(g){console.log(`Fetching details for Lab Order ID: ${g}`);const fe=await ue(`/api/lab/${g}`);if(!fe.ok){let Q=`Failed to fetch lab order details (Status: ${fe.status} ${fe.statusText})`;try{Q=(await fe.json()).message||Q}catch{console.error("Response was not valid JSON:",await fe.text())}throw new Error(Q)}const se=await fe.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(se,null,2)),Ke=(se.tests||[]).filter(Q=>Q&&typeof Q.name=="string"&&Q.price!==void 0&&Q.id!==void 0).map(Q=>{const ie=parseFloat(Q.price||"0"),ge=!isNaN(ie)&&isFinite(ie)?ie:0;return{item_id:Q.id,name:Q.name,price:ge,quantity:1,total:ge*1,type:"lab_test"}}),Ke&&Ke.length===0&&(se.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",se.tests),q(Q=>`${Q?Q+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),Me="pending",Ie="lab",be=g,Oe=se.patient_id,O(Ke),P(Me),F(Ie),$(be),Oe){const Q=await ue(`/api/patients/${Oe}`);if(Q.ok){const ie=await Q.json();ve=ie.name,ce=ie.phone??null,T(ie.insurance_type??null),ae(ve),w(ce)}else console.warn(`Could not fetch patient details for ID ${Oe} from lab order.`),ae("Patient (Not Found)")}else console.warn(`Lab Order ${g} does not have an associated patient_id.`),ae("Patient (Unknown)")}else if(O(s||null),P(c||null),F(o||null),$(l||null),V(u!==void 0?parseFloat(u):null),ae(a||`ID ${n}`),Oe){const fe=await ue(`/api/patients/${Oe}`);if(fe.ok){const se=await fe.json();w(se.phone??null),T(se.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${Oe}.`)}if(i){const fe=await ue(`/api/queue/${i}`);if(fe.ok){const se=await fe.json();v(se.token_number)}else console.warn(`Could not fetch queue details for ID ${i}.`)}}catch(Oe){console.error("Error fetching billing page details:",Oe),q(`Failed to load details: ${Oe.message}`),O(null),P(null),F(null),$(null),ae(a||""),w(null),v(null)}finally{te(!1)}})()},[n,p,g,i,e]);const G=Y=>{console.log(`Billing process completed for patient ID ${n}. New Bill ID: ${Y}`),e(-1)},z=()=>{console.log(`Bill updated for patient ID ${n}.`),e(-1)};if(!n)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(fR,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),r.jsx("button",{onClick:()=>e("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(H)return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx(Z,{width:80,height:32})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx(Z,{width:300,height:32})}),r.jsxs("div",{className:"patient-info-bar mb-6",style:{display:"flex",gap:"1rem",padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:120,height:20}),r.jsx(Z,{width:140,height:20})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 space-y-4",children:[r.jsx(Z,{width:"100%",height:200,className:"rounded-lg"}),r.jsx(Z,{width:"100%",height:150,className:"rounded-lg"})]}),r.jsx("div",{className:"space-y-4",children:r.jsx(Z,{width:"100%",height:300,className:"rounded-lg"})})]})]})]});if(X)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(fR,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),r.jsx("p",{className:"text-sm text-center mb-4",children:X}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>e(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const je=(A??c)==="paid";return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:r.jsx(rn,{size:20,className:"lucide"})})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsxs("h3",{className:"billing-page-title",children:[p?"Bill Details":g?"Create Lab Bill":"Create Bill"," for Patient: ",W||`ID ${n}`]}),r.jsxs("div",{className:"patient-info-bar",children:[x!==null&&r.jsxs("span",{children:[r.jsx(Fa,{size:14,className:"lucide"})," Token: ",x]}),j&&r.jsxs("span",{children:[r.jsx(cg,{size:14,className:"lucide"})," Phone: ",j]}),g&&r.jsxs("span",{className:"lab-order-info",children:[r.jsx(os,{size:14,className:"lucide"})," Lab Order: ",g.substring(0,8),"..."]}),!j&&x===null&&!g&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),_&&r.jsxs("span",{className:"insurance-info",children:[r.jsx(KZ,{size:14,className:"lucide"})," Insurance: ",_.replace(/_/g," ").replace(/\b\w/g,Y=>Y.toUpperCase())]}),!j&&x===null&&!g&&!_&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),r.jsx(H4e,{patientId:n,labOrderId:g,queueId:i,onBillCreated:G,onBillUpdated:z,initialItems:C??s,billType:I??o,relatedId:B??l,initialStatus:A??c,initialDiscountPercentage:L??u,readOnlyMode:je,doctorId:f,patientInsuranceType:_??void 0})]})]})},W4e=()=>{const{patientId:e}=Ii(),t=It(),[n,i]=b.useState([]),[a,s]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState("");return b.useEffect(()=>{(async()=>{if(!e){l("Patient ID not provided in URL.");return}s(!0),l(null),i([]);try{try{const x=await ue(`/api/patients/${e}`);if(x.ok){const v=await x.json();u(v.name)}}catch(x){console.warn("Could not fetch patient name:",x)}console.log(`Fetching pharmacy orders for patient ID: ${e}`);const p=await ue(`/api/pharmacy-orders/patient/${e}`);if(!p.ok){const x=await p.json().catch(()=>({}));throw new Error(x.message||`HTTP error! status: ${p.status}`)}const g=await p.json();console.log("Fetched Pharmacy Orders:",g),i(g||[])}catch(p){console.error("Error fetching pharmacy orders:",p),l(`Failed to load pharmacy orders: ${p.message}`)}finally{s(!1)}})()},[e]),r.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(rn,{size:16,className:"mr-1"}),"Back"]}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[r.jsx(Tf,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",c&&`for ${c}`]}),r.jsx("div",{})," "]}),a&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:100,height:20})]}),r.jsx(Z,{width:200,height:20,className:"mb-2"}),r.jsx(Z,{width:180,height:20,className:"mb-3"}),r.jsx(Z,{width:120,height:24,className:"mb-2"}),r.jsxs("div",{className:"space-y-1 ml-4",children:[r.jsx(Z,{width:"80%",height:16}),r.jsx(Z,{width:"70%",height:16}),r.jsx(Z,{width:"60%",height:16})]})]},f))}),o&&r.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:o}),!a&&n.length===0&&!o&&r.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!a&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Date:"})," ",new Date(f.date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm font-medium capitalize",children:[r.jsx("strong",{children:"Status:"})," ",f.status]})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Prescribed By:"})," ",f.prescribedBy||"N/A"]}),f.dispensedBy&&r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Dispensed By:"})," ",f.dispensedBy]}),r.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),r.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:f.medications.map((p,g)=>r.jsxs("li",{children:[p.name," - Qty: ",p.quantity,p.tabletsPerDay&&` (${p.tabletsPerDay} per day`,p.numberOfDays&&` for ${p.numberOfDays} days)`,!p.tabletsPerDay&&p.numberOfDays&&` (for ${p.numberOfDays} days)`,p.tabletsPerDay&&!p.numberOfDays&&")"]},g))})]},f.id))})]})},K4e=()=>{const e=It(),t=Gr(),[n,i]=b.useState(null),[a,s]=b.useState([]),[o,l]=b.useState([]),[c,u]=b.useState(""),[f,p]=b.useState([]),[g,x]=b.useState(null),[v,j]=b.useState(!1),[w,_]=b.useState(null),[T,C]=b.useState(!0),[O,A]=b.useState(""),[P,I]=b.useState([]),[F,B]=b.useState(!1),[$,L]=b.useState(null),[V,H]=b.useState(!1),[te,X]=b.useState(!1),[q,W]=b.useState([]),[ae,G]=b.useState(!1),[z,le]=b.useState(null),je=/^\+?[0-9\s\-().]{7,20}$/,Y=/^[a-zA-Z\s'-]{2,}$/,Oe=b.useCallback(async()=>{try{const oe=await ue("/api/drugs");if(!oe.ok)throw new Error("Failed to fetch drugs");const _e=await oe.json(),$e=_e.drugs||_e||[];s($e)}catch(oe){console.error("Failed to fetch available drugs:",oe),x("Could not load drug list. "+oe.message)}},[]),Ke=b.useCallback(async oe=>{G(!0),le(null);try{const _e=await ue(`/api/pharmacy-orders/patient/${oe}`);if(!_e.ok){const ze=await _e.json().catch(()=>({}));throw new Error(ze.message||`HTTP error! status: ${_e.status}`)}const $e=await _e.json();W($e||[])}catch(_e){console.error("Failed to fetch previous pharmacy orders:",_e),le(`Could not load previous orders: ${_e.message}`)}finally{G(!1)}},[]);b.useEffect(()=>{var oe;Oe(),(oe=t.state)!=null&&oe.patient?re(t.state.patient):C(!0)},[Oe,t.state]),b.useEffect(()=>{n!=null&&n.id?Ke(n.id):W([])},[n,Ke]);const Me=b.useMemo(()=>new so(a,{keys:["name","brand_name"],threshold:.3}),[a]);b.useEffect(()=>{if(!c){p([]);return}const oe=Me.search(c).map(_e=>_e.item);p(oe.slice(0,10))},[c,Me]);const Ie=b.useMemo(()=>xd(async oe=>{if(oe.trim().length<2){I([]),B(!1),L(null);return}B(!0),L(null);try{const _e=new URLSearchParams({search:encodeURIComponent(oe),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),$e=await ue(`/api/patients?${_e.toString()}`);if(!$e.ok){const K=await $e.text();throw new Error(`API Error (${$e.status}): ${K||$e.statusText}`)}const ze=await $e.json();I(ze.patients)}catch(_e){console.error("Error searching patients:",_e),L(_e.message||"Failed to search patients."),I([])}finally{B(!1)}},300),[je]),be=oe=>{const _e=oe.target.value;A(_e),H(je.test(_e)),X(Y.test(_e)&&!je.test(_e)),B(!0),Ie(_e)},re=b.useCallback(oe=>{i(oe),C(!1),A(""),I([]),L(null)},[]),ve=b.useCallback(async oe=>{if(!O||oe==="phone"&&!V||oe==="name"&&!te){L(`Invalid ${oe} to create a new patient.`);return}B(!0),L(null);try{const $e=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:oe==="name"?O:"direct pharmacy",phone:oe==="phone"?O:null,age:null,gender:null,token:null})});if(!$e.ok){const K=await $e.json();throw new Error(K.message||`Failed to create patient: ${$e.statusText}`)}const ze=await $e.json();alert(`New patient "${ze.name}" created with ${oe==="phone"?`phone ${ze.phone}`:`name ${ze.name}`}.`),re(ze)}catch(_e){console.error("Error creating new patient:",_e),L(_e.message||"Failed to create new patient.")}finally{B(!1)}},[O,V,te,re]),ce=()=>{i(null),C(!0),l([]),x(null),W([])},fe=oe=>{if(o.some(_e=>_e.drug_id===oe.id)){const _e=oe.name||oe.brand_name||"This drug";x(`${_e} is already in the order.`),setTimeout(()=>x(null),3e3),u(""),p([]);return}l(_e=>[..._e,{drug_id:oe.id,name:oe.name||oe.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,tabletsPerDay:1,numberOfDays:1,mrp:Number(oe.mrp)||0,originalMrp:Number(oe.mrp)||0,stock:oe.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(oe.mrp)||0)/(Q(oe.pack)||1),pack:oe.pack}]),u(""),p([])},se=()=>{const oe=c.trim();if(!oe){x("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>x(null),3e3);return}e("/dashboard/inventory/add",{state:{initialDrugName:oe}}),u(""),p([])},Q=oe=>{if(!oe)return null;const _e=oe.match(/(?:\d+x)?(\d+)/);return _e?parseInt(_e[1],10):null},ie=oe=>{l(_e=>_e.filter($e=>($e.drug_id??$e.name)!==oe))},ge=(oe,_e)=>{l($e=>$e.map(ze=>{if((ze.drug_id??ze.name)===oe&&ze.isLoose){const ye=Q(ze.pack),pe=Math.max(0,_e),me=pe*(ye??1)+(ze.looseUnits??0);return{...ze,loosePacks:pe,looseQuantity:me,pack_quantity:pe}}return ze}))},ee=(oe,_e)=>{l($e=>$e.map(ze=>{if((ze.drug_id??ze.name)===oe&&ze.isLoose){const ye=Q(ze.pack),pe=Math.max(0,_e),me=(ze.loosePacks??0)*(ye??1)+pe;return{...ze,looseUnits:pe,looseQuantity:me}}return ze}))},we=oe=>{const _e=[];oe.medications.forEach($e=>{if(o.find(K=>K.drug_id&&$e.drug_id&&K.drug_id===$e.drug_id||K.name.toLowerCase()===$e.name.toLowerCase()))l(K=>K.map(ye=>{if(ye.drug_id&&$e.drug_id&&ye.drug_id===$e.drug_id||ye.name.toLowerCase()===$e.name.toLowerCase()){const pe=(ye.pack_quantity??0)+($e.pack_quantity??0),me=(ye.loose_quantity??0)+($e.loose_quantity??0),Ne=$e.tabletsPerDay??ye.tabletsPerDay,Be=$e.numberOfDays??ye.numberOfDays,ke=Q(ye.pack),Ye=pe*(ke??1)+me;return{...ye,pack_quantity:pe,loose_quantity:me,directions_to_use:$e.directions_to_use??ye.directions_to_use,tabletsPerDay:Ne,numberOfDays:Be,looseQuantity:Ye,loosePacks:Math.floor(Ye/(ke??1)),looseUnits:Ye%(ke??1)}}return ye}));else{let K=$e.drug_id,ye=$e.drug_id?a.find(pe=>pe.id===$e.drug_id):void 0;if(!K&&$e.name){const pe=a.find(me=>me.name&&me.name.toLowerCase()===$e.name.toLowerCase());pe&&(K=pe.id,ye=pe)}_e.push({drug_id:K,name:$e.name,pack_quantity:$e.pack_quantity??0,loose_quantity:$e.loose_quantity??0,directions_to_use:$e.directions_to_use,tabletsPerDay:$e.tabletsPerDay??1,numberOfDays:$e.numberOfDays??1,mrp:ye?ye.mrp:$e.pack_price,originalMrp:ye?ye.mrp:$e.pack_price,stock:ye?ye.stock:$e.stock,isLoose:!0,loosePacks:0,looseUnits:($e.pack_quantity??0)*(Q((ye==null?void 0:ye.pack)||$e.pack)??1)+($e.loose_quantity??0),looseQuantity:($e.pack_quantity??0)*(Q((ye==null?void 0:ye.pack)||$e.pack)??1)+($e.loose_quantity??0),pricePerLooseUnit:(ye?Number(ye.mrp):Number($e.pack_price)||0)/(Q((ye==null?void 0:ye.pack)||$e.pack)||1),pack:(ye==null?void 0:ye.pack)||$e.pack})}}),l($e=>[...$e,..._e]),oe.prescriptionForUnavailableDrugs&&(!w||!w.includes(oe.prescriptionForUnavailableDrugs))&&_($e=>$e?`${$e}

-- From Order ${oe.id.substring(0,8)} --
${oe.prescriptionForUnavailableDrugs}`:oe.prescriptionForUnavailableDrugs),x("Medications from previous order added to current order."),setTimeout(()=>x(null),3e3)},Ue=async oe=>{if(oe.preventDefault(),x(null),j(!0),!n){x("No patient selected for the order."),j(!1);return}if(o.length===0&&!(w!=null&&w.trim())){x("Please add at least one medication or provide a prescription for unavailable drugs."),j(!1);return}const _e=o.filter(ze=>{const K=ze.looseQuantity??0;return K<=0||ze.stock!==void 0&&K>ze.stock});if(_e.length>0){x(`Invalid quantity or insufficient stock for: ${_e.map(ze=>ze.name).join(", ")}`),j(!1);return}const $e={patient_id:n.id,items:o.map(ze=>{const K=ze.mrp??0,ye=ze.pricePerLooseUnit??0,pe=ye*(ze.looseQuantity??0);return{drug_id:ze.drug_id===void 0?null:ze.drug_id,name:ze.name,pack_quantity:ze.loosePacks??0,loose_quantity:ze.looseUnits??0,pack_price:K,loose_price:ye,total_price:pe,price:ze.originalMrp??0,directions_to_use:ze.directions_to_use===void 0?null:ze.directions_to_use,tabletsPerDay:ze.tabletsPerDay??1,numberOfDays:ze.numberOfDays??1}}),order_total:Ge,prescription_for_unavailable_drugs:w};try{const ze=await ue("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($e)});if(!ze.ok){const K=await ze.json();throw new Error(K.message||`Failed to create order: ${ze.statusText}`)}e(-1)}catch(ze){console.error("Failed to create pharmacy order:",ze),x(ze.message||"Failed to create order. Please try again.")}finally{j(!1)}},Ge=b.useMemo(()=>o.reduce((oe,_e)=>{const $e=_e.isLoose?_e.pricePerLooseUnit??0:_e.mrp??0,ze=_e.isLoose?_e.looseQuantity??0:_e.quantity??0;return oe+$e*ze},0),[o]),Le=(Number(Ge)||0).toFixed(2);return r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",r.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsxs("button",{onClick:()=>e(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[r.jsx(rn,{size:20})," "]}),r.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),T&&r.jsxs("div",{className:"content-section",children:[" ",r.jsx("h3",{className:"section-title",children:"Select Patient"})," ",r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:O,onChange:be,className:"custom-text-input mt-1",autoFocus:!0})]}),$&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:$})," ",F?r.jsx("div",{className:"patient-search-results items-loading mt-1",children:[1,2,3].map(oe=>r.jsx("div",{className:"px-4 py-3 border-b border-gray-100 last:border-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:120,height:20})]}),r.jsx("div",{className:"mt-1 sm:mt-0",children:r.jsx(Z,{width:150,height:16})})]})},oe))}):P.length>0&&r.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",r.jsxs("ul",{children:[" ",P.map(oe=>r.jsxs("li",{onClick:()=>re({id:oe.id,name:oe.name,token:oe.token,age:oe.age,gender:oe.gender,phone:oe.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",oe.token]}),oe.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[oe.age?`${oe.age} yrs`:"Age N/A",oe.gender?` / ${oe.gender}`:" / Gender N/A",oe.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",oe.phone]})]})]}),oe.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",oe.phone]})]},oe.id))]})]}),O.length>=2&&!F&&P.length===0&&!$&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',O,'".']}),V&&r.jsx("button",{type:"button",onClick:()=>ve("phone"),className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:F,children:'Create "direct pharmacy" Patient with this Phone'}),te&&r.jsx("button",{type:"button",onClick:()=>ve("name"),className:"create-patient-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-2",disabled:F,children:"Create Patient with this Name"})]}),O.length<2&&!F&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),n&&!T&&r.jsxs("form",{onSubmit:Ue,children:[r.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:"section-title",children:[" ","Patient: ",r.jsx("span",{className:"font-normal",children:n.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:n.token??"N/A"}),n.age&&`    Age: ${n.age}`,n.gender&&`    Gender: ${n.gender}`,n.phone&&`    Phone: ${n.phone}`]}),r.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${n.id}`,children:["ID: ",n.id.substring(0,12),"..."]})]}),r.jsx("button",{type:"button",onClick:ce,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),g&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:g})," ",ae?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:[1,2].map(oe=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx(Z,{width:"90%",height:16}),r.jsx(Z,{width:"70%",height:16})]}),r.jsx(Z,{width:"100%",height:36,style:{borderRadius:"6px"}})]},oe))})]}):z?r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:z}):q.length>0?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:q.map(oe=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"font-semibold text-gray-800",children:["Order Date: ",new Date(oe.date).toLocaleDateString()]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${oe.status==="dispensed"?"bg-green-100 text-green-800":oe.status==="pending"?"bg-yellow-100 text-yellow-800":oe.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:oe.status.charAt(0).toUpperCase()+oe.status.slice(1)})]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-3",children:oe.medications.map((_e,$e)=>r.jsxs("li",{children:[r.jsx("strong",{children:_e.name}),": ",_e.quantity," Qty",_e.directions_to_use&&` - Directions: ${_e.directions_to_use}`]},$e))}),oe.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Prescription for Unavailable:"}),r.jsxs("div",{className:"prose prose-sm max-w-none",children:[" ",r.jsx(Ef,{remarkPlugins:[kf],children:oe.prescriptionForUnavailableDrugs})]})]}),r.jsxs("button",{type:"button",onClick:()=>we(oe),className:"add-previous-meds-button mt-3 px-3 py-1.5 text-sm font-medium rounded-md flex items-center justify-center",children:[r.jsx(hr,{size:16,className:"mr-1"})," Add Medications to Current Order"]})]},oe.id))})]}):n&&r.jsx("div",{className:"content-section text-center py-4 mt-4",children:r.jsx("p",{className:"text-gray-500",children:"No previous orders found for this patient."})}),r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:w??"",onChange:oe=>_(oe.target.value||null),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[" ",r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:c,onChange:oe=>u(oe.target.value),className:"custom-text-input mt-1"}),c&&r.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",f.length>0&&r.jsxs("ul",{children:[" ",f.map(oe=>r.jsxs("li",{onClick:()=>fe(oe),className:"cursor-pointer select-none relative",children:[r.jsx("span",{className:"font-medium block truncate",children:oe.name||oe.brand_name}),r.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",oe.stock??"N/A",", MRP: ",Number(oe.mrp||0).toFixed(2),")"]})]},oe.id))]}),c.trim()&&!a.some(oe=>oe.name&&oe.name.toLowerCase()===c.trim().toLowerCase()||oe.brand_name&&oe.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsxs("div",{onClick:se,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',c.trim(),'" as new item']}),c.trim()&&f.length===0&&a.some(oe=>oe.name&&oe.name.toLowerCase()===c.trim().toLowerCase()||oe.brand_name&&oe.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",r.jsx("h4",{className:"section-title",children:"Order Items"})," ",o.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),o.length>0&&r.jsx("ul",{className:"space-y-4",children:o.map(oe=>{const _e=oe.drug_id??oe.name,$e=!oe.drug_id;return r.jsxs("li",{className:"order-item-card text-sm",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsxs("span",{className:`item-name block text-base ${$e?"custom":""}`,children:[" ",oe.name,$e?" (custom)":""]}),!$e&&oe.pricePerLooseUnit!==void 0&&r.jsxs("span",{className:"item-details text-xs",children:[" ","@ ",(Number(oe.pricePerLooseUnit)||0).toFixed(2)," per loose unit"]}),oe.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${oe.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",oe.stock,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-packs-${_e}`,className:"dosage-label",children:"Packs:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>ge(_e,(oe.loosePacks??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-packs-${_e}`,min:"0",value:oe.loosePacks||"",onChange:ze=>{const K=parseInt(ze.target.value,10);ge(_e,isNaN(K)?0:K)},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>ge(_e,(oe.loosePacks??0)+1),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-units-${_e}`,className:"dosage-label",children:"Loose:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>ee(_e,(oe.looseUnits??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-units-${_e}`,min:"0",value:oe.looseUnits||"",onChange:ze=>{const K=parseInt(ze.target.value,10);ee(_e,isNaN(K)?0:K)},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>ee(_e,(oe.looseUnits??0)+1),className:"quantity-btn",children:"+"})]}),oe.pack&&r.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",oe.pack.split("x")[1]||oe.pack," per pack)"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","",(Number((oe.pricePerLooseUnit??0)*(oe.looseQuantity??0))||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ie(_e),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:r.jsx(Yn,{size:18})})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2 mt-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`tablets-per-day-${_e}`,className:"dosage-label",children:"Per Day:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(ze=>ze.map(K=>K.drug_id===_e?{...K,tabletsPerDay:Math.max(1,(K.tabletsPerDay??1)-1)}:K)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`tablets-per-day-${_e}`,min:"1",value:oe.tabletsPerDay??1,onChange:ze=>{const K=parseInt(ze.target.value,10);l(ye=>ye.map(pe=>pe.drug_id===_e?{...pe,tabletsPerDay:isNaN(K)?1:Math.max(1,K)}:pe))},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(ze=>ze.map(K=>K.drug_id===_e?{...K,tabletsPerDay:(K.tabletsPerDay??1)+1}:K)),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`number-of-days-${_e}`,className:"dosage-label",children:"No. Days:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(ze=>ze.map(K=>K.drug_id===_e?{...K,numberOfDays:Math.max(1,(K.numberOfDays??1)-1)}:K)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`number-of-days-${_e}`,min:"1",value:oe.numberOfDays??1,onChange:ze=>{const K=parseInt(ze.target.value,10);l(ye=>ye.map(pe=>pe.drug_id===_e?{...pe,numberOfDays:isNaN(K)?1:Math.max(1,K)}:pe))},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(ze=>ze.map(K=>K.drug_id===_e?{...K,numberOfDays:(K.numberOfDays??1)+1}:K)),className:"quantity-btn",children:"+"})]})]})]}),r.jsx("div",{className:"flex items-center mt-2",children:oe.pack&&Q(oe.pack)&&r.jsx("span",{className:"ml-4 text-sm text-gray-400",children:(()=>{const ze=Q(oe.pack),K=oe.looseQuantity??0;if(ze&&ze>0){const ye=Math.floor(K/ze),pe=K%ze;return`(Subtract: ${ye} packs, ${pe} loose)`}return""})()})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${_e}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${_e}`,placeholder:"e.g., 'After food', 'Twice a day'",value:oe.directions_to_use??"",onChange:ze=>{const K=ze.target.value;l(ye=>ye.map(pe=>(pe.drug_id??pe.name)===_e?{...pe,directions_to_use:K}:pe))},className:"dosage-input text-sm w-full mt-1"})]})]},_e)})})]}),o.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ",Le]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:v||o.length===0&&!(w!=null&&w.trim()),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${v||o.length===0&&!(w!=null&&w.trim())?"":"hover:opacity-90"}`,children:v?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},$W=()=>{const{orderId:e}=Ii(),t=It(),[n,i]=b.useState(null),[a,s]=b.useState(null),[o,l]=b.useState([]),[c,u]=b.useState([]),[f,p]=b.useState(""),[g,x]=b.useState([]),[v,j]=b.useState(null),[w,_]=b.useState(!1),[T,C]=b.useState(null),[O,A]=b.useState(!0);eu();const P=b.useCallback(async()=>{A(!0);try{const q=await ue(`/api/pharmacy-orders/${e}`);if(!q.ok)throw new Error("Failed to fetch order details");const W=await q.json();i(W),s({id:W.patientId,name:W.patientName||"N/A",token:W.patientTokenNumber}),C(W.prescriptionForUnavailableDrugs);const ae=W.medications.map(G=>{const z=B(G.pack),le=G.pack_quantity*(z??1)+G.loose_quantity;return{...G,isLoose:!0,loosePacks:G.pack_quantity,looseUnits:G.loose_quantity,looseQuantity:le,pack_price:G.pack_price,loose_price:G.loose_price,total_price:G.total_price,pricePerLooseUnit:G.loose_price,originalPrice:G.pack_price,box_number:G.box_number,pack:G.pack,batch:G.batch,expiry_date:G.expiry_date,discount_percentage:G.discount_percentage}});u(ae)}catch(q){j("Could not load order details. "+q.message)}finally{A(!1)}},[e]),I=b.useCallback(async()=>{try{const q=await ue("/api/drugs");if(!q.ok)throw new Error("Failed to fetch drugs");const W=await q.json(),ae=W.drugs||W||[];l(ae)}catch(q){j("Could not load drug list. "+q.message)}},[]);b.useEffect(()=>{P(),I()},[P,I]);const F=b.useMemo(()=>new so(o,{keys:["name","brand_name"],threshold:.3}),[o]);b.useEffect(()=>{if(!f){x([]);return}const q=F.search(f).map(W=>W.item);x(q.slice(0,10))},[f,F]);const B=q=>{if(!q)return null;const W=q.match(/(?:\d+x)?(\d+)/);return W?parseInt(W[1],10):null},$=q=>{if(c.some(W=>W.drug_id===q.id)){j(`${q.name||q.brand_name} is already in the order.`),setTimeout(()=>j(null),3e3),p(""),x([]);return}u(W=>[...W,{drug_id:q.id,name:q.name||q.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,pack_price:Number(q.mrp)||0,loose_price:(Number(q.mrp)||0)/(B(q.pack)||1),total_price:(Number(q.mrp)||0)/(B(q.pack)||1),discount_percentage:0,directions_to_use:"",tabletsPerDay:1,numberOfDays:1,stock:q.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(q.mrp)||0)/(B(q.pack)||1),originalPrice:Number(q.mrp)||0,pack:q.pack}]),p(""),x([])},L=q=>{u(W=>W.filter(ae=>(ae.drug_id??ae.name)!==q))},V=(q,W)=>{u(ae=>ae.map(G=>{if((G.drug_id??G.name)===q&&G.isLoose){const z=B(G.pack),le=Math.max(0,W),je=le*(z??1)+(G.looseUnits??0);return{...G,loosePacks:le,looseQuantity:je,pack_quantity:le}}return G}))},H=(q,W)=>{u(ae=>ae.map(G=>{if((G.drug_id??G.name)===q&&G.isLoose){const z=B(G.pack),le=Math.max(0,W),je=(G.loosePacks??0)*(z??1)+le;return{...G,looseUnits:le,looseQuantity:je,loose_quantity:le}}return G}))},te=async q=>{if(q.preventDefault(),j(null),_(!0),c.length===0&&!(T!=null&&T.trim())){j("Please add at least one medication or provide a prescription."),_(!1);return}const W=c.filter(G=>{const z=G.looseQuantity??0;return z<=0||G.stock!==void 0&&z>G.stock});if(W.length>0){j(`Invalid quantity or insufficient stock for: ${W.map(G=>G.name).join(", ")}`),_(!1);return}const ae={items:c.map(G=>({drug_id:G.drug_id??null,name:G.name,pack_quantity:G.loosePacks??0,loose_quantity:G.looseUnits??0,pack_price:G.pack_price??0,loose_price:G.loose_price??0,total_price:(G.loose_price??0)*(G.looseQuantity??0),discount_percentage:G.discount_percentage??0,directions_to_use:G.directions_to_use??null,tabletsPerDay:G.tabletsPerDay??1,numberOfDays:G.numberOfDays??1})),prescription_for_unavailable_drugs:T,order_total:X};try{const G=await ue(`/api/pharmacy-orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!G.ok){const z=await G.json();throw new Error(z.message||"Failed to update order")}t(-1)}catch(G){j(G.message||"Failed to update order. Please try again.")}finally{_(!1)}},X=b.useMemo(()=>c.reduce((q,W)=>{const ae=W.loose_price??0,G=W.looseQuantity??0;return q+ae*G},0),[c]);return O?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsx(Z,{width:300,height:32})]}),r.jsx("div",{className:"header-right",children:r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}})})]}),r.jsx("div",{className:"order-meta",style:{display:"flex",gap:"1rem",margin:"1rem 0"},children:r.jsx(Z,{width:200,height:24})}),r.jsxs("div",{className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(Z,{width:200,height:24})}),r.jsx("div",{style:{padding:"1.5rem"},children:r.jsx(Z,{height:42})})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(Z,{width:250,height:24})}),r.jsxs("div",{className:"table-container",style:{padding:"0 1rem 1rem"},children:[r.jsxs("div",{className:"table-header-row",style:{display:"flex",gap:"1rem",padding:"1rem"},children:[r.jsx(Z,{width:"30%",height:20}),r.jsx(Z,{width:"20%",height:20}),r.jsx(Z,{width:"20%",height:20}),r.jsx(Z,{width:"15%",height:20}),r.jsx(Z,{width:"5%",height:20})]}),r.jsx("div",{className:"table-body",children:[1,2,3].map(q=>r.jsxs("div",{className:"table-row",style:{display:"flex",gap:"1rem",padding:"1rem",borderBottom:"1px solid #eee"},children:[r.jsxs("div",{style:{width:"30%"},children:[r.jsx(Z,{width:"80%",height:20,className:"mb-2"}),r.jsx(Z,{width:"40%",height:14})]}),r.jsx(Z,{width:"20%",height:36}),r.jsx(Z,{width:"20%",height:36}),r.jsx(Z,{width:"15%",height:20,style:{alignSelf:"center"}}),r.jsx(Z,{width:"5%",height:24,style:{alignSelf:"center"}})]},q))})]})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx(Z,{width:180,height:24})}),r.jsx("div",{style:{padding:"1rem"},children:r.jsx(Z,{height:80})})]}),r.jsx("div",{style:{marginTop:"20px"},children:r.jsx(Z,{height:48,width:"100%"})})]})]})]}):n?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(rn,{size:20})}),r.jsxs("h2",{className:"page-title",children:["EDIT ORDER ",r.jsxs("span",{className:"text-gray-500 text-lg font-normal ml-2",children:[a==null?void 0:a.name," #",n.id.substring(0,4)]})]})]}),r.jsx("div",{className:"header-right",children:r.jsx("span",{className:"status-badge",children:n.status.toUpperCase()})})]}),r.jsx("div",{className:"order-meta",children:r.jsxs("span",{className:"order-date",children:[" Order Date: ",new Date(n.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})}),r.jsxs("form",{onSubmit:te,className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{children:" Find & Add Medication"})}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by name or brand...",value:f,onChange:q=>p(q.target.value),className:"search-input"}),f&&r.jsx("div",{className:"dropdown-results",children:g.length>0?r.jsx("ul",{children:g.map(q=>r.jsxs("li",{onClick:()=>$(q),className:"dropdown-item",children:[r.jsx("span",{className:"drug-name",children:q.name||q.brand_name}),r.jsxs("span",{className:"drug-meta",children:["(Stock: ",q.stock??"N/A",", MRP: ",Number(q.mrp||0).toFixed(2),")"]})]},q.id))}):r.jsxs("div",{className:"p-3 text-gray-500 text-sm",children:['No drugs found matching "',f,'"']})})]})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{children:[" Medications in Order ",r.jsxs("span",{className:"item-count",children:[c.length," items"]})]})}),c.length>0?r.jsxs("div",{className:"table-container",children:[r.jsxs("div",{className:"table-header-row",children:[r.jsx("div",{className:"col-medication",children:"MEDICATION"}),r.jsx("div",{className:"col-directions",children:"DIRECTIONS"}),r.jsx("div",{className:"col-quantity",children:"QUANTITY"}),r.jsx("div",{className:"col-subtotal",children:"SUBTOTAL"}),r.jsx("div",{className:"col-action"})]}),r.jsx("div",{className:"table-body",children:c.map(q=>{const W=q.drug_id??q.name;return r.jsxs("div",{className:"table-row",children:[r.jsxs("div",{className:"col-medication",children:[r.jsx("span",{className:"med-name",children:q.name}),q.pack&&r.jsx("span",{className:"med-unit text-xs text-gray-500 block",children:q.pack}),r.jsxs("div",{className:"stock-info",children:[" Stock: ",r.jsxs("span",{className:"stock-value",children:[" ",q.stock!==void 0?q.pack?`BOX OF ${B(q.pack)}`:q.stock:"N/A"]})]})]}),r.jsx("div",{className:"col-directions",children:r.jsx("input",{type:"text",placeholder:"1 tablet twice daily...",value:q.directions_to_use??"",onChange:ae=>{const G=ae.target.value;u(z=>z.map(le=>(le.drug_id??le.name)===W?{...le,directions_to_use:G}:le))},className:"directions-input"})}),r.jsx("div",{className:"col-quantity",children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"PACKS"}),r.jsx("input",{type:"number",min:"0",value:q.loosePacks||"",onChange:ae=>V(W,ae.target.value===""?0:parseInt(ae.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"LOOSE"}),r.jsx("input",{type:"number",min:"0",value:q.looseUnits||"",onChange:ae=>H(W,ae.target.value===""?0:parseInt(ae.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]})]})}),r.jsxs("div",{className:"col-subtotal",children:["",(Number((q.pricePerLooseUnit??0)*(q.looseQuantity??0))||0).toFixed(2)]}),r.jsx("div",{className:"col-action",children:r.jsx("button",{type:"button",onClick:()=>L(W),className:"delete-btn",title:"Remove Item",children:r.jsx(Yn,{size:18,strokeWidth:2.5})})})]},W)})})]}):r.jsx("div",{className:"empty-state",children:"No medications added. Search above to add."})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx("h3",{children:" Prescription Notes"})}),r.jsx("textarea",{rows:3,value:T??"",onChange:q=>C(q.target.value||null),placeholder:"Add notes about unavailable drugs...",className:"notes-input"})]}),r.jsxs("button",{type:"submit",disabled:w,className:"confirm-btn",style:{width:"100%",margin:"20px 0 0 0"},children:[r.jsx("span",{className:"check-icon",children:""})," ",w?"Updating...":"Confirm Changes"]}),v&&r.jsx("div",{className:"error-alert mt-4",children:v})]})]})]}):r.jsx("div",{className:"p-6 text-red-500 flex justify-center items-center h-screen",children:"Order not found or failed to load."})},Y4e=(e,t,n,i="non-black")=>{if(isNaN(e)||isNaN(t)||e<=0||t<=0)return null;let a;return n==="female"?e<=.7?a=141*Math.pow(e/.7,-.329)*Math.pow(.993,t):a=141*Math.pow(e/.7,-1.209)*Math.pow(.993,t):e<=.9?a=141*Math.pow(e/.9,-.411)*Math.pow(.993,t):a=141*Math.pow(e/.9,-1.209)*Math.pow(.993,t),i==="black"&&(a*=1.018),parseFloat(a.toFixed(2))},Q4e=(e,t,n)=>{if(isNaN(e)||isNaN(t)||isNaN(n)||e<0||t<0||n<0||n>=400)return null;const i=e-t-n/5;return parseFloat(i.toFixed(2))},X4e=(e,t)=>{if(isNaN(e)||isNaN(t)||e<0||t<0)return null;const n=e-t;return parseFloat(n.toFixed(2))},J4e=(e,t)=>{if(isNaN(e)||isNaN(t)||e<0||t<0)return null;const n=e-t;return parseFloat(n.toFixed(2))},Z4e=(e,t,n)=>{if(isNaN(e)||isNaN(t)||isNaN(n)||e<0||t<0||n<0)return null;const i=e-(t+n);return parseFloat(i.toFixed(2))},e3e=(e,t,n)=>{if(isNaN(e)||isNaN(t)||isNaN(n)||e<0||t<0||n<0)return null;const i=2*e+t/18+n/2.8;return parseFloat(i.toFixed(2))},t3e=e=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(e),Tz=()=>{var ce,fe;const{orderId:e}=Ii(),t=It(),[n,i]=b.useState(null),[a,s]=b.useState({}),[o,l]=b.useState(!0),[c,u]=b.useState(!1),[f,p]=b.useState(null),[g,x]=b.useState(null),[v,j]=b.useState(null),[w,_]=b.useState({}),[T,C]=b.useState(null),[O,A]=b.useState(!1),[P,I]=b.useState(""),[F,B]=b.useState(!1),[$,L]=b.useState(""),[V,H]=b.useState(""),[te,X]=b.useState(!1),[q,W]=b.useState(""),ae=b.useCallback(async se=>{var Q;try{const ie=await ue(`/api/patients/${se}`);if(!ie.ok)throw new Error(`Failed to fetch patient details: ${ie.status}`);const ge=await ie.json();x(ge.age),j(((Q=ge.sex)==null?void 0:Q.toLowerCase())==="female"?"female":"male"),ge.phone&&i(ee=>ee?{...ee,Patient:{...ee.Patient,phone:ge.phone}}:null)}catch(ie){console.error("Error fetching patient details:",ie),x(null),j(null)}},[]),G=b.useCallback(async()=>{if(e){l(!0),p(null);try{const se=await ue(`/api/lab/${e}`);if(!se.ok){const ge=await se.json().catch(()=>({message:`HTTP error! status: ${se.status}`}));throw new Error(ge.message||`HTTP error! status: ${se.status}`)}const Q=await se.json();if(i(Q),Q.createdAt)try{const ge=new Date(Q.createdAt),ee=new Date(ge.getTime()-ge.getTimezoneOffset()*6e4).toISOString().slice(0,16);I(ee)}catch(ge){console.error("Error formatting date for edit:",ge)}if(Q.report_date)try{const ge=new Date(Q.report_date),ee=new Date(ge.getTime()-ge.getTimezoneOffset()*6e4).toISOString().slice(0,16);L(ee)}catch(ge){console.error("Error formatting report date for edit:",ge)}else{const ge=new Date,ee=new Date(ge.getTime()-ge.getTimezoneOffset()*6e4).toISOString().slice(0,16);L(ee)}Q.referral_doctor&&W(Q.referral_doctor),Q.patient_id&&ae(Q.patient_id);const ie={};if(Q.tests&&Q.tests.forEach(ge=>{ie[ge.id]={},ge.default_parameters&&ge.default_parameters.length>0?ge.default_parameters.forEach(ee=>{ie[ge.id][ee.name]=ee.defaultValue}):ie[ge.id].report_content=""}),Q.report_content)try{const ge=JSON.parse(Q.report_content);typeof ge=="object"&&ge!==null&&!Array.isArray(ge)?s(ge):(console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),s(ie))}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),s(ie)}else s({})}catch(se){console.error("Failed to fetch lab order details:",se),p(se instanceof Error?se.message:"An unknown error occurred while fetching order details.")}finally{l(!1)}}},[e,ae]);b.useEffect(()=>{e?G():(p("No Order ID provided in the URL."),l(!1))},[e,G]),b.useEffect(()=>{(async()=>{try{const Q=await ue("/api/clinics/settings");if(Q.ok){const ie=await Q.json();H(ie.labLetterheadUrl||"")}}catch(Q){console.error("Error fetching clinic settings:",Q)}})()},[]);const z=(se,Q,ie)=>{s(ge=>{var Ye,rt,gt,Pe,Je,et,dt,Ct,bt,Ce,ct,At,qe,wt,Tt,Xn,wr,Un,Tn;const ee={...ge,[se]:{...ge[se],[Q]:ie}},we=parseFloat((Ye=ee[se])==null?void 0:Ye.Creatinine),Ue=g,Ge=v;if(Q==="Creatinine"&&!isNaN(we)&&Ue!==null&&Ge!==null){const Nn=Y4e(we,Ue,Ge);Nn!==null&&((rt=n==null?void 0:n.tests.find(Vn=>Vn.id===se))!=null&&rt.default_parameters.find(Vn=>Vn.name==="eGFR"))&&(ee[se].eGFR=Nn)}const Le=parseFloat((gt=ee[se])==null?void 0:gt["Total Cholesterol"]),oe=parseFloat((Pe=ee[se])==null?void 0:Pe["HDL Cholesterol"]),_e=parseFloat((Je=ee[se])==null?void 0:Je.Triglycerides);if((Q==="Total Cholesterol"||Q==="HDL Cholesterol"||Q==="Triglycerides")&&!isNaN(Le)&&!isNaN(oe)&&!isNaN(_e)){const Nn=Q4e(Le,oe,_e);Nn!==null&&((et=n==null?void 0:n.tests.find(Vn=>Vn.id===se))!=null&&et.default_parameters.find(Vn=>Vn.name==="LDL Cholesterol"))&&(ee[se]["LDL Cholesterol"]=Nn)}const $e=parseFloat((dt=ee[se])==null?void 0:dt["Total Bilirubin"]),ze=parseFloat((Ct=ee[se])==null?void 0:Ct["Direct Bilirubin"]);if((Q==="Total Bilirubin"||Q==="Direct Bilirubin")&&!isNaN($e)&&!isNaN(ze)){const Nn=X4e($e,ze);Nn!==null&&((bt=n==null?void 0:n.tests.find(Vn=>Vn.id===se))!=null&&bt.default_parameters.find(Vn=>Vn.name==="Indirect Bilirubin"))&&(ee[se]["Indirect Bilirubin"]=Nn)}const K=parseFloat((Ce=ee[se])==null?void 0:Ce["Total Protein"]),ye=parseFloat((ct=ee[se])==null?void 0:ct.Albumin);if((Q==="Total Protein"||Q==="Albumin")&&!isNaN(K)&&!isNaN(ye)){const Nn=J4e(K,ye);Nn!==null&&((At=n==null?void 0:n.tests.find(Vn=>Vn.id===se))!=null&&At.default_parameters.find(Vn=>Vn.name==="Globulin"))&&(ee[se].Globulin=Nn)}const pe=parseFloat((qe=ee[se])==null?void 0:qe.Sodium),me=parseFloat((wt=ee[se])==null?void 0:wt.Chloride),Ne=parseFloat((Tt=ee[se])==null?void 0:Tt.Bicarbonate);if((Q==="Sodium"||Q==="Chloride"||Q==="Bicarbonate")&&!isNaN(pe)&&!isNaN(me)&&!isNaN(Ne)){const Nn=Z4e(pe,me,Ne);Nn!==null&&((Xn=n==null?void 0:n.tests.find(Vn=>Vn.id===se))!=null&&Xn.default_parameters.find(Vn=>Vn.name==="Anion Gap"))&&(ee[se]["Anion Gap"]=Nn)}const Be=parseFloat((wr=ee[se])==null?void 0:wr.Glucose),ke=parseFloat((Un=ee[se])==null?void 0:Un.BUN);if((Q==="Sodium"||Q==="Glucose"||Q==="BUN")&&!isNaN(pe)&&!isNaN(Be)&&!isNaN(ke)){const Nn=e3e(pe,Be,ke);Nn!==null&&((Tn=n==null?void 0:n.tests.find(Vn=>Vn.id===se))!=null&&Tn.default_parameters.find(Vn=>Vn.name==="Osmolality"))&&(ee[se].Osmolality=Nn)}return ee})},le=async se=>{const Q=a[se]||{},ie=n==null?void 0:n.tests.find(Ue=>Ue.id===se);if(!ie)return;const ge={};ie.default_parameters&&ie.default_parameters.forEach(Ue=>{ge[Ue.name]=Ue.defaultValue});const ee={...ge,...Q},we={...a,[se]:ee};s(we),u(!0),p(null);try{const Ue=await ue(`/api/lab/${e}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(we),isPartial:!0})});if(!Ue.ok)throw new Error(`Save failed: ${Ue.status}`)}catch(Ue){console.error("Error saving test report:",Ue),alert("Failed to save test report.")}finally{u(!1)}},je=async(se=null)=>{if(!n||!n.tests||!e){alert("Order details not loaded.");return}u(!0),p(null);try{let Q;if(se===null){const ge={};n.tests.forEach(ee=>{const we=a[ee.id]||{},Ue={};ee.default_parameters&&ee.default_parameters.forEach(Ge=>{Ge.defaultValue!==void 0&&Ge.defaultValue!==null&&(Ue[Ge.name]=Ge.defaultValue)}),ge[ee.id]={...Ue,...we},(!ee.default_parameters||ee.default_parameters.length===0)&&!ge[ee.id].report_content&&(ge[ee.id].report_content="")}),Q=ge,s(ge)}else{const ge=a[se]||{},ee=n.tests.find(Ge=>Ge.id===se);if(!ee){u(!1);return}const we={};ee.default_parameters&&ee.default_parameters.forEach(Ge=>{we[Ge.name]=Ge.defaultValue});const Ue={...we,...ge};Q={...a,[se]:Ue},s(Q)}const ie=await ue(`/api/lab/${e}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(Q),isPartial:se!==null})});if(!ie.ok)throw new Error(`Save failed: ${ie.status}`);C(se),setTimeout(()=>{window.print()},100)}catch(Q){console.error("Error saving before print:",Q),alert("Failed to save report before printing.")}finally{u(!1)}},Y=()=>{n&&gI(n)},Oe=async()=>{if(!n||!n.tests){alert("Order details not loaded.");return}if(!e){alert("Cannot submit report without an Order ID.");return}const se={};if(n.tests.forEach(Q=>{const ie=a[Q.id]||{},ge={};Q.default_parameters&&Q.default_parameters.forEach(ee=>{ee.defaultValue!==void 0&&ee.defaultValue!==null&&(ge[ee.name]=ee.defaultValue)}),se[Q.id]={...ge,...ie},(!Q.default_parameters||Q.default_parameters.length===0)&&!se[Q.id].report_content&&(se[Q.id].report_content="")}),Object.keys(se).length===0){alert("Report content cannot be empty.");return}s(se),u(!0),p(null);try{const Q=await ue(`/api/lab/${e}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(se)})});if(!Q.ok){const ie=await Q.json().catch(()=>({message:`Submission failed: ${Q.status}`}));throw new Error(ie.message||`Submission failed: ${Q.status}`)}t(-1)}catch(Q){console.error("Error submitting report:",Q),p(Q instanceof Error?Q.message:"An unknown error occurred during submission.")}finally{u(!1)}},Ke=async()=>{if(!(!e||!P))try{const se=await ue(`/api/lab/orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:new Date(P).toISOString()})});if(!se.ok)throw new Error("Failed to update date");const Q=await se.json();Q.order&&i(ie=>ie?{...ie,createdAt:Q.order.createdAt}:null),A(!1)}catch(se){console.error("Failed to update date:",se),alert("Failed to update date")}},Me=async()=>{if(!(!e||!$))try{const se=await ue(`/api/lab/orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportDate:new Date($).toISOString()})});if(!se.ok)throw new Error("Failed to update report date");const Q=await se.json();Q.order&&i(ie=>ie?{...ie,report_date:Q.order.report_date}:null),B(!1)}catch(se){console.error("Failed to update report date:",se),alert("Failed to update report date")}},Ie=async()=>{if(e)try{const se=await ue(`/api/lab/orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralDoctor:q})});if(!se.ok)throw new Error("Failed to update referral doctor");const Q=await se.json();Q.order&&(W(Q.order.referral_doctor||""),i(ie=>ie?{...ie,referral_doctor:Q.order.referral_doctor}:null)),X(!1)}catch(se){console.error("Failed to update referral doctor:",se),alert("Failed to update referral doctor")}};if(o)return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem"},children:[r.jsx(Z,{width:200,height:28}),r.jsxs("div",{className:"header-actions",style:{display:"flex",gap:"8px"},children:[r.jsx(Z,{width:80,height:32}),r.jsx(Z,{width:80,height:32}),r.jsx(Z,{width:80,height:32})]})]}),r.jsxs("div",{className:"lab-inventory-card no-print summary-card",style:{margin:"1rem",padding:"0"},children:[r.jsx("div",{className:"lab-inventory-header summary-header",style:{padding:"0.75rem 1rem",borderBottom:"1px solid #eee"},children:r.jsx(Z,{width:120,height:20})}),r.jsxs("div",{className:"summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem"},children:[r.jsx(Z,{height:24}),r.jsx(Z,{height:24}),r.jsx(Z,{height:24}),r.jsx(Z,{height:24})]})]}),r.jsx("div",{className:"lab-tests-container no-print",style:{padding:"1rem"},children:[1,2].map(se=>r.jsxs("div",{className:"test-card",style:{marginBottom:"1.5rem",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"white"},children:[r.jsxs("div",{className:"test-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsx(Z,{width:250,height:24}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsx(Z,{width:70,height:30}),r.jsx(Z,{width:36,height:30})]})]}),r.jsx("div",{className:"parameter-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(Q=>r.jsxs("div",{className:"parameter-item",children:[r.jsx(Z,{width:"30%",height:16,style:{marginBottom:"0.5rem"}}),r.jsx(Z,{height:40})]},Q))})]},se))})]})});if(f&&!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Zr,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),r.jsx("p",{className:"error-text",children:f}),r.jsx("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:r.jsx(rn,{size:16})})]})});if(!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Pl,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${e}.`}),r.jsx("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:r.jsx(rn,{size:16})})]})});const be=(ce=n==null?void 0:n.Patient)==null?void 0:ce.name,re=(fe=n==null?void 0:n.Patient)==null?void 0:fe.patient_token_number;return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",children:[r.jsx("h2",{children:"Enter Lab Report"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:r.jsx(rn,{size:16})}),r.jsxs("button",{onClick:()=>je(null),className:"lab-inventory-button compact-btn",title:"Print Full Report",children:[r.jsx(Uv,{size:16}),r.jsx("span",{className:"btn-text",children:"Print"})]}),r.jsxs("button",{onClick:Y,className:"lab-inventory-button whatsapp-btn compact-btn",title:"Share via WhatsApp",children:[r.jsx(Hq,{size:16}),r.jsx("span",{className:"btn-text",children:"Share"})]})]})]}),n&&r.jsxs("div",{className:"lab-inventory-card no-print summary-card",children:[r.jsxs("h3",{className:"lab-inventory-header summary-header",children:[r.jsx(Pl,{size:14})," Summary"]}),r.jsxs("div",{className:"summary-grid",children:[r.jsxs("div",{className:"summary-item",children:[r.jsx(jr,{size:13,className:"icon"}),r.jsx("strong",{children:"Patient:"})," ",be??"N/A"," (",re??"N/A",")"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(iR,{size:13,className:"icon"}),r.jsx("strong",{children:"Ordered:"})," ",O?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:P,onChange:se=>I(se.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Ke,className:"icon-btn save",children:r.jsx(Ml,{size:12})}),r.jsx("button",{onClick:()=>A(!1),className:"icon-btn cancel",children:r.jsx(Ut,{size:12})})]}):r.jsxs(r.Fragment,{children:[wf(new Date(n.createdAt),"dd MMM, HH:mm"),r.jsx("button",{onClick:()=>A(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Tc,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(iR,{size:13,className:"icon"}),r.jsx("strong",{children:"Reported:"})," ",F?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:$,onChange:se=>L(se.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Me,className:"icon-btn save",children:r.jsx(Ml,{size:12})}),r.jsx("button",{onClick:()=>B(!1),className:"icon-btn cancel",children:r.jsx(Ut,{size:12})})]}):r.jsxs(r.Fragment,{children:[n.report_date?wf(new Date(n.report_date),"dd MMM, HH:mm"):"Not Set",r.jsx("button",{onClick:()=>B(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Tc,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(jr,{size:13,className:"icon"}),r.jsx("strong",{children:"Ref. Doctor:"})," ",te?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"text",value:q,onChange:se=>W(se.target.value),className:"lab-inventory-input date-input",placeholder:"Enter referral doctor name"}),r.jsx("button",{onClick:Ie,className:"icon-btn save",children:r.jsx(Ml,{size:12})}),r.jsx("button",{onClick:()=>X(!1),className:"icon-btn cancel",children:r.jsx(Ut,{size:12})})]}):r.jsxs(r.Fragment,{children:[q||"Not Set",r.jsx("button",{onClick:()=>X(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(Tc,{size:11})})]})]})]})]}),r.jsxs("div",{className:"lab-tests-container no-print",children:[n==null?void 0:n.tests.map(se=>{var Q;return r.jsxs("div",{className:"test-card",children:[r.jsxs("div",{className:"test-header",children:[r.jsx("h4",{children:se.name}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsxs("button",{type:"button",onClick:ie=>{ie.stopPropagation(),le(se.id)},className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:[r.jsx(io,{size:14}),r.jsx("span",{className:"btn-text",children:"Save"})]}),r.jsx("button",{type:"button",onClick:ie=>{ie.stopPropagation(),je(se.id)},className:"lab-inventory-button compact-btn",title:"Print",children:r.jsx(Uv,{size:14})})]})]}),r.jsx("div",{className:"test-parameters-body",children:se.default_parameters&&se.default_parameters.length>0?r.jsx("div",{className:"parameter-grid",children:se.default_parameters.map(ie=>{var Le,oe;const ge=(Le=a[se.id])==null?void 0:Le[ie.name],ee=ge!==void 0?ge:ie.defaultValue??"",we=ie.type==="number"&&ee!==""&&(ie.lower_limit!=null&&parseFloat(String(ee))<ie.lower_limit||ie.upper_limit!=null&&parseFloat(String(ee))>ie.upper_limit),Ue=t3e(ie.name),Ge=(oe=w[se.id])==null?void 0:oe[ie.name];return r.jsxs("div",{className:"parameter-item",children:[r.jsxs("label",{className:"parameter-label",htmlFor:`${se.id}-${ie.name}`,children:[ie.name," ",ie.unit&&r.jsxs("span",{className:"parameter-unit",children:["(",ie.unit,")"]})]}),r.jsxs("div",{className:"input-wrapper",children:[ie.type==="boolean"?r.jsxs("select",{id:`${se.id}-${ie.name}`,value:(ee==null?void 0:ee.toString())??"false",onChange:_e=>z(se.id,ie.name,_e.target.value==="true"),className:"lab-inventory-input parameter-input",disabled:c,children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-Reactive"})]}):r.jsx("input",{id:`${se.id}-${ie.name}`,type:ie.type==="number"?"number":"text",value:ee,onChange:_e=>z(se.id,ie.name,_e.target.value),className:`lab-inventory-input parameter-input ${we?"abnormal-result":""} ${Ue?"calculated-input":""}`,disabled:c||Ue&&!Ge,placeholder:ie.lower_limit!=null&&ie.upper_limit!=null?`${ie.lower_limit}-${ie.upper_limit}`:""}),Ue&&r.jsx("button",{type:"button",onClick:()=>_(_e=>({..._e,[se.id]:{..._e[se.id]||{},[ie.name]:!Ge}})),className:"edit-calculated-btn",title:Ge?"Lock":"Edit",children:r.jsx(Tc,{size:11})})]})]},ie.name)})}):r.jsxs("div",{className:"parameter-item",style:{width:"100%"},children:[r.jsx("label",{className:"parameter-label",htmlFor:`${se.id}-report_content`,children:"Results / Observations"}),r.jsx("textarea",{id:`${se.id}-report_content`,value:((Q=a[se.id])==null?void 0:Q.report_content)??"",onChange:ie=>z(se.id,"report_content",ie.target.value),className:"lab-inventory-input parameter-textarea",rows:3,placeholder:`Enter results for ${se.name}...`,disabled:c})]})})]},se.id)}),f&&r.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[r.jsx(Zr,{size:15,className:"inline mr-1"}),f]})]}),r.jsx("div",{className:"form-actions-footer no-print",children:r.jsx("button",{type:"button",onClick:Oe,disabled:c,className:"lab-inventory-button lab-inventory-button-primary submit-btn",children:c?r.jsxs(r.Fragment,{children:[r.jsx(zc,{className:"animate-spin",size:16})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(io,{size:16})," Save All"]})})}),r.jsxs("div",{className:"printable-only",children:[V&&r.jsx("div",{className:"print-letterhead-container",children:r.jsx("img",{src:V,alt:"Lab Letterhead",className:"print-letterhead-image"})}),n&&n.Patient&&r.jsxs("div",{style:{marginBottom:"20px",borderBottom:"1px solid #ccc",paddingBottom:"10px"},children:[r.jsx("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Lab Report"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"12px"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Patient Name:"})," ",n.Patient.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age/Sex:"})," ",g??"N/A"," / ",v??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. Doctor:"})," ",q||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",wf(new Date(n.createdAt),"PPpp")]})]})]}),n==null?void 0:n.tests.filter(se=>T===null||se.id===T).map(se=>{var Q;return r.jsxs("div",{style:{marginBottom:"20px",pageBreakInside:"avoid"},children:[r.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"5px"},children:se.name}),se.default_parameters&&se.default_parameters.length>0?r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"#f9f9f9"},children:[r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Parameter"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Result"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Units"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Normal Range"})]})}),r.jsx("tbody",{children:se.default_parameters.map(ie=>{var Le;const ge=(Le=a[se.id])==null?void 0:Le[ie.name],ee=typeof ge=="string"?parseFloat(ge):typeof ge=="number"?ge:NaN,we=ie.type==="number"&&!isNaN(ee)&&ge!==""&&(ie.lower_limit!=null&&ee<ie.lower_limit||ie.upper_limit!=null&&ee>ie.upper_limit),Ue=ie.type==="boolean"&&(ge===!0||ge==="true"),Ge=ie.type==="boolean"?ge===!0||ge==="true"?"Reactive":"Non-Reactive":ge??"";return r.jsxs("tr",{children:[r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ie.name}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee",fontWeight:we||Ue?"bold":"normal",color:we?"red":Ue?"green":"inherit"},children:Ge}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ie.unit??""}),r.jsxs("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:[ie.lower_limit!==null&&ie.lower_limit!==void 0&&`> ${ie.lower_limit}`,ie.lower_limit!==null&&ie.lower_limit!==void 0&&ie.upper_limit!==null&&ie.upper_limit!==void 0&&" - ",ie.upper_limit!==null&&ie.upper_limit!==void 0&&`< ${ie.upper_limit}`]})]},ie.name)})})]}):r.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"12px",padding:"10px"},children:((Q=a[se.id])==null?void 0:Q.report_content)||"No report content entered."})]},se.id)})]})]})})},n3e=()=>{const{orderId:e}=Ii(),t=It(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(""),f=b.useCallback(async g=>{if(!g){l("No Order ID specified in the URL."),s(!1),i(null);return}s(!0),l(null),i(null);try{console.log(`Fetching order details for ID: ${g}`);const x=await ue(`/api/lab/orders/${g}/report`);if(!x.ok){let j;try{j=await x.json()}catch{j={message:`Server returned status ${x.status}`}}throw console.error("Fetch order details error response:",j),new Error(j.message||`Failed to fetch order details: ${x.status}`)}const v=await x.json();if(console.log("Received order data:",v),!v)throw console.error("Invalid order data structure:",v),new Error("Invalid order data received from server.");i(v)}catch(x){console.error("Error fetching order details:",x),l(x instanceof Error?x.message:"An unknown error occurred while fetching the order details")}finally{s(!1)}},[ue]);b.useEffect(()=>{f(e)},[e,f]),b.useEffect(()=>{(async()=>{try{const x=await ue("/api/clinics/settings");if(x.ok){const v=await x.json();u(v.labLetterheadUrl||"")}}catch(x){console.error("Error fetching clinic settings:",x)}})()},[]);const p=()=>{n&&gI(n)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs(_r,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[r.jsx(Wn,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),r.jsx("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:r.jsx(rn,{size:16})}),r.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[r.jsx(Uv,{size:16,style:{marginRight:"5px"}}),"Print"]}),r.jsxs("button",{onClick:p,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[r.jsx(Hq,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",e||"None Specified",")"]}),a&&r.jsx("div",{className:"loading-text",children:"Loading report..."}),o&&!a&&r.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[r.jsx(Zr,{size:48}),r.jsx("h3",{className:"error-title",children:"Error Loading Report"}),r.jsx("p",{children:o}),e&&r.jsx("button",{onClick:()=>f(e),className:"retry-button",children:"Retry"})]}),r.jsxs("div",{className:"printable-section",children:[c&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:c,alt:"Lab Letterhead",className:"print-letterhead-image"})}),!a&&!o&&(n==null?void 0:n.Patient)&&r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(jr,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",n.Patient.name||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age:"})," ",n.Patient.age??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Gender:"})," ",n.Patient.gender||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Token No:"})," ",n.Patient.patient_token_number||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Patient ID:"})," ",n.Patient.id]}),n.Patient.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",n.Patient.phone]})]})]}),!a&&!o&&(n==null?void 0:n.report_content)&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(ha,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const g=JSON.parse(n.report_content||"{}");return typeof g=="object"&&g!==null&&n.tests?n.tests.map(x=>r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em"},children:x.name}),g[x.id]?r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(g[x.id]).map(([v,j])=>{var A;const w=(A=x.default_parameters)==null?void 0:A.find(P=>P.name===v),_=typeof j=="string"?parseFloat(j):typeof j=="number"?j:NaN,T=(w==null?void 0:w.type)==="number"&&!isNaN(_)&&(w.lower_limit!=null&&_<w.lower_limit||w.upper_limit!=null&&_>w.upper_limit),C=(w==null?void 0:w.type)==="boolean"?j===!0||j==="true"?"Reactive":"Non-Reactive":String(j),O=(w==null?void 0:w.type)==="boolean"&&(j===!0||j==="true");return r.jsxs("tr",{children:[r.jsx("td",{children:v}),r.jsxs("td",{className:`${T?"abnormal-result":""} ${O?"reactive-result":""}`,children:[C," ",w==null?void 0:w.unit]}),r.jsx("td",{children:w&&w.type==="number"&&(w.lower_limit!==null||w.upper_limit!==null)?r.jsxs(r.Fragment,{children:[w.lower_limit!=null&&` > ${w.lower_limit}`,w.lower_limit!=null&&w.upper_limit!=null&&" - ",w.upper_limit!=null&&` < ${w.upper_limit}`,w.unit&&` ${w.unit}`]}):((w==null?void 0:w.type)==="boolean","N/A")})]},v)})})]}):r.jsx("p",{children:"No parameters reported for this test."})]},x.id)):r.jsx(Ef,{remarkPlugins:[kf],children:n.report_content})}catch{return r.jsx(Ef,{remarkPlugins:[kf],children:n.report_content||"*No findings recorded.*"})}})()})]})]}),!a&&!o&&!(n!=null&&n.report_content)&&!(n!=null&&n.Patient)&&e&&r.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",e,". The order might be processing, does not exist, or the ID is incorrect."]}),!e&&!a&&!o&&r.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",r.jsx(_r,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},r3e=()=>{const e=It(),[t,n]=b.useState(""),[i,a]=b.useState(!1),[s,o]=b.useState([]),[l,c]=b.useState(null),[u,f]=b.useState(t);eu(),b.useEffect(()=>{const j=setTimeout(()=>{f(t)},500);return()=>{clearTimeout(j)}},[t]),b.useEffect(()=>{p()},[u]);const p=async()=>{const j=t.trim();if(!j){o([]),c(null);return}a(!0),c(null),o([]),console.log(`Searching for: ${j}`);try{const w=await ue("/api/lab");if(!w.ok){let P;try{P=await w.json()}catch{P={message:`Server returned status ${w.status}`}}throw console.error("Search fetch error response:",P),new Error(P.message||`HTTP error! status: ${w.status}`)}const{orders:_}=await w.json();console.log("Received lab orders for search:",_);const C=_.filter(P=>!!P.report_content).map(P=>{var I,F;return{id:P.id,labTokenNumber:String(P.lab_token_number??"N/A"),patientName:((I=P.Patient)==null?void 0:I.name)||"N/A",patientId:P.patient_id,patientTokenNumber:String(((F=P.Patient)==null?void 0:F.patient_token_number)??"N/A"),tests:(P.tests||[]).map(B=>B.name||"Unknown Test"),date:wf(new Date(P.createdAt),"yyyy-MM-dd"),status:P.status}}),O=new so(C,{keys:["patientName","labTokenNumber","patientTokenNumber","tests","id","patientId"],threshold:.3,ignoreLocation:!0}),A=t.trim()?O.search(t).map(P=>P.item):C;console.log("Filtered search results:",A),o(A),A.length===0&&j?c(`No matching reports found for "${j}".`):c(null)}catch(w){console.error("Failed to search lab reports:",w),c(w instanceof Error?w.message:"An unknown error occurred during search")}finally{a(!1)}},g=j=>{console.log(`Result clicked, navigating to view report for order ID: ${j}`),e(`/lab/view-report/${j}`)},x=j=>{switch(j){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:j,color:"text-gray-600 bg-gray-100"}}},v=j=>{switch(j){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),r.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(rn,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[r.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[r.jsx(Wn,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),r.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:t,onChange:j=>n(j.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[i&&r.jsx("div",{className:"loading-text",children:"Searching..."}),l&&!i&&r.jsxs("div",{className:"error-text",children:[r.jsx(Zr,{size:20,className:"inline mr-2"})," ",l]}),s.length>0&&!i&&r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:s.map(j=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(j.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[r.jsx(bJ,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),j.patientName," (Token: ",j.patientTokenNumber,")"]}),r.jsx("span",{className:v(j.status),children:x(j.status).text})]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(ha,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",j.id]}),r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(lee,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",j.tests.join(", ")]}),r.jsxs("div",{children:[r.jsx(wD,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",j.date]})]})]},j.id))}),!i&&s.length===0&&!l&&t.trim()&&r.jsxs("div",{className:"no-data-message",children:['No results found for "',t,'".']}),!i&&s.length===0&&!l&&!t.trim()&&r.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},i3e=()=>{const{patientId:e}=Ii(),t=It(),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(null),[f,p]=b.useState(null);b.useEffect(()=>{(async()=>{if(!e){l("Patient ID is missing from the URL."),s(!1);return}s(!0),l(null),i([]),p(null);try{const v=await ue(`/api/patients/${e}`);if(v.ok){const _=await v.json();p(_.name||`Patient ID: ${e}`)}else console.warn(`Failed to fetch patient name for ID ${e}`),p(`Patient ID: ${e}`);const j=await ue(`/api/lab/patient/${e}`);if(!j.ok){const _=await j.json().catch(()=>({}));throw new Error(_.message||`HTTP error! status: ${j.status}`)}const w=await j.json();i(w||[])}catch(v){console.error("Error fetching data:",v),l(`Failed to load data: ${v.message}`)}finally{s(!1)}})()},[e]);const g=x=>{x.report_content?t(`/lab/view-report/${x.id}`):t(`/lab/enter-report/${x.id}`)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{margin:0},children:["Lab Reports ",f?`for ${f}`:`for Patient ID: ${e}`]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:async()=>{if(!e){alert("Patient ID is missing. Cannot create a new report.");return}try{const x=await ue("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:e})});if(!x.ok){const j=await x.json().catch(()=>({message:`Failed to create new lab order: ${x.status}`}));throw new Error(j.message||`Failed to create new lab order: ${x.status}`)}const v=await x.json();t(`/lab/enter-report/${v.newOrderId}`)}catch(x){console.error("Error creating new lab order:",x),alert(`Error creating new lab order: ${x.message}`)}},className:"lab-inventory-button",disabled:!e,title:e?"Enter a new lab report for this patient":"Patient ID missing",children:[r.jsx(ks,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),r.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[r.jsx(rn,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),r.jsx("div",{style:{marginTop:"20px"},children:a?r.jsx("div",{className:"skeleton-reports-list",children:[1,2,3].map(x=>r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[r.jsx(Z,{variant:"circular",width:24,height:24,style:{marginRight:"15px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx(Z,{width:"40%",height:20,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"60%",height:16})]})]}),r.jsx("div",{style:{marginLeft:"10px"},children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})})]},x))}):o?r.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[r.jsx(mee,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),r.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),r.jsx("p",{children:o})]}):n.length===0?r.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(ha,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),r.jsx("p",{children:"No lab reports found for this patient."}),r.jsxs("p",{children:["You can ",r.jsx(_r,{to:`/lab/create-order/${e}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):c?r.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",c.report_date?wf(new Date(c.report_date),"PPP p"):"N/A"]}),r.jsxs("button",{onClick:()=>u(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[r.jsx(rn,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),r.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[r.jsx("strong",{children:"Tests Ordered:"})," ",(c.tests||[]).map(x=>x.name).join(", ")]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:r.jsx(Ef,{remarkPlugins:[kf],children:c.report_content||"*No findings recorded.*"})})]}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:n.map(x=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(x),tabIndex:0,onKeyPress:v=>v.key==="Enter"&&g(x),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(ha,{size:24,style:{marginRight:"15px",color:"#007bff"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",wf(new Date(x.createdAt),"PPP")]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",x.tests&&x.tests.length>0?x.tests.map(v=>v.name).join(", "):"N/A"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x.status&&r.jsx("span",{className:s3e(x.status),children:a3e(x.status)}),r.jsx(vd,{size:20,style:{color:"#6c757d"}})]})]},x.id))})})]})})},a3e=e=>{if(!e)return"Unknown";switch(e.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return e.charAt(0).toUpperCase()+e.slice(1)}},s3e=e=>{if(!e)return"status-badge";switch(e.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},BW=()=>{const e=It(),[t]=bq(),n=t.get("search")||"",[i,a]=b.useState("pharmacy");return eu(void 0,300),r.jsxs("div",{className:"inventory-management-container",style:{padding:"10px 15px",backgroundColor:"var(--background-color)",minHeight:"100vh"},children:[r.jsxs("div",{className:"inventory-header",style:{marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>e(-1),className:"action-icon-button",title:"Go Back",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-primary)"},children:r.jsx(rn,{size:20})}),r.jsx("h1",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700",color:"var(--text-primary)"},children:"Inventory Management"})]}),r.jsxs("div",{className:"inventory-tabs",style:{display:"flex",gap:"4px",backgroundColor:"var(--card-bg, #f3f4f6)",padding:"3px",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("button",{onClick:()=>a("pharmacy"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:i==="pharmacy"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:i==="pharmacy"?"var(--card-bg-active, #fff)":"transparent",boxShadow:i==="pharmacy"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:i==="pharmacy"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:i==="pharmacy"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(Oc,{size:16}),"Pharmacy Stock"]}),r.jsxs("button",{onClick:()=>a("lab"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:i==="lab"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:i==="lab"?"var(--card-bg-active, #fff)":"transparent",boxShadow:i==="lab"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:i==="lab"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:i==="lab"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(os,{size:16}),"Lab Stock"]})]})]}),r.jsx("div",{className:"inventory-content",style:{backgroundColor:"var(--card-bg, #fff)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:i==="pharmacy"?r.jsx(CW,{isEmbedded:!0,initialSearch:n}):r.jsx(mI,{isEmbedded:!0})})]})},o3e=({fetchWithAuth:e})=>{const t=It(),[n,i]=b.useState(!0),[a,s]=b.useState([]),[o,l]=b.useState(null),[c,u]=b.useState(null),f=b.useCallback(async()=>{i(!0),l(null);try{const v=await(await e("/staff")).json();s(v.map(j=>({...j,id:j._id||j.id})))}catch(x){l(`Failed to load staff data: ${x.message}`),s([])}finally{i(!1)}},[e]);b.useEffect(()=>{f()},[f]),b.useEffect(()=>{if(c){const x=setTimeout(()=>u(null),5e3);return()=>clearTimeout(x)}},[c]);const p=x=>{switch(x){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},g=x=>{switch(x){case"doctor":return r.jsx(dg,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return r.jsx(Gq,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return r.jsx(Oc,{size:16,className:"mr-2 text-purple-600"});case"lab":return r.jsx(os,{size:16,className:"mr-2 text-yellow-600"});case"admin":return r.jsx(md,{size:16,className:"mr-2 text-teal-600"});default:return r.jsx(Ro,{size:16,className:"mr-2 text-gray-500"})}};return n?r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Z,{width:40,height:40,variant:"circular"}),r.jsx(Z,{width:200,height:32})]}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:32})})]},x))})]})})]}):r.jsxs("div",{className:"staff-page-container",children:[c&&r.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[c.type==="success"?r.jsx(Bl,{size:18,className:"mr-2"}):r.jsx(Zr,{size:18,className:"mr-2"}),r.jsx("span",{children:c.message}),r.jsx("button",{onClick:()=>u(null),className:"ml-auto text-xl font-bold",children:""})]}),o&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[r.jsx(Zr,{size:18,className:"mr-2 text-red-500"}),o,r.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(rn,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),r.jsxs("button",{onClick:()=>t("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[r.jsx(hr,{size:16,className:"mr-2"})," Add New Staff"]})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:a.length===0&&!n?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):a.map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:x.name}),r.jsx("td",{className:"hidden md:table-cell",children:x.email}),r.jsx("td",{children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(x.role)}`,children:[g(x.role),x.role.charAt(0).toUpperCase()+x.role.slice(1)]})}),r.jsx("td",{className:"hidden md:table-cell",children:x.role==="doctor"?x.opd_fee?parseFloat(String(x.opd_fee)).toFixed(2):"Not Set":"N/A"}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="active"?"Active":"Inactive"})}),r.jsx("td",{className:"actions",children:r.jsxs("button",{onClick:()=>t(`/dashboard/staff/edit/${x.id}`),className:"edit-link",disabled:x.role==="admin",title:"Edit Staff",children:[r.jsx($a,{size:16})," Edit"]})})]},x.id))})]})})]})},Az=()=>{var se,Q,ie,ge,ee,we,Ue,Ge,Le,oe,_e,$e,ze,K,ye,pe,me,Ne,Be;const{patientId:e,billId:t}=Ii(),n=It(),[i,a]=b.useState(null),[s,o]=b.useState(!0),[l,c]=b.useState(null),[u,f]=b.useState(""),[p,g]=b.useState("cash"),[x,v]=b.useState(!1),[j,w]=b.useState(""),[_,T]=b.useState(""),[C,O]=b.useState(""),[A,P]=b.useState(""),[I,F]=b.useState([]),[B,$]=b.useState(""),[L,V]=b.useState(!1),[H,te]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),X=()=>{H.length<5&&te(ke=>[...ke,{id:Date.now().toString(),method:"cash",amount:0}])},q=ke=>{H.length>2&&te(Ye=>Ye.filter(rt=>rt.id!==ke))},W=(ke,Ye,rt)=>{te(gt=>gt.map(Pe=>Pe.id===ke?Ye==="method"?{...Pe,method:rt}:{...Pe,amount:Math.max(0,rt)}:Pe))},ae=(ke,Ye)=>{const rt=H.filter(Pe=>Pe.id!==ke).reduce((Pe,Je)=>Pe+Je.amount,0),gt=Math.max(0,Ye-rt);te(Pe=>Pe.map(Je=>Je.id===ke?{...Je,amount:gt}:Je))},[G,z]=b.useState([]),[le,je]=b.useState(0),Y=((se=i==null?void 0:i.patient)==null?void 0:se.insurance_type)==="no_cash_insurance";b.useEffect(()=>{g(Y?"no_cash_insurance":"cash")},[Y]),b.useEffect(()=>{t&&(async()=>{o(!0),c(null);try{const[Ye,rt,gt]=await Promise.all([ue(`/api/bills/${t}`),ue("/api/clinics/settings").catch(()=>null),ue(`/api/bills?patientId=${e}`).catch(()=>null)]);if(!Ye.ok)throw new Error(`HTTP error! status: ${Ye.status}`);const Pe=await Ye.json();if(!Pe||!Pe.bill||!Pe.calculated)throw new Error("Incomplete data structure received from backend.");if(Pe.bill.type!=="admission")throw new Error(`Unexpected bill type: ${Pe.bill.type}. Expected 'admission'.`);const Je=Array.isArray(Pe.admissionPayments)?Pe.admissionPayments:[];if(a({...Pe.bill,amount:Pe.bill.amount,created_at:Pe.bill.createdAt||Pe.bill.created_at,items:(Pe.bill.items||[]).map(et=>({...et,price:parseFloat(et.price)||0,quantity:parseInt(et.quantity)||1})),AdmissionPayments:Je,calculated:Pe.calculated,admissionRecord:Pe.admissionRecord,patient:Pe.bill.Patient?{id:Pe.bill.Patient.id,name:Pe.bill.Patient.name,admission_date:Pe.bill.Patient.admission_date,discharge_date:Pe.bill.Patient.discharge_date,token:Pe.bill.Patient.patient_token_number||Pe.bill.Patient.token,insurance_type:Pe.bill.Patient.insurance_type}:void 0}),rt&&rt.ok){const et=await rt.json();w(et.name||""),T(et.address||""),O(et.notes||""),P(et.upi_id||"")}try{const et=await ue(`/api/patients/${e}/admission-payments`);if(et.ok){const dt=await et.json();F(dt)}}catch(et){console.error("Failed to fetch payment history:",et)}if(gt&&gt.ok){const dt=((await gt.json()).bills||[]).filter(bt=>bt.type==="admission"&&bt.id!==t).map(bt=>{var ct,At;const Ce=bt.AdmissionRecord;return{id:bt.id,amount:Ce?parseFloat(Ce.total_amount):parseFloat(bt.amount)||0,status:Ce?Ce.balance<=0||Ce.status==="discharged"&&Ce.balance<=0?"paid":"pending":bt.status,created_at:bt.createdAt||bt.created_at,admission_date:Ce?Ce.admission_date:((ct=bt.Patient)==null?void 0:ct.admission_date)||bt.admission_date,discharge_date:Ce?Ce.discharge_date:((At=bt.Patient)==null?void 0:At.discharge_date)||bt.discharge_date,admissionRecord:Ce}});z(dt);const Ct=dt.filter(bt=>bt.admissionRecord?bt.admissionRecord.balance>0:bt.status!=="paid").reduce((bt,Ce)=>Ce.admissionRecord?bt+(typeof Ce.admissionRecord.balance=="string"?parseFloat(Ce.admissionRecord.balance):Ce.admissionRecord.balance):bt+Ce.amount,0);je(Ct)}}catch(Ye){console.error("Failed to fetch admission bill details:",Ye),c(Ye instanceof Error?Ye.message:"An unknown error occurred")}finally{o(!1)}})()},[t,e]),b.useEffect(()=>{(async()=>{if(!t){if(!e){c("Patient ID is missing."),o(!1);return}try{o(!0);const Ye=await ue(`/api/patients/${e}`);if(Ye.ok){const rt=await Ye.json();if(rt){if(rt.admission_date&&!rt.discharge_date){const Pe=await ue(`/api/patients/${e}/active-bill?type=admission`);if(Pe.ok){const Je=await Pe.json();if(Je&&Je.id){n(`/patient/${e}/admission-bill/${Je.id}`,{replace:!0});return}}}a({id:0,patient_id:rt.id,type:"admission",amount:"0",status:"pending",created_at:new Date().toISOString(),AdmissionPayments:[],calculated:{totalPaid:0,totalDue:0,balance:0,daysStayed:0,perDayCharge:0},patient:{id:rt.id,name:rt.name,admission_date:rt.admission_date,discharge_date:rt.discharge_date,token:rt.token,insurance_type:rt.insurance_type}});const gt=await ue(`/api/bills?patientId=${e}`);if(gt.ok){const Je=((await gt.json()).bills||[]).filter(et=>et.type==="admission").map(et=>{var Ct,bt;const dt=et.AdmissionRecord;return{id:et.id,amount:dt?parseFloat(dt.total_amount):parseFloat(et.amount)||0,status:dt?dt.balance<=0||dt.status==="discharged"&&dt.balance<=0?"paid":"pending":et.status,created_at:et.createdAt||et.created_at,admission_date:dt?dt.admission_date:((Ct=et.Patient)==null?void 0:Ct.admission_date)||et.admission_date,discharge_date:dt?dt.discharge_date:((bt=et.Patient)==null?void 0:bt.discharge_date)||et.discharge_date,admissionRecord:dt}});z(Je)}}else c("Patient not found")}}catch(Ye){console.error("Error fetching patient status:",Ye),c("Failed to load patient details")}finally{o(!1)}}})()},[e,t,n]);const Oe=async()=>{if(e){v(!0);try{const ke=await ue(`/api/patients/${e}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!ke.ok){const rt=await ke.json();throw new Error(rt.message||"Failed to admit patient")}const Ye=await ke.json();Ye.bill&&Ye.bill.id?n(`/patient/${e}/admission-bill/${Ye.bill.id}`):window.location.reload()}catch(ke){c(ke instanceof Error?ke.message:"Failed to admit patient"),v(!1)}}},Ke=async()=>{if(e&&window.confirm("Are you sure you want to discharge this patient? This will finalize the bill.")){v(!0);try{const ke=await ue(`/api/patients/${e}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!ke.ok){const Ye=await ke.json();throw new Error(Ye.message||"Failed to discharge patient")}window.location.reload()}catch(ke){c(ke instanceof Error?ke.message:"Failed to discharge patient"),v(!1)}}},Me=((Q=i==null?void 0:i.patient)==null?void 0:Q.admission_date)&&!((ie=i==null?void 0:i.patient)!=null&&ie.discharge_date),Ie=!!((ge=i==null?void 0:i.patient)!=null&&ge.discharge_date);b.useEffect(()=>{var rt,gt;const Ye=Number(((rt=i==null?void 0:i.calculated)==null?void 0:rt.balance)??((gt=i==null?void 0:i.admissionRecord)==null?void 0:gt.balance)??0)+le;if(Ye>0&&A){const Pe=`upi://pay?pa=${A}&pn=${encodeURIComponent(j||"Clinic")}&am=${Ye.toFixed(2)}&cu=INR`;$(Pe)}else $("")},[i,le,A,j]);const be=H.reduce((ke,Ye)=>ke+Ye.amount,0),re=async ke=>{var Pe,Je;ke.preventDefault();const rt=Number(((Pe=i==null?void 0:i.calculated)==null?void 0:Pe.balance)??((Je=i==null?void 0:i.admissionRecord)==null?void 0:Je.balance)??0)+le,gt=L?be:parseFloat(u);if(!e||gt<=0||gt>rt+.1){c(`Please enter a valid amount. Max payable: ${rt.toFixed(2)}`);return}c(null),v(!0);try{if(L){for(const Ct of H)if(Ct.amount>0){const bt=await ue(`/api/patients/${e}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:Ct.amount,payment_mode:Ct.method})});if(!bt.ok){const Ce=await bt.json();throw new Error(Ce.message||`Failed to record ${Ct.method} payment`)}}}else{const Ct=await ue(`/api/patients/${e}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(u),payment_mode:p})});if(!Ct.ok){const bt=await Ct.json();throw new Error(bt.message||`HTTP error! status: ${Ct.status}`)}}const dt=await(await ue(`/api/bills/${t}`)).json();if(dt&&dt.bill&&dt.calculated&&dt.admissionPayments)a({...dt.bill,amount:parseFloat(dt.bill.amount),AdmissionPayments:dt.admissionPayments,calculated:dt.calculated,patient:dt.bill.Patient?{id:dt.bill.Patient.id,name:dt.bill.Patient.name,admission_date:dt.bill.Patient.admission_date,discharge_date:dt.bill.Patient.discharge_date,token:dt.bill.Patient.token,insurance_type:dt.bill.Patient.insurance_type}:void 0});else throw new Error("Invalid data structure received after payment submission.");f(""),g("cash"),L&&(te([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),V(!1)),setTimeout(()=>{window.print()},100)}catch(et){console.error("Failed to submit payment:",et),c(et instanceof Error?et.message:"Failed to record payment")}finally{v(!1)}},ve=()=>{window.print()};if(s)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]})]})]})})]})]})});if(l)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>n(-1),className:"back-button",children:r.jsx(rn,{size:20})}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"error-message-box",children:["Error: ",l]})]})});if(!i||!i.calculated)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"error-message-box",children:"No bill details found or data is incomplete."})});const ce=Number(i.calculated&&i.calculated.balance!==void 0?i.calculated.balance:i.admissionRecord?i.admissionRecord.balance:0),fe=i.status==="paid"||ce<=0;return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"ADMISSION BILL"}),r.jsx("h2",{className:"clinic-name-print",children:j||"Hospital"}),(_||C)&&r.jsxs("div",{className:"clinic-details-print",children:[_&&r.jsx("span",{className:"small-text clinic-address",children:_}),C&&r.jsx("span",{className:"small-text clinic-notes",children:C})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient"]})," ",((ee=i.patient)==null?void 0:ee.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",((we=i.patient)==null?void 0:we.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Date"]})," ",new Date(i.created_at).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[r.jsx(rn,{size:20}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{children:"Patient Information"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[!Me&&!Ie&&r.jsxs("button",{onClick:Oe,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(sN,{size:16})," Admit Patient"]}),Me&&r.jsxs("button",{onClick:Ke,disabled:x,className:"secondary-button",style:{fontSize:"0.85em",padding:"6px 12px",background:"#dc3545",color:"white"},children:[r.jsx(sZ,{size:16})," Discharge"]}),Ie&&r.jsxs("button",{onClick:Oe,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx($Z,{size:16})," Re-Admit"]})]})]}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",((Ue=i.patient)==null?void 0:Ue.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",((Ge=i.patient)==null?void 0:Ge.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(VX,{size:16})," Bill ID"]})," ",i.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Created"]})," ",new Date(i.created_at).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Admission Charges Breakdown"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsxs("tbody",{children:[i.admissionRecord?r.jsxs(r.Fragment,{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Number(i.admissionRecord.admission_charge).toFixed(2)]}),r.jsxs("td",{children:["",Number(i.admissionRecord.admission_charge).toFixed(2)]})]}),i.admissionRecord.days_stayed?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(i.admissionRecord.admission_date).toLocaleDateString(),i.admissionRecord.discharge_date?` - ${new Date(i.admissionRecord.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[i.admissionRecord.days_stayed," days"]}),r.jsxs("td",{children:["",Number(i.admissionRecord.per_day_charge).toFixed(2)]}),r.jsxs("td",{children:["",(Number(i.admissionRecord.days_stayed)*Number(i.admissionRecord.per_day_charge)).toFixed(2)]})]}):i.calculated.daysStayed&&i.calculated.perDayCharge&&i.calculated.perDayCharge>0?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges (Ongoing)",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(i.admissionRecord.admission_date).toLocaleDateString()," - Today)"]})]}),r.jsxs("td",{children:[i.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",i.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(i.calculated.daysStayed*i.calculated.perDayCharge).toFixed(2)]})]}):null]}):r.jsxs(r.Fragment,{children:[i.items&&i.items.length>0?i.items.map((ke,Ye)=>r.jsxs("tr",{children:[r.jsx("td",{children:Ye+1}),r.jsx("td",{children:ke.name}),r.jsx("td",{children:ke.quantity}),r.jsxs("td",{children:["",ke.price.toFixed(2)]}),r.jsxs("td",{children:["",(ke.price*ke.quantity).toFixed(2)]})]},`item-${Ye}`)):r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Initial Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",parseFloat(i.amount).toFixed(2)]}),r.jsxs("td",{children:["",parseFloat(i.amount).toFixed(2)]})]}),i.calculated.daysStayed&&i.calculated.perDayCharge&&i.calculated.perDayCharge>0&&r.jsxs("tr",{children:[r.jsx("td",{children:(((Le=i.items)==null?void 0:Le.length)||1)+1}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",(oe=i.patient)!=null&&oe.admission_date?new Date(i.patient.admission_date).toLocaleDateString():"",(_e=i.patient)!=null&&_e.discharge_date?` - ${new Date(i.patient.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[i.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",i.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(i.calculated.daysStayed*i.calculated.perDayCharge).toFixed(2)]})]})]}),r.jsxs("tr",{className:"subtotal-row current-admission-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Current Admission Total"}),r.jsxs("td",{children:["",Number((($e=i.calculated)==null?void 0:$e.totalDue)??((ze=i.admissionRecord)==null?void 0:ze.total_amount)??0).toFixed(2)]})]}),G.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("tr",{className:"section-header-row previous-admissions-header",children:r.jsx("td",{colSpan:5,style:{fontWeight:600,textAlign:"center"},children:"Previous Admissions"})}),G.map((ke,Ye)=>r.jsxs("tr",{className:ke.status!=="paid"?"bill-row-unpaid":"bill-row-paid",children:[r.jsx("td",{children:Ye+1}),r.jsxs("td",{children:["Admission - ",ke.admission_date?new Date(ke.admission_date).toLocaleDateString():"N/A",ke.discharge_date&&r.jsxs("small",{style:{display:"block",color:"inherit",opacity:.8,fontSize:"0.75em"},children:["Discharged: ",new Date(ke.discharge_date).toLocaleDateString()]})]}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",ke.amount.toFixed(2)]}),r.jsxs("td",{className:ke.status!=="paid"?"text-danger":"text-success",children:["",ke.amount.toFixed(2),ke.status==="paid"&&r.jsx("small",{style:{marginLeft:"4px"},children:"(Paid)"})]})]},ke.id)),le>0&&r.jsxs("tr",{className:"subtotal-row unpaid-balance-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Previous Unpaid Balance"}),r.jsxs("td",{children:["",le.toFixed(2)]})]})]}),r.jsxs("tr",{className:`grand-total-row-dynamic ${le>0?"grand-total-unpaid":"grand-total-paid"}`,children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"GRAND TOTAL"}),r.jsxs("td",{style:{fontSize:"1.1em"},children:["",(Number(((K=i.calculated)==null?void 0:K.totalDue)??((ye=i.admissionRecord)==null?void 0:ye.total_amount)??0)+le).toFixed(2)]})]})]})]})]}),I.length>0&&r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Payment History"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DATE"}),r.jsx("th",{children:"MODE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsx("tbody",{children:I.map((ke,Ye)=>{var rt;return r.jsxs("tr",{children:[r.jsx("td",{children:Ye+1}),r.jsx("td",{children:ke.payment_date?new Date(ke.payment_date).toLocaleDateString():"N/A"}),r.jsx("td",{style:{textTransform:"capitalize"},children:((rt=ke.payment_mode)==null?void 0:rt.replace(/_/g," "))||"N/A"}),r.jsxs("td",{children:["",(Number(ke.amount_paid)||0).toFixed(2)]})]},ke.id)})})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",Number(((pe=i.calculated)==null?void 0:pe.totalDue)??((me=i.admissionRecord)==null?void 0:me.total_amount)??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Number(((Ne=i.calculated)==null?void 0:Ne.totalPaid)??((Be=i.admissionRecord)==null?void 0:Be.total_paid)??0).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Balance Due: ",ce.toFixed(2)]})})]}),B&&ce>0&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(pa,{value:B,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",(i.calculated.totalDue||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Days Stayed"}),r.jsx("span",{children:i.calculated.daysStayed??0})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{style:{color:"#28a745"},children:["",(i.calculated.totalPaid||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Balance Due"}),r.jsxs("strong",{style:{color:ce>0?"#dc3545":"#28a745"},children:["",ce.toFixed(2)]})]}),G.length>0&&r.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #dee2e6"},children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",color:"#495057"},children:"Previous Admissions"}),G.map(ke=>r.jsxs("div",{className:"summary-row",style:{fontSize:"0.8rem"},children:[r.jsxs("span",{style:{color:"#6c757d"},children:[ke.admission_date?new Date(ke.admission_date).toLocaleDateString():"N/A",ke.status!=="paid"&&r.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"(Unpaid)"})]}),r.jsxs("span",{style:{color:ke.status!=="paid"?"#dc3545":"#28a745"},children:["",ke.amount.toFixed(2)]})]},ke.id)),le>0&&r.jsxs("div",{className:"summary-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e9ecef"},children:[r.jsx("strong",{style:{color:"#dc3545",fontSize:"0.875rem"},children:"Previous Balance"}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",le.toFixed(2)]})]})]}),le>0&&r.jsxs("div",{className:"summary-row grand-total-row",style:{marginTop:"0.75rem",background:"#fff3cd"},children:[r.jsx("strong",{style:{color:"#856404"},children:"Total Outstanding"}),r.jsxs("strong",{style:{color:"#856404"},children:["",(ce+le).toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:B&&ce>0?r.jsxs(r.Fragment,{children:[r.jsx(pa,{value:B,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):ce<=0?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#28a745"},children:[r.jsx(Sv,{size:48}),r.jsx("p",{style:{marginTop:"10px",fontWeight:600},children:"Fully Paid"})]}):r.jsx("p",{children:"UPI QR code not available."})}),!fe&&r.jsxs("form",{onSubmit:re,children:[r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>V(!L),disabled:x,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:L?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:L?"rgba(79, 172, 254, 0.1)":"transparent",color:L?"#4facfe":"#666",cursor:x?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qc,{size:14}),"Split"]})]}),L?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",be.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:H.map((ke,Ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Ye+1}),r.jsxs("select",{value:ke.method,onChange:rt=>W(ke.id,"method",rt.target.value),className:"split-payment-select",disabled:x,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:ke.amount||"",onChange:rt=>W(ke.id,"amount",parseFloat(rt.target.value)||0),className:"split-payment-input",disabled:x})]}),H.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ae(ke.id,ce+le),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining balance",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>q(ke.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Yn,{size:12})})]})]},ke.id))}),H.length<5&&r.jsxs("button",{type:"button",onClick:X,className:"split-payment-add-btn",disabled:x,children:[r.jsx(hr,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Max Payable:"}),r.jsxs("span",{style:{fontWeight:600},children:["",(ce+le).toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${be<=ce+le+.1?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:be<=ce+le+.1?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",be.toFixed(2)]})]}),be>ce+le+.1&&r.jsx("div",{className:"split-payment-warning",children:" Amount exceeds balance!"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"payment-input-group",style:{marginBottom:"15px"},children:[r.jsx("label",{htmlFor:"paymentAmount",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Amount ()"}),r.jsx("input",{type:"number",id:"paymentAmount",value:u,onChange:ke=>f(ke.target.value),placeholder:`Max ${(ce+le).toFixed(2)}`,min:"0.01",step:"0.01",max:ce+le,className:"payment-mode-select",required:!0})]}),r.jsxs("div",{className:"payment-input-group",children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",value:p,onChange:ke=>g(ke.target.value),className:"payment-mode-select",disabled:Y,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),Y&&r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"})]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{type:"button",onClick:ve,className:"secondary-button print-preview-button",children:"Print Preview"}),r.jsx("button",{type:"submit",className:"primary-button",disabled:x||!L&&(!u||parseFloat(u)<=0||parseFloat(u)>ce+le)||L&&(be<=0||be>ce+le+.1),children:x?"Processing...":"Record Payment & Print"})]})]}),fe&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:ve,className:"secondary-button",children:"Print Bill"})})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for choosing our hospital!"}),r.jsx("p",{children:"This is a computer-generated bill and does not require a signature."})]})]})})},l3e=e=>{switch(e){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},c3e=()=>{const{orderId:e}=Ii(),t=It(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(!1),[f,p]=b.useState({}),[g,x]=b.useState(""),[v,j]=b.useState(""),[w,_]=b.useState("cash"),T=b.useMemo(()=>(n==null?void 0:n.medications.reduce((L,V)=>{const H=V.total_price??0,te=H*(V.discount_percentage??0)/100;return L+H-te},0))??0,[n==null?void 0:n.medications]),C=5,O=b.useMemo(()=>!n||!n.medications?0:n.medications.reduce((L,V,H)=>{var G,z;const te=V.drug_id??`index-${H}`,X=((G=f[te])==null?void 0:G.pack)||0,q=((z=f[te])==null?void 0:z.loose)||0,W=V.pack_price??0,ae=V.loose_price??0;return L+X*W+q*ae},0),[n,f]),A=b.useCallback(async()=>{if(!e){l("Order ID is missing."),s(!1);return}s(!0),l(null);try{const L=await ue(`/api/pharmacy-orders/${e}`);if(!L.ok)throw L.status===404?new Error(`Order with ID ${e} not found.`):new Error(`Failed to fetch order details: ${L.statusText} (${L.status})`);const V=await L.json();console.log("Fetched order data after return:",V);const te=V.medications.map(q=>q.pack_price&&q.loose_price&&q.loose_price>0?{...q,unitsPerPack:Math.round(q.pack_price/q.loose_price)}:{...q,unitsPerPack:0}).map(q=>({...q,discount_percentage:q.discount_percentage??0}));i({...V,medications:te});const X={};te.forEach((q,W)=>{const ae=q.drug_id??`index-${W}`;X[ae]={pack:0,loose:0}}),p(X)}catch(L){console.error("Failed to fetch order details:",L),l(L.message||"Failed to load order details.")}finally{s(!1)}},[e]);b.useEffect(()=>{A()},[A]),b.useEffect(()=>{(async()=>{try{const V=await ue("/api/clinics/settings");if(!V.ok)throw new Error("Failed to fetch clinic settings");const H=await V.json();console.log("Fetched clinic settings:",H),x(H.upi_id||"")}catch(V){console.error("Error fetching clinic settings:",V)}})()},[]),b.useEffect(()=>{if((n==null?void 0:n.order_total)!==void 0&&n.order_total>0&&g){const L=`upi://pay?pa=${g}&pn=ClinicName&am=${n.order_total.toFixed(2)}&cu=INR`;j(L)}else j("")},[n==null?void 0:n.order_total,g]);const P=(L,V)=>{i(H=>{if(!H)return null;const te=H.medications.map((q,W)=>(q.drug_id??`index-${W}`)===L?{...q,discount_percentage:isNaN(V)?0:V}:q),X=te.reduce((q,W)=>{const ae=W.total_price??0,G=ae*(W.discount_percentage??0)/100;return q+ae-G},0);return{...H,medications:te,order_total:X}})},I=(L,V,H)=>{p(te=>{const X=H.unitsPerPack||0,W=H.pack_quantity*X+H.loose_quantity,ae=Math.max(0,Math.min(V,W));let G=0,z=ae;return X>0&&(G=Math.floor(ae/X),z=ae%X),{...te,[L]:{pack:G,loose:z}}})},F=async()=>{const L=n==null?void 0:n.medications.map((V,H)=>{var W,ae;const te=V.drug_id??`index-${H}`,X=((W=f[te])==null?void 0:W.pack)||0,q=((ae=f[te])==null?void 0:ae.loose)||0;return X>0||q>0?{drug_id:V.drug_id,name:V.name,pack_quantity:V.pack_quantity,loose_quantity:V.loose_quantity,returnPackQuantity:X,returnLooseQuantity:q}:null}).filter(V=>V!==null);if(!L||L.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!e){alert("Order ID is missing. Cannot process return.");return}if(!L){alert("Could not prepare items for return.");return}u(!0),l(null);try{const V=await ue(`/api/pharmacy-orders/${e}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:L})}),H=await V.json();if(!V.ok)throw new Error(H.message||`Failed to process return: ${V.statusText}`);const te={};n==null||n.medications.forEach((X,q)=>{const W=X.drug_id??`index-${q}`;te[W]={pack:0,loose:0}}),p(te),A()}catch(V){console.error("Failed to process return:",V),l(V.message||"An error occurred while processing the return."),alert(`Error processing return: ${V.message||"Unknown error"}`)}finally{u(!1)}};if(a)return r.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(o)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(rn,{size:14,className:"mr-1.5"})," Back"]}),r.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",o]})]});if(!n)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(rn,{size:14,className:"mr-1.5"})," Back"]}),r.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const B=()=>{window.print()},$=l3e(n.status);return r.jsx("div",{className:"pharmacy-order-details-page",children:r.jsxs("div",{className:"order-details-container printable-section",children:[r.jsxs("div",{className:"order-details-header no-print",children:[r.jsx("h1",{children:"Pharmacy Order Details"}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{size:20})}),r.jsxs("button",{onClick:B,className:"print-button",children:[r.jsx(Uv,{size:18})," Print Bill"]})]})]}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{children:"Mahajan Pharmacy"}),r.jsxs("div",{className:"clinic-details-print",children:[r.jsx("span",{className:"small-text clinic-address",children:"D.No: 3-1-289, Plot No. 101, Kabela Center, RR Nagar, Vijayawada  520012."}),r.jsx("span",{className:"small-text clinic-notes",children:"Phone: 93919 44733"}),r.jsx("span",{className:"small-text clinic-license",children:"Licence No:RLF20AP2025003328"})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Patient Name:"})," RESHMA"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Token:"})," 12"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Order Date:"})," 31/10/2025"]})]})]}),r.jsxs("div",{className:"order-info-section no-print",children:[r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Order ID:"})," ",n.id]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Patient:"})," ",n.patientName||"N/A"," (",n.patientTokenNumber||"N/A",")"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleString()]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Prescribed By:"})," ",n.prescribedBy||"N/A"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:`status-pill ${$.text} ${$.bg}`,children:n.status})]})]}),r.jsxs("div",{className:"medications-section",children:[r.jsx("h2",{children:"Medications Ordered"}),n.medications.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"PACK QTY"}),r.jsx("th",{children:"PACK PRICE"}),r.jsx("th",{children:"LOOSE QTY"}),r.jsx("th",{children:"LOOSE PRICE"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"no-print",children:"RETURN PACK QTY"}),r.jsx("th",{className:"no-print",children:"RETURN LOOSE QTY"})]})]})}),r.jsx("tbody",{children:n.medications.map((L,V)=>{var G,z;const H=L.drug_id??`index-${V}`,te=L.total_price??0,X=te*(L.discount_percentage??0)/100,q=te-X,W=((G=f[H])==null?void 0:G.pack)||0,ae=((z=f[H])==null?void 0:z.loose)||0;return r.jsxs("tr",{children:[r.jsx("td",{children:L.name}),r.jsx("td",{children:L.pack_quantity??0}),r.jsx("td",{children:L.pack_price!=null?Number(L.pack_price).toFixed(2):"N/A"}),r.jsx("td",{children:L.loose_quantity??0}),r.jsx("td",{children:L.loose_price!=null?Number(L.loose_price).toFixed(2):"N/A"}),r.jsx("td",{children:L.price!=null?Number(L.price).toFixed(2):"N/A"})," ",r.jsx("td",{children:L.price!=null?Number(L.price).toFixed(2):"N/A"})," ",r.jsxs("td",{children:[r.jsx("input",{type:"number",value:L.discount_percentage??0,onChange:le=>P(H,parseFloat(le.target.value)),min:"0",max:"100",className:"discount-input-table no-print"}),r.jsxs("span",{className:"print-only",children:[L.discount_percentage??0,"%"]})]}),r.jsxs("td",{children:[C.toFixed(1),"%"]}),r.jsx("td",{children:q.toFixed(2)}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:L.pack_quantity,value:W,onChange:le=>{const Y=(parseInt(le.target.value,10)||0)*(L.unitsPerPack||0)+ae;I(H,Y,L)},className:"return-quantity-input"})}),r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:L.loose_quantity+L.pack_quantity*(L.unitsPerPack||0)-W*(L.unitsPerPack||0),value:ae,onChange:le=>{const je=parseInt(le.target.value,10)||0,Y=W*(L.unitsPerPack||0)+je;I(H,Y,L)},className:"return-quantity-input"})})]})]},H)})})]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",T.toFixed(2)]})}),r.jsxs("div",{className:"order-total-section no-print",children:[r.jsx("span",{className:"total-label",children:"Order Total:"}),r.jsxs("span",{className:"total-amount",children:["",T.toFixed(2)]})]}),r.jsxs("div",{className:"payment-section no-print",children:[r.jsxs("div",{className:"payment-mode-group",children:[r.jsx("label",{htmlFor:"paymentMode",children:"Payment Mode:"}),r.jsxs("select",{id:"paymentMode",value:w,onChange:L=>_(L.target.value),className:"payment-mode-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),v&&r.jsxs("div",{className:"qr-code-container",children:[r.jsx(pa,{value:v,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]})]}),(n.status==="dispensed"||n.status==="billed")&&n.medications.length>0&&r.jsxs("div",{className:"return-action-section no-print",children:[O>0&&r.jsxs("div",{className:"total-refund-display",children:["Total Refund: ",O.toFixed(2)]}),r.jsx("button",{onClick:F,disabled:Object.values(f).every(L=>L.pack===0&&L.loose===0)||c,className:"process-return-button",children:c?r.jsxs(r.Fragment,{children:[r.jsx(Yk,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Yk,{size:16,className:"mr-2"})," Process Return"]})})]})]})})},u3e=async()=>{const e=await ue("/subscriptions");if(!e.ok)throw new Error("Failed to fetch subscription plans");return await e.json()},d3e=async e=>{const t=await ue(`/subscriptions/${e}`);if(!t.ok){const n=await t.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(n.message||"Failed to fetch subscription plan details")}return await t.json()},h3e=async e=>{const t=await ue("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(n.message||"Failed to create subscription plan")}return await t.json()},f3e=async(e,t)=>{const n=await ue(`/subscriptions/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const i=await n.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(i.message||"Failed to update subscription plan")}return await n.json()},p3e=async e=>{const t=await ue(`/subscriptions/${e}`,{method:"DELETE"});if(!t.ok){const n=await t.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(n.message||"Failed to deactivate subscription plan")}return await t.json()},m3e=async(e,t)=>{const n=await ue("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:e,planId:t})});if(!n.ok){const i=await n.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(i.message||"Failed to initiate Razorpay subscription")}return await n.json()},g3e=()=>{const e=It(),[t,n]=b.useState([]),[i,a]=b.useState(!1),[s,o]=b.useState(null),[l,c]=b.useState(null),u=b.useCallback(async()=>{a(!0),o(null);try{const p=await u3e();n(p)}catch(p){o(p.message||"Failed to fetch subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{a(!1)}},[]);b.useEffect(()=>{u()},[u]),b.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){a(!0),o(null),c(null);try{await p3e(p),c({type:"success",message:"Plan deactivated successfully!"}),u()}catch(g){o(g.message||"Failed to deactivate plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{a(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Bl,{size:18,className:"mr-2 text-green-500"}):r.jsx(Zr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ut,{size:16})})]}),r.jsxs("div",{children:[" ",r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{size:16})}),r.jsx("h1",{children:"Manage Subscription Plans"}),r.jsxs("button",{onClick:()=>e("/dashboard/subscriptions/add"),className:"subscription-btn",children:[r.jsx(hr,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),i&&t.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(Z,{width:80,height:32})})]},p))})]})}),!i&&s&&t.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),t.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:t.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>e(`/dashboard/subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx($a,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:i,children:r.jsx(Yn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!i&&t.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},y3e=()=>{const e=It(),[t,n]=b.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[i,a]=b.useState(!1),[s,o]=b.useState(null),[l,c]=b.useState(null);b.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const u=g=>{const{name:x,value:v}=g.target;n(j=>({...j,[x]:v}))},f=async g=>{if(g.preventDefault(),a(!0),o(null),c(null),!t.name||!t.price||!t.period||t.interval===void 0||t.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),a(!1);return}try{await h3e(t),c({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{e("/dashboard/subscriptions")},2e3)}catch(x){const v=x.message||"Failed to create plan.";o(v),c({type:"error",message:v})}finally{a(!1)}},p=()=>{e(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Bl,{size:18,className:"mr-2 text-green-500"}):r.jsx(Zr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ut,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:t.name||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:t.description||"",onChange:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:t.price!==void 0?t.price:"",onChange:u,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:t.period||"monthly",onChange:u,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:t.interval||1,onChange:u,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:t.razorpay_plan_id||"",onChange:u})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:r.jsx(rn,{size:16})}),r.jsxs("button",{type:"submit",disabled:i,className:"subscription-btn",children:[i?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,i?"Creating...":"Create Plan"]})]})]})]})]})},x3e=()=>{const{id:e}=Ii(),t=It(),[n,i]=b.useState(null),[a,s]=b.useState({}),[o,l]=b.useState(!1),[c,u]=b.useState(!0),[f,p]=b.useState(null),[g,x]=b.useState(null),v=b.useCallback(async()=>{if(!e){p("Plan ID is missing."),u(!1);return}u(!0),p(null);try{const T=await d3e(e);i(T),s({name:T.name,description:T.description||"",price:T.price,period:T.period,interval:T.interval,razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{u(!1)}},[e]);b.useEffect(()=>{v()},[v]),b.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:O}=T.target;s(A=>({...A,[C]:O}))},w=async T=>{if(T.preventDefault(),!e){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!a.name||!a.price||!a.period||a.interval===void 0||a.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await f3e(e,a),x({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{t(-1)},2e3)}catch(C){const O=C.message||"Failed to update plan.";p(O),x({type:"error",message:O})}finally{l(!1)}},_=()=>{t(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Bl,{size:18,className:"mr-2"}):r.jsx(Zr,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Ut,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:w,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:a.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:a.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:a.price!==void 0?a.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:a.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:a.interval||1,onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:a.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:a.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:r.jsx(rn,{size:16})}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},v3e=()=>{const{patientId:e}=Ii(),t=It(),[n,i]=b.useState(null),[a,s]=b.useState([]),[o,l]=b.useState(""),[c,u]=b.useState(!0),[f,p]=b.useState(null),[g,x]=b.useState("manual"),[v,j]=b.useState(!1),[w,_]=b.useState(null),T=b.useCallback(async()=>{u(!0),p(null);try{const A=await ue(`/api/patients/${e}`);if(!A.ok){const B=await A.json();throw new Error(B.message||"Failed to fetch patient details")}const P=await A.json();i(P);const I=await ue("/api/subscriptions");if(!I.ok){const B=await I.json();throw new Error(B.message||"Failed to fetch subscription plans")}const F=await I.json();s(F.filter(B=>B.status==="active"))}catch(A){console.error("Error fetching data:",A),p(`Failed to load data: ${A.message}`)}finally{u(!1)}},[e]);b.useEffect(()=>{e?T():(p("Patient ID is missing."),u(!1))},[e,T]);const C=(A,P)=>{const I=new Date(A),F=P.interval||1;switch(P.period){case"daily":I.setDate(A.getDate()+F);break;case"weekly":I.setDate(A.getDate()+F*7);break;case"monthly":I.setMonth(A.getMonth()+F);break;case"yearly":I.setFullYear(A.getFullYear()+F);break;default:console.warn(`Unknown subscription period: ${P.period}. Defaulting to 1 month.`),I.setMonth(A.getMonth()+1)}return I},O=async()=>{if(!e||!o){_("Please select a subscription plan.");return}const A=a.find(P=>P.id===o);if(!A){_("Selected plan details not found.");return}j(!0),_(null);try{const P=new Date,I=C(P,A);if(g==="manual"){const F={subscription_plan_id:o,subscription_status:"active",subscription_start_date:P.toISOString(),subscription_end_date:I.toISOString(),subscription_payment_method:"manual"},B=await ue(`/api/patients/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!B.ok){const $=await B.json();throw new Error($.message||"Failed to start subscription manually")}t("/all-patients")}else if(g==="razorpay"){console.log("Initiating Razorpay subscription for plan:",A);const F=await m3e(e,o);if(F&&F.short_url)window.location.href=F.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch(P){console.error("Error starting subscription:",P),_(`Failed to start subscription: ${P.message}`),j(!1)}};return c?r.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):f?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:f})]}),r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{size:16})})]}):n?r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{size:16})}),r.jsxs("h1",{children:[r.jsx(jr,{size:28})," ","Start Subscription for ",n.name]}),w&&r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",r.jsx("span",{children:w})]}),r.jsxs("div",{className:"subscription-form",children:[" ",r.jsx("h2",{children:"Available Subscription Plans"}),a.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:a.map(A=>r.jsxs("div",{className:`subscription-plan-card ${o===A.id?"selected-plan":""}`,onClick:()=>l(A.id),children:[r.jsx("h3",{children:A.name}),r.jsxs("p",{className:"price",children:["",A.price]}),r.jsxs("p",{className:"duration",children:["Every ",A.interval," ",A.period,A.interval>1?"s":""]}),A.description&&r.jsx("p",{children:A.description})]},A.id))})]}),r.jsxs("div",{className:"subscription-form mb-6",children:[" ",r.jsx("h2",{children:"Select Payment Method"}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:g==="manual",onChange:()=>x("manual"),className:"mr-2"}),r.jsx("span",{children:"Cash (Manual)"})]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:g==="razorpay",onChange:()=>x("razorpay"),className:"mr-2"}),r.jsx("span",{children:"Razorpay"})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:O,disabled:!o||v||a.length===0,className:"subscription-btn",children:[v&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),v?"Starting...":"Start Subscription"]})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Warning: "}),r.jsx("span",{children:"Patient not found."})]}),r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(rn,{size:16})})]})},b3e=()=>{const e=It(),[t,n]=b.useState([]),[i,a]=b.useState(!1),[s,o]=b.useState(null),[l,c]=b.useState(null),u=b.useCallback(async()=>{a(!0),o(null);try{const p=await hI();n(p)}catch(p){o(p.message||"Failed to fetch clinic subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{a(!1)}},[]);b.useEffect(()=>{u()},[u]),b.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){a(!0),o(null),c(null);try{await UMe(p),c({type:"success",message:"Clinic plan deactivated successfully!"}),u()}catch(g){o(g.message||"Failed to deactivate clinic plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{a(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Bl,{size:18,className:"mr-2 text-green-500"}):r.jsx(Zr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ut,{size:16})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(rn,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),r.jsxs("button",{onClick:()=>e("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[r.jsx(hr,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),i&&t.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(Z,{width:80,height:32})})]},p))})]})}),!i&&s&&t.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),t.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:t.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>e(`/dashboard/clinic-subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx($a,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:i,children:r.jsx(Yn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!i&&t.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},j3e=()=>{const e=It(),[t,n]=b.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[i,a]=b.useState(!1),[s,o]=b.useState(null),[l,c]=b.useState(null);b.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const u=g=>{const{name:x,value:v,type:j}=g.target;n(w=>({...w,[x]:j==="number"?parseFloat(v):v}))},f=async g=>{if(g.preventDefault(),a(!0),o(null),c(null),!t.name||!t.price||!t.period||t.interval===void 0||t.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),a(!1);return}try{await zMe(t),c({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{e("/dashboard/clinic-subscriptions")},2e3)}catch(x){const v=x.message||"Failed to create clinic plan.";o(v),c({type:"error",message:v})}finally{a(!1)}},p=()=>{e(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Bl,{size:18,className:"mr-2 text-green-500"}):r.jsx(Zr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Ut,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Clinic Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:t.name||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:t.description||"",onChange:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:t.price!==void 0?t.price:"",onChange:u,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:t.period||"monthly",onChange:u,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:t.interval||1,onChange:u,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:t.razorpay_plan_id||"",onChange:u})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:i,className:"subscription-btn",children:[i?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,i?"Creating...":"Create Plan"]})]})]})]})]})},w3e=()=>{const{id:e}=Ii(),t=It(),[n,i]=b.useState(null),[a,s]=b.useState({}),[o,l]=b.useState(!1),[c,u]=b.useState(!0),[f,p]=b.useState(null),[g,x]=b.useState(null),v=b.useCallback(async()=>{if(!e){p("Plan ID is missing."),u(!1);return}u(!0),p(null);try{const T=await BMe(e);i(T),s({name:T.name,description:T.description||"",price:Number(T.price),period:T.period,interval:Number(T.interval),razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch clinic plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{u(!1)}},[e]);b.useEffect(()=>{v()},[v]),b.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:O,type:A}=T.target;s(P=>({...P,[C]:A==="number"?parseFloat(O):O}))},w=async T=>{if(T.preventDefault(),!e){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!a.name||!a.price||!a.period||a.interval===void 0||a.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await qMe(e,a),x({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{t(-1)},2e3)}catch(C){const O=C.message||"Failed to update clinic plan.";p(O),x({type:"error",message:O})}finally{l(!1)}},_=()=>{t(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Bl,{size:18,className:"mr-2"}):r.jsx(Zr,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(Ut,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Clinic Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:w,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:a.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:a.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:a.price!==void 0?a.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:a.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:a.interval!==void 0?a.interval:"",onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:a.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:a.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},S3e=()=>{const e=It(),[t,n]=b.useState([]),[i,a]=b.useState(""),[s,o]=b.useState(!0),[l,c]=b.useState(null),[u,f]=b.useState(!1),[p,g]=b.useState(null),x=b.useCallback(async()=>{c(null);try{const w=(await hI()).filter(_=>_.status==="active");n(w),w.length>0&&!i&&a(w[0].id)}catch(j){console.error("Error fetching plans:",j),c(`Failed to load subscription plans: ${j.message}`)}},[]);b.useEffect(()=>{(async()=>{o(!0);try{const w=await HMe();if(w&&w.short_url){window.location.href=w.short_url,c("You have a pending subscription. Redirecting to payment...");return}await x()}catch(w){console.error("Error during initial page load:",w),c(`An unexpected error occurred: ${w.message}`)}finally{o(!1)}})()},[x]);const v=async()=>{if(!i){g("Please select a clinic subscription plan.");return}const j=t.find(w=>w.id===i);if(!j){g("Selected plan details not found.");return}f(!0),g(null);try{console.log("Initiating Razorpay clinic subscription for plan:",j);const w=await VMe(i);if(w&&w.short_url)window.location.href=w.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(w){console.error("Error starting clinic subscription:",w),g(`Failed to start clinic subscription: ${w.message}`),f(!1)}};return s?r.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):l?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:l})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{size:16})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{size:16})}),r.jsxs("h1",{children:[r.jsx(tJ,{size:28}),"Buy Pro Plan for Clinic"]}),p&&r.jsx("div",{className:"error-alert-subscription",role:"alert",children:r.jsx("span",{children:p})}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h2",{children:"Available Pro Plans"}),t.length===0?r.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:t.map(j=>r.jsxs("div",{className:`subscription-plan-card ${i===j.id?"selected-plan":""}`,onClick:()=>a(j.id),children:[r.jsx("h3",{children:j.name}),r.jsxs("p",{className:"price",children:["",Number(j.price).toFixed(2)]}),r.jsxs("p",{className:"duration",children:["Every ",j.interval," ",j.period,j.interval>1?"s":""]}),j.description&&r.jsx("p",{children:j.description})]},j.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:v,disabled:!i||u||t.length===0,className:"subscription-btn",children:[u&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),u?"Initiating Payment...":"Buy Pro Plan"]})})]})},N3e=()=>{const e=It(),[t,n]=b.useState([]),[i,a]=b.useState(!0),[s,o]=b.useState(!0),[l,c]=b.useState(null),[u,f]=b.useState(!1),[p,g]=b.useState(!1),[x,v]=b.useState(null),[j,w]=b.useState({name:"",email:"",password:"",role:"user"}),[_,T]=b.useState({name:"",email:"",role:"",password:"",confirmPassword:""}),[C,O]=b.useState(""),[A,P]=b.useState(""),[I,F]=b.useState({}),[B,$]=b.useState(!1),[L,V]=b.useState(null),[H,te]=b.useState([]),[X,q]=b.useState(""),[W,ae]=b.useState(!1),[G,z]=b.useState(null);b.useEffect(()=>{const ve=setTimeout(()=>{P(C)},500);return()=>{clearTimeout(ve)}},[C]),b.useEffect(()=>{le(A)},[A]);const le=async(ve="")=>{a(!0);try{const ce=ve?`/api/users?search=${encodeURIComponent(ve)}`:"/api/users",se=await(await ue(ce)).json();if(n(se),se.length>0){const Q=[...new Set(se.map(ge=>ge.clinic_id).filter(ge=>!!ge))],ie={};await Promise.all(Q.map(async ge=>{try{const ee=await $Me(ge);ie[ge]=ee}catch(ee){console.error(`Failed to fetch subscription status for clinic ${ge}`,ee),ie[ge]={hasProPlan:!1}}})),F(ie)}c(null)}catch(ce){c("Failed to fetch users."),console.error(ce)}finally{a(!1),o(!1)}},je=async ve=>{ve.preventDefault();try{await ue("/users",{method:"POST",body:JSON.stringify(j)}),f(!1),w({name:"",email:"",password:"",role:"user"}),le()}catch(ce){c("Failed to add user."),console.error(ce)}},Y=async ve=>{if(ve.preventDefault(),!x)return;const{password:ce,confirmPassword:fe,...se}=_,Q={...se};if(ce){if(ce.length<6){c("Password must be at least 6 characters long.");return}if(ce!==fe){c("Passwords do not match.");return}Q.password=ce}try{await ue(`/users/${x.id}`,{method:"PUT",body:JSON.stringify(Q)}),g(!1),v(null),T({..._,password:"",confirmPassword:""}),le()}catch(ie){c("Failed to update user."),console.error(ie)}},Oe=async ve=>{if(window.confirm("Are you sure you want to delete this user?"))try{await ue(`/users/${ve}`,{method:"DELETE"}),le()}catch(ce){c("Failed to delete user."),console.error(ce)}},Ke=ve=>{v(ve),T({name:ve.name,email:ve.email,role:ve.role,password:"",confirmPassword:""}),g(!0)},Me=async()=>{ae(!0);try{const ve=await hI();te(ve),ve.length>0&&q(ve[0].id),z(null)}catch(ve){z("Failed to fetch subscription plans."),console.error(ve)}finally{ae(!1)}},Ie=ve=>{V(ve),$(!0),Me()},be=async ve=>{if(ve.preventDefault(),!L||!X){c("Please select a clinic and a plan.");return}try{await ue("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:L,planId:X})}),$(!1),V(null),q(""),le(),c(null)}catch(ce){c("Failed to manually activate clinic subscription."),console.error(ce)}},re=async ve=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await FMe(ve),le(),c(null)}catch(ce){c("Failed to cancel subscription."),console.error(ce)}};return i&&s?r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("div",{className:"back-button",style:{width:80,height:32},children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx(Z,{width:"100%",height:40,style:{maxWidth:"300px"}}),r.jsx(Z,{width:150,height:40})]}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(ve=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},ve))})]})]}):l&&s?r.jsx("div",{className:"error-message",children:l}):r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"User Management"})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:C,onChange:ve=>O(ve.target.value),className:"search-input"}),r.jsx("button",{onClick:()=>f(!0),className:"add-user-button",children:"Add New User"})]}),u&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>f(!1),children:""}),r.jsx("h2",{children:"Add New User"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:j.name,onChange:ve=>w({...j,name:ve.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:j.email,onChange:ve=>w({...j,email:ve.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",value:j.password,onChange:ve=>w({...j,password:ve.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:j.role,onChange:ve=>w({...j,role:ve.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Add User"})]})]})}),p&&x&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>g(!1),children:""}),r.jsx("h2",{children:"Edit User"}),r.jsxs("form",{onSubmit:Y,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:_.name,onChange:ve=>T({..._,name:ve.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:_.email,onChange:ve=>T({..._,email:ve.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:_.role,onChange:ve=>T({..._,role:ve.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"New Password (optional):"}),r.jsx("input",{type:"password",value:_.password,onChange:ve=>T({..._,password:ve.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm New Password:"}),r.jsx("input",{type:"password",value:_.confirmPassword,onChange:ve=>T({..._,confirmPassword:ve.target.value})})]}),r.jsx("button",{type:"submit",children:"Update User"})]})]})}),B&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>$(!1),children:""}),r.jsx("h2",{children:"Select Subscription Plan for Clinic"}),W&&r.jsx("div",{children:"Loading plans..."}),G&&r.jsx("div",{className:"error-message",children:G}),!W&&!G&&H.length===0&&r.jsx("div",{children:"No active subscription plans available."}),!W&&!G&&H.length>0&&r.jsxs("form",{onSubmit:be,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Plan:"}),r.jsx("select",{value:X,onChange:ve=>q(ve.target.value),required:!0,children:H.map(ve=>r.jsxs("option",{value:ve.id,children:[ve.name," - $",ve.price,"/",ve.interval," ",ve.period]},ve.id))})]}),r.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map(ve=>{const ce=ve.clinic_id||"N/A",fe=ce!=="N/A"?I[ce]:null,se=(fe==null?void 0:fe.hasProPlan)??!1,Q=se?"PRO":"Standard";return r.jsxs("tr",{children:[r.jsx("td",{children:ve.name}),r.jsx("td",{children:ve.email}),r.jsx("td",{children:ve.role}),r.jsx("td",{children:ce}),r.jsx("td",{children:ce!=="N/A"?r.jsx("span",{className:se?"pro-badge":"standard-badge",children:Q}):"N/A"}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>Ke(ve),className:"edit-button",children:"Edit"}),r.jsx("button",{onClick:()=>Oe(ve.id),className:"delete-button",children:"Delete"}),ve.clinic_id&&!se&&r.jsx("button",{onClick:()=>Ie(ve.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),ve.clinic_id&&se&&r.jsx("button",{onClick:()=>re(ve.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},ve.id)})})]})]})},_3e="_modalOverlay_1spz3_3",C3e="_modalContent_1spz3_29",T3e="_modalHeader_1spz3_53",A3e="_modalTitle_1spz3_71",E3e="_modalCloseButton_1spz3_83",k3e="_modalBody_1spz3_111",P3e="_formGroup_1spz3_119",O3e="_inputField_1spz3_141",D3e="_errorText_1spz3_175",M3e="_successText_1spz3_193",I3e="_modalFooter_1spz3_211",R3e="_button_1spz3_227",L3e="_buttonPrimary_1spz3_247",F3e="_buttonSecondary_1spz3_265",Ea={modalOverlay:_3e,modalContent:C3e,modalHeader:T3e,modalTitle:A3e,modalCloseButton:E3e,modalBody:k3e,formGroup:P3e,inputField:O3e,errorText:D3e,successText:M3e,modalFooter:I3e,button:R3e,buttonPrimary:L3e,buttonSecondary:F3e},$3e=({isOpen:e,onClose:t})=>{const[n,i]=b.useState(""),[a,s]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(null),[f,p]=b.useState(null);eu(void 0,e?200:99999),b.useEffect(()=>{e&&g()},[e]);const g=async()=>{s(!0),u(null);try{const v=await ue("/api/global-settings/app_gemini_api_key");if(v.ok){const j=await v.json();i(j.value||"")}else v.status}catch(v){console.warn("Could not fetch existing key:",v)}finally{s(!1)}},x=async()=>{l(!0),u(null),p(null);try{if(!(await ue("/api/global-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"app_gemini_api_key",value:n})})).ok)throw new Error("Failed to save API Key");p("API Key updated successfully!"),setTimeout(()=>{t(),p(null)},1500)}catch(v){u(v.message||"Error saving key")}finally{l(!1)}};return e?r.jsx("div",{className:Ea.modalOverlay,children:r.jsxs("div",{className:Ea.modalContent,children:[r.jsxs("div",{className:Ea.modalHeader,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(Fq,{size:24}),r.jsx("h3",{className:Ea.modalTitle,children:"App Gemini API Key"})]}),r.jsx("button",{onClick:t,className:Ea.modalCloseButton,children:r.jsx(Ut,{size:20})})]}),r.jsxs("div",{className:Ea.modalBody,children:[c&&r.jsx("div",{className:Ea.errorText,children:c}),f&&r.jsx("div",{className:Ea.successText,children:f}),r.jsxs("div",{className:Ea.formGroup,children:[r.jsx("label",{htmlFor:"gemini-key",children:"Gemini API Key"}),a?r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}}):r.jsx("input",{type:"text",id:"gemini-key",value:n,onChange:v=>i(v.target.value),className:Ea.inputField,placeholder:"Enter Gemini API Key (AIza...)",disabled:o})]}),r.jsx("p",{style:{fontSize:"0.9em",color:"var(--secondary-text-color, #666)"},children:"This key will be used as a fallback for all clinics if their specific Gemini API key is not configured."})]}),r.jsxs("div",{className:Ea.modalFooter,children:[r.jsx("button",{onClick:t,className:`${Ea.button} ${Ea.buttonSecondary}`,disabled:o,children:"Cancel"}),r.jsx("button",{onClick:x,className:`${Ea.button} ${Ea.buttonPrimary}`,disabled:o,children:o?"Saving...":"Save Key"})]})]})}):null},B3e=()=>{const[e,t]=b.useState(!1);return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("h1",{className:"admin-panel-title",children:[r.jsx(md,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),r.jsxs("div",{className:"admin-panel-grid",children:[r.jsxs(_r,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[r.jsx(_f,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Clinic Subscription Plans"}),r.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),r.jsxs(_r,{to:"/dashboard/users",className:"admin-panel-card",children:[r.jsx(Ro,{size:48,className:"card-icon"}),r.jsx("h2",{children:"User Management"}),r.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]}),r.jsxs("div",{className:"admin-panel-card",onClick:()=>t(!0),style:{cursor:"pointer"},children:[r.jsx(Fq,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage App Gemini API Key"}),r.jsx("p",{children:"Update the fallback Gemini API key used by the application."})]})]}),r.jsx($3e,{isOpen:e,onClose:()=>t(!1)})]})},xk="tutorialCurrentStep",z3e=({onActionComplete:e})=>{const[t,n]=b.useState(!1),[i,a]=b.useState(!1),[s,o]=b.useState(null),l=async()=>{var c,u;n(!0);try{const f=await ue("/api/drugs/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){a(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((u=p.details)==null?void 0:u.updated)||0,v=`Added: ${g}, Updated: ${x}`;o(v),e(!0,"Default medications imported successfully!","pharmacyImport")}else e(!1,"Failed to import medications.")}catch{e(!1,"Error importing medications.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"One click to populate your inventory."}),i?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ml,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:t,children:t?r.jsxs(r.Fragment,{children:[r.jsx(zc,{size:18,className:"animate-spin"})," Importing ~80 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pw,{size:18})," Import Drugs"]})})]})},q3e=({onActionComplete:e})=>{const[t,n]=b.useState(!1),[i,a]=b.useState(!1),[s,o]=b.useState(null),l=async()=>{var c,u;n(!0);try{const f=await ue("/api/lab-tests/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){a(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((u=p.details)==null?void 0:u.updated)||0,v=`Added: ${g}, Updated: ${x}`;o(v),e(!0,"Default lab tests imported successfully!","labImport")}else e(!1,"Failed to import lab tests.")}catch{e(!1,"Error importing lab tests.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Setup your lab with common tests."}),i?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ml,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:t,children:t?r.jsxs(r.Fragment,{children:[r.jsx(zc,{size:18,className:"animate-spin"})," Importing ~25 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(os,{size:18})," Import Tests"]})})]})},U3e=({onOpenCommandBar:e})=>r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Ready to experience the power? Open the command bar to start."}),r.jsx("button",{onClick:e,className:"tutorial-button primary large-button",children:r.jsxs("div",{className:"flex items-center gap-2",children:["Open Command Bar ",r.jsx("span",{className:"shortcut-hint-badge",children:"Ctrl+K"})]})})]}),vk=[{title:"Welcome to Newtons Ai HMS",description:"Your all-in-one clinic management solution. Let's get your clinic ready in less than 2 minutes.",icon:r.jsx(Ow,{size:48,className:"step-icon welcome"}),component:null,actionText:"Get Started"},{title:"Pharmacy Setup",description:"Start by populating your pharmacy. We can import a standard list of medicines for you.",icon:r.jsx(Pw,{size:48,className:"step-icon pharmacy"}),component:z3e,actionText:"Next",showSkip:!0},{title:"Lab Configuration",description:"Next, let's set up your lab. Import common lab tests to start generating reports immediately.",icon:r.jsx(os,{size:48,className:"step-icon lab"}),component:q3e,actionText:"Next",showSkip:!0},{title:"Power at Your Fingertips",description:"The Command Bar is your central hub for everything. Search patients, add orders, or use AI tools instantly.",icon:r.jsx(QX,{size:48,className:"step-icon ai"}),component:U3e,actionText:null,isLast:!0}],V3e=({onClose:e,onMarkAsSeen:t})=>{const{openCommandBar:n}=$c(),[i,a]=b.useState(()=>{const w=localStorage.getItem(xk);return w?parseInt(w,10):0}),[s,o]=b.useState(!1),[l,c]=b.useState(null),[u,f]=b.useState(null);b.useEffect(()=>{localStorage.setItem(xk,i.toString()),c(null)},[i]);const p=()=>{o(!0),setTimeout(()=>{a(w=>Math.min(w+1,vk.length-1)),o(!1)},300)},g=(w,_,T)=>{f(w),c(_),w&&(T==="pharmacyImport"||T==="labImport")&&setTimeout(p,1e3)},x=()=>{t(),e(),localStorage.removeItem(xk)},v=()=>{x(),setTimeout(()=>{n()},100)},j=vk[i];return r.jsx("div",{className:"tutorial-overlay",children:r.jsxs("div",{className:`tutorial-card ${s?"fade-out":"fade-in"}`,children:[r.jsxs("div",{className:"tutorial-visual",children:[r.jsx("div",{className:"icon-circle",children:j.icon}),r.jsx("div",{className:"step-indicators",children:vk.map((w,_)=>r.jsx("div",{className:`step-dot ${_===i?"active":""} ${_<i?"completed":""}`},_))})]}),r.jsxs("div",{className:"tutorial-content",children:[r.jsx("button",{className:"close-button",onClick:x,title:"Close Tutorial",children:r.jsx(Ut,{size:20})}),r.jsxs("div",{className:"text-content",children:[r.jsx("h2",{children:j.title}),r.jsx("p",{className:"description",children:j.description})]}),r.jsxs("div",{className:"interactive-area",children:[j.component?r.jsx(j.component,{onActionComplete:g,onOpenCommandBar:v}):null,l&&r.jsx("div",{className:`status-message ${u?"success":"error"}`,children:l})]}),r.jsxs("div",{className:"action-footer",children:[j.showSkip&&r.jsx("button",{onClick:p,className:"tutorial-button text-only",children:"Skip for now"}),j.actionText&&r.jsxs("button",{onClick:p,className:"tutorial-button primary",children:[j.actionText," ",r.jsx(vd,{size:16})]})]})]})]})})},H3e=({isOpen:e,onClose:t,onSuccess:n,medication:i,initialPatient:a,initialItems:s})=>{const[o,l]=b.useState(""),[c,u]=b.useState([]),[f,p]=b.useState(null),[g,x]=b.useState(!1);eu(void 0,e?200:99999),b.useEffect(()=>{if(e&&i){j([{id:Date.now(),medication_name:i.medicationName,drug_id:null,quantity:i.quantity,tablets_per_day:i.tabletsPerDay||1,number_of_days:i.numberOfDays||30,directions:i.directions||"",notes:i.notes||""}]),_(i.frequencyDays);try{const Ie=new Date(i.nextDeliveryDate);isNaN(Ie.getTime())||C(Ie.toISOString().split("T")[0])}catch(Ie){console.error("Error parsing date",Ie)}p({id:i.patientId,name:i.patientName,phone:i.patientPhone,patient_token_number:i.patientToken})}else e&&(a||s)?(s&&s.length>0&&j(s),a&&p(a)):e&&!i&&!s&&(j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30),C(""),p(null),l(""))},[e,i,a,s]);const[v,j]=b.useState([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),[w,_]=b.useState(30),[T,C]=b.useState(""),[O,A]=b.useState(null),[P,I]=b.useState(""),[F,B]=b.useState([]),[$,L]=b.useState(!1),[V,H]=b.useState(!1),[te,X]=b.useState(null),q=b.useRef(null),W=b.useRef(null);b.useEffect(()=>{if(e){const Ie=new Date;Ie.setDate(Ie.getDate()+30),C(Ie.toISOString().split("T")[0])}},[e]);const ae=b.useCallback(async Ie=>{if(!Ie.trim()){u([]);return}x(!0);try{const be=await ue(`/api/patients?search=${encodeURIComponent(Ie)}&limit=10`);if(be.ok){const re=await be.json();u(re.patients||[])}}catch(be){console.error("Error searching patients:",be)}finally{x(!1)}},[]);b.useEffect(()=>{q.current&&clearTimeout(q.current),o&&!f?q.current=setTimeout(()=>ae(o),300):u([])},[o,f,ae]);const G=b.useCallback(async Ie=>{if(!Ie.trim()){B([]);return}L(!0);try{const be=await ue(`/api/drugs?search=${encodeURIComponent(Ie)}&limit=10`);if(be.ok){const re=await be.json();B(re.drugs||[])}}catch(be){console.error("Error searching drugs:",be)}finally{L(!1)}},[]);b.useEffect(()=>{W.current&&clearTimeout(W.current),P&&O!==null?W.current=setTimeout(()=>G(P),300):B([])},[P,O,G]);const z=Ie=>{if(!Ie)return 1;const be=Ie.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return be?parseInt(be[1],10):1},le=Ie=>{p(Ie),l(`${Ie.name} (${Ie.patient_token_number})`),u([])},je=(Ie,be)=>{const re=[...v];re[be]={...re[be],medication_name:Ie.name,drug_id:Ie.id,pack_size:z(Ie.pack),packs:0,loose:0,quantity:0},j(re),A(null),I(""),B([])},Y=(Ie,be,re)=>{const ve=[...v],ce={...ve[Ie]},fe=ce.pack_size||1;if(be==="packs"||be==="loose"){const se=parseInt(re)||0;be==="packs"&&(ce.packs=se),be==="loose"&&(ce.loose=se);const Q=ce.packs||0,ie=ce.loose||0;ce.quantity=Q*fe+ie}else if(be==="tablets_per_day"||be==="number_of_days"){be==="tablets_per_day"&&(ce.tablets_per_day=re),be==="number_of_days"&&(ce.number_of_days=re);const se=parseFloat(ce.tablets_per_day.toString())||0,Q=parseInt(ce.number_of_days.toString())||0,ie=Math.ceil(se*Q);ce.quantity=ie,ce.packs=Math.floor(ie/fe),ce.loose=ie%fe}else ce[be]=re;ve[Ie]=ce,j(ve)},Oe=()=>{j([...v,{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:w,directions:"",notes:"",packs:0,loose:0,pack_size:1}])},Ke=Ie=>{v.length>1&&j(v.filter((be,re)=>re!==Ie))},Me=async Ie=>{if(Ie.preventDefault(),X(null),!f){X("Please select a patient.");return}if(v.some(re=>!re.medication_name||re.quantity<=0)){X("Please ensure all items have a medication name and valid quantity.");return}H(!0);try{const re={patient_id:f.id,items:v.map(ce=>({medication_name:ce.medication_name,drug_id:ce.drug_id,quantity:ce.quantity,tablets_per_day:ce.tablets_per_day,number_of_days:ce.number_of_days,directions:ce.directions,notes:ce.notes,frequency_days:w,next_delivery_date:T}))},ve=await ue("/api/recurring-medications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(re)});if(!ve.ok){const ce=await ve.json();throw new Error(ce.message+(ce.error?": "+ce.error:"")||"Failed to create recurring medication.")}n(),t(),p(null),l(""),j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30)}catch(re){X(re.message)}finally{H(!1)}};return e?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"add-recurring-modal",style:{maxWidth:"800px",width:"95%"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Add Recurring Medication Order"}),r.jsx("button",{className:"close-btn",onClick:t,children:r.jsx(Ut,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[te&&r.jsx("div",{className:"error-message",children:te}),r.jsxs("form",{onSubmit:Me,className:"recurring-form",children:[r.jsxs("div",{className:"order-settings-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsxs("label",{children:[r.jsx(jr,{size:16})," Patient"]}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patient...",value:o,onChange:Ie=>{l(Ie.target.value),p(null)},className:f?"selected":"unselected"}),g&&r.jsx("span",{className:"spinner",children:"..."}),o&&!f&&c.length>0&&r.jsx("ul",{className:"suggestions-list",children:c.map(Ie=>r.jsxs("li",{onClick:()=>le(Ie),children:[r.jsx("div",{className:"suggestion-name",children:Ie.name}),r.jsxs("div",{className:"suggestion-details",children:[Ie.phone,"  ",Ie.patient_token_number]})]},Ie.id))})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(qb,{size:16})," Frequency"]}),r.jsxs("select",{value:w,onChange:Ie=>{const be=parseInt(Ie.target.value);_(be);const re=new Date;re.setDate(re.getDate()+be),C(re.toISOString().split("T")[0]);const ve=v.map(ce=>({...ce,number_of_days:be}));j(ve)},children:[r.jsx("option",{value:15,children:"Every 15 Days"}),r.jsx("option",{value:30,children:"Every 30 Days"}),r.jsx("option",{value:60,children:"Every 60 Days"}),r.jsx("option",{value:90,children:"Every 90 Days"})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(vi,{size:16})," Next Delivery"]}),r.jsx("input",{type:"date",value:T,onChange:Ie=>C(Ie.target.value)})]})]}),r.jsx("hr",{className:"divider"}),r.jsxs("div",{className:"items-header",children:[r.jsx("h4",{children:"Medications"}),r.jsxs("button",{type:"button",className:"add-item-btn",onClick:Oe,children:[r.jsx(hr,{size:14})," Add Drug"]})]}),r.jsx("div",{className:"items-list",children:v.map((Ie,be)=>r.jsxs("div",{className:"medication-item-row",children:[r.jsxs("div",{className:"row-top",children:[r.jsxs("div",{className:"form-group med-search-group",children:[r.jsx("label",{children:"Drug Name"}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search drug...",value:O===be?P:Ie.medication_name,onFocus:()=>{A(be),I(Ie.medication_name)},onChange:re=>{I(re.target.value),Y(be,"medication_name",re.target.value)}}),O===be&&$&&r.jsx("span",{className:"spinner",children:"..."}),O===be&&P&&F.length>0&&r.jsx("ul",{className:"suggestions-list",children:F.map(re=>r.jsxs("li",{onClick:()=>je(re,be),children:[r.jsx("div",{className:"suggestion-name",children:re.name}),r.jsxs("div",{className:"suggestion-details",children:["Stock: ",re.stock]})]},re.id))})]})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Tabs/Day"}),r.jsx("input",{type:"number",min:"0.5",step:"0.5",value:Ie.tablets_per_day,onChange:re=>Y(be,"tablets_per_day",re.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Days"}),r.jsx("input",{type:"number",min:"1",value:Ie.number_of_days,onChange:re=>Y(be,"number_of_days",re.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Packs"}),r.jsx("input",{type:"number",min:"0",value:Ie.packs||"",onChange:re=>Y(be,"packs",re.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Loose"}),r.jsx("input",{type:"number",min:"0",value:Ie.loose||"",onChange:re=>Y(be,"loose",re.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Total"}),r.jsx("input",{type:"number",value:Ie.quantity,disabled:!0,style:{backgroundColor:"#f5f5f5",cursor:"not-allowed"}})]}),r.jsx("button",{type:"button",className:"remove-btn",onClick:()=>Ke(be),disabled:v.length===1,children:r.jsx(Yn,{size:16})})]}),r.jsxs("div",{className:"row-bottom",children:[r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Directions (e.g. 1-0-1 after food)",value:Ie.directions,onChange:re=>Y(be,"directions",re.target.value)})}),r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Notes",value:Ie.notes,onChange:re=>Y(be,"notes",re.target.value)})})]})]},Ie.id))}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-cancel",onClick:t,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-submit",disabled:V,children:V?"Creating...":"Create Recurring Order"})]})]})]})]})}):null},G3e=()=>{const[e,t]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null),[o,l]=b.useState(""),[c,u]=b.useState(1),[f,p]=b.useState(1),[g,x]=b.useState(0),[v,j]=b.useState(!1),[w,_]=b.useState(void 0),T=10,C=b.useRef(null);eu();const O=b.useCallback(async(L,V)=>{i(!0),s(null);try{let H=`/api/recurring-medications?page=${L}&limit=${T}`;V&&(H+=`&search=${encodeURIComponent(V)}`);const te=await ue(H);if(!te.ok)throw new Error("Failed to fetch recurring medications.");const X=await te.json();t(X.medications),p(X.totalPages),x(X.total),u(X.page)}catch(H){console.error(H),s(H.message||"An error occurred while fetching data.")}finally{i(!1)}},[]);b.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{O(c,o)},500),()=>{C.current&&clearTimeout(C.current)}),[o,c,O]);const A=L=>{l(L.target.value),u(1)},P=L=>{L>=1&&L<=f&&u(L)},I=L=>{_(L),j(!0)},F=()=>{O(c,o),j(!1),_(void 0)},B=L=>L===30?"Every 30 Days (Monthly)":L===15?"Every 15 Days":`Every ${L} Days`,$=L=>{switch(L){case"active":return"status-pill status-pill-active";case"paused":return"status-pill status-pill-paused";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill"}};return r.jsxs("div",{className:"refill-reminders-container",children:[r.jsxs("div",{className:"refill-header",children:[r.jsx("h3",{className:"refill-title",children:"Recurring Medications"}),r.jsxs("div",{className:"refill-actions",children:[r.jsxs("button",{className:"refill-action-button btn-add",onClick:()=>{_(void 0),j(!0)},children:[r.jsx(ks,{size:16})," Add New"]}),r.jsxs("div",{className:"search-box",children:[r.jsx("input",{type:"text",placeholder:"Search patient, phone, medication...",value:o,onChange:A}),r.jsx(Wn,{size:18,className:"search-icon"})]})]})]}),a&&r.jsx("div",{className:"error-message-box",children:a}),r.jsx("div",{className:"refill-table-container",children:n?r.jsx("div",{className:"loading-pulse",children:"Loading..."}):e.length===0?r.jsx("div",{className:"empty-state",children:"No recurring medications found."}):r.jsx("div",{className:"refill-grouped-list",children:Object.values(e.reduce((L,V)=>{const H=V.patientId;return L[H]||(L[H]={patientId:V.patientId,patientName:V.patientName,patientPhone:V.patientPhone,patientToken:V.patientToken,medications:[]}),L[H].medications.push(V),L},{})).map(L=>r.jsxs("div",{className:"patient-medication-group-card",children:[r.jsxs("div",{className:"group-header",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("h4",{className:"patient-name",children:L.patientName}),r.jsxs("span",{className:"patient-meta",children:["Token: ",L.patientToken,"  Phone: ",L.patientPhone]})]}),r.jsx("div",{className:"group-actions"})]}),r.jsxs("table",{className:"refill-table group-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Medication"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Frequency"}),r.jsx("th",{children:"Next Delivery"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:L.medications.map(V=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"med-name",children:V.medicationName}),(V.tabletsPerDay||V.numberOfDays||V.directions)&&r.jsxs("div",{className:"med-usage-details",style:{fontSize:"0.8em",color:"#666"},children:[V.tabletsPerDay&&r.jsxs("span",{children:[V.tabletsPerDay," tabs/day  "]}),V.numberOfDays&&r.jsxs("span",{children:[V.numberOfDays," days "]})]}),V.notes&&r.jsxs("div",{className:"med-notes",children:["Note: ",V.notes]})]}),r.jsx("td",{children:V.quantity}),r.jsx("td",{children:r.jsx("span",{className:"frequency-badge",children:B(V.frequencyDays)})}),r.jsx("td",{children:r.jsx("div",{className:"date-display",children:new Date(V.nextDeliveryDate).toLocaleDateString()})}),r.jsx("td",{children:r.jsx("span",{className:$(V.status),children:V.status})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",title:"Edit",onClick:()=>I(V),children:r.jsx($a,{size:16})}),r.jsx("button",{className:"action-btn delete",title:"Delete/Cancel",children:r.jsx(Yn,{size:16})})]})})]},V.id))})]})]},L.patientId))})}),!n&&f>1&&r.jsxs("div",{className:"pagination-container",children:[r.jsxs("span",{className:"pagination-info",children:["Page ",c," of ",f," (Total ",g,")"]}),r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("button",{onClick:()=>P(c-1),disabled:c===1,className:"page-btn",children:[r.jsx(zb,{size:16})," Prev"]}),r.jsxs("button",{onClick:()=>P(c+1),disabled:c===f,className:"page-btn",children:["Next ",r.jsx(vd,{size:16})]})]})]}),r.jsx(H3e,{isOpen:v,onClose:()=>{j(!1),_(void 0)},onSuccess:F,medication:w})]})},W3e=()=>{const e=It(),t=Gr();return b.useEffect(()=>{const n=new URLSearchParams(t.search),i=n.get("token"),a=n.get("caseDetails");i?(async()=>{try{const o=await ue(`/api/patients?search=${i}&limit=1`);if(!o.ok)throw new Error("Failed to fetch patient by token");const c=(await o.json()).patients[0];if(!c)throw new Error("Patient with the given token not found");const u=await ue(`/api/queue/patient/${c.id}/latest`);if(u.ok){const g=await u.json();if(g!=null&&g._id){e(`/dashboard/edit-complaint/${g._id}`,{state:{initialComplaint:a}});return}}const f=await ue("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:c.id,complaint:a})});if(!f.ok)throw new Error("Failed to create queue entry");const p=await f.json();if(p!=null&&p.id)e(`/dashboard/edit-complaint/${p.id}`,{state:{initialComplaint:a}});else throw new Error("Failed to get ID from new queue entry.")}catch(o){console.error("Error handling complaint URL:",o),e("/dashboard/search-patient")}})():e("/dashboard/search-patient")},[t,e]),r.jsx("div",{children:"Loading..."})},Ez=()=>{const e=It(),[t,n]=b.useState([]),[i,a]=b.useState(!0),[s,o]=b.useState(null),[l,c]=b.useState(!1),[u,f]=b.useState(!1),[p,g]=b.useState(!1),[x,v]=b.useState(!1),[j,w]=b.useState(!1),[_,T]=b.useState(!1),[C,O]=b.useState(null),[A,P]=b.useState([]),[I,F]=b.useState(null),[B,$]=b.useState(""),[L,V]=b.useState(""),[H,te]=b.useState(""),[X,q]=b.useState(""),[W,ae]=b.useState(""),[G,z]=b.useState(""),[le,je]=b.useState(""),[Y,Oe]=b.useState(""),[Ke,Me]=b.useState(""),[Ie,be]=b.useState(""),[re,ve]=b.useState(""),[ce,fe]=b.useState("cash"),se=b.useCallback(async()=>{a(!0),o(null);try{const me=await ue("/api/distributors");if(!me.ok)throw new Error(`Failed to fetch distributors: ${me.statusText}`);const Ne=await me.json();n(Ne)}catch(me){console.error("Failed to fetch distributors:",me),o(me.message||"Failed to load distributors.")}finally{a(!1)}},[]);b.useEffect(()=>{se()},[se]);const Q=async me=>{me.preventDefault(),o(null);try{const Ne=await ue("/api/distributors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,contact_person:L,phone:H,email:X,address:W,gst_number:G,drug_license_number:le})});if(!Ne.ok){const Be=await Ne.json();throw new Error(Be.message||"Failed to add distributor.")}Ge(),se()}catch(Ne){console.error("Error adding distributor:",Ne),o(Ne.message||"Failed to add distributor.")}},ie=async me=>{if(me.preventDefault(),o(null),!!C)try{const Ne=await ue(`/api/distributors/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,contact_person:L,phone:H,email:X,address:W,gst_number:G,drug_license_number:le})});if(!Ne.ok){const Be=await Ne.json();throw new Error(Be.message||"Failed to update distributor.")}oe(),se()}catch(Ne){console.error("Error updating distributor:",Ne),o(Ne.message||"Failed to update distributor.")}},ge=async()=>{if(o(null),!!C)try{const me=await ue(`/api/distributors/${C.id}`,{method:"DELETE"});if(!me.ok){const Ne=await me.json();throw new Error(Ne.message||"Failed to delete distributor.")}$e(),se()}catch(me){console.error("Error deleting distributor:",me),o(me.message||"Failed to delete distributor.")}},ee=b.useCallback(async me=>{o(null);try{const Ne=await ue(`/api/distributors/${me}/payments`);if(!Ne.ok)throw new Error(`Failed to fetch payments: ${Ne.statusText}`);const ke=(await Ne.json()).map(gt=>({...gt,order_value:parseFloat(gt.order_value),amount_paid:parseFloat(gt.amount_paid),balance_remaining:parseFloat(gt.balance_remaining)}));P(ke);const Ye=await ue(`/api/distributors/${me}/balance`);if(!Ye.ok)throw new Error(`Failed to fetch balance: ${Ye.statusText}`);const rt=await Ye.json();F({totalOrderValue:parseFloat(rt.totalOrderValue),totalAmountPaid:parseFloat(rt.totalAmountPaid),remainingBalance:parseFloat(rt.remainingBalance)})}catch(Ne){console.error("Error fetching payments/balance:",Ne),o(Ne.message||"Failed to load payments or balance.")}},[]),we=async me=>{if(me.preventDefault(),o(null),!!C)try{const Ne=await ue(`/api/distributors/${C.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:Y,order_value:parseFloat(Ke||"0"),amount_paid:parseFloat(Ie||"0"),notes:re,payment_mode:ce})});if(!Ne.ok){const Be=await Ne.json();throw new Error(Be.message||"Failed to add payment.")}pe(),ee(C.id)}catch(Ne){console.error("Error adding payment:",Ne),o(Ne.message||"Failed to add payment.")}},Ue=()=>{$(""),V(""),te(""),q(""),ae(""),z(""),je(""),o(null),f(!0)},Ge=()=>{f(!1)},Le=me=>{O(me),$(me.name),V(me.contact_person||""),te(me.phone||""),q(me.email||""),ae(me.address||""),z(me.gst_number||""),je(me.drug_license_number||""),o(null),g(!0)},oe=()=>{g(!1),O(null)},_e=me=>{O(me),o(null),v(!0)},$e=()=>{v(!1),O(null)},ze=me=>{O(me),ee(me.id),o(null),w(!0)},K=()=>{w(!1),O(null),P([]),F(null)},ye=me=>{O(me),Oe(new Date().toISOString().split("T")[0]),Me("0"),be("0"),ve(""),fe("cash"),o(null),T(!0)},pe=()=>{T(!1),O(null)};return i?r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",style:{marginBottom:"20px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{width:80,height:36}),r.jsx(Z,{width:200,height:32})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx(Z,{width:150,height:36}),r.jsx(Z,{width:150,height:36}),r.jsx(Z,{width:180,height:36})]})]}),r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Contact Person"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(me=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:30})})]},me))})]})})]}):s?r.jsxs("div",{className:"error-indicator",children:["Error: ",s]}):r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("button",{onClick:()=>e(-1),className:"dmp-button dmp-button-secondary",title:"Go Back",children:[r.jsx(rn,{size:20})," Back"]}),r.jsx("h2",{children:"Distributor Management"})]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("div",{className:"view-mode-toggle",style:{display:"flex",gap:"8px"},children:[r.jsxs("button",{onClick:()=>c(!1),className:`dmp-button ${l?"dmp-button-secondary":"dmp-button-primary"}`,title:"List View",children:[r.jsx(Ub,{size:18})," List"]}),r.jsxs("button",{onClick:()=>c(!0),className:`dmp-button ${l?"dmp-button-primary":"dmp-button-secondary"}`,title:"Excel Mode (Edit)",children:[r.jsx(Cf,{size:18})," Excel"]})]}),r.jsxs("button",{onClick:Ue,className:"dmp-button dmp-button-primary",children:[r.jsx(ks,{size:18}),"Add Distributor"]})]})]}),(()=>{const me=t.reduce((Be,ke)=>Be+parseFloat(ke.remainingBalance||"0"),0),Ne=me>=0;return r.jsxs("div",{className:"stats-container",children:[r.jsxs("div",{className:`stat-card ${Ne?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Total Balance"}),r.jsxs("span",{className:"value",children:["",me.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Distributors"}),r.jsx("span",{className:"value",children:t.length})]})]})})(),r.jsx("div",{className:"table-wrapper",children:l?r.jsx(Jb,{columns:[{key:"name",label:"Name",editable:!0,type:"text"},{key:"contact_person",label:"Contact Person",editable:!0,type:"text"},{key:"phone",label:"Phone",editable:!0,type:"text"},{key:"email",label:"Email",editable:!0,type:"text"},{key:"address",label:"Address",editable:!0,type:"text"},{key:"gst_number",label:"GST Number",editable:!0,type:"text"},{key:"drug_license_number",label:"Drug License",editable:!0,type:"text"}],data:t,editable:!0,showRowNumbers:!0,title:"Distributors",onSave:async me=>{const Ne=me.map(async Be=>{const ke=t.find(Ye=>Ye.id===Be.id);if(ke&&JSON.stringify(ke)!==JSON.stringify(Be))return ue(`/api/distributors/${Be.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)})});try{await Promise.all(Ne),se()}catch(Be){alert("Error saving changes"),console.error(Be)}}}):r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name / Contact"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Tax / License"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:t.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"2rem",color:"var(--dmp-text-secondary)"},children:"No distributors found."})}):t.map(me=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"primary-text",children:me.name}),r.jsx("div",{className:"secondary-text",children:me.contact_person})]}),r.jsxs("td",{children:[r.jsx("div",{className:"secondary-text",children:me.phone||"-"}),r.jsx("div",{className:"secondary-text",children:me.email||"-"}),r.jsx("div",{className:"secondary-text",children:me.address||"-"})]}),r.jsxs("td",{children:[r.jsxs("div",{className:"secondary-text",children:["GST: ",me.gst_number||"-"]}),r.jsxs("div",{className:"secondary-text",children:["DL: ",me.drug_license_number||"-"]})]}),r.jsx("td",{children:r.jsxs("span",{className:`status-badge ${parseFloat(me.remainingBalance||"0")>0?"balance-ok":"balance-owed"}`,children:["",me.remainingBalance||"0.00"]})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>ze(me),className:"dmp-button-icon",title:"View Payments & Balance",children:r.jsx(Vm,{size:18})}),r.jsx("button",{onClick:()=>ye(me),className:"dmp-button-icon",title:"Add Payment",children:r.jsx(Dw,{size:18})}),r.jsx("button",{onClick:()=>Le(me),className:"dmp-button-icon edit",title:"Edit Distributor",children:r.jsx($a,{size:18})}),r.jsx("button",{onClick:()=>_e(me),className:"dmp-button-icon delete",title:"Delete Distributor",children:r.jsx(Yn,{size:18})})]})})]},me.id))})]})}),u&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:Ge,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Add New Distributor"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:Q,children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"name",children:"Name:"}),r.jsx("input",{type:"text",id:"name",className:"dmp-input",value:B,onChange:me=>$(me.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"contact_person",className:"dmp-input",value:L,onChange:me=>V(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"phone",className:"dmp-input",value:H,onChange:me=>te(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"email",children:"Email:"}),r.jsx("input",{type:"email",id:"email",className:"dmp-input",value:X,onChange:me=>q(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"address",children:"Address:"}),r.jsx("textarea",{id:"address",className:"dmp-textarea",value:W,onChange:me=>ae(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"gst_number",className:"dmp-input",value:G,onChange:me=>z(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"drug_license_number",children:"Drug License Number:"}),r.jsx("input",{type:"text",id:"drug_license_number",className:"dmp-input",value:le,onChange:me=>je(me.target.value)})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:Ge,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Add Distributor"})]})]})]})}),p&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:oe,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Edit Distributor"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:ie,children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-name",children:"Name:"}),r.jsx("input",{type:"text",id:"edit-name",className:"dmp-input",value:B,onChange:me=>$(me.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"edit-contact_person",className:"dmp-input",value:L,onChange:me=>V(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"edit-phone",className:"dmp-input",value:H,onChange:me=>te(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-email",children:"Email:"}),r.jsx("input",{type:"email",id:"edit-email",className:"dmp-input",value:X,onChange:me=>q(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-address",children:"Address:"}),r.jsx("textarea",{id:"edit-address",className:"dmp-textarea",value:W,onChange:me=>ae(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"edit-gst_number",className:"dmp-input",value:G,onChange:me=>z(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-drug_license_number",children:"Drug License Number:"}),r.jsx("input",{type:"text",id:"edit-drug_license_number",className:"dmp-input",value:le,onChange:me=>je(me.target.value)})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:oe,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Save Changes"})]})]})]})}),x&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:$e,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Confirm Delete"}),r.jsxs("p",{children:['Are you sure you want to delete distributor "',C.name,'"?']}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:$e,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ge,className:"dmp-button dmp-button-primary",style:{backgroundColor:"var(--dmp-danger-color)"},children:"Delete"})]})]})}),j&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"900px"},children:[r.jsx("button",{onClick:K,className:"dmp-modal-close",children:""}),r.jsxs("h3",{className:"dmp-modal-title",children:["Payments & Balance for ",C.name]}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),I&&r.jsxs("div",{className:"stats-container",style:{marginBottom:"2rem"},children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Order Value"}),r.jsxs("span",{className:"value",children:["",I.totalOrderValue.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Amount Paid"}),r.jsxs("span",{className:"value",children:["",I.totalAmountPaid.toFixed(2)]})]}),r.jsxs("div",{className:`stat-card ${I.remainingBalance>0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Remaining Balance"}),r.jsxs("span",{className:"value",children:["",I.remainingBalance.toFixed(2)]})]})]}),r.jsx("h4",{children:"Payment History"}),A.length===0?r.jsx("p",{children:"No payments recorded for this distributor."}):r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Order Value"}),r.jsx("th",{children:"Amount Paid"}),r.jsx("th",{children:"Balance Remaining"}),r.jsx("th",{children:"Payment Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:A.map(me=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(me.payment_date).toLocaleDateString()}),r.jsxs("td",{"data-label":"Order Value",children:["",me.order_value.toFixed(2)]}),r.jsxs("td",{"data-label":"Amount Paid",children:["",me.amount_paid.toFixed(2)]}),r.jsxs("td",{"data-label":"Balance Remaining",children:["",me.balance_remaining.toFixed(2)]}),r.jsx("td",{"data-label":"Payment Mode",children:me.payment_mode?me.payment_mode.charAt(0).toUpperCase()+me.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",children:me.notes||"-"})]},me.id))})]})}),r.jsx("div",{className:"dmp-modal-actions",children:r.jsx("button",{type:"button",onClick:K,className:"dmp-button dmp-button-secondary",children:"Close"})})]})}),_&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"420px"},children:[r.jsx("button",{onClick:pe,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Add Payment"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:we,children:[r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_date",children:"Date:"}),r.jsx("input",{type:"date",id:"payment_date",className:"dmp-input",value:Y,onChange:me=>Oe(me.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_mode",children:"Mode:"}),r.jsxs("select",{id:"payment_mode",className:"dmp-select",value:ce,onChange:me=>fe(me.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"order_value",children:"Order Value:"}),r.jsx("input",{type:"number",id:"order_value",className:"dmp-input",value:Ke,onChange:me=>Me(me.target.value),step:"0.01"})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"amount_paid",children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount_paid",className:"dmp-input",value:Ie,onChange:me=>be(me.target.value),step:"0.01"})]})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",className:"dmp-textarea",value:re,onChange:me=>ve(me.target.value),rows:2,style:{resize:"none"}})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:pe,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Add Payment"})]})]})]})})]})},cw=e=>{if(!e)return"";let t=e.toLowerCase();return t=t.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),t=t.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),t=t.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),t},K3e=(e,t)=>{if(!e||!t||t.length===0)return;const n=cw(e);let i=t.find(o=>cw(o.name)===n);if(i)return i;let a=t.find(o=>cw(o.name).includes(n));if(a)return a;let s=t.find(o=>n.includes(cw(o.name)));if(s)return s},Y3e=({isOpen:e,onClose:t,excelHeaders:n,onConfirm:i,availableFields:a})=>{const[s,o]=b.useState({});if(b.useEffect(()=>{e&&c()},[e,n,a]),!e)return null;const l=(f,p)=>{o(g=>({...g,[f]:p}))},c=()=>{const f={};n.forEach(p=>{const g=a.map(v=>({name:v})),x=K3e(p,g);x&&(f[p]=x.name)}),o(f)},u=()=>{const f={};for(const p in s)s[p]&&s[p]!=="none"&&(f[p]=s[p]);i(f),t()};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:t,className:"modal-close-button",children:r.jsx(Ut,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Match File Columns"}),r.jsx("p",{className:"modal-description",children:'Please match the columns from your uploaded file to the corresponding fields in the drug inventory. You can use the "Auto Match" button for suggestions.'}),r.jsx("div",{className:"modal-actions-top",children:r.jsx("button",{type:"button",onClick:c,className:"button-auto-match",children:"Auto Match"})}),r.jsxs("div",{className:"column-mapping-grid",children:[r.jsx("div",{className:"grid-header",children:"Excel Column"}),r.jsx("div",{className:"grid-header",children:"App Field"}),n.map((f,p)=>r.jsxs(Se.Fragment,{children:[r.jsx("div",{className:"excel-header-cell",children:f}),r.jsx("div",{className:"app-field-cell",children:r.jsxs("select",{value:s[f]||"",onChange:g=>l(f,g.target.value),className:"app-field-select",children:[r.jsx("option",{value:"",children:"-- Select Field --"}),r.jsx("option",{value:"none",children:"None (Ignore Column)"}),a.map((g,x)=>r.jsxs("option",{value:g,children:[g==="name"?"Composition Name":g==="brand_name"?"Brand Name":g==="price"?"MRP":g==="buying_price"?"Rate":g==="unit"?"Pack":g==="batch"?"Batch":g==="hsn_code"?"HSN Code":g==="mfg"?"MFG":g==="loose_quantity"?"Loose":g.replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase())," "]},x))]})})]},p))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:t,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:u,className:"button-submit",children:"Confirm Mapping"})]})]})})},Q3e=({entityType:e,config:t,values:n,onChange:i,className:a=""})=>{const o=(t[e]||[]).filter(c=>c.type!=="computed");if(o.length===0)return null;const l=c=>{const u=n[c.key]??"";switch(c.type){case"number":return r.jsx("input",{type:"number",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:f=>i(c.key,f.target.value===""?null:parseFloat(f.target.value)),className:"custom-text-input mt-1",placeholder:c.label,required:c.required});case"date":return r.jsx("input",{type:"date",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:f=>i(c.key,f.target.value||null),className:"custom-text-input mt-1",required:c.required});case"boolean":return r.jsx("input",{type:"checkbox",id:`custom_${c.key}`,name:`custom_${c.key}`,checked:!!u,onChange:f=>i(c.key,f.target.checked),className:"custom-checkbox mt-1"});case"text":default:return r.jsx("input",{type:"text",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:f=>i(c.key,f.target.value||null),className:"custom-text-input mt-1",placeholder:c.label,required:c.required})}};return r.jsxs("div",{className:`custom-fields-section ${a}`,children:[r.jsx("h4",{className:"custom-fields-title",children:"Custom Fields"}),r.jsx("div",{className:"custom-fields-grid",children:o.map(c=>r.jsxs("div",{className:"custom-field-item",children:[r.jsxs("label",{htmlFor:`custom_${c.key}`,className:"form-label",children:[c.label,c.required&&r.jsx("span",{className:"required-star",children:"*"})]}),l(c)]},c.key))})]})},X3e=({isOpen:e,onClose:t,onDrugAddedToPurchase:n,customColumnsConfig:i={}})=>{const[a,s]=b.useState({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),[o,l]=b.useState(null),[c,u]=b.useState(!1),[f,p]=b.useState(!1),g=b.useRef(null),x=b.useRef(null),v=b.useRef(null);b.useEffect(()=>{e&&(s({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),l(null),u(!1),p(!1))},[e]),b.useEffect(()=>{const T=O=>{O.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var A;(A=v.current)==null||A.focus()},0),O.preventDefault()))},C=O=>{g.current&&!g.current.contains(O.target)&&p(!1)};return document.addEventListener("keydown",T),document.addEventListener("mousedown",C),()=>{document.removeEventListener("keydown",T),document.removeEventListener("mousedown",C)}},[f]);const j=T=>{const{name:C,value:O,type:A}=T.target;s(P=>({...P,[C]:A==="number"?parseFloat(O)||null:O}))},w=(T,C)=>{s(O=>({...O,custom_fields:{...O.custom_fields,[T]:C}}))},_=T=>{if(T.preventDefault(),l(null),u(!0),a.mrp===void 0||a.stock===void 0){l("MRP and Stock Quantity are required."),u(!1);return}const C={...a,name:a.name===""?null:a.name,composition:a.composition===""?null:a.composition,rate:a.rate===0?null:a.rate,expiry_date:a.expiry_date===""?null:a.expiry_date,gst:a.gst===0?null:a.gst,margin:a.margin===0?null:a.margin,discount:a.discount===0?null:a.discount,brand_name:a.brand_name===""?null:a.brand_name,batch:a.batch===""?null:a.batch,hsn_code:a.hsn_code===""?null:a.hsn_code,mfg:a.mfg===""?null:a.mfg,loose:a.loose===0?null:a.loose,custom_fields:a.custom_fields||{}};n(C),u(!1),t()};return e?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content add-drug-form-container max-w-2xl mx-auto",children:[r.jsxs("div",{className:"add-drug-form-header",children:[r.jsx("h2",{children:"Add New Drug"}),r.jsx("button",{onClick:t,className:"cancel-button",title:"Close",children:r.jsx(Ut,{size:24})})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("form",{onSubmit:_,className:"add-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"name",className:"form-label",children:"Composition Name"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"name",value:a.name||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., Paracetamol",tabIndex:1})]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"brand_name",className:"form-label",children:"Brand Name"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"brand_name",value:a.brand_name||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"mrp",required:!0,step:"0.01",min:"0",value:a.mrp||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Pl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"stock",required:!0,step:"1",min:"0",value:a.stock||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"pack",value:a.pack||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:a.expiry_date||"",onChange:j,className:"custom-text-input mt-1",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"box_number",value:a.box_number||"",onChange:j,className:"custom-text-input mt-1",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:g,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"description",rows:3,value:a.description||"",onChange:j,className:"custom-text-input mt-1",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"rate",step:"0.01",min:"0",value:a.rate??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:10,ref:v})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"gst",step:"0.01",min:"0",max:"100",value:a.gst??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:11})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"margin",step:"0.01",min:"0",max:"100",value:a.margin??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"discount",step:"0.01",min:"0",max:"100",value:a.discount??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"batch",value:a.batch||"",onChange:j,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"hsn_code",value:a.hsn_code||"",onChange:j,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"mfg",value:a.mfg||"",onChange:j,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"loose",className:"form-label",children:"Loose Quantity"}),r.jsx("input",{type:"number",name:"loose",id:"loose",step:"1",min:"0",value:a.loose??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:17})]})]})]})]}),r.jsx(Q3e,{entityType:"drugs",config:i,values:a.custom_fields||{},onChange:w}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:t,disabled:c,className:"form-button cancel-form-button",tabIndex:18,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button inline-flex justify-center",tabIndex:19,children:c?"Adding...":"Add Drug"})]})]})]})}):null},J3e=({purchaseRows:e,onCellChange:t,onRemoveDrug:n,onAddEmptyRow:i})=>{const a=b.useRef(new Map),s=["name","mrp","stock","pack","expiry_date","rate","brand_name","box_number","gst","discount","batch","hsn_code","mfg","loose"],o=(l,c,u)=>{if(l.key==="Tab"){l.preventDefault();const f=s.indexOf(u);if(f!==-1){const p=(f+1)%s.length,g=s[p],x=a.current.get(`${c}-${g}`);x==null||x.focus()}}};return e.length===0?r.jsxs("div",{className:"no-drugs-message",children:[r.jsx("p",{children:"No drugs added to the purchase list yet."}),r.jsxs("button",{onClick:i,className:"action-button add-drug-to-table-button",children:[r.jsx(ks,{size:18,className:"button-icon"}),"Add the first drug"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"purchase-drugs-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Composition Name"}),r.jsx("th",{children:"MRP ()"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Pack"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Rate ()"}),r.jsx("th",{children:"Brand Name"}),r.jsx("th",{children:"Box Number"}),r.jsx("th",{children:"GST (%)"}),r.jsx("th",{children:"Discount (%)"}),r.jsx("th",{children:"Margin (%)"}),r.jsx("th",{children:"Batch"}),r.jsx("th",{children:"HSN Code"}),r.jsx("th",{children:"MFG"}),r.jsx("th",{children:"Loose"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map((l,c)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("input",{type:"text",value:l.name||"",onChange:u=>t(u,l.id,"name"),onKeyDown:u=>o(u,l.id,"name"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-name`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.mrp||"",onChange:u=>t(u,l.id,"mrp"),onKeyDown:u=>o(u,l.id,"mrp"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-mrp`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.stock||"",onChange:u=>t(u,l.id,"stock"),onKeyDown:u=>o(u,l.id,"stock"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-stock`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.pack||"",onChange:u=>t(u,l.id,"pack"),onKeyDown:u=>o(u,l.id,"pack"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-pack`,u)}})}),r.jsx("td",{children:l.supplier||"N/A"}),r.jsx("td",{children:r.jsx("input",{type:"date",value:l.expiry_date||"",onChange:u=>t(u,l.id,"expiry_date"),onKeyDown:u=>o(u,l.id,"expiry_date"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-expiry_date`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.rate||"",onChange:u=>t(u,l.id,"rate"),onKeyDown:u=>o(u,l.id,"rate"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-rate`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.brand_name||"",onChange:u=>t(u,l.id,"brand_name"),onKeyDown:u=>o(u,l.id,"brand_name"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-brand_name`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.box_number||"",onChange:u=>t(u,l.id,"box_number"),onKeyDown:u=>o(u,l.id,"box_number"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-box_number`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.gst||"",onChange:u=>t(u,l.id,"gst"),onKeyDown:u=>o(u,l.id,"gst"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-gst`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.discount||"",onChange:u=>t(u,l.id,"discount"),onKeyDown:u=>o(u,l.id,"discount"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-discount`,u)}})}),r.jsx("td",{children:(()=>{const u=l.mrp||0,f=l.rate||0,p=l.gst!==null&&l.gst!==void 0?l.gst/100*f:0,g=l.discount!==null&&l.discount!==void 0?l.discount/100*u:0,x=u-(f+p)-g;return`${(u>0?x/u*100:0).toFixed(2)}%`})()}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.batch||"",onChange:u=>t(u,l.id,"batch"),onKeyDown:u=>o(u,l.id,"batch"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-batch`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.hsn_code||"",onChange:u=>t(u,l.id,"hsn_code"),onKeyDown:u=>o(u,l.id,"hsn_code"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-hsn_code`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.mfg||"",onChange:u=>t(u,l.id,"mfg"),onKeyDown:u=>o(u,l.id,"mfg"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-mfg`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.loose||"",onChange:u=>t(u,l.id,"loose"),onKeyDown:u=>o(u,l.id,"loose"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-loose`,u)}})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>n(l.id),className:"delete-button",title:"Remove Item",children:r.jsx(Yn,{size:16})})})]},l.id||c))})]})})},Z3e="_container_7ak2k_7",eLe="_header_7ak2k_207",tLe="_backButton_7ak2k_221",nLe="_title_7ak2k_265",rLe="_stickyActionBar_7ak2k_287",iLe="_actionRow_7ak2k_317",aLe="_inputWrapper_7ak2k_335",sLe="_inputIcon_7ak2k_345",oLe="_input_7ak2k_335",lLe="_quickDistributors_7ak2k_401",cLe="_distributorChip_7ak2k_417",uLe="_distributorChipIcon_7ak2k_463",dLe="_selectedInfo_7ak2k_473",hLe="_resultsDropdown_7ak2k_503",fLe="_resultItem_7ak2k_537",pLe="_buttonGroup_7ak2k_565",mLe="_button_7ak2k_565",gLe="_buttonPrimary_7ak2k_609",yLe="_buttonSecondary_7ak2k_631",xLe="_buttonAccent_7ak2k_653",vLe="_buttonDisabled_7ak2k_675",bLe="_tableSection_7ak2k_691",jLe="_cardTitle_7ak2k_707",wLe="_cardIcon_7ak2k_727",SLe="_footer_7ak2k_947",NLe="_totalValue_7ak2k_981",_Le="_footerControls_7ak2k_1005",CLe="_paidInputGroup_7ak2k_1017",TLe="_paidLabel_7ak2k_1029",ALe="_paidInput_7ak2k_1017",ELe="_errorMsg_7ak2k_1075",un={container:Z3e,header:eLe,backButton:tLe,title:nLe,stickyActionBar:rLe,actionRow:iLe,inputWrapper:aLe,inputIcon:sLe,input:oLe,quickDistributors:lLe,distributorChip:cLe,distributorChipIcon:uLe,selectedInfo:dLe,resultsDropdown:hLe,resultItem:fLe,buttonGroup:pLe,button:mLe,buttonPrimary:gLe,buttonSecondary:yLe,buttonAccent:xLe,buttonDisabled:vLe,tableSection:bLe,cardTitle:jLe,cardIcon:wLe,footer:SLe,totalValue:NLe,footerControls:_Le,paidInputGroup:CLe,paidLabel:TLe,paidInput:ALe,errorMsg:ELe},kz=()=>{const e=It(),{purchaseRows:t,setPurchaseRows:n,selectedDistributor:i,setSelectedDistributor:a,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:u,setDistributors:f}=Sq(),[p,g]=b.useState(!1),[x,v]=b.useState(!0),j=b.useRef(null),w=b.useRef(null),[_,T]=b.useState(!1),C=b.useRef(null),[O,A]=b.useState(!1),[P,I]=b.useState([]),[F,B]=b.useState(null),[$,L]=b.useState(null),[V,H]=b.useState(!1),[te,X]=b.useState([]),q=["name","description","mrp","stock","pack","supplier","expiry_date","rate","box_number","gst","margin","discount","brand_name","batch","hsn_code","mfg","loose"];b.useEffect(()=>{(async()=>{v(!0);try{const ge=await ue("/api/distributors?limit=4");if(ge.ok){const ee=await ge.json();X(Array.isArray(ee)?ee.slice(0,4):[])}}catch(ge){console.error("Failed to fetch initial distributors",ge)}finally{v(!1)}})()},[]);const W=()=>{const ge={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:"",composition:"",description:"",mrp:0,stock:0,pack:"",supplier:i?i.name:"",expiry_date:"",rate:0,box_number:"",gst:0,margin:0,discount:0,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:0,last_updated:"",created_at:""};n(ee=>[...ee,ge])},ae=async(ie,ge)=>{if(!ie){L("No file provided for import.");return}if(!i){L("Please select a distributor before importing.");return}g(!0),L(null);const ee=new FormData;ee.append("inventoryFile",ie),ee.append("columnMapping",JSON.stringify(ge));try{const we=await ue("/api/drugs/parse-excel",{method:"POST",body:ee});if(!we.ok){const Ge=await we.json();throw new Error(Ge.message||`Failed to parse Excel file: ${we.statusText}`)}const Ue=await we.json();n(Ge=>[...Ge,...Ue.map(Le=>({...Le,id:Date.now().toString()+Math.random().toString(36).substring(2,9),supplier:i?i.name:Le.supplier}))])}catch(we){console.error("Failed to parse Excel file:",we),L(we.message||"Failed to parse Excel file. Please check the file format and try again.")}finally{j.current&&(j.current.value=""),g(!1),B(null)}},G=async ie=>{if(ie.target.files&&ie.target.files[0]){const ge=ie.target.files[0];B(ge),L(null),g(!0);const ee=new FormData;ee.append("inventoryFile",ge);try{const we=await ue("/api/drugs/get-file-headers",{method:"POST",body:ee});if(!we.ok){const Ge=await we.json();throw new Error(Ge.message||`Failed to get file headers: ${we.statusText}`)}const{headers:Ue}=await we.json();I(Ue),A(!0)}catch(we){console.error("Failed to get file headers:",we),L(we.message||"Failed to read file headers. Please check the file format and try again."),B(null)}finally{g(!1)}}else B(null)},z=ie=>{F?ae(F,ie):L("No file selected for import after mapping."),A(!1)},le=()=>{A(!1),I([]),B(null),j.current&&(j.current.value="")},je=()=>{var ie;(ie=j.current)==null||ie.click()},Y=async ie=>{if(ie.target.files&&ie.target.files[0]){const ge=ie.target.files[0];L(null),g(!0);const ee=new FormData;ee.append("file",ge),ee.append("output_type","csv");const Ue={Authorization:"Bearer 00841ac4-b279-11f0-ab55-0a3a41e3fad1"};try{const Ge=await fetch("https://extraction-api.nanonets.com/extract",{method:"POST",headers:Ue,body:ee});if(!Ge.ok){const pe=await Ge.json();throw new Error(pe.message||`Failed to extract data from image/PDF: ${Ge.statusText}`)}const Le=await Ge.json();if(!Le.success||!Le.content)throw new Error(Le.detail||"Nanonets API did not return expected content.");let oe=Le.content;oe=oe.split(`
`).filter(pe=>!pe.startsWith("#")&&pe.trim()!=="").join(`
`);const $e=new File([oe],"extracted_data.csv",{type:"text/csv"}),ze=new FormData;ze.append("inventoryFile",$e);const K=await ue("/api/drugs/get-file-headers",{method:"POST",body:ze});if(!K.ok){const pe=await K.json();throw new Error(pe.message||`Failed to get headers from extracted CSV: ${K.statusText}`)}const{headers:ye}=await K.json();I(ye),B($e),A(!0)}catch(Ge){console.error("Failed to extract data from image/PDF:",Ge),L(Ge.message||"Failed to extract data from image/PDF. Please check the file and try again.")}finally{w.current&&(w.current.value=""),g(!1)}}},Oe=()=>{var ie;(ie=w.current)==null||ie.click()},Ke=()=>{if(!i){L("Please select a distributor before adding a drug manually.");return}H(!0)},Me=()=>{H(!1),L(null)},Ie=ie=>{n(ge=>[...ge,{...ie,id:Date.now().toString(),supplier:i?i.name:ie.supplier}]),Me()},be=ie=>{n(ge=>ge.filter(ee=>ee.id!==ie))},re=(ie,ge,ee)=>{const{value:we}=ie.target;n(Ue=>Ue.map(Ge=>{if(Ge.id===ge){let Le=we;ee==="expiry_date"?Le=we.trim()===""?null:we:["mrp","stock","rate","gst","margin","discount","loose"].includes(ee)&&(Le=parseFloat(we),isNaN(Le)&&(Le=null));const oe={...Ge,[ee]:Le};return ee==="name"&&i&&!oe.supplier&&(oe.supplier=i.name),oe}return Ge}))},ve=b.useCallback(()=>t.reduce((ie,ge)=>{const ee=ge.stock||0,we=ge.rate||0,Ue=ge.gst||0,Ge=ge.discount||0;let Le=we*(1-Ge/100),oe=ee*Le;return oe+=oe*(Ue/100),ie+oe},0),[t]),ce=async()=>{if(!i){L("Please select a distributor before submitting the purchase.");return}const ie=t.filter(ge=>Object.values(ge).some(ee=>typeof ee=="string"&&ee.trim()!==""||typeof ee=="number"&&ee!==0||ee!=null&&typeof ee!="string"&&typeof ee!="number"));if(ie.length===0){L("No valid drugs to submit. Please fill in at least one field for a row, or remove empty rows."),g(!1);return}g(!0),L(null);try{for(const Ue of ie){const Ge={...Ue,expiry_date:Ue.expiry_date===""?null:Ue.expiry_date,distributorId:i.id},Le=await ue("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ge)});if(!Le.ok){const oe=await Le.json();throw new Error(oe.message||`Failed to add drug ${Ue.name}: ${Le.statusText}`)}}const ge=ve(),ee=new Date().toISOString().split("T")[0],we=await ue(`/api/distributors/${i.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:ee,order_value:ge,amount_paid:l,notes:"Payment from purchase page."})});if(!we.ok){const Ue=await we.json();throw new Error(Ue.message||`Failed to record distributor payment: ${we.statusText}`)}n([]),a(null),o(""),c(0),e("/dashboard/inventory")}catch(ge){console.error("Failed to submit purchase:",ge),L(ge.message||"Failed to submit purchase. Please try again.")}finally{g(!1)}},fe=b.useCallback(async ie=>{if(ie.trim()===""){f([]);return}try{const ge=await ue(`/api/distributors?search=${encodeURIComponent(ie)}`);if(!ge.ok)throw new Error(`Failed to fetch distributors: ${ge.statusText}`);const ee=await ge.json();f(ee)}catch(ge){console.error("Failed to fetch distributors:",ge),L(ge.message||"Failed to load distributors.")}},[]),se=ie=>{const ge=ie.target.value;o(ge),a(null),C.current&&clearTimeout(C.current),ge.trim()!==""?C.current=setTimeout(()=>{fe(ge),T(!0)},300):(f([]),T(!1))},Q=ie=>{a(ie),o(ie.name),T(!1),f([])};return b.useEffect(()=>{const ie=ge=>{ge.target instanceof HTMLElement&&!ge.target.closest(`.${un.inputWrapper}`)&&T(!1)};return document.addEventListener("mousedown",ie),()=>{document.removeEventListener("mousedown",ie),C.current&&clearTimeout(C.current)}},[]),r.jsxs("div",{className:un.container,children:[r.jsxs("div",{className:un.header,children:[r.jsx("button",{onClick:()=>e(-1),className:un.backButton,title:"Go Back",children:r.jsx(rn,{size:24})}),r.jsx("h2",{className:un.title,children:"Purchase Inventory"})]}),$&&r.jsxs("div",{className:un.errorMsg,children:[r.jsx(Zr,{size:20}),$]}),r.jsx("div",{className:un.stickyActionBar,children:r.jsxs("div",{className:un.actionRow,children:[r.jsxs("div",{style:{flex:1,minWidth:"300px",position:"relative"},children:[r.jsxs("div",{className:un.inputWrapper,children:[r.jsx(Wn,{className:un.inputIcon,size:20}),r.jsx("input",{type:"text",placeholder:"Search distributor...",value:s,onChange:se,onFocus:()=>s.trim()!==""&&T(!0),className:un.input}),_&&u.length>0&&r.jsx("ul",{className:un.resultsDropdown,children:u.map(ie=>r.jsx("li",{onClick:()=>Q(ie),className:un.resultItem,children:ie.name},ie.id))})]}),x?r.jsx("div",{className:un.quickDistributors,children:[1,2,3,4].map(ie=>r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}},ie))}):te.length>0&&!i&&r.jsx("div",{className:un.quickDistributors,children:te.map(ie=>r.jsxs("button",{className:un.distributorChip,onClick:()=>Q(ie),children:[r.jsx(jr,{className:un.distributorChipIcon}),ie.name]},ie.id))}),i&&r.jsxs("div",{className:un.selectedInfo,style:{marginTop:"0.5rem",marginBottom:0},children:[r.jsx(Bl,{size:18}),r.jsxs("span",{children:["Selected: ",r.jsx("strong",{children:i.name})]})]})]}),r.jsxs("div",{className:un.buttonGroup,children:[r.jsx("input",{ref:j,type:"file",className:"sr-only",style:{display:"none"},accept:".xlsx, .xls, .csv",onChange:G}),r.jsx("input",{ref:w,type:"file",className:"sr-only",style:{display:"none"},accept:".pdf, .png, .jpg, .jpeg",onChange:Y}),r.jsxs("button",{onClick:je,disabled:p||!i,className:`${un.button} ${un.buttonPrimary} ${p||!i?un.buttonDisabled:""}`,title:i?"":"Select a distributor to import",children:[r.jsx(Xk,{size:18}),p?"Processing...":"Import Excel/CSV"]}),r.jsxs("button",{onClick:Oe,disabled:p||!i,className:`${un.button} ${un.buttonSecondary} ${p||!i?un.buttonDisabled:""}`,title:i?"":"Select a distributor",children:[r.jsx(ha,{size:18}),"Scan Image/PDF"]}),r.jsxs("button",{onClick:Ke,disabled:!i,className:`${un.button} ${un.buttonAccent} ${i?"":un.buttonDisabled}`,title:i?"":"Select a distributor",children:[r.jsx(ks,{size:18}),"Add Manually"]})]})]})}),r.jsx(Y3e,{isOpen:O,onClose:le,excelHeaders:P,onConfirm:z,availableFields:q}),V&&r.jsx(X3e,{isOpen:V,onClose:Me,onDrugAddedToPurchase:Ie}),r.jsxs("div",{className:un.tableSection,children:[r.jsxs("div",{className:un.cardTitle,children:[r.jsx(Vb,{className:un.cardIcon,size:24}),"Purchase Items (",t.length,")"]}),r.jsx(J3e,{purchaseRows:t,onCellChange:re,onRemoveDrug:be,onAddEmptyRow:W})]}),r.jsxs("div",{className:un.footer,children:[r.jsxs("button",{onClick:W,className:`${un.button} ${un.buttonSecondary}`,children:[r.jsx(ks,{size:18}),"Add New Row"]}),r.jsxs("div",{className:un.footerControls,children:[r.jsxs("div",{className:un.paidInputGroup,children:[r.jsx("label",{htmlFor:"amount-paid",className:un.paidLabel,children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount-paid",value:l,onChange:ie=>c(parseFloat(ie.target.value)||0),placeholder:"0.00",className:un.paidInput,step:"0.01",disabled:!i})]}),r.jsxs("div",{className:un.totalValue,children:["Total: ",r.jsxs("span",{children:["",ve().toFixed(2)]})]}),r.jsx("button",{onClick:ce,disabled:p||t.length===0||!i,className:`${un.button} ${un.buttonPrimary} ${un.submitButton} ${p||!i||t.length===0?un.buttonDisabled:""}`,style:{padding:"0.8rem 1.5rem",fontSize:"1rem"},children:p?"Submitting...":"Complete Purchase"})]})]})]})},kLe=e=>{if(!e)return 1;const t=e.match(/(?:\d+x)?(\d+)/);return t&&t[1]?parseInt(t[1],10):1},PLe=()=>{const e=It(),t=Gr(),[n,i]=b.useState(null),[a,s]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),[f,p]=b.useState(!1),[g,x]=b.useState("cash"),[v,j]=b.useState(""),[w,_]=b.useState(""),[T,C]=b.useState(""),[O,A]=b.useState(""),[P,I]=b.useState(""),[F,B]=b.useState(0),$=b.useRef(!1),[L,V]=b.useState(null),[H,te]=b.useState(!1),[X,q]=b.useState(!1),[W,ae]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),G=()=>{W.length<5&&ae(ee=>[...ee,{id:Date.now().toString(),method:"cash",amount:0}])},z=ee=>{W.length>2&&ae(we=>we.filter(Ue=>Ue.id!==ee))},le=(ee,we,Ue)=>{ae(Ge=>{const Le=Ge.map(oe=>oe.id===ee?we==="method"?{...oe,method:Ue}:{...oe,amount:Math.max(0,Ue)}:oe);if(we==="amount"&&Le.length===2){const _e=Le.findIndex(K=>K.id===ee)===0?1:0,$e=Math.max(0,Ue),ze=ce-$e;Le[_e]={...Le[_e],amount:Math.max(0,ze)}}return Le})},je=(ee,we)=>{const Ue=W.filter(Le=>Le.id!==ee).reduce((Le,oe)=>Le+oe.amount,0),Ge=Math.max(0,we-Ue);ae(Le=>Le.map(oe=>oe.id===ee?{...oe,amount:Ge}:oe))},Y=ee=>{const we=Math.max(0,Math.min(100,isNaN(ee)?0:ee));$.current=!0,B(we);const Ue=a.map(Ge=>({...Ge,discount_percentage:we}));s(Ue)},Oe=(ee,we)=>{const Ue=[...a];Ue[ee].discount_percentage=isNaN(we)?0:we,s(Ue)};b.useEffect(()=>{if($.current){$.current=!1;return}const ee=a.reduce((Ge,Le)=>Ge+(Le.total_price??0),0);if(ee===0){B(0);return}const Ue=a.reduce((Ge,Le)=>{const _e=(Le.total_price??0)*((Le.discount_percentage??0)/100);return Ge+_e},0)/ee*100;B(Ge=>Math.abs(Ge-Ue)>.01?Ue:Ge)},[a]);const Ke=async()=>{if(!n)return u("No order data available to bill."),null;if(a.length===0)return u("Cannot bill an empty order."),null;p(!0),u(null);try{const ee=a.map(_e=>{const $e=(_e.pricePerLooseUnit??0)*(_e.looseQuantity??0),ze=$e*((_e.discount_percentage??0)/100),K=$e-ze;return{name:_e.name,pack_quantity:_e.loosePacks??0,loose_quantity:_e.looseUnits??0,price:_e.originalPrice??0,pack_price:_e.originalPrice??0,loose_price:_e.pricePerLooseUnit??0,total:K,drug_id:_e.drug_id,discount_percentage:_e.discount_percentage??0,batch:_e.batch,expiry_date:_e.expiry_date}}),we={patientId:n.patientId,queueId:n.id,items:ee,amount:ce,paymentMode:X?"split":g,type:"pharmacy",related_id:n.id,status:"paid",discountPercentage:F};X&&(we.splitPayments=W.map(_e=>({method:_e.method,amount:_e.amount})));const Ue=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(we)}),Ge=await Ue.json();if(!Ue.ok||!Ge.id)throw new Error(Ge.message||"Failed to create bill.");const Le=await ue(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:Ge.id,medications:a})});if(!Le.ok){const _e=await Le.text();throw new Error(`Failed to update pharmacy order status: ${Le.statusText} - ${_e}`)}i(_e=>_e?{..._e,status:"billed",bill_id:Ge.id}:null);const oe=X?W.filter(_e=>_e.method==="credit").reduce((_e,$e)=>_e+$e.amount,0):g==="credit"?ce:0;if(oe>0)try{await ue(`/api/patient-debts/${n.patientId}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:oe,related_bill_id:Ge.id,notes:`Pharmacy Bill #${Ge.id}`})})}catch(_e){console.error("Failed to create debt entry:",_e)}return e(`/dashboard/pharmacy-billing/${n.id}`,{replace:!0,state:{order:{...n,status:"billed",bill_id:Ge.id},initialItems:a}}),Ge.id}catch(ee){return console.error("Billing process failed:",ee),u(ee.message||"Failed to mark order as billed. Please try again."),null}finally{p(!1)}},Me=async()=>{if(n)try{const ee=await ue(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"dispensed",medications:a})});if(!ee.ok){const we=await ee.text();console.error("Failed to dispense order:",we)}}catch(ee){console.error("Error dispensing order:",ee)}},Ie=()=>{window.print()},be=async()=>{await Ke()&&(window.print(),await Me(),e(-1))};b.useEffect(()=>{const ee=t.pathname.split("/"),we=ee[ee.length-1];we?(async()=>{try{l(!0);const[Ge,Le,oe]=await Promise.all([ue(`/api/pharmacy-orders/${we}`),ue("/api/drugs").then(K=>K.ok?K.json():null).catch(()=>null),ue("/api/clinics/settings").then(K=>K.ok?K.json():null).catch(()=>null)]);if(!Ge.ok)throw new Error("Failed to fetch pharmacy order details");const _e=await Ge.json();i(_e);let $e=[];Le&&($e=Le.drugs||Le||[]),oe&&(_(oe.upi_id||""),C(oe.name||""),A(oe.address||""),I(oe.notes||""));const ze=_e.medications.map(K=>{const ye=kLe(K.unit),pe=(K.pack_quantity??0)*ye+(K.loose_quantity??0),me=$e.find(gt=>K.drug_id&&String(gt.id)===String(K.drug_id)||gt.name.toLowerCase()===K.name.toLowerCase()),Ne=K.batch||(me==null?void 0:me.batch)||(me==null?void 0:me.batch_number),Be=K.expiry_date||(me==null?void 0:me.expiry_date),ke=Number(K.pack_price)||Number(me==null?void 0:me.mrp)||0,Ye=Number(me==null?void 0:me.rate)||0;let rt=Number(K.loose_price)||0;return rt===0&&(ke>0&&ye>0?rt=ke/ye:Ye>0&&(rt=Ye)),{...K,isLoose:!0,loosePacks:K.pack_quantity??0,looseUnits:K.loose_quantity??0,looseQuantity:pe,pack_price:ke,loose_price:rt,total_price:Number(K.total_price)||rt*pe,pricePerLooseUnit:rt,originalPrice:ke,discount_percentage:Number(K.discount_percentage)??0,directions_to_use:K.directions_to_use,tabletsPerDay:K.tabletsPerDay,numberOfDays:K.numberOfDays,batch:Ne,expiry_date:Be}});s(ze)}catch(Ge){console.error("Failed to fetch data:",Ge),u(Ge.message||"Failed to load order details.")}finally{l(!1)}})():(u("No pharmacy order ID provided."),l(!1))},[t.pathname]);const re=b.useMemo(()=>a.reduce((ee,we)=>ee+(we.total_price??0),0),[a]),ve=b.useMemo(()=>a.reduce((ee,we)=>{const Ge=(we.total_price??0)*(we.discount_percentage??0)/100;return ee+Ge},0),[a]),ce=b.useMemo(()=>re-ve,[re,ve]),fe=b.useMemo(()=>W.reduce((ee,we)=>ee+we.amount,0),[W]),se=b.useMemo(()=>ce-fe,[ce,fe]),Q=b.useMemo(()=>Math.abs(se)<.01,[se]),ie=b.useMemo(()=>X?W.some(ee=>ee.method==="credit"&&ee.amount>0):g==="credit",[X,W,g]),ge=b.useMemo(()=>X?W.filter(ee=>ee.method==="credit").reduce((ee,we)=>ee+we.amount,0):g==="credit"?ce:0,[X,W,g,ce]);return b.useEffect(()=>{if(ce>0&&w){const ee=`upi://pay?pa=${w}&pn=ClinicName&am=${ce.toFixed(2)}&cu=INR`;j(ee)}else j("")},[ce,w]),b.useEffect(()=>{(async()=>{if(g==="credit"&&(n!=null&&n.patientId)){te(!0);try{const we=await ue(`/api/patient-debts/${n.patientId}/balance`);if(we.ok){const Ue=await we.json();V(Ue.netDebt||0)}else V(0)}catch(we){console.error("Error fetching patient debt:",we),V(0)}finally{te(!1)}}})()},[g,n==null?void 0:n.patientId]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:60,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})})]},ee))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(Z,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T?`${T} Pharmacy`:"Pharmacy Bill"}),(O||P)&&r.jsxs("div",{className:"clinic-details-print",children:[O&&r.jsx("span",{className:"small-text clinic-address",children:O}),P&&r.jsx("span",{className:"small-text clinic-notes",children:P})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Pharmacy Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(Oc,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Medications"})}),a.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"BATCH"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{children:"QUANTITY"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:a.map((ee,we)=>{var _e;const Ue=ee.total_price??0,Ge=Ue*(ee.discount_percentage??0)/100,Le=Ue-Ge;return r.jsxs("tr",{children:[r.jsx("td",{children:we+1}),r.jsx("td",{children:ee.name}),r.jsx("td",{children:ee.batch||"N/A"}),r.jsx("td",{children:ee.expiry_date?new Date(ee.expiry_date).toLocaleDateString():"N/A"}),r.jsxs("td",{children:[r.jsxs("div",{children:["Packs: ",ee.loosePacks??0]}),r.jsxs("div",{children:["Loose: ",ee.looseUnits??0]})]}),r.jsx("td",{children:((_e=ee.originalPrice)==null?void 0:_e.toFixed(2))??"N/A"}),r.jsx("td",{children:((ee.pricePerLooseUnit??0)*(1-(ee.discount_percentage??0)/100)).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:ee.discount_percentage===0?"":ee.discount_percentage,onChange:$e=>Oe(we,parseFloat($e.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsxs("td",{children:[5 .toFixed(1),"%"]}),r.jsx("td",{children:Le.toFixed(2)})]},we)})})]}):r.jsx("p",{children:"No medications in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",re.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",F.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"GST (Included)"}),r.jsxs("span",{children:["",(ce*.05).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ce.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:X?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),X&&W.map((ee,we)=>ee.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:ee.method==="cash"?"Cash":ee.method==="upi"?"UPI":ee.method==="card"?"Card":ee.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",ee.amount.toFixed(2)]})]},we))]}),L!==null&&(L>0||ie)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(L??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(L??0).toFixed(2)]})]}),ie&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ge.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((L??0)+(ie?ge:0)).toFixed(2)]})]})]})]}),v&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(pa,{value:v,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",re.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:F===0?"":F,onChange:ee=>Y(parseFloat(ee.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ce.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:v?r.jsxs(r.Fragment,{children:[r.jsx(pa,{value:v,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>q(!X),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:X?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:X?"rgba(79, 172, 254, 0.1)":"transparent",color:X?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qc,{size:14}),"Split"]})]}),X?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ce.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:W.map((ee,we)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:we+1}),r.jsxs("select",{value:ee.method,onChange:Ue=>le(ee.id,"method",Ue.target.value),className:`split-payment-select ${ee.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:ee.amount||"",onChange:Ue=>le(ee.id,"amount",parseFloat(Ue.target.value)||0),className:`split-payment-input ${ee.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),W.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>je(ee.id,ce),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>z(ee.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Yn,{size:12})})]})]},ee.id))}),W.length<5&&r.jsxs("button",{type:"button",onClick:G,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(hr,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",fe.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Q?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Q?"":se>0?"":"",Q?"Balanced":se>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(se).toFixed(2)]})]}),!Q&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ce.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:g,onChange:ee=>x(ee.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),ie&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),H?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:L&&L>0?"#dc3545":"#28a745"},children:["",(L||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ge.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((L||0)+ge).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[n.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Ie,className:"secondary-button print-preview-button no-print",disabled:f||a.length===0,children:"Print Preview"}),r.jsx("button",{onClick:be,className:"primary-button",disabled:f||a.length===0,children:f?"Processing...":"Finalise and Bill"})]}),n.status==="billed"&&r.jsx("button",{onClick:()=>e(`/dashboard/bills/${n.bill_id}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},OLe=()=>{const e=It(),t=Gr(),[n,i]=b.useState(null),[a,s]=b.useState(""),[o,l]=b.useState(""),[c,u]=b.useState([]),[f,p]=b.useState(!0),[g,x]=b.useState(null),[v,j]=b.useState(!1),[w,_]=b.useState("cash"),[T,C]=b.useState(""),[O,A]=b.useState(""),[P,I]=b.useState(""),[F,B]=b.useState(""),[$,L]=b.useState(""),[V,H]=b.useState(""),[te,X]=b.useState(0),q=b.useRef(!1),[W,ae]=b.useState(null),[G,z]=b.useState(!1),[le,je]=b.useState(!1),[Y,Oe]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ke=()=>{Y.length<5&&Oe(oe=>[...oe,{id:Date.now().toString(),method:"cash",amount:0}])},Me=oe=>{Y.length>2&&Oe(_e=>_e.filter($e=>$e.id!==oe))},Ie=(oe,_e,$e)=>{Oe(ze=>{const K=ze.map(ye=>ye.id===oe?_e==="method"?{...ye,method:$e}:{...ye,amount:Math.max(0,$e)}:ye);if(_e==="amount"&&K.length===2){const pe=K.findIndex(Be=>Be.id===oe)===0?1:0,me=Math.max(0,$e),Ne=ge-me;K[pe]={...K[pe],amount:Math.max(0,Ne)}}return K})},be=(oe,_e)=>{const $e=Y.filter(K=>K.id!==oe).reduce((K,ye)=>K+ye.amount,0),ze=Math.max(0,_e-$e);Oe(K=>K.map(ye=>ye.id===oe?{...ye,amount:ze}:ye))},re=oe=>{const _e=Math.max(0,Math.min(100,isNaN(oe)?0:oe));q.current=!0,X(_e);const $e=c.map(ze=>({...ze,discount_percentage:_e}));u($e)},ve=(oe,_e)=>{const $e=[...c];$e[oe].discount_percentage=isNaN(_e)?0:_e,u($e)};b.useEffect(()=>{if(q.current){q.current=!1;return}const oe=c.reduce((ze,K)=>ze+(K.price??0),0);if(oe===0){X(0);return}const $e=c.reduce((ze,K)=>{const pe=(K.price??0)*((K.discount_percentage??0)/100);return ze+pe},0)/oe*100;X(ze=>Math.abs(ze-$e)>.01?$e:ze)},[c]);const ce=async()=>{if(!n)return x("No order data available to bill."),null;if(c.length===0)return x("Cannot bill an empty order."),null;j(!0),x(null);try{const oe=c.map(pe=>{const me=pe.price,Ne=me*((pe.discount_percentage??0)/100),Be=me-Ne;return{name:pe.name,price:pe.price,quantity:1,total:Be,item_id:pe.id,type:"lab_test",discount_percentage:pe.discount_percentage??0}}),_e={patientId:n.patient_id,items:oe,amount:ge,paymentMode:le?"split":w,type:"lab",related_id:n.id,status:"paid",discountPercentage:te};le&&(_e.splitPayments=Y.map(pe=>({method:pe.method,amount:pe.amount})));const $e=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}),ze=await $e.json();if(!$e.ok||!ze.id)throw new Error(ze.message||"Failed to create bill.");const K=await ue(`/api/lab/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:ze.id})});if(!K.ok){const pe=await K.text();throw new Error(`Failed to update lab order status: ${K.statusText} - ${pe}`)}i(pe=>pe?{...pe,status:"billed",bill_id:ze.id}:null);const ye=le?Y.filter(pe=>pe.method==="credit").reduce((pe,me)=>pe+me.amount,0):w==="credit"?ge:0;if(ye>0)try{await ue(`/api/patient-debts/${n.patient_id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:ye,related_bill_id:ze.id,notes:`Lab Bill #${ze.id}`})})}catch(pe){console.error("Failed to create debt entry:",pe)}return e(`/dashboard/lab-billing/${n.id}`,{replace:!0,state:{...t.state,order:{...n,status:"billed",bill_id:ze.id}}}),ze.id}catch(oe){return console.error("Billing process failed:",oe),x(oe.message||"Failed to mark order as billed. Please try again."),null}finally{j(!1)}},fe=()=>{window.print()},se=async()=>{await ce()&&(window.print(),e(-1))};b.useEffect(()=>{const oe=t.pathname.split("/"),_e=oe[oe.length-1];_e?(async()=>{try{const[ze,K]=await Promise.all([ue(`/api/lab/${_e}`),ue("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ze.ok)throw new Error("Failed to fetch lab order details");const ye=await ze.json();i(ye);const pe=ye.patient_id?ue(`/api/patients/${ye.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1});if(K.ok&&"json"in K){const Be=await K.json();A(Be.upi_id||""),I(Be.name||""),B(Be.address||""),L(Be.notes||""),H(Be.labLetterheadUrl||"")}const me=await pe;if(me.ok&&"json"in me){const Be=await me.json();s(Be.name),l(Be.patient_token_number)}const Ne=ye.tests.map(Be=>({...Be,price:typeof Be.price=="string"?parseFloat(Be.price):Number(Be.price)||0,discount_percentage:0,total_price:typeof Be.price=="string"?parseFloat(Be.price):Number(Be.price)||0}));u(Ne)}catch(ze){console.error("Failed to fetch data:",ze),x(ze.message||"Failed to load order details.")}finally{p(!1)}})():(x("No lab order ID provided."),p(!1))},[t.pathname]);const Q=b.useMemo(()=>c.reduce((oe,_e)=>oe+(_e.price??0),0),[c]),ie=b.useMemo(()=>c.reduce((oe,_e)=>{const ze=(_e.price??0)*(_e.discount_percentage??0)/100;return oe+ze},0),[c]),ge=b.useMemo(()=>Q-ie,[Q,ie]),ee=b.useMemo(()=>Y.reduce((oe,_e)=>oe+_e.amount,0),[Y]),we=b.useMemo(()=>ge-ee,[ge,ee]),Ue=b.useMemo(()=>Math.abs(we)<.01,[we]),Ge=b.useMemo(()=>le?Y.some(oe=>oe.method==="credit"&&oe.amount>0):w==="credit",[le,Y,w]),Le=b.useMemo(()=>le?Y.filter(oe=>oe.method==="credit").reduce((oe,_e)=>oe+_e.amount,0):w==="credit"?ge:0,[le,Y,w,ge]);return b.useEffect(()=>{if(ge>0&&O){const oe=`upi://pay?pa=${O}&pn=ClinicName&am=${ge.toFixed(2)}&cu=INR`;C(oe)}else C("")},[ge,O]),b.useEffect(()=>{(async()=>{if(Ge&&(n!=null&&n.patient_id)){z(!0);try{const _e=await ue(`/api/patient-debts/${n.patient_id}/balance`);if(_e.ok){const $e=await _e.json();ae($e.netDebt||0)}else ae(0)}catch(_e){console.error("Error fetching patient debt:",_e),ae(0)}finally{z(!1)}}})()},[Ge,n==null?void 0:n.patient_id]),f?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(Z,{width:200,height:20}),r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:100,height:24})]}),r.jsx(Z,{width:"100%",height:150})," ",r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})})]})]})}):g?r.jsxs("div",{className:"error-message-box",children:["Error: ",g]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[V&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:V,alt:"Lab Letterhead",className:"print-letterhead-image"})}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:P?`${P} Lab`:"Lab Bill"}),(F||$)&&r.jsxs("div",{className:"clinic-details-print",children:[F&&r.jsx("span",{className:"small-text clinic-address",children:F}),$&&r.jsx("span",{className:"small-text clinic-notes",children:$})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",a]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{size:20})}),r.jsx("h1",{children:"Lab Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",a]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(os,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Lab Tests"})}),c.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"TEST DESCRIPTION"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:c.map((oe,_e)=>{const $e=oe.price??0,ze=$e*(oe.discount_percentage??0)/100,K=$e-ze;return r.jsxs("tr",{children:[r.jsx("td",{children:_e+1}),r.jsx("td",{children:oe.name}),r.jsx("td",{children:typeof oe.price=="number"?oe.price.toFixed(2):Number(oe.price||0).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:oe.discount_percentage||"",onChange:ye=>ve(_e,parseFloat(ye.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:K.toFixed(2)})]},_e)})})]}):r.jsx("p",{children:"No tests in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",te.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ge.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:le?"Split Payment":w==="cash"?"Cash":w==="upi"?"UPI":w==="card"?"Card":w==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),le&&Y.map((oe,_e)=>oe.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:oe.method==="cash"?"Cash":oe.method==="upi"?"UPI":oe.method==="card"?"Card":oe.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",oe.amount.toFixed(2)]})]},_e))]}),W!==null&&(W>0||Ge)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(W??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(W??0).toFixed(2)]})]}),Ge&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",Le.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((W??0)+(Ge?Le:0)).toFixed(2)]})]})]})]}),T&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${w!=="upi"?"hide-on-screen":""}`,children:[r.jsx(pa,{value:T,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:te===0?"":te,onChange:oe=>re(parseFloat(oe.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:v||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ge.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:T?r.jsxs(r.Fragment,{children:[r.jsx(pa,{value:T,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>je(!le),disabled:v||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:le?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:le?"rgba(79, 172, 254, 0.1)":"transparent",color:le?"#4facfe":"#666",cursor:v||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qc,{size:14}),"Split"]})]}),le?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ge.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:Y.map((oe,_e)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:_e+1}),r.jsxs("select",{value:oe.method,onChange:$e=>Ie(oe.id,"method",$e.target.value),className:`split-payment-select ${oe.method==="credit"?"is-credit":""}`,disabled:v||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:oe.amount||"",onChange:$e=>Ie(oe.id,"amount",parseFloat($e.target.value)||0),className:`split-payment-input ${oe.method==="credit"?"is-credit":""}`,disabled:v||n.status==="billed"})]}),Y.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>be(oe.id,ge),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>Me(oe.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Yn,{size:12})})]})]},oe.id))}),Y.length<5&&r.jsxs("button",{type:"button",onClick:Ke,className:"split-payment-add-btn",disabled:v||n.status==="billed",children:[r.jsx(hr,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ee.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ue?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Ue?"":we>0?"":"",Ue?"Balanced":we>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(we).toFixed(2)]})]}),!Ue&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ge.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:w,onChange:oe=>_(oe.target.value),className:"payment-mode-select",disabled:v||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Ge&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),G?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:W&&W>0?"#dc3545":"#28a745"},children:["",(W||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",Le.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((W||0)+Le).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:fe,className:"secondary-button print-preview-button no-print",disabled:v||c.length===0,children:"Print Preview"}),n.status!=="billed"&&r.jsx("button",{onClick:se,className:"primary-button",disabled:v||c.length===0,children:v?"Processing...":"Finalise and Bill"}),n.status==="billed"&&n.bill_id&&r.jsx("button",{onClick:()=>e("/billing",{state:{billId:n.bill_id}}),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})]}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},DLe=500,MLe=()=>{const e=It(),{queueId:t}=Ii(),[n]=bq(),i=n.get("doctorId"),[a,s]=b.useState(null),[o,l]=b.useState(null),[c,u]=b.useState(null),[f,p]=b.useState(null),[g,x]=b.useState([]),[v,j]=b.useState(!0),[w,_]=b.useState(null),[T,C]=b.useState(!1),[O,A]=b.useState(!1),[P,I]=b.useState(null),[F,B]=b.useState("cash"),[$,L]=b.useState(""),[V,H]=b.useState(""),[te,X]=b.useState(""),[q,W]=b.useState(""),[ae,G]=b.useState(""),[z,le]=b.useState(0),[je,Y]=b.useState(null),[Oe,Ke]=b.useState(!1),[Me,Ie]=b.useState(!1),[be,re]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),ve=()=>{be.length<5&&re(K=>[...K,{id:Date.now().toString(),method:"cash",amount:0}])},ce=K=>{be.length>2&&re(ye=>ye.filter(pe=>pe.id!==K))},fe=(K,ye,pe)=>{re(me=>{const Ne=me.map(Be=>Be.id===K?ye==="method"?{...Be,method:pe}:{...Be,amount:Math.max(0,pe)}:Be);if(ye==="amount"&&Ne.length===2){const ke=Ne.findIndex(gt=>gt.id===K)===0?1:0,Ye=Math.max(0,pe),rt=ge-Ye;Ne[ke]={...Ne[ke],amount:Math.max(0,rt)}}return Ne})},se=(K,ye)=>{const pe=be.filter(Ne=>Ne.id!==K).reduce((Ne,Be)=>Ne+Be.amount,0),me=Math.max(0,ye-pe);re(Ne=>Ne.map(Be=>Be.id===K?{...Be,amount:me}:Be))};b.useEffect(()=>{(async()=>{if(!t){_("No queue ID provided."),j(!1);return}try{j(!0),_(null);const[ye,pe]=await Promise.all([ue(`/api/queue/${t}`),ue("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ye.ok)throw new Error("Failed to fetch queue entry");const me=await ye.json();if(s(me),pe.ok&&"json"in pe){const rt=await pe.json();H(rt.upi_id||""),X(rt.name||""),W(rt.address||""),G(rt.notes||"")}const Ne=i||me.doctor_id,[Be,ke]=await Promise.all([me.patient_id?ue(`/api/patients/${me.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1}),Ne?ue(`/api/staff/${Ne}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1})]);if(Be.ok&&"json"in Be){const rt=await Be.json();l(rt)}let Ye=DLe;if(Ne&&(p(Ne),ke.ok&&"json"in ke)){const rt=await ke.json();u(rt),rt.opd_fee!=null&&!isNaN(parseFloat(String(rt.opd_fee)))&&(Ye=parseFloat(String(rt.opd_fee)))}x([{name:"Consultation Fee",quantity:1,price:Ye,total:Ye,discount_percentage:0}])}catch(ye){console.error("Failed to fetch data:",ye),_(ye.message||"Failed to load billing details.")}finally{j(!1)}})()},[t,i]);const Q=b.useMemo(()=>g.reduce((K,ye)=>K+ye.total,0),[g]),ie=b.useMemo(()=>Q*(z/100),[Q,z]),ge=b.useMemo(()=>Q-ie,[Q,ie]),ee=b.useMemo(()=>be.reduce((K,ye)=>K+ye.amount,0),[be]),we=b.useMemo(()=>ge-ee,[ge,ee]),Ue=b.useMemo(()=>Math.abs(we)<.01,[we]),Ge=b.useMemo(()=>Me?be.some(K=>K.method==="credit"&&K.amount>0):F==="credit",[Me,be,F]),Le=b.useMemo(()=>Me?be.filter(K=>K.method==="credit").reduce((K,ye)=>K+ye.amount,0):F==="credit"?ge:0,[Me,be,F,ge]);b.useEffect(()=>{if(ge>0&&V){const K=`upi://pay?pa=${V}&pn=${encodeURIComponent(te)}&am=${ge.toFixed(2)}&cu=INR`;L(K)}else L("")},[ge,V,te]),b.useEffect(()=>{(async()=>{if(Ge&&(o!=null&&o.id)){Ke(!0);try{const ye=await ue(`/api/patient-debts/${o.id}/balance`);if(ye.ok){const pe=await ye.json();Y(pe.netDebt||0)}else Y(0)}catch(ye){console.error("Error fetching patient debt:",ye),Y(0)}finally{Ke(!1)}}})()},[Ge,o==null?void 0:o.id]);const oe=K=>{const ye=Math.max(0,Math.min(100,isNaN(K)?0:K));le(ye)},_e=async()=>{if(!a||!o)return _("Missing queue or patient data."),null;if(g.length===0)return _("Cannot create an empty bill."),null;C(!0),_(null);try{const K=g.map(Be=>({name:Be.name,quantity:Be.quantity,price:Be.price,total:Be.total*(1-z/100)})),ye={patientId:o.id,queueId:a.id,items:K,amount:ge,paymentMode:Me?"split":F,type:"consultation",related_id:a.id,status:"paid",discountPercentage:z};Me&&(ye.splitPayments=be.map(Be=>({method:Be.method,amount:Be.amount})));const pe=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ye)}),me=await pe.json();if(!pe.ok||!me.id)throw new Error(me.message||"Failed to create bill.");const Ne=Me?be.filter(Be=>Be.method==="credit").reduce((Be,ke)=>Be+ke.amount,0):F==="credit"?ge:0;if(Ne>0)try{await ue(`/api/patient-debts/${o.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Ne,related_bill_id:me.id,notes:`Consultation Bill #${me.id}`})})}catch(Be){console.error("Failed to create debt entry:",Be)}if(f&&a.id)try{const Be={status:"waiting",doctorId:f},ke=await ue(`/api/queue/${a.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)});if(ke.ok)console.log(`Doctor ${f} assigned to queue ${a.id} after billing.`);else{const Ye=await ke.json();console.error("Failed to assign doctor to queue:",Ye.message)}}catch(Be){console.error("Error assigning doctor to queue:",Be)}return A(!0),I(me.id),me.id}catch(K){return console.error("Billing process failed:",K),_(K.message||"Failed to create bill. Please try again."),null}finally{C(!1)}},$e=()=>{window.print()},ze=async()=>{await _e()&&(window.print(),e(-1))};return v?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(Z,{width:200,height:20}),r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:100,height:24})]}),r.jsx(Z,{width:"100%",height:150})," ",r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})})]})]})}):w?r.jsxs("div",{className:"error-message-box",children:["Error: ",w]}):a?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:te||"Clinic Bill"}),(q||ae)&&r.jsxs("div",{className:"clinic-details-print",children:[q&&r.jsx("span",{className:"small-text clinic-address",children:q}),ae&&r.jsx("span",{className:"small-text clinic-notes",children:ae})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",a.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Date"]})," ",new Date().toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{size:20})}),r.jsx("h1",{children:"Consultation Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",a.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Patient ID"]})," ",(o==null?void 0:o.id)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Date"]})," ",new Date().toLocaleDateString()]}),c&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(dg,{size:16})," Doctor"]})," ",c.name]}),a.complaint&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Complaint"})," ",a.complaint]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Bill Items"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((K,ye)=>{const pe=K.total*(z/100),me=K.total-pe;return r.jsxs("tr",{children:[r.jsx("td",{children:ye+1}),r.jsx("td",{children:K.name}),r.jsx("td",{children:K.quantity}),r.jsxs("td",{children:["",K.price.toFixed(2)]}),r.jsxs("td",{children:["",me.toFixed(2)]})]},ye)})})]}):r.jsx("p",{children:"No items in this bill."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),z>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",z.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ge.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:Me?"Split Payment":F==="cash"?"Cash":F==="upi"?"UPI":F==="card"?"Card":F==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),Me&&be.map((K,ye)=>K.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:K.method==="cash"?"Cash":K.method==="upi"?"UPI":K.method==="card"?"Card":K.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",K.amount.toFixed(2)]})]},ye))]}),je!==null&&(je>0||Ge)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(je??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(je??0).toFixed(2)]})]}),Ge&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",Le.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((je??0)+(Ge?Le:0)).toFixed(2)]})]})]})]}),$&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${F!=="upi"?"hide-on-screen":""}`,children:[r.jsx(pa,{value:$,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:z===0?"":z,onChange:K=>oe(parseFloat(K.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:T||O}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ge.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:$?r.jsxs(r.Fragment,{children:[r.jsx(pa,{value:$,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>Ie(!Me),disabled:T||O,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:Me?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:Me?"rgba(79, 172, 254, 0.1)":"transparent",color:Me?"#4facfe":"#666",cursor:T||O?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qc,{size:14}),"Split"]})]}),Me?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ge.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:be.map((K,ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ye+1}),r.jsxs("select",{value:K.method,onChange:pe=>fe(K.id,"method",pe.target.value),className:`split-payment-select ${K.method==="credit"?"is-credit":""}`,disabled:T||O,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:K.amount||"",onChange:pe=>fe(K.id,"amount",parseFloat(pe.target.value)||0),className:`split-payment-input ${K.method==="credit"?"is-credit":""}`,disabled:T||O})]}),be.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>se(K.id,ge),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>ce(K.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Yn,{size:12})})]})]},K.id))}),be.length<5&&r.jsxs("button",{type:"button",onClick:ve,className:"split-payment-add-btn",disabled:T||O,children:[r.jsx(hr,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ee.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ue?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Ue?"":we>0?"":"",Ue?"Balanced":we>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(we).toFixed(2)]})]}),!Ue&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ge.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:F,onChange:K=>B(K.target.value),className:"payment-mode-select",disabled:T||O,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Ge&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Oe?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:je&&je>0?"#dc3545":"#28a745"},children:["",(je||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",Le.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((je||0)+Le).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[!O&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:$e,className:"secondary-button print-preview-button no-print",disabled:T||g.length===0,children:"Print Preview"}),r.jsx("button",{onClick:ze,className:"primary-button",disabled:T||g.length===0,children:T?"Processing...":"Finalise and Bill"})]}),O&&P&&r.jsx("button",{onClick:()=>e(`/dashboard/bills/${P}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your visit!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No queue data available."})},ILe=()=>{const e=It(),[t,n]=b.useState(!0),[i,a]=b.useState([]),[s,o]=b.useState(""),[l,c]=b.useState(!0),[u,f]=b.useState(!1),[p,g]=b.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",name:"",logoUrl:"",labLetterheadUrl:"",upi_id:"",address:"",notes:"",voice_ai_language:"en-US"}),[x,v]=b.useState(null),[j,w]=b.useState(!1),_=($,L)=>{v({type:$,message:L}),setTimeout(()=>v(null),3e3)},T=$=>{switch($){case"doctor":return r.jsx(dg,{size:14,className:"text-blue-600"});case"receptionist":return r.jsx(Gq,{size:14,className:"text-green-600"});case"pharmacy":return r.jsx(Oc,{size:14,className:"text-purple-600"});case"lab":return r.jsx(os,{size:14,className:"text-yellow-600"});default:return r.jsx(md,{size:14,className:"text-gray-500"})}},C=$=>{switch($){case"doctor":return"avatar-blue";case"receptionist":return"avatar-green";case"pharmacy":return"avatar-purple";case"lab":return"avatar-yellow";default:return"avatar-gray"}},O=b.useCallback(async()=>{n(!0);try{const $=await ue("/staff");if($.ok){const L=await $.json();a(L.map(V=>({...V,id:V._id||V.id})))}}catch($){console.error("Error fetching staff:",$),_("error","Failed to load staff list")}finally{n(!1)}},[]),A=b.useCallback(async()=>{c(!0);try{const $=await ue("/api/clinics/settings");if($.ok){const L=await $.json();g({admissionCharge:parseFloat(L.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(L.perDayCharge||0).toFixed(2),otherCharges:parseFloat(L.otherCharges||0).toFixed(2),aiMemory:L.aiMemory||"",clinicWideSystemPrompt:L.clinicWideSystemPrompt||"",gemini_api_key:L.gemini_api_key||"",low_stock_threshold:L.low_stock_threshold!==void 0&&L.low_stock_threshold!==null?String(L.low_stock_threshold):"10",name:L.name||"",logoUrl:L.logoUrl||"",labLetterheadUrl:L.labLetterheadUrl||"",upi_id:L.upi_id||"",address:L.address||"",notes:L.notes||"",clinic_id:L.clinic_id,voice_ai_language:L.voice_ai_language||"en-US"})}}catch($){console.error("Error fetching settings:",$),_("error","Failed to load settings")}finally{c(!1)}},[]);b.useEffect(()=>{O(),A()},[O,A]);const P=$=>{const{name:L,value:V}=$.target;g(H=>({...H,[L]:V}))},I=async()=>{f(!0);try{const $=parseFloat(p.admissionCharge),L=parseFloat(p.perDayCharge),V=parseFloat(p.otherCharges),H=parseInt(p.low_stock_threshold);if((await ue("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:p.name,admissionCharge:$,perDayCharge:L,otherCharges:V,aiMemory:p.aiMemory,clinicWideSystemPrompt:p.clinicWideSystemPrompt,gemini_api_key:p.gemini_api_key,low_stock_threshold:H,logoUrl:p.logoUrl,labLetterheadUrl:p.labLetterheadUrl,upi_id:p.upi_id,address:p.address,notes:p.notes,voice_ai_language:p.voice_ai_language})})).ok)_("success","Changes saved successfully");else throw new Error("Failed to save")}catch($){console.error("Error saving settings:",$),_("error","Failed to save settings")}finally{f(!1)}},F=i.filter($=>$.name.toLowerCase().includes(s.toLowerCase())||$.role.toLowerCase().includes(s.toLowerCase())),B=async $=>{for(const L of $){const V=document.getElementById(L);V&&(V.scrollIntoView({behavior:"smooth",block:"center"}),V.classList.add("ai-feedback-glow"),await new Promise(H=>setTimeout(H,1500)),V.classList.remove("ai-feedback-glow"))}};return r.jsxs("div",{className:"clinic-hub-container",children:[r.jsxs("header",{className:"clinic-hub-header",children:[r.jsxs("div",{className:"clinic-hub-title",children:[r.jsx("h1",{children:"Clinic Hub"}),r.jsx("p",{className:"clinic-hub-subtitle",children:"Manage your ecosystem"})]}),r.jsxs("div",{className:"clinic-hub-actions",children:[x&&r.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.message}),r.jsxs("button",{className:"btn-add-staff",onClick:()=>e("/dashboard/staff/add"),children:[r.jsx(hr,{size:16})," Add Staff"]}),r.jsxs("button",{className:"btn-save-changes",onClick:I,disabled:u,children:[r.jsx(io,{size:16})," ",u?"Saving...":"Save Changes"]})]})]}),r.jsxs("main",{className:"clinic-hub-content",children:[r.jsxs("div",{className:"team-directory-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(Ro,{size:18,className:"text-gray-500"}),r.jsxs("span",{className:"panel-title",children:["Team Directory (",i.length,")"]})]}),r.jsx("div",{className:"search-container",children:r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Wn,{size:16,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Find member...",className:"search-input",value:s,onChange:$=>o($.target.value)})]})}),r.jsx("div",{className:"team-list",children:t?r.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4].map($=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsxs("div",{className:"flex-1",children:[r.jsx(Z,{width:120,height:16,className:"mb-1"}),r.jsx(Z,{width:80,height:12})]})]},$))}):F.length===0?r.jsx("div",{className:"empty-state",children:"No staff found."}):F.map($=>r.jsxs("div",{id:`staff-member-${$.id}`,className:"team-member-item",children:[r.jsx("div",{className:`member-avatar ${C($.role)}`,children:$.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"member-info",children:[r.jsx("div",{className:"member-name",children:$.name}),r.jsxs("div",{className:"member-role",children:[T($.role),$.role]})]}),r.jsx("span",{className:`member-status ${$.active?"status-active":"status-inactive"}`,children:$.active?"Active":"Inactive"}),r.jsx("button",{className:"btn-edit-member",onClick:()=>e(`/dashboard/staff/edit/${$.id}`),children:r.jsx($a,{size:16})})]},$.id))})]}),r.jsxs("div",{className:"config-console-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx($q,{size:18,className:"text-gray-500"}),r.jsx("span",{className:"panel-title",children:"Configuration Console"})]}),l?r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:80,style:{borderRadius:"8px"}})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]})]})]})]}):r.jsxs("div",{className:"config-content",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(zq,{size:16})," CLINIC IDENTITY & LOCATION"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Clinic Name"}),r.jsx("input",{type:"text",className:"form-input",name:"name",id:"setting-name",value:p.name,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Logo URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"logoUrl",id:"setting-logoUrl",value:p.logoUrl,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Lab Letterhead URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"labLetterheadUrl",id:"setting-labLetterheadUrl",value:p.labLetterheadUrl,onChange:P})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Address"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Full physical address",name:"address",id:"setting-address",value:p.address,onChange:P})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(_f,{size:16})," FINANCIAL OPERATIONS"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Admission Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"admissionCharge",id:"setting-admissionCharge",value:p.admissionCharge,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Per Day Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"perDayCharge",id:"setting-perDayCharge",value:p.perDayCharge,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Other Charges ()"}),r.jsx("input",{type:"number",className:"form-input",name:"otherCharges",id:"setting-otherCharges",value:p.otherCharges,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"UPI ID"}),r.jsx("input",{type:"text",className:"form-input",name:"upi_id",id:"setting-upi_id",value:p.upi_id,onChange:P})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(jD,{size:16})," INVENTORY & AI"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Low Stock Threshold"}),r.jsx("input",{type:"number",className:"form-input",name:"low_stock_threshold",id:"setting-low_stock_threshold",value:p.low_stock_threshold,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Voice AI Language"}),r.jsxs("select",{className:"form-input",name:"voice_ai_language",id:"setting-voice_ai_language",value:p.voice_ai_language,onChange:$=>g(L=>({...L,voice_ai_language:$.target.value})),children:[r.jsx("option",{value:"en-US",children:"English"}),r.jsx("option",{value:"hi-IN",children:"Hindi"}),r.jsx("option",{value:"te-IN",children:"Telugu"}),r.jsx("option",{value:"bn-IN",children:"Bengali"}),r.jsx("option",{value:"mr-IN",children:"Marathi"}),r.jsx("option",{value:"ta-IN",children:"Tamil"}),r.jsx("option",{value:"gu-IN",children:"Gujarati"}),r.jsx("option",{value:"kn-IN",children:"Kannada"}),r.jsx("option",{value:"ml-IN",children:"Malayalam"}),r.jsx("option",{value:"pa-IN",children:"Punjabi"}),r.jsx("option",{value:"es-ES",children:"Spanish"}),r.jsx("option",{value:"fr-FR",children:"French"}),r.jsx("option",{value:"de-DE",children:"German"}),r.jsx("option",{value:"it-IT",children:"Italian"}),r.jsx("option",{value:"pt-PT",children:"Portuguese"}),r.jsx("option",{value:"ru-RU",children:"Russian"}),r.jsx("option",{value:"ja-JP",children:"Japanese"}),r.jsx("option",{value:"ko-KR",children:"Korean"}),r.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),r.jsx("option",{value:"ar-SA",children:"Arabic"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Gemini API Key"}),r.jsx("input",{type:"password",className:"form-input",name:"gemini_api_key",id:"setting-gemini_api_key",value:p.gemini_api_key,onChange:P,placeholder:"******************"})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Clinic-Wide System Prompt"}),r.jsx("textarea",{className:"form-textarea",name:"clinicWideSystemPrompt",id:"setting-clinicWideSystemPrompt",value:p.clinicWideSystemPrompt,onChange:P,placeholder:"Instructions for the AI..."})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"AI Memory (Context)"}),r.jsx("textarea",{className:"form-textarea",name:"aiMemory",id:"setting-aiMemory",value:p.aiMemory,onChange:P,placeholder:"Shared context for the AI..."})]})]})]})]})]})]}),j&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:r.jsx("div",{className:"w-96 bg-white h-full shadow-2xl animate-slide-in-right",children:r.jsx(hW,{onClose:()=>w(!1),settings:p,staffList:i,onSettingsUpdate:A,onStaffUpdate:O,onHighlight:B})})})]})},RLe="_container_13uqm_121",LLe="_header_13uqm_141",FLe="_title_13uqm_187",$Le="_controls_13uqm_203",BLe="_dateInputGroup_13uqm_231",zLe="_dateInputLabel_13uqm_255",qLe="_dateInput_13uqm_231",ULe="_section_13uqm_297",VLe="_sectionTitle_13uqm_325",HLe="_statsGrid_13uqm_351",GLe="_statCard_13uqm_365",WLe="_statTitle_13uqm_397",KLe="_statValue_13uqm_415",YLe="_statSubtitle_13uqm_431",QLe="_revenueGrid_13uqm_443",XLe="_revenueCard_13uqm_469",JLe="_revenueCardTitle_13uqm_485",ZLe="_revenueCardList_13uqm_505",e6e="_revenueCardListItem_13uqm_517",t6e="_tableContainer_13uqm_557",n6e="_table_13uqm_557",r6e="_textRight_13uqm_639",i6e="_textGreen_13uqm_647",a6e="_textRed_13uqm_655",s6e="_loadingContainer_13uqm_673",o6e="_errorAlert_13uqm_693",l6e="_backButton_13uqm_759",c6e="_chartsGrid_13uqm_797",u6e="_chartCard_13uqm_823",d6e="_chartWrapper_13uqm_873",xt={container:RLe,header:LLe,title:FLe,controls:$Le,dateInputGroup:BLe,dateInputLabel:zLe,dateInput:qLe,section:ULe,sectionTitle:VLe,statsGrid:HLe,statCard:GLe,statTitle:WLe,statValue:KLe,statSubtitle:YLe,revenueGrid:QLe,revenueCard:XLe,revenueCardTitle:JLe,revenueCardList:ZLe,revenueCardListItem:e6e,tableContainer:t6e,table:n6e,textRight:r6e,textGreen:i6e,textRed:a6e,loadingContainer:s6e,errorAlert:o6e,backButton:l6e,chartsGrid:c6e,chartCard:u6e,chartWrapper:d6e},Pz=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],bk=({active:e,payload:t,label:n})=>e&&t&&t.length?r.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-gray-800",children:n}),t.map((i,a)=>r.jsxs("p",{style:{color:i.color},className:"text-sm",children:[i.name,": ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(i.value)]},a))]}):null,h6e=()=>{const e=It(),t=Gr(),n=new URLSearchParams(t.search),i=n.get("startDate"),a=n.get("endDate"),s=new Date().toISOString().split("T")[0],[o,l]=b.useState(i||s),[c,u]=b.useState(a||s),[f,p]=b.useState(!1),[g,x]=b.useState(null),{setAnalysisDateRange:v,analysisDateRange:j,setAnalysisData:w,registerAnalysisNavigator:_,registerAnalysisRefresher:T}=rN(),[C,O]=b.useState(0),[A,P]=b.useState(0),[I,F]=b.useState(0),[B,$]=b.useState(null),[L,V]=b.useState(null),[H,te]=b.useState(null),[X,q]=b.useState({reception:{},pharmacy:{},lab:{},dental:{}}),[W,ae]=b.useState(0),[G,z]=b.useState(null),[le,je]=b.useState([]),[Y,Oe]=b.useState(null),Ke=b.useCallback(async(re,ve)=>{p(!0),x(null);const ce=re||o,fe=ve||c;if(O(0),P(0),F(0),$(null),V(null),te(null),q({reception:{},pharmacy:{},lab:{},dental:{}}),Oe(null),Oe(null),ae(0),z(null),je([]),!ce||!fe){x("Please select both start and end dates."),p(!1);return}try{const se=Uhe(),[Q,ie,ge,ee,we,Ue]=await Promise.all([ue(`/api/bills?startDate=${o}&endDate=${c}&limit=10000`),ue(`/api/payment/admission?startDate=${o}&endDate=${c}`),ue(`/api/subscriptions/transactions/manual?startDate=${o}&endDate=${c}`),ue(`/api/patient-debts/collections/analysis?startDate=${o}&endDate=${c}`),se?ue(`/api/inventory/comprehensive-analysis?startDate=${o}&endDate=${c}&clinicId=${se}`):Promise.resolve(null),ue(`/api/distributors/payments/analysis?startDate=${o}&endDate=${c}`)]);if(Q.ok&&ie.ok&&ge.ok){const Ge=await Q.json(),Le=await ie.json(),oe=await ge.json(),_e=Ge.bills||[],$e=Le.admissionPayments||[],ze=oe||[];let K={totalRevenue:0,totalCashCollected:0,revenueByType:{consultation:0,pharmacy:0,lab:0,dental:0,other:0},cashByMode:{},revenueByMode:{},detailedRevenue:{reception:{},pharmacy:{},lab:{},dental:{}},dailyRevenue:new Map,pharmacyReturns:0};const ye=(Ne,Be)=>{const ke=Ne.split("T")[0];K.dailyRevenue.set(ke,(K.dailyRevenue.get(ke)||0)+Be)},pe=(Ne,Be,ke,Ye,rt=!0)=>{const gt=Be.toLowerCase()==="credit";rt&&(K.totalRevenue+=Ne,K.revenueByType.hasOwnProperty(ke)?K.revenueByType[ke]+=Ne:K.revenueByType.other=(K.revenueByType.other||0)+Ne,ye(Ye,Ne),K.revenueByMode[Be]=(K.revenueByMode[Be]||0)+Ne),gt||(K.totalCashCollected+=Ne,K.cashByMode[Be]=(K.cashByMode[Be]||0)+Ne),rt&&(ke==="pharmacy"?K.detailedRevenue.pharmacy[Be]=(K.detailedRevenue.pharmacy[Be]||0)+Ne:ke==="lab"?K.detailedRevenue.lab[Be]=(K.detailedRevenue.lab[Be]||0)+Ne:ke==="dental"?K.detailedRevenue.dental[Be]=(K.detailedRevenue.dental[Be]||0)+Ne:ke!=="debt"&&(K.detailedRevenue.reception[Be]=(K.detailedRevenue.reception[Be]||0)+Ne)),ke==="debt"&&(K.detailedRevenue.debt=K.detailedRevenue.debt||{},K.detailedRevenue.debt[Be]=(K.detailedRevenue.debt[Be]||0)+Ne)};if(_e.forEach(Ne=>{if(Ne.status==="paid"||Ne.type==="pharmacy_return"){let Be=parseFloat(Ne.amount.toString()),ke=Ne.type||"other";if(ke==="pharmacy_return"&&(K.pharmacyReturns+=Be,ke="pharmacy"),Ne.split_payments&&Array.isArray(Ne.split_payments)&&Ne.split_payments.length>0)Ne.split_payments.forEach(Ye=>{const rt=parseFloat(Ye.amount.toString()),gt=Ye.method||"Unknown",Pe=gt.toLowerCase()==="credit";K.totalRevenue+=rt,K.revenueByType.hasOwnProperty(ke)?K.revenueByType[ke]+=rt:K.revenueByType.other=(K.revenueByType.other||0)+rt,ye(Ne.createdAt,rt),K.revenueByMode[gt]=(K.revenueByMode[gt]||0)+rt,Pe||(K.totalCashCollected+=rt,K.cashByMode[gt]=(K.cashByMode[gt]||0)+rt),ke==="pharmacy"?K.detailedRevenue.pharmacy[gt]=(K.detailedRevenue.pharmacy[gt]||0)+rt:ke==="lab"?K.detailedRevenue.lab[gt]=(K.detailedRevenue.lab[gt]||0)+rt:ke==="dental"?K.detailedRevenue.dental[gt]=(K.detailedRevenue.dental[gt]||0)+rt:K.detailedRevenue.reception[gt]=(K.detailedRevenue.reception[gt]||0)+rt});else{const Ye=Ne.payment_mode||"Unknown";pe(Be,Ye,ke,Ne.createdAt,!0)}}}),$e.forEach(Ne=>{pe(parseFloat(Ne.amount_paid.toString()),Ne.payment_mode||"Unknown","consultation",Ne.payment_date,!0)}),ze.forEach(Ne=>{var Ye,rt;const Be=parseFloat(((rt=(Ye=Ne.subscriptionPlan)==null?void 0:Ye.price)==null?void 0:rt.toString())??"0"),ke=Ne.subscription_payment_method||"manual";pe(Be,ke,"consultation",Ne.subscription_start_date,!0)}),ee.ok){const Be=(await ee.json()).paymentModeBreakdown||{};Object.entries(Be).forEach(([ke,Ye])=>{const rt=Number(Ye);pe(rt,ke,"debt","",!1)})}if(P(K.totalCashCollected),O(K.totalRevenue),F(K.pharmacyReturns),$(K.cashByMode),V(K.revenueByMode),te(K.revenueByType),q(K.detailedRevenue),Ue&&Ue.ok){const Ne=await Ue.json();ae(Ne.totalPaid||0),z(Ne.paymentModeBreakdown||{})}const me=Array.from(K.dailyRevenue.entries()).sort((Ne,Be)=>new Date(Ne[0]).getTime()-new Date(Be[0]).getTime()).map(([Ne,Be])=>({date:Ne,amount:Be}));je(me)}if(we&&we.ok){const Ge=await we.json();Oe(Ge)}}catch(se){console.error("Analysis Fetch Error:",se),x("Failed to fetch analysis data. Please try again.")}finally{p(!1)}},[o,c]);b.useEffect(()=>{_(re=>{const ve=`analysis-${re}`,ce=document.getElementById(ve);ce&&(ce.scrollIntoView({behavior:"smooth",block:"center"}),ce.classList.add("ai-highlight-glow"),setTimeout(()=>ce.classList.remove("ai-highlight-glow"),2e3))})},[_]),b.useEffect(()=>{T(async()=>(await Ke(),null))},[T,Ke]),b.useEffect(()=>{if(j.startDate&&j.endDate){const re=j.startDate.toISOString().split("T")[0],ve=j.endDate.toISOString().split("T")[0];(re!==o||ve!==c)&&(l(re),u(ve))}},[j]),b.useEffect(()=>{const re=new URLSearchParams(t.search),ve=re.get("section"),ce=re.get("startDate"),fe=re.get("endDate");if(ce&&fe){l(ce),u(fe);const se=j.startDate?j.startDate.toISOString().split("T")[0]:null,Q=j.endDate?j.endDate.toISOString().split("T")[0]:null;(se!==ce||Q!==fe)&&v({startDate:new Date(ce),endDate:new Date(fe)})}if(ve){const se=`analysis-${ve}`;setTimeout(()=>{const Q=document.getElementById(se);Q&&(Q.scrollIntoView({behavior:"smooth",block:"center"}),Q.classList.add("ai-highlight-glow"),setTimeout(()=>Q.classList.remove("ai-highlight-glow"),2e3))},500)}},[t.search]),b.useEffect(()=>{Ke()},[o,c,Ke]),b.useEffect(()=>{!f&&(A>0||Y)&&w({totalRevenue:C,totalCashFlow:A,totalExpenses:W,netCashFlow:A-W,collectionsBreakdown:B,revenueBreakdown:L,inventoryValue:0,pharmacyRevenue:(H==null?void 0:H.pharmacy)||0,labRevenue:(H==null?void 0:H.lab)||0,dentalRevenue:(H==null?void 0:H.dental)||0,receptionRevenue:((H==null?void 0:H.consultation)||0)+((H==null?void 0:H.other)||0),inventorySummary:Y?{totalItemsAnalyzed:Y.pharmacyAnalysis.length,netPositiveItems:Y.pharmacyAnalysis.filter(re=>re.net_change>0).length}:null})},[C,A,W,B,L,Y,H,f,w]);const Me=re=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(re),Ie=b.useMemo(()=>L?Object.entries(L).map(([re,ve])=>({name:re,value:ve})):[],[L]),be=b.useMemo(()=>H?[{name:"Consultation",value:H.consultation},{name:"Pharmacy",value:H.pharmacy},{name:"Lab",value:H.lab},{name:"Dental",value:H.dental},{name:"Debt Collections",value:H.debt||0},{name:"Other",value:H.other||0}].filter(re=>re.value>0):[],[H]);return r.jsxs("div",{className:xt.container,children:[r.jsxs("div",{className:xt.header,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>e(-1),className:xt.backButton,title:"Go Back",children:[r.jsx(rn,{size:20})," Back"]}),r.jsx("h1",{className:xt.title,children:"Analysis Dashboard"})]}),r.jsxs("div",{className:xt.controls,children:[r.jsxs("div",{className:xt.dateInputGroup,children:[r.jsx("label",{className:xt.dateInputLabel,children:"From:"}),r.jsx("input",{type:"date",className:xt.dateInput,value:o,onChange:re=>{l(re.target.value),c&&v({startDate:new Date(re.target.value),endDate:new Date(c)})}})]}),r.jsxs("div",{className:xt.dateInputGroup,children:[r.jsx("label",{className:xt.dateInputLabel,children:"To:"}),r.jsx("input",{type:"date",className:xt.dateInput,value:c,onChange:re=>{u(re.target.value),o&&v({startDate:new Date(o),endDate:new Date(re.target.value)})}})]})]})]}),g&&r.jsxs("div",{className:xt.errorAlert,children:[r.jsx(Zr,{size:20}),r.jsx("span",{children:g})]}),!f&&r.jsxs("div",{children:[r.jsxs("section",{className:xt.section,id:"analysis-expenses",children:[r.jsxs("div",{className:xt.sectionTitle,children:[r.jsx(Dw,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Cash Flow Analysis"})]}),r.jsxs("div",{className:xt.statsGrid,children:[r.jsxs("div",{className:xt.statCard,children:[r.jsx("div",{className:xt.statTitle,children:"Total Cash Inflow"}),r.jsx("div",{className:xt.statValue,style:{color:"var(--accent-success)"},children:Me(A)}),r.jsx("div",{className:xt.statSubtitle,children:"Collections (Cash, UPI, etc.)"})]}),r.jsxs("div",{className:xt.statCard,children:[r.jsx("div",{className:xt.statTitle,children:"Total Expenses"}),r.jsx("div",{className:xt.statValue,style:{color:"var(--accent-danger)"},children:Me(W)}),r.jsx("div",{className:xt.statSubtitle,children:"Distributor Payments"})]}),r.jsxs("div",{className:xt.statCard,children:[r.jsx("div",{className:xt.statTitle,children:"Net Cash Flow"}),r.jsx("div",{className:xt.statValue,style:{color:A-W>=0?"var(--accent-success)":"var(--accent-danger)"},children:Me(A-W)}),r.jsx("div",{className:xt.statSubtitle,children:"Inflow - Outflow"})]})]}),r.jsxs("div",{className:xt.revenueGrid,style:{marginTop:"1rem"},children:[B&&Object.keys(B).length>0&&r.jsxs("div",{className:xt.revenueCard,children:[r.jsx("h3",{className:xt.revenueCardTitle,children:"Collections Breakdown"}),r.jsx("ul",{className:xt.revenueCardList,children:Object.entries(B).map(([re,ve])=>r.jsxs("li",{className:xt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]}),G&&Object.keys(G).length>0&&r.jsxs("div",{className:xt.revenueCard,children:[r.jsx("h3",{className:xt.revenueCardTitle,children:"Expense Breakdown"}),r.jsx("ul",{className:xt.revenueCardList,children:Object.entries(G).map(([re,ve])=>r.jsxs("li",{className:xt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]})]})]}),r.jsxs("section",{className:xt.section,id:"analysis-financial",children:[r.jsxs("div",{className:xt.sectionTitle,children:[r.jsx(_f,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Financial Performance"})]}),r.jsx("div",{className:xt.statsGrid,children:r.jsxs("div",{className:xt.statCard,children:[r.jsx("div",{className:xt.statTitle,children:"Total Revenue Generated"}),r.jsx("div",{className:xt.statValue,style:{color:"var(--accent-primary)"},children:Me(C)}),r.jsx("div",{className:xt.statSubtitle,children:"Billings & Services (Accrual)"})]})}),r.jsxs("div",{className:xt.chartsGrid,children:[r.jsxs("div",{className:xt.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{children:"Revenue Trend (Daily)"}),r.jsx("div",{className:xt.chartWrapper,children:r.jsx(Nw,{width:"100%",height:300,children:r.jsxs(_Me,{data:le,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"var(--accent-primary)",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"var(--accent-primary)",stopOpacity:.05})]})}),r.jsx(Eb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(Wc,{dataKey:"date",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Kc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:re=>`${re/1e3}k`}),r.jsx(Da,{content:r.jsx(bk,{})}),r.jsx(Pd,{type:"monotone",dataKey:"amount",stroke:"var(--accent-primary)",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),r.jsxs("div",{className:xt.chartCard,children:[r.jsx("h3",{children:"Payment Method Distribution"}),r.jsx("div",{className:xt.chartWrapper,children:r.jsx(Nw,{width:"100%",height:300,children:r.jsxs(oW,{children:[r.jsx(Vl,{data:Ie,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:Ie.map((re,ve)=>r.jsx(t0,{fill:Pz[ve%Pz.length]},`cell-${ve}`))}),r.jsx(Da,{content:r.jsx(bk,{})}),r.jsx(Ic,{verticalAlign:"bottom",height:36,formatter:re=>r.jsx("span",{style:{color:"var(--text-primary)"},children:re})})]})})})]}),r.jsxs("div",{className:xt.chartCard,children:[r.jsx("h3",{children:"Revenue by Source"}),r.jsx("div",{className:xt.chartWrapper,children:r.jsx(Nw,{width:"100%",height:300,children:r.jsxs(sW,{data:be,children:[r.jsx(Eb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(Wc,{dataKey:"name",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Kc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:re=>`${re/1e3}k`}),r.jsx(Da,{content:r.jsx(bk,{}),cursor:{fill:"var(--bg-primary)"}}),r.jsx(kd,{dataKey:"value",fill:"var(--accent-success)",radius:[4,4,0,0]})]})})})]})]}),X&&r.jsxs("div",{className:xt.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(Gk,{style:{color:"var(--text-secondary)"},size:20}),r.jsx("h3",{children:"Detailed Breakdown"})]}),X&&r.jsxs("div",{className:xt.revenueGrid,children:[r.jsxs("div",{className:xt.revenueCard,children:[r.jsx("h3",{className:xt.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:xt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Me(((H==null?void 0:H.consultation)||0)+((H==null?void 0:H.other)||0))}),r.jsx("ul",{className:xt.revenueCardList,children:Object.entries(X.reception).map(([re,ve])=>r.jsxs("li",{className:xt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]}),r.jsxs("div",{className:xt.revenueCard,children:[r.jsx("h3",{className:xt.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:xt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Me((H==null?void 0:H.pharmacy)||0)}),I<0&&r.jsxs("div",{className:`${xt.textRed} text-sm mb-2`,children:["Returns: ",Me(I)]}),r.jsx("ul",{className:xt.revenueCardList,children:Object.entries(X.pharmacy).map(([re,ve])=>r.jsxs("li",{className:xt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]}),r.jsxs("div",{className:xt.revenueCard,children:[r.jsx("h3",{className:xt.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:xt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Me((H==null?void 0:H.lab)||0)}),r.jsx("ul",{className:xt.revenueCardList,children:Object.entries(X.lab).map(([re,ve])=>r.jsxs("li",{className:xt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]}),r.jsxs("div",{className:xt.revenueCard,children:[r.jsx("h3",{className:xt.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:xt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Me((H==null?void 0:H.dental)||0)}),r.jsx("ul",{className:xt.revenueCardList,children:Object.entries(X.dental).map(([re,ve])=>r.jsxs("li",{className:xt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]})]})]}),r.jsxs("section",{className:xt.section,id:"analysis-inventory",children:[r.jsxs("div",{className:xt.sectionTitle,children:[r.jsx(Tf,{style:{color:"var(--accent-success)"},size:24}),r.jsx("h2",{children:"Inventory Movement"})]}),Y&&Y.pharmacyAnalysis.length>0?r.jsx("div",{className:xt.tableContainer,children:r.jsxs("table",{className:xt.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Stock In"}),r.jsx("th",{children:"Stock Out"}),r.jsx("th",{children:"Net Change"}),r.jsx("th",{className:xt.textRight,children:"Est. Revenue"}),r.jsx("th",{className:xt.textRight,children:"Est. Profit"})]})}),r.jsx("tbody",{children:Y.pharmacyAnalysis.map(re=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:600},children:re.name}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:re.supplier})]}),r.jsxs("td",{className:xt.textGreen,children:["+",re.quantity_in,Object.entries(re.quantity_in_by_reason).map(([ve,ce])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[ve,": ",ce]},ve))]}),r.jsxs("td",{className:xt.textRed,children:["-",re.quantity_out,Object.entries(re.quantity_out_by_reason).map(([ve,ce])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[ve,": ",ce]},ve))]}),r.jsx("td",{children:r.jsxs("span",{style:{fontWeight:600},className:re.net_change>=0?xt.textGreen:xt.textRed,children:[re.net_change>0?"+":"",re.net_change]})}),r.jsx("td",{className:xt.textRight,children:Me(re.revenue)}),r.jsx("td",{className:`${xt.textRight} ${re.profit>=0?xt.textGreen:xt.textRed}`,children:Me(re.profit)})]},re.drug_id))})]})}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No inventory movement recorded for this period."})]})]}),f&&r.jsxs("div",{className:xt.loadingContainer,style:{display:"block"},children:[r.jsxs("div",{className:xt.sectionTitle,children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:24})]}),r.jsxs("div",{className:xt.statsGrid,children:[r.jsxs("div",{className:xt.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]}),r.jsxs("div",{className:xt.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]}),r.jsxs("div",{className:xt.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsxs("div",{className:xt.chartsGrid,children:[r.jsxs("div",{className:xt.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:250})]}),r.jsxs("div",{className:xt.chartCard,children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:200,variant:"circular",style:{margin:"0 auto"}})]}),r.jsxs("div",{className:xt.chartCard,children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:250})]})]})})]})]})},Oz=()=>{const e=It(),t=us(),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(""),[f,p]=b.useState("debtHighToLow"),[g,x]=b.useState(!0),[v,j]=b.useState(""),[w,_]=b.useState(!1),[T,C]=b.useState(!1),[O,A]=b.useState(null),[P,I]=b.useState([]),[F,B]=b.useState(null),[$,L]=b.useState(""),[V,H]=b.useState(""),[te,X]=b.useState(""),[q,W]=b.useState("cash"),[ae,G]=b.useState(0),z=b.useMemo(()=>{let re=[...n];g&&(re=re.filter(ce=>parseFloat(ce.netDebt)>0));const ve=parseFloat(v);switch(!isNaN(ve)&&ve>0&&(re=re.filter(ce=>parseFloat(ce.netDebt)>=ve)),f){case"name":re.sort((ce,fe)=>ce.name.localeCompare(fe.name));break;case"debtHighToLow":re.sort((ce,fe)=>parseFloat(fe.netDebt)-parseFloat(ce.netDebt));break;case"debtLowToHigh":re.sort((ce,fe)=>parseFloat(ce.netDebt)-parseFloat(fe.netDebt));break}return re},[n,g,v,f]),le=b.useCallback(async()=>{s(!0),l(null);try{const re=c?`/api/patient-debts?search=${encodeURIComponent(c)}`:"/api/patient-debts",ve=await ue(re);if(!ve.ok)throw new Error(`Failed to fetch patients with debt: ${ve.statusText}`);const ce=await ve.json();i(ce);const fe=ce.reduce((se,Q)=>se+parseFloat(Q.netDebt||"0"),0);G(fe)}catch(re){console.error("Failed to fetch patients with debt:",re),l(re.message||"Failed to load patients with debt.")}finally{s(!1)}},[c]);b.useEffect(()=>{le()},[le]);const je=b.useCallback(async re=>{l(null);try{const ve=await ue(`/api/patient-debts/${re}/transactions`);if(!ve.ok)throw new Error(`Failed to fetch transactions: ${ve.statusText}`);const fe=(await ve.json()).map(ie=>({...ie,debt_value:parseFloat(ie.debt_value),amount_paid:parseFloat(ie.amount_paid),balance_remaining:parseFloat(ie.balance_remaining)}));I(fe);const se=await ue(`/api/patient-debts/${re}/balance`);if(!se.ok)throw new Error(`Failed to fetch balance: ${se.statusText}`);const Q=await se.json();B({patientId:Q.patientId,patientName:Q.patientName,totalDebtValue:parseFloat(Q.totalDebtValue),totalAmountPaid:parseFloat(Q.totalAmountPaid),netDebt:parseFloat(Q.netDebt)})}catch(ve){console.error("Error fetching transactions/balance:",ve),l(ve.message||"Failed to load transactions or balance.")}},[]),Y=re=>{re&&(t.prefetchQuery({queryKey:Vt.patients.context(re),queryFn:async()=>{const ve=await ue(`/api/patients/${re}/context`);if(!ve.ok)throw new Error("Failed to fetch patient context");return ve.json()},staleTime:1e3*60*5}),t.prefetchQuery({queryKey:Vt.patientDebts.balance(re),queryFn:async()=>{const ve=await ue(`/api/patient-debts/${re}/balance`);if(!ve.ok)throw new Error("Failed to fetch patient debt");return ve.json()},staleTime:1e3*60}),t.prefetchQuery({queryKey:Vt.queue.latest(re),queryFn:async()=>{const ve=await ue(`/api/queue/patient/${re}/latest`);if(!ve.ok){if(ve.status===404)return null;throw new Error("Failed to fetch queue status")}return ve.json()},staleTime:1e3*5}))},Oe=async re=>{if(re.preventDefault(),l(null),!O)return;const ve=parseFloat(V||"0");if(ve<=0){l("Payment amount must be greater than 0");return}try{const ce=await ue(`/api/patient-debts/${O.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:$,amount_paid:ve,notes:te,payment_mode:q})});if(!ce.ok){const fe=await ce.json();throw new Error(fe.message||"Failed to add payment.")}be(),je(O.id),le()}catch(ce){console.error("Error adding payment:",ce),l(ce.message||"Failed to add payment.")}},Ke=re=>{A(re),je(re.id),l(null),_(!0)},Me=()=>{_(!1),A(null),I([]),B(null)},Ie=re=>{A(re),L(new Date().toISOString().split("T")[0]),H(""),X(""),W("cash"),l(null),C(!0)},be=()=>{C(!1),A(null)};return a?r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{width:80,height:36}),r.jsx(Z,{width:200,height:32})]}),r.jsx(Z,{width:250,height:36})]}),r.jsxs("div",{className:"filter-container",children:[r.jsx(Z,{width:200,height:40}),r.jsx(Z,{width:120,height:40}),r.jsx(Z,{width:100,height:40}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Total Debt Value"}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6].map(re=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:32})})]},re))})]})})]}):r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:r.jsx(rn,{size:20})}),r.jsx("h2",{children:"Patient Debt Management"})]}),r.jsxs("div",{className:`total-debt-display ${ae>0?"debt-positive":"debt-zero"}`,children:[r.jsx(_f,{size:20}),r.jsx("strong",{children:"Total Outstanding Debt:"})," ",ae.toFixed(2)]})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("div",{className:"filter-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or phone...",value:c,onChange:re=>u(re.target.value),className:"filter-search-input"}),r.jsxs("select",{id:"sortBy",value:f,onChange:re=>p(re.target.value),className:"filter-select",title:"Sort by",children:[r.jsx("option",{value:"debtHighToLow",children:"Debt "}),r.jsx("option",{value:"debtLowToHigh",children:"Debt "}),r.jsx("option",{value:"name",children:"Name A-Z"})]}),r.jsx("input",{type:"number",id:"minDebt",value:v,onChange:re=>j(re.target.value),placeholder:"Min ",min:"0",className:"filter-number-input",title:"Minimum debt amount"}),r.jsxs("label",{className:"filter-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:re=>x(re.target.checked)}),"Outstanding only"]}),r.jsxs("span",{className:"filter-count",children:[z.length,"/",n.length]})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsxs("th",{children:[r.jsx(jr,{size:14})," Patient Name"]}),r.jsxs("th",{children:[r.jsx(cg,{size:14})," Phone"]}),r.jsxs("th",{children:[r.jsx(SD,{size:14})," Total Debt Value"]}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{className:"actions-cell",children:"Actions"})]})}),r.jsx("tbody",{children:z.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"no-results-message",children:c?"No patients found matching your search.":"No patients with outstanding debt."})}):z.map(re=>r.jsxs("tr",{onClick:()=>e(`/dashboard/edit-complaint/patient/${re.id}`),onMouseEnter:()=>Y(re.id),style:{cursor:"pointer"},title:"Click to view patient details",children:[r.jsx("td",{"data-label":"Patient Name",children:r.jsxs("div",{className:"patient-name-cell",children:[r.jsx("strong",{children:re.name}),re.age&&re.gender&&r.jsxs("span",{className:"patient-meta",children:[re.age,"y / ",re.gender]})]})}),r.jsx("td",{"data-label":"Phone",children:re.phone||"-"}),r.jsxs("td",{"data-label":"Total Debt Value",children:["",re.totalDebtValue]}),r.jsxs("td",{"data-label":"Total Paid",className:"amount-paid",children:["",re.totalAmountPaid]}),r.jsxs("td",{"data-label":"Net Debt",className:parseFloat(re.netDebt)>0?"debt-outstanding":"debt-clear",children:["",re.netDebt]}),r.jsx("td",{className:"actions-cell",onClick:ve=>ve.stopPropagation(),children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsxs("button",{onClick:()=>Ke(re),className:"action-text-button view-button",title:"View Transactions",children:[r.jsx(Vm,{size:16})," View History"]}),r.jsxs("button",{onClick:()=>Ie(re),className:"action-text-button add-payment-button",title:"Record Payment",children:[r.jsx(ks,{size:16})," Record Payment"]})]})})]},re.id))})]})}),w&&O&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsx("button",{onClick:Me,className:"modal-close-button",children:""}),r.jsxs("h3",{className:"modal-title",children:["Debt History for ",O.name]}),o&&r.jsx("div",{className:"modal-error-message",children:o}),F&&r.jsxs("div",{className:"balance-summary",children:[r.jsxs("div",{className:"balance-row",children:[r.jsx("span",{children:"Total Debt Value:"}),r.jsxs("strong",{children:["",F.totalDebtValue.toFixed(2)]})]}),r.jsxs("div",{className:"balance-row",children:[r.jsx("span",{children:"Total Amount Paid:"}),r.jsxs("strong",{className:"amount-paid",children:["",F.totalAmountPaid.toFixed(2)]})]}),r.jsxs("div",{className:"balance-row net-debt-row",children:[r.jsx("span",{children:r.jsx("strong",{children:"Net Outstanding Debt:"})}),r.jsxs("strong",{className:F.netDebt>0?"debt-outstanding":"debt-clear",children:["",F.netDebt.toFixed(2)]})]})]}),r.jsx("h4",{children:"Transaction History"}),P.length===0?r.jsx("p",{children:"No transactions recorded for this patient."}):r.jsx("div",{className:"table-responsive",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Debt Added"}),r.jsx("th",{children:"Payment Received"}),r.jsx("th",{children:"Balance After"}),r.jsx("th",{children:"Due Date"}),r.jsx("th",{children:"Payment Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:P.map(re=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(re.transaction_date).toLocaleDateString()}),r.jsx("td",{"data-label":"Debt Added",className:re.debt_value>0?"debt-added":"",children:re.debt_value>0?`+ ${re.debt_value.toFixed(2)}`:"-"}),r.jsx("td",{"data-label":"Payment Received",className:re.amount_paid>0?"payment-received":"",children:re.amount_paid>0?`- ${re.amount_paid.toFixed(2)}`:"-"}),r.jsxs("td",{"data-label":"Balance After",children:["",re.balance_remaining.toFixed(2)]}),r.jsx("td",{"data-label":"Due Date",children:re.due_date?new Date(re.due_date).toLocaleDateString():"-"}),r.jsx("td",{"data-label":"Payment Mode",children:re.payment_mode?re.payment_mode.charAt(0).toUpperCase()+re.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",children:re.notes||"-"})]},re.id))})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:()=>{Me(),Ie(O)},className:"button-submit",children:"Record Payment"}),r.jsx("button",{type:"button",onClick:Me,className:"button-cancel",children:"Close"})]})]})}),T&&O&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:be,className:"modal-close-button",children:""}),r.jsxs("h3",{className:"modal-title",children:["Record Payment for ",O.name]}),r.jsxs("div",{className:"current-debt-info",children:[r.jsx("span",{children:"Current Outstanding Debt:"}),r.jsxs("strong",{className:"debt-outstanding",children:["",O.netDebt]})]}),o&&r.jsx("div",{className:"modal-error-message",children:o}),r.jsxs("form",{onSubmit:Oe,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_date",children:"Payment Date:"}),r.jsx("input",{type:"date",id:"payment_date",value:$,onChange:re=>L(re.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"amount_paid",children:"Amount Paid ():"}),r.jsx("input",{type:"number",id:"amount_paid",value:V,onChange:re=>H(re.target.value),step:"0.01",min:"0.01",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_mode",children:"Payment Mode:"}),r.jsxs("select",{id:"payment_mode",value:q,onChange:re=>W(re.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",value:te,onChange:re=>X(re.target.value),placeholder:"e.g., Partial payment via cash"})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:be,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Record Payment"})]})]})]})})]})},f6e=()=>{const e=It(),[t,n]=b.useState([]),[i,a]=b.useState(!0),[,s]=b.useState(null),[o,l]=b.useState(!1),[c,u]=b.useState(null),[f,p]=b.useState({name:"",description:"",columns:[]}),g=async()=>{a(!0);try{const C=await ue("/api/custom-tables");if(!C.ok)throw new Error("Failed to fetch tables");const O=await C.json();n(O)}catch(C){s(C.message)}finally{a(!1)}};b.useEffect(()=>{g()},[]);const x=C=>{C?(u(C),p({name:C.name,description:C.description,columns:[...C.columns]})):(u(null),p({name:"",description:"",columns:[]})),l(!0)},v=async()=>{try{const C=c?`/api/custom-tables/${c.id}`:"/api/custom-tables";if(!(await ue(C,{method:c?"PUT":"POST",body:JSON.stringify(f)})).ok)throw new Error("Failed to save table");l(!1),g()}catch(C){alert(C.message)}},j=async C=>{if(confirm("Are you sure? This will delete all data in this table!"))try{await ue(`/api/custom-tables/${C}`,{method:"DELETE"}),g()}catch(O){alert(O.message)}},w=()=>{p(C=>({...C,columns:[...C.columns,{key:`col_${Date.now()}`,label:"New Column",type:"text"}]}))},_=(C,O,A)=>{const P=[...f.columns];P[C]={...P[C],[O]:A},O==="label"&&(P[C].key=A.toLowerCase().replace(/[^a-z0-9]/g,"_")),p(I=>({...I,columns:P}))},T=C=>{p(O=>({...O,columns:O.columns.filter((A,P)=>P!==C)}))};return r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("h1",{children:[r.jsx(Vb,{size:24})," Custom Tables Manager"]}),r.jsxs("button",{className:"primary-button",onClick:()=>x(),children:[r.jsx(hr,{size:16})," Create New Table"]})]}),i?r.jsx("p",{children:"Loading..."}):r.jsx("div",{className:"tables-grid",children:t.map(C=>r.jsxs("div",{className:"table-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:C.name}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>x(C),children:r.jsx($a,{size:16})}),r.jsx("button",{onClick:()=>j(C.id),className:"danger",children:r.jsx(Yn,{size:16})})]})]}),r.jsx("p",{className:"description",children:C.description||"No description"}),r.jsxs("div",{className:"column-preview",children:[C.columns.length," columns defined"]}),r.jsx("button",{className:"secondary-button",onClick:()=>e(`/custom-tables/${C.id}`),children:"View Data & Records"})]},C.id))}),o&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:c?"Edit Table":"Create New Table"}),r.jsx("button",{onClick:()=>l(!1),children:r.jsx(Ut,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Table Name"}),r.jsx("input",{value:f.name,onChange:C=>p({...f,name:C.target.value}),placeholder:"e.g., Equipment Log"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("textarea",{value:f.description,onChange:C=>p({...f,description:C.target.value})})]}),r.jsxs("div",{className:"columns-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h3",{children:"Columns"}),r.jsx("button",{onClick:w,className:"icon-button",children:r.jsx(hr,{size:16})})]}),f.columns.map((C,O)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{value:C.label,onChange:A=>_(O,"label",A.target.value),placeholder:"Column Name"}),r.jsxs("select",{value:C.type,onChange:A=>_(O,"type",A.target.value),children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>T(O),className:"danger",children:r.jsx(Yn,{size:14})})]},O))]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:v,className:"primary-button",children:"Save Table"})})]})})]})},p6e=()=>{const{id:e}=Ii(),t=It(),[n,i]=b.useState(null),[a,s]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),[f,p]=b.useState(!1),[g,x]=b.useState(!1),[v,j]=b.useState(null),[w,_]=b.useState({});b.useEffect(()=>{e&&T()},[e]);const T=async()=>{l(!0);try{const I=await ue(`/api/custom-tables/${e}`);if(!I.ok)throw new Error("Failed to fetch table definition");const F=await I.json();i(F);const B=await ue(`/api/custom-tables/${e}/records`);if(!B.ok)throw new Error("Failed to fetch records");const $=await B.json();s($)}catch(I){u(I.message)}finally{l(!1)}},C=I=>{I?(j(I),_({...I.data})):(j(null),_({})),x(!0)},O=async()=>{try{const I=v?`/api/custom-tables/records/${v.id}`:`/api/custom-tables/${e}/records`;if(!(await ue(I,{method:v?"PUT":"POST",body:JSON.stringify({data:w})})).ok)throw new Error("Failed to save record");x(!1),T()}catch(I){alert(I.message)}},A=async I=>{if(confirm("Delete this record?"))try{await ue(`/api/custom-tables/records/${I}`,{method:"DELETE"}),T()}catch(F){alert(F.message)}},P=I=>{const F=w[I.key]||"";switch(I.type){case"boolean":return r.jsxs("select",{value:F,onChange:B=>_({...w,[I.key]:B.target.value}),children:[r.jsx("option",{value:"",children:"Select..."}),r.jsx("option",{value:"true",children:"Yes"}),r.jsx("option",{value:"false",children:"No"})]});case"number":return r.jsx("input",{type:"number",value:F,onChange:B=>_({...w,[I.key]:B.target.value})});case"date":return r.jsx("input",{type:"date",value:F,onChange:B=>_({...w,[I.key]:B.target.value})});default:return r.jsx("input",{type:"text",value:F,onChange:B=>_({...w,[I.key]:B.target.value})})}};return o?r.jsx("div",{className:"p-4",children:"Loading..."}):c||!n?r.jsxs("div",{className:"p-4 error",children:["Error: ",c||"Table not found"]}):r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[r.jsx("button",{onClick:()=>t("/custom-tables"),className:"icon-button",children:r.jsx(rn,{size:20})}),r.jsx("h1",{children:n.name})]}),r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>p(!1),className:`view-mode-btn ${f?"":"active"}`,title:"List View",children:[r.jsx(Ub,{size:18})," List"]}),r.jsxs("button",{onClick:()=>p(!0),className:`view-mode-btn ${f?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(Cf,{size:18})," Excel"]})]}),r.jsxs("button",{className:"primary-button",onClick:()=>C(),children:[r.jsx(hr,{size:16})," Add Record"]})]}),r.jsx("div",{className:"table-wrapper",style:{background:"var(--bg-card)",borderRadius:"12px",padding:"20px",overflowX:"auto"},children:f?r.jsx(Jb,{columns:n.columns.map(I=>({key:I.key,label:I.label,editable:!0,type:I.type})),data:a.map(I=>({...I.data,id:I.id})),editable:!0,showRowNumbers:!0,title:n.name,onSave:async I=>{const F=I.map(async B=>{const $=a.find(L=>L.id===B.id);if($&&JSON.stringify($.data)!==JSON.stringify(B)){const{id:L,...V}=B;if(JSON.stringify($.data)!==JSON.stringify(V))return ue(`/api/custom-tables/records/${B.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:V})})}});try{await Promise.all(F),T()}catch(B){alert("Error saving changes"),console.error(B)}}}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[n.columns.map(I=>r.jsx("th",{style:{textAlign:"left",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:I.label},I.key)),r.jsx("th",{style:{width:"100px",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:"Actions"})]})}),r.jsx("tbody",{children:a.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:n.columns.length+1,style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"No records yet"})}):a.map(I=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.columns.map(F=>r.jsx("td",{style:{padding:"12px"},children:F.type==="boolean"?I.data[F.key]==="true"?"Yes":"No":String(I.data[F.key]||"-")},F.key)),r.jsx("td",{style:{padding:"12px"},children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>C(I),className:"icon-button",children:r.jsx($a,{size:16})}),r.jsx("button",{onClick:()=>A(I.id),className:"icon-button",style:{color:"#dc3545"},children:r.jsx(Yn,{size:16})})]})})]},I.id))})]})}),g&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:v?"Edit Record":"Add New Record"}),r.jsx("button",{onClick:()=>x(!1),children:r.jsx(Ut,{size:20})})]}),r.jsx("div",{className:"modal-body",children:n.columns.map(I=>r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:I.label}),P(I)]},I.key))}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:O,className:"primary-button",children:"Save Record"})})]})})]})},m6e=()=>{const[e,t]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(""),o=It();b.useEffect(()=>{l()},[]);const l=async()=>{try{const p=await ue("/api/dashboards");if(p.ok){const g=await p.json();t(g)}}catch(p){console.error("Error fetching dashboards:",p)}finally{i(!1)}},c=async(p,g)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this dashboard?"))try{await ue(`/api/dashboards/${g}`,{method:"DELETE"}),t(e.filter(x=>x.id!==g))}catch(x){console.error("Error deleting dashboard:",x)}},u=p=>{try{const g=new Date(p);return g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:g.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}},f=e.filter(p=>p.name.toLowerCase().includes(a.toLowerCase())||p.description&&p.description.toLowerCase().includes(a.toLowerCase()));return r.jsxs("div",{className:"custom-dashboards-container",children:[r.jsxs("div",{className:"cdp-header",children:[r.jsxs("div",{className:"cdp-title-row",children:[r.jsxs("div",{className:"cdp-title",children:[r.jsx("div",{className:"cdp-icon",children:r.jsx(Cf,{size:20})}),r.jsxs("div",{children:[r.jsx("h1",{children:"Custom Dashboards"}),r.jsxs("span",{className:"cdp-subtitle",children:[e.length," dashboard",e.length!==1?"s":""]})]})]}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(hr,{size:16}),r.jsx("span",{className:"cdp-btn-text",children:"Create"})]})]}),e.length>0&&r.jsxs("div",{className:"cdp-search",children:[r.jsx(Wn,{size:16}),r.jsx("input",{type:"text",placeholder:"Search dashboards...",value:a,onChange:p=>s(p.target.value)})]})]}),r.jsx("div",{className:"cdp-content",children:n?r.jsx("div",{className:"cdp-grid",children:[1,2,3,4,5,6].map(p=>r.jsxs("div",{className:"cdp-card",style:{cursor:"default"},children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx(Z,{width:18,height:18,variant:"circular"}),r.jsx(Z,{width:80,height:12})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx(Z,{width:"70%",height:24,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"90%",height:16})]}),r.jsxs("div",{className:"cdp-card-footer",style:{borderTop:"none"},children:[r.jsx(Z,{width:60,height:32}),r.jsx(Z,{width:60,height:32}),r.jsx(Z,{width:32,height:32})]})]},p))}):f.length===0?r.jsxs("div",{className:"cdp-empty",children:[r.jsx("div",{className:"cdp-empty-icon",children:r.jsx(lg,{size:48})}),a?r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No results found"}),r.jsx("p",{children:"Try a different search term"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No dashboards yet"}),r.jsx("p",{children:"Create your first custom dashboard to get started"}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(hr,{size:16})," Create Dashboard"]})]})]}):r.jsx("div",{className:"cdp-grid",children:f.map(p=>r.jsxs("div",{className:"cdp-card",onClick:()=>o(`/dashboards/${p.id}`),children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx("div",{className:"cdp-card-icon",children:r.jsx(lg,{size:18})}),r.jsx("div",{className:"cdp-card-meta",children:p.created_at&&r.jsxs("span",{className:"cdp-card-date",children:[r.jsx(vi,{size:12}),u(p.created_at)]})})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx("h3",{children:p.name}),r.jsx("p",{children:p.description||"No description"})]}),r.jsxs("div",{className:"cdp-card-footer",children:[r.jsxs("button",{className:"cdp-action-btn cdp-view-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}`)},children:[r.jsx(Vm,{size:14}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{className:"cdp-action-btn cdp-edit-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}/edit`)},children:[r.jsx($a,{size:14}),r.jsx("span",{children:"Edit"})]}),r.jsx("button",{className:"cdp-action-btn cdp-delete-btn",onClick:g=>c(g,p.id),children:r.jsx(Yn,{size:14})})]})]},p.id))})})]})},g6e=({isOpen:e,onClose:t,onConfirm:n})=>{const[i,a]=b.useState({}),[s,o]=b.useState(""),[l,c]=b.useState(""),[u,f]=b.useState([]),[p,g]=b.useState([]),[x,v]=b.useState(!1);b.useEffect(()=>{e&&j()},[e]);const j=async()=>{v(!0);try{const I=await ue("/api/dashboards/table-relations");if(I.ok){const F=await I.json();a(F);const B=Object.keys(F);B.length>0&&o(B[0])}}catch(I){console.error("Error fetching table relations:",I)}finally{v(!1)}},w=I=>{o(I),c(""),f([]),g([])},_=I=>{c(I),g([])},T=(I,F,B)=>{I.includes(B)?F(I.filter($=>$!==B)):F([...I,B])},C=()=>{var I,F;if(!s||!l){alert("Please select both primary and related tables");return}if(u.length===0&&p.length===0){alert("Please select at least one column");return}n({primary:s,related:l,primaryColumns:u,relatedColumns:p,primaryLabel:((I=i[s])==null?void 0:I.label)||s,relatedLabel:((F=i[l])==null?void 0:F.label)||l}),t()};if(!e)return null;const O=i[s],A=(O==null?void 0:O.relations)||{},P=i[l];return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{children:[r.jsx(Bq,{size:18})," Join Tables Builder"]}),r.jsx("button",{onClick:t,className:"close-button",children:r.jsx(Ut,{size:20})})]}),x?r.jsx("div",{children:"Loading tables..."}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",padding:"20px"},children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 1:"})," Select Primary Table"]}),r.jsx("select",{value:s,onChange:I=>w(I.target.value),style:{width:"100%",padding:"8px"},children:Object.entries(i).filter(([I,F])=>Object.keys(F.relations).length>0).map(([I,F])=>r.jsx("option",{value:I,children:F.label},I))})]}),s&&Object.keys(A).length>0&&r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 2:"})," Select Related Table"]}),r.jsxs("select",{value:l,onChange:I=>_(I.target.value),style:{width:"100%",padding:"8px"},children:[r.jsx("option",{value:"",children:"-- Select --"}),Object.entries(A).map(([I,F])=>r.jsxs("option",{value:I,children:[F.label," (via ",F.foreignKey,")"]},I))]})]}),s&&O&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",O.label,":"]})}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px"},children:O.columns.map(I=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",background:u.includes(I)?"#e0f0ff":"#f0f0f0",padding:"4px 8px",borderRadius:"4px"},children:[r.jsx("input",{type:"checkbox",checked:u.includes(I),onChange:()=>T(u,f,I)}),I]},I))})]}),l&&P&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",P.label,":"]})}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px"},children:P.columns.map(I=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",background:p.includes(I)?"#e0ffe0":"#f0f0f0",padding:"4px 8px",borderRadius:"4px"},children:[r.jsx("input",{type:"checkbox",checked:p.includes(I),onChange:()=>T(p,g,I)}),I]},I))})]}),u.length>0||p.length>0?r.jsxs("div",{style:{background:"#f8f9fa",padding:"10px",borderRadius:"4px"},children:[r.jsx("strong",{children:"Preview Columns:"}),r.jsxs("div",{style:{marginTop:"5px",fontSize:"0.9em"},children:[u.map(I=>r.jsxs("span",{style:{marginRight:"8px",color:"#0066cc"},children:[O==null?void 0:O.label,".",I]},I)),p.map(I=>r.jsxs("span",{style:{marginRight:"8px",color:"#009900"},children:[P==null?void 0:P.label,".",I]},I))]})]}):null]}),r.jsxs("div",{className:"modal-actions",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsx("button",{onClick:t,children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:C,disabled:!l,children:"Create Joined Widget"})]})]})})},y6e=({isOpen:e,onClose:t,onCreated:n})=>{const[i,a]=b.useState(""),[s,o]=b.useState(""),[l,c]=b.useState([{key:"name",label:"Name",type:"text"}]),[u,f]=b.useState(!1),p=()=>{c([...l,{key:"",label:"",type:"text"}])},g=j=>{c(l.filter((w,_)=>_!==j))},x=(j,w,_)=>{const T=[...l];T[j]={...T[j],[w]:_},w==="label"&&!T[j].key&&(T[j].key=_.toLowerCase().replace(/\s+/g,"_")),c(T)},v=async()=>{if(!i.trim()){alert("Table name is required");return}if(l.length===0||l.some(j=>!j.key||!j.label)){alert("All columns must have a key and label");return}f(!0);try{(await ue("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,description:s,columns:l})})).ok?(n(),t(),a(""),o(""),c([{key:"name",label:"Name",type:"text"}])):alert("Failed to create table")}catch(j){console.error("Error creating table:",j),alert("Error creating table")}finally{f(!1)}};return e?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content create-table-modal-content",children:[r.jsxs("div",{className:"create-table-header",children:[r.jsxs("h3",{children:[r.jsx(Vb,{size:20})," Create Custom Table"]}),r.jsx("button",{onClick:t,className:"close-btn",children:r.jsx(Ut,{size:20})})]}),r.jsxs("div",{className:"form-content",children:[r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Table Name *"}),r.jsx("input",{type:"text",value:i,onChange:j=>a(j.target.value),placeholder:"e.g., Patient Notes, Appointments",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:s,onChange:j=>o(j.target.value),placeholder:"Optional description",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Columns"}),r.jsx("div",{className:"columns-container",children:l.map((j,w)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{type:"text",value:j.label,onChange:_=>x(w,"label",_.target.value),placeholder:"Column label",className:"modal-input column-label-input"}),r.jsx("input",{type:"text",value:j.key,onChange:_=>x(w,"key",_.target.value),placeholder:"key",className:"modal-input column-key-input"}),r.jsxs("select",{value:j.type,onChange:_=>x(w,"type",_.target.value),className:"column-type-select",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>g(w),className:"remove-col-btn",disabled:l.length<=1,children:r.jsx(Yn,{size:16})})]},w))}),r.jsxs("button",{onClick:p,className:"add-col-btn",children:[r.jsx(hr,{size:14})," Add Column"]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:t,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:v,disabled:u,className:"create-button",children:u?"Creating...":"Create Table"})]})]})}):null},Dz=()=>{const{id:e}=Ii(),t=It(),n=!!e,[i,a]=b.useState(""),[s,o]=b.useState(""),[l,c]=b.useState([]),[u,f]=b.useState(!1),[p,g]=b.useState([]),[x,v]=b.useState(!1),[j,w]=b.useState("stat"),[_,T]=b.useState(""),[C,O]=b.useState("api:patients"),[A,P]=b.useState([]),[I,F]=b.useState(!1),[B,$]=b.useState(!1);b.useEffect(()=>{L(),n&&V()},[e]);const L=async()=>{try{const G=await ue("/api/dashboards/data-sources");if(G.ok){const z=await G.json();g(z),z.length>0&&O(z[0].key)}}catch(G){console.error("Error fetching data sources:",G)}},V=async()=>{try{const G=await ue(`/api/dashboards/${e}`);if(G.ok){const z=await G.json();a(z.name),o(z.description),c(z.widgets||[])}}catch(G){console.error("Error fetching dashboard:",G)}},H=async()=>{if(!i.trim())return alert("Name is required");f(!0);try{const G={name:i,description:s,widgets:l},z=n?`/api/dashboards/${e}`:"/api/dashboards";(await ue(z,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)})).ok?t("/dashboards"):alert("Failed to save dashboard")}catch(G){console.error("Error saving dashboard:",G)}finally{f(!1)}},te=()=>{var le;const G=p.find(je=>je.key===C),z={id:Date.now().toString(),type:j,title:_||(G==null?void 0:G.label)||"New Widget",dataSource:C,config:{columns:A.length>0?A:((le=G==null?void 0:G.columns)==null?void 0:le.slice(0,3))||[]}};c([...l,z]),v(!1),T(""),P([])},X=G=>{c(l.filter(z=>z.id!==G))},q=G=>{O(G),P([])},W=p.find(G=>G.key===C),ae=G=>{const z={id:Date.now().toString(),type:"table",title:`${G.primaryLabel} + ${G.relatedLabel}`,dataSource:`dynamic:${G.primary}:${G.related}`,config:{primaryColumns:G.primaryColumns,relatedColumns:G.relatedColumns}};c([...l,z])};return r.jsxs("div",{className:"dashboard-builder-container",children:[r.jsxs("div",{className:"builder-header",children:[r.jsxs("button",{className:"back-btn",onClick:()=>t("/dashboards"),children:[r.jsx(rn,{size:16})," Back"]}),r.jsxs("div",{className:"title-inputs",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:i,onChange:G=>a(G.target.value),className:"dashboard-name-input"}),r.jsx("input",{type:"text",placeholder:"Description (Optional)",value:s,onChange:G=>o(G.target.value),className:"dashboard-desc-input"})]}),r.jsxs("button",{className:"primary-button",onClick:H,disabled:u,children:[r.jsx(io,{size:16})," ",u?"Saving...":"Save Dashboard"]})]}),r.jsx("div",{className:"widgets-area",children:l.length===0?r.jsxs("div",{className:"empty-canvas",children:[r.jsx("p",{children:"Canvas is empty. Add a widget to start."}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"},children:[r.jsxs("button",{onClick:()=>v(!0),className:"add-widget-btn",children:[r.jsx(hr,{size:16})," Add Widget"]}),r.jsxs("button",{onClick:()=>F(!0),className:"add-widget-btn",style:{background:"#2196F3"},children:[r.jsx(Bq,{size:16})," Create Joined Widget"]}),r.jsxs("button",{onClick:()=>$(!0),className:"add-widget-btn",style:{background:"#4CAF50"},children:[r.jsx(Vb,{size:16})," Create Custom Table"]})]})]}):r.jsxs("div",{className:"widgets-grid",children:[l.map(G=>r.jsxs("div",{className:"widget-wrapper",children:[r.jsx("div",{className:"widget-actions-overlay",children:r.jsx("button",{onClick:()=>X(G.id),className:"remove-widget-btn",children:r.jsx(Yn,{size:14})})}),r.jsx(dI,{widget:G})]},G.id)),r.jsxs("div",{className:"add-more-card",onClick:()=>v(!0),children:[r.jsx(hr,{size:24}),r.jsx("span",{children:"Add Widget"})]})]})}),x&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("h3",{children:"Add Widget"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title (Optional)"}),r.jsx("input",{type:"text",placeholder:"Leave blank for auto-title",value:_,onChange:G=>T(G.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type"}),r.jsxs("select",{value:j,onChange:G=>w(G.target.value),children:[r.jsx("option",{value:"stat",children:"Statistic (Count)"}),r.jsx("option",{value:"table",children:"Table (List)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Data Source"}),r.jsxs("select",{value:C,onChange:G=>q(G.target.value),children:[r.jsx("optgroup",{label:"Single Tables",children:p.filter(G=>!G.isCustom&&!G.isJoin).map(G=>r.jsx("option",{value:G.key,children:G.label},G.key))}),p.some(G=>G.isJoin)&&r.jsx("optgroup",{label:"Joined Tables (Multi-Table)",children:p.filter(G=>G.isJoin).map(G=>r.jsx("option",{value:G.key,children:G.label},G.key))}),p.some(G=>G.isCustom)&&r.jsx("optgroup",{label:"Custom Tables",children:p.filter(G=>G.isCustom).map(G=>r.jsx("option",{value:G.key,children:G.label},G.key))})]}),W&&r.jsx("small",{style:{color:"#666"},children:W.description})]}),j==="table"&&(W==null?void 0:W.columns)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Columns to Display (select multiple)"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:W.columns.map(G=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:A.includes(G),onChange:z=>{z.target.checked?P([...A,G]):P(A.filter(le=>le!==G))}}),G]},G))})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>v(!1),children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:te,children:"Add"})]})]})}),r.jsx(g6e,{isOpen:I,onClose:()=>F(!1),onConfirm:ae}),r.jsx(y6e,{isOpen:B,onClose:()=>$(!1),onCreated:()=>L()})]})},x6e=()=>{const{id:e}=Ii(),t=It(),[n,i]=b.useState(null);if(b.useEffect(()=>{(async()=>{try{const o=await ue(`/api/dashboards/${e}`);if(o.ok){const l=await o.json();i(l)}}catch(o){console.error("Error fetching dashboard:",o)}})()},[e]),!n)return r.jsx("div",{className:"temp-dash-empty",children:"Loading..."});const a=n.widgets||[];return r.jsxs("div",{className:"saved-dash-container",children:[r.jsxs("div",{className:"saved-dash-header",children:[r.jsxs("div",{className:"saved-dash-title-group",children:[r.jsx("button",{className:"saved-dash-back-btn",onClick:()=>t("/dashboards"),children:r.jsx(rn,{size:16})}),r.jsx("div",{className:"saved-dash-icon",children:r.jsx(lg,{size:16})}),r.jsxs("div",{className:"saved-dash-title-text",children:[r.jsx("h2",{children:n.name}),n.description&&r.jsx("span",{className:"saved-dash-description",children:n.description})]})]}),r.jsx("div",{className:"saved-dash-actions",children:r.jsxs("button",{className:"saved-dash-edit-btn",onClick:()=>t(`/dashboards/${e}/edit`),children:[r.jsx($a,{size:12})," Edit"]})})]}),r.jsx("div",{className:"saved-dash-body",children:a.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets in this dashboard. Click Edit to add some!"}):r.jsx("div",{className:"temp-dash-grid",children:a.map((s,o)=>r.jsx(dI,{widget:s,autoHideEmptyColumns:!0},s.id||`view-widget-${o}`))})})]})},jk=["#8b5cf6","#3b82f6","#06b6d4","#10b981","#22c55e","#f59e0b","#f97316","#ef4444","#ec4899","#a855f7"],v6e=()=>{const[e,t]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null),[o,l]=b.useState(null),[c,u]=b.useState(!1),[f,p]=b.useState({name:"",key:"",color:"#6b7280",description:""}),[g,x]=b.useState(!1),v=async()=>{i(!0),s(null);try{const B=await ue("/api/clinic-roles");if(B.ok){const $=await B.json();t($)}else s("Failed to load roles")}catch{s("Failed to connect to server")}finally{i(!1)}};b.useEffect(()=>{v()},[]);const j=B=>B.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),w=B=>{p($=>({...$,name:B,key:o?$.key:j(B)}))},_=async()=>{if(f.name.trim()){x(!0);try{const B=await ue("/api/clinic-roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),key:f.key||j(f.name),color:f.color,description:f.description.trim()||null})});if(B.ok)await v(),u(!1),p({name:"",key:"",color:"#6b7280",description:""});else{const $=await B.json();s($.message||"Failed to create role")}}catch{s("Failed to create role")}finally{x(!1)}}},T=async()=>{if(!(!o||!f.name.trim())){x(!0);try{const B=await ue(`/api/clinic-roles/${o.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),color:f.color,description:f.description.trim()||null})});if(B.ok)await v(),l(null),p({name:"",key:"",color:"#6b7280",description:""});else{const $=await B.json();s($.message||"Failed to update role")}}catch{s("Failed to update role")}finally{x(!1)}}},C=async B=>{if(!B.isSystem&&window.confirm(`Delete role "${B.name}"? This cannot be undone.`))try{const $=await ue(`/api/clinic-roles/${B.id}`,{method:"DELETE"});if($.ok)await v();else{const L=await $.json();s(L.message||"Failed to delete role")}}catch{s("Failed to delete role")}},O=B=>{l(B),p({name:B.name,key:B.key,color:B.color,description:B.description||""}),u(!1)},A=()=>{u(!0),l(null),p({name:"",key:"",color:jk[Math.floor(Math.random()*jk.length)],description:""})},P=()=>{u(!1),l(null),p({name:"",key:"",color:"#6b7280",description:""})},I=e.filter(B=>B.isSystem),F=e.filter(B=>!B.isSystem);return r.jsxs("div",{className:"role-management-page",children:[r.jsxs("div",{className:"role-management-header",children:[r.jsxs("div",{className:"header-title",children:[r.jsx(ug,{size:28}),r.jsxs("div",{children:[r.jsx("h1",{children:"Role Management"}),r.jsx("p",{children:"Manage custom roles for your clinic staff"})]})]}),r.jsxs("button",{className:"create-role-btn",onClick:A,disabled:c,children:[r.jsx(hr,{size:18}),"Create Custom Role"]})]}),a&&r.jsxs("div",{className:"role-error-banner",children:[r.jsx(Zr,{size:18}),a,r.jsx("button",{onClick:()=>s(null),children:r.jsx(Ut,{size:16})})]}),(c||o)&&r.jsxs("div",{className:"role-form-card",children:[r.jsx("h3",{children:o?"Edit Role":"Create New Role"}),r.jsxs("div",{className:"role-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Name *"}),r.jsx("input",{type:"text",value:f.name,onChange:B=>w(B.target.value),placeholder:"e.g., Senior Doctor, Ward Nurse"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Key"}),r.jsx("input",{type:"text",value:f.key,onChange:B=>p($=>({...$,key:B.target.value})),placeholder:"auto-generated",disabled:!!o})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:f.description,onChange:B=>p($=>({...$,description:B.target.value})),placeholder:"Brief description of role responsibilities"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx(SZ,{size:14}),"Color"]}),r.jsxs("div",{className:"color-picker",children:[jk.map(B=>r.jsx("button",{className:`color-option ${f.color===B?"selected":""}`,style:{background:B},onClick:()=>p($=>({...$,color:B}))},B)),r.jsx("input",{type:"color",value:f.color,onChange:B=>p($=>({...$,color:B.target.value})),className:"custom-color-input"})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"cancel-btn",onClick:P,children:"Cancel"}),r.jsxs("button",{className:"save-btn",onClick:o?T:_,disabled:g||!f.name.trim(),children:[r.jsx(Ml,{size:16}),g?"Saving...":o?"Update Role":"Create Role"]})]})]})]}),r.jsxs("div",{className:"roles-container",children:[r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"System Roles"}),r.jsx("p",{className:"section-desc",children:"Default roles - can be customized but not deleted"}),n?r.jsx("div",{className:"roles-grid",children:[1,2,3].map(B=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",style:{marginBottom:"10px"},children:[r.jsx(Z,{variant:"circular",width:12,height:12,style:{marginRight:"8px"}}),r.jsx(Z,{width:100,height:20})]}),r.jsx(Z,{width:80,height:16,style:{marginBottom:"10px"}}),r.jsx(Z,{width:"100%",height:20}),r.jsx("div",{className:"role-actions",style:{marginTop:"15px"},children:r.jsx(Z,{width:60,height:24})})]},B))}):r.jsx("div",{className:"roles-grid",children:I.map(B=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:B.color}}),r.jsx("span",{className:"role-name",children:B.name}),r.jsx("span",{className:"system-badge",children:"System"})]}),r.jsx("div",{className:"role-key",children:B.key}),B.description&&r.jsx("div",{className:"role-description",children:B.description}),r.jsx("div",{className:"role-actions",children:r.jsxs("button",{className:"edit-role-btn",onClick:()=>O(B),children:[r.jsx(Tc,{size:14}),"Edit"]})})]},B.id))})]}),r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"Custom Roles"}),r.jsx("p",{className:"section-desc",children:"Roles created for your clinic"}),F.length===0?r.jsxs("div",{className:"no-roles",children:[r.jsx(ug,{size:32}),r.jsx("p",{children:"No custom roles created yet"}),r.jsxs("button",{onClick:A,children:[r.jsx(hr,{size:16}),"Create your first custom role"]})]}):r.jsx("div",{className:"roles-grid",children:F.map(B=>r.jsxs("div",{className:"role-card custom",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:B.color}}),r.jsx("span",{className:"role-name",children:B.name})]}),r.jsx("div",{className:"role-key",children:B.key}),B.description&&r.jsx("div",{className:"role-description",children:B.description}),r.jsxs("div",{className:"role-actions",children:[r.jsxs("button",{className:"edit-role-btn",onClick:()=>O(B),children:[r.jsx(Tc,{size:14}),"Edit"]}),r.jsxs("button",{className:"delete-role-btn",onClick:()=>C(B),children:[r.jsx(Yn,{size:14}),"Delete"]})]})]},B.id))})]})]})]})},b6e="_container_16815_47",j6e="_progressBar_16815_67",w6e="_sidebar_16815_97",S6e="_sidebarTitle_16815_161",N6e="_searchBox_16815_193",_6e="_searchInput_16815_203",C6e="_searchIcon_16815_237",T6e="_navSection_16815_255",A6e="_navSectionTitle_16815_263",E6e="_navLink_16815_287",k6e="_activeNavLink_16815_367",P6e="_navLinkIcon_16815_387",O6e="_content_16815_409",D6e="_header_16815_425",M6e="_headerContent_16815_493",I6e="_title_16815_503",R6e="_subtitle_16815_563",L6e="_headerBadges_16815_575",F6e="_headerBadge_16815_575",$6e="_section_16815_625",B6e="_sectionTitle_16815_665",z6e="_sectionTitleIcon_16815_689",q6e="_sectionContent_16815_713",U6e="_featureList_16815_751",V6e="_featureItem_16815_767",H6e="_featureIcon_16815_799",G6e="_featureText_16815_813",W6e="_infoBox_16815_839",K6e="_infoBoxTitle_16815_881",Y6e="_infoBoxContent_16815_903",Q6e="_workflowList_16815_917",X6e="_kbd_16815_959",J6e="_moduleLinkBtn_16815_1179",Z6e="_uiGrid_16815_1231",eFe="_uiCard_16815_1245",tFe="_uiLabel_16815_1277",nFe="_demoBtn_16815_1301",rFe="_demoBtnPrimary_16815_1323",iFe="_demoBtnSecondary_16815_1335",aFe="_demoBtnDanger_16815_1347",sFe="_demoBadge_16815_1361",oFe="_demoBadgeSuccess_16815_1385",lFe="_demoBadgeWarning_16815_1397",cFe="_demoBadgeError_16815_1409",uFe="_iconRow_16815_1421",dFe="_faqList_16815_1455",hFe="_faqItem_16815_1469",fFe="_faqQuestion_16815_1493",pFe="_faqIcon_16815_1523",mFe="_faqIconOpen_16815_1533",gFe="_faqAnswer_16815_1541",yFe="_footer_16815_1587",xFe="_footerText_16815_1605",vFe="_footerBrand_16815_1617",bFe="_floatingParticles_16815_1641",jFe="_particle_16815_1663",wFe="_headerLabel_16815_1817",SFe="_waveEmoji_16815_1845",NFe="_headerActions_16815_1857",_Fe="_headerBtn_16815_1871",CFe="_headerBtnSecondary_16815_1913",TFe="_statsSection_16815_1963",AFe="_statCard_16815_1977",EFe="_statIcon_16815_2009",kFe="_statValue_16815_2039",PFe="_statLabel_16815_2053",OFe="_quickTipsSection_16815_2073",DFe="_quickTipsHeader_16815_2089",MFe="_tipNav_16815_2123",IFe="_tipCard_16815_2185",RFe="_tipIcon_16815_2231",LFe="_tipContent_16815_2251",FFe="_tipIndicators_16815_2279",$Fe="_tipIndicator_16815_2279",BFe="_tipIndicatorActive_16815_2323",zFe="_shortcutsGrid_16815_2343",qFe="_shortcutCard_16815_2357",UFe="_shortcutCardActive_16815_2383",VFe="_shortcutKeys_16815_2397",HFe="_kbdPlus_16815_2411",GFe="_kbdActive_16815_2423",WFe="_shortcutInfo_16815_2437",KFe="_shortcutAction_16815_2445",YFe="_shortcutDesc_16815_2459",QFe="_fabContainer_16815_3077",XFe="_fabButton_16815_3099",JFe="_fabContent_16815_3141",ZFe="_contactRow_16815_3195",e5e="_contactIcon_16815_3213",t5e="_copyBtn_16815_3223",Ee={container:b6e,progressBar:j6e,sidebar:w6e,sidebarTitle:S6e,searchBox:N6e,searchInput:_6e,searchIcon:C6e,navSection:T6e,navSectionTitle:A6e,navLink:E6e,activeNavLink:k6e,navLinkIcon:P6e,content:O6e,header:D6e,headerContent:M6e,title:I6e,subtitle:R6e,headerBadges:L6e,headerBadge:F6e,section:$6e,sectionTitle:B6e,sectionTitleIcon:z6e,sectionContent:q6e,featureList:U6e,featureItem:V6e,featureIcon:H6e,featureText:G6e,infoBox:W6e,infoBoxTitle:K6e,infoBoxContent:Y6e,workflowList:Q6e,kbd:X6e,moduleLinkBtn:J6e,uiGrid:Z6e,uiCard:eFe,uiLabel:tFe,demoBtn:nFe,demoBtnPrimary:rFe,demoBtnSecondary:iFe,demoBtnDanger:aFe,demoBadge:sFe,demoBadgeSuccess:oFe,demoBadgeWarning:lFe,demoBadgeError:cFe,iconRow:uFe,faqList:dFe,faqItem:hFe,faqQuestion:fFe,faqIcon:pFe,faqIconOpen:mFe,faqAnswer:gFe,footer:yFe,footerText:xFe,footerBrand:vFe,floatingParticles:bFe,particle:jFe,headerLabel:wFe,waveEmoji:SFe,headerActions:NFe,headerBtn:_Fe,headerBtnSecondary:CFe,statsSection:TFe,statCard:AFe,statIcon:EFe,statValue:kFe,statLabel:PFe,quickTipsSection:OFe,quickTipsHeader:DFe,tipNav:MFe,tipCard:IFe,tipIcon:RFe,tipContent:LFe,tipIndicators:FFe,tipIndicator:$Fe,tipIndicatorActive:BFe,shortcutsGrid:zFe,shortcutCard:qFe,shortcutCardActive:UFe,shortcutKeys:VFe,kbdPlus:HFe,kbdActive:GFe,shortcutInfo:WFe,shortcutAction:KFe,shortcutDesc:YFe,fabContainer:QFe,fabButton:XFe,fabContent:JFe,contactRow:ZFe,contactIcon:e5e,copyBtn:t5e},n5e=(e,t=2e3)=>{const[n,i]=b.useState(0),[a,s]=b.useState(!1),o=b.useRef(null);return b.useEffect(()=>{const l=new IntersectionObserver(([c])=>{c.isIntersecting&&s(!0)},{threshold:.3});return o.current&&l.observe(o.current),()=>l.disconnect()},[]),b.useEffect(()=>{if(!a)return;let l=null;const c=u=>{l||(l=u);const f=Math.min((u-l)/t,1);i(Math.floor(f*e)),f<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[a,e,t]),{count:n,ref:o}},r5e=()=>{const[e,t]=b.useState("getting-started"),[n,i]=b.useState(""),[a,s]=b.useState(0),[o,l]=b.useState(null),[c,u]=b.useState(!1),[f,p]=b.useState(0),[g,x]=b.useState(null),v=b.useRef(null),j=b.useCallback(()=>{const F=document.documentElement.scrollHeight-window.innerHeight,B=window.scrollY/F*100;s(Math.min(B,100))},[]);b.useEffect(()=>{const F=()=>{const B=document.querySelectorAll("section[id]");let $="";B.forEach(L=>{const V=L.offsetTop;window.scrollY>=V-120&&($=L.getAttribute("id")||"")}),$&&t($),j()};return window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F)},[j]);const w=F=>{const B=document.getElementById(F);B&&window.scrollTo({top:B.offsetTop-80,behavior:"smooth"})},_={navigation:[{id:"getting-started",label:"Getting Started",icon:hR},{id:"clinical-workflow",label:"Doctor Workflow",icon:Pw},{id:"financial-mgmt",label:"Financial Control",icon:_f},{id:"analytics",label:"Analytics & Insights",icon:Gk},{id:"pharmacy-inventory",label:"Pharmacy & Stock",icon:Tf},{id:"advanced-lab",label:"Advanced Lab Mgmt",icon:os},{id:"ipd-admission",label:"IPD & Admission",icon:dg},{id:"custom-data",label:"System Customization",icon:Cf},{id:"admin",label:"Administration",icon:md}],reference:[{id:"ui-reference",label:"Interface & UI",icon:Vm},{id:"troubleshooting",label:"Troubleshooting",icon:kj}]},T=F=>n?F.filter(B=>B.label.toLowerCase().includes(n.toLowerCase())):F,C=({id:F,label:B,Icon:$})=>r.jsxs("a",{className:`${Ee.navLink} ${e===F?Ee.activeNavLink:""}`,onClick:()=>w(F),children:[r.jsx($,{className:Ee.navLinkIcon,size:18}),B]}),O=[{question:"Bill not printing correctly?",answer:"Ensure pop-ups are not blocked in your browser. Also, check if your printer is properly configured in system settings. For thermal printers, verify the paper size matches the bill format."},{question:"Sync issues with data?",answer:"Make sure your internet connection is stable. The system auto-syncs when online. You can also manually trigger sync from the settings menu. If issues persist, try clearing browser cache."},{question:"How to reset my password?",answer:"Contact your clinic administrator who can reset your password from the Staff Management section. For security reasons, passwords cannot be self-reset without admin approval."},{question:"AI suggestions not appearing?",answer:'AI features require an active internet connection. Also ensure AI features are enabled in Clinic Settings under the "AI & Automation" tab.'},{question:"How do I record a partial payment for patient debt?",answer:"Navigate to Financial Control -> Patient Debts. Click on a patient's name to view their full transaction history. Use the payment recording form at the bottom to enter the amount paid and save."},{question:"How can I set up normal ranges for Lab tests?",answer:"Go to Advanced Lab Management -> Test Master. Click 'Edit' on a test, then go to the 'Parameters' tab. Here you can define min/max values, units, and default results."}],A=[{icon:lR,title:"Pro Tip: Voice Commands",description:'Use the AI Command Bar to speak naturally. Say "Create prescription for John" to get started instantly!',color:"#f59e0b"},{icon:mR,title:"Speed Boost",description:"Double-click any patient name in the queue to instantly open their full history.",color:"#8b5cf6"},{icon:uee,title:"Smart Billing",description:"The system auto-suggests medicine quantities based on prescription duration!",color:"#10b981"},{icon:pR,title:"Favorites",description:"Star frequently prescribed medicines to access them from your quick-add panel.",color:"#ef4444"}];b.useEffect(()=>{const F=setInterval(()=>{p(B=>(B+1)%A.length)},5e3);return()=>clearInterval(F)},[A.length]);const P=[{icon:Ro,value:1e4,suffix:"+",label:"Patients Managed",color:"#6366f1"},{icon:qb,value:75,suffix:"%",label:"Time Saved",color:"#10b981"},{icon:fee,value:99,suffix:".9%",label:"Uptime",color:"#f59e0b"},{icon:VJ,value:50,suffix:"+",label:"Happy Clinics",color:"#ef4444"}],I=[{keys:["Ctrl","K"],action:"Open Command Bar",description:"Quick access to AI assistant and navigation"},{keys:["Ctrl","P"],action:"Quick Print",description:"Print current document or bill"},{keys:["Ctrl","S"],action:"Save Record",description:"Save current form or entry"},{keys:["Esc"],action:"Close Modal",description:"Close any open dialog or panel"}];return r.jsxs("div",{className:Ee.container,children:[r.jsx("div",{className:Ee.progressBar,style:{width:`${a}%`}}),r.jsxs("aside",{className:Ee.sidebar,children:[r.jsxs("h2",{className:Ee.sidebarTitle,children:[r.jsx(rR,{size:22}),"User Guide"]}),r.jsxs("div",{className:Ee.searchBox,children:[r.jsx(Wn,{className:Ee.searchIcon,size:16}),r.jsx("input",{type:"text",className:Ee.searchInput,placeholder:"Search topics...",value:n,onChange:F=>i(F.target.value)})]}),r.jsxs("div",{className:Ee.navSection,children:[r.jsxs("span",{className:Ee.navSectionTitle,children:[r.jsx(ha,{size:12}),"Navigation"]}),T(_.navigation).map(F=>r.jsx(C,{id:F.id,label:F.label,Icon:F.icon},F.id))]}),r.jsxs("div",{className:Ee.navSection,children:[r.jsxs("span",{className:Ee.navSectionTitle,children:[r.jsx(pR,{size:12}),"Reference"]}),T(_.reference).map(F=>r.jsx(C,{id:F.id,label:F.label,Icon:F.icon},F.id))]})]}),r.jsxs("main",{className:Ee.content,ref:v,children:[r.jsxs("header",{className:Ee.header,children:[r.jsxs("div",{className:Ee.floatingParticles,children:[r.jsx("div",{className:Ee.particle}),r.jsx("div",{className:Ee.particle}),r.jsx("div",{className:Ee.particle}),r.jsx("div",{className:Ee.particle}),r.jsx("div",{className:Ee.particle})]}),r.jsxs("div",{className:Ee.headerContent,children:[r.jsxs("div",{className:Ee.headerLabel,children:[r.jsx(rR,{size:16}),"Complete Documentation"]}),r.jsxs("h1",{className:Ee.title,children:["Master Newtons Ai HMS ",r.jsx("span",{className:Ee.waveEmoji,children:""})]}),r.jsx("p",{className:Ee.subtitle,children:"Your comprehensive guide to maximizing efficiency with the AI-Powered Health Management System. Master every feature and transform your clinical workflow."}),r.jsxs("div",{className:Ee.headerBadges,children:[r.jsxs("span",{className:Ee.headerBadge,children:[r.jsx(ug,{size:14}),"HIPAA Compliant"]}),r.jsxs("span",{className:Ee.headerBadge,children:[r.jsx(Ow,{size:14}),"AI Powered"]}),r.jsxs("span",{className:Ee.headerBadge,children:[r.jsx(Wk,{size:14}),"Multi-Language"]})]}),r.jsxs("div",{className:Ee.headerActions,children:[r.jsxs("button",{className:Ee.headerBtn,onClick:()=>w("getting-started"),children:[r.jsx(Uq,{size:16}),"Get Started"]}),r.jsxs("button",{className:Ee.headerBtnSecondary,onClick:()=>w("troubleshooting"),children:[r.jsx(kj,{size:16}),"Need Help?"]})]})]})]}),r.jsx("section",{className:Ee.statsSection,children:P.map((F,B)=>{const{count:$,ref:L}=n5e(F.value);return r.jsxs("div",{className:Ee.statCard,ref:L,children:[r.jsx("div",{className:Ee.statIcon,style:{backgroundColor:`${F.color}15`,color:F.color},children:r.jsx(F.icon,{size:24})}),r.jsxs("div",{className:Ee.statValue,style:{color:F.color},children:[$,F.suffix]}),r.jsx("div",{className:Ee.statLabel,children:F.label})]},B)})}),r.jsxs("section",{className:Ee.quickTipsSection,children:[r.jsxs("div",{className:Ee.quickTipsHeader,children:[r.jsxs("h3",{children:[r.jsx(lR,{size:20})," Quick Tips"]}),r.jsxs("div",{className:Ee.tipNav,children:[r.jsx("button",{onClick:()=>p(F=>(F-1+A.length)%A.length),children:r.jsx(zb,{size:18})}),r.jsxs("span",{children:[f+1," / ",A.length]}),r.jsx("button",{onClick:()=>p(F=>(F+1)%A.length),children:r.jsx(vd,{size:18})})]})]}),r.jsxs("div",{className:Ee.tipCard,children:[r.jsx("div",{className:Ee.tipIcon,style:{backgroundColor:`${A[f].color}15`,color:A[f].color},children:Se.createElement(A[f].icon,{size:28})}),r.jsxs("div",{className:Ee.tipContent,children:[r.jsx("h4",{children:A[f].title}),r.jsx("p",{children:A[f].description})]})]},f),r.jsx("div",{className:Ee.tipIndicators,children:A.map((F,B)=>r.jsx("button",{className:`${Ee.tipIndicator} ${f===B?Ee.tipIndicatorActive:""}`,onClick:()=>p(B)},B))})]}),r.jsxs("section",{id:"getting-started",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(hR,{size:18})}),"Getting Started"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsx("p",{children:"Welcome to the Newtons Ai HMS. This guide will help you navigate and master the system's features, from clinical workflows to advanced financial analytics."}),r.jsxs("div",{className:Ee.infoBox,children:[r.jsxs("span",{className:Ee.infoBoxTitle,children:[r.jsx(Ow,{size:18}),"Multi-Platform Accessibility"]}),r.jsx("div",{className:Ee.infoBoxContent,children:"Newtons Ai is a PWA (Progressive Web App). You can install it on your Desktop, Android, or iOS device for a native-like experience with faster performance and offline support."})]}),r.jsx("div",{className:Ee.shortcutsGrid,children:I.map((F,B)=>r.jsxs("div",{className:`${Ee.shortcutCard} ${g===F.action?Ee.shortcutCardActive:""}`,onMouseEnter:()=>x(F.action),onMouseLeave:()=>x(null),children:[r.jsx("div",{className:Ee.shortcutKeys,children:F.keys.map(($,L)=>r.jsxs(Se.Fragment,{children:[r.jsx("kbd",{className:`${Ee.kbd} ${g===F.action?Ee.kbdActive:""}`,children:$}),L<F.keys.length-1&&r.jsx("span",{className:Ee.kbdPlus,children:"+"})]},L))}),r.jsxs("div",{className:Ee.shortcutInfo,children:[r.jsx("div",{className:Ee.shortcutAction,children:F.action}),r.jsx("div",{className:Ee.shortcutDesc,children:F.description})]})]},B))}),r.jsxs("div",{className:Ee.uiGrid,children:[r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(_J,{size:14})," Smart Navigation"]}),r.jsxs("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:["Press ",r.jsx("kbd",{className:Ee.kbd,children:"Ctrl"})," + ",r.jsx("kbd",{className:Ee.kbd,children:"K"})," anywhere to open the Command Bar. Instantly jump to patients, bills, or settings."]})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(Ro,{size:14})," Multi-Role Access"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"The system adapts to your role: Doctor, Receptionist, Pharmacist, or Lab Technician."})]})]})]})]}),r.jsxs("section",{id:"clinical-workflow",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(Pw,{size:18})}),"Doctor Workflow & Live Queue"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsx("p",{children:"The Doctor Consultation Panel is optimized for speed and clarity, providing all necessary patient context at a single glance."}),r.jsxs("div",{className:Ee.uiGrid,children:[r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(Cc,{size:14})," Live Queue Control"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:'Use the "Call Next" buttons to manage the patient flow. The system automatically marks seen patients and updates the waiting list.'}),r.jsx(_r,{to:"/dashboard/doctor",className:Ee.moduleLinkBtn,children:"Consultation Panel"})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(qv,{size:14})," AI Patient Briefs"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:`" AI Brief" provides a summarized snapshot of the patient's current complaint and relevant history saving valuable consultation time.`})]})]}),r.jsx("h3",{children:"Comprehensive History"}),r.jsxs("ul",{className:Ee.featureList,children:[r.jsxs("li",{className:Ee.featureItem,children:[r.jsx(Sv,{size:16,className:Ee.featureIcon}),r.jsxs("div",{className:Ee.featureText,children:[r.jsx("strong",{children:"Unified Timeline:"})," View past complaints, lab reports, and medications in a single, chronologically grouped view."]})]}),r.jsxs("li",{className:Ee.featureItem,children:[r.jsx(OJ,{size:16,className:Ee.featureIcon,style:{color:"var(--guide-primary)"}}),r.jsxs("div",{className:Ee.featureText,children:[r.jsx("strong",{children:"One-Click Action:"})," From the history view, copy past medications to new prescriptions or quickly re-order tests."]})]})]})]})]}),r.jsxs("section",{id:"financial-mgmt",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(_f,{size:18})}),"Financial Control & Debt Management"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsx("p",{children:"Keep your clinic's finances healthy with precise billing and proactive debt management."}),r.jsxs("div",{className:Ee.uiGrid,children:[r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(Dw,{size:14})," Debt Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Monitor all outstanding balances in the Patent Debt module. View individual transaction histories and record settlements."}),r.jsx(_r,{to:"/dashboard/admin/patient-debts",className:Ee.moduleLinkBtn,children:"Manage Debt"})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(ha,{size:14})," Custom Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Need to bill for something non-standard? Use the Custom Bill tool to create items on-the-fly."}),r.jsx(_r,{to:"/create-custom-bill",className:Ee.moduleLinkBtn,children:"Custom Bill"})]})]}),r.jsxs("div",{className:Ee.infoBox,children:[r.jsxs("span",{className:Ee.infoBoxTitle,children:[r.jsx(ug,{size:18}),"Payment Verification"]}),r.jsx("div",{className:Ee.infoBoxContent,children:'The system tracks payment modes (Cash, UPI, Card, Credit). "Credit" sales are automatically added to the Patient Debt list for later follow-up.'})]})]})]}),r.jsxs("section",{id:"analytics",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(Gk,{size:18})}),"Analytics & Insights"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsx("p",{children:"Transition from simply managing data to understanding it. The Analysis Dashboard provides deep insights into your operations."}),r.jsxs("div",{className:Ee.uiGrid,children:[r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(Cc,{size:14})," Revenue vs Cash Flow"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Compare Sales (Accrual) against actual Cash Collected (Cash Basis) to understand your true liquidity."}),r.jsx(_r,{to:"/dashboard/analysis",className:Ee.moduleLinkBtn,children:"Open Analysis"})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(dR,{size:14})," Dept. Analysis"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"See exactly which departments (Pharmacy, Lab, OPD) are driving your clinic's growth."})]})]}),r.jsx("h3",{children:"Advanced Metrics"}),r.jsxs("ul",{className:Ee.featureList,children:[r.jsxs("li",{className:Ee.featureItem,children:[r.jsx(Sv,{size:16,className:Ee.featureIcon}),r.jsxs("div",{className:Ee.featureText,children:[r.jsx("strong",{children:"Inventory Movement:"})," Analyze stock inflow vs outflow to predict future procurement needs."]})]}),r.jsxs("li",{className:Ee.featureItem,children:[r.jsx(Sv,{size:16,className:Ee.featureIcon}),r.jsxs("div",{className:Ee.featureText,children:[r.jsx("strong",{children:"Profit Estimation:"})," View estimated profits based on cost of goods sold (COGS) vs revenue generated."]})]})]})]})]}),r.jsxs("section",{id:"pharmacy-inventory",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(Tf,{size:18})}),"Pharmacy & Inventory Tracking"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsx("p",{children:"Maintain optimal stock levels and manage supplier relationships effortlessly."}),r.jsxs("div",{className:Ee.uiGrid,children:[r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(_D,{size:14})," Distributor Mgmt"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep a directory of suppliers, track payments made to them, and manage purchase entries."}),r.jsx(_r,{to:"/dashboard/distributors",className:Ee.moduleLinkBtn,children:"Distributors"})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(GX,{size:14})," Refill Reminders"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automatically notify patients when their chronic medication stock is about to run out."}),r.jsx(_r,{to:"/refill-reminders",className:Ee.moduleLinkBtn,children:"Refill Alerts"})]})]}),r.jsxs("div",{className:Ee.infoBox,children:[r.jsxs("span",{className:Ee.infoBoxTitle,children:[r.jsx(Cc,{size:18}),"Stock-Out Alerts"]}),r.jsx("div",{className:Ee.infoBoxContent,children:"High-demand items are highlighted when stock falls below your defined threshold, ensuring you never run out of critical medicines."})]})]})]}),r.jsxs("section",{id:"advanced-lab",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(os,{size:18})}),"Advanced Lab Management"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsx("p",{children:"Go beyond simple test lists. Configure complex diagnostic parameters with automated clinical validation."}),r.jsxs("div",{className:Ee.uiGrid,children:[r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(Wn,{size:14})," Multi-Parameter Search"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Find reports by Patient Name, ID, Token, or even specific Test Name. The intelligent search uses fuzzy matching."}),r.jsx(_r,{to:"/lab/search-report",className:Ee.moduleLinkBtn,children:"Find Reports"})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(os,{size:14})," Test Master"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define parametric data, normal ranges, and automated formatting for your reports."}),r.jsx(_r,{to:"/lab-inventory",className:Ee.moduleLinkBtn,children:"Configure Tests"})]})]})]})]}),r.jsxs("section",{id:"ipd-admission",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(dg,{size:18})}),"IPD & Admission Management"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsx("p",{children:"Manage the full lifecycle of in-patient care, from the moment of admission to final discharge and billing."}),r.jsxs("div",{className:Ee.uiGrid,children:[r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(jr,{size:14})," In-Patient Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep track of all currently admitted patients, their ward assignments, and duration of stay."}),r.jsx(_r,{to:"/manage-admission",className:Ee.moduleLinkBtn,children:"Admission Mgmt"})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(Dw,{size:14})," Cumulative Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automated daily room charges combined with services and medications consumed during the stay."})]})]}),r.jsx("h3",{children:"Workflow Steps"}),r.jsxs("ol",{className:Ee.workflowList,children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Admit:"})," Register the patient and set the admission date and bed details."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Manage:"})," Record observations and clinical notes throughout the stay."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Discharge:"})," Finalize all pending charges and generate the discharge summary."]})]})]})]}),r.jsxs("section",{id:"custom-data",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(Cf,{size:18})}),"System Customization"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsx("p",{children:"Newtons Ai HMS is designed to be extensible. Create your own data structures and visualization tools."}),r.jsxs("div",{className:Ee.uiGrid,children:[r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(Vb,{size:14})," Custom Tables"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define new data types (e.g., Equipment Logs, Consent Forms). Support for text, number, date, and boolean."}),r.jsx(_r,{to:"/custom-tables",className:Ee.moduleLinkBtn,children:"Data Tables"})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(dR,{size:14})," Custom Dashboards"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Build your own reporting views. Drag and drop widgets to visualize your performance."}),r.jsx(_r,{to:"/dashboards",className:Ee.moduleLinkBtn,children:"Manage Dashboards"})]})]})]})]}),r.jsxs("section",{id:"admin",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(md,{size:18})}),"Administration"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsx("p",{children:"Central command for clinic owners. Access critical functions and manage staff permissions."}),r.jsxs("div",{className:Ee.uiGrid,children:[r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(Ro,{size:14})," Staff & Permissions"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Add/edit staff and define exactly what each role can see and do in the system."}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[r.jsx(_r,{to:"/dashboard/staff",className:Ee.moduleLinkBtn,children:"Staff"}),r.jsx(_r,{to:"/dashboard/roles",className:Ee.moduleLinkBtn,children:"Roles"})]})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsxs("div",{className:Ee.uiLabel,children:[r.jsx(vi,{size:14})," Subscription Plans"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Manage your patients' subscription plans, billing cycles, and membership statuses."}),r.jsx(_r,{to:"/dashboard/subscriptions",className:Ee.moduleLinkBtn,children:"Subscriptions"})]})]})]})]}),r.jsxs("section",{id:"ui-reference",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(Vm,{size:18})}),"Interface & UI Reference"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsx("p",{children:"Familiarize yourself with the common UI elements used throughout the application."}),r.jsxs("div",{className:Ee.uiGrid,children:[r.jsxs("div",{className:Ee.uiCard,children:[r.jsx("div",{className:Ee.uiLabel,children:"Action Buttons"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("button",{className:`${Ee.demoBtn} ${Ee.demoBtnPrimary}`,children:"Primary / Save"}),r.jsx("button",{className:`${Ee.demoBtn} ${Ee.demoBtnSecondary}`,children:"Secondary"}),r.jsx("button",{className:`${Ee.demoBtn} ${Ee.demoBtnDanger}`,children:"Danger / Delete"})]})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsx("div",{className:Ee.uiLabel,children:"Status Indicators"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{className:`${Ee.demoBadge} ${Ee.demoBadgeSuccess}`,children:[r.jsx(Sv,{size:12}),"Paid / Completed"]}),r.jsxs("div",{className:`${Ee.demoBadge} ${Ee.demoBadgeWarning}`,children:[r.jsx(mR,{size:12}),"Pending / Due"]}),r.jsxs("div",{className:`${Ee.demoBadge} ${Ee.demoBadgeError}`,children:[r.jsx(kj,{size:12}),"Overdue / Failed"]})]})]}),r.jsxs("div",{className:Ee.uiCard,children:[r.jsx("div",{className:Ee.uiLabel,children:"Common Icons"}),r.jsxs("div",{className:Ee.iconRow,children:[r.jsx($a,{size:16})," ",r.jsx("span",{children:"Edit Record"})]}),r.jsxs("div",{className:Ee.iconRow,children:[r.jsx(Yn,{size:16})," ",r.jsx("span",{children:"Delete Item"})]}),r.jsxs("div",{className:Ee.iconRow,children:[r.jsx(Vm,{size:16})," ",r.jsx("span",{children:"View Details"})]})]})]})]})]}),r.jsxs("section",{id:"troubleshooting",className:Ee.section,children:[r.jsxs("h2",{className:Ee.sectionTitle,children:[r.jsx("span",{className:Ee.sectionTitleIcon,children:r.jsx(kj,{size:18})}),"Troubleshooting & Support"]}),r.jsxs("div",{className:Ee.sectionContent,children:[r.jsxs("div",{className:Ee.infoBox,children:[r.jsxs("span",{className:Ee.infoBoxTitle,children:[r.jsx(Wk,{size:18}),"Offline Support (PWA)"]}),r.jsxs("div",{className:Ee.infoBoxContent,children:["Newtons Ai HMS is a ",r.jsx("strong",{children:"Progressive Web App (PWA)"}),'. Install it on your desktop or mobile home screen using the "Install" button in the header for faster loading and offline syncing of critical data.']})]}),r.jsxs("div",{className:Ee.infoBox,style:{borderLeftColor:"var(--guide-accent)"},children:[r.jsxs("span",{className:Ee.infoBoxTitle,style:{color:"var(--guide-accent)"},children:[r.jsx(EC,{size:18}),"Need Direct Support?"]}),r.jsx("div",{className:Ee.infoBoxContent,children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(cg,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"+91 63631 11328"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(cR,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"shiva@newtons.in"})]})]})})]}),r.jsx("h3",{children:"Frequently Asked Questions"}),r.jsx("div",{className:Ee.faqList,children:O.map((F,B)=>r.jsxs("div",{className:Ee.faqItem,children:[r.jsxs("div",{className:Ee.faqQuestion,onClick:()=>l(o===B?null:B),children:[r.jsx("span",{children:F.question}),r.jsx(Rq,{size:18,className:`${Ee.faqIcon} ${o===B?Ee.faqIconOpen:""}`})]}),o===B&&r.jsx("div",{className:Ee.faqAnswer,children:F.answer})]},B))})]})]}),r.jsx("footer",{className:Ee.footer,children:r.jsxs("p",{className:Ee.footerText,children:[" ",new Date().getFullYear()," ",r.jsx("span",{className:Ee.footerBrand,children:"Newtons Ai"}),". Empowering Healthcare through Intelligence."]})})]}),r.jsxs("div",{className:Ee.fabContainer,children:[c&&r.jsxs("div",{className:Ee.fabContent,children:[r.jsxs("h4",{children:[r.jsx(EC,{size:18}),"Customer Care"]}),r.jsxs("div",{className:Ee.contactRow,children:[r.jsx(cg,{size:16,className:Ee.contactIcon}),r.jsx("span",{children:"+91 63631 11328"}),r.jsx("button",{className:Ee.copyBtn,onClick:()=>navigator.clipboard.writeText("+916363111328"),title:"Copy Phone",children:r.jsx(sR,{size:14})})]}),r.jsxs("div",{className:Ee.contactRow,children:[r.jsx(cR,{size:16,className:Ee.contactIcon}),r.jsx("span",{children:"shiva@newtons.in"}),r.jsx("button",{className:Ee.copyBtn,onClick:()=>navigator.clipboard.writeText("shiva@newtons.in"),title:"Copy Email",children:r.jsx(sR,{size:14})})]})]}),r.jsx("button",{className:Ee.fabButton,onClick:()=>u(!c),title:"Customer Support",children:c?r.jsx(Ut,{size:24}):r.jsx(EC,{size:24})})]})]})},i5e=({patient:e,onClose:t,onSave:n})=>{const[i,a]=b.useState({name:e.name,age:e.age,gender:e.gender,phone:e.phone||""}),[s,o]=b.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{await n({...i,phone:i.phone||void 0}),t()}catch(u){console.error(u),alert("Failed to update patient")}finally{o(!1)}};return r.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",width:"400px",maxWidth:"90%",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[r.jsx("h3",{style:{margin:0,fontSize:"1.2rem",color:"#333"},children:"Edit Patient Details"}),r.jsx("button",{onClick:t,style:{border:"none",background:"none",cursor:"pointer",color:"#666"},children:r.jsx(Ut,{size:20})})]}),r.jsxs("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Name"}),r.jsx("input",{type:"text",value:i.name,onChange:c=>a({...i,name:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"},required:!0})]}),r.jsxs("div",{style:{display:"flex",gap:"16px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Age"}),r.jsx("input",{type:"number",value:i.age||"",onChange:c=>a({...i,age:parseInt(c.target.value)||0}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Gender"}),r.jsxs("select",{value:i.gender||"",onChange:c=>a({...i,gender:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem",width:"100%"},children:[r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Phone"}),r.jsx("input",{type:"tel",value:i.phone,onChange:c=>a({...i,phone:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"},placeholder:"Optional"})]}),r.jsx("button",{type:"submit",className:"save-btn",style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:s,children:s?"Saving...":r.jsxs(r.Fragment,{children:[r.jsx(io,{size:18})," Save Changes"]})})]})]})})},a5e=e=>[1,2,3,14,15,16,17,18,19,30,31,32].includes(e)?{type:"molar",roots:2}:[4,5,12,13,20,21,28,29].includes(e)?{type:"premolar",roots:1}:[6,11,22,27].includes(e)?{type:"canine",roots:1}:e>=1&&e<=32?{type:"incisor",roots:1}:[41,42,49,50,51,52,59,60].includes(e)?{type:"molar",roots:2}:[43,48,53,58].includes(e)?{type:"canine",roots:1}:[44,45,46,47,54,55,56,57].includes(e)?{type:"incisor",roots:1}:{type:"incisor",roots:1},Qu=({toothNumber:e,conditions:t=[],className:n,style:i,isSelected:a,bridgeConnectPrevious:s})=>{const{type:o}=a5e(e),l=e<=16||e>=41&&e<=50,c="M5,20 Q5,5 18,5 Q31,5 31,20 L29,25 Q18,28 7,25 Z",u="M7,25 Q5,40 10,44 Q14,40 14,26",f="M29,25 Q31,40 26,44 Q22,40 22,26",p="M8,20 Q8,8 18,8 Q28,8 28,20 L26,24 Q18,27 10,24 Z",g="M10,24 Q16,44 18,45 Q20,44 26,24",x="M8,22 Q18,2 28,22 L26,25 Q18,28 10,25 Z",v="M10,25 Q18,48 26,25",j="M10,22 L10,12 Q18,12 26,12 L26,22 L24,25 Q18,27 12,25 Z",w="M12,25 Q18,46 24,25";let _=c,T=[u,f];o==="incisor"?(_=j,T=[w]):o==="canine"?(_=x,T=[v]):o==="premolar"&&(_=p,T=[g]);const C=t.includes("condition-rct"),O=t.includes("condition-filling"),A=t.includes("condition-crown"),P=t.includes("condition-bridge"),I=t.includes("condition-extraction"),F=t.includes("condition-implant"),B=C?"#e9d5ff":"#f3f4f6",$=I?"#fee2e2":"#ffffff",L=I?"#ef4444":P?"#0891b2":F?"#475569":A?"#b45309":a?"#3b82f6":"#6b7280",V=a||P||A||F?2:1.5,H=l?"M20,15 L56,15 L56,22 L20,22 Z":"M16,15 L-20,15 L-20,22 L16,22 Z";return r.jsxs("svg",{viewBox:"0 0 36 50",className:n,style:{width:"100%",height:"100%",overflow:"visible",...i},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"goldGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),r.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),r.jsxs("linearGradient",{id:"bridgeGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),r.jsx("stop",{offset:"100%",stopColor:"#0891b2"})]}),r.jsxs("linearGradient",{id:"titaniumGradient",x1:"0",x2:"1",y1:"0",y2:"0",children:[r.jsx("stop",{offset:"0%",stopColor:"#475569"}),r.jsx("stop",{offset:"30%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"50%",stopColor:"#f8fafc"}),r.jsx("stop",{offset:"70%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"100%",stopColor:"#475569"})]})]}),s&&r.jsx("path",{d:H,fill:"url(#bridgeGradient)",stroke:"#0891b2",strokeWidth:"1.5"}),F?r.jsxs("g",{children:[r.jsx("path",{d:"M13,25 L23,25 L22,28 L23,29 L22,30 L22,33 L23,34 L22,35 L22,38 L23,39 L22,40 L19,46 Q18,48 17,46 L14,40 L13,39 L14,38 L14,35 L13,34 L14,33 L14,30 L13,29 L14,28 Z",fill:"url(#titaniumGradient)",stroke:L,strokeWidth:"1"}),r.jsxs("g",{stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",children:[r.jsx("line",{x1:"14",y1:"29",x2:"22",y2:"29"}),r.jsx("line",{x1:"14",y1:"34",x2:"22",y2:"34"}),r.jsx("line",{x1:"14",y1:"39",x2:"22",y2:"39"})]}),r.jsx("rect",{x:"15",y:"22",width:"6",height:"4",fill:"#64748b",stroke:L,strokeWidth:"1",rx:"1"})]}):r.jsx("g",{fill:B,stroke:L,strokeWidth:V,strokeLinejoin:"round",children:T.map((te,X)=>r.jsx("path",{d:te},X))}),C&&!F&&r.jsx("g",{fill:"none",stroke:"#9333ea",strokeWidth:"2.5",strokeLinecap:"round",children:o==="molar"?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M12,28 L11,42"}),r.jsx("path",{d:"M24,28 L25,42"})]}):r.jsx("path",{d:"M18,25 L18,44"})}),r.jsx("path",{d:_,fill:P?"url(#bridgeGradient)":A?"url(#goldGradient)":$,stroke:L,strokeWidth:V,strokeLinejoin:"round"}),O&&!A&&!P&&!F&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"1"}),I&&r.jsxs("g",{stroke:"#ef4444",strokeWidth:"3",strokeLinecap:"round",children:[r.jsx("line",{x1:"8",y1:"8",x2:"28",y2:"42"}),r.jsx("line",{x1:"28",y1:"8",x2:"8",y2:"42"})]})]})},Db=(e,t="universal")=>t==="universal"?e<=32?e.toString():e>=41&&e<=50?String.fromCharCode(65+(e-41)):e>=51&&e<=60?String.fromCharCode(75+(e-51)):e.toString():t==="fdi"?e>=1&&e<=8?(18-(e-1)).toString():e>=9&&e<=16?(21+(e-9)).toString():e>=17&&e<=24?(38-(e-17)).toString():e>=25&&e<=32?(41+(e-25)).toString():e>=41&&e<=45?(55-(e-41)).toString():e>=46&&e<=50?(61+(e-46)).toString():e>=51&&e<=55?(75-(e-51)).toString():e>=56&&e<=60?(81+(e-56)).toString():e.toString():e.toString(),zW=({selectedTeeth:e,toothConditions:t={},toothDetails:n={},onToothClick:i,onEditPastRecord:a,onPrint:s,numberingSystem:o="universal"})=>{const[l,c]=Se.useState("permanent"),u=Array.from({length:16},(_,T)=>T+1),f=Array.from({length:16},(_,T)=>32-T),p=Array.from({length:10},(_,T)=>41+T),g=Array.from({length:10},(_,T)=>60-T),[x,v]=Se.useState(null),j=_=>{const T=t[_]||[],C=e.includes(_);let O=[],A="#9ca3af",P;const I=T.includes("condition-extraction");return C&&(A="#3b82f6"),T.includes("condition-filling")&&O.push("#60a5fa"),T.includes("condition-rct")&&O.push("#c084fc"),T.includes("condition-crown")&&(O.push("#fcd34d"),A="#d97706"),T.includes("condition-bridge")&&(O.push("#22d3ee"),A="#0891b2"),T.includes("condition-implant")&&(O.push("#94a3b8"),A="#475569"),T.includes("condition-extraction")&&(O.push("#fee2e2"),A="#ef4444"),O.length===0&&C&&O.push("#eff6ff"),O.length===0&&O.push("#ffffff"),{fillColors:O,borderColor:A,overlayColor:P,isSelected:C,hasExtraction:I}},w=_=>{const{isSelected:T}=j(_),C=t[_]||[],O=n[_],A=_<=16||_>=41&&_<=50,P=C.includes("condition-bridge");let I=!1;if(P){let B=null;A?(_>1&&_<=16&&(B=_-1),_>41&&_<=50&&(B=_-1)):(_<32&&_>=17&&(B=_+1),_<60&&_>=51&&(B=_+1)),B!==null&&(t[B]||[]).includes("condition-bridge")&&(I=!0)}const F=Db(_,o);return r.jsxs("div",{onClick:()=>i(_),onMouseEnter:()=>v(_),onMouseLeave:()=>v(null),className:`tooth-item-container ${T?"selected":""}`,title:"",children:[r.jsx("div",{className:"tooth-number-label",children:F}),r.jsx("div",{className:"tooth-svg-wrapper",style:{transform:A?"rotate(180deg)":"none"},children:r.jsx(Qu,{toothNumber:_,conditions:C,isSelected:T,bridgeConnectPrevious:I})}),x===_&&O&&O.length>0&&r.jsxs("div",{className:"tooth-tooltip-window",children:[r.jsxs("div",{className:"tooltip-header",children:["Tooth ",F]}),r.jsx("ul",{className:"tooltip-list",children:O.map((B,$)=>r.jsxs("li",{className:"tooltip-detail-item",children:[r.jsxs("span",{className:"detail-text",children:[B.name," ",r.jsxs("small",{children:["(",B.date,")"]})]}),B.isPast&&a&&r.jsx("button",{className:"tooltip-edit-btn",onClick:L=>{L.stopPropagation(),a(B.recordId)},title:"Edit this record",children:r.jsx(Tc,{size:12})})]},$))})]})]},_)};return r.jsxs("div",{className:"chart-container-inner",style:{position:"relative"},children:[r.jsxs("div",{className:"chart-header-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[r.jsxs("div",{className:"view-toggle-container",style:{display:"flex",gap:4,background:"#f3f4f6",padding:4,borderRadius:8},children:[r.jsx("button",{className:`view-toggle-btn ${l==="permanent"?"active":""}`,onClick:()=>c("permanent"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="permanent"?"#fff":"transparent",boxShadow:l==="permanent"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="permanent"?"#111827":"#6b7280"},children:"Permanent"}),r.jsx("button",{className:`view-toggle-btn ${l==="primary"?"active":""}`,onClick:()=>c("primary"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="primary"?"#fff":"transparent",boxShadow:l==="primary"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="primary"?"#111827":"#6b7280"},children:"Primary"})]}),s&&r.jsxs("button",{onClick:_=>{_.stopPropagation(),s()},className:"chart-print-btn no-print",title:"Print Report",children:[r.jsx(Uv,{size:16}),r.jsx("span",{children:"Print Report"})]})]}),r.jsx("div",{className:"arch-label",children:"Maxillary (Upper)"}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?u.slice(0,8).map(_=>w(_)):p.slice(0,5).map(_=>w(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?u.slice(8).map(_=>w(_)):p.slice(5).map(_=>w(_))})]}),r.jsxs("div",{className:"midline-divider",children:[r.jsx("div",{className:"divider-line"}),r.jsx("span",{className:"chart-label",children:"Midline"}),r.jsx("div",{className:"divider-line"})]}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(0,8).map(_=>w(_)):g.slice(0,5).map(_=>w(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(8).map(_=>w(_)):g.slice(5).map(_=>w(_))})]}),r.jsx("div",{className:"arch-label",children:"Mandibular (Lower)"}),r.jsxs("div",{className:"chart-legend",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Qu,{toothNumber:1,conditions:[],style:{width:16,height:22}})}),r.jsx("span",{children:"Healthy"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Qu,{toothNumber:1,conditions:["condition-filling"],style:{width:16,height:22}})}),r.jsx("span",{children:"Filling (Dot)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Qu,{toothNumber:1,conditions:["condition-rct"],style:{width:16,height:22}})}),r.jsx("span",{children:"RCT (Root Lines)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Qu,{toothNumber:1,conditions:["condition-crown"],style:{width:16,height:22}})}),r.jsx("span",{children:"Crown"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Qu,{toothNumber:1,conditions:["condition-bridge"],style:{width:16,height:22}})}),r.jsx("span",{children:"Bridge"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Qu,{toothNumber:1,conditions:["condition-implant"],style:{width:16,height:22}})}),r.jsx("span",{children:"Implant"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Qu,{toothNumber:1,conditions:["condition-extraction"],style:{width:16,height:22}})}),r.jsx("span",{children:"Extraction (X)"})]})]}),r.jsxs("div",{className:"print-only-details-summary print-only",children:[r.jsx("h3",{children:"Tooth Procedure Details"}),Object.keys(n).length===0?r.jsx("p",{className:"no-details",children:"No specific tooth procedures recorded."}):r.jsxs("table",{className:"print-details-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Tooth"}),r.jsx("th",{children:"Procedure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:Object.entries(n).sort(([_],[T])=>parseInt(_)-parseInt(T)).map(([_,T])=>r.jsx(Se.Fragment,{children:T.map((C,O)=>r.jsxs("tr",{children:[O===0?r.jsxs("td",{rowSpan:T.length,className:"tooth-cell",children:["Tooth ",Db(parseInt(_),o)]}):null,r.jsx("td",{children:C.name}),r.jsx("td",{children:C.date})]},`${_}-${O}`))},_))})]})]})]})},s5e=({onClose:e,onUpdate:t})=>{const[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState({}),[f,p]=b.useState(!1),[g,x]=b.useState({name:"",cost:0,type:"general"});b.useEffect(()=>{v()},[]);const v=async()=>{s(!0);try{const C=await ue("/api/dental/procedures");if(C.ok){const O=await C.json();i(O)}}catch(C){console.error(C)}finally{s(!1)}},j=async()=>{if(!(!g.name||!g.cost))try{(await ue("/api/dental/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,type:"general"}),v(),t())}catch(C){console.error(C)}},w=async C=>{try{(await ue(`/api/dental/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),u({}),v(),t())}catch(O){console.error(O)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await ue(`/api/dental/procedures/${C}`,{method:"DELETE"})).ok&&(v(),t())}catch(O){console.error(O)}},T=C=>{l(C.id),u({name:C.name,cost:C.cost,type:C.type})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Procedures"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await ue("/api/dental/procedures/import-defaults",{method:"POST"}),v(),t()}catch(C){console.error(C)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),r.jsx("button",{onClick:e,className:"manage-procedures-close-btn",children:r.jsx(Ut,{size:20})})]})]}),r.jsx("div",{className:"manage-procedures-list-container",children:a?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40%"},children:"Name"}),r.jsx("th",{style:{width:"20%"},children:"Type"}),r.jsx("th",{style:{width:"20%"},children:"Cost ()"}),r.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):n.map(C=>r.jsx("tr",{children:o===C.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:O=>u({...c,name:O.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsxs("select",{className:"edit-select",value:c.type||"general",onChange:O=>u({...c,type:O.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"})]})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:O=>u({...c,cost:parseFloat(O.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>w(C.id),className:"action-btn btn-save",title:"Save",children:r.jsx(io,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(Ut,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:C.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${C.type}`,children:C.type})}),r.jsxs("td",{style:{fontWeight:500},children:["",C.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>T(C),className:"action-btn btn-edit",title:"Edit",children:r.jsx(Tc,{size:18})}),r.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Yn,{size:18})})]})]})},C.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:C=>x({...g,name:C.target.value})}),r.jsxs("select",{className:"form-select",value:g.type||"general",onChange:C=>x({...g,type:C.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"})]}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:C=>x({...g,cost:parseFloat(C.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:j,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(hr,{size:18})," Add New Procedure"]})})]})})},o5e=({toothNumber:e,procedures:t,history:n=[],onSelect:i,onClose:a,numberingSystem:s="universal"})=>{const[o,l]=b.useState(""),[c,u]=b.useState(n.length>0?"history":"add"),f=Db(e,s),p=b.useMemo(()=>t.filter(g=>g.name.toLowerCase().includes(o.toLowerCase())),[t,o]);return r.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(2px)"},children:[r.jsxs("div",{className:"modal-content",style:{backgroundColor:"var(--dp-card-bg)",borderRadius:"12px",width:"100%",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",overflow:"hidden",animation:"scaleUp 0.2s ease-out"},children:[r.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid var(--dp-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--dp-bg)"},children:[r.jsxs("h3",{style:{margin:0,color:"var(--dp-text)",fontSize:"1.1rem"},children:["Tooth ",f]}),r.jsx("button",{onClick:a,style:{background:"none",border:"none",color:"var(--dp-text-sec)",cursor:"pointer",padding:"4px"},children:r.jsx(Ut,{size:20})})]}),n.length>0&&r.jsxs("div",{className:"sidebar-tabs",style:{padding:"0 16px",paddingTop:"8px",background:"var(--dp-bg)"},children:[r.jsx("button",{className:c==="add"?"active":"",onClick:()=>u("add"),style:{padding:"8px 12px",borderBottomWidth:"2px"},children:"Add Procedure"}),r.jsxs("button",{className:c==="history"?"active":"",onClick:()=>u("history"),style:{padding:"8px 12px",borderBottomWidth:"2px"},children:["History (",n.length,")"]})]}),c==="add"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--dp-border)"},children:r.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[r.jsx(Wn,{size:16,style:{position:"absolute",left:"12px",color:"var(--dp-text-sec)"}}),r.jsx("input",{type:"text",placeholder:"Search procedures...",value:o,onChange:g=>l(g.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",borderRadius:"8px",border:"1px solid var(--dp-border)",backgroundColor:"var(--dp-bg)",color:"var(--dp-text)",fontSize:"0.9rem",outline:"none"},autoFocus:!0})]})}),r.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:p.length===0?r.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.9rem"},children:"No procedures found."}):r.jsx("div",{style:{display:"flex",flexDirection:"column"},children:p.map(g=>r.jsxs("button",{onClick:()=>i(g),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",border:"none",background:"transparent",borderBottom:"1px solid var(--dp-border)",cursor:"pointer",textAlign:"left",transition:"background-color 0.1s"},className:"procedure-modal-item",onMouseOver:x=>x.currentTarget.style.backgroundColor="var(--dp-bg)",onMouseOut:x=>x.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("div",{children:[r.jsx("div",{style:{color:"var(--dp-text)",fontWeight:500,fontSize:"0.95rem"},children:g.name}),r.jsx("div",{style:{color:"var(--dp-text-sec)",fontSize:"0.8rem",textTransform:"capitalize"},children:g.type})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--dp-primary)",fontWeight:600,fontSize:"0.9rem"},children:[r.jsxs("span",{children:["",g.cost]}),r.jsx(hr,{size:16})]})]},g.id))})})]}),c==="history"&&r.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",padding:"0"},children:n.map((g,x)=>r.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--dp-border)"},children:[r.jsx("div",{style:{fontWeight:500,fontSize:"0.9rem"},children:g.name}),r.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)"},children:[g.date," ",g.isPast?"(Past)":"(Current)"]})]},x))})]}),r.jsx("style",{children:`
                @keyframes scaleUp {
                    from { transform: scale(0.95); opacity: 0; }
                    to { transform: scale(1); opacity: 1; }
                }
            `})]})},l5e=({isOpen:e,onClose:t,recordId:n,onBillingComplete:i})=>{var ee,we,Ue,Ge,Le,oe,_e,$e,ze;const[a,s]=b.useState(null),[o,l]=b.useState([]),[c,u]=b.useState(!0),[f,p]=b.useState(null),[g,x]=b.useState(!1),[v,j]=b.useState("cash"),[w,_]=b.useState(""),[T,C]=b.useState(""),[O,A]=b.useState(""),[P,I]=b.useState(""),[F,B]=b.useState(""),[$,L]=b.useState(!1),[V,H]=b.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[te,X]=b.useState(0),q=b.useRef(!1),[W,ae]=b.useState(null),[G,z]=b.useState(!1),le=()=>{const K=V.map(pe=>pe.method),ye=["cash","upi","card","no_cash_insurance","credit"].filter(pe=>!K.includes(pe));ye.length>0&&H([...V,{id:crypto.randomUUID(),method:ye[0],amount:0}])},je=K=>{V.length>2&&H(V.filter(ye=>ye.id!==K))},Y=(K,ye,pe)=>{H(me=>{const Ne=me.map(Be=>Be.id===K?ye==="method"?{...Be,method:pe}:{...Be,amount:Math.max(0,pe)}:Be);if(ye==="amount"&&Ne.length===2){const ke=Ne.findIndex(gt=>gt.id===K)===0?1:0,Ye=Math.max(0,pe),rt=se-Ye;Ne[ke]={...Ne[ke],amount:Math.max(0,rt)}}return Ne})},Oe=K=>{const ye=V.filter(me=>me.id!==K).reduce((me,Ne)=>me+Ne.amount,0),pe=Math.max(0,se-ye);Y(K,"amount",pe)},Ke=b.useMemo(()=>V.reduce((K,ye)=>K+ye.amount,0),[V]),Me=K=>{const ye=Math.max(0,Math.min(100,isNaN(K)?0:K));q.current=!0,X(ye);const pe=o.map(me=>({...me,discount_percentage:ye}));l(pe)},Ie=(K,ye)=>{const pe=[...o];pe[K].discount_percentage=isNaN(ye)?0:ye,l(pe)};b.useEffect(()=>{if(q.current){q.current=!1;return}const K=o.reduce((me,Ne)=>me+(Ne.price??0),0);if(K===0){X(0);return}const pe=o.reduce((me,Ne)=>{const ke=(Ne.price??0)*((Ne.discount_percentage??0)/100);return me+ke},0)/K*100;X(me=>Math.abs(me-pe)>.01?pe:me)},[o]);const be=async()=>{var K,ye;if(!a)return p("No record data available to bill."),null;if(o.length===0)return p("Cannot bill an empty procedure list."),null;x(!0),p(null);try{const pe=o.map(Pe=>{const Je=Pe.price,et=Je*((Pe.discount_percentage??0)/100),dt=Je-et;return{name:Pe.name,price:Pe.price,quantity:1,total:dt,item_id:Pe.id||`proc_${Date.now()}`,type:"service",discount_percentage:Pe.discount_percentage??0}}),me=$?((K=V[0])==null?void 0:K.method)||"cash":v,Ne=$?V.map(Pe=>({method:Pe.method,amount:Pe.amount})):void 0,Be={patientId:a.patientId.id,items:pe,amount:se,paymentMode:me,splitPayments:Ne,type:"dental",related_id:a.id,status:"paid",discountPercentage:te},ke=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)}),Ye=await ke.json();if(!ke.ok||!Ye.id)throw new Error(Ye.message||"Failed to create bill.");(await ue(`/api/dental/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:Ye.id})})).ok||console.error("Failed to update dental record status"),s(Pe=>Pe?{...Pe,status:"billed",billId:Ye.id}:null);const gt=$?((ye=V.find(Pe=>Pe.method==="credit"))==null?void 0:ye.amount)||0:v==="credit"?se:0;if(gt>0)try{await ue(`/api/patient-debts/${a.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:gt,related_bill_id:Ye.id,notes:`Dental Bill #${Ye.id}${$?" (Split Payment - Credit portion)":""}`})})}catch(Pe){console.error("Failed to create debt entry:",Pe)}return i&&i(),Ye.id}catch(pe){return console.error("Billing process failed:",pe),p(pe.message||"Failed to create bill."),null}finally{x(!1)}},re=()=>{window.print()},ve=async()=>{await be()&&setTimeout(()=>window.print(),800)};b.useEffect(()=>{e&&n&&(async()=>{u(!0);try{const[ye,pe]=await Promise.all([ue(`/api/dental/${n}`),ue("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!ye.ok)throw new Error("Failed to fetch dental record");const me=await ye.json(),Ne={...me,patientId:me.Patient||me.patientId};if(s(Ne),pe.ok){const Ye=await pe.json();C(Ye.upi_id||""),A(Ye.name||""),I(Ye.address||""),B(Ye.notes||"")}const ke=(Ne.selected_procedures||Ne.selectedProcedures||[]).map(Ye=>({...Ye,price:Ye.cost,discount_percentage:0}));l(ke)}catch(ye){console.error("Failed to fetch data:",ye),p(ye.message)}finally{u(!1)}})()},[e,n]);const ce=b.useMemo(()=>o.reduce((K,ye)=>K+(ye.price??0),0),[o]),fe=b.useMemo(()=>o.reduce((K,ye)=>{const me=(ye.price??0)*(ye.discount_percentage??0)/100;return K+me},0),[o]),se=b.useMemo(()=>ce-fe,[ce,fe]),Q=b.useMemo(()=>se-Ke,[se,Ke]),ie=b.useMemo(()=>Math.abs(Q)<.01,[Q]);b.useEffect(()=>{if($&&V.length>=1&&Ke===0){const K=[...V];K[0].amount=se,H(K)}},[$,se]),b.useEffect(()=>{if(se>0&&T){const K=`upi://pay?pa=${T}&pn=${encodeURIComponent(O)}&am=${se.toFixed(2)}&cu=INR`;_(K)}else _("")},[se,T,O]);const ge=b.useMemo(()=>$?V.some(K=>K.method==="credit"):v==="credit",[$,V,v]);return b.useEffect(()=>{(async()=>{var ye;if(ge&&((ye=a==null?void 0:a.patientId)!=null&&ye.id)){z(!0);try{const pe=await ue(`/api/patient-debts/${a.patientId.id}/balance`);if(pe.ok){const me=await pe.json();ae(me.netDebt||0)}else ae(0)}catch{ae(0)}finally{z(!1)}}})()},[ge,(ee=a==null?void 0:a.patientId)==null?void 0:ee.id]),e?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Dental Invoice"}),r.jsx("button",{onClick:t,className:"close-modal-btn",children:r.jsx(Ut,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:c?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3].map(K=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})})]},K))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]})]})]})})]})})}):f?r.jsxs("div",{className:"error-message-box",children:["Error: ",f]}):a?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:O||"Clinic Name"}),(P||F)&&r.jsxs("div",{className:"clinic-details-print",children:[P&&r.jsx("span",{className:"small-text clinic-address",children:P}),F&&r.jsx("span",{className:"small-text clinic-notes",children:F})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",((we=a.patientId)==null?void 0:we.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",((Ue=a.patientId)==null?void 0:Ue.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Date"]})," ",new Date(a.date||a.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",((Ge=a.patientId)==null?void 0:Ge.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",((Le=a.patientId)==null?void 0:Le.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ha,{size:16})," Record ID"]})," ",a.id.substring(a.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Date"]})," ",new Date(a.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"dental-chart-section-modal",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Dental Chart"})}),r.jsx("div",{className:"chart-wrapper-modal",children:r.jsx(zW,{selectedTeeth:[],onToothClick:()=>{},toothConditions:(()=>{const K={};return a.teeth&&a.teeth.forEach(ye=>{ye.procedures.forEach(pe=>{var Ne,Be;const me=((Ne=a.selected_procedures)==null?void 0:Ne.find(ke=>ke.id===pe))||((Be=a.selectedProcedures)==null?void 0:Be.find(ke=>ke.id===pe));if(me&&me.type&&me.type!=="general"){K[ye.toothNumber]||(K[ye.toothNumber]=[]);const ke=`condition-${me.type}`;K[ye.toothNumber].includes(ke)||K[ye.toothNumber].push(ke)}})}),K})(),toothDetails:(()=>{const K={};return a.teeth&&a.teeth.forEach(ye=>{K[ye.toothNumber]||(K[ye.toothNumber]=[]),ye.procedures.forEach(pe=>{var Ne,Be;const me=((Ne=a.selected_procedures)==null?void 0:Ne.find(ke=>ke.id===pe))||((Be=a.selectedProcedures)==null?void 0:Be.find(ke=>ke.id===pe));me&&K[ye.toothNumber].push({name:me.name,date:new Date(a.date||a.createdAt).toLocaleDateString()})})}),K})()})})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),o.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:o.map((K,ye)=>{const pe=K.price??0,me=pe*(K.discount_percentage??0)/100,Ne=pe-me;return r.jsxs("tr",{children:[r.jsx("td",{children:ye+1}),r.jsx("td",{children:K.name}),r.jsx("td",{children:K.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:K.discount_percentage===0?"":K.discount_percentage,onChange:Be=>Ie(ye,parseFloat(Be.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Ne.toFixed(2)})]},ye)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",te.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",fe.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",se.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"12px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px"},children:"Payment Details:"}),$?r.jsx("div",{className:"split-payment-details-print",children:V.map(K=>r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:K.method.toUpperCase()}),r.jsxs("span",{children:["",K.amount.toFixed(2)]})]},K.id))}):r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Mode"}),r.jsx("span",{children:v.toUpperCase()})]})]}),(v==="credit"||$&&V.some(K=>K.method==="credit"))&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px",color:"#e53e3e"},children:"Credit/Debt Information:"}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Credit Amount"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",$?(((oe=V.find(K=>K.method==="credit"))==null?void 0:oe.amount)||0).toFixed(2):se.toFixed(2)]})]}),(W??0)>0&&r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(W??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px",fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((W??0)+($?((_e=V.find(K=>K.method==="credit"))==null?void 0:_e.amount)||0:se)).toFixed(2)]})]})]})]}),w&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${v!=="upi"&&!($&&V.some(K=>K.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(pa,{value:w,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",fe.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:te===0?"":te,onChange:K=>Me(parseFloat(K.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:g||a.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",se.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:w?r.jsxs(r.Fragment,{children:[r.jsx(pa,{value:w,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${$?"active":""}`,onClick:()=>L(!$),disabled:g||a.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:$?"2px solid #4facfe":"1px solid #ddd",background:$?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:$?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:$?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(qc,{size:14}),"Split Pay"]})]}),$?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(qc,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",se.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:V.map((K,ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ye+1}),r.jsxs("select",{value:K.method,onChange:pe=>Y(K.id,"method",pe.target.value),className:`split-payment-select ${K.method==="credit"?"is-credit":""}`,disabled:g||a.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:K.amount===0?"":K.amount,onChange:pe=>Y(K.id,"amount",parseFloat(pe.target.value)||0),placeholder:"0",className:`split-payment-input ${K.method==="credit"?"is-credit":""}`,disabled:g||a.status==="billed"})]}),V.length>2&&r.jsx("button",{type:"button",onClick:()=>Oe(K.id),className:"split-payment-btn split-payment-btn-fill",disabled:g||a.status==="billed",children:"Fill"}),V.length>2&&r.jsx("button",{type:"button",onClick:()=>je(K.id),className:"split-payment-btn split-payment-btn-remove",disabled:g||a.status==="billed",children:r.jsx(Yn,{size:12})})]},K.id))}),V.length<5&&r.jsxs("button",{type:"button",onClick:le,className:"split-payment-add-btn",disabled:g||a.status==="billed",children:[r.jsx(hr,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ke.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(Q)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(Q)<.01?"":Q>0?"":"",Math.abs(Q)<.01?"Balanced":Q>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Q).toFixed(2)]})]}),!ie&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",se.toFixed(2)]})]})]}):r.jsxs("select",{value:v,onChange:K=>j(K.target.value),className:"payment-mode-select",disabled:g||a.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),ge&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),G?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:W&&W>0?"#dc3545":"#28a745"},children:["",(W||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:$?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",($?(($e=V.find(K=>K.method==="credit"))==null?void 0:$e.amount)||0:se).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((W||0)+($?((ze=V.find(K=>K.method==="credit"))==null?void 0:ze.amount)||0:se)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:a.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:re,className:"secondary-button print-preview-button no-print",disabled:g,children:"Print Preview"}),r.jsx("button",{onClick:ve,className:"primary-button",disabled:g||$&&!ie,children:g?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Ml,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:re,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},Mz=/^\+?[0-9\s\-().]{7,20}$/,c5e=/^[a-zA-Z\s'-]{2,}$/,u5e=()=>{const e=It(),[t,n]=b.useState(""),[i,a]=b.useState([]),[s,o]=b.useState(!1),[l,c]=b.useState(null),[u,f]=b.useState(!1),[p,g]=b.useState(!1),[x,v]=b.useState(!1),[j,w]=b.useState([]),[_,T]=b.useState(!0),[C,O]=b.useState(()=>{const pe=localStorage.getItem("dentalNumberingSystem");return pe==="fdi"||pe==="universal"?pe:"universal"});b.useEffect(()=>{localStorage.setItem("dentalNumberingSystem",C)},[C]);const A=Gr();b.useEffect(()=>{A.state&&A.state.patient&&se(A.state.patient)},[A.state]);const[P,I]=b.useState([]),[F,B]=b.useState([]),[$,L]=b.useState({}),[V,H]=b.useState(""),[te,X]=b.useState(!1),[q,W]=b.useState("plan"),[ae,G]=b.useState([]),[z,le]=b.useState([]),[je,Y]=b.useState(!1),[Oe,Ke]=b.useState(!1),[Me,Ie]=b.useState(null);b.useEffect(()=>{re(),be()},[]);const be=async()=>{try{const pe=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),me=await ue(`/api/patients?${pe.toString()}`);if(me.ok){const Ne=await me.json();w(Ne.patients||[])}}catch(pe){console.error("Error fetching recent patients",pe)}finally{T(!1)}},re=async()=>{try{const pe=await ue("/api/dental/procedures");if(pe.ok){const me=await pe.json();le(me)}}catch(pe){console.error("Error fetching procedures",pe)}};b.useEffect(()=>{(async()=>{if(!l){G([]),Ie(null),H(""),B([]),L({}),I([]);return}try{const me=await ue(`/api/dental/patient/${l.id}`);if(me.ok){const Ne=await me.json();G(Ne);const Be=new Date().toDateString(),ke=Ne.find(Ye=>Ye.status==="draft"&&new Date(Ye.date||Ye.createdAt||Date.now()).toDateString()===Be);if(ke){Ie(ke.id),H(ke.notes||"");const Ye=ke.selected_procedures.filter(Pe=>!ke.teeth.some(Je=>Je.procedures.includes(Pe.id)));B(Ye.map(Pe=>({instanceId:crypto.randomUUID(),procedureId:Pe.id,name:Pe.name,price:Pe.cost,type:Pe.type})));const rt={},gt=[];ke.teeth.forEach(Pe=>{const Je=Pe.procedures.map(et=>{const dt=ke.selected_procedures.find(Ct=>Ct.id===et)||z.find(Ct=>Ct.id===et);return{instanceId:crypto.randomUUID(),procedureId:et,name:dt?dt.name:et,price:dt?dt.cost:0,type:dt?dt.type:"general"}});Je.length>0&&(rt[Pe.toothNumber]=Je,gt.push(Pe.toothNumber))}),L(rt),I(gt)}else Ie(null),H(""),B([]),L({}),I([])}}catch(me){console.error("Error fetching history",me)}})()},[l,z]);const ve=b.useMemo(()=>xd(async pe=>{if(!pe.trim()||pe.length<2){a([]),o(!1);return}o(!0);try{const me=await ue(`/api/patients?search=${encodeURIComponent(pe)}&limit=10`);if(me.ok){const Ne=await me.json();a(Ne.patients||[])}}catch(me){console.error("Search error:",me)}finally{o(!1)}},300),[]);b.useEffect(()=>{ve(t)},[t,ve]);const ce=pe=>{const me=pe.target.value;n(me),g(Mz.test(me)),v(c5e.test(me)&&!Mz.test(me))},fe=async pe=>{if(!(!t||pe==="phone"&&!p||pe==="name"&&!x)){o(!0);try{const Ne=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:pe==="name"?t:"direct dental",phone:pe==="phone"?t:null,age:null,gender:null,token:null})});if(Ne.ok){const Be=await Ne.json();se({id:Be.id,name:Be.name,token:Be.token??null,age:Be.age??null,gender:Be.gender??null,phone:Be.phone})}else alert("Failed to create patient")}catch(me){console.error("Error creating patient:",me),alert("Error creating patient")}finally{o(!1)}}},se=pe=>{c(pe),n(""),a([])},Q=()=>{c(null),I([]),B([]),L({}),H("")},ie=async pe=>{if(!l)return;const me=await ue(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)});if(me.ok)await me.json(),c(Ne=>Ne?{...Ne,...pe}:null);else throw new Error("Failed to update")},[ge,ee]=b.useState(null),we=pe=>{ee(pe)},Ue=pe=>{if(!ge)return;const me={instanceId:crypto.randomUUID(),procedureId:pe.id,name:pe.name,price:pe.cost,type:pe.type};L(Ne=>{const Be=Ne[ge]||[];return{...Ne,[ge]:[...Be,me]}}),I(Ne=>Ne.includes(ge)?Ne:[...Ne,ge]),ee(null)},Ge=()=>{const pe={},me={},Ne=(Ye,rt)=>{pe[Ye]||(pe[Ye]=[]);const gt=`condition-${rt}`;pe[Ye].includes(gt)||pe[Ye].push(gt)},Be=(Ye,rt)=>{me[Ye]||(me[Ye]=[]),me[Ye].push(rt)};return[...ae].sort((Ye,rt)=>new Date(Ye.date).getTime()-new Date(rt.date).getTime()).forEach(Ye=>{Ye.teeth&&Array.isArray(Ye.teeth)&&Ye.teeth.forEach(rt=>{rt.procedures.forEach(gt=>{var Je;let Pe=(Je=Ye.selected_procedures)==null?void 0:Je.find(et=>et.id===gt);Pe||(Pe=z.find(et=>et.id===gt)),Pe&&Pe.type!=="general"?(Ne(rt.toothNumber,Pe.type),Be(rt.toothNumber,{name:Pe.name,date:new Date(Ye.date||Ye.createdAt||0).toLocaleDateString(),recordId:Ye.id,isPast:!0})):gt&&Be(rt.toothNumber,{name:`Procedure: ${gt}`,date:new Date(Ye.date||Ye.createdAt||0).toLocaleDateString(),recordId:Ye.id,isPast:!0})})})}),Object.keys($).forEach(Ye=>{const rt=parseInt(Ye),gt=$[rt];gt&&gt.length>0&&gt.forEach(Pe=>{Pe.type!=="general"&&(Ne(rt,Pe.type),Be(rt,{name:Pe.name,date:"Current",isPast:!1}))})}),{conditions:pe,details:me}},{conditions:Le,details:oe}=b.useMemo(()=>Ge(),[ae,$,z]),_e=pe=>{const me=ae.find(Ye=>Ye.id===pe);if(!me)return;H(me.notes||"");const Ne=me.selected_procedures.filter(Ye=>!me.teeth.some(rt=>rt.procedures.includes(Ye.id)));B(Ne.map(Ye=>({instanceId:crypto.randomUUID(),procedureId:Ye.id,name:Ye.name,price:Ye.cost,type:Ye.type})));const Be={},ke=[];me.teeth.forEach(Ye=>{const rt=Ye.procedures.map(gt=>{const Pe=me.selected_procedures.find(Je=>Je.id===gt)||z.find(Je=>Je.id===gt);return{instanceId:crypto.randomUUID(),procedureId:gt,name:Pe?Pe.name:gt,price:Pe?Pe.cost:0,type:Pe?Pe.type:"general"}});rt.length>0&&(Be[Ye.toothNumber]=rt,ke.push(Ye.toothNumber))}),L(Be),I(ke),W("plan")},$e=(pe,me)=>{me?(L(Ne=>{const Be={...Ne};return Be[me]=(Ne[me]||[]).filter(ke=>ke.instanceId!==pe),Be[me].length===0&&delete Be[me],Be}),I(Ne=>Ne)):B(Ne=>Ne.filter(Be=>Be.instanceId!==pe))},ze=(pe,me,Ne)=>{Ne?L(Be=>({...Be,[Ne]:(Be[Ne]||[]).map(ke=>ke.instanceId===pe?{...ke,price:me}:ke)})):B(Be=>Be.map(ke=>ke.instanceId===pe?{...ke,price:me}:ke))},K=()=>{window.print()},ye=async(pe=!0)=>{var me;if(l){X(!0);try{const Be=[...F,...Object.values($).flat()].map(Pe=>({id:Pe.procedureId,name:Pe.name,cost:Pe.price,type:Pe.type})),Ye=Object.keys($).map(Number).map(Pe=>({toothNumber:Pe,procedures:($[Pe]||[]).map(Je=>Je.procedureId),notes:V})),rt={patientId:l.id,teeth:Ye,selectedProcedures:Be,notes:V};let gt;if(Me?((me=ae.find(Je=>Je.id===Me))==null?void 0:me.status)==="draft"?gt=await ue(`/api/dental/${Me}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(rt)}):gt=await ue("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(rt)}):gt=await ue("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(rt)}),gt.ok){const Pe=await gt.json();Ie(Pe.id);const Je=await ue(`/api/dental/patient/${l.id}`);if(Je.ok){const et=await Je.json();G(et)}pe?Ke(!0):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save dental record.")}catch(Ne){console.error(Ne),alert("Error saving record.")}finally{X(!1)}}};return r.jsxs("div",{className:"dental-page-container printable-section",children:[r.jsxs("header",{className:"dental-header",children:[r.jsxs("div",{className:"dental-title-group",children:[r.jsx(ha,{className:"dental-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"dental-title",children:"Dental Report"}),r.jsx("p",{className:"dental-subtitle",children:"Create new dental records and bills"})]}),r.jsxs("div",{className:"numbering-toggle",style:{marginLeft:"auto",marginRight:"16px",display:"flex",gap:"4px",background:"var(--dp-bg-sec)",padding:"4px",borderRadius:"8px"},children:[r.jsx("button",{onClick:()=>O("universal"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="universal"?"var(--dp-card-bg)":"transparent",boxShadow:C==="universal"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="universal"?"var(--dp-text)":"var(--dp-text-sec)"},children:"Universal"}),r.jsx("button",{onClick:()=>O("fdi"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="fdi"?"var(--dp-card-bg)":"transparent",boxShadow:C==="fdi"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="fdi"?"var(--dp-text)":"var(--dp-text-sec)"},children:"FDI"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(Tc,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:Q,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(Ut,{size:16})})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(Wn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"dental-search-input header-input",value:t,onChange:ce}),s&&r.jsx("div",{className:"search-spinner small"}),i.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:i.map(pe=>r.jsxs("div",{onClick:()=>se(pe),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:pe.name}),r.jsxs("div",{className:"patient-meta",children:[pe.age," yrs / ",pe.gender,"  ",pe.phone]})]}),r.jsx(jr,{size:16,color:"var(--dp-text-sec)"})]},pe.id))}),t.length>=2&&!s&&i.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)",marginBottom:"8px"},children:['No match for "',t,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>fe(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>e(-1),className:"dental-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container",children:[!l&&r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--dp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Wn,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"dental-search-input",value:t,onChange:ce,autoFocus:!0}),s&&r.jsx("div",{className:"search-spinner"})]}),i.length>0&&r.jsx("div",{className:"search-results-dropdown",children:i.map(pe=>r.jsxs("div",{onClick:()=>se(pe),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:pe.name}),r.jsxs("div",{className:"patient-meta",children:[pe.age," yrs / ",pe.gender,"  ",pe.phone]})]}),r.jsx(jr,{size:18,color:"var(--dp-text-sec)"})]},pe.id))}),t.length>=2&&!s&&i.length===0&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{style:{color:"var(--dp-text-sec)",marginBottom:"15px"},children:['No patients found matching "',t,'".']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:(p||x)&&r.jsxs("button",{type:"button",onClick:()=>fe(p?"phone":"name"),className:"register-new-btn",style:{backgroundColor:"var(--dp-card-bg)",border:"1px solid var(--dp-primary)",padding:"8px 16px",borderRadius:"8px"},children:['Create "',t,'"']})})]}),!l&&r.jsx("div",{style:{marginTop:"32px"},children:r.jsx("button",{onClick:()=>Y(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage Procedures"})}),!l&&(_||j.length>0)&&r.jsxs("div",{className:"recent-registered-section",children:[r.jsx("div",{className:"recent-registered-label",children:"Recent Patients"}),r.jsx("div",{className:"recent-list",children:_?[1,2,3].map(pe=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:20})]}),r.jsx("div",{className:"recent-info",children:r.jsx(Z,{width:80,height:14})})]},pe)):j.map(pe=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>se(pe),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:pe.name||"New Patient"}),pe.token&&r.jsxs("span",{className:"recent-token",children:["#",pe.token]})]}),r.jsxs("div",{className:"recent-info",children:[pe.age?`${pe.age} yrs`:"",pe.age&&pe.gender?" / ":"",pe.gender||""]})]},pe.id))})]})]}),l&&r.jsx("div",{className:"dental-workspace",children:r.jsxs("div",{className:"dental-grid",children:[r.jsxs("div",{className:"chart-section",children:[r.jsx("div",{className:"dental-card chart-card-scroll",children:r.jsx(zW,{selectedTeeth:P,toothConditions:Le,toothDetails:oe,onToothClick:we,onEditPastRecord:_e,onPrint:K,numberingSystem:C})}),r.jsxs("div",{className:"dental-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("h4",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>ye(!1),disabled:te,title:"Save notes and procedures without billing",children:[r.jsx(io,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:V,onChange:pe=>H(pe.target.value)})]})]}),r.jsx("div",{className:"dental-card procedures-section",children:r.jsxs("div",{className:"treatment-plan-container",style:{borderTop:"none"},children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{onClick:()=>W("plan"),className:q==="plan"?"active":"",children:"Treatment Plan"}),r.jsx("button",{onClick:()=>W("history"),className:q==="history"?"active":"",children:"Visit History"})]}),r.jsx("div",{className:"treatment-plan-list custom-scrollbar",children:q==="plan"?r.jsx(r.Fragment,{children:F.length===0&&Object.keys($).length===0?r.jsx("div",{className:"no-print",style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"Select a tooth to add procedures."}):r.jsxs(r.Fragment,{children:[F.length>0&&r.jsxs("div",{className:"plan-group",children:[r.jsx("h4",{children:"General"}),F.map(pe=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:pe.name,children:pe.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:pe.price,onChange:me=>ze(pe.instanceId,parseFloat(me.target.value)||0),className:"cost-input"}),r.jsx("button",{onClick:()=>$e(pe.instanceId),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Ut,{size:14})})]})]},pe.instanceId))]}),Object.entries($).map(([pe,me])=>me.length===0?null:r.jsxs("div",{className:"plan-group",children:[r.jsxs("h4",{children:["Tooth ",Db(parseInt(pe),C)]}),me.map(Ne=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:Ne.name,children:Ne.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:Ne.price,onChange:Be=>ze(Ne.instanceId,parseFloat(Be.target.value)||0,parseInt(pe)),className:"cost-input"}),r.jsx("button",{onClick:()=>$e(Ne.instanceId,parseInt(pe)),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(Ut,{size:14})})]})]},Ne.instanceId))]},pe))]})}):r.jsx("div",{className:"history-list",children:ae.length===0?r.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"No past visits found."}):ae.map(pe=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(pe.date).toLocaleDateString()}),r.jsx("span",{className:"record-status",children:pe.status})]}),r.jsxs("div",{className:"history-record-body",children:[pe.teeth.map(me=>r.jsxs("div",{className:"history-tooth-group",children:[r.jsxs("strong",{children:["Tooth ",Db(me.toothNumber,C),":"]})," ",me.procedures.map(Ne=>{const Be=pe.selected_procedures.find(ke=>ke.id===Ne)||z.find(ke=>ke.id===Ne);return Be?Be.name:Ne}).join(", ")]},me.toothNumber)),pe.notes&&r.jsx("p",{className:"history-notes",children:r.jsxs("em",{children:["Notes: ",pe.notes]})}),pe.status==="billed"&&r.jsx("div",{className:"history-record-actions mt-3",children:r.jsxs("button",{onClick:()=>{Ie(pe.id),Ke(!0)},className:"view-bill-btn",children:[r.jsx(ha,{size:14})," View Bill"]})})]})]},pe.id))})}),r.jsx("div",{className:"action-footer",children:r.jsx("button",{onClick:()=>ye(!0),className:"save-btn",disabled:te||F.length===0&&Object.keys($).length===0,children:te?"Saving...":"Save & Bill"})})]})})]})}),u&&l&&r.jsx(i5e,{patient:l,onClose:()=>f(!1),onSave:ie}),je&&r.jsx(s5e,{onClose:()=>Y(!1),onUpdate:re}),ge!==null&&r.jsx(o5e,{toothNumber:ge,procedures:z.map(pe=>({id:pe.id,name:pe.name,cost:pe.cost,type:pe.type})),history:oe[ge]||[],onSelect:Ue,onClose:()=>ee(null),numberingSystem:C}),r.jsx(l5e,{isOpen:Oe,recordId:Me,onClose:()=>{Ke(!1),Q()},onBillingComplete:()=>{}})]})},d5e=()=>{var ge,ee,we,Ue,Ge;const e=It(),t=Gr(),[n,i]=b.useState(null),[a,s]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),[f,p]=b.useState(!1),[g,x]=b.useState("cash"),[v,j]=b.useState(""),[w,_]=b.useState(""),[T,C]=b.useState(""),[O,A]=b.useState(""),[P,I]=b.useState(""),[F,B]=b.useState(!1),[$,L]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),V=()=>{$.length<5&&L(Le=>[...Le,{id:Date.now().toString(),method:"cash",amount:0}])},H=Le=>{$.length>2&&L(oe=>oe.filter(_e=>_e.id!==Le))},te=(Le,oe,_e)=>{L($e=>{const ze=$e.map(K=>K.id===Le?oe==="method"?{...K,method:_e}:{...K,amount:Math.max(0,_e)}:K);if(oe==="amount"&&ze.length===2){const ye=ze.findIndex(Ne=>Ne.id===Le)===0?1:0,pe=Math.max(0,_e),me=ve-pe;ze[ye]={...ze[ye],amount:Math.max(0,me)}}return ze})},X=(Le,oe)=>{const _e=$.filter(ze=>ze.id!==Le).reduce((ze,K)=>ze+K.amount,0),$e=Math.max(0,oe-_e);L(ze=>ze.map(K=>K.id===Le?{...K,amount:$e}:K))},[q,W]=b.useState(0),ae=b.useRef(!1),[G,z]=b.useState(null),[le,je]=b.useState(!1),Y=Le=>{const oe=Math.max(0,Math.min(100,isNaN(Le)?0:Le));ae.current=!0,W(oe);const _e=a.map($e=>({...$e,discount_percentage:oe}));s(_e)},Oe=(Le,oe)=>{const _e=[...a];_e[Le].discount_percentage=isNaN(oe)?0:oe,s(_e)};b.useEffect(()=>{if(ae.current){ae.current=!1;return}const Le=a.reduce(($e,ze)=>$e+(ze.price??0),0);if(Le===0){W(0);return}const _e=a.reduce(($e,ze)=>{const ye=(ze.price??0)*((ze.discount_percentage??0)/100);return $e+ye},0)/Le*100;W($e=>Math.abs($e-_e)>.01?_e:$e)},[a]);const Ke=async()=>{if(!n)return u("No record data available to bill."),null;if(a.length===0)return u("Cannot bill an empty procedure list."),null;p(!0),u(null);try{const Le=a.map(ye=>{const pe=ye.price,me=pe*((ye.discount_percentage??0)/100),Ne=pe-me;return{name:ye.name,price:ye.price,quantity:1,total:Ne,item_id:ye.id||`proc_${Date.now()}`,type:"service",discount_percentage:ye.discount_percentage??0}}),oe={patientId:n.patientId.id,items:Le,amount:ve,paymentMode:F?"split":g,type:"dental",related_id:n.id,status:"paid",discountPercentage:q};F&&(oe.splitPayments=$.map(ye=>({method:ye.method,amount:ye.amount})));const _e=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)}),$e=await _e.json();if(!_e.ok||!$e.id)throw new Error($e.message||"Failed to create bill.");(await ue(`/api/dental/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:$e.id})})).ok||console.error("Failed to update dental record status"),i(ye=>ye?{...ye,status:"billed",billId:$e.id}:null);const K=F?$.filter(ye=>ye.method==="credit").reduce((ye,pe)=>ye+pe.amount,0):g==="credit"?ve:0;if(K>0)try{await ue(`/api/patient-debts/${n.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:K,related_bill_id:$e.id,notes:`Dental Bill #${$e.id}`})})}catch(ye){console.error("Failed to create debt entry:",ye)}return $e.id}catch(Le){return console.error("Billing process failed:",Le),u(Le.message||"Failed to create bill."),null}finally{p(!1)}},Me=()=>{window.print()},Ie=async()=>{await Ke()&&setTimeout(()=>window.print(),500)};b.useEffect(()=>{const Le=t.pathname.split("/"),oe=Le[Le.length-1];oe?(async()=>{l(!0);try{const[$e,ze]=await Promise.all([ue(`/api/dental/${oe}`),ue("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!$e.ok)throw new Error("Failed to fetch dental record");const K=await $e.json(),ye={...K,patientId:K.Patient||K.patientId};if(i(ye),ze.ok){const Ne=await ze.json();_(Ne.upi_id||""),C(Ne.name||""),A(Ne.address||""),I(Ne.notes||"")}const me=(ye.selected_procedures||ye.selectedProcedures||[]).map(Ne=>({...Ne,price:Ne.cost,discount_percentage:0}));s(me)}catch($e){console.error("Failed to fetch data:",$e),u($e.message)}finally{l(!1)}})():(u("No record ID provided."),l(!1))},[t.pathname]);const be=b.useMemo(()=>a.reduce((Le,oe)=>Le+(oe.price??0),0),[a]),re=b.useMemo(()=>a.reduce((Le,oe)=>{const $e=(oe.price??0)*(oe.discount_percentage??0)/100;return Le+$e},0),[a]),ve=b.useMemo(()=>be-re,[be,re]),ce=b.useMemo(()=>$.reduce((Le,oe)=>Le+oe.amount,0),[$]),fe=b.useMemo(()=>ve-ce,[ve,ce]),se=b.useMemo(()=>Math.abs(fe)<.01,[fe]),Q=b.useMemo(()=>F?$.some(Le=>Le.method==="credit"&&Le.amount>0):g==="credit",[F,$,g]),ie=b.useMemo(()=>F?$.filter(Le=>Le.method==="credit").reduce((Le,oe)=>Le+oe.amount,0):g==="credit"?ve:0,[F,$,g,ve]);return b.useEffect(()=>{if(ve>0&&w){const Le=`upi://pay?pa=${w}&pn=${encodeURIComponent(T)}&am=${ve.toFixed(2)}&cu=INR`;j(Le)}else j("")},[ve,w,T]),b.useEffect(()=>{(async()=>{var oe;if(Q&&((oe=n==null?void 0:n.patientId)!=null&&oe.id)){je(!0);try{const _e=await ue(`/api/patient-debts/${n.patientId.id}/balance`);if(_e.ok){const $e=await _e.json();z($e.netDebt||0)}else z(0)}catch{z(0)}finally{je(!1)}}})()},[Q,(ge=n==null?void 0:n.patientId)==null?void 0:ge.id]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(Le=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})})]},Le))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(Z,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T||"Clinic Name"}),(O||P)&&r.jsxs("div",{className:"clinic-details-print",children:[O&&r.jsx("span",{className:"small-text clinic-address",children:O}),P&&r.jsx("span",{className:"small-text clinic-notes",children:P})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",((ee=n.patientId)==null?void 0:ee.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",((we=n.patientId)==null?void 0:we.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Date"]})," ",new Date(n.date||n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(rn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Dental Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jr,{size:16})," Patient Name"]})," ",((Ue=n.patientId)==null?void 0:Ue.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Fa,{size:16})," Token"]})," ",((Ge=n.patientId)==null?void 0:Ge.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ha,{size:16})," Record ID"]})," ",n.id.substring(n.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vi,{size:16})," Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),a.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:a.map((Le,oe)=>{const _e=Le.price??0,$e=_e*(Le.discount_percentage??0)/100,ze=_e-$e;return r.jsxs("tr",{children:[r.jsx("td",{children:oe+1}),r.jsx("td",{children:Le.name}),r.jsx("td",{children:Le.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:Le.discount_percentage===0?"":Le.discount_percentage,onChange:K=>Oe(oe,parseFloat(K.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:ze.toFixed(2)})]},oe)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",q.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",re.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ve.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:F?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),F&&$.map((Le,oe)=>Le.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:Le.method==="cash"?"Cash":Le.method==="upi"?"UPI":Le.method==="card"?"Card":Le.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",Le.amount.toFixed(2)]})]},oe))]}),G!==null&&(G>0||Q)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(G??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(G??0).toFixed(2)]})]}),Q&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((G??0)+(Q?ie:0)).toFixed(2)]})]})]})]}),v&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(pa,{value:v,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",re.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:q===0?"":q,onChange:Le=>Y(parseFloat(Le.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ve.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:v?r.jsxs(r.Fragment,{children:[r.jsx(pa,{value:v,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>B(!F),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:F?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:F?"rgba(79, 172, 254, 0.1)":"transparent",color:F?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(qc,{size:14}),"Split"]})]}),F?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ve.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:$.map((Le,oe)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:oe+1}),r.jsxs("select",{value:Le.method,onChange:_e=>te(Le.id,"method",_e.target.value),className:`split-payment-select ${Le.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Le.amount||"",onChange:_e=>te(Le.id,"amount",parseFloat(_e.target.value)||0),className:`split-payment-input ${Le.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),$.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>X(Le.id,ve),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>H(Le.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Yn,{size:12})})]})]},Le.id))}),$.length<5&&r.jsxs("button",{type:"button",onClick:V,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(hr,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ce.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${se?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[se?"":fe>0?"":"",se?"Balanced":fe>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(fe).toFixed(2)]})]}),!se&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ve.toFixed(2)]})]})]}):r.jsxs("select",{value:g,onChange:Le=>x(Le.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Q&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),le?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:G&&G>0?"#dc3545":"#28a745"},children:["",(G||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ie.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((G||0)+ie).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:n.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Me,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:Ie,className:"primary-button",disabled:f,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Ml,{size:20})," Bill Generated"]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})]}):r.jsx("div",{className:"error-message-box",children:"No record found."})},h5e=()=>{const e=It(),t=Gr(),[n,i]=b.useState(""),[a,s]=b.useState([]),[o,l]=b.useState(!1),[c,u]=b.useState(null),[f,p]=b.useState([]),[g,x]=b.useState([]),[v,j]=b.useState(!1),[w,_]=b.useState(!1),[T,C]=b.useState("idle"),[O,A]=b.useState(null),[P,I]=b.useState(""),F=b.useMemo(()=>xd(async be=>{if(be.trim().length<2){s([]),l(!1);return}l(!0);try{const re=new URLSearchParams({search:encodeURIComponent(be),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),ve=await ue(`/api/patients?${re.toString()}`);if(ve.ok){const ce=await ve.json();s(ce.patients||[])}}catch(re){console.error("Search failed",re)}finally{l(!1)}},300),[]),B=be=>{const re=be.target.value;i(re),re.length>=2?(l(!0),F(re)):(s([]),l(!1))},$=b.useCallback(async be=>{_(!0);try{const re=await ue(`/api/patient-files/${be}`);if(re.ok){const ve=await re.json();x(ve)}}catch(re){console.error("Failed to fetch files",re)}finally{_(!1)}},[]),L=be=>{u({id:be.id,name:be.name,age:be.age,gender:be.gender,phone:be.phone,token:be.token}),i(""),I(""),s([]),A(null),C("idle"),p([]),$(be.id)},V=()=>{u(null),p([]),x([]),C("idle")};Se.useEffect(()=>{if(t.state&&t.state.patient){const be=t.state.patient;L(be)}},[t.state]);const H=be=>{if(be.target.files){const re=Array.from(be.target.files);p(ve=>[...ve,...re]),C("idle")}},te=be=>{p(re=>re.filter((ve,ce)=>ce!==be))},X=async be=>{if(confirm("Are you sure you want to delete this file?"))try{(await ue(`/api/patient-files/${be}`,{method:"DELETE"})).ok?x(ve=>ve.filter(ce=>ce.id!==be)):alert("Failed to delete file.")}catch(re){console.error("Delete error",re),alert("Error deleting file.")}},q=be=>be.startsWith("image/")?r.jsx(oR,{size:20}):be==="application/pdf"?r.jsx(ha,{size:20}):be.startsWith("video/")?r.jsx(RJ,{size:20}):be.startsWith("audio/")?r.jsx(vZ,{size:20}):r.jsx(AC,{size:20}),W=be=>{if(be===0)return"0 Bytes";const re=1024,ve=["Bytes","KB","MB","GB"],ce=Math.floor(Math.log(be)/Math.log(re));return parseFloat((be/Math.pow(re,ce)).toFixed(2))+" "+ve[ce]},ae=async()=>{if(!(!c||f.length===0)){j(!0),A(null),C("idle");try{const be=new FormData;f.forEach(ve=>{be.append("files",ve)});const re=await ue(`/api/patient-files/${c.id}`,{method:"POST",body:be});if(re.ok){C("success");const ve=await re.json();ve.files&&x(ce=>[...ve.files,...ce]),setTimeout(()=>{p([]),C("idle")},1500)}else throw new Error("Upload failed")}catch(be){console.error("Upload error",be),A("Failed to upload files. Please try again."),C("error")}finally{j(!1)}}},[G,z]=b.useState(null),[le,je]=b.useState(""),Y=b.useRef(null),Oe=()=>{Y.current&&(Y.current.value="",Y.current.click())},Ke=be=>{z(be.id),je(be.original_name)},Me=()=>{z(null),je("")},Ie=async be=>{if(le.trim())try{(await ue(`/api/patient-files/${be}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:le})})).ok?(x(ve=>ve.map(ce=>ce.id===be?{...ce,original_name:le}:ce)),z(null)):alert("Failed to rename file.")}catch(re){console.error("Rename error",re),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>e(-1),className:"back-button",children:[r.jsx(rn,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Patient Files"})]})}),c?r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"selected-patient-header",children:[r.jsx("div",{className:"patient-avatar",children:c.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"selected-patient-info",children:[r.jsx("h2",{className:"selected-patient-name",children:c.name}),r.jsxs("div",{className:"selected-patient-details",children:[r.jsxs("span",{children:["Token: #",c.token||"NA"]}),c.gender&&r.jsxs("span",{children:[" ",c.gender]}),c.age&&r.jsxs("span",{children:[" ",c.age," yrs"]}),c.phone&&r.jsxs("span",{children:[" ",c.phone]})]}),r.jsx("input",{ref:Y,type:"file",multiple:!0,onChange:H,style:{display:"none"}})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Oe,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx(Xk,{size:18}),r.jsx("span",{children:"Upload"})]}),r.jsx("button",{onClick:V,className:"secondary-btn change-patient-btn",children:"Change Patient"})]})]}),(g.length>0||w)&&r.jsxs("div",{className:"existing-files-section mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(AC,{className:"text-indigo-500",size:20}),"Uploaded Files (",g.length,")"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(Wn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search in Drive...",value:P,onChange:be=>I(be.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),w?r.jsx("div",{className:"flex justify-center p-8",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx(Z,{width:300,height:20}),r.jsx(Z,{width:300,height:20}),r.jsx(Z,{width:300,height:20})]})}):r.jsxs("div",{className:"file-grid",children:[g.filter(be=>be.original_name.toLowerCase().includes(P.toLowerCase())).map(be=>{const re=be.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[re?r.jsx("img",{src:be.url,alt:be.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:q(be.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:be.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-icon-btn download",title:"Download",children:r.jsx(Lq,{size:18})}),r.jsx("button",{onClick:()=>Ke(be),className:"action-icon-btn rename",title:"Rename",children:r.jsx(kZ,{size:18})}),r.jsx("button",{onClick:()=>X(be.id),className:"action-icon-btn delete",title:"Delete",children:r.jsx(Yn,{size:18})})]})]}),r.jsx("div",{className:"file-card-meta",children:G===be.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:le,onChange:ve=>je(ve.target.value),className:"rename-input",autoFocus:!0,onKeyDown:ve=>{ve.key==="Enter"&&Ie(be.id),ve.key==="Escape"&&Me()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>Ie(be.id),className:"icon-btn text-green-600",children:r.jsx(Ml,{size:14})}),r.jsx("button",{onClick:Me,className:"icon-btn text-red-500",children:r.jsx(Ut,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:re?r.jsx(oR,{size:16,className:"text-purple-500"}):q(be.mime_type)}),r.jsx("a",{href:be.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:be.original_name,children:be.original_name})]})})]},be.id)}),g.filter(be=>be.original_name.toLowerCase().includes(P.toLowerCase())).length===0&&P&&r.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(Wn,{size:48,className:"text-slate-200"}),r.jsxs("p",{children:['No files found matching "',P,'"']})]})})]})]}),(f.length>0||T==="success"||O)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:f.length>0?"Pending Uploads":"Upload Status"}),O&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(Zr,{size:20}),O]}),T==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Ml,{size:20}),"Files uploaded successfully!"]}),f.length>0&&r.jsx("div",{className:"file-list",children:f.map((be,re)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(AC,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:be.name,children:be.name}),r.jsx("div",{className:"file-size",children:W(be.size)})]}),r.jsx("button",{onClick:()=>te(re),className:"remove-file-btn",title:"Remove file",children:r.jsx(Ut,{size:16})})]},re))}),f.length>0&&r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{onClick:()=>p([]),className:"secondary-btn",disabled:v,children:"Clear"}),r.jsx("button",{onClick:ae,className:"primary-btn",disabled:v,children:v?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx(Xk,{size:18}),"Upload ",f.length," File",f.length!==1?"s":""]})})]})]})]}):r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-slate-700",children:[r.jsx(Wn,{className:"text-indigo-500"}),"Search Patient"]}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Wn,{className:"search-icon-files",size:20}),r.jsx("input",{type:"text",placeholder:"Enter patient name, phone, or token...",value:n,onChange:B,className:"search-input",autoFocus:!0})]}),o?r.jsx("div",{className:"patient-results-list",children:[1,2,3].map(be=>r.jsxs("div",{className:"patient-result-item",style:{cursor:"default"},children:[r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:100,height:16})]},be))}):a.length>0&&r.jsx("ul",{className:"patient-results-list",children:a.map(be=>r.jsxs("li",{className:"patient-result-item",onClick:()=>L(be),children:[r.jsxs("div",{children:[r.jsx("div",{className:"patient-name-text",children:be.name}),r.jsxs("div",{className:"patient-meta",children:[r.jsxs("span",{children:["#",be.token||"N/A"]}),be.gender&&r.jsx("span",{children:be.gender}),be.age&&r.jsxs("span",{children:[be.age," yrs"]})]})]}),r.jsx("div",{className:"patient-phone",children:be.phone})]},be.id))}),n.length>=2&&!o&&a.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"30px",color:"#94a3b8"},children:['No patients found matching "',n,'"']})]})]})},aD=b.lazy(()=>eN(()=>import("./AddPatientPage-DUwF_Rqh.js"),__vite__mapDeps([2,3]))),Iz=b.lazy(()=>eN(()=>import("./EditComplaintPage-D5HRWji7.js"),__vite__mapDeps([0,1])));function f5e(){const[e,t]=b.useState(!1),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(!1),f=O=>{i(O),t(!0),O.role==="admin"&&!O.has_seen_tutorial&&u(!0)},p=()=>{t(!1),i(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};b.useEffect(()=>{const O=localStorage.getItem("authToken"),A=localStorage.getItem("currentUser");if(O&&A)try{const P=JSON.parse(A);i(P),t(!0),P.role==="admin"&&!P.has_seen_tutorial&&u(!0)}catch(P){console.error("Error parsing stored user data:",P),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}s(!1)},[]);const{data:g}=WMe(e&&!!n);b.useEffect(()=>{g?l(g):e||l(null)},[g,e]);const[x,v]=b.useState(null),[j,w]=b.useState(!1);b.useEffect(()=>{const O=A=>{A.preventDefault(),v(A),w(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",O),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),w(!1)),()=>{window.removeEventListener("beforeinstallprompt",O)}},[]),b.useEffect(()=>{const O=window.matchMedia("(prefers-color-scheme: dark)"),A=()=>{O.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return A(),O.addEventListener("change",A),()=>{O.removeEventListener("change",A),document.body.classList.remove("dark-mode")}},[]);const _=b.useCallback(async()=>{if(!x){console.log("Install prompt event not available.");return}const O=x;O.prompt();const{outcome:A}=await O.userChoice;console.log(`User response to the install prompt: ${A}`),v(null),w(!1)},[x]),T=async()=>{if(n)try{(await ue(`/api/users/${n.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(i(A=>A?{...A,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...n,has_seen_tutorial:!0})),u(!1)):console.error("Failed to update tutorial status on backend.")}catch(O){console.error("Error marking tutorial as seen:",O)}};return a?r.jsx(Lm,{}):r.jsx(cY,{clientId:"277898779560-33obduhn8r758rini4qagetdrupvisri.apps.googleusercontent.com",children:r.jsx(qQ,{children:r.jsx(BQ,{children:r.jsx(zQ,{children:r.jsxs(AQ,{children:[r.jsx($Q,{children:r.jsxs(Mm,{children:[r.jsx(vt,{path:"/login",element:e?r.jsx(an,{to:"/dashboard"}):r.jsx(vIe,{onLoginSuccess:f})}),r.jsx(vt,{path:"/register",element:e?r.jsx(an,{to:"/dashboard"}):r.jsx(bIe,{})}),r.jsx(vt,{path:"/handle-complaint-url",element:e?r.jsx(W3e,{}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/live-api",element:e?r.jsx($xe,{}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/create-lab-order",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(xW,{currentUser:n})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/manage-admission",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(fI,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/lab/report/:orderId",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Tz,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/lab/enter-report/:orderId",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Tz,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/add-patient",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(b.Suspense,{fallback:r.jsx(Lm,{}),children:r.jsx(aD,{})})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/billing",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(G4e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/edit-complaint/:recordId",element:e&&n?r.jsx(b.Suspense,{fallback:r.jsx(Lm,{}),children:r.jsx(Iz,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/edit-complaint/patient/:patientId",element:e&&n?r.jsx(b.Suspense,{fallback:r.jsx(Lm,{}),children:r.jsx(Iz,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/edit-pharmacy-order/:orderId",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx($W,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/guide",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(r5e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/*",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:p5e(n.role,n,ue)}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/lab/view-report/:orderId",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(n3e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/lab/search-report",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(r3e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/patient/:patientId/lab-reports",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(i3e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/patient/:patientId/pharmacy-orders",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(W4e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/inventory",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(BW,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/inventory/add",element:e&&n?r.jsx(an,{to:"/dashboard/purchase",replace:!0}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/dental",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(u5e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/dental-billing/:id",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(d5e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/inventory/edit/:id",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(TW,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/lab-inventory",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(mI,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/patient/:patientId/complaints",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(D4e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/patient/:patientId/admission-bill/:billId",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Az,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/patient/:patientId/admission-billing",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Az,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/start-subscription/:patientId",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(v3e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/start-clinic-subscription",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(S3e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/refill-reminders",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(G3e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/create-custom-bill",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(yW,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/pharmacy-billing/:orderId",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(PLe,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/lab-billing/:orderId",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(OLe,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/doctor-billing/:queueId",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(MLe,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/custom-tables",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(f6e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/custom-tables/:id",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(p6e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboards",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(m6e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboards/new",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Dz,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboards/:id",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(x6e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboards/:id/edit",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(Dz,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/analysis",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(h6e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/clinic-hub",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(ILe,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"/dashboard/files",element:e&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(h5e,{})}):r.jsx(an,{to:"/login"})}),r.jsx(vt,{path:"*",element:r.jsx(an,{to:e?"/dashboard":"/login"})})]})}),c&&(n==null?void 0:n.role)==="admin"&&r.jsx(V3e,{onClose:()=>u(!1),onMarkAsSeen:T}),e&&n&&r.jsx(m5e,{user:n}),e&&n&&r.jsx(AMe,{user:n})]})})})})})}const p5e=(e,t,n)=>{switch(e){case"superadmin":return r.jsxs(Mm,{children:[r.jsx(vt,{index:!0,element:r.jsx(B3e,{})}),r.jsx(vt,{path:"clinic-subscriptions",element:r.jsx(b3e,{})}),r.jsx(vt,{path:"clinic-subscriptions/add",element:r.jsx(j3e,{})}),r.jsx(vt,{path:"clinic-subscriptions/edit/:id",element:r.jsx(w3e,{})}),r.jsx(vt,{path:"users",element:r.jsx(N3e,{})})," ",r.jsx(vt,{path:"*",element:r.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return r.jsxs(Mm,{children:[r.jsx(vt,{index:!0,element:r.jsx(XIe,{})}),r.jsx(vt,{path:"search-patient",element:r.jsx(Ev,{})}),r.jsx(vt,{path:"patients",element:r.jsx(tD,{})}),r.jsx(vt,{path:"doctor",element:r.jsx(ow,{})}),r.jsx(vt,{path:"staff",element:r.jsx(o3e,{fetchWithAuth:n})}),r.jsx(vt,{path:"staff/add",element:r.jsx(P4e,{clinicId:t==null?void 0:t.clinic_id})}),r.jsx(vt,{path:"staff/edit/:id",element:r.jsx(O4e,{})}),r.jsx(vt,{path:"roles",element:r.jsx(v6e,{})}),r.jsx(vt,{path:"patients/add",element:r.jsx(b.Suspense,{fallback:r.jsx(Lm,{}),children:r.jsx(aD,{})})}),r.jsx(vt,{path:"inventory",element:r.jsx(CW,{})}),r.jsx(vt,{path:"inventory/edit/:id",element:r.jsx(TW,{})}),r.jsx(vt,{path:"distributors",element:r.jsx(Ez,{})}),r.jsx(vt,{path:"patient-debts",element:r.jsx(Oz,{})})," ",r.jsx(vt,{path:"purchase",element:r.jsx(kz,{})})," ",r.jsx(vt,{path:"queue",element:r.jsx(ow,{})}),r.jsx(vt,{path:"subscriptions",element:r.jsx(g3e,{})}),r.jsx(vt,{path:"subscriptions/add",element:r.jsx(y3e,{})}),r.jsx(vt,{path:"subscriptions/edit/:id",element:r.jsx(x3e,{})}),r.jsx(vt,{path:"manage-admission",element:r.jsx(fI,{})}),r.jsx(vt,{path:"reception",element:r.jsx(pz,{currentUser:t})}),r.jsx(vt,{path:"lab",element:r.jsx(Sz,{})}),r.jsx(vt,{path:"pharmacy-queue",element:r.jsx(Nz,{})}),r.jsx(vt,{path:"*",element:r.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return r.jsxs(Mm,{children:[r.jsx(vt,{index:!0,element:r.jsx(an,{to:"search-patient",replace:!0})}),r.jsx(vt,{path:"search-patient",element:r.jsx(Ev,{})}),r.jsx(vt,{path:"queue",element:r.jsx(ow,{})}),r.jsx(vt,{path:":patientId",element:r.jsx(ow,{})}),r.jsx(vt,{path:"add-patient",element:r.jsx(b.Suspense,{fallback:r.jsx(Lm,{}),children:r.jsx(aD,{})})}),r.jsx(vt,{path:"*",element:r.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return r.jsxs(Mm,{children:[r.jsx(vt,{index:!0,element:r.jsx(pz,{currentUser:t})}),r.jsx(vt,{path:"all-patients",element:r.jsx(tD,{})}),r.jsx(vt,{path:"search-patient",element:r.jsx(Ev,{})}),r.jsx(vt,{path:"*",element:r.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return r.jsx(Sz,{});case"pharmacy":return r.jsxs(Mm,{children:[r.jsx(vt,{index:!0,element:r.jsx(Nz,{})}),r.jsx(vt,{path:"inventory",element:r.jsx(BW,{})}),r.jsx(vt,{path:"settings",element:r.jsx(k4e,{})}),r.jsx(vt,{path:"add-order",element:r.jsx(K4e,{})}),r.jsx(vt,{path:"edit-pharmacy-order/:orderId",element:r.jsx($W,{})}),r.jsx(vt,{path:"orders/:orderId",element:r.jsx(c3e,{})}),r.jsx(vt,{path:"search-patient-records",element:r.jsx(Ev,{})}),r.jsx(vt,{path:"distributors",element:r.jsx(Ez,{})}),r.jsx(vt,{path:"patient-debts",element:r.jsx(Oz,{})})," ",r.jsx(vt,{path:"purchase",element:r.jsx(kz,{})})," ",r.jsx(vt,{path:"*",element:r.jsx(an,{to:"/dashboard",replace:!0})})]});default:return r.jsxs("div",{children:["Unknown role (",e,") or dashboard not implemented."]},e)}},kn=({user:e,onLogout:t,children:n,showInstallPrompt:i,onInstallClick:a,clinicProPlanStatus:s})=>{const o=It(),[l,c]=b.useState(!1),[u,f]=b.useState(window.innerWidth<=768),[p,g]=b.useState(null),[x,v]=b.useState(!1);b.useEffect(()=>yP.subscribe(T=>{v(T)}),[]),b.useEffect(()=>{const T=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),b.useEffect(()=>{(async()=>{if(e!=null&&e.clinic_id)try{const C=await ue("/api/clinics/settings");if(C.ok){const O=await C.json();g(O.logoUrl)}else console.error("Failed to fetch clinic details for display:",C.statusText),g(null)}catch(C){console.error("Error fetching clinic details for display:",C),g(null)}else g(null)})()},[e==null?void 0:e.clinic_id]);const j=()=>{c(!l)},{toggleCommandBar:w,isOpen:_}=$c();return r.jsxs("div",{className:"dashboard-layout",children:[" ",r.jsxs("nav",{className:"app-header no-print",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),o("/dashboard")},className:"logo-container",children:r.jsx("img",{src:p||"/logo.png",alt:"App Logo",className:"logo-image"})}),r.jsxs("div",{className:"title-section",children:[r.jsx("span",{className:"app-title-link",children:"Newtons Ai"}),r.jsxs("span",{className:"user-role-panel",children:["(",e.role.charAt(0).toUpperCase()+e.role.slice(1)," Panel)"]})]})]}),r.jsxs("div",{className:"header-right",children:[i&&r.jsxs("button",{onClick:a,className:"install-button",title:"Install App",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{children:"Install"})]}),r.jsxs("a",{href:"https://store.newtons.in",target:"_blank",rel:"noopener noreferrer",className:"shop-button",title:"Visit Store",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),r.jsx("span",{children:"Shop"})]}),!u&&r.jsxs("button",{onClick:()=>o("/dashboard/guide"),className:"guide-button",title:"User Guide",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),r.jsx("span",{children:"Guide"})]}),s&&(s.hasProPlan?r.jsx("span",{className:"pro-badge",children:"PRO"}):r.jsx("button",{onClick:()=>o("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),!_&&r.jsx("button",{onClick:w,className:"command-bar-button",title:"Search & Commands (Ctrl+K)",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("path",{d:"m21 21-4.3-4.3"})]})}),r.jsx("button",{className:"hamburger-icon",onClick:j,"aria-label":"Open navigation",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),x&&r.jsx("div",{className:"global-loading-bar"})]}),r.jsxs("main",{className:"main-content",children:[r.jsx(NIe,{}),n]}),u?r.jsx(wIe,{user:e,onLogout:t,userRole:e.role,isOpen:l,onClose:j,roleNavigation:dW}):r.jsx(jIe,{user:e,onLogout:t,userRole:e.role,isOpen:l,onClose:j}),!u&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j}),!u&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j})]})},m5e=({user:e})=>{const{isOpen:t,closeAssistant:n}=rN(),i=It(),[a,s]=b.useState(null),[o,l]=b.useState([]);return b.useEffect(()=>{(async()=>{if(e!=null&&e.clinic_id)try{const[u,f]=await Promise.all([ue("/api/clinics/settings"),ue("/api/staff")]);u.ok&&s(await u.json()),f.ok&&l(await f.json())}catch(u){console.error("Failed to fetch initial AI context",u)}})()},[e.clinic_id]),t?r.jsx("div",{className:"ai-assistant-wrapper",children:r.jsx(hW,{onClose:n,settings:a,staffList:o,onSettingsUpdate:()=>{},onStaffUpdate:()=>{},onHighlight:c=>{c.forEach(u=>{if(u.startsWith("navigate_")){const f=u.replace("navigate_","");i(`/dashboard/analysis?section=${f}`)}else{const f=document.getElementById(u);f&&(f.scrollIntoView({behavior:"smooth",block:"center"}),f.classList.add("ai-highlight-glow"),setTimeout(()=>f.classList.remove("ai-highlight-glow"),2e3))}})}})}):null};jK.createRoot(document.getElementById("root")).render(r.jsx(b.StrictMode,{children:r.jsx(GK,{client:aY,children:r.jsx(f5e,{})})}));export{rn as A,Rq as B,qb as C,_f as D,Vm as E,so as F,p9 as G,Fa as H,Qu as I,Wn as J,sR as K,AN as L,Ef as M,zW as N,md as O,kZ as P,pa as Q,Se as R,Z as S,Yn as T,sN as U,ND as V,iN as W,Ut as X,nR as Y,H3e as Z,eu as a,Gq as b,ut as c,Uv as d,io as e,ue as f,qn as g,m9 as h,K3e as i,r as j,vi as k,hr as l,jr as m,FQ as n,kf as o,ZS as p,Vt as q,b as r,$c as s,Ii as t,It as u,us as v,Gr as w,ha as x,Bl as y,hJ as z};

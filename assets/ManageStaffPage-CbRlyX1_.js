import{j as e,S as t}from"./index-B0SGsixC.js";import{u as f,r as a}from"./react-vendor-Cc0P4_ZX.js";/* empty css                        */import{z as y,E as b,W as v,e as w,m as S,p as C,ai as z,F as k,s as E,a8 as A,aC as F}from"./ui-vendor-CZgqa0n4.js";import"./utils-vendor-azd6ta8e.js";import"./ai-vendor-CB5T-uN5.js";import"./chart-vendor-BcjzKorn.js";const I=({fetchWithAuth:n})=>{const r=f(),[c,m]=a.useState(!0),[o,h]=a.useState([]),[x,i]=a.useState(null),[l,j]=a.useState(null),u=a.useCallback(async()=>{m(!0),i(null);try{const g=await(await n("/staff")).json();h(g.map(d=>({...d,id:d._id||d.id})))}catch(s){i(`Failed to load staff data: ${s.message}`),h([])}finally{m(!1)}},[n]);a.useEffect(()=>{u()},[u]),a.useEffect(()=>{if(l){const s=setTimeout(()=>j(null),5e3);return()=>clearTimeout(s)}},[l]);const p=s=>{switch(s){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},N=s=>{switch(s){case"doctor":return e.jsx(F,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return e.jsx(A,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return e.jsx(E,{size:16,className:"mr-2 text-purple-600"});case"lab":return e.jsx(k,{size:16,className:"mr-2 text-yellow-600"});case"admin":return e.jsx(z,{size:16,className:"mr-2 text-teal-600"});default:return e.jsx(C,{size:16,className:"mr-2 text-gray-500"})}};return c?e.jsxs("div",{className:"staff-page-container",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(t,{width:40,height:40,variant:"circular"}),e.jsx(t,{width:200,height:32})]}),e.jsx(t,{width:150,height:40})]}),e.jsx("div",{className:"staff-table-container",children:e.jsxs("table",{className:"staff-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{className:"hidden md:table-cell",children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee (₹)"}),e.jsx("th",{className:"hidden md:table-cell",children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:[1,2,3,4,5].map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(t,{width:120,height:20})}),e.jsx("td",{className:"hidden md:table-cell",children:e.jsx(t,{width:180,height:20})}),e.jsx("td",{children:e.jsx(t,{width:80,height:24,style:{borderRadius:"16px"}})}),e.jsx("td",{className:"hidden md:table-cell",children:e.jsx(t,{width:60,height:20})}),e.jsx("td",{className:"hidden md:table-cell",children:e.jsx(t,{width:60,height:24,style:{borderRadius:"16px"}})}),e.jsx("td",{children:e.jsx(t,{width:80,height:32})})]},s))})]})})]}):e.jsxs("div",{className:"staff-page-container",children:[l&&e.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${l.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[l.type==="success"?e.jsx(y,{size:18,className:"mr-2"}):e.jsx(b,{size:18,className:"mr-2"}),e.jsx("span",{children:l.message}),e.jsx("button",{onClick:()=>j(null),className:"ml-auto text-xl font-bold",children:"×"})]}),x&&e.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[e.jsx(b,{size:18,className:"mr-2 text-red-500"}),x,e.jsx("button",{onClick:()=>i(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:"×"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>r(-1),className:"p-2 rounded-md hover:bg-gray-200",children:e.jsx(v,{size:20})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),e.jsxs("button",{onClick:()=>r("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[e.jsx(w,{size:16,className:"mr-2"})," Add New Staff"]})]}),e.jsx("div",{className:"staff-table-container",children:e.jsxs("table",{className:"staff-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{className:"hidden md:table-cell",children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee (₹)"}),e.jsx("th",{className:"hidden md:table-cell",children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:o.length===0&&!c?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):o.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{className:"hidden md:table-cell",children:s.email}),e.jsx("td",{children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(s.role)}`,children:[N(s.role),s.role.charAt(0).toUpperCase()+s.role.slice(1)]})}),e.jsx("td",{className:"hidden md:table-cell",children:s.role==="doctor"?s.opd_fee?parseFloat(String(s.opd_fee)).toFixed(2):"Not Set":"N/A"}),e.jsx("td",{className:"hidden md:table-cell",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.status==="active"?"Active":"Inactive"})}),e.jsx("td",{className:"actions",children:e.jsxs("button",{onClick:()=>r(`/dashboard/staff/edit/${s.id}`),className:"edit-link",disabled:s.role==="admin",title:"Edit Staff",children:[e.jsx(S,{size:16})," Edit"]})})]},s.id))})]})})]})};export{I as default};
